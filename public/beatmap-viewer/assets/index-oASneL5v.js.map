{"version":3,"mappings":"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","names":["Mask","int","a","UnsignedLEB128","buf","offset","mp","result","shift","d","number","out","byte","n","count","tmp","Replay","content","__publicField","bytes","res","i","present","len","num","length","binary","s","timestamp","percentage","deserializeReplayData","EPOCH","replayLength","replayBinary","decompressed","urlParams","ExtensionType","ExtensionType2","normalizeExtension","ext","normalizeExtensionPriority","defaultPriority","extensions","extensions2","type","_b","_a","handlers","queue","onAdd","onRemove","addHandlers","removeHandlers","map","extension","item","b","index","list","Target","sources","source","browserExt","webworkerExt","ObservablePoint","observer","x","y","p","value","has","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","clearEvent","EventEmitter","names","events","name","l","ee","listeners","a1","a2","a3","a4","a5","args","j","module","PI_2","RAD_TO_DEG","DEG_TO_RAD","Point$1","Point","tempPoint","Matrix","c","tx","ty","array","transpose","pos","newPos","id","angle","cos","sin","c1","tx1","matrix","b1","d1","b2","c2","d2","pivotX","pivotY","scaleX","scaleY","rotation","skewX","skewY","transform","pivot","delta","identityMatrix","tempMatrix","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","init","row","_ux","_uy","_vx","_vy","k","mat","groupD8","ind","rotationSecond","rotationFirst","dx","dy","rect","sourceFrame","width","height","frameX","frameY","frameWidth","frameHeight","tempPoints","Rectangle","bounds","rectangle","strokeWidth","alignment","_x","_y","strokeWidthOuter","strokeWidthInner","outerLeft","outerRight","outerTop","outerBottom","innerLeft","innerRight","innerTop","innerBottom","other","x02","y02","x0","x1","y0","y1","lt","lb","rt","rb","nx","ny","n00","n10","n01","n11","mx","my","m00","m10","m01","m11","paddingX","paddingY","x2","y2","resolution","eps","uidCache","uid","warnings","v8_0_0","v8_3_4","deprecationState","deprecation","version","message","ignoreDepth","stack","deprecationMessage","useGroup","NOOP","nextPow2","v","isPow2","definedProps","obj","key","idHash","createResourceIdFromString","_TextureStyle","options","bigKey","TextureStyle","_TextureSource","resource","newPixelWidth","newPixelHeight","_resource","TextureSource","BufferImageSource","buffer","format","tempMat","TextureMatrix","texture","clampMargin","uvs","tex","orig","trim","texBase","frame","margin","label","defaultAnchor","defaultBorders","rotate","dynamic","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","Texture","updateQuadBounds","anchor","sourceWidth","sourceHeight","defaultMatrix","Bounds","minX","minY","maxX","maxY","mask","left","right","top","bottom","vertexData","beginOffset","endOffset","localX","localY","r","t","e","u","o","h","g","f","m","N","M","H","$","w","S","namesPlugin","extend","_Color","value1","value2","type1","keys1","keys2","alpha","applyToRGB","hexString","alphaString","match","color","colord","min","max","Color","cullingMixin","warnCount","maxWarnings","warn","GlobalResourceRegistry","pool","Pool","ClassType","initialSize","total","data","PoolGroupClass","Class","stats","BigPool","cacheAsTextureMixin","val","removeItems","arr","startIdx","removeCount","childrenHelperMixin","beginIndex","endIndex","end","range","removed","child","renderGroup","children","currentIndex","child2","index1","index2","childMat","newMatrix","oldChild","newChild","collectRenderablesMixin","instructionSet","renderer","currentLayer","renderPipes","effect","FilterEffect","MaskEffectManagerClass","test","MaskEffectManager","effectsMixin","hasFilters","hadFilters","didChange","findMixin","deep","found","matrixPool","boundsPool","getFastGlobalBoundsMixin","factorRenderLayers","localBounds","manageEffects","viewBounds","advanced","getGlobalBounds","target","skipUpdateTransform","parentTransform","pooledMatrix","updateTransformBackwards","_getGlobalBounds","worldTransform","parentBounds","preserveBounds","renderableBounds","parent","multiplyHexColors","color1","color2","r1","g1","r2","g2","WHITE_BGR","multiplyColors","localBGRColor","parentBGRColor","bgr2rgb","getGlobalMixin","skipUpdate","current","getLocalBounds","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","localTransform","checkChildrenDidChange","container","previousData","measureMixin","localWidth","sign","localHeight","localBoundsCacheData","onRenderMixin","func","sortMixin","sortChildren","toLocalGlobalMixin","point","position","globalMatrix","from","InstructionSet","instruction","TexturePoolClass","textureOptions","pixelWidth","pixelHeight","antialias","textureSource","po2Width","po2Height","renderTexture","resetStyle","destroyTextures","textures","TexturePool","RenderGroup","root","cachedParent","childrenAtDepth","renderGroupChild","childrenToUpdate","renderable","parentCacheAsTexture","assignWithIgnore","ignore","defaultSkew","defaultPivot","defaultScale","defaultOrigin","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","Container","parentRenderGroup","size","skew","opts","localTransformChangeId","scale","origin","sx","sy","px","py","ox","oy","bgr","valueNumber","oldChildren","ViewContainer","Sprite","roundPixels","rest","skipCache","currentTexture","destroyTextureSource","tempBounds","addMaskBounds","boundsToMask","addMaskLocalBounds","localRoot","relativeMask","getMatrixRelativeToParent","AlphaMask","hitTestFn","ColorMask","StencilMask","BrowserAdapter","canvas","url","xml","currentAdapter","DOMAdapter","adapter","CanvasSource","didResize","ImageSource","UPDATE_PRIORITY","UPDATE_PRIORITY2","TickerListener","priority","ticker","redirect","previous","hard","_Ticker","time","currentTime","elapsedMS","head","fps","minFPS","minFPMS","maxFPS","shared","system","Ticker","promise","detectVideoAlphaMode","gl","video","resolve","video2","framebuffer","pixel","_VideoSource","reject","VideoSource","convertToList","input","forceTransform","CacheClass","keys","cacheableAssets","parser","cacheableMap","key2","cacheKeys","cachedAssets","cacheMap","Cache","textureSourceFrom","hasResource","Source","resourceToTexture","textureFrom","LoaderParserPriority","LoaderParserPriority2","assertPath","path2","removeUrlParams","escapeRegExp","string","replaceAll","str","find","replace","normalizeStringPosix","allowAboveRoot","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","path","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","protocol","isAbsolute","trailingSeparator","segments","joined","arg","prevArg","hasRoot","matchedSlash","proto","origpath","start","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","ret","processX","base","ids","depth","tags","createStringVariations","regex","vars","split","isSingleItem","Resolver","bundleId","assetId","assetBundleId","bundleIdentifier","preferOrders","prefer","basePath","rootPath","searchParams","queryValues","asset","alias","src","manifest","bundle","assets","assetNames","convertedAssets","srcs","aliases","bundleAssetId","bundleIds","keyCheck","userDefinedLoadParser","userDefinedParser","srcsToUse","src2","aliasesToUse","resolvedAssets","formattedAsset","singleAsset","results","preferredOrder","priorityKey","filteredAssets","preferred","preference","paramConnector","assetData","loadParser","getUrlExtension","copySearchParams","targetUrl","sourceUrl","_Spritesheet","optionsOrTexture","arg1","cachePrefix","metaResolution","initialFrameIndex","frameIndex","maxFrames","sourceSize","animations","animName","frameName","callback","destroyBase","Spritesheet","validImages","getCacheableAssets","ignoreMultiPack","out2","spritesheetAsset","loader","imageTexture","imageFilename","imagePath","spritesheet","multiPacks","promises","itemUrl","sp","_resolvedAsset","idCounts","createIdFromString","groupId","getTestContext","maxFragmentPrecision","getMaxFragmentPrecision","addProgramDefines","isES300","isFragment","ensurePrecision","maxSupportedPrecision","precision","insertVersion","fragmentNameCache","VertexNameCache","setProgramName","nameCache","stripVersion","processes","programCache","_GlProgram","preprocessorOptions","fragment","vertex","processKey","processOptions","GlProgram","attributeFormatData","getAttributeInfoFromFormat","WGSL_TO_VERTEX_TYPES","extractAttributesFromGpuProgram","entryPoint","mainVertStart","arrowFunctionStart","functionArgsSubstring","inputsRegex","extractStructAndGroups","wgsl","linePattern","groupPattern","bindingPattern","namePattern","typePattern","structPattern","structMemberPattern","structName","groups","structs","struct","members","acc","member","name2","group","ShaderStage","ShaderStage2","generateGpuLayoutGroups","layout","generateLayoutHash","removeStructAndGroupDuplicates","vertexStructsAndGroups","fragmentStructsAndGroups","structNameSet","dupeGroupKeySet","GpuProgram","gpuLayout","structsAndGroups","UNIFORM_TYPES_VALUES","UNIFORM_TYPES_MAP","getDefaultUniformValue","_UniformGroup","uniformStructures","uniforms","uniformData","arrayMatch","innerType","UniformGroup","BindGroup","resources","keyParts","currentResource","tick","RendererType","RendererType2","Shader","gpuProgram","glProgram","compatibleRenderers","groupMap","nameHash","uniformName","groupData","bindTick","groupIndex","bindIndex","uniformsOut","destroyPrograms","bindGroup","gpu","blendModeIds","BLEND","OFFSET","CULLING","DEPTH_TEST","WINDING","DEPTH_MASK","_State","state","State","_Filter","filterManager","output","clearMode","Filter","environments","loadEnvironmentExtensions","skip","env","unsafeEval","unsafeEvalSupported","earcut","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","triangles","invSize","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","area","ear","pass","indexCurve","stop","prev","next","isEarHashed","isEar","cureLocalIntersections","splitEarcut","ax","bx","cx","ay","by","cy","pointInTriangleExceptFirst","minZ","zOrder","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","getLeftmost","compareXYSlope","eliminateHole","aSlope","bSlope","hole","bridge","findHoleBridge","bridgeReverse","hx","hy","qx","tanMin","pointInTriangle","tan","sectorContainsSector","sortLinked","numMerges","inSize","tail","q","pSize","qSize","leftmost","intersectsPolygon","middleInside","p1","p2","q1","q2","o1","o2","o3","o4","onSegment","inside","createNode","an","bp","sum","earcutModule","CLEAR","CLEAR2","SystemRunner","a0","a6","a7","items","defaultRunners","_AbstractRenderer","config","combinedRunners","systemName","deprecated","isRGBAArray","desiredScreenWidth","desiredScreenHeight","previousResolution","clear","clearColor","runnerIds","runnerId","systems","ClassRef","pipes","pipeAdaptors","adaptors","adaptor","pipe","PipeClass","Adaptor","runner","AbstractRenderer","_isWebGLSupported","isWebGLSupported","failIfMajorPerformanceCaveat","contextOptions","success","loseContext","_isWebGPUSupported","isWebGPUSupported","renderPriority","autoDetectRenderer","RendererClass","finalOptions","rendererType","WebGPURenderer","__vitePreload","WebGLRenderer","VERSION","ApplicationInitHook","RendererInitHook","_Application","plugin","rendererDestroyOptions","plugins","Application","AbstractBitmapFont","page","LRU","ttl","resetTtl","bypass","evicted","lru","genericFontFamilies","fontStringFromTextStyle","style","fontSizeString","fontFamilies","fontFamily","contextSettings","_CanvasTextMetrics","text","lines","lineWidths","lineHeight","maxLineWidth","fontProperties","wordWrap","textKey","font","lineWidth","measurements","letterSpacing","useExperimentalLetterSpacing","metrics","metricWidth","actualBoundingBoxLeft","boundsWidth","line","cache","whiteSpace","collapseSpaces","collapseNewlines","canPrependSpaces","wordWrapWidth","tokens","token","currIsBreakingSpace","lastIsBreakingSpace","tokenWidth","characters","char","lastChar","nextChar","characterWidth","isLastToken","newLine","_nextChar","_token","breakWords","_char","_index","_breakWords","properties","segmenter","segment","CanvasTextMetrics","emptyColorStops","_FillGradient","ensureGradientOptions","flip","temp","colorStops","defaultSize","getCanvas","gradient","addColorStops","dist","r0","FillGradient","repetitionMap","FillPattern","repetition","parseSvgPath","parse","_","command","parseValues","numbers","parseSVGPath","svgPath","commands","subpaths","currentSubPath","lastX","lastY","Circle","radius","outerWidth","distance","circle","Ellipse","halfWidth","halfHeight","normx","normy","strokeOuterWidth","strokeInnerWidth","innerHorizontal","innerVertical","outerHorizontal","outerVertical","normalizedX","normalizedY","innerEllipse","outerEllipse","ellipse","squaredDistanceToLineSegment","dot","lenSq","param","xx","yy","tempRect","tempRect2","Polygon","points","flat","il","polygon","thisBounds","otherBounds","xi","yi","xj","yj","strokeWidthSquared","rightWidthSquared","leftWidthSquared","iterationLength","distanceSquared","pointsDesc","currentPoint","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","innerWidth","innerHeight","rightBound","bottomBound","cachedGroups","getTextureBatchBindGroup","maxTextures","generateTextureBatchBindGroup","bindGroupResources","ViewableBuffer","sizeOrBuffer","fastCopy","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","remainingBytes","sourceUint8View","BLEND_TO_NPM","STENCIL_MODES","STENCIL_MODES2","getAdjustedBlendModeBlend","blendMode","fragTemplate","generateIfTestSrc","maxIfs","checkMaxIfStatementsInShader","shader","fragmentSrc","maxTexturesPerBatchCache","getMaxTexturesPerBatch","BatchTextureArray","Batch","batchPool","batchPoolIndex","getBatchFromPool","returnBatchToPool","batch","BATCH_TICK","_Batcher","attributesInitialSize","indicesInitialSize","batchableObject","textureId","attributeBuffer","elements","textureBatch","firstElement","topology","f32","u32","indexBuffer","action","element","adjustedBlendMode","breakRequired","indexStart","indexSize","newSize","newArrayBuffer","newIndexBuffer","indicesOffset","indices","indexOffset","attributeOffset","Batcher","BufferUsage","BufferUsage2","usage","shrinkToFit","mappedAtCreation","syncGPU","oldData","sizeInBytes","ensureIsBuffer","Buffer","getGeometryBounds","geometry","attributeId","attribute","byteSize","stride","ensureIsAttribute","Geometry","attributes","attributeOption","destroyBuffers","placeHolderBufferData","placeHolderIndexData","BatchGeometry","addBits","srcParts","parts","part","sanitisedPart","findHooksRx","compileHooks","programSrc","hook","extractInputs","fragmentSource","compileInputs","fragments","template","sort","mainInput","finalString","inValue","cleanedString","extractOutputs","extractVariableName","stripVariable","compileOutputs","mainStruct","mainStart","mainEnd","compiledCode","injectBits","templateSrc","fragmentParts","bitCacheMap","CACHE_UID","compileHighShader","bits","cacheId","generateCacheId","compileInputsAndOutputs","compileBits","compileHighShaderGl","vertexFragments","shaderBit","fragmentFragments","compiledVertex","compiledFragment","highFragment","vertexParts","vertexGPUTemplate","fragmentGPUTemplate","vertexGlTemplate","fragmentGlTemplate","globalUniformsBit","globalUniformsBitGl","compileHighShaderGpuProgram","compileHighShaderGlProgram","colorBit","colorBitGl","textureBatchBitGpuCache","generateBindingSrc","bindingIndex","generateSampleSrc","generateTextureBatchBit","textureBatchBitGlCache","generateSampleGlSrc","generateTextureBatchBitGl","roundPixelsBit","roundPixelsBitGl","batchSamplersUniformGroupHash","getBatchSamplersUniformGroup","batchSamplersUniformGroup","sampleValues","DefaultShader","defaultShader","_DefaultBatcher","float32View","uint32View","textureIdAndRound","wt","positions","argb","i2","w0","w1","h0","h1","DefaultBatcher","buildUvs","vertices","verticesStride","verticesOffset","uvsOffset","uvsStride","buildSimpleUvs","transformVertices","BatchableGraphics","rgb","gpuBuffer","buildCircle","shape","rx","ry","roundedRect","j1","j2","j3","j4","y22","x12","x22","y12","centerX","centerY","centerIndex","buildEllipse","buildRoundedRectangle","closePointEps","curveEps","getOrientationOfPoints","square","innerWeight","outerWeight","verts","ix","iy","exx","eyy","eix","eiy","eox","eoy","round","ex","ey","cx2p0x","cy2p0y","angle0","angle1","startAngle","angleDiff","absAngleDiff","segCount","angleInc","buildLine","lineStyle","flipAlignment","closed","orientation","firstPoint","lastPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","ratio","dx0","dy0","dx1","dy1","cross","pDist","imx","imy","omx","omy","smallerInsideSegmentSq","insideWeight","smallerInsideDiagonalSq","eps2","buildPixelLine","fx","fy","lx","ly","closePath","triangulateWithHoles","holes","emptyArray","buildPolygon","buildRectangle","rectData","verticesIndex","buildTriangle","tempTextureMatrix","generateTextureMatrix","textureMatrix","mTx","mTy","sourceStyle","shapeBuilders","buildContextBatches","gpuContext","geometryData","batches","addTextureToGeometryData","isStroke","shapePath","addShapePathToGeometryData","build","vertOffset","textureUvs","graphicsBatch","close","otherPoints","getHoleArrays","holePoints","holePrimitives","holeArrays","holePrimitive","GpuGraphicsContext","GraphicsContextRenderData","_GraphicsContextSystem","batchMode","graphicsData","vertexSize","batcher","drawBatches","GraphicsContextSystem","RECURSION_LIMIT","FLT_EPSILON","PATH_DISTANCE_EPSILON","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","smoothing","distanceTolerance","begin","recursive","x3","y3","x4","y4","level","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","buildAdaptiveQuadratic","buildArc","steps","cs","sn","buildArcTo","fromX","mm","dd","cc","tt","k1","k2","qy","endAngle","TAU","mapToEllipse","cosPhi","sinPhi","xp","yp","approxUnitArc","ang1","ang2","vectorAngle","getArcCenter","largeArcFlag","sweepFlag","pxp","pyp","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","buildArcToSvg","xAxisRotation","lambda","outCurvePoint","curve","roundedShapeArc","vecFrom","pp","sharpCorner","pRadius","p3","v1","v2","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeQuadraticCurve","pointLerp","numPoints","thisPoint","nextPoint","lastEdgeLength","lastOffsetDistance","nextEdgeLength","nextOffsetDistance","tempRectangle","ShapePath","graphicsPath2D","fromY","counterclockwise","currentPoly","shapePrimitives","mainShape","shapePrimitive","mainPolygon","sides","corner","sideLength","internalAngle","useQuadratic","fillet","maxFillet","inset","dir","chamfer","radiusX","radiusY","lastShape","tempX","boundsRect","GraphicsPath","instructions","signed","currentX","currentY","cpx1","cpy1","innerRadius","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","parseSVGFloatAttribute","svg","defaultValue","parseSVGDefinitions","session","definitions","definition","parseLinearGradient","parseRadialGradient","gradientUnit","_child","extractSvgUrlId","styleAttributes","parseSVGStyle","strokeStyle","fillStyle","parseAttribute","styleParts","stylePart","id2","checkForNestedPattern","subpathsWithArea","areas","largestArea","secondArea","smallestArea","largestToSecondRatio","secondToSmallestRatio","extractSubpaths","pathData","calculatePathArea","coords","xs","ys","appendSVGPath","graphicsPath","tempPath","SVGParser","graphicsContext","div","renderChildren","f1","s1","noStyle","pointsString","fillRule","hasExplicitEvenodd","hasMultipleSubpaths","subpath","isMainShape","newPath","isHole","useEvenoddForGraphicsPath","isColorLike","isFillPattern","isFillGradient","isTexture","handleColorLike","fill","defaultStyle","handleTexture","handleFillPattern","handleFillGradient","handleFillObject","toFillStyle","objectStyle","toStrokeStyle","miterLimit","cap","join","pixelLine","tmpPoint","_GraphicsContext","clone","tint","dw","dh","holePath","transformedX","transformedY","cpx","cpy","outerPadding","_bounds","hasHit","shapes","transformedPoint","holeShapes","GraphicsContext","_TextStyle","convertV7Tov8Style","fullStyle","thisKey","filterPadding","_c","_d","cb","property","newValue","TextStyle","oldStyle","defaults","gradientFill","fillGradientStops","fills","CanvasPoolClass","canvasOptions","minWidth","minHeight","canvasAndContext","CanvasPool","PRECISION","getCanvasFillStyle","textMetrics","padding","fillPattern","pattern","fillGradient","isLinear","isLocal","isNearlyVertical","center","outerCenter","outerRadius","globalStop","_DynamicBitmapFont","dynamicOptions","requestedFontSize","chars","charList","self","pageData","currentMaxCharHeight","fontScale","skipTexture","maxTextureWidth","maxTextureHeight","textureGlyphWidth","paddedWidth","paddedHeight","pageData2","xAdvance","newChars","measureCache","first","second","amount","textureResolution","stroke","strokeThickness","shadowOptions","dropShadowBlur","dropShadowDistance","descent","removeShadow","shadowBlur","shadowOffsetX","shadowOffsetY","DynamicBitmapFont","getBitmapTextLayout","trimEnd","layoutData","currentLine","previousChar","firstWord","currentWord","adjustedLetterSpacing","adjustedWordWrapWidth","adjustedLineHeight","nextWord","word","nextLine","checkIsOverflow","isEnd","charData","spaceWidth","kerning","nextCharWidth","alignCenter","alignRight","alignJustify","measurementData","indy","spaceIndex","totalSpaces","resolveCharacters","startCode","endCode","fontCount","BitmapFontManagerClass","fontFamilyKey","overrideFill","styleCopy","fnt","dynamicFont","bitmapFont","textStyle","flatChars","cacheKey","BitmapFontManager","BitmapFont","textureFrame","textureRotate","bitmapFontTextParser","txt","rawData","attributeList","itemData","strValue","floatValue","info","common","distanceField","charNode","letter","bitmapFontXMLParser","bitmapFontXMLStringParser","validExtensions","bitmapFontCachePlugin","loadBitmapFont","bitmapFontData","pages","textureUrls","pageFile","loadedTextures","_options","BackgroundLoader$1","verbose","assetUrls","toLoad","toLoadAmount","cacheTextureArray","testImageFormat","imageData","image","blob","detectAvif","formats","imageFormats","detectDefaults","inWorker","testVideoFormat","mimeType","detectMp4","detectOgv","detectWebm","detectWebp","Loader","parserX","parser2","assetsToLoadIn","onProgress","assetsToLoad","assetsToUnloadIn","loadPromise","loadedAsset","hash","checkDataUrl","mimes","mime","checkExtension","tempURL","validJSONExtension","validJSONMIME","loadJson","validTXTExtension","validTXTMIME","loadTxt","validWeights","validFontExtensions","validFontMIMEs","CSS_IDENT_TOKEN_REGEX","getFontFamilyName","nameTokens","valid","fontFamilyName","validURICharactersRegex","encodeURIWhenNeeded","uri","loadWebFont","fonts","fontFaces","weights","weight","cached","entry","getResolutionOfUrl","createTexture","unload","validSVGExtension","validSVGMIME","loadSvg","loadAsGraphics","loadAsTexture","crossOrigin","response","canvasWidth","canvasHeight","_p","svgSource","WORKER_CODE","WORKER_URL","WorkerInstance","UUID","MAX_WORKERS","WorkerManagerClass","worker","WorkerInstance$1","toDo","WorkerManager","validImageExtensions","validImageMIMEs","loadImageBitmap","imageBlob","loadTextures","potentialVideoExtensions","validVideoExtensions","validVideoMIMEs","crossorigin","determineCrossOrigin","preloadVideo","loaded","error","cleanup","err","loc","parsedUrl","getBrowserSupportedVideoExtensions","supportedExtensions","supportedMimes","loadVideoTextures","ve","vm","isValidDataUrl","isValidExtension","videoElement","attributeMap","sourceElement","onCanPlay","resolveTextureUrl","resolveJsonUrl","AssetsClass","BackgroundLoader","resolutionPref","urls","urlArray","resolveResults","_onProgress","resolveResult","values","totalAssetsToLoad","resolveResult2","resolveArray","loadedAssets","detection","preferences","Assets","assetKeyMap","ref","GAUSSIAN_VALUES","generateBlurFragSource","kernelSize","kernel","halfLength","fragSource","blurLoop","blur","vertTemplate","generateBlurVertSource","vertSource","generateBlurGlProgram","horizontal","generateBlurProgram","blurStructSource","blurOutSource","blurSamplingSource","kernelIndex","kernelValue","blurStruct","blurOut","blurSampling","finalSource","_BlurFilterPass","tempTexture","flop","shouldClear","BlurFilterPass","BlurFilter","strength","strengthX","strengthY","quality","xStrength","yStrength","v2x","v2y","v1x","v1y","v0x","v0y","dot00","dot01","dot02","dot11","dot12","invDenom","Graphics","method","_MeshGeometry","positionBuffer","uvBuffer","MeshGeometry","Mesh","step","ind0","ind1","ind2","AbstractText","styleClass","ensureTextOptions","_internalCanvas","_internalContext","ensureInternalCanvas","checkRow","checkColumn","getCanvasBoundingBox","CanvasTextGeneratorClass","measured","linePositionX","linePositionY","passesCount","isShadowPass","dsOffsetText","dsOffsetShadow","dropShadowColor","dropShadowAlpha","strokePadding","linePositionYShift","currentPosition","stringArray","previousWidth","currentWidth","currentChar","textStr","CanvasTextGenerator","canvasMeasurement","BitmapText","bitmapMeasurement","ensureAttributes","extractedData","attributeData","ensureStartAndStride","buffers","tempStride","tempStart","RenderTexture","RenderContainer","render","_renderer","TimelineDragWindow","PIXI.Container","PIXI.Graphics","Timeline","Game","selectedList","objList","compareFunc","startTime","endTime","foundIndex","binarySearch","deltaStart","deltaEnd","xStart","xEnd","Component","borderRadius","Button$1","imgURL","PIXI.Assets","sprite","PIXI.Sprite","TimelineZoomer","Button","Clamp","currentLocalStorage","_Texture","hitCircle","circle_1","circle_2","circle_3","sliderBallOutLine","sliderBallContainer","ctx","graphics","PIXI.RenderTexture","PIXI.Color","PIXI.Matrix","loadParallel","loadAsync","Database","ring","arrow","idx","updateKeys","LEGACY_NUM","forIdx","base64","isHD","textureSet","typeEnum","Notification","autoTimeout","dialog","img","button","img2","Easing","power","now","Group","_this","tweenId","tween","preserve","tweenIds","autoStart","Interpolation","p0","Sequence","mainGroup","Tween","_object","_group","duration","overrideStartingValues","prop","_valuesStart","_valuesEnd","_valuesStartRepeat","startValue","startValueIsArray","propType","isInterpolationList","endValues","nestedObject","numChainedTweens","times","yoyo","easingFunction","interpolationFunction","tweens","_i","elapsed","startIsArray","endIsArray","endValue","TWEEN","add","remove","update","exports","_HitSound","hitSoundParam","accm","flag","hitSampleParam","timingPoint","defaultIndex","Beatmap","normalIndex","additionIndex","normalSet","additionSet","hitSound","hs","HitSound","_TimingPoint","TimingPanel","isNeg","minute","mili","PIXI.Text","bg","bgDark","accent","TimingPoint","PIXI.Rectangle","scrolled","TWEEN.Tween","TWEEN.Easing","object","TWEEN.remove","TWEEN.add","binarySearchNearest","rate","deltaY","deltaT","currentTimestamp","predicted","startScroll","previousScroll","scrollBarHeight","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","binarySubdivide","aX","aA","aB","mX1","mX2","currentT","newtonRaphsonIterate","aGuessT","currentSlope","LinearEasing","mY1","mY2","getTForX","intervalStart","currentSample","lastSample","guessForT","initialSlope","Text","renderMode","PIXI.CanvasTextMetrics","FlexBox","factor","_static","plusfactor","centerFactor","toggleMetadataPanel","MetadataPanel","easing","bezier","heightDiff","contentStyle","labelStyle","ascending","descending","bisector","compare1","compare2","zero","lo","hi","mid","ascendingBisect","bisectRight","e10","e5","e2","tickSpec","i1","inc","ticks","reverse","tickIncrement","tickStep","noop","dispatch","Dispatch","parseTypenames","typenames","types","typename","T","get","set","copy","that","xhtml","namespaces","namespace","creatorInherit","document","creatorFixed","fullname","creator","none","selector","selection_select","select","subgroups","subgroup","node","subnode","Selection","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","childFind","childFirst","selection_selectChild","filter","childrenFilter","selection_selectChildren","selection_filter","sparse","selection_enter","EnterNode","datum","constant$1","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","selection","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","classList","ClassList","classedAdd","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","create","constantNull","selection_insert","before","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","selection_datum","contextListener","on","selection_on","dispatchEvent","params","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","selection_selection","define","constructor","factory","prototype","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","rgbn","Rgb","rgba","hsla","rgbConvert","opacity","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","Hsl","hsl","m2","hsl2rgb","clamph","clampt","linear","exponential","gamma","nogamma","interpolateRgb","rgbGamma","colorRgb","numberArray","isNumberArray","genericArray","nb","na","date","interpolateNumber","reA","reB","one","interpolateString","bi","am","bm","bs","interpolate$1","interpolateRound","degrees","identity","decompose","svgNode","parseCss","parseSvg","interpolateTransform","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","interpolateTransformCss","interpolateTransformSvg","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","clearNow","Timer","timer","delay","sleep","timerFlush","wake","nap","poke","t0","t1","t2","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","interrupt","active","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","formatDecimal","formatDecimalParts","coefficient","exponent","formatGroup","grouping","thousands","formatNumerals","numerals","re","formatSpecifier","specifier","FormatSpecifier","formatTrim","prefixExponent","formatPrefixAuto","formatRounded","formatTypes","identity$1","prefixes","formatLocale","locale","currencyPrefix","currencySuffix","decimal","percent","minus","nan","newFormat","align","symbol","comma","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatPrefix","defaultLocale","precisionFixed","precisionPrefix","precisionRound","initRange","domain","constants","unit","normalize","clamper","bimap","d0","polymap","bisect","transformer","interpolateValue","untransform","unknown","clamp","piecewise","rescale","continuous","tickFormat","linearish","prestep","maxIter","Transform","location","closePopup","popup","openPopup","showPopup","timeInput","mapId","Timestamp","digit","PIXI.BitmapText","timeContainer","minutes","seconds","miliseconds","colon","currentDigits","parseTime","lastDigits","ObjectsController","vertexSrc$1","fragmentSrc$1","gpuSrc$1","ProgressBar","fullTime","period","startX","endX","positionsBuffer","colorBuffer","PIXI.Geometry","PIXI.Mesh","PIXI.Shader","PIXI.GlProgram","vertexSrc","PIXI.GpuProgram","gpuSrc","setAudioTime","PlayContainer","isHover","bgColor","accentColor","ApproachCircle","approachCircle","skinType","Skinning","hdScale","colors","approachRateExpandRate","preemptRate","stackDistance","circleBaseScale","HitCircle","positionX","positionY","hitSounds","selected","hitCircleOverlaySprite","hitCircleSprite","NumberSprite","hitCircleContainer","stackHeight","currentStackOffset","lastTimestamp","ScoreParser","evaluation","d3\r\n                    .color","currentPreempt","currentFadeIn","fadeOutTime","currentOpacity","easeOutQuint","currentExpand","easeOutElasticHalf","inputIdx","currentInput","prevInput","additionalMemory","Fixed","Dist","Add","FlipHR","SliderEnd","baseSlider","endPosition","clearSrc","clearVert","clearFrag","topologyStringToId","getGraphicsStateKey","geometryLayout","shaderKey","clearGeometry","clearGl","clearGpu","clearShader","depthFunc","SliderMeshContainer","PIXI.RenderContainer","body","program","device","blendModes","descriptor","PIXI.ensureAttributes","pipeline","base_ox","base_oy","PIXI.State","drawMode","glType","indexLength","drawCircle","drawSlider","DIVIDES","_SliderBody","angleList","curveGeometry","circleGeometry","slider","isSelected","SKIN_TYPE","IS_SELECTED","sliderTrackOverride","borderColor","bodyColor","bodyAlpha","borderWidth","innerColor","outerColor","offsetX","offsetY","curve0","vert","vertUnserialized","addArc","theta_1","theta_2","theta","divs","newv","dx2","dy2","startt","endt","endIdx","lerpValue","scalar","SliderBody","SliderGeometryContainers","SliderBall","sliderFollowCircle","outerRing","bgMask","bgSprite","defaultBallGeometry","defaultBallShader","defaultBall","defaultSpec","defaultNd","defaultContainer","sliderB","sliderFollowSkinScale","alphaB","alphaF","easeOutSine","ReverseArrow","arrowSprite","ringSprite","modulo","pulseRate","checkPoint","baseScale","fadeInTime","spanTime","animationDuration","SliderTick","spanIdx","foundNearestIndex","sampleIdx","timingSampleSet","sampleVol","sampleSet","HitSample","appearTime","expandTime","easeOutElastic","Node","z","diffX","diffY","Vector","binom","coeff","order","calculateCenter","n1","n2","z1","z2","SliderCalculator","nodesList","matched","xString","yString","__","___","nodesString","____","lengthString","nodesRaw","tuple","calculatedLength","perimeter","vec","controlPoints","breakPoints","subPaths","subPath","subPoints","reduced","cummulativeLength","t3","m1x","m1y","m2x","m2y","nodes","Slider","pointLists","sliderType","sliderLength","svMultiplier","baseSV","beatStep","repeat","raw","originalArr","SliderContainer","curr","coord","deltaXE","deltaYE","tanE","deltaXS","deltaYS","tanS","angleE","angleS","revSprite","fillColor","graphic","plist","d3.rgb","currentPercentage","_t","baseTicksList","sliderParts","sliderEndEvalPosition","tickEndDelta","currentTrackPoint","internalInputIdx","sliderPartIdx","sliderPartsEval","firstTrackingTime","pointAtT","accountedPointAtT","nextInput","estimatedInput","LinearEstimation","Spinner","approachCircleContainer","spinner","currentAR","velocityOnPaper","velocityCurrent","zeroCount","rotationCount","scoringRotationCount","previousRotationCount","previousAngle","bonus","bonusV2","OD","RPS","requiredSpins","minSpins","fullSpin","maxAccel","totalScoreFrameVariance","currInput","TranslateToZero","currentAngle","timeDiff","maxAccelThisFrame","ApplyModsToTime","accel","mPI","decay","rotated","currentResult","currentResultV2","handleCanvasDrag","calledFromDraw","start_X","start_Y","selectedObjList","lowerBound","upperBound","coordLowerBound","coordUpperBound","checkCollide","objMeta","drawOffset","frameData","FPSSystem","TWEEN.update","deltaMS","PIXI.ExtensionType","PIXI.extensions","Background","PIXI.BlurFilter","wRatio","hRatio","mode","linear_1","easeInSine_1","easeInSine","easeOutSine_1","easeInOutSine_1","easeInOutSine","easeInQuad_1","easeInQuad","easeOutQuad_1","easeOutQuad","easeInOutQuad_1","easeInOutQuad","easeInCubic_1","easeInCubic","easeOutCubic_1","easeOutCubic","easeInOutCubic_1","easeInOutCubic","easeInQuart_1","easeInQuart","easeOutQuart_1","easeOutQuart","easeInOutQuart_1","easeInOutQuart","easeInQuint_1","easeInQuint","easeOutQuint_1","easeInOutQuint_1","easeInOutQuint","easeInExpo_1","easeInExpo","easeOutExpo_1","easeOutExpo","easeInOutExpo_1","easeInOutExpo","easeInCirc_1","easeInCirc","easeOutCirc_1","easeOutCirc","easeInOutCirc_1","easeInOutCirc","easeInBack_1","easeInBack","easeOutBack_1","easeOutBack","easeInOutBack_1","easeInOutBack","easeInElastic_1","easeInElastic","easeOutElastic_1","easeInOutElastic_1","easeInOutElastic","easeOutBounce_1","easeOutBounce","easeInBounce_1","easeInBounce","easeInOutBounce_1","easeInOutBounce","scaledTime","scaledTime1","magnitude","scaledTime2","_scaledTime","_scaledTime2","FadeCommand","easeFunction","EASINGS","easeOutElasticQuart","MoveCommand","paramsX","paramsY","ScaleCommand","startY","endY","RotateCommand","ColourCommand","paramsR","paramsG","paramsB","ParameterCommand","LoopCommand","loopCount","rawCommands","fade","Storyboard","StoryboardSprite","move","moveX","moveY","vector","colour","parameter","loopTimestamp","commandGroup","ANCHOR","LAYER","isOsu","block","infoLine","layer","texturepath","loop","StoryboardAnimatedSprite","frameCount","frameDelay","loopType","_Storyboard","parsed","variable","illegals","osbContent","osuOsbContent","allEntries","backgroundFilename","osbSprites","osuSprites","texturePaths","file","PIXI.Texture","MyWorker","User","mod","userHeight","userInfo","_ObjectsController","objectsList","coloursList","breakPeriods","staticDraw","currentSV","currentBPM","BPM","objIndex","posInfoIndex","cursorData","lerp_x","lerp_y","currentAudioTime","FullscreenButton","toggleTimingPanel","r3","g3","b3","r4","g4","b4","altImgURL","altTexture","playToggle","go","fullscreenToggle","old","ele","milisecondDigits","secondDigits","timeTween","expectedDestination","precise","isForward","side","currentBeatstep","isPlaying","relativePosition","relativeTickPassed","goTo","copyUrlToClipboard","updateTimestamp","extracted","osuPerformance","__webpack_modules__","__unused_webpack_module","HitSampleInfo","bank","volume","LegacySampleBank","__webpack_require__","BeatmapDifficulty_1","index_1","Types_1","ControlPointInfo_1","hitObjects","difficulty","appliedMods","controlPointInfo","mostCommonBeatLength","timingPoints","lastTime","durations","nextTime","beatLength","HitCircle_1","Mods_1","StackingMod_1","SliderCheckPointGenerator_1","SliderPath_1","Slider_1","SliderCheckPoint_1","Beatmap_1","Spinner_1","HardRockMod_1","copyPosition","createHitCircle","hitCircleSettings","beatmapDifficulty","createSliderCheckPoint","spanStartTime","spanIndex","spanProgress","createSliderCheckPoints","checkPoints","checkpointIndex","copyPathPoints","pathPoints","createSlider","sliderSettings","approachDuration","hitTime","difficultyPoint","scoringDistance","sliderId","createSpinner","settings","createStaticHitObject","hitObjectSetting","assignComboIndex","bluePrintSettings","comboSetIndex","withinSetIndex","newCombo","comboSkip","hitObject","findDifficultyApplier","mods","adjuster","defaultBeatmapBuilderOptions","buildBeatmap","bluePrint","beatmapVersion","stackLeniency","addStacking","finalDifficulty","setting","ControlPoint","pointGroup","ControlPointGroup","DifficultyControlPoint_1","TimingControlPoint_1","EffectControlPoint_1","SampleControlPoint_1","ControlPointGroup_1","SortedList_1","ControlPointInfo","controlPoint","addIfNotExisting","newGroup","fallback","newPoint","existing","ControlPoint_1","DifficultyControlPoint","EffectControlPoint","SampleControlPoint","TimeSignatures_1","TimingControlPoint","LegacyEffectFlags","TimeSignatures","PathType_1","LegacyEffectFlag_1","HitSampleInfo_1","LegacySampleBank_1","SECTION_REGEX","DEFAULT_LEGACY_TICK_OFFSET","stripComments","LegacyHitObjectType","LegacyHitSoundType","LegacyHitSampleInfo","customSampleBank","isLayered","hasFlag","bitmask","splitKeyVal","separator","convertPathType","LegacyDifficultyControlPoint","convertPathString","pointString","pointSplit","startIndex","endPoint","convertPoints","readPoint","startPos","readOffset","readablePoints","endPointLength","parseOsuHitObjectSetting","_type","typeBitmask","slides","repeatCount","defaultBlueprintInfo","defaultBlueprintDifficulty","BlueprintParser","defaultOptions","strippedLine","eventType","_startTime","eventParams","filename","xOffset","yOffset","blueprintInfo","metadata","metaData","speedMultiplier","timeSignature","sampleVolume","timingChange","kiaiMode","omitFirstBarSignature","effectFlags","stringSampleSet","MIN_BEAT_LENGTH","MAX_BEAT_LENGTH","bindableNumberNew","parseBlueprint","allOptions","defaultGameState","cloneGameState","replayState","aliveHitCircleIds","aliveSliderIds","aliveSpinnerIds","spinnerState","sliderBodyState","checkPointVerdict","hitCircleVerdict","sliderVerdict","eventIndex","clickWasUseful","cursorPosition","latestHitObjectIndex","pressingSince","judgedObjects","GameState_1","Replay_1","generateEvents","beatmap","hitWindows","mehHitWindow","pushHitCircleEvents","HitObjectVerdicts","isWithinHitWindow","hitWindow","verdict","GameStateEvaluator","hitCircleId","headVerdict","totalCheckpoints","hitCheckpoints","sliderVerdictBasedOnCheckpoints","previousTime","previousPosition","nextPosition","hitObjectId","hasRelax","noteLockStyle","noteLocked","hitCircleIds","judged","headId","headHitTime","wasTracking","isTracking","determineTracking","maxTimeInclusive","gameState","sliderProgress","previouslyTracking","progress","followCircleRadius","actionsToBooleans","osuActions","newPressingSince","pressed","GameStateEvaluator_1","BucketedGameStateTimeMachine","initialKnownFrames","bucketSize","highestCachedIndex","nextFrame","isHitObjectJudgement","retrieveEvents","dict","isSliderHead","checkPointState","hit","isLastTick","updateComboInfo","combo","currentCombo","osuStableAccuracy","JudgementScores","perfect","actual","defaultEvaluationOptions","GameplayInfoEvaluator","hitObjectType","counts","hidden","fadeInStartTime","fadeInDuration","fadeOutStartTime","fadeOutDuration","progressInSpan","SliderCheckPoint","isHitCircle","isSlider","isSpinner","bezierTolerance","circularArcTolerance","catmullDetail","toFloat","PathApproximator","toFlatten","freeBuffers","subBezier","subdivisionBuffer1","subdivisionBuffer2","leftChild","rightChild","controlPointsLength","v3","v4","aSq","bSq","cSq","dA","dC","thetaStart","thetaEnd","thetaRange","orthoAtoC","direction","amountPoints","fract","numerator","denominator","li","subdivisionBuffer","midpoints","vec1","vec2","vec3","vec4","PathType","generateTicks","spanDuration","reversed","tickDistance","minDistanceFromEnd","timeProgress","generateSliderCheckpoints","velocity","totalDistance","spanCount","legacyLastTickOffset","span","it","totalDuration","finalSpanIndex","finalSpanStartTime","finalSpanEndTime","finalProgress","PathApproximator_1","mapToVector2","SliderPath","subControlPoints","numberOfPoints","segmentVertices","segmentType","pathEndIndex","cumulativeLengths","partialDistance","calculatedPath","__createBinding","desc","__exportStar","BlueprintParser_1","ReplayParser_1","EasyMod","playfield_1","flipY","HardRockMod","EasyMod_1","stackOffset","stackedPosition","initialPosition","STACK_DISTANCE","createStackingHeights","stackingHeights","setH","ho","newStackingHeights","extendedEndIndex","extendedStartIndex","objectI","stackThreshold","objectN","objectJ","oldStackingHeights","currHitObject","sliderStack","nextHitObject","position2","modifyStackingPosition","heights","RawReplayData","modsFromBitmask","modMask","bit","modsToBitmask","OsuAction","ReplayButtonState","calculateReplayClicks","frames","clicks","isPressing","MAX_COORDINATE_VALUE","bitmaskCheck","parseReplayFramesFromRaw","rawString","frameStrings","diff","mouseX","mouseY","actions","mergedFrames","SortedList","normalizeHitObjects","hitObjectById","determineDefaultPlaybackSpeed","index_2","aim_1","speed_1","flashlight_1","normalised_radius","maximum_slider_radius","assumed_slider_radius","computeSliderCursorPosition","lazyTravelTime","lazyTravelDistance","endTimeMin","lazyEndPosition","currCursorPosition","scalingFactor","numCheckPoints","currMovementObj","currMovementObjPosition","currMovement","currMovementLength","requiredMovement","lazyMovement","defaultOsuDifficultyHitObject","preprocessDifficultyHitObject","clockRate","difficultyHitObjects","min_delta_time","clockAdjusted","sliderCursorPosition","computeSliderCursorPositionIfNeeded","lastLast","difficultyHitObject","strainTime","smallCircleBonus","getEndCursorPosition","lastCursorPosition","lastSliderLazyTravelTime","lastSliderLazyTravelDistance","tailJumpDistance","lastLastCursorPosition","det","determineMaxCombo","maxCombo","hitCircleCount","sliderCount","spinnerCount","DIFFICULTY_MULTIPLIER","speedAdjustedAR","AR","speedAdjustedOD","calculateDifficultyAttributes","onlyFinalValue","diffs","hitWindowGreat","aimValues","aimValuesNoSliders","speedValues","flashlightValues","speedNotes","overallDifficulty","approachRate","mostCommonBPM","aimRating","aimRatingNoSliders","speedRating","flashlightRating","sliderFactor","baseAimPerformance","baseSpeedPerformance","baseFlashlightPerformance","basePerformance","starRating","calculatePerformanceAttributes","beatmapParams","scoreParams","aimDifficulty","speedDifficulty","flashlightDifficulty","drainRate","beatmapMaxCombo","countMeh","countGreat","countMiss","countOk","scoreMaxCombo","accuracy","totalHits","effectiveMissCount","comboBasedMissCount","fullComboThreshold","multiplier","okMultiplier","mehMultiplier","comboScalingFactor","aimValue","rawAim","lengthBonus","approachRateFactor","estimateDifficultSliders","estimateSliderEndsDropped","sliderNerfFactor","speedValue","relevantTotalDiff","relevantCountGreat","relevantCountOk","relevantCountMeh","relevantAccuracy","accuracyValue","betterAccuracyPercentage","amountHitObjectsWithAccuracy","flashlightValue","rawFlashlight","totalValue","strain_1","wide_angle_multiplier","acute_angle_multiplier","slider_multiplier","velocity_change_multiplier","skillMultiplier","strainDecayBase","strainDecay","ms","calcWideAngleBonus","calcAcuteAngleBonus","calculateAimStrains","withSliders","strains","currentStrain","diffLastLast","diffLast","diffCurrent","strainValueOf","currVelocity","movementVelocity","travelVelocity","prevVelocity","wideAngleBonus","acuteAngleBonus","sliderBonus","velocityChangeBonus","aimStrain","currAngle","lastAngle","lastLastAngle","angleBonus","distRatio","overlapVelocityBuff","calculateAim","historyLength","unstackedEndPosition","calculateFlashlightStrains","max_opacity_bonus","hidden_bonus","smallDistNerf","cumulativeStrainTime","previousCount","diffPrevious","jumpDistance","stackNerf","opacityBonus","calculateFlashlight","single_spacing_threshold","rhythm_multiplier","history_time_max","min_speed_bonus","speed_balancing_factor","history_length","calculateSpeedStrains","greatWindow","diffNext","previousHitObject","greatWindowFull","tryz_vn","currDeltaTime","nextDeltaTime","deltaDifference","speedRatio","windowRatio","speedBonus","currentRhythm","previousIslandSize","rhythmComplexitySum","islandSize","startRatio","firstDeltaSwitch","rhythmStart","currObj","prevObj","lastObj","currHistoricalDecay","currDelta","prevDelta","lastDelta","currRatio","windowPenalty","effectiveRatio","calculateSpeed","calculateRelevantNotes","maxStrain","REDUCED_STRAIN_BASELINE","calculateDifficultyValues","sectionDuration","reducedSectionCount","difficultyMultiplier","decayWeight","calcSectionBegin","peaks","difficultyValues","currentSectionBegin","currentSectionPeak","prevStartTime","currStartTime","peaksWithCurrent","difficultyValue","peak","float32_1","Vec2","rgbToInt","circleSizeToScale","CS","difficultyRange","PREEMPT_MIN","approachRateToApproachDuration","approachDurationToApproachRate","approachDurationInMs","getFadeInDuration","TimePreempt","difficultyRangeForOd","hitWindowGreatToOD","OSU_STD_HIT_WINDOW_RANGES","hitWindowsForOD","lazerStyle","lazerHitWindowsForOD","od","od0","od5","od10","overallDifficultyToHitWindowGreat","elastic_const","elastic_const2","elastic_offset_full","applyEasing","applyInterpolation","valA","valB","lerp","final","float32","float32_add","float32_mul","float32_div","float32_sqrt","Vec2_1","sliderRepeatAngle","isRepeatAtEnd","searchStart","searchDir","addZero","digits","isNegative","parseMs","milliseconds","roundTowardsZero","formatGameTime","timeInMs","withMs","hours","beatLengthToBPM","approximatelyEqual","FLOAT_EPS","floatEqual","DOUBLE_EPS","doubleEqual","__webpack_module_cache__","moduleId","cachedModule","__webpack_exports__","openMenu","settingsPanel","settingsPanelIsClick","setCustomMirror","setResolution","setBackgroundDim","setBackgroundBlur","setMasterVolume","setAudioVolume","setEffectVolume","setOffset","PAudio","setBeatsnapDivisor","calculateCurrentSR","modsFlag","builderOptions","blueprintData","beatmapData","difficultyAttributes","d3\r\n\t\t\t.color","getDiffColor","d3.color","handleCheckBox","checkbox","DTMultiplier","HTMultiplier","originalIsPlaying","openDialog","openRendererDialog","skinDialogDimensions","popupDialogDimensions","rendererDialogDimensions","selectSkin","selectRenderer","thisArg","toString","getPrototypeOf","iterator","toStringTag","kindOf","thing","kindOfTest","typeOfTest","isArray","isUndefined","isBuffer","isFunction","isArrayBuffer","isArrayBufferView","isString","isNumber","isObject","isBoolean","isPlainObject","isEmptyObject","isDate","isFile","isBlob","isFileList","isStream","isFormData","kind","isURLSearchParams","isReadableStream","isRequest","isResponse","isHeaders","forEach","allOwnKeys","findKey","_key","_global","isContextDefined","caseless","skipUndefined","assignValue","targetKey","stripBOM","inherits","superConstructor","props","descriptors","toFlatObject","sourceObj","destObj","propFilter","merged","endsWith","searchString","lastIndex","toArray","isTypedArray","TypedArray","forEachEntry","_iterator","pair","matchAll","regExp","matches","isHTMLForm","toCamelCase","hasOwnProperty","isRegExp","reduceDescriptors","reducer","reducedDescriptors","freezeMethods","toObjectSet","arrayOrString","delimiter","toFiniteNumber","isSpecCompliantForm","toJSONObject","visit","reducedValue","isAsyncFn","isThenable","_setImmediate","setImmediateSupported","postMessageSupported","callbacks","asap","isIterable","utils$1","AxiosError","request","utils","customProps","axiosError","msg","errCode","httpAdapter","isVisitable","removeBrackets","renderKey","isFlatArray","predicates","toFormData","formData","option","metaTokens","visitor","defaultVisitor","indexes","useBlob","convertValue","el","exposedHelpers","encode","charMap","AxiosURLSearchParams","encoder","_encode","buildURL","serializeFn","serializedParams","hashmarkIndex","InterceptorManager","fulfilled","rejected","transitionalDefaults","URLSearchParams$1","FormData$1","Blob$1","platform$1","URLSearchParams","FormData","Blob","hasBrowserEnv","_navigator","hasStandardBrowserEnv","hasStandardBrowserWebWorkerEnv","platform","toURLEncodedForm","helpers","parsePropPath","arrayToObject","formDataToJSON","buildPath","isNumericKey","isLast","stringifySafely","rawValue","headers","contentType","hasJSONContentType","isObjectPayload","_FormData","transitional","forcedJSONParsing","JSONRequested","strictJSONParsing","status","ignoreDuplicateOf","parseHeaders","rawHeaders","$internals","normalizeHeader","header","normalizeValue","parseTokens","tokensRE","isValidHeaderName","matchHeaderValue","isHeaderNameFilter","formatHeader","buildAccessors","accessorName","methodName","arg2","arg3","AxiosHeaders$1","valueOrRewrite","rewrite","setHeader","_value","_header","_rewrite","lHeader","setHeaders","dest","deleted","deleteHeader","normalized","targets","asStrings","computed","accessors","defineAccessor","AxiosHeaders","mapped","headerValue","transformData","fns","isCancel","CanceledError","settle","validateStatus","parseProtocol","speedometer","samplesCount","timestamps","firstSampleTS","chunkLength","startedAt","bytesCount","passed","throttle","freq","threshold","lastArgs","invoke","progressEventReducer","isDownloadStream","bytesNotified","_speedometer","progressBytes","inRange","progressEventDecorator","throttled","lengthComputable","asyncDecorator","isURLSameOrigin","isMSIE","cookies","expires","secure","cookie","isAbsoluteURL","combineURLs","baseURL","relativeURL","buildFullPath","requestedURL","allowAbsoluteUrls","isRelativeUrl","headersToObject","mergeConfig","config1","config2","getMergedValue","mergeDeepProperties","valueFromConfig2","defaultToConfig2","mergeDirectKeys","mergeMap","configValue","resolveConfig","newConfig","withXSRFToken","xsrfHeaderName","xsrfCookieName","auth","formHeaders","allowedHeaders","xsrfValue","isXHRAdapterSupported","xhrAdapter","_config","requestData","requestHeaders","responseType","onUploadProgress","onDownloadProgress","onCanceled","uploadThrottled","downloadThrottled","flushUpload","flushDownload","done","onloadend","responseHeaders","timeoutErrorMessage","composeSignals","signals","controller","aborted","onabort","reason","unsubscribe","signal","streamChunk","chunk","chunkSize","readBytes","iterable","readStream","stream","reader","trackStream","onFinish","_onFinish","loadedBytes","DEFAULT_CHUNK_SIZE","globalFetchAPI","Request","Response","ReadableStream","TextEncoder","envFetch","isFetchSupported","isRequestSupported","isResponseSupported","isReadableStreamSupported","encodeText","supportsRequestStream","duplexAccessed","hasContentType","supportsResponseStream","resolvers","getBodyLength","resolveBodyLength","cancelToken","withCredentials","fetchOptions","_fetch","composedSignal","requestContentLength","_request","contentTypeHeader","flush","isCredentialsSupported","resolvedOptions","isStreamResponse","responseContentLength","responseData","seedCache","getFetch","fetch","seeds","seed","knownAdapters","fetchAdapter.getFetch","renderReason","isResolvedHandle","adapters","nameOrAdapter","rejectedReasons","reasons","throwIfCancellationRequested","dispatchRequest","validators","deprecatedWarnings","validator","formatMessage","opt","correctSpelling","assertOptions","schema","allowUnknown","Axios$1","instanceConfig","configOrUrl","dummy","paramsSerializer","contextHeaders","requestInterceptorChain","synchronousRequestInterceptors","interceptor","responseInterceptorChain","chain","onFulfilled","onRejected","fullPath","Axios","generateHTTPMethod","isForm","CancelToken$1","CancelToken","executor","resolvePromise","onfulfilled","_resolve","abort","spread","isAxiosError","payload","HttpStatusCode","createInstance","defaultConfig","instance","axios","all","Cancel","formToJSON","getAdapter","__viteBrowserExternal","this","CryptoJS","Math","undefined","crypto","global","require","require$$0","cryptoSecureRandomInt","F","subtype","C_lib","Base","overrides","propertyName","WordArray","words","sigBytes","Hex","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","thatByte","nBytes","C_enc","hexChars","bite","hexStr","hexStrLength","Latin1","latin1Chars","latin1Str","latin1StrLength","Utf8","utf8Str","BufferedBlockAlgorithm","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","nWordsReady","nBytesReady","cfg","messageUpdate","hasher","C_algo","Hasher","MD5","offset_i","M_offset_i","M_offset_0","M_offset_1","M_offset_2","M_offset_3","M_offset_4","M_offset_5","M_offset_6","M_offset_7","M_offset_8","M_offset_9","M_offset_10","M_offset_11","M_offset_12","M_offset_13","M_offset_14","M_offset_15","FF","GG","HH","II","nBitsTotal","nBitsLeft","nBitsTotalH","nBitsTotalL","H_i","FFMessageType","getMessageID","messageID","ERROR_NOT_LOADED","ERROR_TERMINATED","FFmpeg","__privateAdd","_worker","_resolves","_rejects","_logEventCallbacks","_progressEventCallbacks","_registerHandlers","__privateGet","_send","trans","classWorkerURL","__privateSet","fsType","mountPoint","encoding","oldPath","FFFSType","ERROR_RESPONSE_BODY_READER","ERROR_INCOMPLETED_DOWNLOAD","HeaderContentLength","readFromBlobOrFile","fileReader","fetchFile","downloadWithProgress","resp","chunks","received","toBlobURL","loadFn","loadImmediately","_Transcoder","dt_data","ht_data","Transcoder","_BeatmapFile","isFromFile","rawOsuFile","md5","progressEvent","setId","selectedMirror","customURL","mapsetData","mapFileBlob","mapFileBlobReader","zipReader","splitted","artist","artistUnicode","title","_e","titleUnicode","_f","_g","_h","beatmapID","beatmapSetID","_j","searchTrim","diffList","rawFile","diffName","createDifficultyElement","modsTemplate","d3\r\n\t\t\t\t.color","audioFilename","_l","_k","videoFilename","_n","_m","videoOffset","_o","audioFile","audioBlob","audioArrayBuffer","backgroundFile","loadColorPalette","videoFile","osbFile","hitsoundFiles","hitsoundArrayBuffer","writer","fileBlob","fileArrayBuffer","loadSampleSound","isiOS","getOS","objs","currentMiliseconds","currentSeconds","currentMinute","BeatmapFile","_PAudio","inputData","stretchFactor","AudioWorker","dt","ht","pitchFactorParam","_HitSample","hitsounds","vol","isLoop","gainNode","samples","higherThanStart","lowerThanEnd","timeLeft","_Skinning","sliderBorder","hitCircleOverlap","hitCirclePrefix","arrayBuffers","sample","hitsound","HIT_CIRCLE","HIT_CIRCLE_OVERLAY","SLIDER_B","SLIDER_FOLLOW_CIRCLE","REVERSE_ARROW","APPROACH_CIRCLE","DEFAULTS","blobReader","ini","base64s","storeValue","skinIdx","refreshSkinDB","prevSprite","overlapValue","TintedNumberSprite","comboIdx","R","G","gpuShader","glVertexShader","glFragmentShader","TimelineHitCircle","headGeometry","tailGeometry","meshHead","meshTail","hitCircleOverlay","numberSprite","handleClickEvent","RESOLUTION","angleNext","isSliderTail","_Timeline","currentReduction","reduction","BeatLines","addBack","addTop","GreenLineInfo","greenLine","svText","svWidth","svHeight","custom","sampleText","sampleWidth","sampleHeight","_BeatLines","pointList","currentBeatStep","timingPointList","snap","dividedStep","nearestTick","ticksNumber","tickTime","whiteTickPassed","nearestWhiteTick","TimelineReverseArrow","TimelineSlider","bodyGeometry","meshBody","sliderHead","sliderTail","headPosition","FollowPoint","startObj","endObj","numberOfSprites","preempt","timeFade","_Beatmap","rawBeatmap","HRMultiplier","EZMultiplier","timingPosition","colourPosition","hitObjectsPosition","initialSliderVelocity","beatStepsList","timingPointsList","objectLists","colorIdx","colorHaxedIdx","parsedHitObjects","currentSVMultiplier","returnObject","timelineObject","typeBit","colorHax","drainTime","accumulated","case_1","case_2","HRMul","EZMul","HRMulCS","circleSize","HPDrainRate","parameters","hitSoundIdx","hitSampleIdx","beatSteps","svPrecise","svStart","svEnd","edgeSounds","edgeSets","defaultSetIdx","headSamples","endSamples","reversesSamples","reverseTime","sv","anchors","defaultSet","defaultSample","sliderSlide","sliderWhistle","compensate","wrapper","redLine","dataURL","timeStamp","flair","baseValue","sampleType","getValue","currentObj","nObj","jObj","xDistance","yDistance","_Judgement","judgementContainer","Judgement","mapInputEnter","submitMap","readZip","loadDiff","readCustom","isDragAndDrop","inputValue","bID","_ScoreParser","versionString","year","month","day","currentObjIdx","currentInputIdx","judgementTime","filtered","avg","deltaSquaredSum","UR","modMultiplier","hitData","score","tickScore","repeatScore","headScore","tailScore","valV1","valV2","tempMaxCombo","sliderScoreV1","sliderScoreV2","accV1","accV2","V2","V2_new","calcDiff","expectedBonus","arr_buf","replayData","mapData","CURSOR_SIZE","Cursor","cursorTexture","trailTexture","trailList","cursor","current_x","current_y","graphic_idx","x_delta","y_delta","TitleArtist","Stats","isFullscreen","_Game","fpsStyle","fpsSprite","dragWindow","gridWidth","gridHeight","grid","clickControl","selectedObj","prevOffset","currOffset","inRender","selectedSlider","preHeight","PIXI.Application","initOptions","hidePopup","scrollEventHandler","deltaMs","objects","timeline","WorkerTest","removeSkin","allKeys","skinDropdown","skin","skinId","delButton","loadLocalStorage","loadDefaultSamples","to","difficultyColourSpectrum","d3\r\n\t.scaleLinear","d3.interpolateRgb","rating","icon","colorRing","infoContainer","swatches","rootCSS","primary","lumi","primaryHex","accentHex","sampleset","arrBuf","imageToBase64","base64data","decimalPlace","deltaX","pointCop","c4","loadPromises","fnOrPromise","userAgent","macosPlatforms","windowsPlatforms","iosPlatforms","os","_Database","objStore","transaction","skinJson","PIXI.BitmapFont","setupDefaultStorage","settingsTemplate","PIXI.Batcher","baseSettings"],"ignoreList":[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,265,268,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,422,423,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,488,490,491,492,493,494,495,496,497,498,499],"sources":["../../lib/leb128.js","../../lib/osr-parser.js","../../scripts/GlobalVariables.js","../../node_modules/pixi.js/lib/extensions/Extensions.mjs","../../node_modules/pixi.js/lib/environment-browser/browserExt.mjs","../../node_modules/pixi.js/lib/environment-webworker/webworkerExt.mjs","../../node_modules/pixi.js/lib/maths/point/ObservablePoint.mjs","../../node_modules/pixi.js/node_modules/eventemitter3/index.js","../../node_modules/pixi.js/lib/maths/misc/const.mjs","../../node_modules/pixi.js/lib/maths/point/Point.mjs","../../node_modules/pixi.js/lib/maths/matrix/Matrix.mjs","../../node_modules/pixi.js/lib/maths/matrix/groupD8.mjs","../../node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs","../../node_modules/pixi.js/lib/utils/data/uid.mjs","../../node_modules/pixi.js/lib/utils/logging/deprecation.mjs","../../node_modules/pixi.js/lib/utils/misc/NOOP.mjs","../../node_modules/pixi.js/lib/maths/misc/pow2.mjs","../../node_modules/pixi.js/lib/scene/container/utils/definedProps.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureStyle.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/BufferImageSource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs","../../node_modules/pixi.js/lib/utils/data/updateQuadBounds.mjs","../../node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs","../../node_modules/@pixi/colord/index.mjs","../../node_modules/@pixi/colord/plugins/names.mjs","../../node_modules/pixi.js/lib/color/Color.mjs","../../node_modules/pixi.js/lib/culling/cullingMixin.mjs","../../node_modules/pixi.js/lib/utils/logging/warn.mjs","../../node_modules/pixi.js/lib/utils/pool/GlobalResourceRegistry.mjs","../../node_modules/pixi.js/lib/utils/pool/Pool.mjs","../../node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/cacheAsTextureMixin.mjs","../../node_modules/pixi.js/lib/utils/data/removeItems.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/childrenHelperMixin.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/collectRenderablesMixin.mjs","../../node_modules/pixi.js/lib/filters/FilterEffect.mjs","../../node_modules/pixi.js/lib/rendering/mask/MaskEffectManager.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/effectsMixin.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/findMixin.mjs","../../node_modules/pixi.js/lib/scene/container/bounds/utils/matrixAndBoundsPool.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/getFastGlobalBoundsMixin.mjs","../../node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs","../../node_modules/pixi.js/lib/scene/container/utils/multiplyHexColors.mjs","../../node_modules/pixi.js/lib/scene/container/utils/multiplyColors.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/getGlobalMixin.mjs","../../node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs","../../node_modules/pixi.js/lib/scene/container/utils/checkChildrenDidChange.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/measureMixin.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/onRenderMixin.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/sortMixin.mjs","../../node_modules/pixi.js/lib/scene/container/container-mixins/toLocalGlobalMixin.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/instructions/InstructionSet.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/TexturePool.mjs","../../node_modules/pixi.js/lib/scene/container/RenderGroup.mjs","../../node_modules/pixi.js/lib/scene/container/utils/assignWithIgnore.mjs","../../node_modules/pixi.js/lib/scene/container/Container.mjs","../../node_modules/pixi.js/lib/scene/view/ViewContainer.mjs","../../node_modules/pixi.js/lib/scene/sprite/Sprite.mjs","../../node_modules/pixi.js/lib/rendering/mask/utils/addMaskBounds.mjs","../../node_modules/pixi.js/lib/rendering/mask/utils/addMaskLocalBounds.mjs","../../node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMask.mjs","../../node_modules/pixi.js/lib/rendering/mask/color/ColorMask.mjs","../../node_modules/pixi.js/lib/rendering/mask/stencil/StencilMask.mjs","../../node_modules/pixi.js/lib/environment-browser/BrowserAdapter.mjs","../../node_modules/pixi.js/lib/environment/adapter.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/ImageSource.mjs","../../node_modules/pixi.js/lib/ticker/const.mjs","../../node_modules/pixi.js/lib/ticker/TickerListener.mjs","../../node_modules/pixi.js/lib/ticker/Ticker.mjs","../../node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/VideoSource.mjs","../../node_modules/pixi.js/lib/assets/utils/convertToList.mjs","../../node_modules/pixi.js/lib/assets/cache/Cache.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/textureFrom.mjs","../../node_modules/pixi.js/lib/rendering/init.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/LoaderParser.mjs","../../node_modules/pixi.js/lib/utils/path.mjs","../../node_modules/pixi.js/lib/assets/utils/createStringVariations.mjs","../../node_modules/pixi.js/lib/assets/utils/isSingleItem.mjs","../../node_modules/pixi.js/lib/assets/resolver/Resolver.mjs","../../node_modules/pixi.js/lib/assets/utils/copySearchParams.mjs","../../node_modules/pixi.js/lib/spritesheet/Spritesheet.mjs","../../node_modules/pixi.js/lib/spritesheet/spritesheetAsset.mjs","../../node_modules/pixi.js/lib/spritesheet/init.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/utils/createIdFromString.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getTestContext.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgram.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/const.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuProgram.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/types.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/UniformGroup.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs","../../node_modules/pixi.js/lib/rendering/renderers/types.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/shader/Shader.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs","../../node_modules/pixi.js/lib/filters/Filter.mjs","../../node_modules/pixi.js/lib/environment/autoDetectEnvironment.mjs","../../node_modules/pixi.js/lib/utils/browser/unsafeEvalSupported.mjs","../../node_modules/pixi.js/node_modules/earcut/src/earcut.js","../../node_modules/pixi.js/lib/utils/utils.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/system/AbstractRenderer.mjs","../../node_modules/pixi.js/lib/utils/browser/isWebGLSupported.mjs","../../node_modules/pixi.js/lib/utils/browser/isWebGPUSupported.mjs","../../node_modules/pixi.js/lib/rendering/renderers/autoDetectRenderer.mjs","../../node_modules/pixi.js/lib/utils/const.mjs","../../node_modules/pixi.js/lib/utils/global/globalHooks.mjs","../../node_modules/pixi.js/lib/app/Application.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/AbstractBitmapFont.mjs","../../node_modules/tiny-lru/dist/tiny-lru.js","../../node_modules/pixi.js/lib/scene/text/canvas/utils/fontStringFromTextStyle.mjs","../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextMetrics.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/fill/FillGradient.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/fill/FillPattern.mjs","../../node_modules/parse-svg-path/index.js","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGPath.mjs","../../node_modules/pixi.js/lib/maths/shapes/Circle.mjs","../../node_modules/pixi.js/lib/maths/shapes/Ellipse.mjs","../../node_modules/pixi.js/lib/maths/misc/squaredDistanceToLineSegment.mjs","../../node_modules/pixi.js/lib/maths/shapes/Polygon.mjs","../../node_modules/pixi.js/lib/maths/shapes/RoundedRectangle.mjs","../../node_modules/pixi.js/lib/rendering/batcher/gpu/getTextureBatchBindGroup.mjs","../../node_modules/pixi.js/lib/utils/data/ViewableBuffer.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/utils/fastCopy.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs","../../node_modules/pixi.js/lib/rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs","../../node_modules/pixi.js/lib/rendering/batcher/gl/utils/maxRecommendedTextures.mjs","../../node_modules/pixi.js/lib/rendering/batcher/shared/BatchTextureArray.mjs","../../node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/const.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/buffer/Buffer.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/Geometry.mjs","../../node_modules/pixi.js/lib/rendering/batcher/shared/BatchGeometry.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/addBits.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileHooks.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileInputs.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileOutputs.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/injectBits.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compiler/compileHighShader.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/defaultProgramTemplate.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/globalUniformsBit.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/compileHighShaderToProgram.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/colorBit.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/generateTextureBatchBit.mjs","../../node_modules/pixi.js/lib/rendering/high-shader/shader-bits/roundPixelsBit.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs","../../node_modules/pixi.js/lib/rendering/batcher/shared/DefaultShader.mjs","../../node_modules/pixi.js/lib/rendering/batcher/shared/DefaultBatcher.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/buildUvs.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/transformVertices.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/BatchableGraphics.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildCircle.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/const.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/utils/getOrientationOfPoints.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildLine.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPixelLine.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/utils/triangulateWithHoles.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPolygon.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildRectangle.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildTriangle.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/utils/generateTextureFillMatrix.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/utils/buildContextBatches.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContextSystem.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArc.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcTo.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcToSvg.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/path/roundShape.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/path/ShapePath.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/path/GraphicsPath.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGFloatAttribute.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGDefinitions.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/extractSvgUrlId.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGStyle.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/fillOperations.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/pathOperations.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGParser.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/utils/convertFillInputToFillStyle.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContext.mjs","../../node_modules/pixi.js/lib/scene/text/TextStyle.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/CanvasPool.mjs","../../node_modules/pixi.js/lib/scene/text/canvas/utils/getCanvasFillStyle.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/DynamicBitmapFont.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/utils/getBitmapTextLayout.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/utils/resolveCharacters.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapFontManager.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapFont.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontTextParser.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLParser.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/asset/loadBitmapFont.mjs","../../node_modules/pixi.js/lib/assets/BackgroundLoader.mjs","../../node_modules/pixi.js/lib/assets/cache/parsers/cacheTextureArray.mjs","../../node_modules/pixi.js/lib/assets/detections/utils/testImageFormat.mjs","../../node_modules/pixi.js/lib/assets/detections/parsers/detectAvif.mjs","../../node_modules/pixi.js/lib/assets/detections/parsers/detectDefaults.mjs","../../node_modules/pixi.js/lib/assets/detections/utils/testVideoFormat.mjs","../../node_modules/pixi.js/lib/assets/detections/parsers/detectMp4.mjs","../../node_modules/pixi.js/lib/assets/detections/parsers/detectOgv.mjs","../../node_modules/pixi.js/lib/assets/detections/parsers/detectWebm.mjs","../../node_modules/pixi.js/lib/assets/detections/parsers/detectWebp.mjs","../../node_modules/pixi.js/lib/assets/loader/Loader.mjs","../../node_modules/pixi.js/lib/assets/utils/checkDataUrl.mjs","../../node_modules/pixi.js/lib/assets/utils/checkExtension.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/loadJson.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/loadTxt.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/loadWebFont.mjs","../../node_modules/pixi.js/lib/utils/network/getResolutionOfUrl.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/textures/utils/createTexture.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/textures/loadSVG.mjs","../../node_modules/pixi.js/lib/_virtual/checkImageBitmap.worker.mjs","../../node_modules/pixi.js/lib/_virtual/loadImageBitmap.worker.mjs","../../node_modules/pixi.js/lib/assets/loader/workers/WorkerManager.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/textures/loadTextures.mjs","../../node_modules/pixi.js/lib/assets/loader/parsers/textures/loadVideoTextures.mjs","../../node_modules/pixi.js/lib/assets/resolver/parsers/resolveTextureUrl.mjs","../../node_modules/pixi.js/lib/assets/resolver/parsers/resolveJsonUrl.mjs","../../node_modules/pixi.js/lib/assets/Assets.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/const.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/gl/generateBlurFragSource.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/gl/generateBlurVertSource.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/gl/generateBlurGlProgram.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/gpu/blur-template.wgsl.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/gpu/generateBlurProgram.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/BlurFilterPass.mjs","../../node_modules/pixi.js/lib/filters/defaults/blur/BlurFilter.mjs","../../node_modules/pixi.js/lib/maths/point/pointInTriangle.mjs","../../node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","../../node_modules/pixi.js/lib/scene/mesh/shared/MeshGeometry.mjs","../../node_modules/pixi.js/lib/scene/mesh/shared/Mesh.mjs","../../node_modules/pixi.js/lib/scene/text/AbstractText.mjs","../../node_modules/pixi.js/lib/utils/canvas/getCanvasBoundingBox.mjs","../../node_modules/pixi.js/lib/scene/text/canvas/CanvasTextGenerator.mjs","../../node_modules/pixi.js/lib/scene/text/Text.mjs","../../node_modules/pixi.js/lib/scene/text-bitmap/BitmapText.mjs","../../node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/ensureAttributes.mjs","../../node_modules/pixi.js/lib/rendering/renderers/shared/texture/RenderTexture.mjs","../../node_modules/pixi.js/lib/scene/container/RenderContainer.mjs","../../node_modules/pixi.js/lib/index.mjs","../../scripts/Timeline/DragWindow.js","../../scripts/WindowManager.js","../../scripts/Timeline/Zoomer.js","../../scripts/Texture.js","../../scripts/Notification.js","../../node_modules/@tweenjs/tween.js/dist/tween.esm.js","../../scripts/HitSound.js","../../scripts/TimingPanel.js","../../node_modules/bezier-easing/src/index.js","../../scripts/UI/Text.js","../../scripts/UI/Container.js","../../scripts/UI/FlexBox.js","../../scripts/SidePanel.js","../../node_modules/d3-array/src/ascending.js","../../node_modules/d3-array/src/descending.js","../../node_modules/d3-array/src/bisector.js","../../node_modules/d3-array/src/number.js","../../node_modules/d3-array/src/bisect.js","../../node_modules/d3-array/src/ticks.js","../../node_modules/d3-dispatch/src/dispatch.js","../../node_modules/d3-selection/src/namespaces.js","../../node_modules/d3-selection/src/namespace.js","../../node_modules/d3-selection/src/creator.js","../../node_modules/d3-selection/src/selector.js","../../node_modules/d3-selection/src/selection/select.js","../../node_modules/d3-selection/src/array.js","../../node_modules/d3-selection/src/selectorAll.js","../../node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/d3-selection/src/matcher.js","../../node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/d3-selection/src/selection/filter.js","../../node_modules/d3-selection/src/selection/sparse.js","../../node_modules/d3-selection/src/selection/enter.js","../../node_modules/d3-selection/src/constant.js","../../node_modules/d3-selection/src/selection/data.js","../../node_modules/d3-selection/src/selection/exit.js","../../node_modules/d3-selection/src/selection/join.js","../../node_modules/d3-selection/src/selection/merge.js","../../node_modules/d3-selection/src/selection/order.js","../../node_modules/d3-selection/src/selection/sort.js","../../node_modules/d3-selection/src/selection/call.js","../../node_modules/d3-selection/src/selection/nodes.js","../../node_modules/d3-selection/src/selection/node.js","../../node_modules/d3-selection/src/selection/size.js","../../node_modules/d3-selection/src/selection/empty.js","../../node_modules/d3-selection/src/selection/each.js","../../node_modules/d3-selection/src/selection/attr.js","../../node_modules/d3-selection/src/window.js","../../node_modules/d3-selection/src/selection/style.js","../../node_modules/d3-selection/src/selection/property.js","../../node_modules/d3-selection/src/selection/classed.js","../../node_modules/d3-selection/src/selection/text.js","../../node_modules/d3-selection/src/selection/html.js","../../node_modules/d3-selection/src/selection/raise.js","../../node_modules/d3-selection/src/selection/lower.js","../../node_modules/d3-selection/src/selection/append.js","../../node_modules/d3-selection/src/selection/insert.js","../../node_modules/d3-selection/src/selection/remove.js","../../node_modules/d3-selection/src/selection/clone.js","../../node_modules/d3-selection/src/selection/datum.js","../../node_modules/d3-selection/src/selection/on.js","../../node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/d3-selection/src/selection/iterator.js","../../node_modules/d3-selection/src/selection/index.js","../../node_modules/d3-color/src/define.js","../../node_modules/d3-color/src/color.js","../../node_modules/d3-interpolate/src/constant.js","../../node_modules/d3-interpolate/src/color.js","../../node_modules/d3-interpolate/src/rgb.js","../../node_modules/d3-interpolate/src/numberArray.js","../../node_modules/d3-interpolate/src/array.js","../../node_modules/d3-interpolate/src/date.js","../../node_modules/d3-interpolate/src/number.js","../../node_modules/d3-interpolate/src/object.js","../../node_modules/d3-interpolate/src/string.js","../../node_modules/d3-interpolate/src/value.js","../../node_modules/d3-interpolate/src/round.js","../../node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/d3-interpolate/src/transform/index.js","../../node_modules/d3-timer/src/timer.js","../../node_modules/d3-timer/src/timeout.js","../../node_modules/d3-transition/src/transition/schedule.js","../../node_modules/d3-transition/src/interrupt.js","../../node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/d3-transition/src/transition/tween.js","../../node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/d3-transition/src/transition/attr.js","../../node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/d3-transition/src/transition/delay.js","../../node_modules/d3-transition/src/transition/duration.js","../../node_modules/d3-transition/src/transition/ease.js","../../node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/d3-transition/src/transition/filter.js","../../node_modules/d3-transition/src/transition/merge.js","../../node_modules/d3-transition/src/transition/on.js","../../node_modules/d3-transition/src/transition/remove.js","../../node_modules/d3-transition/src/transition/select.js","../../node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/d3-transition/src/transition/selection.js","../../node_modules/d3-transition/src/transition/style.js","../../node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/d3-transition/src/transition/text.js","../../node_modules/d3-transition/src/transition/textTween.js","../../node_modules/d3-transition/src/transition/transition.js","../../node_modules/d3-transition/src/transition/end.js","../../node_modules/d3-transition/src/transition/index.js","../../node_modules/d3-ease/src/cubic.js","../../node_modules/d3-transition/src/selection/transition.js","../../node_modules/d3-transition/src/selection/index.js","../../node_modules/d3-format/src/formatDecimal.js","../../node_modules/d3-format/src/exponent.js","../../node_modules/d3-format/src/formatGroup.js","../../node_modules/d3-format/src/formatNumerals.js","../../node_modules/d3-format/src/formatSpecifier.js","../../node_modules/d3-format/src/formatTrim.js","../../node_modules/d3-format/src/formatPrefixAuto.js","../../node_modules/d3-format/src/formatRounded.js","../../node_modules/d3-format/src/formatTypes.js","../../node_modules/d3-format/src/identity.js","../../node_modules/d3-format/src/locale.js","../../node_modules/d3-format/src/defaultLocale.js","../../node_modules/d3-format/src/precisionFixed.js","../../node_modules/d3-format/src/precisionPrefix.js","../../node_modules/d3-format/src/precisionRound.js","../../node_modules/d3-scale/src/init.js","../../node_modules/d3-scale/src/constant.js","../../node_modules/d3-scale/src/number.js","../../node_modules/d3-scale/src/continuous.js","../../node_modules/d3-scale/src/tickFormat.js","../../node_modules/d3-scale/src/linear.js","../../node_modules/d3-zoom/src/transform.js","../../scripts/Timestamp.js","../../scripts/Shaders/Progress/TimingPoint.vert?raw","../../scripts/Shaders/Progress/TimingPoint.frag?raw","../../scripts/Shaders/Progress/TimingPoint.wgsl?raw","../../scripts/Progress.js","../../scripts/HitObjects/ApproachCircle.js","../../scripts/HitObjects/HitCircle.js","../../scripts/HitObjects/SliderEnd.js","../../scripts/Shaders/SliderBody.vert?raw","../../scripts/Shaders/SliderBody.frag?raw","../../scripts/Shaders/SliderBody.wgsl?raw","../../scripts/Shaders/Clear/Clear.wgsl?raw","../../scripts/Shaders/Clear/Clear.vert?raw","../../scripts/Shaders/Clear/Clear.frag?raw","../../scripts/HitObjects/SliderMeshContainer.js","../../scripts/HitObjects/SliderBody.js","../../scripts/HitObjects/SliderMesh.js","../../scripts/Shaders/SliderBall/SliderBall.vert?raw","../../scripts/Shaders/SliderBall/SliderBall.frag?raw","../../scripts/Shaders/SliderBall/SliderBall.wgsl?raw","../../scripts/HitObjects/SliderBall.js","../../scripts/HitObjects/ReverseArrow.js","../../scripts/HitObjects/SliderTick.js","../../scripts/HitObjects/SliderCalculator.js","../../scripts/HitObjects/Slider.js","../../scripts/HitObjects/Spinner.js","../../scripts/DragWindow.js","../../scripts/FPSSystem.js","../../scripts/Background.js","../../node_modules/webm-muxer/build/webm-muxer.mjs","../../node_modules/easing-utils/lib/easing.js","../../scripts/Storyboard/FadeCommand.js","../../scripts/Storyboard/MoveCommand.js","../../scripts/Storyboard/ScaleCommand.js","../../scripts/Storyboard/RotateCommand.js","../../scripts/Storyboard/ColourCommand.js","../../scripts/Storyboard/ParameterCommand.js","../../scripts/Storyboard/LoopCommand.js","../../scripts/Storyboard/Storyboard.js","../../scripts/User.js","../../scripts/HitObjects/ObjectsController.js","../../scripts/BPM.js","../../scripts/PlayButtons.js","../../scripts/ProgressBar.js","../../lib/osujs.js","../../scripts/Settings.js","../../node_modules/axios/lib/helpers/bind.js","../../node_modules/axios/lib/utils.js","../../node_modules/axios/lib/core/AxiosError.js","../../node_modules/axios/lib/helpers/null.js","../../node_modules/axios/lib/helpers/toFormData.js","../../node_modules/axios/lib/helpers/AxiosURLSearchParams.js","../../node_modules/axios/lib/helpers/buildURL.js","../../node_modules/axios/lib/core/InterceptorManager.js","../../node_modules/axios/lib/defaults/transitional.js","../../node_modules/axios/lib/platform/browser/classes/URLSearchParams.js","../../node_modules/axios/lib/platform/browser/classes/FormData.js","../../node_modules/axios/lib/platform/browser/classes/Blob.js","../../node_modules/axios/lib/platform/browser/index.js","../../node_modules/axios/lib/platform/common/utils.js","../../node_modules/axios/lib/platform/index.js","../../node_modules/axios/lib/helpers/toURLEncodedForm.js","../../node_modules/axios/lib/helpers/formDataToJSON.js","../../node_modules/axios/lib/defaults/index.js","../../node_modules/axios/lib/helpers/parseHeaders.js","../../node_modules/axios/lib/core/AxiosHeaders.js","../../node_modules/axios/lib/core/transformData.js","../../node_modules/axios/lib/cancel/isCancel.js","../../node_modules/axios/lib/cancel/CanceledError.js","../../node_modules/axios/lib/core/settle.js","../../node_modules/axios/lib/helpers/parseProtocol.js","../../node_modules/axios/lib/helpers/speedometer.js","../../node_modules/axios/lib/helpers/throttle.js","../../node_modules/axios/lib/helpers/progressEventReducer.js","../../node_modules/axios/lib/helpers/isURLSameOrigin.js","../../node_modules/axios/lib/helpers/cookies.js","../../node_modules/axios/lib/helpers/isAbsoluteURL.js","../../node_modules/axios/lib/helpers/combineURLs.js","../../node_modules/axios/lib/core/buildFullPath.js","../../node_modules/axios/lib/core/mergeConfig.js","../../node_modules/axios/lib/helpers/resolveConfig.js","../../node_modules/axios/lib/adapters/xhr.js","../../node_modules/axios/lib/helpers/composeSignals.js","../../node_modules/axios/lib/helpers/trackStream.js","../../node_modules/axios/lib/adapters/fetch.js","../../node_modules/axios/lib/adapters/adapters.js","../../node_modules/axios/lib/core/dispatchRequest.js","../../node_modules/axios/lib/env/data.js","../../node_modules/axios/lib/helpers/validator.js","../../node_modules/axios/lib/core/Axios.js","../../node_modules/axios/lib/cancel/CancelToken.js","../../node_modules/axios/lib/helpers/spread.js","../../node_modules/axios/lib/helpers/isAxiosError.js","../../node_modules/axios/lib/helpers/HttpStatusCode.js","../../node_modules/axios/lib/axios.js","../../node_modules/axios/index.js","../../__vite-browser-external","../../node_modules/crypto-js/core.js","../../node_modules/crypto-js/md5.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/const.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/utils.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/errors.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/classes.js","../../node_modules/@ffmpeg/ffmpeg/dist/esm/types.js","../../node_modules/@ffmpeg/util/dist/esm/errors.js","../../node_modules/@ffmpeg/util/dist/esm/const.js","../../node_modules/@ffmpeg/util/dist/esm/index.js","../../scripts/BackgroundLoader.js","../../scripts/FFmpeg.js","../../scripts/BeatmapFile.js","../../scripts/Audio.js","../../scripts/Skinning.js","../../scripts/HitObjects/NumberSprite.js","../../scripts/Timeline/NumberSprite.js","../../scripts/Shaders/Timeline/SliderBody.wgsl?raw","../../scripts/Shaders/Timeline/SliderBody.vert?raw","../../scripts/Shaders/Timeline/SliderBody.frag?raw","../../scripts/Timeline/HitCircle.js","../../scripts/Timeline/Timeline.js","../../scripts/Timeline/BeatLines.js","../../scripts/Timeline/ReverseArrow.js","../../scripts/Timeline/Slider.js","../../scripts/HitObjects/FollowPoint.js","../../scripts/Beatmap.js","../../scripts/Judgement.js","../../scripts/InputBar.js","../../scripts/ScoreParser.js","../../scripts/Cursor.js","../../scripts/TitleArtist.js","../../scripts/Stats.js","../../scripts/Game.js","../../scripts/Utils.js","../../scripts/Database.js","../../index.js","../../scripts/DragDrop.js"],"sourcesContent":["const Mask = {\r\n    LOWER_7: 0b01111111,\r\n    UPPER_1: 0b10000000,\r\n};\r\n\r\nconst int = (a) => Number.isSafeInteger(a);\r\n\r\nexport class UnsignedLEB128 {\r\n    static decode(buf, offset = 0) {\r\n        const mp = this.$scanForNullBytes(buf, offset);\r\n        let result = 0,\r\n            shift = 0;\r\n        for (let d = 0; d <= mp - offset; d++) {\r\n            const a = buf[offset + d] & Mask.LOWER_7; /* masking, we only care about lower 7 bits */\r\n            result |= a << shift; /* shift this value left and add it */\r\n            shift += 8 - 1;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static encode(number) {\r\n        this.check(number);\r\n        if (number < 0) throw new Error(`An unsigned number must NOT be negative, ${number} is!`);\r\n\r\n        let out = [],\r\n            a = number;\r\n        do {\r\n            let byte = a & Mask.LOWER_7;\r\n            // we only care about lower 7 bits\r\n            a >>= 8 - 1;\r\n            // shift\r\n            if (a) byte = byte | Mask.UPPER_1; /* if remaining is truthy (!= 0), set highest bit */\r\n            out.push(byte);\r\n        } while (a);\r\n        return Uint8Array.from(out);\r\n    }\r\n\r\n    static check(n) {\r\n        if (!int(n)) throw new Error(`${n} is not a safe integer!`);\r\n    }\r\n\r\n    static $scanForNullBytes(buf, offset = 0) {\r\n        let count = offset,\r\n            tmp = 0;\r\n        do {\r\n            if (count >= buf.byteLength) throw new Error(\"This is not a LEB128-encoded Uint8Array, no ending found!\");\r\n\r\n            tmp = buf.slice(count, count + 1)[0];\r\n            count++;\r\n        } while (tmp & Mask.UPPER_1);\r\n        return count - 1;\r\n    }\r\n\r\n    static getLength(buf, offset = 0) {\r\n        return this.$scanForNullBytes(buf, offset) - offset;\r\n    }\r\n}\r\n\r\nexport class SignedLEB128 {\r\n    static $ceil7mul(n) {\r\n        let a = n;\r\n        while (a % 7) a++;\r\n        return a;\r\n    }\r\n\r\n    static check(n) {\r\n        if (!int(n)) throw new Error(`${n} is not a safe integer!`);\r\n    }\r\n\r\n    static encode(number) {\r\n        this.check(number);\r\n        if (number >= 0) throw new Error(`A signed number must be negative, ${number} isn't!`);\r\n\r\n        const bitCount = Math.ceil(Math.log2(-number));\r\n        return UnsignedLEB128.encode((1 << this.$ceil7mul(bitCount)) + number);\r\n    }\r\n\r\n    static decode(buf, offset = 0) {\r\n        const r = UnsignedLEB128.decode(buf, offset);\r\n        const bitCount = Math.ceil(Math.log2(r));\r\n        const mask = 1 << bitCount;\r\n        return -(mask - r);\r\n    }\r\n}\r\n\r\nexport class LEB128 {\r\n    static encode = (n) => (n >= 0 ? UnsignedLEB128 : SignedLEB128).encode(n);\r\n    static decode = (buf, offset = 0, s = false) => (s ? SignedLEB128 : UnsignedLEB128).decode(buf, offset);\r\n}\r\n","import { UnsignedLEB128 } from \"./leb128.js\";\r\n\r\nexport class Replay {\r\n    gamemode;\r\n    version;\r\n    md5map;\r\n    playerName;\r\n    md5replay;\r\n    accuraciesCount = {\r\n        count300: 0,\r\n        count300k: 0,\r\n        count100: 0,\r\n        count100k: 0,\r\n        count500: 0,\r\n        count0: 0,\r\n    };\r\n    score;\r\n    maxCombo;\r\n    perfect;\r\n    mods;\r\n    healthbar = [];\r\n    timestamp;\r\n    replayData;\r\n    scoreID;\r\n\r\n    buffer;\r\n    offset;\r\n\r\n    constructor(content) {\r\n        this.buffer = content;\r\n    }\r\n\r\n    checkOffset() {\r\n        if (this.offset >= this.buffer.byteLength) throw new Error(\"Replay data ended unexpectedly\");\r\n    }\r\n\r\n    parseIntLE(bytes) {\r\n        let res = 0;\r\n        for (let i = bytes.length - 1; i >= 0; i--) {\r\n            res *= 256;\r\n            res += bytes[i];\r\n        }\r\n\r\n        return res;\r\n    }\r\n\r\n    readByte() {\r\n        this.checkOffset();\r\n        let result = this.parseIntLE(this.buffer.slice(this.offset, this.offset + 1));\r\n        this.offset += 1;\r\n        return result;\r\n    }\r\n\r\n    readInt16() {\r\n        this.checkOffset();\r\n        let result = this.parseIntLE(this.buffer.slice(this.offset, this.offset + 2));\r\n        this.offset += 2;\r\n        return result;\r\n    }\r\n\r\n    readInt32() {\r\n        this.checkOffset();\r\n        let result = this.parseIntLE(this.buffer.slice(this.offset, this.offset + 4));\r\n        this.offset += 4;\r\n        return result;\r\n    }\r\n\r\n    readInt64() {\r\n        this.checkOffset();\r\n        let result = this.parseIntLE(this.buffer.slice(this.offset, this.offset + 8));\r\n        this.offset += 8;\r\n        return result;\r\n    }\r\n\r\n    readString() {\r\n        this.checkOffset();\r\n        const present = this.buffer[this.offset] === 0x0b;\r\n        this.offset++;\r\n        if (!present) return \"\";\r\n        else {\r\n            const len = UnsignedLEB128.getLength(this.buffer, this.offset);\r\n            const num = UnsignedLEB128.decode(this.buffer, this.offset);\r\n            this.offset += len + 1;\r\n            const out = this.buffer.slice(this.offset, this.offset + num).toString();\r\n            this.offset += num;\r\n            return out;\r\n        }\r\n    }\r\n\r\n    readBinary(length) {\r\n        this.checkOffset();\r\n        const binary = this.buffer.slice(this.offset, this.offset + length);\r\n        this.offset += length;\r\n        return binary;\r\n    }\r\n\r\n    parseHealthbar(s) {\r\n        let a = s\r\n            .split(\",\")\r\n            .filter((a) => a)\r\n            .map((a) => a.trim());\r\n        return a.map((s) => {\r\n            const [timestamp, percentage] = s.split(\"|\").map((a) => +a);\r\n            return { timestamp, percentage };\r\n        });\r\n    }\r\n\r\n    async deserialize(deserializeReplayData = true) {\r\n        // (re-)init\r\n        this.offset = 0;\r\n        this.gamemode = this.version = this.score = this.maxCombo = this.perfect = this.scoreID = null;\r\n        this.accuracies = {\r\n            count300k: 0,\r\n            count300: 0,\r\n            count100k: 0,\r\n            count100: 0,\r\n            count50: 0,\r\n            countMiss: 0,\r\n        };\r\n\r\n        this.gamemode = this.readByte();\r\n        this.version = this.readInt32();\r\n        this.md5map = this.readString();\r\n        this.player = this.readString();\r\n        this.md5replay = this.readString();\r\n        this.accuracies = {\r\n            count300: this.readInt16(),\r\n            count100: this.readInt16(),\r\n            count50: this.readInt16(),\r\n            count300k: this.readInt16(),\r\n            count100k: this.readInt16(),\r\n            countMiss: this.readInt16(),\r\n        };\r\n        this.score = this.readInt32();\r\n        this.maxCombo = this.readInt16();\r\n        this.perfect = this.readByte();\r\n        this.mods = this.readInt32();\r\n        this.healthbar = this.parseHealthbar(this.readString());\r\n        let a = (BigInt(this.readInt64()) - EPOCH) / 10000n;\r\n        this.timestamp = new Date(Number(a));\r\n\r\n        if (deserializeReplayData) {\r\n            let replayLength = this.readInt32();\r\n            let replayBinary = this.readBinary(replayLength);\r\n            let decompressed = LZMA.decompress(replayBinary);\r\n            if (decompressed instanceof Uint8Array) {\r\n                this.replayData = new TextDecoder().decode(decompressed);\r\n            } else {\r\n                this.replayData = decompressed;\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n}\r\n\r\nconst EPOCH = 621355968000000000n\r\n","export const urlParams = new URLSearchParams(window.location.search);\r\n","\"use strict\";\nvar ExtensionType = /* @__PURE__ */ ((ExtensionType2) => {\n  ExtensionType2[\"Application\"] = \"application\";\n  ExtensionType2[\"WebGLPipes\"] = \"webgl-pipes\";\n  ExtensionType2[\"WebGLPipesAdaptor\"] = \"webgl-pipes-adaptor\";\n  ExtensionType2[\"WebGLSystem\"] = \"webgl-system\";\n  ExtensionType2[\"WebGPUPipes\"] = \"webgpu-pipes\";\n  ExtensionType2[\"WebGPUPipesAdaptor\"] = \"webgpu-pipes-adaptor\";\n  ExtensionType2[\"WebGPUSystem\"] = \"webgpu-system\";\n  ExtensionType2[\"CanvasSystem\"] = \"canvas-system\";\n  ExtensionType2[\"CanvasPipesAdaptor\"] = \"canvas-pipes-adaptor\";\n  ExtensionType2[\"CanvasPipes\"] = \"canvas-pipes\";\n  ExtensionType2[\"Asset\"] = \"asset\";\n  ExtensionType2[\"LoadParser\"] = \"load-parser\";\n  ExtensionType2[\"ResolveParser\"] = \"resolve-parser\";\n  ExtensionType2[\"CacheParser\"] = \"cache-parser\";\n  ExtensionType2[\"DetectionParser\"] = \"detection-parser\";\n  ExtensionType2[\"MaskEffect\"] = \"mask-effect\";\n  ExtensionType2[\"BlendMode\"] = \"blend-mode\";\n  ExtensionType2[\"TextureSource\"] = \"texture-source\";\n  ExtensionType2[\"Environment\"] = \"environment\";\n  ExtensionType2[\"ShapeBuilder\"] = \"shape-builder\";\n  ExtensionType2[\"Batcher\"] = \"batcher\";\n  return ExtensionType2;\n})(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext === \"function\" || typeof ext === \"object\" && ext.extension) {\n    if (!ext.extension) {\n      throw new Error(\"Extension class must have an extension object\");\n    }\n    const metadata = typeof ext.extension !== \"object\" ? { type: ext.extension } : ext.extension;\n    ext = { ...metadata, ref: ext };\n  }\n  if (typeof ext === \"object\") {\n    ext = { ...ext };\n  } else {\n    throw new Error(\"Invalid extension type\");\n  }\n  if (typeof ext.type === \"string\") {\n    ext.type = [ext.type];\n  }\n  return ext;\n};\nconst normalizeExtensionPriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority;\nconst extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed. Can be:\n   * - Extension class with static `extension` property\n   * - Extension format object with `type` and `ref`\n   * - Multiple extensions as separate arguments\n   * @returns {extensions} this for chaining\n   * @example\n   * ```ts\n   * // Remove a single extension\n   * extensions.remove(MyRendererPlugin);\n   *\n   * // Remove multiple extensions\n   * extensions.remove(\n   *     MyRendererPlugin,\n   *     MySystemPlugin\n   * );\n   * ```\n   * @see {@link ExtensionType} For available extension types\n   * @see {@link ExtensionFormat} For extension format details\n   */\n  remove(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    });\n    return this;\n  },\n  /**\n   * Register new extensions with PixiJS. Extensions can be registered in multiple formats:\n   * - As a class with a static `extension` property\n   * - As an extension format object\n   * - As multiple extensions passed as separate arguments\n   * @param extensions - Extensions to add to PixiJS. Each can be:\n   * - A class with static `extension` property\n   * - An extension format object with `type` and `ref`\n   * - Multiple extensions as separate arguments\n   * @returns This extensions instance for chaining\n   * @example\n   * ```ts\n   * // Register a simple extension\n   * extensions.add(MyRendererPlugin);\n   *\n   * // Register multiple extensions\n   * extensions.add(\n   *     MyRendererPlugin,\n   *     MySystemPlugin,\n   * });\n   * ```\n   * @see {@link ExtensionType} For available extension types\n   * @see {@link ExtensionFormat} For extension format details\n   * @see {@link extensions.remove} For removing registered extensions\n   */\n  add(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers;\n        const queue = this._queue;\n        if (!handlers[type]) {\n          queue[type] = queue[type] || [];\n          queue[type]?.push(ext);\n        } else {\n          handlers[type]?.(ext);\n        }\n      });\n    });\n    return this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n   * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n   * @returns this for chaining.\n   * @internal\n   * @ignore\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers;\n    const removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type]) {\n      throw new Error(`Extension type ${type} already has a handler`);\n    }\n    addHandlers[type] = onAdd;\n    removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    if (queue[type]) {\n      queue[type]?.forEach((ext) => onAdd(ext));\n      delete queue[type];\n    }\n    return this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (extension.name) {\n          map[extension.name] = extension.ref;\n        }\n      },\n      (extension) => {\n        if (extension.name) {\n          delete map[extension.name];\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions with a `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The array of named extensions.\n   * @param defaultPriority - Fallback priority if none is defined.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByNamedList(type, map, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index >= 0)\n          return;\n        map.push({ name: extension.name, value: extension.ref });\n        map.sort((a, b) => normalizeExtensionPriority(b.value, defaultPriority) - normalizeExtensionPriority(a.value, defaultPriority));\n      },\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index !== -1) {\n          map.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (list.includes(extension.ref)) {\n          return;\n        }\n        list.push(extension.ref);\n        list.sort((a, b) => normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Mixin the source object(s) properties into the target class's prototype.\n   * Copies all property descriptors from source objects to the target's prototype.\n   * @param Target - The target class to mix properties into\n   * @param sources - One or more source objects containing properties to mix in\n   * @example\n   * ```ts\n   * // Create a mixin with shared properties\n   * const moveable = {\n   *     x: 0,\n   *     y: 0,\n   *     move(x: number, y: number) {\n   *         this.x += x;\n   *         this.y += y;\n   *     }\n   * };\n   *\n   * // Create a mixin with computed properties\n   * const scalable = {\n   *     scale: 1,\n   *     get scaled() {\n   *         return this.scale > 1;\n   *     }\n   * };\n   *\n   * // Apply mixins to a class\n   * extensions.mixin(Sprite, moveable, scalable);\n   *\n   * // Use mixed-in properties\n   * const sprite = new Sprite();\n   * sprite.move(10, 20);\n   * console.log(sprite.x, sprite.y); // 10, 20\n   * ```\n   * @remarks\n   * - Copies all properties including getters/setters\n   * - Does not modify source objects\n   * - Preserves property descriptors\n   * @see {@link Object.defineProperties} For details on property descriptors\n   * @see {@link Object.getOwnPropertyDescriptors} For details on property copying\n   */\n  mixin(Target, ...sources) {\n    for (const source of sources) {\n      Object.defineProperties(Target.prototype, Object.getOwnPropertyDescriptors(source));\n    }\n  }\n};\n\nexport { ExtensionType, extensions, normalizeExtensionPriority };\n//# sourceMappingURL=Extensions.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst browserExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"browser\",\n    priority: -1\n  },\n  test: () => true,\n  load: async () => {\n    await import('./browserAll.mjs');\n  }\n};\n\nexport { browserExt };\n//# sourceMappingURL=browserExt.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst webworkerExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"webworker\",\n    priority: 0\n  },\n  test: () => typeof self !== \"undefined\" && self.WorkerGlobalScope !== void 0,\n  load: async () => {\n    await import('./webworkerAll.mjs');\n  }\n};\n\nexport { webworkerExt };\n//# sourceMappingURL=webworkerExt.mjs.map\n","\"use strict\";\nclass ObservablePoint {\n  /**\n   * Creates a new `ObservablePoint`\n   * @param observer - Observer to pass to listen for change events.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(observer, x, y) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._observer = observer;\n  }\n  /**\n   * Creates a clone of this point.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const point = new ObservablePoint(observer, 100, 200);\n   * const copy = point.clone();\n   *\n   * // Clone with new observer\n   * const newObserver = {\n   *     _onUpdate: (p) => console.log(`Clone updated: (${p.x}, ${p.y})`)\n   * };\n   * const watched = point.clone(newObserver);\n   *\n   * // Verify independence\n   * watched.set(300, 400); // Only triggers new observer\n   * ```\n   * @param observer - Optional observer to pass to the new observable point\n   * @returns A copy of this observable point\n   * @see {@link ObservablePoint.copyFrom} For copying into existing point\n   * @see {@link Observer} For observer interface details\n   */\n  clone(observer) {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n  }\n  /**\n   * Sets the point to a new x and y position.\n   *\n   * If y is omitted, both x and y will be set to x.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * const point = new ObservablePoint(observer);\n   * point.set(100, 200);\n   *\n   * // Set both x and y to same value\n   * point.set(50); // x=50, y=50\n   * ```\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis, defaults to x\n   * @returns The point instance itself\n   * @see {@link ObservablePoint.copyFrom} For copying from another point\n   * @see {@link ObservablePoint.equals} For comparing positions\n   */\n  set(x = 0, y = x) {\n    if (this._x !== x || this._y !== y) {\n      this._x = x;\n      this._y = y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies x and y from the given point into this point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new ObservablePoint(observer, 100, 200);\n   * const target = new ObservablePoint();\n   * target.copyFrom(source);\n   *\n   * // Copy and chain operations\n   * const point = new ObservablePoint()\n   *     .copyFrom(source)\n   *     .set(x + 50, y + 50);\n   *\n   * // Copy from any PointData\n   * const data = { x: 10, y: 20 };\n   * point.copyFrom(data);\n   * ```\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   * @see {@link ObservablePoint.copyTo} For copying to another point\n   * @see {@link ObservablePoint.clone} For creating new point copy\n   */\n  copyFrom(p) {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x;\n      this._y = p.y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new ObservablePoint(100, 200);\n   * const target = new ObservablePoint();\n   * source.copyTo(target);\n   * ```\n   * @param p - The point to copy to. Can be any type that is or extends `PointLike`\n   * @returns The point (`p`) with values updated\n   * @see {@link ObservablePoint.copyFrom} For copying from another point\n   * @see {@link ObservablePoint.clone} For creating new point copy\n   */\n  copyTo(p) {\n    p.set(this._x, this._y);\n    return p;\n  }\n  /**\n   * Checks if another point is equal to this point.\n   *\n   * Compares x and y values using strict equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const p1 = new ObservablePoint(100, 200);\n   * const p2 = new ObservablePoint(100, 200);\n   * console.log(p1.equals(p2)); // true\n   *\n   * // Compare with PointData\n   * const data = { x: 100, y: 200 };\n   * console.log(p1.equals(data)); // true\n   *\n   * // Check different points\n   * const p3 = new ObservablePoint(200, 300);\n   * console.log(p1.equals(p3)); // false\n   * ```\n   * @param p - The point to check\n   * @returns `true` if both `x` and `y` are equal\n   * @see {@link ObservablePoint.copyFrom} For making points equal\n   * @see {@link PointData} For point data interface\n   */\n  equals(p) {\n    return p.x === this._x && p.y === this._y;\n  }\n  toString() {\n    return `[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`;\n  }\n  /**\n   * Position of the observable point on the x axis.\n   * Triggers observer callback when value changes.\n   * @example\n   * ```ts\n   * // Basic x position\n   * const point = new ObservablePoint(observer);\n   * point.x = 100; // Triggers observer\n   *\n   * // Use in calculations\n   * const width = rightPoint.x - leftPoint.x;\n   * ```\n   * @default 0\n   */\n  get x() {\n    return this._x;\n  }\n  set x(value) {\n    if (this._x !== value) {\n      this._x = value;\n      this._observer._onUpdate(this);\n    }\n  }\n  /**\n   * Position of the observable point on the y axis.\n   * Triggers observer callback when value changes.\n   * @example\n   * ```ts\n   * // Basic y position\n   * const point = new ObservablePoint(observer);\n   * point.y = 200; // Triggers observer\n   *\n   * // Use in calculations\n   * const height = bottomPoint.y - topPoint.y;\n   * ```\n   * @default 0\n   */\n  get y() {\n    return this._y;\n  }\n  set y(value) {\n    if (this._y !== value) {\n      this._y = value;\n      this._observer._onUpdate(this);\n    }\n  }\n}\n\nexport { ObservablePoint };\n//# sourceMappingURL=ObservablePoint.mjs.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\nconst PI_2 = Math.PI * 2;\nconst RAD_TO_DEG = 180 / Math.PI;\nconst DEG_TO_RAD = Math.PI / 180;\n\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass Point {\n  /**\n   * Creates a new `Point`\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(x = 0, y = 0) {\n    /**\n     * Position of the point on the x axis\n     * @example\n     * ```ts\n     * // Set x position\n     * const point = new Point();\n     * point.x = 100;\n     *\n     * // Use in calculations\n     * const width = rightPoint.x - leftPoint.x;\n     * ```\n     */\n    this.x = 0;\n    /**\n     * Position of the point on the y axis\n     * @example\n     * ```ts\n     * // Set y position\n     * const point = new Point();\n     * point.y = 200;\n     *\n     * // Use in calculations\n     * const height = bottomPoint.y - topPoint.y;\n     * ```\n     */\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  /**\n   * Creates a clone of this point, which is a new instance with the same `x` and `y` values.\n   * @example\n   * ```ts\n   * // Basic point cloning\n   * const original = new Point(100, 200);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.set(300, 400);\n   *\n   * // Verify independence\n   * console.log(original); // Point(100, 200)\n   * console.log(modified); // Point(300, 400)\n   * ```\n   * @remarks\n   * - Creates new Point instance\n   * - Deep copies x and y values\n   * - Independent from original\n   * - Useful for preserving values\n   * @returns A clone of this point\n   * @see {@link Point.copyFrom} For copying into existing point\n   * @see {@link Point.copyTo} For copying to existing point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n  /**\n   * Copies x and y from the given point into this point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Point(100, 200);\n   * const target = new Point();\n   * target.copyFrom(source);\n   *\n   * // Copy and chain operations\n   * const point = new Point()\n   *     .copyFrom(source)\n   *     .set(x + 50, y + 50);\n   *\n   * // Copy from any PointData\n   * const data = { x: 10, y: 20 };\n   * point.copyFrom(data);\n   * ```\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   * @see {@link Point.copyTo} For copying to another point\n   * @see {@link Point.clone} For creating new point copy\n   */\n  copyFrom(p) {\n    this.set(p.x, p.y);\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Point(100, 200);\n   * const target = new Point();\n   * source.copyTo(target);\n   * ```\n   * @param p - The point to copy to. Can be any type that is or extends `PointLike`\n   * @returns The point (`p`) with values updated\n   * @see {@link Point.copyFrom} For copying from another point\n   * @see {@link Point.clone} For creating new point copy\n   */\n  copyTo(p) {\n    p.set(this.x, this.y);\n    return p;\n  }\n  /**\n   * Checks if another point is equal to this point.\n   *\n   * Compares x and y values using strict equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const p1 = new Point(100, 200);\n   * const p2 = new Point(100, 200);\n   * console.log(p1.equals(p2)); // true\n   *\n   * // Compare with PointData\n   * const data = { x: 100, y: 200 };\n   * console.log(p1.equals(data)); // true\n   *\n   * // Check different points\n   * const p3 = new Point(200, 300);\n   * console.log(p1.equals(p3)); // false\n   * ```\n   * @param p - The point to check\n   * @returns `true` if both `x` and `y` are equal\n   * @see {@link Point.copyFrom} For making points equal\n   * @see {@link PointData} For point data interface\n   */\n  equals(p) {\n    return p.x === this.x && p.y === this.y;\n  }\n  /**\n   * Sets the point to a new x and y position.\n   *\n   * If y is omitted, both x and y will be set to x.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * const point = new Point();\n   * point.set(100, 200);\n   *\n   * // Set both x and y to same value\n   * point.set(50); // x=50, y=50\n   *\n   * // Chain with other operations\n   * point\n   *     .set(10, 20)\n   *     .copyTo(otherPoint);\n   * ```\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis, defaults to x\n   * @returns The point instance itself\n   * @see {@link Point.copyFrom} For copying from another point\n   * @see {@link Point.equals} For comparing positions\n   */\n  set(x = 0, y = x) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n  }\n  /**\n   * A static Point object with `x` and `y` values of `0`.\n   *\n   * This shared instance is reset to zero values when accessed.\n   *\n   * > [!IMPORTANT] This point is shared and temporary. Do not store references to it.\n   * @example\n   * ```ts\n   * // Use for temporary calculations\n   * const tempPoint = Point.shared;\n   * tempPoint.set(100, 200);\n   * matrix.apply(tempPoint);\n   *\n   * // Will be reset to (0,0) on next access\n   * const fresh = Point.shared; // x=0, y=0\n   * ```\n   * @readonly\n   * @returns A fresh zeroed point for temporary use\n   * @see {@link Point.constructor} For creating new points\n   * @see {@link PointData} For basic point interface\n   */\n  static get shared() {\n    tempPoint.x = 0;\n    tempPoint.y = 0;\n    return tempPoint;\n  }\n}\nconst tempPoint = new Point();\n\nexport { Point };\n//# sourceMappingURL=Point.mjs.map\n","import { PI_2 } from '../misc/const.mjs';\nimport { Point } from '../point/Point.mjs';\n\n\"use strict\";\nclass Matrix {\n  /**\n   * @param a - x scale\n   * @param b - y skew\n   * @param c - x skew\n   * @param d - y scale\n   * @param tx - x translation\n   * @param ty - y translation\n   */\n  constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n    /**\n     * Array representation of the matrix.\n     * Only populated when `toArray()` is called.\n     * @default null\n     * @see {@link Matrix.toArray} For filling this array\n     */\n    this.array = null;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  }\n  /**\n   * Creates a Matrix object based on the given array.\n   * Populates matrix components from a flat array in column-major order.\n   *\n   * > [!NOTE] Array mapping order:\n   * > ```\n   * > array[0] = a  (x scale)\n   * > array[1] = b  (y skew)\n   * > array[2] = tx (x translation)\n   * > array[3] = c  (x skew)\n   * > array[4] = d  (y scale)\n   * > array[5] = ty (y translation)\n   * > ```\n   * @example\n   * ```ts\n   * // Create matrix from array\n   * const matrix = new Matrix();\n   * matrix.fromArray([\n   *     2, 0,  100,  // a, b, tx\n   *     0, 2,  100   // c, d, ty\n   * ]);\n   *\n   * // Create matrix from typed array\n   * const float32Array = new Float32Array([\n   *     1, 0, 0,     // Scale x1, no skew\n   *     0, 1, 0      // No skew, scale x1\n   * ]);\n   * matrix.fromArray(float32Array);\n   * ```\n   * @param array - The array to populate the matrix from\n   * @see {@link Matrix.toArray} For converting matrix to array\n   * @see {@link Matrix.set} For setting values directly\n   */\n  fromArray(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n  }\n  /**\n   * Sets the matrix properties directly.\n   * All matrix components can be set in one call.\n   * @example\n   * ```ts\n   * // Set to identity matrix\n   * matrix.set(1, 0, 0, 1, 0, 0);\n   *\n   * // Set to scale matrix\n   * matrix.set(2, 0, 0, 2, 0, 0); // Scale 2x\n   *\n   * // Set to translation matrix\n   * matrix.set(1, 0, 0, 1, 100, 50); // Move 100,50\n   * ```\n   * @param a - Scale on x axis\n   * @param b - Shear on y axis\n   * @param c - Shear on x axis\n   * @param d - Scale on y axis\n   * @param tx - Translation on x axis\n   * @param ty - Translation on y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.fromArray} For setting from array\n   */\n  set(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n    return this;\n  }\n  /**\n   * Creates an array from the current Matrix object.\n   *\n   * > [!NOTE] The array format is:\n   * > ```\n   * > Non-transposed:\n   * > [a, c, tx,\n   * > b, d, ty,\n   * > 0, 0, 1]\n   * >\n   * > Transposed:\n   * > [a, b, 0,\n   * > c, d, 0,\n   * > tx,ty,1]\n   * > ```\n   * @example\n   * ```ts\n   * // Basic array conversion\n   * const matrix = new Matrix(2, 0, 0, 2, 100, 100);\n   * const array = matrix.toArray();\n   *\n   * // Using existing array\n   * const float32Array = new Float32Array(9);\n   * matrix.toArray(false, float32Array);\n   *\n   * // Get transposed array\n   * const transposed = matrix.toArray(true);\n   * ```\n   * @param transpose - Whether to transpose the matrix\n   * @param out - Optional Float32Array to store the result\n   * @returns The array containing the matrix values\n   * @see {@link Matrix.fromArray} For creating matrix from array\n   * @see {@link Matrix.array} For cached array storage\n   */\n  toArray(transpose, out) {\n    if (!this.array) {\n      this.array = new Float32Array(9);\n    }\n    const array = out || this.array;\n    if (transpose) {\n      array[0] = this.a;\n      array[1] = this.b;\n      array[2] = 0;\n      array[3] = this.c;\n      array[4] = this.d;\n      array[5] = 0;\n      array[6] = this.tx;\n      array[7] = this.ty;\n      array[8] = 1;\n    } else {\n      array[0] = this.a;\n      array[1] = this.c;\n      array[2] = this.tx;\n      array[3] = this.b;\n      array[4] = this.d;\n      array[5] = this.ty;\n      array[6] = 0;\n      array[7] = 0;\n      array[8] = 1;\n    }\n    return array;\n  }\n  /**\n   * Get a new position with the current transformation applied.\n   *\n   * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n   * @example\n   * ```ts\n   * // Basic point transformation\n   * const matrix = new Matrix().translate(100, 50).rotate(Math.PI / 4);\n   * const point = new Point(10, 20);\n   * const transformed = matrix.apply(point);\n   *\n   * // Reuse existing point\n   * const output = new Point();\n   * matrix.apply(point, output);\n   * ```\n   * @param pos - The origin point to transform\n   * @param newPos - Optional point to store the result\n   * @returns The transformed point\n   * @see {@link Matrix.applyInverse} For inverse transformation\n   * @see {@link Point} For point operations\n   */\n  apply(pos, newPos) {\n    newPos = newPos || new Point();\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = this.a * x + this.c * y + this.tx;\n    newPos.y = this.b * x + this.d * y + this.ty;\n    return newPos;\n  }\n  /**\n   * Get a new position with the inverse of the current transformation applied.\n   *\n   * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n   * @example\n   * ```ts\n   * // Basic inverse transformation\n   * const matrix = new Matrix().translate(100, 50).rotate(Math.PI / 4);\n   * const worldPoint = new Point(150, 100);\n   * const localPoint = matrix.applyInverse(worldPoint);\n   *\n   * // Reuse existing point\n   * const output = new Point();\n   * matrix.applyInverse(worldPoint, output);\n   *\n   * // Convert mouse position to local space\n   * const mousePoint = new Point(mouseX, mouseY);\n   * const localMouse = matrix.applyInverse(mousePoint);\n   * ```\n   * @param pos - The origin point to inverse-transform\n   * @param newPos - Optional point to store the result\n   * @returns The inverse-transformed point\n   * @see {@link Matrix.apply} For forward transformation\n   * @see {@link Matrix.invert} For getting inverse matrix\n   */\n  applyInverse(pos, newPos) {\n    newPos = newPos || new Point();\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const tx = this.tx;\n    const ty = this.ty;\n    const id = 1 / (a * d + c * -b);\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = d * id * x + -c * id * y + (ty * c - tx * d) * id;\n    newPos.y = a * id * y + -b * id * x + (-ty * a + tx * b) * id;\n    return newPos;\n  }\n  /**\n   * Translates the matrix on the x and y axes.\n   * Adds to the position values while preserving scale, rotation and skew.\n   * @example\n   * ```ts\n   * // Basic translation\n   * const matrix = new Matrix();\n   * matrix.translate(100, 50); // Move right 100, down 50\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .scale(2, 2)\n   *     .translate(100, 0)\n   *     .rotate(Math.PI / 4);\n   * ```\n   * @param x - How much to translate on the x axis\n   * @param y - How much to translate on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.set} For setting position directly\n   * @see {@link Matrix.setTransform} For complete transform setup\n   */\n  translate(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n  }\n  /**\n   * Applies a scale transformation to the matrix.\n   * Multiplies the scale values with existing matrix components.\n   * @example\n   * ```ts\n   * // Basic scaling\n   * const matrix = new Matrix();\n   * matrix.scale(2, 3); // Scale 2x horizontally, 3x vertically\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .translate(100, 100)\n   *     .scale(2, 2)     // Scales after translation\n   *     .rotate(Math.PI / 4);\n   * ```\n   * @param x - The amount to scale horizontally\n   * @param y - The amount to scale vertically\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.setTransform} For setting scale directly\n   * @see {@link Matrix.append} For combining transformations\n   */\n  scale(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the matrix.\n   *\n   * Rotates around the origin (0,0) by the given angle in radians.\n   * @example\n   * ```ts\n   * // Basic rotation\n   * const matrix = new Matrix();\n   * matrix.rotate(Math.PI / 4); // Rotate 45 degrees\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .translate(100, 100) // Move to rotation center\n   *     .rotate(Math.PI)     // Rotate 180 degrees\n   *     .scale(2, 2);        // Scale after rotation\n   *\n   * // Common angles\n   * matrix.rotate(Math.PI / 2);  // 90 degrees\n   * matrix.rotate(Math.PI);      // 180 degrees\n   * matrix.rotate(Math.PI * 2);  // 360 degrees\n   * ```\n   * @remarks\n   * - Rotates around origin point (0,0)\n   * - Affects position if translation was set\n   * - Uses counter-clockwise rotation\n   * - Order of operations matters when chaining\n   * @param angle - The angle in radians\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.setTransform} For setting rotation directly\n   * @see {@link Matrix.append} For combining transformations\n   */\n  rotate(angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const a1 = this.a;\n    const c1 = this.c;\n    const tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n  }\n  /**\n   * Appends the given Matrix to this Matrix.\n   * Combines two matrices by multiplying them together: this = this * matrix\n   * @example\n   * ```ts\n   * // Basic matrix combination\n   * const matrix = new Matrix();\n   * const other = new Matrix().translate(100, 0).rotate(Math.PI / 4);\n   * matrix.append(other);\n   * ```\n   * @remarks\n   * - Order matters: A.append(B) !== B.append(A)\n   * - Modifies current matrix\n   * - Preserves transformation order\n   * - Commonly used for combining transforms\n   * @param matrix - The matrix to append\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.prepend} For prepending transformations\n   * @see {@link Matrix.appendFrom} For appending two external matrices\n   */\n  append(matrix) {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n  }\n  /**\n   * Appends two matrices and sets the result to this matrix.\n   * Performs matrix multiplication: this = A * B\n   * @example\n   * ```ts\n   * // Basic matrix multiplication\n   * const result = new Matrix();\n   * const matrixA = new Matrix().scale(2, 2);\n   * const matrixB = new Matrix().rotate(Math.PI / 4);\n   * result.appendFrom(matrixA, matrixB);\n   * ```\n   * @remarks\n   * - Order matters: A * B !== B * A\n   * - Creates a new transformation from two others\n   * - More efficient than append() for multiple operations\n   * - Does not modify input matrices\n   * @param a - The first matrix to multiply\n   * @param b - The second matrix to multiply\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.append} For single matrix combination\n   * @see {@link Matrix.prepend} For reverse order multiplication\n   */\n  appendFrom(a, b) {\n    const a1 = a.a;\n    const b1 = a.b;\n    const c1 = a.c;\n    const d1 = a.d;\n    const tx = a.tx;\n    const ty = a.ty;\n    const a2 = b.a;\n    const b2 = b.b;\n    const c2 = b.c;\n    const d2 = b.d;\n    this.a = a1 * a2 + b1 * c2;\n    this.b = a1 * b2 + b1 * d2;\n    this.c = c1 * a2 + d1 * c2;\n    this.d = c1 * b2 + d1 * d2;\n    this.tx = tx * a2 + ty * c2 + b.tx;\n    this.ty = tx * b2 + ty * d2 + b.ty;\n    return this;\n  }\n  /**\n   * Sets the matrix based on all the available properties.\n   * Combines position, scale, rotation, skew and pivot in a single operation.\n   * @example\n   * ```ts\n   * // Basic transform setup\n   * const matrix = new Matrix();\n   * matrix.setTransform(\n   *     100, 100,    // position\n   *     0, 0,        // pivot\n   *     2, 2,        // scale\n   *     Math.PI / 4, // rotation (45 degrees)\n   *     0, 0         // skew\n   * );\n   * ```\n   * @remarks\n   * - Updates all matrix components at once\n   * - More efficient than separate transform calls\n   * - Uses radians for rotation and skew\n   * - Pivot affects rotation center\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis\n   * @param pivotX - Pivot on the x axis\n   * @param pivotY - Pivot on the y axis\n   * @param scaleX - Scale on the x axis\n   * @param scaleY - Scale on the y axis\n   * @param rotation - Rotation in radians\n   * @param skewX - Skew on the x axis\n   * @param skewY - Skew on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.decompose} For extracting transform properties\n   * @see {@link TransformableObject} For transform data structure\n   */\n  setTransform(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    this.a = Math.cos(rotation + skewY) * scaleX;\n    this.b = Math.sin(rotation + skewY) * scaleX;\n    this.c = -Math.sin(rotation - skewX) * scaleY;\n    this.d = Math.cos(rotation - skewX) * scaleY;\n    this.tx = x - (pivotX * this.a + pivotY * this.c);\n    this.ty = y - (pivotX * this.b + pivotY * this.d);\n    return this;\n  }\n  /**\n   * Prepends the given Matrix to this Matrix.\n   * Combines two matrices by multiplying them together: this = matrix * this\n   * @example\n   * ```ts\n   * // Basic matrix prepend\n   * const matrix = new Matrix().scale(2, 2);\n   * const other = new Matrix().translate(100, 0);\n   * matrix.prepend(other); // Translation happens before scaling\n   * ```\n   * @remarks\n   * - Order matters: A.prepend(B) !== B.prepend(A)\n   * - Modifies current matrix\n   * - Reverses transformation order compared to append()\n   * @param matrix - The matrix to prepend\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.append} For appending transformations\n   * @see {@link Matrix.appendFrom} For combining external matrices\n   */\n  prepend(matrix) {\n    const tx1 = this.tx;\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      const a1 = this.a;\n      const c1 = this.c;\n      this.a = a1 * matrix.a + this.b * matrix.c;\n      this.b = a1 * matrix.b + this.b * matrix.d;\n      this.c = c1 * matrix.a + this.d * matrix.c;\n      this.d = c1 * matrix.b + this.d * matrix.d;\n    }\n    this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n    this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n    return this;\n  }\n  /**\n   * Decomposes the matrix into its individual transform components.\n   * Extracts position, scale, rotation and skew values from the matrix.\n   * @example\n   * ```ts\n   * // Basic decomposition\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4)\n   *     .scale(2, 2);\n   *\n   * const transform = {\n   *     position: new Point(),\n   *     scale: new Point(),\n   *     pivot: new Point(),\n   *     skew: new Point(),\n   *     rotation: 0\n   * };\n   *\n   * matrix.decompose(transform);\n   * console.log(transform.position); // Point(100, 100)\n   * console.log(transform.rotation); // ~0.785 (PI/4)\n   * console.log(transform.scale); // Point(2, 2)\n   * ```\n   * @remarks\n   * - Handles combined transformations\n   * - Accounts for pivot points\n   * - Chooses between rotation/skew based on transform type\n   * - Uses radians for rotation and skew\n   * @param transform - The transform object to store the decomposed values\n   * @returns The transform with the newly applied properties\n   * @see {@link Matrix.setTransform} For composing from components\n   * @see {@link TransformableObject} For transform structure\n   */\n  decompose(transform) {\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const pivot = transform.pivot;\n    const skewX = -Math.atan2(-c, d);\n    const skewY = Math.atan2(b, a);\n    const delta = Math.abs(skewX + skewY);\n    if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {\n      transform.rotation = skewY;\n      transform.skew.x = transform.skew.y = 0;\n    } else {\n      transform.rotation = 0;\n      transform.skew.x = skewX;\n      transform.skew.y = skewY;\n    }\n    transform.scale.x = Math.sqrt(a * a + b * b);\n    transform.scale.y = Math.sqrt(c * c + d * d);\n    transform.position.x = this.tx + (pivot.x * a + pivot.y * c);\n    transform.position.y = this.ty + (pivot.x * b + pivot.y * d);\n    return transform;\n  }\n  /**\n   * Inverts this matrix.\n   * Creates the matrix that when multiplied with this matrix results in an identity matrix.\n   * @example\n   * ```ts\n   * // Basic matrix inversion\n   * const matrix = new Matrix()\n   *     .translate(100, 50)\n   *     .scale(2, 2);\n   *\n   * matrix.invert(); // Now transforms in opposite direction\n   *\n   * // Verify inversion\n   * const point = new Point(50, 50);\n   * const transformed = matrix.apply(point);\n   * const original = matrix.invert().apply(transformed);\n   * // original  point\n   * ```\n   * @remarks\n   * - Modifies the current matrix\n   * - Useful for reversing transformations\n   * - Cannot invert matrices with zero determinant\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.applyInverse} For inverse transformations\n   */\n  invert() {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    const tx1 = this.tx;\n    const n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  }\n  /**\n   * Checks if this matrix is an identity matrix.\n   *\n   * An identity matrix has no transformations applied (default state).\n   * @example\n   * ```ts\n   * // Check if matrix is identity\n   * const matrix = new Matrix();\n   * console.log(matrix.isIdentity()); // true\n   *\n   * // Check after transformations\n   * matrix.translate(100, 0);\n   * console.log(matrix.isIdentity()); // false\n   *\n   * // Reset and verify\n   * matrix.identity();\n   * console.log(matrix.isIdentity()); // true\n   * ```\n   * @remarks\n   * - Verifies a = 1, d = 1 (no scale)\n   * - Verifies b = 0, c = 0 (no skew)\n   * - Verifies tx = 0, ty = 0 (no translation)\n   * @returns True if matrix has no transformations\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.IDENTITY} For constant identity matrix\n   */\n  isIdentity() {\n    return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n  }\n  /**\n   * Resets this Matrix to an identity (default) matrix.\n   * Sets all components to their default values: scale=1, no skew, no translation.\n   * @example\n   * ```ts\n   * // Reset transformed matrix\n   * const matrix = new Matrix()\n   *     .scale(2, 2)\n   *     .rotate(Math.PI / 4);\n   * matrix.identity(); // Back to default state\n   *\n   * // Chain after reset\n   * matrix\n   *     .identity()\n   *     .translate(100, 100)\n   *     .scale(2, 2);\n   *\n   * // Compare with identity constant\n   * const isDefault = matrix.equals(Matrix.IDENTITY);\n   * ```\n   * @remarks\n   * - Sets a=1, d=1 (default scale)\n   * - Sets b=0, c=0 (no skew)\n   * - Sets tx=0, ty=0 (no translation)\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.IDENTITY} For constant identity matrix\n   * @see {@link Matrix.isIdentity} For checking identity state\n   */\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @returns A copy of this matrix. Good for chaining method calls.\n   */\n  clone() {\n    const matrix = new Matrix();\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @param matrix\n   * @example\n   * ```ts\n   * // Basic matrix cloning\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4);\n   * const copy = matrix.clone();\n   *\n   * // Clone and modify\n   * const modified = matrix.clone()\n   *     .scale(2, 2);\n   *\n   * // Compare matrices\n   * console.log(matrix.equals(copy));     // true\n   * console.log(matrix.equals(modified)); // false\n   * ```\n   * @returns A copy of this matrix. Good for chaining method calls.\n   * @see {@link Matrix.copyTo} For copying to existing matrix\n   * @see {@link Matrix.copyFrom} For copying from another matrix\n   */\n  copyTo(matrix) {\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the matrix to be the same as the ones in given matrix.\n   * @example\n   * ```ts\n   * // Basic matrix copying\n   * const source = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4);\n   * const target = new Matrix();\n   * target.copyFrom(source);\n   * ```\n   * @param matrix - The matrix to copy from\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.clone} For creating new matrix copy\n   * @see {@link Matrix.copyTo} For copying to another matrix\n   */\n  copyFrom(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n    return this;\n  }\n  /**\n   * Checks if this matrix equals another matrix.\n   * Compares all components for exact equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const m1 = new Matrix();\n   * const m2 = new Matrix();\n   * console.log(m1.equals(m2)); // true\n   *\n   * // Compare transformed matrices\n   * const transform = new Matrix()\n   *     .translate(100, 100)\n   * const clone = new Matrix()\n   *     .scale(2, 2);\n   * console.log(transform.equals(clone)); // false\n   * ```\n   * @param matrix - The matrix to compare to\n   * @returns True if matrices are identical\n   * @see {@link Matrix.copyFrom} For copying matrix values\n   * @see {@link Matrix.isIdentity} For identity comparison\n   */\n  equals(matrix) {\n    return matrix.a === this.a && matrix.b === this.b && matrix.c === this.c && matrix.d === this.d && matrix.tx === this.tx && matrix.ty === this.ty;\n  }\n  toString() {\n    return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n  }\n  /**\n   * A default (identity) matrix with no transformations applied.\n   *\n   * > [!IMPORTANT] This is a shared read-only object. Create a new Matrix if you need to modify it.\n   * @example\n   * ```ts\n   * // Get identity matrix reference\n   * const identity = Matrix.IDENTITY;\n   * console.log(identity.isIdentity()); // true\n   *\n   * // Compare with identity\n   * const matrix = new Matrix();\n   * console.log(matrix.equals(Matrix.IDENTITY)); // true\n   *\n   * // Create new matrix instead of modifying IDENTITY\n   * const transform = new Matrix()\n   *     .copyFrom(Matrix.IDENTITY)\n   *     .translate(100, 100);\n   * ```\n   * @readonly\n   * @returns A read-only identity matrix\n   * @see {@link Matrix.shared} For temporary calculations\n   * @see {@link Matrix.identity} For resetting matrices\n   */\n  static get IDENTITY() {\n    return identityMatrix.identity();\n  }\n  /**\n   * A static Matrix that can be used to avoid creating new objects.\n   * Will always ensure the matrix is reset to identity when requested.\n   *\n   * > [!IMPORTANT] This matrix is shared and temporary. Do not store references to it.\n   * @example\n   * ```ts\n   * // Use for temporary calculations\n   * const tempMatrix = Matrix.shared;\n   * tempMatrix.translate(100, 100).rotate(Math.PI / 4);\n   * const point = tempMatrix.apply({ x: 10, y: 20 });\n   *\n   * // Will be reset to identity on next access\n   * const fresh = Matrix.shared; // Back to identity\n   * ```\n   * @remarks\n   * - Always returns identity matrix\n   * - Safe to modify temporarily\n   * - Not safe to store references\n   * - Useful for one-off calculations\n   * @readonly\n   * @returns A fresh identity matrix for temporary use\n   * @see {@link Matrix.IDENTITY} For immutable identity matrix\n   * @see {@link Matrix.identity} For resetting matrices\n   */\n  static get shared() {\n    return tempMatrix.identity();\n  }\n}\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n\nexport { Matrix };\n//# sourceMappingURL=Matrix.mjs.map\n","import { Matrix } from './Matrix.mjs';\n\n\"use strict\";\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\nconst rotationCayley = [];\nconst rotationMatrices = [];\nconst signum = Math.sign;\nfunction init() {\n  for (let i = 0; i < 16; i++) {\n    const row = [];\n    rotationCayley.push(row);\n    for (let j = 0; j < 16; j++) {\n      const _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);\n      const _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);\n      const _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);\n      const _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);\n      for (let k = 0; k < 16; k++) {\n        if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {\n          row.push(k);\n          break;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < 16; i++) {\n    const mat = new Matrix();\n    mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n    rotationMatrices.push(mat);\n  }\n}\ninit();\nconst groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0       | East      |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45     | Southeast |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90     | South     |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135    | Southwest |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180     | West      |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135/225 | Northwest    |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90/270  | North        |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45/315  | Northeast    |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: (ind) => ux[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: (ind) => uy[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: (ind) => vx[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: (ind) => vy[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: (rotation) => {\n    if (rotation & 8) {\n      return rotation & 15;\n    }\n    return -rotation & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @group groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {GD8Symmetry} Composed operation\n   */\n  add: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][rotationFirst],\n  /**\n   * Reverse of `add`.\n   * @group groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation\n   * @param {GD8Symmetry} rotationFirst - First operation\n   * @returns {GD8Symmetry} Result\n   */\n  sub: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][groupD8.inv(rotationFirst)],\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @group groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: (rotation) => rotation ^ 4,\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @group groupD8\n   * @param {GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: (rotation) => (rotation & 3) === 2,\n  // rotation % 4 === 2\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @group groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: (dx, dy) => {\n    if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n      if (dy >= 0) {\n        return groupD8.S;\n      }\n      return groupD8.N;\n    } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n      if (dx > 0) {\n        return groupD8.E;\n      }\n      return groupD8.W;\n    } else if (dy > 0) {\n      if (dx > 0) {\n        return groupD8.SE;\n      }\n      return groupD8.SW;\n    } else if (dx > 0) {\n      return groupD8.NE;\n    }\n    return groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @group groupD8\n   * @param {Matrix} matrix - sprite world matrix\n   * @param {GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: (matrix, rotation, tx = 0, ty = 0) => {\n    const mat = rotationMatrices[groupD8.inv(rotation)];\n    mat.tx = tx;\n    mat.ty = ty;\n    matrix.append(mat);\n  },\n  /**\n   * Transforms rectangle coordinates based on texture packer rotation.\n   * Used when texture atlas pages are rotated and coordinates need to be adjusted.\n   * @group groupD8\n   * @param {RectangleLike} rect - Rectangle with original coordinates to transform\n   * @param {RectangleLike} sourceFrame - Source texture frame (includes offset and dimensions)\n   * @param {GD8Symmetry} rotation - The groupD8 rotation value\n   * @param {Rectangle} out - Rectangle to store the result\n   * @returns {Rectangle} Transformed coordinates (includes source frame offset)\n   */\n  transformRectCoords: (rect, sourceFrame, rotation, out) => {\n    const { x, y, width, height } = rect;\n    const { x: frameX, y: frameY, width: frameWidth, height: frameHeight } = sourceFrame;\n    if (rotation === groupD8.E) {\n      out.set(x + frameX, y + frameY, width, height);\n      return out;\n    } else if (rotation === groupD8.S) {\n      return out.set(\n        frameWidth - y - height + frameX,\n        x + frameY,\n        height,\n        width\n      );\n    } else if (rotation === groupD8.W) {\n      return out.set(\n        frameWidth - x - width + frameX,\n        frameHeight - y - height + frameY,\n        width,\n        height\n      );\n    } else if (rotation === groupD8.N) {\n      return out.set(\n        y + frameX,\n        frameHeight - x - width + frameY,\n        height,\n        width\n      );\n    }\n    return out.set(x + frameX, y + frameY, width, height);\n  }\n};\n\nexport { groupD8 };\n//# sourceMappingURL=groupD8.mjs.map\n","import { Point } from '../point/Point.mjs';\n\n\"use strict\";\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\nclass Rectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Rectangle(0, 0, 100, 100);\n     * console.log(shape.type); // 'rectangle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'rectangle') {\n     *     console.log(shape.width, shape.height);\n     * }\n     * ```\n     * @readonly\n     * @default 'rectangle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"rectangle\";\n    this.x = Number(x);\n    this.y = Number(y);\n    this.width = Number(width);\n    this.height = Number(height);\n  }\n  /**\n   * Returns the left edge (x-coordinate) of the rectangle.\n   * @example\n   * ```ts\n   * // Get left edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.left); // 100\n   *\n   * // Use in alignment calculations\n   * sprite.x = rect.left + padding;\n   *\n   * // Compare positions\n   * if (point.x > rect.left) {\n   *     console.log('Point is right of rectangle');\n   * }\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the left edge\n   * @see {@link Rectangle.right} For right edge position\n   * @see {@link Rectangle.x} For direct x-coordinate access\n   */\n  get left() {\n    return this.x;\n  }\n  /**\n   * Returns the right edge (x + width) of the rectangle.\n   * @example\n   * ```ts\n   * // Get right edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.right); // 300\n   *\n   * // Align to right edge\n   * sprite.x = rect.right - sprite.width;\n   *\n   * // Check boundaries\n   * if (point.x < rect.right) {\n   *     console.log('Point is inside right bound');\n   * }\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the right edge\n   * @see {@link Rectangle.left} For left edge position\n   * @see {@link Rectangle.width} For width value\n   */\n  get right() {\n    return this.x + this.width;\n  }\n  /**\n   * Returns the top edge (y-coordinate) of the rectangle.\n   * @example\n   * ```ts\n   * // Get top edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.top); // 100\n   *\n   * // Position above rectangle\n   * sprite.y = rect.top - sprite.height;\n   *\n   * // Check vertical position\n   * if (point.y > rect.top) {\n   *     console.log('Point is below top edge');\n   * }\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the top edge\n   * @see {@link Rectangle.bottom} For bottom edge position\n   * @see {@link Rectangle.y} For direct y-coordinate access\n   */\n  get top() {\n    return this.y;\n  }\n  /**\n   * Returns the bottom edge (y + height) of the rectangle.\n   * @example\n   * ```ts\n   * // Get bottom edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.bottom); // 250\n   *\n   * // Stack below rectangle\n   * sprite.y = rect.bottom + margin;\n   *\n   * // Check vertical bounds\n   * if (point.y < rect.bottom) {\n   *     console.log('Point is above bottom edge');\n   * }\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the bottom edge\n   * @see {@link Rectangle.top} For top edge position\n   * @see {@link Rectangle.height} For height value\n   */\n  get bottom() {\n    return this.y + this.height;\n  }\n  /**\n   * Determines whether the Rectangle is empty (has no area).\n   * @example\n   * ```ts\n   * // Check zero dimensions\n   * const rect = new Rectangle(100, 100, 0, 50);\n   * console.log(rect.isEmpty()); // true\n   * ```\n   * @returns True if the rectangle has no area\n   * @see {@link Rectangle.width} For width value\n   * @see {@link Rectangle.height} For height value\n   */\n  isEmpty() {\n    return this.left === this.right || this.top === this.bottom;\n  }\n  /**\n   * A constant empty rectangle. This is a new object every time the property is accessed.\n   * @example\n   * ```ts\n   * // Get fresh empty rectangle\n   * const empty = Rectangle.EMPTY;\n   * console.log(empty.isEmpty()); // true\n   * ```\n   * @returns A new empty rectangle instance\n   * @see {@link Rectangle.isEmpty} For empty state testing\n   */\n  static get EMPTY() {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  /**\n   * Creates a clone of this Rectangle\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Rectangle(100, 100, 200, 150);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.width *= 2;\n   * modified.height += 50;\n   *\n   * // Verify independence\n   * console.log(original.width);  // 200\n   * console.log(modified.width);  // 400\n   * ```\n   * @returns A copy of the rectangle\n   * @see {@link Rectangle.copyFrom} For copying into existing rectangle\n   * @see {@link Rectangle.copyTo} For copying to another rectangle\n   */\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n  /**\n   * Converts a Bounds object to a Rectangle object.\n   * @example\n   * ```ts\n   * // Convert bounds to rectangle\n   * const bounds = container.getBounds();\n   * const rect = new Rectangle().copyFromBounds(bounds);\n   * ```\n   * @param bounds - The bounds to copy and convert to a rectangle\n   * @returns Returns itself\n   * @see {@link Bounds} For bounds object structure\n   * @see {@link Rectangle.getBounds} For getting rectangle bounds\n   */\n  copyFromBounds(bounds) {\n    this.x = bounds.minX;\n    this.y = bounds.minY;\n    this.width = bounds.maxX - bounds.minX;\n    this.height = bounds.maxY - bounds.minY;\n    return this;\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Rectangle(100, 100, 200, 150);\n   * const target = new Rectangle();\n   * target.copyFrom(source);\n   *\n   * // Chain with other operations\n   * const rect = new Rectangle()\n   *     .copyFrom(source)\n   *     .pad(10);\n   * ```\n   * @param rectangle - The rectangle to copy from\n   * @returns Returns itself\n   * @see {@link Rectangle.copyTo} For copying to another rectangle\n   * @see {@link Rectangle.clone} For creating new rectangle copy\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Rectangle(100, 100, 200, 150);\n   * const target = new Rectangle();\n   * source.copyTo(target);\n   *\n   * // Chain with other operations\n   * const result = source\n   *     .copyTo(new Rectangle())\n   *     .getBounds();\n   * ```\n   * @param rectangle - The rectangle to copy to\n   * @returns Returns given parameter\n   * @see {@link Rectangle.copyFrom} For copying from another rectangle\n   * @see {@link Rectangle.clone} For creating new rectangle copy\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rectangle\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const isInside = rect.contains(150, 125); // true\n   * // Check edge cases\n   * console.log(rect.contains(100, 100)); // true (on edge)\n   * console.log(rect.contains(300, 250)); // false (outside)\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rectangle\n   * @see {@link Rectangle.containsRect} For rectangle containment\n   * @see {@link Rectangle.strokeContains} For checking stroke intersection\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x < this.x + this.width) {\n      if (y >= this.y && y < this.y + this.height) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const isOnStroke = rect.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = rect.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = rect.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = rect.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this rectangle's stroke\n   * @see {@link Rectangle.contains} For checking fill containment\n   * @see {@link Rectangle.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const { width, height } = this;\n    if (width <= 0 || height <= 0)\n      return false;\n    const _x = this.x;\n    const _y = this.y;\n    const strokeWidthOuter = strokeWidth * (1 - alignment);\n    const strokeWidthInner = strokeWidth - strokeWidthOuter;\n    const outerLeft = _x - strokeWidthOuter;\n    const outerRight = _x + width + strokeWidthOuter;\n    const outerTop = _y - strokeWidthOuter;\n    const outerBottom = _y + height + strokeWidthOuter;\n    const innerLeft = _x + strokeWidthInner;\n    const innerRight = _x + width - strokeWidthInner;\n    const innerTop = _y + strokeWidthInner;\n    const innerBottom = _y + height - strokeWidthInner;\n    return x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n  }\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   * Returns true only if the area of the intersection is >0, this means that Rectangles\n   * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n   * (width or height equal to zero) can't intersect any other rectangle.\n   * @param {Rectangle} other - The Rectangle to intersect with `this`.\n   * @param {Matrix} transform - The transformation matrix of `other`.\n   * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n   */\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   *\n   * Returns true only if the area of the intersection is greater than 0.\n   * This means that rectangles sharing only a side are not considered intersecting.\n   * @example\n   * ```ts\n   * // Basic intersection check\n   * const rect1 = new Rectangle(0, 0, 100, 100);\n   * const rect2 = new Rectangle(50, 50, 100, 100);\n   * console.log(rect1.intersects(rect2)); // true\n   *\n   * // With transformation matrix\n   * const matrix = new Matrix();\n   * matrix.rotate(Math.PI / 4); // 45 degrees\n   * console.log(rect1.intersects(rect2, matrix)); // Checks with rotation\n   *\n   * // Edge cases\n   * const zeroWidth = new Rectangle(0, 0, 0, 100);\n   * console.log(rect1.intersects(zeroWidth)); // false (no area)\n   * ```\n   * @remarks\n   * - Returns true only if intersection area is > 0\n   * - Rectangles sharing only a side are not intersecting\n   * - Zero-area rectangles cannot intersect anything\n   * - Supports optional transformation matrix\n   * @param other - The Rectangle to intersect with `this`\n   * @param transform - Optional transformation matrix of `other`\n   * @returns True if the transformed `other` Rectangle intersects with `this`\n   * @see {@link Rectangle.containsRect} For containment testing\n   * @see {@link Rectangle.contains} For point testing\n   */\n  intersects(other, transform) {\n    if (!transform) {\n      const x02 = this.x < other.x ? other.x : this.x;\n      const x12 = this.right > other.right ? other.right : this.right;\n      if (x12 <= x02) {\n        return false;\n      }\n      const y02 = this.y < other.y ? other.y : this.y;\n      const y12 = this.bottom > other.bottom ? other.bottom : this.bottom;\n      return y12 > y02;\n    }\n    const x0 = this.left;\n    const x1 = this.right;\n    const y0 = this.top;\n    const y1 = this.bottom;\n    if (x1 <= x0 || y1 <= y0) {\n      return false;\n    }\n    const lt = tempPoints[0].set(other.left, other.top);\n    const lb = tempPoints[1].set(other.left, other.bottom);\n    const rt = tempPoints[2].set(other.right, other.top);\n    const rb = tempPoints[3].set(other.right, other.bottom);\n    if (rt.x <= lt.x || lb.y <= lt.y) {\n      return false;\n    }\n    const s = Math.sign(transform.a * transform.d - transform.b * transform.c);\n    if (s === 0) {\n      return false;\n    }\n    transform.apply(lt, lt);\n    transform.apply(lb, lb);\n    transform.apply(rt, rt);\n    transform.apply(rb, rb);\n    if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0 || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1 || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0 || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1) {\n      return false;\n    }\n    const nx = s * (lb.y - lt.y);\n    const ny = s * (lt.x - lb.x);\n    const n00 = nx * x0 + ny * y0;\n    const n10 = nx * x1 + ny * y0;\n    const n01 = nx * x0 + ny * y1;\n    const n11 = nx * x1 + ny * y1;\n    if (Math.max(n00, n10, n01, n11) <= nx * lt.x + ny * lt.y || Math.min(n00, n10, n01, n11) >= nx * rb.x + ny * rb.y) {\n      return false;\n    }\n    const mx = s * (lt.y - rt.y);\n    const my = s * (rt.x - lt.x);\n    const m00 = mx * x0 + my * y0;\n    const m10 = mx * x1 + my * y0;\n    const m01 = mx * x0 + my * y1;\n    const m11 = mx * x1 + my * y1;\n    if (Math.max(m00, m10, m01, m11) <= mx * lt.x + my * lt.y || Math.min(m00, m10, m01, m11) >= mx * rb.x + my * rb.y) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Pads the rectangle making it grow in all directions.\n   *\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @example\n   * ```ts\n   * // Basic padding\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * rect.pad(10); // Adds 10px padding on all sides\n   *\n   * // Different horizontal and vertical padding\n   * const uiRect = new Rectangle(0, 0, 100, 50);\n   * uiRect.pad(20, 10); // 20px horizontal, 10px vertical\n   * ```\n   * @remarks\n   * - Adjusts x/y by subtracting padding\n   * - Increases width/height by padding * 2\n   * - Common in UI layout calculations\n   * - Chainable with other methods\n   * @param paddingX - The horizontal padding amount\n   * @param paddingY - The vertical padding amount\n   * @returns Returns itself\n   * @see {@link Rectangle.enlarge} For growing to include another rectangle\n   * @see {@link Rectangle.fit} For shrinking to fit within another rectangle\n   */\n  pad(paddingX = 0, paddingY = paddingX) {\n    this.x -= paddingX;\n    this.y -= paddingY;\n    this.width += paddingX * 2;\n    this.height += paddingY * 2;\n    return this;\n  }\n  /**\n   * Fits this rectangle around the passed one.\n   * @example\n   * ```ts\n   * // Basic fitting\n   * const container = new Rectangle(0, 0, 100, 100);\n   * const content = new Rectangle(25, 25, 200, 200);\n   * content.fit(container); // Clips to container bounds\n   * ```\n   * @param rectangle - The rectangle to fit around\n   * @returns Returns itself\n   * @see {@link Rectangle.enlarge} For growing to include another rectangle\n   * @see {@link Rectangle.pad} For adding padding around the rectangle\n   */\n  fit(rectangle) {\n    const x1 = Math.max(this.x, rectangle.x);\n    const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.max(this.y, rectangle.y);\n    const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = Math.max(x2 - x1, 0);\n    this.y = y1;\n    this.height = Math.max(y2 - y1, 0);\n    return this;\n  }\n  /**\n   * Enlarges rectangle so that its corners lie on a grid defined by resolution.\n   * @example\n   * ```ts\n   * // Basic grid alignment\n   * const rect = new Rectangle(10.2, 10.6, 100.8, 100.4);\n   * rect.ceil(); // Aligns to whole pixels\n   *\n   * // Custom resolution grid\n   * const uiRect = new Rectangle(5.3, 5.7, 50.2, 50.8);\n   * uiRect.ceil(0.5); // Aligns to half pixels\n   *\n   * // Use with precision value\n   * const preciseRect = new Rectangle(20.001, 20.999, 100.001, 100.999);\n   * preciseRect.ceil(1, 0.01); // Handles small decimal variations\n   * ```\n   * @param resolution - The grid size to align to (1 = whole pixels)\n   * @param eps - Small number to prevent floating point errors\n   * @returns Returns itself\n   * @see {@link Rectangle.fit} For constraining to bounds\n   * @see {@link Rectangle.enlarge} For growing dimensions\n   */\n  ceil(resolution = 1, eps = 1e-3) {\n    const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n    const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n    this.x = Math.floor((this.x + eps) * resolution) / resolution;\n    this.y = Math.floor((this.y + eps) * resolution) / resolution;\n    this.width = x2 - this.x;\n    this.height = y2 - this.y;\n    return this;\n  }\n  /**\n   * Scales the rectangle's dimensions and position by the specified factors.\n   * @example\n   * ```ts\n   * const rect = new Rectangle(50, 50, 100, 100);\n   *\n   * // Scale uniformly\n   * rect.scale(0.5, 0.5);\n   * // rect is now: x=25, y=25, width=50, height=50\n   *\n   * // non-uniformly\n   * rect.scale(0.5, 1);\n   * // rect is now: x=25, y=50, width=50, height=100\n   * ```\n   * @param x - The factor by which to scale the horizontal properties (x, width).\n   * @param y - The factor by which to scale the vertical properties (y, height).\n   * @returns Returns itself\n   */\n  scale(x, y = x) {\n    this.x *= x;\n    this.y *= y;\n    this.width *= x;\n    this.height *= y;\n    return this;\n  }\n  /**\n   * Enlarges this rectangle to include the passed rectangle.\n   * @example\n   * ```ts\n   * // Basic enlargement\n   * const rect = new Rectangle(50, 50, 100, 100);\n   * const other = new Rectangle(0, 0, 200, 75);\n   * rect.enlarge(other);\n   * // rect is now: x=0, y=0, width=200, height=150\n   *\n   * // Use for bounding box calculation\n   * const bounds = new Rectangle();\n   * objects.forEach((obj) => {\n   *     bounds.enlarge(obj.getBounds());\n   * });\n   * ```\n   * @param rectangle - The rectangle to include\n   * @returns Returns itself\n   * @see {@link Rectangle.fit} For shrinking to fit within another rectangle\n   * @see {@link Rectangle.pad} For adding padding around the rectangle\n   */\n  enlarge(rectangle) {\n    const x1 = Math.min(this.x, rectangle.x);\n    const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.min(this.y, rectangle.y);\n    const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = x2 - x1;\n    this.y = y1;\n    this.height = y2 - y1;\n    return this;\n  }\n  /**\n   * Returns the framing rectangle of the rectangle as a Rectangle object\n   * @example\n   * ```ts\n   * // Basic bounds retrieval\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const bounds = rect.getBounds();\n   *\n   * // Reuse existing rectangle\n   * const out = new Rectangle();\n   * rect.getBounds(out);\n   * ```\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle.copyFrom} For direct copying\n   * @see {@link Rectangle.clone} For creating new copy\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.copyFrom(this);\n    return out;\n  }\n  /**\n   * Determines whether another Rectangle is fully contained within this Rectangle.\n   *\n   * Rectangles that occupy the same space are considered to be containing each other.\n   *\n   * Rectangles without area (width or height equal to zero) can't contain anything,\n   * not even other arealess rectangles.\n   * @example\n   * ```ts\n   * // Check if one rectangle contains another\n   * const container = new Rectangle(0, 0, 100, 100);\n   * const inner = new Rectangle(25, 25, 50, 50);\n   *\n   * console.log(container.containsRect(inner)); // true\n   *\n   * // Check overlapping rectangles\n   * const partial = new Rectangle(75, 75, 50, 50);\n   * console.log(container.containsRect(partial)); // false\n   *\n   * // Zero-area rectangles\n   * const empty = new Rectangle(0, 0, 0, 100);\n   * console.log(container.containsRect(empty)); // false\n   * ```\n   * @param other - The Rectangle to check for containment\n   * @returns True if other is fully contained within this Rectangle\n   * @see {@link Rectangle.contains} For point containment\n   * @see {@link Rectangle.intersects} For overlap testing\n   */\n  containsRect(other) {\n    if (this.width <= 0 || this.height <= 0)\n      return false;\n    const x1 = other.x;\n    const y1 = other.y;\n    const x2 = other.x + other.width;\n    const y2 = other.y + other.height;\n    return x1 >= this.x && x1 < this.x + this.width && y1 >= this.y && y1 < this.y + this.height && x2 >= this.x && x2 < this.x + this.width && y2 >= this.y && y2 < this.y + this.height;\n  }\n  /**\n   * Sets the position and dimensions of the rectangle.\n   * @example\n   * ```ts\n   * // Basic usage\n   * const rect = new Rectangle();\n   * rect.set(100, 100, 200, 150);\n   *\n   * // Chain with other operations\n   * const bounds = new Rectangle()\n   *     .set(0, 0, 100, 100)\n   *     .pad(10);\n   * ```\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   * @returns Returns itself for method chaining\n   * @see {@link Rectangle.copyFrom} For copying from another rectangle\n   * @see {@link Rectangle.clone} For creating a new copy\n   */\n  set(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Rectangle };\n//# sourceMappingURL=Rectangle.mjs.map\n","\"use strict\";\nconst uidCache = {\n  default: -1\n};\nfunction uid(name = \"default\") {\n  if (uidCache[name] === void 0) {\n    uidCache[name] = -1;\n  }\n  return ++uidCache[name];\n}\nfunction resetUids() {\n  for (const key in uidCache) {\n    delete uidCache[key];\n  }\n}\n\nexport { resetUids, uid };\n//# sourceMappingURL=uid.mjs.map\n","\"use strict\";\nconst warnings = /* @__PURE__ */ new Set();\nconst v8_0_0 = \"8.0.0\";\nconst v8_3_4 = \"8.3.4\";\nconst deprecationState = {\n  quiet: false,\n  noColor: false\n};\nconst deprecation = (version, message, ignoreDepth = 3) => {\n  if (deprecationState.quiet || warnings.has(message))\n    return;\n  let stack = new Error().stack;\n  const deprecationMessage = `${message}\nDeprecated since v${version}`;\n  const useGroup = typeof console.groupCollapsed === \"function\" && !deprecationState.noColor;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", deprecationMessage);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (useGroup) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        deprecationMessage\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", deprecationMessage);\n      console.warn(stack);\n    }\n  }\n  warnings.add(message);\n};\nObject.defineProperties(deprecation, {\n  quiet: {\n    get: () => deprecationState.quiet,\n    set: (value) => {\n      deprecationState.quiet = value;\n    },\n    enumerable: true,\n    configurable: false\n  },\n  noColor: {\n    get: () => deprecationState.noColor,\n    set: (value) => {\n      deprecationState.noColor = value;\n    },\n    enumerable: true,\n    configurable: false\n  }\n});\n\nexport { deprecation, v8_0_0, v8_3_4 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","\"use strict\";\nfunction nextPow2(v) {\n  v += v === 0 ? 1 : 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\nfunction isPow2(v) {\n  return !(v & v - 1) && !!v;\n}\nfunction log2(v) {\n  let r = (v > 65535 ? 1 : 0) << 4;\n  v >>>= r;\n  let shift = (v > 255 ? 1 : 0) << 3;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 15 ? 1 : 0) << 2;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 3 ? 1 : 0) << 1;\n  v >>>= shift;\n  r |= shift;\n  return r | v >> 1;\n}\n\nexport { isPow2, log2, nextPow2 };\n//# sourceMappingURL=pow2.mjs.map\n","\"use strict\";\nfunction definedProps(obj) {\n  const result = {};\n  for (const key in obj) {\n    if (obj[key] !== void 0) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n}\n\nexport { definedProps };\n//# sourceMappingURL=definedProps.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createResourceIdFromString(value) {\n  const id = idHash[value];\n  if (id === void 0) {\n    idHash[value] = uid(\"resource\");\n  }\n  return id;\n}\nconst _TextureStyle = class _TextureStyle extends EventEmitter {\n  /**\n   * @param options - options for the style\n   */\n  constructor(options = {}) {\n    super();\n    /** @internal */\n    this._resourceType = \"textureSampler\";\n    /** @internal */\n    this._touched = 0;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link TextureStyle#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link TextureStyle#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     */\n    this._maxAnisotropy = 1;\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    options = { ..._TextureStyle.defaultOptions, ...options };\n    this.addressMode = options.addressMode;\n    this.addressModeU = options.addressModeU ?? this.addressModeU;\n    this.addressModeV = options.addressModeV ?? this.addressModeV;\n    this.addressModeW = options.addressModeW ?? this.addressModeW;\n    this.scaleMode = options.scaleMode;\n    this.magFilter = options.magFilter ?? this.magFilter;\n    this.minFilter = options.minFilter ?? this.minFilter;\n    this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n    this.lodMinClamp = options.lodMinClamp;\n    this.lodMaxClamp = options.lodMaxClamp;\n    this.compare = options.compare;\n    this.maxAnisotropy = options.maxAnisotropy ?? 1;\n  }\n  set addressMode(value) {\n    this.addressModeU = value;\n    this.addressModeV = value;\n    this.addressModeW = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this.addressModeU;\n  }\n  set wrapMode(value) {\n    deprecation(v8_0_0, \"TextureStyle.wrapMode is now TextureStyle.addressMode\");\n    this.addressMode = value;\n  }\n  get wrapMode() {\n    return this.addressMode;\n  }\n  set scaleMode(value) {\n    this.magFilter = value;\n    this.minFilter = value;\n    this.mipmapFilter = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this.magFilter;\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._maxAnisotropy = Math.min(value, 16);\n    if (this._maxAnisotropy > 1) {\n      this.scaleMode = \"linear\";\n    }\n  }\n  get maxAnisotropy() {\n    return this._maxAnisotropy;\n  }\n  // TODO - move this to WebGL?\n  get _resourceId() {\n    return this._sharedResourceId || this._generateResourceId();\n  }\n  update() {\n    this.emit(\"change\", this);\n    this._sharedResourceId = null;\n  }\n  _generateResourceId() {\n    const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n    this._sharedResourceId = createResourceIdFromString(bigKey);\n    return this._resourceId;\n  }\n  /** Destroys the style */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this.removeAllListeners();\n  }\n};\n/** default options for the style */\n_TextureStyle.defaultOptions = {\n  addressMode: \"clamp-to-edge\",\n  scaleMode: \"linear\"\n};\nlet TextureStyle = _TextureStyle;\n\nexport { TextureStyle };\n//# sourceMappingURL=TextureStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2.mjs';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps.mjs';\nimport { uid } from '../../../../../utils/data/uid.mjs';\nimport { TextureStyle } from '../TextureStyle.mjs';\n\n\"use strict\";\nconst _TextureSource = class _TextureSource extends EventEmitter {\n  /**\n   * @param options - options for creating a new TextureSource\n   */\n  constructor(options = {}) {\n    super();\n    this.options = options;\n    /** unique id for this Texture source */\n    this.uid = uid(\"textureSource\");\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @internal\n     */\n    this._resourceType = \"textureSource\";\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @internal\n     */\n    this.uploadMethodId = \"unknown\";\n    /** @internal */\n    this._resolution = 1;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelHeight = 1;\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    this.width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    this.height = 1;\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     */\n    this.sampleCount = 1;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    this.mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    this.autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    this.format = \"rgba8unorm\";\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    this.dimension = \"2d\";\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    this.antialias = false;\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    this._touched = 0;\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    this._batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    this._textureBindLocation = -1;\n    options = { ..._TextureSource.defaultOptions, ...options };\n    this.label = options.label ?? \"\";\n    this.resource = options.resource;\n    this.autoGarbageCollect = options.autoGarbageCollect;\n    this._resolution = options.resolution;\n    if (options.width) {\n      this.pixelWidth = options.width * this._resolution;\n    } else {\n      this.pixelWidth = this.resource ? this.resourceWidth ?? 1 : 1;\n    }\n    if (options.height) {\n      this.pixelHeight = options.height * this._resolution;\n    } else {\n      this.pixelHeight = this.resource ? this.resourceHeight ?? 1 : 1;\n    }\n    this.width = this.pixelWidth / this._resolution;\n    this.height = this.pixelHeight / this._resolution;\n    this.format = options.format;\n    this.dimension = options.dimensions;\n    this.mipLevelCount = options.mipLevelCount;\n    this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n    this.sampleCount = options.sampleCount;\n    this.antialias = options.antialias;\n    this.alphaMode = options.alphaMode;\n    this.style = new TextureStyle(definedProps(options));\n    this.destroyed = false;\n    this._refreshPOT();\n  }\n  /** returns itself */\n  get source() {\n    return this;\n  }\n  /** the style of the texture */\n  get style() {\n    return this._style;\n  }\n  set style(value) {\n    if (this.style === value)\n      return;\n    this._style?.off(\"change\", this._onStyleChange, this);\n    this._style = value;\n    this._style?.on(\"change\", this._onStyleChange, this);\n    this._onStyleChange();\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._style.maxAnisotropy = value;\n  }\n  get maxAnisotropy() {\n    return this._style.maxAnisotropy;\n  }\n  /** setting this will set wrapModeU, wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this._style.addressMode;\n  }\n  set addressMode(value) {\n    this._style.addressMode = value;\n  }\n  /** setting this will set wrapModeU, wrapModeV and wrapModeW all at once! */\n  get repeatMode() {\n    return this._style.addressMode;\n  }\n  set repeatMode(value) {\n    this._style.addressMode = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n  get magFilter() {\n    return this._style.magFilter;\n  }\n  set magFilter(value) {\n    this._style.magFilter = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n  get minFilter() {\n    return this._style.minFilter;\n  }\n  set minFilter(value) {\n    this._style.minFilter = value;\n  }\n  /** Specifies behavior for sampling between mipmap levels. */\n  get mipmapFilter() {\n    return this._style.mipmapFilter;\n  }\n  set mipmapFilter(value) {\n    this._style.mipmapFilter = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMinClamp() {\n    return this._style.lodMinClamp;\n  }\n  set lodMinClamp(value) {\n    this._style.lodMinClamp = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMaxClamp() {\n    return this._style.lodMaxClamp;\n  }\n  set lodMaxClamp(value) {\n    this._style.lodMaxClamp = value;\n  }\n  _onStyleChange() {\n    this.emit(\"styleChange\", this);\n  }\n  /** call this if you have modified the texture outside of the constructor */\n  update() {\n    if (this.resource) {\n      const resolution = this._resolution;\n      const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n      if (didResize)\n        return;\n    }\n    this.emit(\"update\", this);\n  }\n  /** Destroys this texture source */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    if (this._style) {\n      this._style.destroy();\n      this._style = null;\n    }\n    this.uploadMethodId = null;\n    this.resource = null;\n    this.removeAllListeners();\n  }\n  /**\n   * This will unload the Texture source from the GPU. This will free up the GPU memory\n   * As soon as it is required fore rendering, it will be re-uploaded.\n   */\n  unload() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    this.emit(\"unload\", this);\n  }\n  /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n  get resourceWidth() {\n    const { resource } = this;\n    return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n  }\n  /** the height of the resource. This is the REAL pure number, not accounting resolution */\n  get resourceHeight() {\n    const { resource } = this;\n    return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n  }\n  /**\n   * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n   * but will the size of the texture when rendered.\n   *\n   * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n   * density will have increased)\n   */\n  get resolution() {\n    return this._resolution;\n  }\n  set resolution(resolution) {\n    if (this._resolution === resolution)\n      return;\n    this._resolution = resolution;\n    this.width = this.pixelWidth / resolution;\n    this.height = this.pixelHeight / resolution;\n  }\n  /**\n   * Resize the texture, this is handy if you want to use the texture as a render texture\n   * @param width - the new width of the texture\n   * @param height - the new height of the texture\n   * @param resolution - the new resolution of the texture\n   * @returns - if the texture was resized\n   */\n  resize(width, height, resolution) {\n    resolution || (resolution = this._resolution);\n    width || (width = this.width);\n    height || (height = this.height);\n    const newPixelWidth = Math.round(width * resolution);\n    const newPixelHeight = Math.round(height * resolution);\n    this.width = newPixelWidth / resolution;\n    this.height = newPixelHeight / resolution;\n    this._resolution = resolution;\n    if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight) {\n      return false;\n    }\n    this._refreshPOT();\n    this.pixelWidth = newPixelWidth;\n    this.pixelHeight = newPixelHeight;\n    this.emit(\"resize\", this);\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    return true;\n  }\n  /**\n   * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n   * This is only important for RenderTexture instances, as standard Texture instances will have their\n   * mipmaps generated on upload. You should call this method after you make any change to the texture\n   *\n   * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n   * We want you, the developer to specify when this action should happen.\n   *\n   * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n   */\n  updateMipmaps() {\n    if (this.autoGenerateMipmaps && this.mipLevelCount > 1) {\n      this.emit(\"updateMipmaps\", this);\n    }\n  }\n  set wrapMode(value) {\n    this._style.wrapMode = value;\n  }\n  get wrapMode() {\n    return this._style.wrapMode;\n  }\n  set scaleMode(value) {\n    this._style.scaleMode = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this._style.scaleMode;\n  }\n  /**\n   * Refresh check for isPowerOfTwo texture based on size\n   * @private\n   */\n  _refreshPOT() {\n    this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n  }\n  static test(_resource) {\n    throw new Error(\"Unimplemented\");\n  }\n};\n/** The default options used when creating a new TextureSource. override these to add your own defaults */\n_TextureSource.defaultOptions = {\n  resolution: 1,\n  format: \"bgra8unorm\",\n  alphaMode: \"premultiply-alpha-on-upload\",\n  dimensions: \"2d\",\n  mipLevelCount: 1,\n  autoGenerateMipmaps: false,\n  sampleCount: 1,\n  antialias: false,\n  autoGarbageCollect: false\n};\nlet TextureSource = _TextureSource;\n\nexport { TextureSource };\n//# sourceMappingURL=TextureSource.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass BufferImageSource extends TextureSource {\n  constructor(options) {\n    const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n    let format = options.format;\n    if (!format) {\n      if (buffer instanceof Float32Array) {\n        format = \"rgba32float\";\n      } else if (buffer instanceof Int32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Uint32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Int16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Uint16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Int8Array) {\n        format = \"bgra8unorm\";\n      } else {\n        format = \"bgra8unorm\";\n      }\n    }\n    super({\n      ...options,\n      resource: buffer,\n      format\n    });\n    this.uploadMethodId = \"buffer\";\n  }\n  static test(resource) {\n    return resource instanceof Int8Array || resource instanceof Uint8Array || resource instanceof Uint8ClampedArray || resource instanceof Int16Array || resource instanceof Uint16Array || resource instanceof Int32Array || resource instanceof Uint32Array || resource instanceof Float32Array;\n  }\n}\nBufferImageSource.extension = ExtensionType.TextureSource;\n\nexport { BufferImageSource };\n//# sourceMappingURL=BufferImageSource.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempMat = new Matrix();\nclass TextureMatrix {\n  /**\n   * @param texture - observed texture\n   * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n   */\n  constructor(texture, clampMargin) {\n    this.mapCoord = new Matrix();\n    this.uClampFrame = new Float32Array(4);\n    this.uClampOffset = new Float32Array(2);\n    this._textureID = -1;\n    this._updateID = 0;\n    this.clampOffset = 0;\n    if (typeof clampMargin === \"undefined\") {\n      this.clampMargin = texture.width < 10 ? 0 : 0.5;\n    } else {\n      this.clampMargin = clampMargin;\n    }\n    this.isSimple = false;\n    this.texture = texture;\n  }\n  /** Texture property. */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this.texture === value)\n      return;\n    this._texture?.removeListener(\"update\", this.update, this);\n    this._texture = value;\n    this._texture.addListener(\"update\", this.update, this);\n    this.update();\n  }\n  /**\n   * Multiplies uvs array to transform\n   * @param uvs - mesh uvs\n   * @param [out=uvs] - output\n   * @returns - output\n   */\n  multiplyUvs(uvs, out) {\n    if (out === void 0) {\n      out = uvs;\n    }\n    const mat = this.mapCoord;\n    for (let i = 0; i < uvs.length; i += 2) {\n      const x = uvs[i];\n      const y = uvs[i + 1];\n      out[i] = x * mat.a + y * mat.c + mat.tx;\n      out[i + 1] = x * mat.b + y * mat.d + mat.ty;\n    }\n    return out;\n  }\n  /**\n   * Updates matrices if texture was changed\n   * @returns - whether or not it was updated\n   */\n  update() {\n    const tex = this._texture;\n    this._updateID++;\n    const uvs = tex.uvs;\n    this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n    const orig = tex.orig;\n    const trim = tex.trim;\n    if (trim) {\n      tempMat.set(\n        orig.width / trim.width,\n        0,\n        0,\n        orig.height / trim.height,\n        -trim.x / trim.width,\n        -trim.y / trim.height\n      );\n      this.mapCoord.append(tempMat);\n    }\n    const texBase = tex.source;\n    const frame = this.uClampFrame;\n    const margin = this.clampMargin / texBase._resolution;\n    const offset = this.clampOffset / texBase._resolution;\n    frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n    frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n    frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n    frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n    this.uClampOffset[0] = this.clampOffset / texBase.pixelWidth;\n    this.uClampOffset[1] = this.clampOffset / texBase.pixelHeight;\n    this.isSimple = tex.frame.width === texBase.width && tex.frame.height === texBase.height && tex.rotate === 0;\n    return true;\n  }\n}\n\nexport { TextureMatrix };\n//# sourceMappingURL=TextureMatrix.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { NOOP } from '../../../../utils/misc/NOOP.mjs';\nimport { BufferImageSource } from './sources/BufferImageSource.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { TextureMatrix } from './TextureMatrix.mjs';\n\n\"use strict\";\nclass Texture extends EventEmitter {\n  /**\n   * @param {TextureOptions} options - Options for the texture\n   */\n  constructor({\n    source,\n    label,\n    frame,\n    orig,\n    trim,\n    defaultAnchor,\n    defaultBorders,\n    rotate,\n    dynamic\n  } = {}) {\n    super();\n    /** unique id for this texture */\n    this.uid = uid(\"texture\");\n    /** A uvs object based on the given frame and the texture source */\n    this.uvs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    this.frame = new Rectangle();\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    this.noFrame = false;\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    this.dynamic = false;\n    /** is it a texture? yes! used for type checking */\n    this.isTexture = true;\n    this.label = label;\n    this.source = source?.source ?? new TextureSource();\n    this.noFrame = !frame;\n    if (frame) {\n      this.frame.copyFrom(frame);\n    } else {\n      const { width, height } = this._source;\n      this.frame.width = width;\n      this.frame.height = height;\n    }\n    this.orig = orig || this.frame;\n    this.trim = trim;\n    this.rotate = rotate ?? 0;\n    this.defaultAnchor = defaultAnchor;\n    this.defaultBorders = defaultBorders;\n    this.destroyed = false;\n    this.dynamic = dynamic || false;\n    this.updateUvs();\n  }\n  set source(value) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n    }\n    this._source = value;\n    value.on(\"resize\", this.update, this);\n    this.emit(\"update\", this);\n  }\n  /** the underlying source of the texture (equivalent of baseTexture in v7) */\n  get source() {\n    return this._source;\n  }\n  /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n  get textureMatrix() {\n    if (!this._textureMatrix) {\n      this._textureMatrix = new TextureMatrix(this);\n    }\n    return this._textureMatrix;\n  }\n  /** The width of the Texture in pixels. */\n  get width() {\n    return this.orig.width;\n  }\n  /** The height of the Texture in pixels. */\n  get height() {\n    return this.orig.height;\n  }\n  /** Call this function when you have modified the frame of this texture. */\n  updateUvs() {\n    const { uvs, frame } = this;\n    const { width, height } = this._source;\n    const nX = frame.x / width;\n    const nY = frame.y / height;\n    const nW = frame.width / width;\n    const nH = frame.height / height;\n    let rotate = this.rotate;\n    if (rotate) {\n      const w2 = nW / 2;\n      const h2 = nH / 2;\n      const cX = nX + w2;\n      const cY = nY + h2;\n      rotate = groupD8.add(rotate, groupD8.NW);\n      uvs.x0 = cX + w2 * groupD8.uX(rotate);\n      uvs.y0 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x1 = cX + w2 * groupD8.uX(rotate);\n      uvs.y1 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x2 = cX + w2 * groupD8.uX(rotate);\n      uvs.y2 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x3 = cX + w2 * groupD8.uX(rotate);\n      uvs.y3 = cY + h2 * groupD8.uY(rotate);\n    } else {\n      uvs.x0 = nX;\n      uvs.y0 = nY;\n      uvs.x1 = nX + nW;\n      uvs.y1 = nY;\n      uvs.x2 = nX + nW;\n      uvs.y2 = nY + nH;\n      uvs.x3 = nX;\n      uvs.y3 = nY + nH;\n    }\n  }\n  /**\n   * Destroys this texture\n   * @param destroySource - Destroy the source when the texture is destroyed.\n   */\n  destroy(destroySource = false) {\n    if (this._source) {\n      if (destroySource) {\n        this._source.destroy();\n        this._source = null;\n      }\n    }\n    this._textureMatrix = null;\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n  }\n  /**\n   * Call this if you have modified the `texture outside` of the constructor.\n   *\n   * If you have modified this texture's source, you must separately call `texture.source.update()` to see those changes.\n   */\n  update() {\n    if (this.noFrame) {\n      this.frame.width = this._source.width;\n      this.frame.height = this._source.height;\n    }\n    this.updateUvs();\n    this.emit(\"update\", this);\n  }\n  /** @deprecated since 8.0.0 */\n  get baseTexture() {\n    deprecation(v8_0_0, \"Texture.baseTexture is now Texture.source\");\n    return this._source;\n  }\n}\nTexture.EMPTY = new Texture({\n  label: \"EMPTY\",\n  source: new TextureSource({\n    label: \"EMPTY\"\n  })\n});\nTexture.EMPTY.destroy = NOOP;\nTexture.WHITE = new Texture({\n  source: new BufferImageSource({\n    resource: new Uint8Array([255, 255, 255, 255]),\n    width: 1,\n    height: 1,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    label: \"WHITE\"\n  }),\n  label: \"WHITE\"\n});\nTexture.WHITE.destroy = NOOP;\n\nexport { Texture };\n//# sourceMappingURL=Texture.mjs.map\n","\"use strict\";\nfunction updateQuadBounds(bounds, anchor, texture) {\n  const { width, height } = texture.orig;\n  const trim = texture.trim;\n  if (trim) {\n    const sourceWidth = trim.width;\n    const sourceHeight = trim.height;\n    bounds.minX = trim.x - anchor._x * width;\n    bounds.maxX = bounds.minX + sourceWidth;\n    bounds.minY = trim.y - anchor._y * height;\n    bounds.maxY = bounds.minY + sourceHeight;\n  } else {\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n}\n\nexport { updateQuadBounds };\n//# sourceMappingURL=updateQuadBounds.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nconst defaultMatrix = new Matrix();\nclass Bounds {\n  /**\n   * Creates a new Bounds object.\n   * @param minX - The minimum X coordinate of the bounds.\n   * @param minY - The minimum Y coordinate of the bounds.\n   * @param maxX - The maximum X coordinate of the bounds.\n   * @param maxY - The maximum Y coordinate of the bounds.\n   */\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /**\n     * The minimum X coordinate of the bounds.\n     * Represents the leftmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set left edge\n     * bounds.minX = 100;\n     * ```\n     * @default Infinity\n     */\n    this.minX = Infinity;\n    /**\n     * The minimum Y coordinate of the bounds.\n     * Represents the topmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set top edge\n     * bounds.minY = 100;\n     * ```\n     * @default Infinity\n     */\n    this.minY = Infinity;\n    /**\n     * The maximum X coordinate of the bounds.\n     * Represents the rightmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set right edge\n     * bounds.maxX = 200;\n     * // Get width\n     * const width = bounds.maxX - bounds.minX;\n     * ```\n     * @default -Infinity\n     */\n    this.maxX = -Infinity;\n    /**\n     * The maximum Y coordinate of the bounds.\n     * Represents the bottommost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set bottom edge\n     * bounds.maxY = 200;\n     * // Get height\n     * const height = bounds.maxY - bounds.minY;\n     * ```\n     * @default -Infinity\n     */\n    this.maxY = -Infinity;\n    /**\n     * The transformation matrix applied to this bounds object.\n     * Used when calculating bounds with transforms.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     *\n     * // Apply translation matrix\n     * bounds.matrix = new Matrix()\n     *     .translate(100, 100);\n     *\n     * // Combine transformations\n     * bounds.matrix = new Matrix()\n     *     .translate(50, 50)\n     *     .rotate(Math.PI / 4)\n     *     .scale(2, 2);\n     *\n     * // Use in bounds calculations\n     * bounds.addFrame(0, 0, 100, 100); // Uses current matrix\n     * bounds.addFrame(0, 0, 100, 100, customMatrix); // Override matrix\n     * ```\n     * @advanced\n     */\n    this.matrix = defaultMatrix;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if bounds are empty, meaning either width or height is zero or negative.\n   * Empty bounds occur when min values exceed max values on either axis.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Check if newly created bounds are empty\n   * console.log(bounds.isEmpty()); // true, default bounds are empty\n   *\n   * // Add frame and check again\n   * bounds.addFrame(0, 0, 100, 100);\n   * console.log(bounds.isEmpty()); // false, bounds now have area\n   *\n   * // Clear bounds\n   * bounds.clear();\n   * console.log(bounds.isEmpty()); // true, bounds are empty again\n   * ```\n   * @returns True if bounds are empty (have no area)\n   * @see {@link Bounds#clear} For resetting bounds\n   * @see {@link Bounds#isValid} For checking validity\n   */\n  isEmpty() {\n    return this.minX > this.maxX || this.minY > this.maxY;\n  }\n  /**\n   * The bounding rectangle representation of these bounds.\n   * Lazily creates and updates a Rectangle instance based on the current bounds.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Get rectangle representation\n   * const rect = bounds.rectangle;\n   * console.log(rect.x, rect.y, rect.width, rect.height);\n   *\n   * // Use for hit testing\n   * if (bounds.rectangle.contains(mouseX, mouseY)) {\n   *     console.log('Mouse is inside bounds!');\n   * }\n   * ```\n   * @see {@link Rectangle} For rectangle methods\n   * @see {@link Bounds.isEmpty} For bounds validation\n   */\n  get rectangle() {\n    if (!this._rectangle) {\n      this._rectangle = new Rectangle();\n    }\n    const rectangle = this._rectangle;\n    if (this.minX > this.maxX || this.minY > this.maxY) {\n      rectangle.x = 0;\n      rectangle.y = 0;\n      rectangle.width = 0;\n      rectangle.height = 0;\n    } else {\n      rectangle.copyFromBounds(this);\n    }\n    return rectangle;\n  }\n  /**\n   * Clears the bounds and resets all coordinates to their default values.\n   * Resets the transformation matrix back to identity.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.isEmpty()); // false\n   * // Clear the bounds\n   * bounds.clear();\n   * console.log(bounds.isEmpty()); // true\n   * ```\n   * @returns This bounds object for chaining\n   */\n  clear() {\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = -Infinity;\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    return this;\n  }\n  /**\n   * Sets the bounds directly using coordinate values.\n   * Provides a way to set all bounds values at once.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.set(0, 0, 100, 100);\n   * ```\n   * @param x0 - Left X coordinate of frame\n   * @param y0 - Top Y coordinate of frame\n   * @param x1 - Right X coordinate of frame\n   * @param y1 - Bottom Y coordinate of frame\n   * @see {@link Bounds#addFrame} For matrix-aware bounds setting\n   * @see {@link Bounds#clear} For resetting bounds\n   */\n  set(x0, y0, x1, y1) {\n    this.minX = x0;\n    this.minY = y0;\n    this.maxX = x1;\n    this.maxY = y1;\n  }\n  /**\n   * Adds a rectangular frame to the bounds, optionally transformed by a matrix.\n   * Updates the bounds to encompass the new frame coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.addFrame(0, 0, 100, 100);\n   *\n   * // Add transformed frame\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addFrame(0, 0, 100, 100, matrix);\n   * ```\n   * @param x0 - Left X coordinate of frame\n   * @param y0 - Top Y coordinate of frame\n   * @param x1 - Right X coordinate of frame\n   * @param y1 - Bottom Y coordinate of frame\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addRect} For adding Rectangle objects\n   * @see {@link Bounds#addBounds} For adding other Bounds\n   */\n  addFrame(x0, y0, x1, y1, matrix) {\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    let x = a * x0 + c * y0 + tx;\n    let y = b * x0 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y0 + tx;\n    y = b * x1 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x0 + c * y1 + tx;\n    y = b * x0 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y1 + tx;\n    y = b * x1 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Adds a rectangle to the bounds, optionally transformed by a matrix.\n   * Updates the bounds to encompass the given rectangle.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * // Add simple rectangle\n   * const rect = new Rectangle(0, 0, 100, 100);\n   * bounds.addRect(rect);\n   *\n   * // Add transformed rectangle\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addRect(rect, matrix);\n   * ```\n   * @param rect - The rectangle to be added\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding raw coordinates\n   * @see {@link Bounds#addBounds} For adding other bounds\n   */\n  addRect(rect, matrix) {\n    this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n  }\n  /**\n   * Adds another bounds object to this one, optionally transformed by a matrix.\n   * Expands the bounds to include the given bounds' area.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Add child bounds\n   * const childBounds = sprite.getBounds();\n   * bounds.addBounds(childBounds);\n   *\n   * // Add transformed bounds\n   * const matrix = new Matrix()\n   *     .scale(2, 2);\n   * bounds.addBounds(childBounds, matrix);\n   * ```\n   * @param bounds - The bounds to be added\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding raw coordinates\n   * @see {@link Bounds#addRect} For adding rectangles\n   */\n  addBounds(bounds, matrix) {\n    this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n  }\n  /**\n   * Adds other Bounds as a mask, creating an intersection of the two bounds.\n   * Only keeps the overlapping region between current bounds and mask bounds.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Create mask bounds\n   * const mask = new Bounds();\n   * mask.addFrame(50, 50, 150, 150);\n   * // Apply mask - results in bounds of (50,50,100,100)\n   * bounds.addBoundsMask(mask);\n   * ```\n   * @param mask - The Bounds to use as a mask\n   * @see {@link Bounds#addBounds} For union operation\n   * @see {@link Bounds#fit} For fitting to rectangle\n   */\n  addBoundsMask(mask) {\n    this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n    this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n    this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n    this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n  }\n  /**\n   * Applies a transformation matrix to the bounds, updating its coordinates.\n   * Transforms all corners of the bounds using the given matrix.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Apply translation\n   * const translateMatrix = new Matrix()\n   *     .translate(50, 50);\n   * bounds.applyMatrix(translateMatrix);\n   * ```\n   * @param matrix - The matrix to apply to the bounds\n   * @see {@link Matrix} For matrix operations\n   * @see {@link Bounds#addFrame} For adding transformed frames\n   */\n  applyMatrix(matrix) {\n    const minX = this.minX;\n    const minY = this.minY;\n    const maxX = this.maxX;\n    const maxY = this.maxY;\n    const { a, b, c, d, tx, ty } = matrix;\n    let x = a * minX + c * minY + tx;\n    let y = b * minX + d * minY + ty;\n    this.minX = x;\n    this.minY = y;\n    this.maxX = x;\n    this.maxY = y;\n    x = a * maxX + c * minY + tx;\n    y = b * maxX + d * minY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * minX + c * maxY + tx;\n    y = b * minX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * maxX + c * maxY + tx;\n    y = b * maxX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n  }\n  /**\n   * Resizes the bounds object to fit within the given rectangle.\n   * Clips the bounds if they extend beyond the rectangle's edges.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 200, 200);\n   * // Fit within viewport\n   * const viewport = new Rectangle(50, 50, 100, 100);\n   * bounds.fit(viewport);\n   * // bounds are now (50, 50, 150, 150)\n   * ```\n   * @param rect - The rectangle to fit within\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#addBoundsMask} For intersection\n   * @see {@link Bounds#pad} For expanding bounds\n   */\n  fit(rect) {\n    if (this.minX < rect.left)\n      this.minX = rect.left;\n    if (this.maxX > rect.right)\n      this.maxX = rect.right;\n    if (this.minY < rect.top)\n      this.minY = rect.top;\n    if (this.maxY > rect.bottom)\n      this.maxY = rect.bottom;\n    return this;\n  }\n  /**\n   * Resizes the bounds object to include the given bounds.\n   * Similar to fit() but works with raw coordinate values instead of a Rectangle.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 200, 200);\n   * // Fit to specific coordinates\n   * bounds.fitBounds(50, 150, 50, 150);\n   * // bounds are now (50, 50, 150, 150)\n   * ```\n   * @param left - The left value of the bounds\n   * @param right - The right value of the bounds\n   * @param top - The top value of the bounds\n   * @param bottom - The bottom value of the bounds\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#fit} For fitting to Rectangle\n   * @see {@link Bounds#addBoundsMask} For intersection\n   */\n  fitBounds(left, right, top, bottom) {\n    if (this.minX < left)\n      this.minX = left;\n    if (this.maxX > right)\n      this.maxX = right;\n    if (this.minY < top)\n      this.minY = top;\n    if (this.maxY > bottom)\n      this.maxY = bottom;\n    return this;\n  }\n  /**\n   * Pads bounds object, making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Add equal padding\n   * bounds.pad(10);\n   * // bounds are now (-10, -10, 110, 110)\n   *\n   * // Add different padding for x and y\n   * bounds.pad(20, 10);\n   * // bounds are now (-30, -20, 130, 120)\n   * ```\n   * @param paddingX - The horizontal padding amount\n   * @param paddingY - The vertical padding amount\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#fit} For constraining bounds\n   * @see {@link Bounds#scale} For uniform scaling\n   */\n  pad(paddingX, paddingY = paddingX) {\n    this.minX -= paddingX;\n    this.maxX += paddingX;\n    this.minY -= paddingY;\n    this.maxY += paddingY;\n    return this;\n  }\n  /**\n   * Ceils the bounds by rounding up max values and rounding down min values.\n   * Useful for pixel-perfect calculations and avoiding fractional pixels.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.set(10.2, 10.9, 50.1, 50.8);\n   *\n   * // Round to whole pixels\n   * bounds.ceil();\n   * // bounds are now (10, 10, 51, 51)\n   * ```\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#scale} For size adjustments\n   * @see {@link Bounds#fit} For constraining bounds\n   */\n  ceil() {\n    this.minX = Math.floor(this.minX);\n    this.minY = Math.floor(this.minY);\n    this.maxX = Math.ceil(this.maxX);\n    this.maxY = Math.ceil(this.maxY);\n    return this;\n  }\n  /**\n   * Creates a new Bounds instance with the same values.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Create a copy\n   * const copy = bounds.clone();\n   *\n   * // Original and copy are independent\n   * bounds.pad(10);\n   * console.log(copy.width === bounds.width); // false\n   * ```\n   * @returns A new Bounds instance with the same values\n   * @see {@link Bounds#copyFrom} For reusing existing bounds\n   */\n  clone() {\n    return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n  }\n  /**\n   * Scales the bounds by the given values, adjusting all edges proportionally.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Scale uniformly\n   * bounds.scale(2);\n   * // bounds are now (0, 0, 200, 200)\n   *\n   * // Scale non-uniformly\n   * bounds.scale(0.5, 2);\n   * // bounds are now (0, 0, 100, 400)\n   * ```\n   * @param x - The X value to scale by\n   * @param y - The Y value to scale by (defaults to x)\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#pad} For adding padding\n   * @see {@link Bounds#fit} For constraining size\n   */\n  scale(x, y = x) {\n    this.minX *= x;\n    this.minY *= y;\n    this.maxX *= x;\n    this.maxY *= y;\n    return this;\n  }\n  /**\n   * The x position of the bounds in local space.\n   * Setting this value will move the bounds while maintaining its width.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get x position\n   * console.log(bounds.x); // 0\n   *\n   * // Move bounds horizontally\n   * bounds.x = 50;\n   * console.log(bounds.minX, bounds.maxX); // 50, 150\n   *\n   * // Width stays the same\n   * console.log(bounds.width); // Still 100\n   * ```\n   */\n  get x() {\n    return this.minX;\n  }\n  set x(value) {\n    const width = this.maxX - this.minX;\n    this.minX = value;\n    this.maxX = value + width;\n  }\n  /**\n   * The y position of the bounds in local space.\n   * Setting this value will move the bounds while maintaining its height.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get y position\n   * console.log(bounds.y); // 0\n   *\n   * // Move bounds vertically\n   * bounds.y = 50;\n   * console.log(bounds.minY, bounds.maxY); // 50, 150\n   *\n   * // Height stays the same\n   * console.log(bounds.height); // Still 100\n   * ```\n   */\n  get y() {\n    return this.minY;\n  }\n  set y(value) {\n    const height = this.maxY - this.minY;\n    this.minY = value;\n    this.maxY = value + height;\n  }\n  /**\n   * The width value of the bounds.\n   * Represents the distance between minX and maxX coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get width\n   * console.log(bounds.width); // 100\n   * // Resize width\n   * bounds.width = 200;\n   * console.log(bounds.maxX - bounds.minX); // 200\n   * ```\n   */\n  get width() {\n    return this.maxX - this.minX;\n  }\n  set width(value) {\n    this.maxX = this.minX + value;\n  }\n  /**\n   * The height value of the bounds.\n   * Represents the distance between minY and maxY coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get height\n   * console.log(bounds.height); // 100\n   * // Resize height\n   * bounds.height = 150;\n   * console.log(bounds.maxY - bounds.minY); // 150\n   * ```\n   */\n  get height() {\n    return this.maxY - this.minY;\n  }\n  set height(value) {\n    this.maxY = this.minY + value;\n  }\n  /**\n   * The left edge coordinate of the bounds.\n   * Alias for minX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(50, 0, 150, 100);\n   * console.log(bounds.left); // 50\n   * console.log(bounds.left === bounds.minX); // true\n   * ```\n   * @readonly\n   */\n  get left() {\n    return this.minX;\n  }\n  /**\n   * The right edge coordinate of the bounds.\n   * Alias for maxX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.right); // 100\n   * console.log(bounds.right === bounds.maxX); // true\n   * ```\n   * @readonly\n   */\n  get right() {\n    return this.maxX;\n  }\n  /**\n   * The top edge coordinate of the bounds.\n   * Alias for minY.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 25, 100, 125);\n   * console.log(bounds.top); // 25\n   * console.log(bounds.top === bounds.minY); // true\n   * ```\n   * @readonly\n   */\n  get top() {\n    return this.minY;\n  }\n  /**\n   * The bottom edge coordinate of the bounds.\n   * Alias for maxY.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 200);\n   * console.log(bounds.bottom); // 200\n   * console.log(bounds.bottom === bounds.maxY); // true\n   * ```\n   * @readonly\n   */\n  get bottom() {\n    return this.maxY;\n  }\n  /**\n   * Whether the bounds has positive width and height.\n   * Checks if both dimensions are greater than zero.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Check if bounds are positive\n   * console.log(bounds.isPositive); // true\n   *\n   * // Negative bounds\n   * bounds.maxX = bounds.minX;\n   * console.log(bounds.isPositive); // false, width is 0\n   * ```\n   * @readonly\n   * @see {@link Bounds#isEmpty} For checking empty state\n   * @see {@link Bounds#isValid} For checking validity\n   */\n  get isPositive() {\n    return this.maxX - this.minX > 0 && this.maxY - this.minY > 0;\n  }\n  /**\n   * Whether the bounds has valid coordinates.\n   * Checks if the bounds has been initialized with real values.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * console.log(bounds.isValid); // false, default state\n   *\n   * // Set valid bounds\n   * bounds.addFrame(0, 0, 100, 100);\n   * console.log(bounds.isValid); // true\n   * ```\n   * @readonly\n   * @see {@link Bounds#isEmpty} For checking empty state\n   * @see {@link Bounds#isPositive} For checking dimensions\n   */\n  get isValid() {\n    return this.minX + this.minY !== Infinity;\n  }\n  /**\n   * Adds vertices from a Float32Array to the bounds, optionally transformed by a matrix.\n   * Used for efficiently updating bounds from raw vertex data.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Add vertices from geometry\n   * const vertices = new Float32Array([\n   *     0, 0,    // Vertex 1\n   *     100, 0,  // Vertex 2\n   *     100, 100 // Vertex 3\n   * ]);\n   * bounds.addVertexData(vertices, 0, 6);\n   *\n   * // Add transformed vertices\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addVertexData(vertices, 0, 6, matrix);\n   *\n   * // Add subset of vertices\n   * bounds.addVertexData(vertices, 2, 4); // Only second vertex\n   * ```\n   * @param vertexData - The array of vertices to add\n   * @param beginOffset - Starting index in the vertex array\n   * @param endOffset - Ending index in the vertex array (excluded)\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding rectangular frames\n   * @see {@link Matrix} For transformation details\n   */\n  addVertexData(vertexData, beginOffset, endOffset, matrix) {\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    for (let i = beginOffset; i < endOffset; i += 2) {\n      const localX = vertexData[i];\n      const localY = vertexData[i + 1];\n      const x = a * localX + c * localY + tx;\n      const y = b * localX + d * localY + ty;\n      minX = x < minX ? x : minX;\n      minY = y < minY ? y : minY;\n      maxX = x > maxX ? x : maxX;\n      maxY = y > maxY ? y : maxY;\n    }\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if a point is contained within the bounds.\n   * Returns true if the point's coordinates fall within the bounds' area.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Basic point check\n   * console.log(bounds.containsPoint(50, 50)); // true\n   * console.log(bounds.containsPoint(150, 150)); // false\n   *\n   * // Check edges\n   * console.log(bounds.containsPoint(0, 0));   // true, includes edges\n   * console.log(bounds.containsPoint(100, 100)); // true, includes edges\n   * ```\n   * @param x - x coordinate to check\n   * @param y - y coordinate to check\n   * @returns True if the point is inside the bounds\n   * @see {@link Bounds#isPositive} For valid bounds check\n   * @see {@link Bounds#rectangle} For Rectangle representation\n   */\n  containsPoint(x, y) {\n    if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y) {\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Returns a string representation of the bounds.\n   * Useful for debugging and logging bounds information.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.toString()); // \"[pixi.js:Bounds minX=0 minY=0 maxX=100 maxY=100 width=100 height=100]\"\n   * ```\n   * @returns A string describing the bounds\n   * @see {@link Bounds#copyFrom} For copying bounds\n   * @see {@link Bounds#clone} For creating a new instance\n   */\n  toString() {\n    return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n  }\n  /**\n   * Copies the bounds from another bounds object.\n   * Useful for reusing bounds objects and avoiding allocations.\n   * @example\n   * ```ts\n   * const sourceBounds = new Bounds(0, 0, 100, 100);\n   * // Copy bounds\n   * const targetBounds = new Bounds();\n   * targetBounds.copyFrom(sourceBounds);\n   * ```\n   * @param bounds - The bounds to copy from\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#clone} For creating new instances\n   */\n  copyFrom(bounds) {\n    this.minX = bounds.minX;\n    this.minY = bounds.minY;\n    this.maxX = bounds.maxX;\n    this.maxY = bounds.maxY;\n    return this;\n  }\n}\n\nexport { Bounds };\n//# sourceMappingURL=Bounds.mjs.map\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { extend, colord } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\n\"use strict\";\nextend([namesPlugin]);\nconst _Color = class _Color {\n  /**\n   * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n   */\n  constructor(value = 16777215) {\n    this._value = null;\n    this._components = new Float32Array(4);\n    this._components.fill(1);\n    this._int = 16777215;\n    this.value = value;\n  }\n  /**\n   * Get the red component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('red');\n   * console.log(color.red); // 1\n   *\n   * const green = new Color('#00ff00');\n   * console.log(green.red); // 0\n   * ```\n   */\n  get red() {\n    return this._components[0];\n  }\n  /**\n   * Get the green component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('lime');\n   * console.log(color.green); // 1\n   *\n   * const red = new Color('#ff0000');\n   * console.log(red.green); // 0\n   * ```\n   */\n  get green() {\n    return this._components[1];\n  }\n  /**\n   * Get the blue component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('blue');\n   * console.log(color.blue); // 1\n   *\n   * const yellow = new Color('#ffff00');\n   * console.log(yellow.blue); // 0\n   * ```\n   */\n  get blue() {\n    return this._components[2];\n  }\n  /**\n   * Get the alpha component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('red');\n   * console.log(color.alpha); // 1 (fully opaque)\n   *\n   * const transparent = new Color('rgba(255, 0, 0, 0.5)');\n   * console.log(transparent.alpha); // 0.5 (semi-transparent)\n   * ```\n   */\n  get alpha() {\n    return this._components[3];\n  }\n  /**\n   * Sets the color value and returns the instance for chaining.\n   *\n   * This is a chainable version of setting the `value` property.\n   * @param value - The color to set. Accepts various formats:\n   * - Hex strings/numbers (e.g., '#ff0000', 0xff0000)\n   * - RGB/RGBA values (arrays, objects)\n   * - CSS color names\n   * - HSL/HSLA values\n   * - HSV/HSVA values\n   * @returns The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic usage\n   * const color = new Color();\n   * color.setValue('#ff0000')\n   *     .setAlpha(0.5)\n   *     .premultiply(0.8);\n   *\n   * // Different formats\n   * color.setValue(0xff0000);          // Hex number\n   * color.setValue('#ff0000');         // Hex string\n   * color.setValue([1, 0, 0]);         // RGB array\n   * color.setValue([1, 0, 0, 0.5]);    // RGBA array\n   * color.setValue({ r: 1, g: 0, b: 0 }); // RGB object\n   *\n   * // Copy from another color\n   * const red = new Color('red');\n   * color.setValue(red);\n   * ```\n   * @throws {Error} If the color value is invalid or null\n   * @see {@link Color.value} For the underlying value property\n   */\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  /**\n   * The current color source. This property allows getting and setting the color value\n   * while preserving the original format where possible.\n   * @remarks\n   * When setting:\n   * - Setting to a `Color` instance copies its source and components\n   * - Setting to other valid sources normalizes and stores the value\n   * - Setting to `null` throws an Error\n   * - The color remains unchanged if normalization fails\n   *\n   * When getting:\n   * - Returns `null` if color was modified by {@link Color.multiply} or {@link Color.premultiply}\n   * - Otherwise returns the original color source\n   * @example\n   * ```ts\n   * // Setting different color formats\n   * const color = new Color();\n   *\n   * color.value = 0xff0000;         // Hex number\n   * color.value = '#ff0000';        // Hex string\n   * color.value = [1, 0, 0];        // RGB array\n   * color.value = [1, 0, 0, 0.5];   // RGBA array\n   * color.value = { r: 1, g: 0, b: 0 }; // RGB object\n   *\n   * // Copying from another color\n   * const red = new Color('red');\n   * color.value = red;  // Copies red's components\n   *\n   * // Getting the value\n   * console.log(color.value);  // Returns original format\n   *\n   * // After modifications\n   * color.multiply([0.5, 0.5, 0.5]);\n   * console.log(color.value);  // Returns null\n   * ```\n   * @throws {Error} When attempting to set `null`\n   */\n  set value(value) {\n    if (value instanceof _Color) {\n      this._value = this._cloneSource(value._value);\n      this._int = value._int;\n      this._components.set(value._components);\n    } else if (value === null) {\n      throw new Error(\"Cannot set Color#value to null\");\n    } else if (this._value === null || !this._isSourceEqual(this._value, value)) {\n      this._value = this._cloneSource(value);\n      this._normalize(this._value);\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  /**\n   * Copy a color source internally.\n   * @param value - Color source\n   */\n  _cloneSource(value) {\n    if (typeof value === \"string\" || typeof value === \"number\" || value instanceof Number || value === null) {\n      return value;\n    } else if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n      return value.slice(0);\n    } else if (typeof value === \"object\" && value !== null) {\n      return { ...value };\n    }\n    return value;\n  }\n  /**\n   * Equality check for color sources.\n   * @param value1 - First color source\n   * @param value2 - Second color source\n   * @returns `true` if the color sources are equal, `false` otherwise.\n   */\n  _isSourceEqual(value1, value2) {\n    const type1 = typeof value1;\n    const type2 = typeof value2;\n    if (type1 !== type2) {\n      return false;\n    } else if (type1 === \"number\" || type1 === \"string\" || value1 instanceof Number) {\n      return value1 === value2;\n    } else if (Array.isArray(value1) && Array.isArray(value2) || ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2)) {\n      if (value1.length !== value2.length) {\n        return false;\n      }\n      return value1.every((v, i) => v === value2[i]);\n    } else if (value1 !== null && value2 !== null) {\n      const keys1 = Object.keys(value1);\n      const keys2 = Object.keys(value2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      return keys1.every((key) => value1[key] === value2[key]);\n    }\n    return value1 === value2;\n  }\n  /**\n   * Convert to a RGBA color object with normalized components (0-1).\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGBA objects\n   * new Color('white').toRgba();     // returns { r: 1, g: 1, b: 1, a: 1 }\n   * new Color('#ff0000').toRgba();   // returns { r: 1, g: 0, b: 0, a: 1 }\n   *\n   * // With transparency\n   * new Color('rgba(255,0,0,0.5)').toRgba(); // returns { r: 1, g: 0, b: 0, a: 0.5 }\n   * ```\n   * @returns An RGBA object with normalized components\n   */\n  toRgba() {\n    const [r, g, b, a] = this._components;\n    return { r, g, b, a };\n  }\n  /**\n   * Convert to a RGB color object with normalized components (0-1).\n   *\n   * Alpha component is omitted in the output.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGB objects\n   * new Color('white').toRgb();     // returns { r: 1, g: 1, b: 1 }\n   * new Color('#ff0000').toRgb();   // returns { r: 1, g: 0, b: 0 }\n   *\n   * // Alpha is ignored\n   * new Color('rgba(255,0,0,0.5)').toRgb(); // returns { r: 1, g: 0, b: 0 }\n   * ```\n   * @returns An RGB object with normalized components\n   */\n  toRgb() {\n    const [r, g, b] = this._components;\n    return { r, g, b };\n  }\n  /**\n   * Convert to a CSS-style rgba string representation.\n   *\n   * RGB components are scaled to 0-255 range, alpha remains 0-1.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGBA strings\n   * new Color('white').toRgbaString();     // returns \"rgba(255,255,255,1)\"\n   * new Color('#ff0000').toRgbaString();   // returns \"rgba(255,0,0,1)\"\n   *\n   * // With transparency\n   * new Color([1, 0, 0, 0.5]).toRgbaString(); // returns \"rgba(255,0,0,0.5)\"\n   * ```\n   * @returns A CSS-compatible rgba string\n   */\n  toRgbaString() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return `rgba(${r},${g},${b},${this.alpha})`;\n  }\n  /**\n   * Convert to an [R, G, B] array of clamped uint8 values (0 to 255).\n   * @param {number[]|Uint8Array|Uint8ClampedArray} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGB components as integers between 0-255\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toUint8RgbArray(); // returns [255, 255, 255]\n   * new Color('#ff0000').toUint8RgbArray(); // returns [255, 0, 0]\n   *\n   * // Using custom output array\n   * const rgb = new Uint8Array(3);\n   * new Color('blue').toUint8RgbArray(rgb); // rgb is now [0, 0, 255]\n   *\n   * // Using different array types\n   * new Color('red').toUint8RgbArray(new Uint8ClampedArray(3)); // [255, 0, 0]\n   * new Color('red').toUint8RgbArray([]); // [255, 0, 0]\n   * ```\n   * @remarks\n   * - Output values are always clamped between 0-255\n   * - Alpha component is not included in output\n   * - Reuses internal cache array if no output array provided\n   */\n  toUint8RgbArray(out) {\n    const [r, g, b] = this._components;\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out || (out = this._arrayRgb);\n    out[0] = Math.round(r * 255);\n    out[1] = Math.round(g * 255);\n    out[2] = Math.round(b * 255);\n    return out;\n  }\n  /**\n   * Convert to an [R, G, B, A] array of normalized floats (numbers from 0.0 to 1.0).\n   * @param {number[]|Float32Array} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGBA components as floats between 0-1\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toArray();  // returns [1, 1, 1, 1]\n   * new Color('red').toArray();    // returns [1, 0, 0, 1]\n   *\n   * // With alpha\n   * new Color('rgba(255,0,0,0.5)').toArray(); // returns [1, 0, 0, 0.5]\n   *\n   * // Using custom output array\n   * const rgba = new Float32Array(4);\n   * new Color('blue').toArray(rgba); // rgba is now [0, 0, 1, 1]\n   * ```\n   * @remarks\n   * - Output values are normalized between 0-1\n   * - Includes alpha component as the fourth value\n   * - Reuses internal cache array if no output array provided\n   */\n  toArray(out) {\n    if (!this._arrayRgba) {\n      this._arrayRgba = [];\n    }\n    out || (out = this._arrayRgba);\n    const [r, g, b, a] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n  /**\n   * Convert to an [R, G, B] array of normalized floats (numbers from 0.0 to 1.0).\n   * @param {number[]|Float32Array} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGB components as floats between 0-1\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toRgbArray(); // returns [1, 1, 1]\n   * new Color('red').toRgbArray();   // returns [1, 0, 0]\n   *\n   * // Using custom output array\n   * const rgb = new Float32Array(3);\n   * new Color('blue').toRgbArray(rgb); // rgb is now [0, 0, 1]\n   * ```\n   * @remarks\n   * - Output values are normalized between 0-1\n   * - Alpha component is omitted from output\n   * - Reuses internal cache array if no output array provided\n   */\n  toRgbArray(out) {\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out || (out = this._arrayRgb);\n    const [r, g, b] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    return out;\n  }\n  /**\n   * Convert to a hexadecimal number.\n   * @returns The color as a 24-bit RGB integer\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toNumber(); // returns 0xffffff\n   * new Color('red').toNumber();   // returns 0xff0000\n   *\n   * // Store as hex\n   * const color = new Color('blue');\n   * const hex = color.toNumber(); // 0x0000ff\n   * ```\n   */\n  toNumber() {\n    return this._int;\n  }\n  /**\n   * Convert to a BGR number.\n   *\n   * Useful for platforms that expect colors in BGR format.\n   * @returns The color as a 24-bit BGR integer\n   * @example\n   * ```ts\n   * // Convert RGB to BGR\n   * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n   *\n   * // Common use case: platform-specific color format\n   * const color = new Color('orange');\n   * const bgrColor = color.toBgrNumber(); // Color with swapped R/B channels\n   * ```\n   * @remarks\n   * This swaps the red and blue channels compared to the normal RGB format:\n   * - RGB 0xRRGGBB becomes BGR 0xBBGGRR\n   */\n  toBgrNumber() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return (b << 16) + (g << 8) + r;\n  }\n  /**\n   * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n   *\n   * Useful for platforms that expect colors in little endian byte order.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert RGB color to little endian format\n   * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n   *\n   * // Common use cases:\n   * const color = new Color('orange');\n   * const leColor = color.toLittleEndianNumber(); // Swaps byte order for LE systems\n   *\n   * // Multiple conversions\n   * const colors = {\n   *     normal: 0xffcc99,\n   *     littleEndian: new Color(0xffcc99).toLittleEndianNumber(), // 0x99ccff\n   *     backToNormal: new Color(0x99ccff).toLittleEndianNumber()  // 0xffcc99\n   * };\n   * ```\n   * @remarks\n   * - Swaps R and B channels in the color value\n   * - RGB 0xRRGGBB becomes 0xBBGGRR\n   * - Useful for systems that use little endian byte order\n   * - Can be used to convert back and forth between formats\n   * @returns The color as a number in little endian format (BBGGRR)\n   * @see {@link Color.toBgrNumber} For BGR format without byte swapping\n   */\n  toLittleEndianNumber() {\n    const value = this._int;\n    return (value >> 16) + (value & 65280) + ((value & 255) << 16);\n  }\n  /**\n   * Multiply with another color.\n   *\n   * This action is destructive and modifies the original color.\n   * @param {ColorSource} value - The color to multiply by. Accepts any valid color format:\n   * - Hex strings/numbers (e.g., '#ff0000', 0xff0000)\n   * - RGB/RGBA arrays ([1, 0, 0], [1, 0, 0, 1])\n   * - Color objects ({ r: 1, g: 0, b: 0 })\n   * - CSS color names ('red', 'blue')\n   * @returns this - The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic multiplication\n   * const color = new Color('#ff0000');\n   * color.multiply(0x808080); // 50% darker red\n   *\n   * // With transparency\n   * color.multiply([1, 1, 1, 0.5]); // 50% transparent\n   *\n   * // Chain operations\n   * color\n   *     .multiply('#808080')\n   *     .multiply({ r: 1, g: 1, b: 1, a: 0.5 });\n   * ```\n   * @remarks\n   * - Multiplies each RGB component and alpha separately\n   * - Values are clamped between 0-1\n   * - Original color format is lost (value becomes null)\n   * - Operation cannot be undone\n   */\n  multiply(value) {\n    const [r, g, b, a] = _Color._temp.setValue(value)._components;\n    this._components[0] *= r;\n    this._components[1] *= g;\n    this._components[2] *= b;\n    this._components[3] *= a;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Converts color to a premultiplied alpha format.\n   *\n   * This action is destructive and modifies the original color.\n   * @param alpha - The alpha value to multiply by (0-1)\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels\n   * @returns {Color} The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic premultiplication\n   * const color = new Color('red');\n   * color.premultiply(0.5); // 50% transparent red with premultiplied RGB\n   *\n   * // Alpha only (RGB unchanged)\n   * color.premultiply(0.5, false); // 50% transparent, original RGB\n   *\n   * // Chain with other operations\n   * color\n   *     .multiply(0x808080)\n   *     .premultiply(0.5)\n   *     .toNumber();\n   * ```\n   * @remarks\n   * - RGB channels are multiplied by alpha when applyToRGB is true\n   * - Alpha is always set to the provided value\n   * - Values are clamped between 0-1\n   * - Original color format is lost (value becomes null)\n   * - Operation cannot be undone\n   */\n  premultiply(alpha, applyToRGB = true) {\n    if (applyToRGB) {\n      this._components[0] *= alpha;\n      this._components[1] *= alpha;\n      this._components[2] *= alpha;\n    }\n    this._components[3] = alpha;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Returns the color as a 32-bit premultiplied alpha integer.\n   *\n   * Format: 0xAARRGGBB\n   * @param {number} alpha - The alpha value to multiply by (0-1)\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels\n   * @returns {number} The premultiplied color as a 32-bit integer\n   * @example\n   * ```ts\n   * // Convert to premultiplied format\n   * const color = new Color('red');\n   *\n   * // Full opacity (0xFFRRGGBB)\n   * color.toPremultiplied(1.0); // 0xFFFF0000\n   *\n   * // 50% transparency with premultiplied RGB\n   * color.toPremultiplied(0.5); // 0x7F7F0000\n   *\n   * // 50% transparency without RGB premultiplication\n   * color.toPremultiplied(0.5, false); // 0x7FFF0000\n   * ```\n   * @remarks\n   * - Returns full opacity (0xFF000000) when alpha is 1.0\n   * - Returns 0 when alpha is 0.0 and applyToRGB is true\n   * - RGB values are rounded during premultiplication\n   */\n  toPremultiplied(alpha, applyToRGB = true) {\n    if (alpha === 1) {\n      return (255 << 24) + this._int;\n    }\n    if (alpha === 0) {\n      return applyToRGB ? 0 : this._int;\n    }\n    let r = this._int >> 16 & 255;\n    let g = this._int >> 8 & 255;\n    let b = this._int & 255;\n    if (applyToRGB) {\n      r = r * alpha + 0.5 | 0;\n      g = g * alpha + 0.5 | 0;\n      b = b * alpha + 0.5 | 0;\n    }\n    return (alpha * 255 << 24) + (r << 16) + (g << 8) + b;\n  }\n  /**\n   * Convert to a hexadecimal string (6 characters).\n   * @returns A CSS-compatible hex color string (e.g., \"#ff0000\")\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Basic colors\n   * new Color('red').toHex();    // returns \"#ff0000\"\n   * new Color('white').toHex();  // returns \"#ffffff\"\n   * new Color('black').toHex();  // returns \"#000000\"\n   *\n   * // From different formats\n   * new Color(0xff0000).toHex(); // returns \"#ff0000\"\n   * new Color([1, 0, 0]).toHex(); // returns \"#ff0000\"\n   * new Color({ r: 1, g: 0, b: 0 }).toHex(); // returns \"#ff0000\"\n   * ```\n   * @remarks\n   * - Always returns a 6-character hex string\n   * - Includes leading \"#\" character\n   * - Alpha channel is ignored\n   * - Values are rounded to nearest hex value\n   */\n  toHex() {\n    const hexString = this._int.toString(16);\n    return `#${\"000000\".substring(0, 6 - hexString.length) + hexString}`;\n  }\n  /**\n   * Convert to a hexadecimal string with alpha (8 characters).\n   * @returns A CSS-compatible hex color string with alpha (e.g., \"#ff0000ff\")\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Fully opaque colors\n   * new Color('red').toHexa();   // returns \"#ff0000ff\"\n   * new Color('white').toHexa(); // returns \"#ffffffff\"\n   *\n   * // With transparency\n   * new Color('rgba(255, 0, 0, 0.5)').toHexa(); // returns \"#ff00007f\"\n   * new Color([1, 0, 0, 0]).toHexa(); // returns \"#ff000000\"\n   * ```\n   * @remarks\n   * - Returns an 8-character hex string\n   * - Includes leading \"#\" character\n   * - Alpha is encoded in last two characters\n   * - Values are rounded to nearest hex value\n   */\n  toHexa() {\n    const alphaValue = Math.round(this._components[3] * 255);\n    const alphaString = alphaValue.toString(16);\n    return this.toHex() + \"00\".substring(0, 2 - alphaString.length) + alphaString;\n  }\n  /**\n   * Set alpha (transparency) value while preserving color components.\n   *\n   * Provides a chainable interface for setting alpha.\n   * @param alpha - Alpha value between 0 (fully transparent) and 1 (fully opaque)\n   * @returns The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic alpha setting\n   * const color = new Color('red');\n   * color.setAlpha(0.5);  // 50% transparent red\n   *\n   * // Chain with other operations\n   * color\n   *     .setValue('#ff0000')\n   *     .setAlpha(0.8)    // 80% opaque\n   *     .premultiply(0.5); // Further modify alpha\n   *\n   * // Reset to fully opaque\n   * color.setAlpha(1);\n   * ```\n   * @remarks\n   * - Alpha value is clamped between 0-1\n   * - Can be chained with other color operations\n   */\n  setAlpha(alpha) {\n    this._components[3] = this._clamp(alpha);\n    return this;\n  }\n  /**\n   * Normalize the input value into rgba\n   * @param value - Input value\n   */\n  _normalize(value) {\n    let r;\n    let g;\n    let b;\n    let a;\n    if ((typeof value === \"number\" || value instanceof Number) && value >= 0 && value <= 16777215) {\n      const int = value;\n      r = (int >> 16 & 255) / 255;\n      g = (int >> 8 & 255) / 255;\n      b = (int & 255) / 255;\n      a = 1;\n    } else if ((Array.isArray(value) || value instanceof Float32Array) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value);\n      [r, g, b, a = 1] = value;\n    } else if ((value instanceof Uint8Array || value instanceof Uint8ClampedArray) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value, 0, 255);\n      [r, g, b, a = 255] = value;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      a /= 255;\n    } else if (typeof value === \"string\" || typeof value === \"object\") {\n      if (typeof value === \"string\") {\n        const match = _Color.HEX_PATTERN.exec(value);\n        if (match) {\n          value = `#${match[2]}`;\n        }\n      }\n      const color = colord(value);\n      if (color.isValid()) {\n        ({ r, g, b, a } = color.rgba);\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n    }\n    if (r !== void 0) {\n      this._components[0] = r;\n      this._components[1] = g;\n      this._components[2] = b;\n      this._components[3] = a;\n      this._refreshInt();\n    } else {\n      throw new Error(`Unable to convert color ${value}`);\n    }\n  }\n  /** Refresh the internal color rgb number */\n  _refreshInt() {\n    this._clamp(this._components);\n    const [r, g, b] = this._components;\n    this._int = (r * 255 << 16) + (g * 255 << 8) + (b * 255 | 0);\n  }\n  /**\n   * Clamps values to a range. Will override original values\n   * @param value - Value(s) to clamp\n   * @param min - Minimum value\n   * @param max - Maximum value\n   */\n  _clamp(value, min = 0, max = 1) {\n    if (typeof value === \"number\") {\n      return Math.min(Math.max(value, min), max);\n    }\n    value.forEach((v, i) => {\n      value[i] = Math.min(Math.max(v, min), max);\n    });\n    return value;\n  }\n  /**\n   * Check if a value can be interpreted as a valid color format.\n   * Supports all color formats that can be used with the Color class.\n   * @param value - Value to check\n   * @returns True if the value can be used as a color\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // CSS colors and hex values\n   * Color.isColorLike('red');          // true\n   * Color.isColorLike('#ff0000');      // true\n   * Color.isColorLike(0xff0000);       // true\n   *\n   * // Arrays (RGB/RGBA)\n   * Color.isColorLike([1, 0, 0]);      // true\n   * Color.isColorLike([1, 0, 0, 0.5]); // true\n   *\n   * // TypedArrays\n   * Color.isColorLike(new Float32Array([1, 0, 0]));          // true\n   * Color.isColorLike(new Uint8Array([255, 0, 0]));          // true\n   * Color.isColorLike(new Uint8ClampedArray([255, 0, 0]));   // true\n   *\n   * // Object formats\n   * Color.isColorLike({ r: 1, g: 0, b: 0 });            // true (RGB)\n   * Color.isColorLike({ r: 1, g: 0, b: 0, a: 0.5 });    // true (RGBA)\n   * Color.isColorLike({ h: 0, s: 100, l: 50 });         // true (HSL)\n   * Color.isColorLike({ h: 0, s: 100, l: 50, a: 0.5 }); // true (HSLA)\n   * Color.isColorLike({ h: 0, s: 100, v: 100 });        // true (HSV)\n   * Color.isColorLike({ h: 0, s: 100, v: 100, a: 0.5 });// true (HSVA)\n   *\n   * // Color instances\n   * Color.isColorLike(new Color('red')); // true\n   *\n   * // Invalid values\n   * Color.isColorLike(null);           // false\n   * Color.isColorLike(undefined);      // false\n   * Color.isColorLike({});             // false\n   * Color.isColorLike([]);             // false\n   * Color.isColorLike('not-a-color');  // false\n   * ```\n   * @remarks\n   * Checks for the following formats:\n   * - Numbers (0x000000 to 0xffffff)\n   * - CSS color strings\n   * - RGB/RGBA arrays and objects\n   * - HSL/HSLA objects\n   * - HSV/HSVA objects\n   * - TypedArrays (Float32Array, Uint8Array, Uint8ClampedArray)\n   * - Color instances\n   * @see {@link ColorSource} For supported color format types\n   * @see {@link Color.setValue} For setting color values\n   * @category utility\n   */\n  static isColorLike(value) {\n    return typeof value === \"number\" || typeof value === \"string\" || value instanceof Number || value instanceof _Color || Array.isArray(value) || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Float32Array || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 && value.a !== void 0;\n  }\n};\n/**\n * Static shared Color instance used for utility operations. This is a singleton color object\n * that can be reused to avoid creating unnecessary Color instances.\n * > [!IMPORTANT] You should be careful when using this shared instance, as it is mutable and can be\n * > changed by any code that uses it.\n * >\n * > It is best used for one-off color operations or temporary transformations.\n * > For persistent colors, create your own Color instance instead.\n * @example\n * ```ts\n * import { Color } from 'pixi.js';\n *\n * // Use shared instance for one-off color operations\n * Color.shared.setValue(0xff0000);\n * const redHex = Color.shared.toHex();     // \"#ff0000\"\n * const redRgb = Color.shared.toRgbArray(); // [1, 0, 0]\n *\n * // Temporary color transformations\n * const colorNumber = Color.shared\n *     .setValue('#ff0000')     // Set to red\n *     .setAlpha(0.5)          // Make semi-transparent\n *     .premultiply(0.8)       // Apply premultiplication\n *     .toNumber();            // Convert to number\n *\n * // Chain multiple operations\n * const result = Color.shared\n *     .setValue(someColor)\n *     .multiply(tintColor)\n *     .toPremultiplied(alpha);\n * ```\n * @remarks\n * - This is a shared instance - be careful about multiple code paths using it simultaneously\n * - Use for temporary color operations to avoid allocating new Color instances\n * - The value is preserved between operations, so reset if needed\n * - For persistent colors, create your own Color instance instead\n */\n_Color.shared = new _Color();\n/**\n * Temporary Color object for static uses internally.\n * As to not conflict with Color.shared.\n * @ignore\n */\n_Color._temp = new _Color();\n/** Pattern for hex strings */\n// eslint-disable-next-line @typescript-eslint/naming-convention\n_Color.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\nlet Color = _Color;\n\nexport { Color };\n//# sourceMappingURL=Color.mjs.map\n","\"use strict\";\nconst cullingMixin = {\n  cullArea: null,\n  cullable: false,\n  cullableChildren: true\n};\n\nexport { cullingMixin };\n//# sourceMappingURL=cullingMixin.mjs.map\n","\"use strict\";\nlet warnCount = 0;\nconst maxWarnings = 500;\nfunction warn(...args) {\n  if (warnCount === maxWarnings)\n    return;\n  warnCount++;\n  if (warnCount === maxWarnings) {\n    console.warn(\"PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.\");\n  } else {\n    console.warn(\"PixiJS Warning: \", ...args);\n  }\n}\n\nexport { warn };\n//# sourceMappingURL=warn.mjs.map\n","\"use strict\";\nconst GlobalResourceRegistry = {\n  /**\n   * Set of registered pools and cleanable objects.\n   * @private\n   */\n  _registeredResources: /* @__PURE__ */ new Set(),\n  /**\n   * Registers a pool or cleanable object for cleanup.\n   * @param {Cleanable} pool - The pool or object to register.\n   */\n  register(pool) {\n    this._registeredResources.add(pool);\n  },\n  /**\n   * Unregisters a pool or cleanable object from cleanup.\n   * @param {Cleanable} pool - The pool or object to unregister.\n   */\n  unregister(pool) {\n    this._registeredResources.delete(pool);\n  },\n  /** Clears all registered pools and cleanable objects. This will call clear() on each registered item. */\n  release() {\n    this._registeredResources.forEach((pool) => pool.clear());\n  },\n  /**\n   * Gets the number of registered pools and cleanable objects.\n   * @returns {number} The count of registered items.\n   */\n  get registeredCount() {\n    return this._registeredResources.size;\n  },\n  /**\n   * Checks if a specific pool or cleanable object is registered.\n   * @param {Cleanable} pool - The pool or object to check.\n   * @returns {boolean} True if the item is registered, false otherwise.\n   */\n  isRegistered(pool) {\n    return this._registeredResources.has(pool);\n  },\n  /**\n   * Removes all registrations without clearing the pools.\n   * Useful if you want to reset the collector without affecting the pools.\n   */\n  reset() {\n    this._registeredResources.clear();\n  }\n};\n\nexport { GlobalResourceRegistry };\n//# sourceMappingURL=GlobalResourceRegistry.mjs.map\n","\"use strict\";\nclass Pool {\n  /**\n   * Constructs a new Pool.\n   * @param ClassType - The constructor of the items in the pool.\n   * @param {number} [initialSize] - The initial size of the pool.\n   */\n  constructor(ClassType, initialSize) {\n    this._pool = [];\n    this._count = 0;\n    this._index = 0;\n    this._classType = ClassType;\n    if (initialSize) {\n      this.prepopulate(initialSize);\n    }\n  }\n  /**\n   * Prepopulates the pool with a given number of items.\n   * @param total - The number of items to add to the pool.\n   */\n  prepopulate(total) {\n    for (let i = 0; i < total; i++) {\n      this._pool[this._index++] = new this._classType();\n    }\n    this._count += total;\n  }\n  /**\n   * Gets an item from the pool. Calls the item's `init` method if it exists.\n   * If there are no items left in the pool, a new one will be created.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(data) {\n    let item;\n    if (this._index > 0) {\n      item = this._pool[--this._index];\n    } else {\n      item = new this._classType();\n    }\n    item.init?.(data);\n    return item;\n  }\n  /**\n   * Returns an item to the pool. Calls the item's `reset` method if it exists.\n   * @param {T} item - The item to return to the pool.\n   */\n  return(item) {\n    item.reset?.();\n    this._pool[this._index++] = item;\n  }\n  /**\n   * Gets the number of items in the pool.\n   * @readonly\n   */\n  get totalSize() {\n    return this._count;\n  }\n  /**\n   * Gets the number of items in the pool that are free to use without needing to create more.\n   * @readonly\n   */\n  get totalFree() {\n    return this._index;\n  }\n  /**\n   * Gets the number of items in the pool that are currently in use.\n   * @readonly\n   */\n  get totalUsed() {\n    return this._count - this._index;\n  }\n  /** clears the pool */\n  clear() {\n    if (this._pool.length > 0 && this._pool[0].destroy) {\n      for (let i = 0; i < this._index; i++) {\n        this._pool[i].destroy();\n      }\n    }\n    this._pool.length = 0;\n    this._count = 0;\n    this._index = 0;\n  }\n}\n\nexport { Pool };\n//# sourceMappingURL=Pool.mjs.map\n","import { GlobalResourceRegistry } from './GlobalResourceRegistry.mjs';\nimport { Pool } from './Pool.mjs';\n\n\"use strict\";\nclass PoolGroupClass {\n  constructor() {\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    this._poolsByClass = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Prepopulates a specific pool with a given number of items.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {number} total - The number of items to add to the pool.\n   */\n  prepopulate(Class, total) {\n    const classPool = this.getPool(Class);\n    classPool.prepopulate(total);\n  }\n  /**\n   * Gets an item from a specific pool.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(Class, data) {\n    const pool = this.getPool(Class);\n    return pool.get(data);\n  }\n  /**\n   * Returns an item to its respective pool.\n   * @param {PoolItem} item - The item to return to the pool.\n   */\n  return(item) {\n    const pool = this.getPool(item.constructor);\n    pool.return(item);\n  }\n  /**\n   * Gets a specific pool based on the class type.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n   * @returns {Pool<T>} The pool of the given class type.\n   */\n  getPool(ClassType) {\n    if (!this._poolsByClass.has(ClassType)) {\n      this._poolsByClass.set(ClassType, new Pool(ClassType));\n    }\n    return this._poolsByClass.get(ClassType);\n  }\n  /** gets the usage stats of each pool in the system */\n  stats() {\n    const stats = {};\n    this._poolsByClass.forEach((pool) => {\n      const name = stats[pool._classType.name] ? pool._classType.name + pool._classType.ID : pool._classType.name;\n      stats[name] = {\n        free: pool.totalFree,\n        used: pool.totalUsed,\n        size: pool.totalSize\n      };\n    });\n    return stats;\n  }\n  /** Clears all pools in the group. This will reset all pools and free their resources. */\n  clear() {\n    this._poolsByClass.forEach((pool) => pool.clear());\n    this._poolsByClass.clear();\n  }\n}\nconst BigPool = new PoolGroupClass();\nGlobalResourceRegistry.register(BigPool);\n\nexport { BigPool, PoolGroupClass };\n//# sourceMappingURL=PoolGroup.mjs.map\n","import { deprecation } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst cacheAsTextureMixin = {\n  get isCachedAsTexture() {\n    return !!this.renderGroup?.isCachedAsTexture;\n  },\n  cacheAsTexture(val) {\n    if (typeof val === \"boolean\" && val === false) {\n      this.disableRenderGroup();\n    } else {\n      this.enableRenderGroup();\n      this.renderGroup.enableCacheAsTexture(val === true ? {} : val);\n    }\n  },\n  updateCacheTexture() {\n    this.renderGroup?.updateCacheTexture();\n  },\n  get cacheAsBitmap() {\n    return this.isCachedAsTexture;\n  },\n  set cacheAsBitmap(val) {\n    deprecation(\"v8.6.0\", \"cacheAsBitmap is deprecated, use cacheAsTexture instead.\");\n    this.cacheAsTexture(val);\n  }\n};\n\nexport { cacheAsTextureMixin };\n//# sourceMappingURL=cacheAsTextureMixin.mjs.map\n","\"use strict\";\nfunction removeItems(arr, startIdx, removeCount) {\n  const length = arr.length;\n  let i;\n  if (startIdx >= length || removeCount === 0) {\n    return;\n  }\n  removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;\n  const len = length - removeCount;\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount];\n  }\n  arr.length = len;\n}\n\nexport { removeItems };\n//# sourceMappingURL=removeItems.mjs.map\n","import { removeItems } from '../../../utils/data/removeItems.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst childrenHelperMixin = {\n  allowChildren: true,\n  removeChildren(beginIndex = 0, endIndex) {\n    const end = endIndex ?? this.children.length;\n    const range = end - beginIndex;\n    const removed = [];\n    if (range > 0 && range <= end) {\n      for (let i = end - 1; i >= beginIndex; i--) {\n        const child = this.children[i];\n        if (!child)\n          continue;\n        removed.push(child);\n        child.parent = null;\n      }\n      removeItems(this.children, beginIndex, end);\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      if (renderGroup) {\n        renderGroup.removeChildren(removed);\n      }\n      for (let i = 0; i < removed.length; ++i) {\n        const child = removed[i];\n        child.parentRenderLayer?.detach(child);\n        this.emit(\"childRemoved\", child, this, i);\n        removed[i].emit(\"removed\", this);\n      }\n      if (removed.length > 0) {\n        this._didViewChangeTick++;\n      }\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return removed;\n    }\n    throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n  },\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    return this.removeChild(child);\n  },\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  },\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n    }\n    this.getChildIndex(child);\n    this.addChildAt(child, index);\n  },\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n    if (index === -1) {\n      throw new Error(\"The supplied Container must be a child of the caller\");\n    }\n    return index;\n  },\n  addChildAt(child, index) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChildAt: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    const { children } = this;\n    if (index < 0 || index > children.length) {\n      throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n    }\n    if (child.parent) {\n      const currentIndex = child.parent.children.indexOf(child);\n      if (child.parent === this && currentIndex === index) {\n        return child;\n      }\n      if (currentIndex !== -1) {\n        child.parent.children.splice(currentIndex, 1);\n      }\n    }\n    if (index === children.length) {\n      children.push(child);\n    } else {\n      children.splice(index, 0, child);\n    }\n    child.parent = this;\n    child.didChange = true;\n    child._updateFlags = 15;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    this.emit(\"childAdded\", child, this, index);\n    child.emit(\"added\", this);\n    return child;\n  },\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n    this.children[index1] = child2;\n    this.children[index2] = child;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    this._didContainerChangeTick++;\n  },\n  removeFromParent() {\n    this.parent?.removeChild(this);\n  },\n  reparentChild(...child) {\n    if (child.length === 1) {\n      return this.reparentChildAt(child[0], this.children.length);\n    }\n    child.forEach((c) => this.reparentChildAt(c, this.children.length));\n    return child[0];\n  },\n  reparentChildAt(child, index) {\n    if (child.parent === this) {\n      this.setChildIndex(child, index);\n      return child;\n    }\n    const childMat = child.worldTransform.clone();\n    child.removeFromParent();\n    this.addChildAt(child, index);\n    const newMatrix = this.worldTransform.clone();\n    newMatrix.invert();\n    childMat.prepend(newMatrix);\n    child.setFromMatrix(childMat);\n    return child;\n  },\n  replaceChild(oldChild, newChild) {\n    oldChild.updateLocalTransform();\n    this.addChildAt(newChild, this.getChildIndex(oldChild));\n    newChild.setFromMatrix(oldChild.localTransform);\n    newChild.updateLocalTransform();\n    this.removeChild(oldChild);\n  }\n};\n\nexport { childrenHelperMixin };\n//# sourceMappingURL=childrenHelperMixin.mjs.map\n","\"use strict\";\nconst collectRenderablesMixin = {\n  collectRenderables(instructionSet, renderer, currentLayer) {\n    if (this.parentRenderLayer && this.parentRenderLayer !== currentLayer || this.globalDisplayStatus < 7 || !this.includeInBuild)\n      return;\n    if (this.sortableChildren) {\n      this.sortChildren();\n    }\n    if (this.isSimple) {\n      this.collectRenderablesSimple(instructionSet, renderer, currentLayer);\n    } else if (this.renderGroup) {\n      renderer.renderPipes.renderGroup.addRenderGroup(this.renderGroup, instructionSet);\n    } else {\n      this.collectRenderablesWithEffects(instructionSet, renderer, currentLayer);\n    }\n  },\n  collectRenderablesSimple(instructionSet, renderer, currentLayer) {\n    const children = this.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      children[i].collectRenderables(instructionSet, renderer, currentLayer);\n    }\n  },\n  collectRenderablesWithEffects(instructionSet, renderer, currentLayer) {\n    const { renderPipes } = renderer;\n    for (let i = 0; i < this.effects.length; i++) {\n      const effect = this.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.push(effect, this, instructionSet);\n    }\n    this.collectRenderablesSimple(instructionSet, renderer, currentLayer);\n    for (let i = this.effects.length - 1; i >= 0; i--) {\n      const effect = this.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.pop(effect, this, instructionSet);\n    }\n  }\n};\n\nexport { collectRenderablesMixin };\n//# sourceMappingURL=collectRenderablesMixin.mjs.map\n","\"use strict\";\nclass FilterEffect {\n  constructor() {\n    /** the pipe that knows how to handle this effect */\n    this.pipe = \"filter\";\n    /** the priority of this effect */\n    this.priority = 1;\n  }\n  destroy() {\n    for (let i = 0; i < this.filters.length; i++) {\n      this.filters[i].destroy();\n    }\n    this.filters = null;\n    this.filterArea = null;\n  }\n}\n\nexport { FilterEffect };\n//# sourceMappingURL=FilterEffect.mjs.map\n","import { extensions, ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nclass MaskEffectManagerClass {\n  constructor() {\n    /** @private */\n    this._effectClasses = [];\n    this._tests = [];\n    this._initialized = false;\n  }\n  init() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n    this._effectClasses.forEach((test) => {\n      this.add({\n        test: test.test,\n        maskClass: test\n      });\n    });\n  }\n  add(test) {\n    this._tests.push(test);\n  }\n  getMaskEffect(item) {\n    if (!this._initialized)\n      this.init();\n    for (let i = 0; i < this._tests.length; i++) {\n      const test = this._tests[i];\n      if (test.test(item)) {\n        return BigPool.get(test.maskClass, item);\n      }\n    }\n    return item;\n  }\n  returnMaskEffect(effect) {\n    BigPool.return(effect);\n  }\n}\nconst MaskEffectManager = new MaskEffectManagerClass();\nextensions.handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n\nexport { MaskEffectManager, MaskEffectManagerClass };\n//# sourceMappingURL=MaskEffectManager.mjs.map\n","import { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager.mjs';\n\n\"use strict\";\nconst effectsMixin = {\n  _maskEffect: null,\n  _maskOptions: {\n    inverse: false\n  },\n  _filterEffect: null,\n  effects: [],\n  _markStructureAsChanged() {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n  },\n  addEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index !== -1)\n      return;\n    this.effects.push(effect);\n    this.effects.sort((a, b) => a.priority - b.priority);\n    this._markStructureAsChanged();\n    this._updateIsSimple();\n  },\n  removeEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index === -1)\n      return;\n    this.effects.splice(index, 1);\n    this._markStructureAsChanged();\n    this._updateIsSimple();\n  },\n  set mask(value) {\n    const effect = this._maskEffect;\n    if (effect?.mask === value)\n      return;\n    if (effect) {\n      this.removeEffect(effect);\n      MaskEffectManager.returnMaskEffect(effect);\n      this._maskEffect = null;\n    }\n    if (value === null || value === void 0)\n      return;\n    this._maskEffect = MaskEffectManager.getMaskEffect(value);\n    this.addEffect(this._maskEffect);\n  },\n  get mask() {\n    return this._maskEffect?.mask;\n  },\n  setMask(options) {\n    this._maskOptions = {\n      ...this._maskOptions,\n      ...options\n    };\n    if (options.mask) {\n      this.mask = options.mask;\n    }\n    this._markStructureAsChanged();\n  },\n  set filters(value) {\n    if (!Array.isArray(value) && value)\n      value = [value];\n    const effect = this._filterEffect || (this._filterEffect = new FilterEffect());\n    value = value;\n    const hasFilters = value?.length > 0;\n    const hadFilters = effect.filters?.length > 0;\n    const didChange = hasFilters !== hadFilters;\n    value = Array.isArray(value) ? value.slice(0) : value;\n    effect.filters = Object.freeze(value);\n    if (didChange) {\n      if (hasFilters) {\n        this.addEffect(effect);\n      } else {\n        this.removeEffect(effect);\n        effect.filters = value ?? null;\n      }\n    }\n  },\n  get filters() {\n    return this._filterEffect?.filters;\n  },\n  set filterArea(value) {\n    this._filterEffect || (this._filterEffect = new FilterEffect());\n    this._filterEffect.filterArea = value;\n  },\n  get filterArea() {\n    return this._filterEffect?.filterArea;\n  }\n};\n\nexport { effectsMixin };\n//# sourceMappingURL=effectsMixin.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst findMixin = {\n  label: null,\n  get name() {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    return this.label;\n  },\n  set name(value) {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    this.label = value;\n  },\n  getChildByName(name, deep = false) {\n    return this.getChildByLabel(name, deep);\n  },\n  getChildByLabel(label, deep = false) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label))\n        return child;\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const found = child.getChildByLabel(label, true);\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return null;\n  },\n  getChildrenByLabel(label, deep = false, out = []) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label)) {\n        out.push(child);\n      }\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        children[i].getChildrenByLabel(label, true, out);\n      }\n    }\n    return out;\n  }\n};\n\nexport { findMixin };\n//# sourceMappingURL=findMixin.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { Bounds } from '../Bounds.mjs';\n\n\"use strict\";\nconst matrixPool = BigPool.getPool(Matrix);\nconst boundsPool = BigPool.getPool(Bounds);\n\nexport { boundsPool, matrixPool };\n//# sourceMappingURL=matrixAndBoundsPool.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { boundsPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst getFastGlobalBoundsMixin = {\n  getFastGlobalBounds(factorRenderLayers, bounds) {\n    bounds || (bounds = new Bounds());\n    bounds.clear();\n    this._getGlobalBoundsRecursive(!!factorRenderLayers, bounds, this.parentRenderLayer);\n    if (!bounds.isValid) {\n      bounds.set(0, 0, 0, 0);\n    }\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    bounds.applyMatrix(renderGroup.worldTransform);\n    return bounds;\n  },\n  _getGlobalBoundsRecursive(factorRenderLayers, bounds, currentLayer) {\n    let localBounds = bounds;\n    if (factorRenderLayers && this.parentRenderLayer && this.parentRenderLayer !== currentLayer)\n      return;\n    if (this.localDisplayStatus !== 7 || !this.measurable) {\n      return;\n    }\n    const manageEffects = !!this.effects.length;\n    if (this.renderGroup || manageEffects) {\n      localBounds = boundsPool.get().clear();\n    }\n    if (this.boundsArea) {\n      bounds.addRect(this.boundsArea, this.worldTransform);\n    } else {\n      if (this.renderPipeId) {\n        const viewBounds = this.bounds;\n        localBounds.addFrame(\n          viewBounds.minX,\n          viewBounds.minY,\n          viewBounds.maxX,\n          viewBounds.maxY,\n          this.groupTransform\n        );\n      }\n      const children = this.children;\n      for (let i = 0; i < children.length; i++) {\n        children[i]._getGlobalBoundsRecursive(factorRenderLayers, localBounds, currentLayer);\n      }\n    }\n    if (manageEffects) {\n      let advanced = false;\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      for (let i = 0; i < this.effects.length; i++) {\n        if (this.effects[i].addBounds) {\n          if (!advanced) {\n            advanced = true;\n            localBounds.applyMatrix(renderGroup.worldTransform);\n          }\n          this.effects[i].addBounds(localBounds, true);\n        }\n      }\n      if (advanced) {\n        localBounds.applyMatrix(renderGroup.worldTransform.copyTo(tempMatrix).invert());\n      }\n      bounds.addBounds(localBounds);\n      boundsPool.return(localBounds);\n    } else if (this.renderGroup) {\n      bounds.addBounds(localBounds, this.relativeGroupTransform);\n      boundsPool.return(localBounds);\n    }\n  }\n};\n\nexport { getFastGlobalBoundsMixin };\n//# sourceMappingURL=getFastGlobalBoundsMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    const renderableBounds = target.bounds;\n    if (renderableBounds && !renderableBounds.isEmpty()) {\n      bounds.matrix = worldTransform;\n      bounds.addBounds(renderableBounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n","\"use strict\";\nfunction multiplyHexColors(color1, color2) {\n  if (color1 === 16777215 || !color2)\n    return color2;\n  if (color2 === 16777215 || !color1)\n    return color1;\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 * r2 / 255 | 0;\n  const g = g1 * g2 / 255 | 0;\n  const b = b1 * b2 / 255 | 0;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { multiplyHexColors };\n//# sourceMappingURL=multiplyHexColors.mjs.map\n","import { multiplyHexColors } from './multiplyHexColors.mjs';\n\n\"use strict\";\nconst WHITE_BGR = 16777215;\nfunction multiplyColors(localBGRColor, parentBGRColor) {\n  if (localBGRColor === WHITE_BGR) {\n    return parentBGRColor;\n  }\n  if (parentBGRColor === WHITE_BGR) {\n    return localBGRColor;\n  }\n  return multiplyHexColors(localBGRColor, parentBGRColor);\n}\n\nexport { multiplyColors };\n//# sourceMappingURL=multiplyColors.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds.mjs';\nimport { matrixPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\nimport { multiplyColors } from '../utils/multiplyColors.mjs';\n\n\"use strict\";\nfunction bgr2rgb(color) {\n  return ((color & 255) << 16) + (color & 65280) + (color >> 16 & 255);\n}\nconst getGlobalMixin = {\n  getGlobalAlpha(skipUpdate) {\n    if (skipUpdate) {\n      if (this.renderGroup) {\n        return this.renderGroup.worldAlpha;\n      }\n      if (this.parentRenderGroup) {\n        return this.parentRenderGroup.worldAlpha * this.alpha;\n      }\n      return this.alpha;\n    }\n    let alpha = this.alpha;\n    let current = this.parent;\n    while (current) {\n      alpha *= current.alpha;\n      current = current.parent;\n    }\n    return alpha;\n  },\n  getGlobalTransform(matrix = new Matrix(), skipUpdate) {\n    if (skipUpdate) {\n      return matrix.copyFrom(this.worldTransform);\n    }\n    this.updateLocalTransform();\n    const parentTransform = updateTransformBackwards(this, matrixPool.get().identity());\n    matrix.appendFrom(this.localTransform, parentTransform);\n    matrixPool.return(parentTransform);\n    return matrix;\n  },\n  getGlobalTint(skipUpdate) {\n    if (skipUpdate) {\n      if (this.renderGroup) {\n        return bgr2rgb(this.renderGroup.worldColor);\n      }\n      if (this.parentRenderGroup) {\n        return bgr2rgb(\n          multiplyColors(this.localColor, this.parentRenderGroup.worldColor)\n        );\n      }\n      return this.tint;\n    }\n    let color = this.localColor;\n    let parent = this.parent;\n    while (parent) {\n      color = multiplyColors(color, parent.localColor);\n      parent = parent.parent;\n    }\n    return bgr2rgb(color);\n  }\n};\n\nexport { bgr2rgb, getGlobalMixin };\n//# sourceMappingURL=getGlobalMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getLocalBounds(target, bounds, relativeMatrix) {\n  bounds.clear();\n  relativeMatrix || (relativeMatrix = Matrix.IDENTITY);\n  _getLocalBounds(target, bounds, relativeMatrix, target, true);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getLocalBounds(target, bounds, parentTransform, rootContainer, isRoot) {\n  let relativeTransform;\n  if (!isRoot) {\n    if (!target.visible || !target.measurable)\n      return;\n    target.updateLocalTransform();\n    const localTransform = target.localTransform;\n    relativeTransform = matrixPool.get();\n    relativeTransform.appendFrom(localTransform, parentTransform);\n  } else {\n    relativeTransform = matrixPool.get();\n    relativeTransform = parentTransform.copyTo(relativeTransform);\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, relativeTransform);\n  } else {\n    if (target.renderPipeId) {\n      bounds.matrix = relativeTransform;\n      bounds.addBounds(target.bounds);\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addLocalBounds?.(bounds, rootContainer);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  matrixPool.return(relativeTransform);\n}\n\nexport { getLocalBounds };\n//# sourceMappingURL=getLocalBounds.mjs.map\n","\"use strict\";\nfunction checkChildrenDidChange(container, previousData) {\n  const children = container.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    const uid = child.uid;\n    const didChange = (child._didViewChangeTick & 65535) << 16 | child._didContainerChangeTick & 65535;\n    const index = previousData.index;\n    if (previousData.data[index] !== uid || previousData.data[index + 1] !== didChange) {\n      previousData.data[previousData.index] = uid;\n      previousData.data[previousData.index + 1] = didChange;\n      previousData.didChange = true;\n    }\n    previousData.index = index + 2;\n    if (child.children.length) {\n      checkChildrenDidChange(child, previousData);\n    }\n  }\n  return previousData.didChange;\n}\n\nexport { checkChildrenDidChange };\n//# sourceMappingURL=checkChildrenDidChange.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds.mjs';\nimport { getLocalBounds } from '../bounds/getLocalBounds.mjs';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst measureMixin = {\n  _localBoundsCacheId: -1,\n  _localBoundsCacheData: null,\n  _setWidth(value, localWidth) {\n    const sign = Math.sign(this.scale.x) || 1;\n    if (localWidth !== 0) {\n      this.scale.x = value / localWidth * sign;\n    } else {\n      this.scale.x = sign;\n    }\n  },\n  _setHeight(value, localHeight) {\n    const sign = Math.sign(this.scale.y) || 1;\n    if (localHeight !== 0) {\n      this.scale.y = value / localHeight * sign;\n    } else {\n      this.scale.y = sign;\n    }\n  },\n  getLocalBounds() {\n    if (!this._localBoundsCacheData) {\n      this._localBoundsCacheData = {\n        data: [],\n        index: 1,\n        didChange: false,\n        localBounds: new Bounds()\n      };\n    }\n    const localBoundsCacheData = this._localBoundsCacheData;\n    localBoundsCacheData.index = 1;\n    localBoundsCacheData.didChange = false;\n    if (localBoundsCacheData.data[0] !== this._didViewChangeTick) {\n      localBoundsCacheData.didChange = true;\n      localBoundsCacheData.data[0] = this._didViewChangeTick;\n    }\n    checkChildrenDidChange(this, localBoundsCacheData);\n    if (localBoundsCacheData.didChange) {\n      getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n    }\n    return localBoundsCacheData.localBounds;\n  },\n  getBounds(skipUpdate, bounds) {\n    return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n  }\n};\n\nexport { measureMixin };\n//# sourceMappingURL=measureMixin.mjs.map\n","\"use strict\";\nconst onRenderMixin = {\n  _onRender: null,\n  set onRender(func) {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (!func) {\n      if (this._onRender) {\n        renderGroup?.removeOnRender(this);\n      }\n      this._onRender = null;\n      return;\n    }\n    if (!this._onRender) {\n      renderGroup?.addOnRender(this);\n    }\n    this._onRender = func;\n  },\n  get onRender() {\n    return this._onRender;\n  }\n};\n\nexport { onRenderMixin };\n//# sourceMappingURL=onRenderMixin.mjs.map\n","\"use strict\";\nconst sortMixin = {\n  _zIndex: 0,\n  sortDirty: false,\n  sortableChildren: false,\n  get zIndex() {\n    return this._zIndex;\n  },\n  set zIndex(value) {\n    if (this._zIndex === value)\n      return;\n    this._zIndex = value;\n    this.depthOfChildModified();\n  },\n  depthOfChildModified() {\n    if (this.parent) {\n      this.parent.sortableChildren = true;\n      this.parent.sortDirty = true;\n    }\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n  },\n  sortChildren() {\n    if (!this.sortDirty)\n      return;\n    this.sortDirty = false;\n    this.children.sort(sortChildren);\n  }\n};\nfunction sortChildren(a, b) {\n  return a._zIndex - b._zIndex;\n}\n\nexport { sortMixin };\n//# sourceMappingURL=sortMixin.mjs.map\n","import { Point } from '../../../maths/point/Point.mjs';\nimport { matrixPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst toLocalGlobalMixin = {\n  getGlobalPosition(point = new Point(), skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this._position, point, skipUpdate);\n    } else {\n      point.x = this._position.x;\n      point.y = this._position.y;\n    }\n    return point;\n  },\n  toGlobal(position, point, skipUpdate = false) {\n    const globalMatrix = this.getGlobalTransform(matrixPool.get(), skipUpdate);\n    point = globalMatrix.apply(position, point);\n    matrixPool.return(globalMatrix);\n    return point;\n  },\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n    const globalMatrix = this.getGlobalTransform(matrixPool.get(), skipUpdate);\n    point = globalMatrix.applyInverse(position, point);\n    matrixPool.return(globalMatrix);\n    return point;\n  }\n};\n\nexport { toLocalGlobalMixin };\n//# sourceMappingURL=toLocalGlobalMixin.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass InstructionSet {\n  constructor() {\n    /** a unique id for this instruction set used through the renderer */\n    this.uid = uid(\"instructionSet\");\n    /** the array of instructions */\n    this.instructions = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    this.instructionSize = 0;\n    this.renderables = [];\n    /** used by the garbage collector to track when the instruction set was last used */\n    this.gcTick = 0;\n  }\n  /** reset the instruction set so it can be reused set size back to 0 */\n  reset() {\n    this.instructionSize = 0;\n  }\n  /**\n   * Destroy the instruction set, clearing the instructions and renderables.\n   * @internal\n   */\n  destroy() {\n    this.instructions.length = 0;\n    this.renderables.length = 0;\n    this.renderPipes = null;\n    this.gcTick = 0;\n  }\n  /**\n   * Add an instruction to the set\n   * @param instruction - add an instruction to the set\n   */\n  add(instruction) {\n    this.instructions[this.instructionSize++] = instruction;\n  }\n  /**\n   * Log the instructions to the console (for debugging)\n   * @internal\n   */\n  log() {\n    this.instructions.length = this.instructionSize;\n    console.table(this.instructions, [\"type\", \"action\"]);\n  }\n}\n\nexport { InstructionSet };\n//# sourceMappingURL=InstructionSet.mjs.map\n","import { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\nimport { TextureStyle } from './TextureStyle.mjs';\n\n\"use strict\";\nlet count = 0;\nclass TexturePoolClass {\n  /**\n   * @param textureOptions - options that will be passed to BaseRenderTexture constructor\n   * @param {SCALE_MODE} [textureOptions.scaleMode] - See {@link SCALE_MODE} for possible values.\n   */\n  constructor(textureOptions) {\n    this._poolKeyHash = /* @__PURE__ */ Object.create(null);\n    this._texturePool = {};\n    this.textureOptions = textureOptions || {};\n    this.enableFullScreen = false;\n    this.textureStyle = new TextureStyle(this.textureOptions);\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   * @param antialias\n   */\n  createTexture(pixelWidth, pixelHeight, antialias) {\n    const textureSource = new TextureSource({\n      ...this.textureOptions,\n      width: pixelWidth,\n      height: pixelHeight,\n      resolution: 1,\n      antialias,\n      autoGarbageCollect: false\n    });\n    return new Texture({\n      source: textureSource,\n      label: `texturePool_${count++}`\n    });\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param frameWidth - The minimum width of the render texture.\n   * @param frameHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @param antialias\n   * @returns The new render texture.\n   */\n  getOptimalTexture(frameWidth, frameHeight, resolution = 1, antialias) {\n    let po2Width = Math.ceil(frameWidth * resolution - 1e-6);\n    let po2Height = Math.ceil(frameHeight * resolution - 1e-6);\n    po2Width = nextPow2(po2Width);\n    po2Height = nextPow2(po2Height);\n    const key = (po2Width << 17) + (po2Height << 1) + (antialias ? 1 : 0);\n    if (!this._texturePool[key]) {\n      this._texturePool[key] = [];\n    }\n    let texture = this._texturePool[key].pop();\n    if (!texture) {\n      texture = this.createTexture(po2Width, po2Height, antialias);\n    }\n    texture.source._resolution = resolution;\n    texture.source.width = po2Width / resolution;\n    texture.source.height = po2Height / resolution;\n    texture.source.pixelWidth = po2Width;\n    texture.source.pixelHeight = po2Height;\n    texture.frame.x = 0;\n    texture.frame.y = 0;\n    texture.frame.width = frameWidth;\n    texture.frame.height = frameHeight;\n    texture.updateUvs();\n    this._poolKeyHash[texture.uid] = key;\n    return texture;\n  }\n  /**\n   * Gets extra texture of the same size as input renderTexture\n   * @param texture - The texture to check what size it is.\n   * @param antialias - Whether to use antialias.\n   * @returns A texture that is a power of two\n   */\n  getSameSizeTexture(texture, antialias = false) {\n    const source = texture.source;\n    return this.getOptimalTexture(texture.width, texture.height, source._resolution, antialias);\n  }\n  /**\n   * Place a render texture back into the pool. Optionally reset the style of the texture to the default texture style.\n   * useful if you modified the style of the texture after getting it from the pool.\n   * @param renderTexture - The renderTexture to free\n   * @param resetStyle - Whether to reset the style of the texture to the default texture style\n   */\n  returnTexture(renderTexture, resetStyle = false) {\n    const key = this._poolKeyHash[renderTexture.uid];\n    if (resetStyle) {\n      renderTexture.source.style = this.textureStyle;\n    }\n    this._texturePool[key].push(renderTexture);\n  }\n  /**\n   * Clears the pool.\n   * @param destroyTextures - Destroy all stored textures.\n   */\n  clear(destroyTextures) {\n    destroyTextures = destroyTextures !== false;\n    if (destroyTextures) {\n      for (const i in this._texturePool) {\n        const textures = this._texturePool[i];\n        if (textures) {\n          for (let j = 0; j < textures.length; j++) {\n            textures[j].destroy(true);\n          }\n        }\n      }\n    }\n    this._texturePool = {};\n  }\n}\nconst TexturePool = new TexturePoolClass();\nGlobalResourceRegistry.register(TexturePool);\n\nexport { TexturePool, TexturePoolClass };\n//# sourceMappingURL=TexturePool.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\n\n\"use strict\";\nclass RenderGroup {\n  constructor() {\n    this.renderPipeId = \"renderGroup\";\n    this.root = null;\n    this.canBundle = false;\n    this.renderGroupParent = null;\n    this.renderGroupChildren = [];\n    this.worldTransform = new Matrix();\n    this.worldColorAlpha = 4294967295;\n    this.worldColor = 16777215;\n    this.worldAlpha = 1;\n    // these updates are transform changes..\n    this.childrenToUpdate = /* @__PURE__ */ Object.create(null);\n    this.updateTick = 0;\n    this.gcTick = 0;\n    // these update are renderable changes..\n    this.childrenRenderablesToUpdate = { list: [], index: 0 };\n    // other\n    this.structureDidChange = true;\n    this.instructionSet = new InstructionSet();\n    this._onRenderContainers = [];\n    /**\n     * Indicates if the cached texture needs to be updated.\n     * @default true\n     */\n    this.textureNeedsUpdate = true;\n    /**\n     * Indicates if the container should be cached as a texture.\n     * @default false\n     */\n    this.isCachedAsTexture = false;\n    this._matrixDirty = 7;\n  }\n  init(root) {\n    this.root = root;\n    if (root._onRender)\n      this.addOnRender(root);\n    root.didChange = true;\n    const children = root.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      child._updateFlags = 15;\n      this.addChild(child);\n    }\n  }\n  enableCacheAsTexture(options = {}) {\n    this.textureOptions = options;\n    this.isCachedAsTexture = true;\n    this.textureNeedsUpdate = true;\n  }\n  disableCacheAsTexture() {\n    this.isCachedAsTexture = false;\n    if (this.texture) {\n      TexturePool.returnTexture(this.texture, true);\n      this.texture = null;\n    }\n  }\n  updateCacheTexture() {\n    this.textureNeedsUpdate = true;\n    const cachedParent = this._parentCacheAsTextureRenderGroup;\n    if (cachedParent && !cachedParent.textureNeedsUpdate) {\n      cachedParent.updateCacheTexture();\n    }\n  }\n  reset() {\n    this.renderGroupChildren.length = 0;\n    for (const i in this.childrenToUpdate) {\n      const childrenAtDepth = this.childrenToUpdate[i];\n      childrenAtDepth.list.fill(null);\n      childrenAtDepth.index = 0;\n    }\n    this.childrenRenderablesToUpdate.index = 0;\n    this.childrenRenderablesToUpdate.list.fill(null);\n    this.root = null;\n    this.updateTick = 0;\n    this.structureDidChange = true;\n    this._onRenderContainers.length = 0;\n    this.renderGroupParent = null;\n    this.disableCacheAsTexture();\n  }\n  get localTransform() {\n    return this.root.localTransform;\n  }\n  addRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.renderGroupParent) {\n      renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n    }\n    renderGroupChild.renderGroupParent = this;\n    this.renderGroupChildren.push(renderGroupChild);\n  }\n  _removeRenderGroupChild(renderGroupChild) {\n    const index = this.renderGroupChildren.indexOf(renderGroupChild);\n    if (index > -1) {\n      this.renderGroupChildren.splice(index, 1);\n    }\n    renderGroupChild.renderGroupParent = null;\n  }\n  addChild(child) {\n    this.structureDidChange = true;\n    child.parentRenderGroup = this;\n    child.updateTick = -1;\n    if (child.parent === this.root) {\n      child.relativeRenderGroupDepth = 1;\n    } else {\n      child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n    }\n    child.didChange = true;\n    this.onChildUpdate(child);\n    if (child.renderGroup) {\n      this.addRenderGroupChild(child.renderGroup);\n      return;\n    }\n    if (child._onRender)\n      this.addOnRender(child);\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  removeChild(child) {\n    this.structureDidChange = true;\n    if (child._onRender) {\n      if (!child.renderGroup) {\n        this.removeOnRender(child);\n      }\n    }\n    child.parentRenderGroup = null;\n    if (child.renderGroup) {\n      this._removeRenderGroupChild(child.renderGroup);\n      return;\n    }\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  removeChildren(children) {\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  onChildUpdate(child) {\n    let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n        index: 0,\n        list: []\n      };\n    }\n    childrenToUpdate.list[childrenToUpdate.index++] = child;\n  }\n  updateRenderable(renderable) {\n    if (renderable.globalDisplayStatus < 7)\n      return;\n    this.instructionSet.renderPipes[renderable.renderPipeId].updateRenderable(renderable);\n    renderable.didViewUpdate = false;\n  }\n  onChildViewUpdate(child) {\n    this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n  }\n  get isRenderable() {\n    return this.root.localDisplayStatus === 7 && this.worldAlpha > 0;\n  }\n  /**\n   * adding a container to the onRender list will make sure the user function\n   * passed in to the user defined 'onRender` callBack\n   * @param container - the container to add to the onRender list\n   */\n  addOnRender(container) {\n    this._onRenderContainers.push(container);\n  }\n  removeOnRender(container) {\n    this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n  }\n  runOnRender(renderer) {\n    for (let i = 0; i < this._onRenderContainers.length; i++) {\n      this._onRenderContainers[i]._onRender(renderer);\n    }\n  }\n  destroy() {\n    this.disableCacheAsTexture();\n    this.renderGroupParent = null;\n    this.root = null;\n    this.childrenRenderablesToUpdate = null;\n    this.childrenToUpdate = null;\n    this.renderGroupChildren = null;\n    this._onRenderContainers = null;\n    this.instructionSet = null;\n  }\n  getChildren(out = []) {\n    const children = this.root.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  _getChildren(container, out = []) {\n    out.push(container);\n    if (container.renderGroup)\n      return out;\n    const children = container.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  invalidateMatrices() {\n    this._matrixDirty = 7;\n  }\n  /**\n   * Returns the inverse of the world transform matrix.\n   * @returns {Matrix} The inverse of the world transform matrix.\n   */\n  get inverseWorldTransform() {\n    if ((this._matrixDirty & 1) === 0)\n      return this._inverseWorldTransform;\n    this._matrixDirty &= ~1;\n    this._inverseWorldTransform || (this._inverseWorldTransform = new Matrix());\n    return this._inverseWorldTransform.copyFrom(this.worldTransform).invert();\n  }\n  /**\n   * Returns the inverse of the texture offset transform matrix.\n   * @returns {Matrix} The inverse of the texture offset transform matrix.\n   */\n  get textureOffsetInverseTransform() {\n    if ((this._matrixDirty & 2) === 0)\n      return this._textureOffsetInverseTransform;\n    this._matrixDirty &= ~2;\n    this._textureOffsetInverseTransform || (this._textureOffsetInverseTransform = new Matrix());\n    return this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(\n      -this._textureBounds.x,\n      -this._textureBounds.y\n    );\n  }\n  /**\n   * Returns the inverse of the parent texture transform matrix.\n   * This is used to properly transform coordinates when rendering into cached textures.\n   * @returns {Matrix} The inverse of the parent texture transform matrix.\n   */\n  get inverseParentTextureTransform() {\n    if ((this._matrixDirty & 4) === 0)\n      return this._inverseParentTextureTransform;\n    this._matrixDirty &= ~4;\n    const parentCacheAsTexture = this._parentCacheAsTextureRenderGroup;\n    if (parentCacheAsTexture) {\n      this._inverseParentTextureTransform || (this._inverseParentTextureTransform = new Matrix());\n      return this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(parentCacheAsTexture.inverseWorldTransform).translate(\n        -parentCacheAsTexture._textureBounds.x,\n        -parentCacheAsTexture._textureBounds.y\n      );\n    }\n    return this.worldTransform;\n  }\n  /**\n   * Returns a matrix that transforms coordinates to the correct coordinate space of the texture being rendered to.\n   * This is the texture offset inverse transform of the closest parent RenderGroup that is cached as a texture.\n   * @returns {Matrix | null} The transform matrix for the cached texture coordinate space,\n   * or null if no parent is cached as texture.\n   */\n  get cacheToLocalTransform() {\n    if (this.isCachedAsTexture) {\n      return this.textureOffsetInverseTransform;\n    }\n    if (!this._parentCacheAsTextureRenderGroup)\n      return null;\n    return this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform;\n  }\n}\n\nexport { RenderGroup };\n//# sourceMappingURL=RenderGroup.mjs.map\n","\"use strict\";\nfunction assignWithIgnore(target, options, ignore = {}) {\n  for (const key in options) {\n    if (!ignore[key] && options[key] !== void 0) {\n      target[key] = options[key];\n    }\n  }\n}\n\nexport { assignWithIgnore };\n//# sourceMappingURL=assignWithIgnore.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { cullingMixin } from '../../culling/cullingMixin.mjs';\nimport { extensions } from '../../extensions/Extensions.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { RAD_TO_DEG, DEG_TO_RAD } from '../../maths/misc/const.mjs';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { cacheAsTextureMixin } from './container-mixins/cacheAsTextureMixin.mjs';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin.mjs';\nimport { collectRenderablesMixin } from './container-mixins/collectRenderablesMixin.mjs';\nimport { effectsMixin } from './container-mixins/effectsMixin.mjs';\nimport { findMixin } from './container-mixins/findMixin.mjs';\nimport { getFastGlobalBoundsMixin } from './container-mixins/getFastGlobalBoundsMixin.mjs';\nimport { bgr2rgb, getGlobalMixin } from './container-mixins/getGlobalMixin.mjs';\nimport { measureMixin } from './container-mixins/measureMixin.mjs';\nimport { onRenderMixin } from './container-mixins/onRenderMixin.mjs';\nimport { sortMixin } from './container-mixins/sortMixin.mjs';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin.mjs';\nimport { RenderGroup } from './RenderGroup.mjs';\nimport { assignWithIgnore } from './utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\nconst defaultOrigin = new ObservablePoint(null);\nconst UPDATE_COLOR = 1;\nconst UPDATE_BLEND = 2;\nconst UPDATE_VISIBLE = 4;\nconst UPDATE_TRANSFORM = 8;\nclass Container extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    /**\n     * unique id for this container\n     * @internal\n     */\n    this.uid = uid(\"renderable\");\n    /** @private */\n    this._updateFlags = 15;\n    // the render group this container owns\n    /** @private */\n    this.renderGroup = null;\n    // the render group this container belongs to\n    /** @private */\n    this.parentRenderGroup = null;\n    // the index of the container in the render group\n    /** @private */\n    this.parentRenderGroupIndex = 0;\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    this.didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    this.didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    this.relativeRenderGroupDepth = 0;\n    /**\n     * The array of children of this container. Each child must be a Container or extend from it.\n     *\n     * The array is read-only, but its contents can be modified using Container methods.\n     * @example\n     * ```ts\n     * // Access children\n     * const firstChild = container.children[0];\n     * const lastChild = container.children[container.children.length - 1];\n     * ```\n     * @readonly\n     * @see {@link Container#addChild} For adding children\n     * @see {@link Container#removeChild} For removing children\n     */\n    this.children = [];\n    /**\n     * The display object container that contains this display object.\n     * This represents the parent-child relationship in the display tree.\n     * @example\n     * ```ts\n     * // Basic parent access\n     * const parent = sprite.parent;\n     *\n     * // Walk up the tree\n     * let current = sprite;\n     * while (current.parent) {\n     *     console.log('Level up:', current.parent.constructor.name);\n     *     current = current.parent;\n     * }\n     * ```\n     * @readonly\n     * @see {@link Container#addChild} For adding to a parent\n     * @see {@link Container#removeChild} For removing from parent\n     */\n    this.parent = null;\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    this.includeInBuild = true;\n    /** @private */\n    this.measurable = true;\n    /** @private */\n    this.isSimple = true;\n    // / /////////////Transform related props//////////////\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /** @internal */\n    this.updateTick = -1;\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * This matrix represents the local transformation without any parent influence.\n     * @example\n     * ```ts\n     * // Basic transform access\n     * const localMatrix = sprite.localTransform;\n     * console.log(localMatrix.toString());\n     * ```\n     * @readonly\n     * @see {@link Container#worldTransform} For global transform\n     * @see {@link Container#groupTransform} For render group transform\n     */\n    this.localTransform = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     * @advanced\n     */\n    this.relativeGroupTransform = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     * @advanced\n     */\n    this.groupTransform = this.relativeGroupTransform;\n    /**\n     * Whether this object has been destroyed. If true, the object should no longer be used.\n     * After an object is destroyed, all of its functionality is disabled and references are removed.\n     * @example\n     * ```ts\n     * // Cleanup with destroy\n     * sprite.destroy();\n     * console.log(sprite.destroyed); // true\n     * ```\n     * @default false\n     * @see {@link Container#destroy} For destroying objects\n     */\n    this.destroyed = false;\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     */\n    this._position = new ObservablePoint(this, 0, 0);\n    /**\n     * The scale factor of the object.\n     * @internal\n     */\n    this._scale = defaultScale;\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     */\n    this._pivot = defaultPivot;\n    /**\n     * The origin point around which the container rotates and scales.\n     * Unlike pivot, changing origin will not move the container's position.\n     * @private\n     */\n    this._origin = defaultOrigin;\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     */\n    this._skew = defaultSkew;\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._cx = 1;\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._sx = 0;\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._cy = 0;\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._sy = 1;\n    /**\n     * The rotation amount.\n     * @internal\n     */\n    this._rotation = 0;\n    // / COLOR related props //////////////\n    // color stored as ABGR\n    /** @internal */\n    this.localColor = 16777215;\n    /** @internal */\n    this.localAlpha = 1;\n    /** @internal */\n    this.groupAlpha = 1;\n    // A\n    /** @internal */\n    this.groupColor = 16777215;\n    // BGR\n    /** @internal */\n    this.groupColorAlpha = 4294967295;\n    // ABGR\n    // / BLEND related props //////////////\n    /** @internal */\n    this.localBlendMode = \"inherit\";\n    /** @internal */\n    this.groupBlendMode = \"normal\";\n    // / VISIBILITY related props //////////////\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = not renderable, 1 = renderable) 0b001\n     * @internal\n     */\n    this.localDisplayStatus = 7;\n    // 0b11 | 0b10 | 0b01 | 0b00\n    /** @internal */\n    this.globalDisplayStatus = 7;\n    /**\n     * A value that increments each time the containe is modified\n     * eg children added, removed etc\n     * @ignore\n     */\n    this._didContainerChangeTick = 0;\n    /**\n     * A value that increments each time the container view is modified\n     * eg texture swap, geometry change etc\n     * @ignore\n     */\n    this._didViewChangeTick = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    this._didLocalTransformChangeId = -1;\n    this.effects = [];\n    assignWithIgnore(this, options, {\n      children: true,\n      parent: true,\n      effects: true\n    });\n    options.children?.forEach((child) => this.addChild(child));\n    options.parent?.addChild(this);\n  }\n  /**\n   * Mixes all enumerable properties and methods from a source object to Container.\n   * @param source - The source of properties and methods to mix in.\n   * @deprecated since 8.8.0\n   */\n  static mixin(source) {\n    deprecation(\"8.8.0\", \"Container.mixin is deprecated, please use extensions.mixin instead.\");\n    extensions.mixin(Container, source);\n  }\n  // = 'default';\n  /**\n   * We now use the _didContainerChangeTick and _didViewChangeTick to track changes\n   * @deprecated since 8.2.6\n   * @ignore\n   */\n  set _didChangeId(value) {\n    this._didViewChangeTick = value >> 12 & 4095;\n    this._didContainerChangeTick = value & 4095;\n  }\n  /** @ignore */\n  get _didChangeId() {\n    return this._didContainerChangeTick & 4095 | (this._didViewChangeTick & 4095) << 12;\n  }\n  /**\n   * Adds one or more children to the container.\n   * The children will be rendered as part of this container's display list.\n   * @example\n   * ```ts\n   * // Add a single child\n   * container.addChild(sprite);\n   *\n   * // Add multiple children\n   * container.addChild(background, player, foreground);\n   *\n   * // Add with type checking\n   * const sprite = container.addChild<Sprite>(new Sprite(texture));\n   * sprite.tint = 'red';\n   * ```\n   * @param children - The Container(s) to add to the container\n   * @returns The first child that was added\n   * @see {@link Container#removeChild} For removing children\n   * @see {@link Container#addChildAt} For adding at specific index\n   */\n  addChild(...children) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChild: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.addChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (child.parent === this) {\n      this.children.splice(this.children.indexOf(child), 1);\n      this.children.push(child);\n      if (renderGroup) {\n        renderGroup.structureDidChange = true;\n      }\n      return child;\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    this.children.push(child);\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    child.parent = this;\n    child.didChange = true;\n    child._updateFlags = 15;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    this.emit(\"childAdded\", child, this, this.children.length - 1);\n    child.emit(\"added\", this);\n    this._didViewChangeTick++;\n    if (child._zIndex !== 0) {\n      child.depthOfChildModified();\n    }\n    return child;\n  }\n  /**\n   * Removes one or more children from the container.\n   * When removing multiple children, events will be triggered for each child in sequence.\n   * @example\n   * ```ts\n   * // Remove a single child\n   * const removed = container.removeChild(sprite);\n   *\n   * // Remove multiple children\n   * const bg = container.removeChild(background, player, userInterface);\n   *\n   * // Remove with type checking\n   * const sprite = container.removeChild<Sprite>(childSprite);\n   * sprite.texture = newTexture;\n   * ```\n   * @param children - The Container(s) to remove\n   * @returns The first child that was removed\n   * @see {@link Container#addChild} For adding children\n   * @see {@link Container#removeChildren} For removing multiple children\n   */\n  removeChild(...children) {\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this._didViewChangeTick++;\n      this.children.splice(index, 1);\n      if (this.renderGroup) {\n        this.renderGroup.removeChild(child);\n      } else if (this.parentRenderGroup) {\n        this.parentRenderGroup.removeChild(child);\n      }\n      if (child.parentRenderLayer) {\n        child.parentRenderLayer.detach(child);\n      }\n      child.parent = null;\n      this.emit(\"childRemoved\", child, this, index);\n      child.emit(\"removed\", this);\n    }\n    return child;\n  }\n  /** @ignore */\n  _onUpdate(point) {\n    if (point) {\n      if (point === this._skew) {\n        this._updateSkew();\n      }\n    }\n    this._didContainerChangeTick++;\n    if (this.didChange)\n      return;\n    this.didChange = true;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.onChildUpdate(this);\n    }\n  }\n  set isRenderGroup(value) {\n    if (!!this.renderGroup === value)\n      return;\n    if (value) {\n      this.enableRenderGroup();\n    } else {\n      this.disableRenderGroup();\n    }\n  }\n  /**\n   * Returns true if this container is a render group.\n   * This means that it will be rendered as a separate pass, with its own set of instructions\n   * @advanced\n   */\n  get isRenderGroup() {\n    return !!this.renderGroup;\n  }\n  /**\n   * Calling this enables a render group for this container.\n   * This means it will be rendered as a separate set of instructions.\n   * The transform of the container will also be handled on the GPU rather than the CPU.\n   * @advanced\n   */\n  enableRenderGroup() {\n    if (this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    this.renderGroup = BigPool.get(RenderGroup, this);\n    this.groupTransform = Matrix.IDENTITY;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /**\n   * This will disable the render group for this container.\n   * @advanced\n   */\n  disableRenderGroup() {\n    if (!this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    BigPool.return(this.renderGroup);\n    this.renderGroup = null;\n    this.groupTransform = this.relativeGroupTransform;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /** @ignore */\n  _updateIsSimple() {\n    this.isSimple = !this.renderGroup && this.effects.length === 0;\n  }\n  /**\n   * Current transform of the object based on world (parent) factors.\n   *\n   * This matrix represents the absolute transformation in the scene graph.\n   * @example\n   * ```ts\n   * // Get world position\n   * const worldPos = container.worldTransform;\n   * console.log(`World position: (${worldPos.tx}, ${worldPos.ty})`);\n   * ```\n   * @readonly\n   * @see {@link Container#localTransform} For local space transform\n   */\n  get worldTransform() {\n    this._worldTransform || (this._worldTransform = new Matrix());\n    if (this.renderGroup) {\n      this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n    } else if (this.parentRenderGroup) {\n      this._worldTransform.appendFrom(this.relativeGroupTransform, this.parentRenderGroup.worldTransform);\n    }\n    return this._worldTransform;\n  }\n  /**\n   * The position of the container on the x axis relative to the local coordinates of the parent.\n   *\n   * An alias to position.x\n   * @example\n   * ```ts\n   * // Basic position\n   * container.x = 100;\n   * ```\n   */\n  get x() {\n    return this._position.x;\n  }\n  set x(value) {\n    this._position.x = value;\n  }\n  /**\n   * The position of the container on the y axis relative to the local coordinates of the parent.\n   *\n   * An alias to position.y\n   * @example\n   * ```ts\n   * // Basic position\n   * container.y = 200;\n   * ```\n   */\n  get y() {\n    return this._position.y;\n  }\n  set y(value) {\n    this._position.y = value;\n  }\n  /**\n   * The coordinate of the object relative to the local coordinates of the parent.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * container.position.set(100, 200);\n   * container.position.set(100); // Sets both x and y to 100\n   * // Using point data\n   * container.position = { x: 50, y: 75 };\n   * ```\n   * @since 4.0.0\n   */\n  get position() {\n    return this._position;\n  }\n  set position(value) {\n    this._position.copyFrom(value);\n  }\n  /**\n   * The rotation of the object in radians.\n   *\n   * > [!NOTE] 'rotation' and 'angle' have the same effect on a display object;\n   * > rotation is in radians, angle is in degrees.\n   * @example\n   * ```ts\n   * // Basic rotation\n   * container.rotation = Math.PI / 4; // 45 degrees\n   *\n   * // Convert from degrees\n   * const degrees = 45;\n   * container.rotation = degrees * Math.PI / 180;\n   *\n   * // Rotate around center\n   * container.pivot.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // 180 degrees\n   *\n   * // Rotate around center with origin\n   * container.origin.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // 180 degrees\n   * ```\n   */\n  get rotation() {\n    return this._rotation;\n  }\n  set rotation(value) {\n    if (this._rotation !== value) {\n      this._rotation = value;\n      this._onUpdate(this._skew);\n    }\n  }\n  /**\n   * The angle of the object in degrees.\n   *\n   * > [!NOTE] 'rotation' and 'angle' have the same effect on a display object;\n   * > rotation is in radians, angle is in degrees.\n   * @example\n   * ```ts\n   * // Basic angle rotation\n   * sprite.angle = 45; // 45 degrees\n   *\n   * // Rotate around center\n   * sprite.pivot.set(sprite.width / 2, sprite.height / 2);\n   * sprite.angle = 180; // Half rotation\n   *\n   * // Rotate around center with origin\n   * sprite.origin.set(sprite.width / 2, sprite.height / 2);\n   * sprite.angle = 180; // Half rotation\n   *\n   * // Reset rotation\n   * sprite.angle = 0;\n   * ```\n   */\n  get angle() {\n    return this.rotation * RAD_TO_DEG;\n  }\n  set angle(value) {\n    this.rotation = value * DEG_TO_RAD;\n  }\n  /**\n   * The center of rotation, scaling, and skewing for this display object in its local space.\n   * The `position` is the projection of `pivot` in the parent's local space.\n   *\n   * By default, the pivot is the origin (0, 0).\n   * @example\n   * ```ts\n   * // Rotate around center\n   * container.pivot.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // Rotates around center\n   * ```\n   * @since 4.0.0\n   */\n  get pivot() {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    return this._pivot;\n  }\n  set pivot(value) {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n      if (this._origin !== defaultOrigin) {\n        warn(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`);\n      }\n    }\n    typeof value === \"number\" ? this._pivot.set(value) : this._pivot.copyFrom(value);\n  }\n  /**\n   * The skew factor for the object in radians. Skewing is a transformation that distorts\n   * the object by rotating it differently at each point, creating a non-uniform shape.\n   * @example\n   * ```ts\n   * // Basic skewing\n   * container.skew.set(0.5, 0); // Skew horizontally\n   * container.skew.set(0, 0.5); // Skew vertically\n   *\n   * // Skew with point data\n   * container.skew = { x: 0.3, y: 0.3 }; // Diagonal skew\n   *\n   * // Reset skew\n   * container.skew.set(0, 0);\n   *\n   * // Animate skew\n   * app.ticker.add(() => {\n   *     // Create wave effect\n   *     container.skew.x = Math.sin(Date.now() / 1000) * 0.3;\n   * });\n   *\n   * // Combine with rotation\n   * container.rotation = Math.PI / 4; // 45 degrees\n   * container.skew.set(0.2, 0.2); // Skew the rotated object\n   * ```\n   * @since 4.0.0\n   * @type {ObservablePoint} Point-like object with x/y properties in radians\n   * @default {x: 0, y: 0}\n   */\n  get skew() {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    return this._skew;\n  }\n  set skew(value) {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    this._skew.copyFrom(value);\n  }\n  /**\n   * The scale factors of this object along the local coordinate axes.\n   *\n   * The default scale is (1, 1).\n   * @example\n   * ```ts\n   * // Basic scaling\n   * container.scale.set(2, 2); // Scales to double size\n   * container.scale.set(2); // Scales uniformly to double size\n   * container.scale = 2; // Scales uniformly to double size\n   * // Scale to a specific width and height\n   * container.setSize(200, 100); // Sets width to 200 and height to 100\n   * ```\n   * @since 4.0.0\n   */\n  get scale() {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 1, 1);\n    }\n    return this._scale;\n  }\n  set scale(value) {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 0, 0);\n    }\n    if (typeof value === \"string\") {\n      value = parseFloat(value);\n    }\n    typeof value === \"number\" ? this._scale.set(value) : this._scale.copyFrom(value);\n  }\n  /**\n   * @experimental\n   * The origin point around which the container rotates and scales without affecting its position.\n   * Unlike pivot, changing the origin will not move the container's position.\n   * @example\n   * ```ts\n   * // Rotate around center point\n   * container.origin.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // Rotates around center\n   *\n   * // Reset origin\n   * container.origin.set(0, 0);\n   * ```\n   */\n  get origin() {\n    if (this._origin === defaultOrigin) {\n      this._origin = new ObservablePoint(this, 0, 0);\n    }\n    return this._origin;\n  }\n  set origin(value) {\n    if (this._origin === defaultOrigin) {\n      this._origin = new ObservablePoint(this, 0, 0);\n      if (this._pivot !== defaultPivot) {\n        warn(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`);\n      }\n    }\n    typeof value === \"number\" ? this._origin.set(value) : this._origin.copyFrom(value);\n  }\n  /**\n   * The width of the Container, setting this will actually modify the scale to achieve the value set.\n   * > [!NOTE] Changing the width will adjust the scale.x property of the container while maintaining its aspect ratio.\n   * > [!NOTE] If you want to set both width and height at the same time, use {@link Container#setSize}\n   * as it is more optimized by not recalculating the local bounds twice.\n   * @example\n   * ```ts\n   * // Basic width setting\n   * container.width = 100;\n   * // Optimized width setting\n   * container.setSize(100, 100);\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x * this.getLocalBounds().width);\n  }\n  set width(value) {\n    const localWidth = this.getLocalBounds().width;\n    this._setWidth(value, localWidth);\n  }\n  /**\n   * The height of the Container,\n   * > [!NOTE] Changing the height will adjust the scale.y property of the container while maintaining its aspect ratio.\n   * > [!NOTE] If you want to set both width and height at the same time, use {@link Container#setSize}\n   * as it is more optimized by not recalculating the local bounds twice.\n   * @example\n   * ```ts\n   * // Basic height setting\n   * container.height = 200;\n   * // Optimized height setting\n   * container.setSize(100, 200);\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y * this.getLocalBounds().height);\n  }\n  set height(value) {\n    const localHeight = this.getLocalBounds().height;\n    this._setHeight(value, localHeight);\n  }\n  /**\n   * Retrieves the size of the container as a [Size]{@link Size} object.\n   *\n   * This is faster than get the width and height separately.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const size = container.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * container.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in.\n   * @returns The size of the container.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    const bounds = this.getLocalBounds();\n    out.width = Math.abs(this.scale.x * bounds.width);\n    out.height = Math.abs(this.scale.y * bounds.height);\n    return out;\n  }\n  /**\n   * Sets the size of the container to the specified width and height.\n   * This is more efficient than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * container.setSize(100, 200);\n   *\n   * // Set uniform size\n   * container.setSize(100); // Sets both width and height to 100\n   * ```\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    const size = this.getLocalBounds();\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, size.width);\n    height !== void 0 && this._setHeight(height, size.height);\n  }\n  /** Called when the skew or the rotation changes. */\n  _updateSkew() {\n    const rotation = this._rotation;\n    const skew = this._skew;\n    this._cx = Math.cos(rotation + skew._y);\n    this._sx = Math.sin(rotation + skew._y);\n    this._cy = -Math.sin(rotation - skew._x);\n    this._sy = Math.cos(rotation - skew._x);\n  }\n  /**\n   * Updates the transform properties of the container.\n   * Allows partial updates of transform properties for optimized manipulation.\n   * @example\n   * ```ts\n   * // Basic transform update\n   * container.updateTransform({\n   *     x: 100,\n   *     y: 200,\n   *     rotation: Math.PI / 4\n   * });\n   *\n   * // Scale and rotate around center\n   * sprite.updateTransform({\n   *     pivotX: sprite.width / 2,\n   *     pivotY: sprite.height / 2,\n   *     scaleX: 2,\n   *     scaleY: 2,\n   *     rotation: Math.PI\n   * });\n   *\n   * // Update position only\n   * button.updateTransform({\n   *     x: button.x + 10, // Move right\n   *     y: button.y      // Keep same y\n   * });\n   * ```\n   * @param opts - Transform options to update\n   * @param opts.x - The x position\n   * @param opts.y - The y position\n   * @param opts.scaleX - The x-axis scale factor\n   * @param opts.scaleY - The y-axis scale factor\n   * @param opts.rotation - The rotation in radians\n   * @param opts.skewX - The x-axis skew factor\n   * @param opts.skewY - The y-axis skew factor\n   * @param opts.pivotX - The x-axis pivot point\n   * @param opts.pivotY - The y-axis pivot point\n   * @returns This container, for chaining\n   * @see {@link Container#setFromMatrix} For matrix-based transforms\n   * @see {@link Container#position} For direct position access\n   */\n  updateTransform(opts) {\n    this.position.set(\n      typeof opts.x === \"number\" ? opts.x : this.position.x,\n      typeof opts.y === \"number\" ? opts.y : this.position.y\n    );\n    this.scale.set(\n      typeof opts.scaleX === \"number\" ? opts.scaleX || 1 : this.scale.x,\n      typeof opts.scaleY === \"number\" ? opts.scaleY || 1 : this.scale.y\n    );\n    this.rotation = typeof opts.rotation === \"number\" ? opts.rotation : this.rotation;\n    this.skew.set(\n      typeof opts.skewX === \"number\" ? opts.skewX : this.skew.x,\n      typeof opts.skewY === \"number\" ? opts.skewY : this.skew.y\n    );\n    this.pivot.set(\n      typeof opts.pivotX === \"number\" ? opts.pivotX : this.pivot.x,\n      typeof opts.pivotY === \"number\" ? opts.pivotY : this.pivot.y\n    );\n    this.origin.set(\n      typeof opts.originX === \"number\" ? opts.originX : this.origin.x,\n      typeof opts.originY === \"number\" ? opts.originY : this.origin.y\n    );\n    return this;\n  }\n  /**\n   * Updates the local transform properties by decomposing the given matrix.\n   * Extracts position, scale, rotation, and skew from a transformation matrix.\n   * @example\n   * ```ts\n   * // Basic matrix transform\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4)\n   *     .scale(2, 2);\n   *\n   * container.setFromMatrix(matrix);\n   *\n   * // Copy transform from another container\n   * const source = new Container();\n   * source.position.set(100, 100);\n   * source.rotation = Math.PI / 2;\n   *\n   * target.setFromMatrix(source.localTransform);\n   *\n   * // Reset transform\n   * container.setFromMatrix(Matrix.IDENTITY);\n   * ```\n   * @param matrix - The matrix to use for updating the transform\n   * @see {@link Container#updateTransform} For property-based updates\n   * @see {@link Matrix#decompose} For matrix decomposition details\n   */\n  setFromMatrix(matrix) {\n    matrix.decompose(this);\n  }\n  /** Updates the local transform. */\n  updateLocalTransform() {\n    const localTransformChangeId = this._didContainerChangeTick;\n    if (this._didLocalTransformChangeId === localTransformChangeId)\n      return;\n    this._didLocalTransformChangeId = localTransformChangeId;\n    const lt = this.localTransform;\n    const scale = this._scale;\n    const pivot = this._pivot;\n    const origin = this._origin;\n    const position = this._position;\n    const sx = scale._x;\n    const sy = scale._y;\n    const px = pivot._x;\n    const py = pivot._y;\n    const ox = -origin._x;\n    const oy = -origin._y;\n    lt.a = this._cx * sx;\n    lt.b = this._sx * sx;\n    lt.c = this._cy * sy;\n    lt.d = this._sy * sy;\n    lt.tx = position._x - (px * lt.a + py * lt.c) + (ox * lt.a + oy * lt.c) - ox;\n    lt.ty = position._y - (px * lt.b + py * lt.d) + (ox * lt.b + oy * lt.d) - oy;\n  }\n  // / ///// color related stuff\n  set alpha(value) {\n    if (value === this.localAlpha)\n      return;\n    this.localAlpha = value;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The opacity of the object relative to its parent's opacity.\n   * Value ranges from 0 (fully transparent) to 1 (fully opaque).\n   * @example\n   * ```ts\n   * // Basic transparency\n   * sprite.alpha = 0.5; // 50% opacity\n   *\n   * // Inherited opacity\n   * container.alpha = 0.5;\n   * const child = new Sprite(texture);\n   * child.alpha = 0.5;\n   * container.addChild(child);\n   * // child's effective opacity is 0.25 (0.5 * 0.5)\n   * ```\n   * @default 1\n   * @see {@link Container#visible} For toggling visibility\n   * @see {@link Container#renderable} For render control\n   */\n  get alpha() {\n    return this.localAlpha;\n  }\n  set tint(value) {\n    const tempColor = Color.shared.setValue(value ?? 16777215);\n    const bgr = tempColor.toBgrNumber();\n    if (bgr === this.localColor)\n      return;\n    this.localColor = bgr;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The tint applied to the sprite.\n   *\n   * This can be any valid {@link ColorSource}.\n   * @example\n   * ```ts\n   * // Basic color tinting\n   * container.tint = 0xff0000; // Red tint\n   * container.tint = 'red';    // Same as above\n   * container.tint = '#00ff00'; // Green\n   * container.tint = 'rgb(0,0,255)'; // Blue\n   *\n   * // Remove tint\n   * container.tint = 0xffffff; // White = no tint\n   * container.tint = null;     // Also removes tint\n   * ```\n   * @default 0xFFFFFF\n   * @see {@link Container#alpha} For transparency\n   * @see {@link Container#visible} For visibility control\n   */\n  get tint() {\n    return bgr2rgb(this.localColor);\n  }\n  // / //////////////// blend related stuff\n  set blendMode(value) {\n    if (this.localBlendMode === value)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_BLEND;\n    this.localBlendMode = value;\n    this._onUpdate();\n  }\n  /**\n   * The blend mode to be applied to the sprite. Controls how pixels are blended when rendering.\n   *\n   * Setting to 'normal' will reset to default blending.\n   * > [!NOTE] More blend modes are available after importing the `pixi.js/advanced-blend-modes` sub-export.\n   * @example\n   * ```ts\n   * // Basic blend modes\n   * sprite.blendMode = 'add';        // Additive blending\n   * sprite.blendMode = 'multiply';   // Multiply colors\n   * sprite.blendMode = 'screen';     // Screen blend\n   *\n   * // Reset blend mode\n   * sprite.blendMode = 'normal';     // Normal blending\n   * ```\n   * @default 'normal'\n   * @see {@link Container#alpha} For transparency\n   * @see {@link Container#tint} For color adjustments\n   */\n  get blendMode() {\n    return this.localBlendMode;\n  }\n  // / ///////// VISIBILITY / RENDERABLE /////////////////\n  /**\n   * The visibility of the object. If false the object will not be drawn,\n   * and the transform will not be updated.\n   * @example\n   * ```ts\n   * // Basic visibility toggle\n   * sprite.visible = false; // Hide sprite\n   * sprite.visible = true;  // Show sprite\n   * ```\n   * @default true\n   * @see {@link Container#renderable} For render-only control\n   * @see {@link Container#alpha} For transparency\n   */\n  get visible() {\n    return !!(this.localDisplayStatus & 2);\n  }\n  set visible(value) {\n    const valueNumber = value ? 2 : 0;\n    if ((this.localDisplayStatus & 2) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 2;\n    this._onUpdate();\n  }\n  /** @ignore */\n  get culled() {\n    return !(this.localDisplayStatus & 4);\n  }\n  /** @ignore */\n  set culled(value) {\n    const valueNumber = value ? 0 : 4;\n    if ((this.localDisplayStatus & 4) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 4;\n    this._onUpdate();\n  }\n  /**\n   * Controls whether this object can be rendered. If false the object will not be drawn,\n   * but the transform will still be updated. This is different from visible, which skips\n   * transform updates.\n   * @example\n   * ```ts\n   * // Basic render control\n   * sprite.renderable = false; // Skip rendering\n   * sprite.renderable = true;  // Enable rendering\n   * ```\n   * @default true\n   * @see {@link Container#visible} For skipping transform updates\n   * @see {@link Container#alpha} For transparency\n   */\n  get renderable() {\n    return !!(this.localDisplayStatus & 1);\n  }\n  set renderable(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 1) === valueNumber)\n      return;\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 1;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._onUpdate();\n  }\n  /**\n   * Whether or not the object should be rendered.\n   * @advanced\n   */\n  get isRenderable() {\n    return this.localDisplayStatus === 7 && this.groupAlpha > 0;\n  }\n  /**\n   * Removes all internal references and listeners as well as removes children from the display list.\n   * Do not use a Container after calling `destroy`.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * ```ts\n   * container.destroy();\n   * container.destroy(true);\n   * container.destroy({ children: true });\n   * container.destroy({ children: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options = false) {\n    if (this.destroyed)\n      return;\n    this.destroyed = true;\n    let oldChildren;\n    if (this.children.length) {\n      oldChildren = this.removeChildren(0, this.children.length);\n    }\n    this.removeFromParent();\n    this.parent = null;\n    this._maskEffect = null;\n    this._filterEffect = null;\n    this.effects = null;\n    this._position = null;\n    this._scale = null;\n    this._pivot = null;\n    this._origin = null;\n    this._skew = null;\n    this.emit(\"destroyed\", this);\n    this.removeAllListeners();\n    const destroyChildren = typeof options === \"boolean\" ? options : options?.children;\n    if (destroyChildren && oldChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n    this.renderGroup?.destroy();\n    this.renderGroup = null;\n  }\n}\nextensions.mixin(\n  Container,\n  childrenHelperMixin,\n  getFastGlobalBoundsMixin,\n  toLocalGlobalMixin,\n  onRenderMixin,\n  measureMixin,\n  effectsMixin,\n  findMixin,\n  sortMixin,\n  cullingMixin,\n  cacheAsTextureMixin,\n  getGlobalMixin,\n  collectRenderablesMixin\n);\n\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE };\n//# sourceMappingURL=Container.mjs.map\n","import { Bounds } from '../container/bounds/Bounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass ViewContainer extends Container {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(options) {\n    super(options);\n    /** @internal */\n    this.canBundle = true;\n    /** @internal */\n    this.allowChildren = false;\n    /** @internal */\n    this._roundPixels = 0;\n    /** @internal */\n    this._lastUsed = -1;\n    /** @internal */\n    this._gpuData = /* @__PURE__ */ Object.create(null);\n    this._bounds = new Bounds(0, 1, 0, 0);\n    this._boundsDirty = true;\n  }\n  /**\n   * The local bounds of the view in its own coordinate space.\n   * Bounds are automatically updated when the view's content changes.\n   * @example\n   * ```ts\n   * // Get bounds dimensions\n   * const bounds = view.bounds;\n   * console.log(`Width: ${bounds.maxX - bounds.minX}`);\n   * console.log(`Height: ${bounds.maxY - bounds.minY}`);\n   * ```\n   * @returns The rectangular bounds of the view\n   * @see {@link Bounds} For bounds operations\n   */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this.updateBounds();\n    this._boundsDirty = false;\n    return this._bounds;\n  }\n  /**\n   * Whether or not to round the x/y position of the sprite.\n   * @example\n   * ```ts\n   * // Enable pixel rounding for crisp rendering\n   * view.roundPixels = true;\n   * ```\n   * @default false\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /**\n   * Checks if the object contains the given point in local coordinates.\n   * Uses the view's bounds for hit testing.\n   * @example\n   * ```ts\n   * // Basic point check\n   * const localPoint = { x: 50, y: 25 };\n   * const contains = view.containsPoint(localPoint);\n   * console.log('Point is inside:', contains);\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is within the view's bounds\n   * @see {@link ViewContainer#bounds} For the bounds used in hit testing\n   * @see {@link Container#toLocal} For converting global coordinates to local\n   */\n  containsPoint(point) {\n    const bounds = this.bounds;\n    const { x, y } = point;\n    return x >= bounds.minX && x <= bounds.maxX && y >= bounds.minY && y <= bounds.maxY;\n  }\n  /** @private */\n  onViewUpdate() {\n    this._didViewChangeTick++;\n    this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.onChildViewUpdate(this);\n    }\n  }\n  destroy(options) {\n    super.destroy(options);\n    this._bounds = null;\n    for (const key in this._gpuData) {\n      this._gpuData[key].destroy?.();\n    }\n    this._gpuData = null;\n  }\n  /**\n   * Collects renderables for the view container.\n   * @param instructionSet - The instruction set to collect renderables for.\n   * @param renderer - The renderer to collect renderables for.\n   * @param currentLayer - The current render layer.\n   * @internal\n   */\n  collectRenderablesSimple(instructionSet, renderer, currentLayer) {\n    const { renderPipes } = renderer;\n    renderPipes.blendMode.pushBlendMode(this, this.groupBlendMode, instructionSet);\n    const rp = renderPipes;\n    rp[this.renderPipeId].addRenderable(this, instructionSet);\n    this.didViewUpdate = false;\n    const children = this.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      children[i].collectRenderables(instructionSet, renderer, currentLayer);\n    }\n    renderPipes.blendMode.popBlendMode(instructionSet);\n  }\n}\n\nexport { ViewContainer };\n//# sourceMappingURL=ViewContainer.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { deprecation } from '../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../view/ViewContainer.mjs';\n\n\"use strict\";\nclass Sprite extends ViewContainer {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = Texture.EMPTY) {\n    if (options instanceof Texture) {\n      options = { texture: options };\n    }\n    const { texture = Texture.EMPTY, anchor, roundPixels, width, height, ...rest } = options;\n    super({\n      label: \"Sprite\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"sprite\";\n    /** @internal */\n    this.batched = true;\n    this._visualBounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor) {\n      this.anchor = anchor;\n    } else if (texture.defaultAnchor) {\n      this.anchor = texture.defaultAnchor;\n    }\n    this.texture = texture;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * Creates a new sprite based on a source texture, image, video, or canvas element.\n   * This is a convenience method that automatically creates and manages textures.\n   * @example\n   * ```ts\n   * // Create from path or URL\n   * const sprite = Sprite.from('assets/image.png');\n   *\n   * // Create from existing texture\n   * const sprite = Sprite.from(texture);\n   *\n   * // Create from canvas\n   * const canvas = document.createElement('canvas');\n   * const sprite = Sprite.from(canvas, true); // Skip caching new texture\n   * ```\n   * @param source - The source to create the sprite from. Can be a path to an image, a texture,\n   * or any valid texture source (canvas, video, etc.)\n   * @param skipCache - Whether to skip adding to the texture cache when creating a new texture\n   * @returns A new sprite based on the source\n   * @see {@link Texture.from} For texture creation details\n   * @see {@link Assets} For asset loading and management\n   */\n  static from(source, skipCache = false) {\n    if (source instanceof Texture) {\n      return new Sprite(source);\n    }\n    return new Sprite(Texture.from(source, skipCache));\n  }\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    this._texture = value;\n    if (this._width) {\n      this._setWidth(this._width, this._texture.orig.width);\n    }\n    if (this._height) {\n      this._setHeight(this._height, this._texture.orig.height);\n    }\n    this.onViewUpdate();\n  }\n  /**\n   * The texture that is displayed by the sprite. When changed, automatically updates\n   * the sprite dimensions and manages texture event listeners.\n   * @example\n   * ```ts\n   * // Create sprite with texture\n   * const sprite = new Sprite({\n   *     texture: Texture.from('sprite.png')\n   * });\n   *\n   * // Update texture\n   * sprite.texture = Texture.from('newSprite.png');\n   *\n   * // Use texture from spritesheet\n   * const sheet = await Assets.load('spritesheet.json');\n   * sprite.texture = sheet.textures['frame1.png'];\n   *\n   * // Reset to empty texture\n   * sprite.texture = Texture.EMPTY;\n   * ```\n   * @see {@link Texture} For texture creation and management\n   * @see {@link Assets} For asset loading\n   */\n  get texture() {\n    return this._texture;\n  }\n  /**\n   * The bounds of the sprite, taking into account the texture's trim area.\n   * @example\n   * ```ts\n   * const texture = new Texture({\n   *     source: new TextureSource({ width: 300, height: 300 }),\n   *     frame: new Rectangle(196, 66, 58, 56),\n   *     trim: new Rectangle(4, 4, 58, 56),\n   *     orig: new Rectangle(0, 0, 64, 64),\n   *     rotate: 2,\n   * });\n   * const sprite = new Sprite(texture);\n   * const visualBounds = sprite.visualBounds;\n   * // console.log(visualBounds); // { minX: -4, maxX: 62, minY: -4, maxY: 60 }\n   */\n  get visualBounds() {\n    updateQuadBounds(this._visualBounds, this._anchor, this._texture);\n    return this._visualBounds;\n  }\n  /**\n   * @deprecated\n   * @ignore\n   */\n  get sourceBounds() {\n    deprecation(\"8.6.1\", \"Sprite.sourceBounds is deprecated, use visualBounds instead.\");\n    return this.visualBounds;\n  }\n  /** @private */\n  updateBounds() {\n    const anchor = this._anchor;\n    const texture = this._texture;\n    const bounds = this._bounds;\n    const { width, height } = texture.orig;\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * sprite.destroy();\n   * sprite.destroy(true);\n   * sprite.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._texture = null;\n    this._visualBounds = null;\n    this._bounds = null;\n    this._anchor = null;\n    this._gpuData = null;\n  }\n  /**\n   * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n   * and passed to the constructor.\n   *\n   * - The default is `(0,0)`, this means the sprite's origin is the top left.\n   * - Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n   * - Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * ```ts\n   * // Center the anchor point\n   * sprite.anchor = 0.5; // Sets both x and y to 0.5\n   * sprite.position.set(400, 300); // Sprite will be centered at this position\n   *\n   * // Set specific x/y anchor points\n   * sprite.anchor = {\n   *     x: 1, // Right edge\n   *     y: 0  // Top edge\n   * };\n   *\n   * // Using individual coordinates\n   * sprite.anchor.set(0.5, 1); // Center-bottom\n   *\n   * // For rotation around center\n   * sprite.anchor.set(0.5);\n   * sprite.rotation = Math.PI / 4; // 45 degrees around center\n   *\n   * // For scaling from center\n   * sprite.anchor.set(0.5);\n   * sprite.scale.set(2); // Scales from center point\n   * ```\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   * The width of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set width directly\n   * sprite.width = 200;\n   * console.log(sprite.scale.x); // Scale adjusted to match width\n   *\n   * // Set width while preserving aspect ratio\n   * const ratio = sprite.height / sprite.width;\n   * sprite.width = 300;\n   * sprite.height = 300 * ratio;\n   *\n   * // For better performance when setting both width and height\n   * sprite.setSize(300, 400); // Avoids recalculating bounds twice\n   *\n   * // Reset to original texture size\n   * sprite.width = sprite.texture.orig.width;\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x) * this._texture.orig.width;\n  }\n  set width(value) {\n    this._setWidth(value, this._texture.orig.width);\n    this._width = value;\n  }\n  /**\n   * The height of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set height directly\n   * sprite.height = 150;\n   * console.log(sprite.scale.y); // Scale adjusted to match height\n   *\n   * // Set height while preserving aspect ratio\n   * const ratio = sprite.width / sprite.height;\n   * sprite.height = 200;\n   * sprite.width = 200 * ratio;\n   *\n   * // For better performance when setting both width and height\n   * sprite.setSize(300, 400); // Avoids recalculating bounds twice\n   *\n   * // Reset to original texture size\n   * sprite.height = sprite.texture.orig.height;\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y) * this._texture.orig.height;\n  }\n  set height(value) {\n    this._setHeight(value, this._texture.orig.height);\n    this._height = value;\n  }\n  /**\n   * Retrieves the size of the Sprite as a [Size]{@link Size} object based on the texture dimensions and scale.\n   * This is faster than getting width and height separately as it only calculates the bounds once.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const sprite = new Sprite(Texture.from('sprite.png'));\n   * const size = sprite.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * sprite.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in, to avoid allocating a new object\n   * @returns The size of the Sprite\n   * @see {@link Sprite#width} For getting just the width\n   * @see {@link Sprite#height} For getting just the height\n   * @see {@link Sprite#setSize} For setting both width and height\n   */\n  getSize(out) {\n    out || (out = {});\n    out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n    out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Sprite to the specified width and height.\n   * This is faster than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * const sprite = new Sprite(Texture.from('sprite.png'));\n   * sprite.setSize(100, 200); // Width: 100, Height: 200\n   *\n   * // Set uniform size\n   * sprite.setSize(100); // Sets both width and height to 100\n   *\n   * // Set size with object\n   * sprite.setSize({\n   *     width: 200,\n   *     height: 300\n   * });\n   *\n   * // Reset to texture size\n   * sprite.setSize(\n   *     sprite.texture.orig.width,\n   *     sprite.texture.orig.height\n   * );\n   * ```\n   * @param value - This can be either a number or a {@link Size} object\n   * @param height - The height to set. Defaults to the value of `width` if not provided\n   * @see {@link Sprite#width} For setting width only\n   * @see {@link Sprite#height} For setting height only\n   * @see {@link Sprite#texture} For the source dimensions\n   */\n  setSize(value, height) {\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, this._texture.orig.width);\n    height !== void 0 && this._setHeight(height, this._texture.orig.height);\n  }\n}\n\nexport { Sprite };\n//# sourceMappingURL=Sprite.mjs.map\n","import { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction addMaskBounds(mask, bounds, skipUpdateTransform) {\n  const boundsToMask = tempBounds;\n  mask.measurable = true;\n  getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n  bounds.addBoundsMask(boundsToMask);\n  mask.measurable = false;\n}\n\nexport { addMaskBounds };\n//# sourceMappingURL=addMaskBounds.mjs.map\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds.mjs';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addMaskLocalBounds(mask, bounds, localRoot) {\n  const boundsToMask = boundsPool.get();\n  mask.measurable = true;\n  const tempMatrix = matrixPool.get().identity();\n  const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n  getLocalBounds(mask, boundsToMask, relativeMask);\n  mask.measurable = false;\n  bounds.addBoundsMask(boundsToMask);\n  matrixPool.return(tempMatrix);\n  boundsPool.return(boundsToMask);\n}\nfunction getMatrixRelativeToParent(target, root, matrix) {\n  if (!target) {\n    warn(\"Mask bounds, renderable is not inside the root container\");\n    return matrix;\n  }\n  if (target !== root) {\n    getMatrixRelativeToParent(target.parent, root, matrix);\n    target.updateLocalTransform();\n    matrix.append(target.localTransform);\n  }\n  return matrix;\n}\n\nexport { addMaskLocalBounds };\n//# sourceMappingURL=addMaskLocalBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass AlphaMask {\n  constructor(options) {\n    this.priority = 0;\n    this.inverse = false;\n    this.pipe = \"alphaMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.renderMaskToTexture = !(mask instanceof Sprite);\n    this.mask.renderable = this.renderMaskToTexture;\n    this.mask.includeInBuild = !this.renderMaskToTexture;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    if (!this.inverse) {\n      addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Sprite;\n  }\n}\nAlphaMask.extension = ExtensionType.MaskEffect;\n\nexport { AlphaMask };\n//# sourceMappingURL=AlphaMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"colorMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n  }\n  destroy() {\n  }\n  static test(mask) {\n    return typeof mask === \"number\";\n  }\n}\nColorMask.extension = ExtensionType.MaskEffect;\n\nexport { ColorMask };\n//# sourceMappingURL=ColorMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Container } from '../../../scene/container/Container.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass StencilMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"stencilMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.mask.includeInBuild = false;\n    this.mask.measurable = false;\n  }\n  reset() {\n    this.mask.measurable = true;\n    this.mask.includeInBuild = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Container;\n  }\n}\nStencilMask.extension = ExtensionType.MaskEffect;\n\nexport { StencilMask };\n//# sourceMappingURL=StencilMask.mjs.map\n","\"use strict\";\nconst BrowserAdapter = {\n  createCanvas: (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  },\n  createImage: () => new Image(),\n  getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n  getWebGLRenderingContext: () => WebGLRenderingContext,\n  getNavigator: () => navigator,\n  getBaseUrl: () => document.baseURI ?? window.location.href,\n  getFontFaceSet: () => document.fonts,\n  fetch: (url, options) => fetch(url, options),\n  parseXML: (xml) => {\n    const parser = new DOMParser();\n    return parser.parseFromString(xml, \"text/xml\");\n  }\n};\n\nexport { BrowserAdapter };\n//# sourceMappingURL=BrowserAdapter.mjs.map\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter.mjs';\n\n\"use strict\";\nlet currentAdapter = BrowserAdapter;\nconst DOMAdapter = {\n  /**\n   * Returns the current adapter.\n   * @returns {environment.Adapter} The current adapter.\n   */\n  get() {\n    return currentAdapter;\n  },\n  /**\n   * Sets the current adapter.\n   * @param adapter - The new adapter.\n   */\n  set(adapter) {\n    currentAdapter = adapter;\n  }\n};\n\nexport { DOMAdapter };\n//# sourceMappingURL=adapter.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass CanvasSource extends TextureSource {\n  constructor(options) {\n    if (!options.resource) {\n      options.resource = DOMAdapter.get().createCanvas();\n    }\n    if (!options.width) {\n      options.width = options.resource.width;\n      if (!options.autoDensity) {\n        options.width /= options.resolution;\n      }\n    }\n    if (!options.height) {\n      options.height = options.resource.height;\n      if (!options.autoDensity) {\n        options.height /= options.resolution;\n      }\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoDensity = options.autoDensity;\n    this.resizeCanvas();\n    this.transparent = !!options.transparent;\n  }\n  resizeCanvas() {\n    if (this.autoDensity && \"style\" in this.resource) {\n      this.resource.style.width = `${this.width}px`;\n      this.resource.style.height = `${this.height}px`;\n    }\n    if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight) {\n      this.resource.width = this.pixelWidth;\n      this.resource.height = this.pixelHeight;\n    }\n  }\n  resize(width = this.width, height = this.height, resolution = this._resolution) {\n    const didResize = super.resize(width, height, resolution);\n    if (didResize) {\n      this.resizeCanvas();\n    }\n    return didResize;\n  }\n  static test(resource) {\n    return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement || globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas;\n  }\n  /**\n   * Returns the 2D rendering context for the canvas.\n   * Caches the context after creating it.\n   * @returns The 2D rendering context of the canvas.\n   */\n  get context2D() {\n    return this._context2D || (this._context2D = this.resource.getContext(\"2d\"));\n  }\n}\nCanvasSource.extension = ExtensionType.TextureSource;\n\nexport { CanvasSource };\n//# sourceMappingURL=CanvasSource.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass ImageSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoGarbageCollect = true;\n  }\n  static test(resource) {\n    return globalThis.HTMLImageElement && resource instanceof HTMLImageElement || typeof ImageBitmap !== \"undefined\" && resource instanceof ImageBitmap || globalThis.VideoFrame && resource instanceof VideoFrame;\n  }\n}\nImageSource.extension = ExtensionType.TextureSource;\n\nexport { ImageSource };\n//# sourceMappingURL=ImageSource.mjs.map\n","\"use strict\";\nvar UPDATE_PRIORITY = /* @__PURE__ */ ((UPDATE_PRIORITY2) => {\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"INTERACTION\"] = 50] = \"INTERACTION\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"HIGH\"] = 25] = \"HIGH\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"NORMAL\"] = 0] = \"NORMAL\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"LOW\"] = -25] = \"LOW\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"UTILITY\"] = -50] = \"UTILITY\";\n  return UPDATE_PRIORITY2;\n})(UPDATE_PRIORITY || {});\n\nexport { UPDATE_PRIORITY };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass TickerListener {\n  /**\n   * Constructor\n   * @private\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting\n   * @param once - If the handler should fire once\n   */\n  constructor(fn, context = null, priority = 0, once = false) {\n    /** The next item in chain. */\n    this.next = null;\n    /** The previous item in chain. */\n    this.previous = null;\n    /** `true` if this listener has been destroyed already. */\n    this._destroyed = false;\n    this._fn = fn;\n    this._context = context;\n    this.priority = priority;\n    this._once = once;\n  }\n  /**\n   * Simple compare function to figure out if a function and context match.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @returns `true` if the listener match the arguments\n   */\n  match(fn, context = null) {\n    return this._fn === fn && this._context === context;\n  }\n  /**\n   * Emit by calling the current function.\n   * @param ticker - The ticker emitting.\n   * @returns Next ticker\n   */\n  emit(ticker) {\n    if (this._fn) {\n      if (this._context) {\n        this._fn.call(this._context, ticker);\n      } else {\n        this._fn(ticker);\n      }\n    }\n    const redirect = this.next;\n    if (this._once) {\n      this.destroy(true);\n    }\n    if (this._destroyed) {\n      this.next = null;\n    }\n    return redirect;\n  }\n  /**\n   * Connect to the list.\n   * @param previous - Input node, previous listener\n   */\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n  /**\n   * Destroy and don't use after this.\n   * @param hard - `true` to remove the `next` reference, this\n   *        is considered a hard destroy. Soft destroy maintains the next reference.\n   * @returns The listener to redirect while emitting or removing.\n   */\n  destroy(hard = false) {\n    this._destroyed = true;\n    this._fn = null;\n    this._context = null;\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n    const redirect = this.next;\n    this.next = hard ? null : redirect;\n    this.previous = null;\n    return redirect;\n  }\n}\n\nexport { TickerListener };\n//# sourceMappingURL=TickerListener.mjs.map\n","import { UPDATE_PRIORITY } from './const.mjs';\nimport { TickerListener } from './TickerListener.mjs';\n\n\"use strict\";\nconst _Ticker = class _Ticker {\n  constructor() {\n    /**\n     * Whether or not this ticker should invoke the method {@link Ticker#start|start}\n     * automatically when a listener is added.\n     * @example\n     * ```ts\n     * // Default behavior (manual start)\n     * const ticker = new Ticker();\n     * ticker.autoStart = false;\n     * ticker.add(() => {\n     *     // Won't run until ticker.start() is called\n     * });\n     *\n     * // Auto-start behavior\n     * const autoTicker = new Ticker();\n     * autoTicker.autoStart = true;\n     * autoTicker.add(() => {\n     *     // Runs immediately when added\n     * });\n     * ```\n     * @default false\n     * @see {@link Ticker#start} For manually starting the ticker\n     * @see {@link Ticker#stop} For manually stopping the ticker\n     */\n    this.autoStart = false;\n    /**\n     * Scalar representing the delta time factor.\n     * This is a dimensionless value representing the fraction of a frame at the target framerate.\n     * At 60 FPS, this value is typically around 1.0.\n     *\n     * This is NOT in milliseconds - it's a scalar multiplier for frame-independent animations.\n     * For actual milliseconds, use {@link Ticker#deltaMS}.\n     * @member {number}\n     * @example\n     * ```ts\n     * // Frame-independent animation using deltaTime scalar\n     * ticker.add((ticker) => {\n     *     // Rotate sprite by 0.1 radians per frame, scaled by deltaTime\n     *     sprite.rotation += 0.1 * ticker.deltaTime;\n     * });\n     * ```\n     */\n    this.deltaTime = 1;\n    /**\n     * The last time update was invoked, in milliseconds since epoch.\n     * Similar to performance.now() timestamp format.\n     *\n     * Used internally for calculating time deltas between frames.\n     * @member {number}\n     * @example\n     * ```ts\n     * ticker.add((ticker) => {\n     *     const currentTime = performance.now();\n     *     const timeSinceLastFrame = currentTime - ticker.lastTime;\n     *     console.log(`Time since last frame: ${timeSinceLastFrame}ms`);\n     * });\n     * ```\n     */\n    this.lastTime = -1;\n    /**\n     * Factor of current {@link Ticker#deltaTime|deltaTime}.\n     * Used to scale time for slow motion or fast-forward effects.\n     * @example\n     * ```ts\n     * // Basic speed adjustment\n     * ticker.speed = 0.5; // Half speed (slow motion)\n     * ticker.speed = 2.0; // Double speed (fast forward)\n     *\n     * // Temporary speed changes\n     * function slowMotion() {\n     *     const normalSpeed = ticker.speed;\n     *     ticker.speed = 0.2;\n     *     setTimeout(() => {\n     *         ticker.speed = normalSpeed;\n     *     }, 1000);\n     * }\n     * ```\n     */\n    this.speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     *\n     * `true` if {@link Ticker#start|start} has been called.\n     * `false` if {@link Ticker#stop|Stop} has been called.\n     *\n     * While `false`, this value may change to `true` in the\n     * event of {@link Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     * @example\n     * ```ts\n     * // Check ticker state\n     * const ticker = new Ticker();\n     * console.log(ticker.started); // false\n     *\n     * // Start and verify\n     * ticker.start();\n     * console.log(ticker.started); // true\n     * ```\n     */\n    this.started = false;\n    /** Internal current frame request ID */\n    this._requestId = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    this._maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    this._minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    this._protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    this._lastFrame = -1;\n    this._head = new TickerListener(null, null, Infinity);\n    this.deltaMS = 1 / _Ticker.targetFPMS;\n    this.elapsedMS = 1 / _Ticker.targetFPMS;\n    this._tick = (time) => {\n      this._requestId = null;\n      if (this.started) {\n        this.update(time);\n        if (this.started && this._requestId === null && this._head.next) {\n          this._requestId = requestAnimationFrame(this._tick);\n        }\n      }\n    };\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If a frame has not already been requested, and if the internal\n   * emitter has listeners, a new frame is requested.\n   */\n  _requestIfNeeded() {\n    if (this._requestId === null && this._head.next) {\n      this.lastTime = performance.now();\n      this._lastFrame = this.lastTime;\n      this._requestId = requestAnimationFrame(this._tick);\n    }\n  }\n  /** Conditionally cancels a pending animation frame. */\n  _cancelIfNeeded() {\n    if (this._requestId !== null) {\n      cancelAnimationFrame(this._requestId);\n      this._requestId = null;\n    }\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If the ticker has been started it checks if a frame has not already\n   * been requested, and if the internal emitter has listeners. If these\n   * conditions are met, a new frame is requested. If the ticker has not\n   * been started, but autoStart is `true`, then the ticker starts now,\n   * and continues with the previous conditions to request a new frame.\n   */\n  _startIfPossible() {\n    if (this.started) {\n      this._requestIfNeeded();\n    } else if (this.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Register a handler for tick events.\n   * @param fn - The listener function to add. Receives the Ticker instance as parameter\n   * @param context - The context for the listener\n   * @param priority - The priority of the listener\n   * @example\n   * ```ts\n   * // Access time properties through the ticker parameter\n   * ticker.add((ticker) => {\n   *     // Use deltaTime (dimensionless scalar) for frame-independent animations\n   *     sprite.rotation += 0.1 * ticker.deltaTime;\n   *\n   *     // Use deltaMS (milliseconds) for time-based calculations\n   *     const progress = ticker.deltaMS / animationDuration;\n   *\n   *     // Use elapsedMS for raw timing measurements\n   *     console.log(`Raw frame time: ${ticker.elapsedMS}ms`);\n   * });\n   * ```\n   */\n  add(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority));\n  }\n  /**\n   * Add a handler for the tick event which is only executed once on the next frame.\n   * @example\n   * ```ts\n   * // Basic one-time update\n   * ticker.addOnce(() => {\n   *     console.log('Runs next frame only');\n   * });\n   *\n   * // With specific context\n   * const game = {\n   *     init(ticker) {\n   *         this.loadResources();\n   *         console.log('Game initialized');\n   *     }\n   * };\n   * ticker.addOnce(game.init, game);\n   *\n   * // With priority\n   * ticker.addOnce(\n   *     () => {\n   *         // High priority one-time setup\n   *         physics.init();\n   *     },\n   *     undefined,\n   *     UPDATE_PRIORITY.HIGH\n   * );\n   * ```\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting (default: UPDATE_PRIORITY.NORMAL)\n   * @returns This instance of a ticker\n   * @see {@link Ticker#add} For continuous updates\n   * @see {@link Ticker#remove} For removing handlers\n   */\n  addOnce(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority, true));\n  }\n  /**\n   * Internally adds the event handler so that it can be sorted by priority.\n   * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n   * before the rendering.\n   * @private\n   * @param listener - Current listener being added.\n   * @returns This instance of a ticker\n   */\n  _addListener(listener) {\n    let current = this._head.next;\n    let previous = this._head;\n    if (!current) {\n      listener.connect(previous);\n    } else {\n      while (current) {\n        if (listener.priority > current.priority) {\n          listener.connect(previous);\n          break;\n        }\n        previous = current;\n        current = current.next;\n      }\n      if (!listener.previous) {\n        listener.connect(previous);\n      }\n    }\n    this._startIfPossible();\n    return this;\n  }\n  /**\n   * Removes any handlers matching the function and context parameters.\n   * If no handlers are left after removing, then it cancels the animation frame.\n   * @example\n   * ```ts\n   * // Basic removal\n   * const onTick = () => {\n   *     sprite.rotation += 0.1;\n   * };\n   * ticker.add(onTick);\n   * ticker.remove(onTick);\n   *\n   * // Remove with context\n   * const game = {\n   *     update(ticker) {\n   *         this.physics.update(ticker.deltaTime);\n   *     }\n   * };\n   * ticker.add(game.update, game);\n   * ticker.remove(game.update, game);\n   *\n   * // Remove all matching handlers\n   * // (if same function was added multiple times)\n   * ticker.add(onTick);\n   * ticker.add(onTick);\n   * ticker.remove(onTick); // Removes all instances\n   * ```\n   * @param fn - The listener function to be removed\n   * @param context - The listener context to be removed\n   * @returns This instance of a ticker\n   * @see {@link Ticker#add} For adding handlers\n   * @see {@link Ticker#addOnce} For one-time handlers\n   */\n  remove(fn, context) {\n    let listener = this._head.next;\n    while (listener) {\n      if (listener.match(fn, context)) {\n        listener = listener.destroy();\n      } else {\n        listener = listener.next;\n      }\n    }\n    if (!this._head.next) {\n      this._cancelIfNeeded();\n    }\n    return this;\n  }\n  /**\n   * The number of listeners on this ticker, calculated by walking through linked list.\n   * @example\n   * ```ts\n   * // Check number of active listeners\n   * const ticker = new Ticker();\n   * console.log(ticker.count); // 0\n   *\n   * // Add some listeners\n   * ticker.add(() => {});\n   * ticker.add(() => {});\n   * console.log(ticker.count); // 2\n   *\n   * // Check after cleanup\n   * ticker.destroy();\n   * console.log(ticker.count); // 0\n   * ```\n   * @readonly\n   * @see {@link Ticker#add} For adding listeners\n   * @see {@link Ticker#remove} For removing listeners\n   */\n  get count() {\n    if (!this._head) {\n      return 0;\n    }\n    let count = 0;\n    let current = this._head;\n    while (current = current.next) {\n      count++;\n    }\n    return count;\n  }\n  /**\n   * Starts the ticker. If the ticker has listeners a new animation frame is requested at this point.\n   * @example\n   * ```ts\n   * // Basic manual start\n   * const ticker = new Ticker();\n   * ticker.add(() => {\n   *     // Animation code here\n   * });\n   * ticker.start();\n   * ```\n   * @see {@link Ticker#stop} For stopping the ticker\n   * @see {@link Ticker#autoStart} For automatic starting\n   * @see {@link Ticker#started} For checking ticker state\n   */\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this._requestIfNeeded();\n    }\n  }\n  /**\n   * Stops the ticker. If the ticker has requested an animation frame it is canceled at this point.\n   * @example\n   * ```ts\n   * // Basic stop\n   * const ticker = new Ticker();\n   * ticker.stop();\n   * ```\n   * @see {@link Ticker#start} For starting the ticker\n   * @see {@link Ticker#started} For checking ticker state\n   * @see {@link Ticker#destroy} For cleaning up the ticker\n   */\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this._cancelIfNeeded();\n    }\n  }\n  /**\n   * Destroy the ticker and don't use after this. Calling this method removes all references to internal events.\n   * @example\n   * ```ts\n   * // Clean up with active listeners\n   * const ticker = new Ticker();\n   * ticker.add(() => {});\n   * ticker.destroy(); // Removes all listeners\n   * ```\n   * @see {@link Ticker#stop} For stopping without destroying\n   * @see {@link Ticker#remove} For removing specific listeners\n   */\n  destroy() {\n    if (!this._protected) {\n      this.stop();\n      let listener = this._head.next;\n      while (listener) {\n        listener = listener.destroy(true);\n      }\n      this._head.destroy();\n      this._head = null;\n    }\n  }\n  /**\n   * Triggers an update.\n   *\n   * An update entails setting the\n   * current {@link Ticker#elapsedMS|elapsedMS},\n   * the current {@link Ticker#deltaTime|deltaTime},\n   * invoking all listeners with current deltaTime,\n   * and then finally setting {@link Ticker#lastTime|lastTime}\n   * with the value of currentTime that was provided.\n   *\n   * This method will be called automatically by animation\n   * frame callbacks if the ticker instance has been started\n   * and listeners are added.\n   * @example\n   * ```ts\n   * // Basic manual update\n   * const ticker = new Ticker();\n   * ticker.update(performance.now());\n   * ```\n   * @param currentTime - The current time of execution (defaults to performance.now())\n   * @see {@link Ticker#deltaTime} For frame delta value\n   * @see {@link Ticker#elapsedMS} For raw elapsed time\n   */\n  update(currentTime = performance.now()) {\n    let elapsedMS;\n    if (currentTime > this.lastTime) {\n      elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n      if (elapsedMS > this._maxElapsedMS) {\n        elapsedMS = this._maxElapsedMS;\n      }\n      elapsedMS *= this.speed;\n      if (this._minElapsedMS) {\n        const delta = currentTime - this._lastFrame | 0;\n        if (delta < this._minElapsedMS) {\n          return;\n        }\n        this._lastFrame = currentTime - delta % this._minElapsedMS;\n      }\n      this.deltaMS = elapsedMS;\n      this.deltaTime = this.deltaMS * _Ticker.targetFPMS;\n      const head = this._head;\n      let listener = head.next;\n      while (listener) {\n        listener = listener.emit(this);\n      }\n      if (!head.next) {\n        this._cancelIfNeeded();\n      }\n    } else {\n      this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n    }\n    this.lastTime = currentTime;\n  }\n  /**\n   * The frames per second at which this ticker is running.\n   * The default is approximately 60 in most modern browsers.\n   * > [!NOTE] This does not factor in the value of\n   * > {@link Ticker#speed|speed}, which is specific\n   * > to scaling {@link Ticker#deltaTime|deltaTime}.\n   * @example\n   * ```ts\n   * // Basic FPS monitoring\n   * ticker.add(() => {\n   *     console.log(`Current FPS: ${Math.round(ticker.FPS)}`);\n   * });\n   * ```\n   * @readonly\n   */\n  get FPS() {\n    return 1e3 / this.elapsedMS;\n  }\n  /**\n   * Manages the maximum amount of milliseconds allowed to\n   * elapse between invoking {@link Ticker#update|update}.\n   *\n   * This value is used to cap {@link Ticker#deltaTime|deltaTime},\n   * but does not effect the measured value of {@link Ticker#FPS|FPS}.\n   *\n   * When setting this property it is clamped to a value between\n   * `0` and `Ticker.targetFPMS * 1000`.\n   * @example\n   * ```ts\n   * // Set minimum acceptable frame rate\n   * const ticker = new Ticker();\n   * ticker.minFPS = 30; // Never go below 30 FPS\n   *\n   * // Use with maxFPS for frame rate clamping\n   * ticker.minFPS = 30;\n   * ticker.maxFPS = 60;\n   *\n   * // Monitor delta capping\n   * ticker.add(() => {\n   *     // Delta time will be capped based on minFPS\n   *     console.log(`Delta time: ${ticker.deltaTime}`);\n   * });\n   * ```\n   * @default 10\n   */\n  get minFPS() {\n    return 1e3 / this._maxElapsedMS;\n  }\n  set minFPS(fps) {\n    const minFPS = Math.min(this.maxFPS, fps);\n    const minFPMS = Math.min(Math.max(0, minFPS) / 1e3, _Ticker.targetFPMS);\n    this._maxElapsedMS = 1 / minFPMS;\n  }\n  /**\n   * Manages the minimum amount of milliseconds required to\n   * elapse between invoking {@link Ticker#update|update}.\n   *\n   * This will effect the measured value of {@link Ticker#FPS|FPS}.\n   *\n   * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n   * Otherwise it will be at least `minFPS`\n   * @example\n   * ```ts\n   * // Set minimum acceptable frame rate\n   * const ticker = new Ticker();\n   * ticker.maxFPS = 60; // Never go above 60 FPS\n   *\n   * // Use with maxFPS for frame rate clamping\n   * ticker.minFPS = 30;\n   * ticker.maxFPS = 60;\n   *\n   * // Monitor delta capping\n   * ticker.add(() => {\n   *     // Delta time will be capped based on maxFPS\n   *     console.log(`Delta time: ${ticker.deltaTime}`);\n   * });\n   * ```\n   * @default 0\n   */\n  get maxFPS() {\n    if (this._minElapsedMS) {\n      return Math.round(1e3 / this._minElapsedMS);\n    }\n    return 0;\n  }\n  set maxFPS(fps) {\n    if (fps === 0) {\n      this._minElapsedMS = 0;\n    } else {\n      const maxFPS = Math.max(this.minFPS, fps);\n      this._minElapsedMS = 1 / (maxFPS / 1e3);\n    }\n  }\n  /**\n   * The shared ticker instance used by {@link AnimatedSprite} and by\n   * {@link VideoSource} to update animation frames / video textures.\n   *\n   * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n   *\n   * The property {@link Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n   * @example\n   * import { Ticker } from 'pixi.js';\n   *\n   * const ticker = Ticker.shared;\n   * // Set this to prevent starting this ticker when listeners are added.\n   * // By default this is true only for the Ticker.shared instance.\n   * ticker.autoStart = false;\n   *\n   * // FYI, call this to ensure the ticker is stopped. It should be stopped\n   * // if you have not attempted to render anything yet.\n   * ticker.stop();\n   *\n   * // Call this when you are ready for a running shared ticker.\n   * ticker.start();\n   * @example\n   * import { autoDetectRenderer, Container } from 'pixi.js';\n   *\n   * // You may use the shared ticker to render...\n   * const renderer = autoDetectRenderer();\n   * const stage = new Container();\n   * document.body.appendChild(renderer.view);\n   * ticker.add((time) => renderer.render(stage));\n   *\n   * // Or you can just update it manually.\n   * ticker.autoStart = false;\n   * ticker.stop();\n   * const animate = (time) => {\n   *     ticker.update(time);\n   *     renderer.render(stage);\n   *     requestAnimationFrame(animate);\n   * };\n   * animate(performance.now());\n   * @type {Ticker}\n   * @readonly\n   */\n  static get shared() {\n    if (!_Ticker._shared) {\n      const shared = _Ticker._shared = new _Ticker();\n      shared.autoStart = true;\n      shared._protected = true;\n    }\n    return _Ticker._shared;\n  }\n  /**\n   * The system ticker instance used by {@link PrepareBase} for core timing\n   * functionality that shouldn't usually need to be paused, unlike the `shared`\n   * ticker which drives visual animations and rendering which may want to be paused.\n   *\n   * The property {@link Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * @type {Ticker}\n   * @readonly\n   * @advanced\n   */\n  static get system() {\n    if (!_Ticker._system) {\n      const system = _Ticker._system = new _Ticker();\n      system.autoStart = true;\n      system._protected = true;\n    }\n    return _Ticker._system;\n  }\n};\n/**\n * Target frame rate in frames per millisecond.\n * Used for converting deltaTime to a scalar time delta.\n * @example\n * ```ts\n * // Default is 0.06 (60 FPS)\n * console.log(Ticker.targetFPMS); // 0.06\n *\n * // Calculate target frame duration\n * const frameDuration = 1 / Ticker.targetFPMS; //  16.67ms\n *\n * // Use in custom timing calculations\n * const deltaTime = elapsedMS * Ticker.targetFPMS;\n * ```\n * @remarks\n * - Default is 0.06 (equivalent to 60 FPS)\n * - Used in deltaTime calculations\n * - Affects all ticker instances\n * @default 0.06\n * @see {@link Ticker#deltaTime} For time scaling\n * @see {@link Ticker#FPS} For actual frame rate\n */\n_Ticker.targetFPMS = 0.06;\nlet Ticker = _Ticker;\n\nexport { Ticker };\n//# sourceMappingURL=Ticker.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = DOMAdapter.get().createCanvas(1, 1);\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../../../ticker/Ticker.mjs';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nconst _VideoSource = class _VideoSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    // Public\n    /** Whether or not the video is ready to play. */\n    this.isReady = false;\n    /** The upload method for this texture. */\n    this.uploadMethodId = \"video\";\n    options = {\n      ..._VideoSource.defaultOptions,\n      ...options\n    };\n    this._autoUpdate = true;\n    this._isConnectedToTicker = false;\n    this._updateFPS = options.updateFPS || 0;\n    this._msToNextUpdate = 0;\n    this.autoPlay = options.autoPlay !== false;\n    this.alphaMode = options.alphaMode ?? \"premultiply-alpha-on-upload\";\n    this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n    this._videoFrameRequestCallbackHandle = null;\n    this._load = null;\n    this._resolve = null;\n    this._reject = null;\n    this._onCanPlay = this._onCanPlay.bind(this);\n    this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onPlayStart = this._onPlayStart.bind(this);\n    this._onPlayStop = this._onPlayStop.bind(this);\n    this._onSeeked = this._onSeeked.bind(this);\n    if (options.autoLoad !== false) {\n      void this.load();\n    }\n  }\n  /** Update the video frame if the source is not destroyed and meets certain conditions. */\n  updateFrame() {\n    if (this.destroyed) {\n      return;\n    }\n    if (this._updateFPS) {\n      const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n      this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n    }\n    if (!this._updateFPS || this._msToNextUpdate <= 0) {\n      this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;\n    }\n    if (this.isValid) {\n      this.update();\n    }\n  }\n  /** Callback to update the video frame and potentially request the next frame update. */\n  _videoFrameRequestCallback() {\n    this.updateFrame();\n    if (this.destroyed) {\n      this._videoFrameRequestCallbackHandle = null;\n    } else {\n      this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n        this._videoFrameRequestCallback\n      );\n    }\n  }\n  /**\n   * Checks if the resource has valid dimensions.\n   * @returns {boolean} True if width and height are set, otherwise false.\n   */\n  get isValid() {\n    return !!this.resource.videoWidth && !!this.resource.videoHeight;\n  }\n  /**\n   * Start preloading the video resource.\n   * @returns {Promise<this>} Handle the validate event\n   */\n  async load() {\n    if (this._load) {\n      return this._load;\n    }\n    const source = this.resource;\n    const options = this.options;\n    if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {\n      source.complete = true;\n    }\n    source.addEventListener(\"play\", this._onPlayStart);\n    source.addEventListener(\"pause\", this._onPlayStop);\n    source.addEventListener(\"seeked\", this._onSeeked);\n    if (!this._isSourceReady()) {\n      if (!options.preload) {\n        source.addEventListener(\"canplay\", this._onCanPlay);\n      }\n      source.addEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.addEventListener(\"error\", this._onError, true);\n    } else {\n      this._mediaReady();\n    }\n    this.alphaMode = await detectVideoAlphaMode();\n    this._load = new Promise((resolve, reject) => {\n      if (this.isValid) {\n        resolve(this);\n      } else {\n        this._resolve = resolve;\n        this._reject = reject;\n        if (options.preloadTimeoutMs !== void 0) {\n          this._preloadTimeout = setTimeout(() => {\n            this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n          });\n        }\n        source.load();\n      }\n    });\n    return this._load;\n  }\n  /**\n   * Handle video error events.\n   * @param event - The error event\n   */\n  _onError(event) {\n    this.resource.removeEventListener(\"error\", this._onError, true);\n    this.emit(\"error\", event);\n    if (this._reject) {\n      this._reject(event);\n      this._reject = null;\n      this._resolve = null;\n    }\n  }\n  /**\n   * Checks if the underlying source is playing.\n   * @returns True if playing.\n   */\n  _isSourcePlaying() {\n    const source = this.resource;\n    return !source.paused && !source.ended;\n  }\n  /**\n   * Checks if the underlying source is ready for playing.\n   * @returns True if ready.\n   */\n  _isSourceReady() {\n    const source = this.resource;\n    return source.readyState > 2;\n  }\n  /** Runs the update loop when the video is ready to play. */\n  _onPlayStart() {\n    if (!this.isValid) {\n      this._mediaReady();\n    }\n    this._configureAutoUpdate();\n  }\n  /** Stops the update loop when a pause event is triggered. */\n  _onPlayStop() {\n    this._configureAutoUpdate();\n  }\n  /** Handles behavior when the video completes seeking to the current playback position. */\n  _onSeeked() {\n    if (this._autoUpdate && !this._isSourcePlaying()) {\n      this._msToNextUpdate = 0;\n      this.updateFrame();\n      this._msToNextUpdate = 0;\n    }\n  }\n  _onCanPlay() {\n    const source = this.resource;\n    source.removeEventListener(\"canplay\", this._onCanPlay);\n    this._mediaReady();\n  }\n  _onCanPlayThrough() {\n    const source = this.resource;\n    source.removeEventListener(\"canplaythrough\", this._onCanPlay);\n    if (this._preloadTimeout) {\n      clearTimeout(this._preloadTimeout);\n      this._preloadTimeout = void 0;\n    }\n    this._mediaReady();\n  }\n  /** Fired when the video is loaded and ready to play. */\n  _mediaReady() {\n    const source = this.resource;\n    if (this.isValid) {\n      this.isReady = true;\n      this.resize(source.videoWidth, source.videoHeight);\n    }\n    this._msToNextUpdate = 0;\n    this.updateFrame();\n    this._msToNextUpdate = 0;\n    if (this._resolve) {\n      this._resolve(this);\n      this._resolve = null;\n      this._reject = null;\n    }\n    if (this._isSourcePlaying()) {\n      this._onPlayStart();\n    } else if (this.autoPlay) {\n      void this.resource.play();\n    }\n  }\n  /** Cleans up resources and event listeners associated with this texture. */\n  destroy() {\n    this._configureAutoUpdate();\n    const source = this.resource;\n    if (source) {\n      source.removeEventListener(\"play\", this._onPlayStart);\n      source.removeEventListener(\"pause\", this._onPlayStop);\n      source.removeEventListener(\"seeked\", this._onSeeked);\n      source.removeEventListener(\"canplay\", this._onCanPlay);\n      source.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.removeEventListener(\"error\", this._onError, true);\n      source.pause();\n      source.src = \"\";\n      source.load();\n    }\n    super.destroy();\n  }\n  /** Should the base texture automatically update itself, set to true by default. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * How many times a second to update the texture from the video.\n   * Leave at 0 to update at every render.\n   * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n   */\n  get updateFPS() {\n    return this._updateFPS;\n  }\n  set updateFPS(value) {\n    if (value !== this._updateFPS) {\n      this._updateFPS = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * Configures the updating mechanism based on the current state and settings.\n   *\n   * This method decides between using the browser's native video frame callback or a custom ticker\n   * for updating the video frame. It ensures optimal performance and responsiveness\n   * based on the video's state, playback status, and the desired frames-per-second setting.\n   *\n   * - If `_autoUpdate` is enabled and the video source is playing:\n   *   - It will prefer the native video frame callback if available and no specific FPS is set.\n   *   - Otherwise, it will use a custom ticker for manual updates.\n   * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n   */\n  _configureAutoUpdate() {\n    if (this._autoUpdate && this._isSourcePlaying()) {\n      if (!this._updateFPS && this.resource.requestVideoFrameCallback) {\n        if (this._isConnectedToTicker) {\n          Ticker.shared.remove(this.updateFrame, this);\n          this._isConnectedToTicker = false;\n          this._msToNextUpdate = 0;\n        }\n        if (this._videoFrameRequestCallbackHandle === null) {\n          this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n            this._videoFrameRequestCallback\n          );\n        }\n      } else {\n        if (this._videoFrameRequestCallbackHandle !== null) {\n          this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n          this._videoFrameRequestCallbackHandle = null;\n        }\n        if (!this._isConnectedToTicker) {\n          Ticker.shared.add(this.updateFrame, this);\n          this._isConnectedToTicker = true;\n          this._msToNextUpdate = 0;\n        }\n      }\n    } else {\n      if (this._videoFrameRequestCallbackHandle !== null) {\n        this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n        this._videoFrameRequestCallbackHandle = null;\n      }\n      if (this._isConnectedToTicker) {\n        Ticker.shared.remove(this.updateFrame, this);\n        this._isConnectedToTicker = false;\n        this._msToNextUpdate = 0;\n      }\n    }\n  }\n  static test(resource) {\n    return globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement;\n  }\n};\n_VideoSource.extension = ExtensionType.TextureSource;\n/** The default options for video sources. */\n_VideoSource.defaultOptions = {\n  ...TextureSource.defaultOptions,\n  /** If true, the video will start loading immediately. */\n  autoLoad: true,\n  /** If true, the video will start playing as soon as it is loaded. */\n  autoPlay: true,\n  /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n  updateFPS: 0,\n  /** If true, the video will be loaded with the `crossorigin` attribute. */\n  crossorigin: true,\n  /** If true, the video will loop when it ends. */\n  loop: false,\n  /** If true, the video will be muted. */\n  muted: true,\n  /** If true, the video will play inline. */\n  playsinline: true,\n  /** If true, the video will be preloaded. */\n  preload: false\n};\n/**\n * Map of video MIME types that can't be directly derived from file extensions.\n * @readonly\n */\n_VideoSource.MIME_TYPES = {\n  ogv: \"video/ogg\",\n  mov: \"video/quicktime\",\n  m4v: \"video/mp4\"\n};\nlet VideoSource = _VideoSource;\n\nexport { VideoSource };\n//# sourceMappingURL=VideoSource.mjs.map\n","\"use strict\";\nconst convertToList = (input, transform, forceTransform = false) => {\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  if (!transform) {\n    return input;\n  }\n  return input.map((item) => {\n    if (typeof item === \"string\" || forceTransform) {\n      return transform(item);\n    }\n    return item;\n  });\n};\n\nexport { convertToList };\n//# sourceMappingURL=convertToList.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\n\n\"use strict\";\nclass CacheClass {\n  constructor() {\n    this._parsers = [];\n    this._cache = /* @__PURE__ */ new Map();\n    this._cacheMap = /* @__PURE__ */ new Map();\n  }\n  /** Clear all entries. */\n  reset() {\n    this._cacheMap.clear();\n    this._cache.clear();\n  }\n  /**\n   * Check if the key exists\n   * @param key - The key to check\n   */\n  has(key) {\n    return this._cache.has(key);\n  }\n  /**\n   * Fetch entry by key\n   * @param key - The key of the entry to get\n   */\n  get(key) {\n    const result = this._cache.get(key);\n    if (!result) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n    }\n    return result;\n  }\n  /**\n   * Set a value by key or keys name\n   * @param key - The key or keys to set\n   * @param value - The value to store in the cache or from which cacheable assets will be derived.\n   */\n  set(key, value) {\n    const keys = convertToList(key);\n    let cacheableAssets;\n    for (let i = 0; i < this.parsers.length; i++) {\n      const parser = this.parsers[i];\n      if (parser.test(value)) {\n        cacheableAssets = parser.getCacheableAssets(keys, value);\n        break;\n      }\n    }\n    const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n    if (!cacheableAssets) {\n      keys.forEach((key2) => {\n        cacheableMap.set(key2, value);\n      });\n    }\n    const cacheKeys = [...cacheableMap.keys()];\n    const cachedAssets = {\n      cacheKeys,\n      keys\n    };\n    keys.forEach((key2) => {\n      this._cacheMap.set(key2, cachedAssets);\n    });\n    cacheKeys.forEach((key2) => {\n      const val = cacheableAssets ? cacheableAssets[key2] : value;\n      if (this._cache.has(key2) && this._cache.get(key2) !== val) {\n        warn(\"[Cache] already has key:\", key2);\n      }\n      this._cache.set(key2, cacheableMap.get(key2));\n    });\n  }\n  /**\n   * Remove entry by key\n   *\n   * This function will also remove any associated alias from the cache also.\n   * @param key - The key of the entry to remove\n   */\n  remove(key) {\n    if (!this._cacheMap.has(key)) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n      return;\n    }\n    const cacheMap = this._cacheMap.get(key);\n    const cacheKeys = cacheMap.cacheKeys;\n    cacheKeys.forEach((key2) => {\n      this._cache.delete(key2);\n    });\n    cacheMap.keys.forEach((key2) => {\n      this._cacheMap.delete(key2);\n    });\n  }\n  /**\n   * All loader parsers registered\n   * @advanced\n   */\n  get parsers() {\n    return this._parsers;\n  }\n}\nconst Cache = new CacheClass();\n\nexport { Cache };\n//# sourceMappingURL=Cache.mjs.map\n","import { Cache } from '../../../../../assets/cache/Cache.mjs';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from '../sources/TextureSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst sources = [];\nextensions.handleByList(ExtensionType.TextureSource, sources);\nfunction autoDetectSource(options = {}) {\n  return textureSourceFrom(options);\n}\nfunction textureSourceFrom(options = {}) {\n  const hasResource = options && options.resource;\n  const res = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  for (let i = 0; i < sources.length; i++) {\n    const Source = sources[i];\n    if (Source.test(res)) {\n      return new Source(opts);\n    }\n  }\n  throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\nfunction resourceToTexture(options = {}, skipCache = false) {\n  const hasResource = options && options.resource;\n  const resource = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  if (!skipCache && Cache.has(resource)) {\n    return Cache.get(resource);\n  }\n  const texture = new Texture({ source: textureSourceFrom(opts) });\n  texture.on(\"destroy\", () => {\n    if (Cache.has(resource)) {\n      Cache.remove(resource);\n    }\n  });\n  if (!skipCache) {\n    Cache.set(resource, texture);\n  }\n  return texture;\n}\nfunction textureFrom(id, skipCache = false) {\n  if (typeof id === \"string\") {\n    return Cache.get(id);\n  } else if (id instanceof TextureSource) {\n    return new Texture({ source: id });\n  }\n  return resourceToTexture(id, skipCache);\n}\nTexture.from = textureFrom;\nTextureSource.from = textureSourceFrom;\n\nexport { autoDetectSource, resourceToTexture, textureFrom };\n//# sourceMappingURL=textureFrom.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { AlphaMask } from './mask/alpha/AlphaMask.mjs';\nimport { ColorMask } from './mask/color/ColorMask.mjs';\nimport { StencilMask } from './mask/stencil/StencilMask.mjs';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferImageSource.mjs';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource.mjs';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource.mjs';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource.mjs';\nimport './renderers/shared/texture/utils/textureFrom.mjs';\nimport './mask/MaskEffectManager.mjs';\n\n\"use strict\";\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nvar LoaderParserPriority = /* @__PURE__ */ ((LoaderParserPriority2) => {\n  LoaderParserPriority2[LoaderParserPriority2[\"Low\"] = 0] = \"Low\";\n  LoaderParserPriority2[LoaderParserPriority2[\"Normal\"] = 1] = \"Normal\";\n  LoaderParserPriority2[LoaderParserPriority2[\"High\"] = 2] = \"High\";\n  return LoaderParserPriority2;\n})(LoaderParserPriority || {});\n\nexport { LoaderParserPriority };\n//# sourceMappingURL=LoaderParser.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nfunction assertPath(path2) {\n  if (typeof path2 !== \"string\") {\n    throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`);\n  }\n}\nfunction removeUrlParams(url) {\n  const re = url.split(\"?\")[0];\n  return re.split(\"#\")[0];\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n}\nfunction normalizeStringPosix(path2, allowAboveRoot) {\n  let res = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let code = -1;\n  for (let i = 0; i <= path2.length; ++i) {\n    if (i < path2.length) {\n      code = path2.charCodeAt(i);\n    } else if (code === 47) {\n      break;\n    } else {\n      code = 47;\n    }\n    if (code === 47) {\n      if (lastSlash === i - 1 || dots === 1) {\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(\"/\");\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(\"/\");\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = \"\";\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"/..\";\n          } else {\n            res = \"..\";\n          }\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += `/${path2.slice(lastSlash + 1, i)}`;\n        } else {\n          res = path2.slice(lastSlash + 1, i);\n        }\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\nconst path = {\n  /**\n   * Converts a path to posix format.\n   * @param path - The path to convert to posix\n   * @example\n   * ```ts\n   * // Convert a Windows path to POSIX format\n   * path.toPosix('C:\\\\Users\\\\User\\\\Documents\\\\file.txt');\n   * // -> 'C:/Users/User/Documents/file.txt'\n   * ```\n   */\n  toPosix(path2) {\n    return replaceAll(path2, \"\\\\\", \"/\");\n  },\n  /**\n   * Checks if the path is a URL e.g. http://, https://\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a URL\n   * path.isUrl('http://www.example.com');\n   * // -> true\n   * path.isUrl('C:/Users/User/Documents/file.txt');\n   * // -> false\n   * ```\n   */\n  isUrl(path2) {\n    return /^https?:/.test(this.toPosix(path2));\n  },\n  /**\n   * Checks if the path is a data URL\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a data URL\n   * path.isDataUrl('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA...');\n   * // -> true\n   * ```\n   */\n  isDataUrl(path2) {\n    return /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i.test(path2);\n  },\n  /**\n   * Checks if the path is a blob URL\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a blob URL\n   * path.isBlobUrl('blob:http://www.example.com/12345678-1234-1234-1234-123456789012');\n   * // -> true\n   * ```\n   */\n  isBlobUrl(path2) {\n    return path2.startsWith(\"blob:\");\n  },\n  /**\n   * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n   * This will return true for windows file paths\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path has a protocol\n   * path.hasProtocol('http://www.example.com');\n   * // -> true\n   * path.hasProtocol('C:/Users/User/Documents/file.txt');\n   * // -> true\n   * ```\n   */\n  hasProtocol(path2) {\n    return /^[^/:]+:/.test(this.toPosix(path2));\n  },\n  /**\n   * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n   * @param path - The path to get the protocol from\n   * @example\n   * ```ts\n   * // Get the protocol from a URL\n   * path.getProtocol('http://www.example.com/path/to/resource');\n   * // -> 'http://'\n   * // Get the protocol from a file path\n   * path.getProtocol('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/'\n   * ```\n   */\n  getProtocol(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    const matchFile = /^file:\\/\\/\\//.exec(path2);\n    if (matchFile) {\n      return matchFile[0];\n    }\n    const matchProtocol = /^[^/:]+:\\/{0,2}/.exec(path2);\n    if (matchProtocol) {\n      return matchProtocol[0];\n    }\n    return \"\";\n  },\n  /**\n   * Converts URL to an absolute path.\n   * When loading from a Web Worker, we must use absolute paths.\n   * If the URL is already absolute we return it as is\n   * If it's not, we convert it\n   * @param url - The URL to test\n   * @param customBaseUrl - The base URL to use\n   * @param customRootUrl - The root URL to use\n   * @example\n   * ```ts\n   * // Convert a relative URL to an absolute path\n   * path.toAbsolute('images/texture.png', 'http://example.com/assets/');\n   * // -> 'http://example.com/assets/images/texture.png'\n   * ```\n   */\n  toAbsolute(url, customBaseUrl, customRootUrl) {\n    assertPath(url);\n    if (this.isDataUrl(url) || this.isBlobUrl(url))\n      return url;\n    const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n    const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n    url = this.toPosix(url);\n    if (url.startsWith(\"/\")) {\n      return path.join(rootUrl, url.slice(1));\n    }\n    const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n    return absolutePath;\n  },\n  /**\n   * Normalizes the given path, resolving '..' and '.' segments\n   * @param path - The path to normalize\n   * @example\n   * ```ts\n   * // Normalize a path with relative segments\n   * path.normalize('http://www.example.com/foo/bar/../baz');\n   * // -> 'http://www.example.com/foo/baz'\n   * // Normalize a file path with relative segments\n   * path.normalize('C:\\\\Users\\\\User\\\\Documents\\\\..\\\\file.txt');\n   * // -> 'C:/Users/User/file.txt'\n   * ```\n   */\n  normalize(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    if (this.isDataUrl(path2) || this.isBlobUrl(path2))\n      return path2;\n    path2 = this.toPosix(path2);\n    let protocol = \"\";\n    const isAbsolute = path2.startsWith(\"/\");\n    if (this.hasProtocol(path2)) {\n      protocol = this.rootname(path2);\n      path2 = path2.slice(protocol.length);\n    }\n    const trailingSeparator = path2.endsWith(\"/\");\n    path2 = normalizeStringPosix(path2, false);\n    if (path2.length > 0 && trailingSeparator)\n      path2 += \"/\";\n    if (isAbsolute)\n      return `/${path2}`;\n    return protocol + path2;\n  },\n  /**\n   * Determines if path is an absolute path.\n   * Absolute paths can be urls, data urls, or paths on disk\n   * @param path - The path to test\n   * @example\n   * ```ts\n   * // Check if a path is absolute\n   * path.isAbsolute('http://www.example.com/foo/bar');\n   * // -> true\n   * path.isAbsolute('C:/Users/User/Documents/file.txt');\n   * // -> true\n   * ```\n   */\n  isAbsolute(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    if (this.hasProtocol(path2))\n      return true;\n    return path2.startsWith(\"/\");\n  },\n  /**\n   * Joins all given path segments together using the platform-specific separator as a delimiter,\n   * then normalizes the resulting path\n   * @param segments - The segments of the path to join\n   * @example\n   * ```ts\n   * // Join multiple path segments\n   * path.join('assets', 'images', 'sprite.png');\n   * // -> 'assets/images/sprite.png'\n   * // Join with relative segments\n   * path.join('assets', 'images', '../textures', 'sprite.png');\n   * // -> 'assets/textures/sprite.png'\n   * ```\n   */\n  join(...segments) {\n    if (segments.length === 0) {\n      return \".\";\n    }\n    let joined;\n    for (let i = 0; i < segments.length; ++i) {\n      const arg = segments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === void 0)\n          joined = arg;\n        else {\n          const prevArg = segments[i - 1] ?? \"\";\n          if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase())) {\n            joined += `/../${arg}`;\n          } else {\n            joined += `/${arg}`;\n          }\n        }\n      }\n    }\n    if (joined === void 0) {\n      return \".\";\n    }\n    return this.normalize(joined);\n  },\n  /**\n   * Returns the directory name of a path\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the directory name of a path\n   * path.dirname('http://www.example.com/foo/bar/baz.png');\n   * // -> 'http://www.example.com/foo/bar'\n   * // Get the directory name of a file path\n   * path.dirname('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/Users/User/Documents'\n   * ```\n   */\n  dirname(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    path2 = this.toPosix(path2);\n    let code = path2.charCodeAt(0);\n    const hasRoot = code === 47;\n    let end = -1;\n    let matchedSlash = true;\n    const proto = this.getProtocol(path2);\n    const origpath = path2;\n    path2 = path2.slice(proto.length);\n    for (let i = path2.length - 1; i >= 1; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        matchedSlash = false;\n      }\n    }\n    if (end === -1)\n      return hasRoot ? \"/\" : this.isUrl(origpath) ? proto + path2 : proto;\n    if (hasRoot && end === 1)\n      return \"//\";\n    return proto + path2.slice(0, end);\n  },\n  /**\n   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the root of a URL\n   * path.rootname('http://www.example.com/foo/bar/baz.png');\n   * // -> 'http://www.example.com/'\n   * // Get the root of a file path\n   * path.rootname('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/'\n   * ```\n   */\n  rootname(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    let root = \"\";\n    if (path2.startsWith(\"/\"))\n      root = \"/\";\n    else {\n      root = this.getProtocol(path2);\n    }\n    if (this.isUrl(path2)) {\n      const index = path2.indexOf(\"/\", root.length);\n      if (index !== -1) {\n        root = path2.slice(0, index);\n      } else\n        root = path2;\n      if (!root.endsWith(\"/\"))\n        root += \"/\";\n    }\n    return root;\n  },\n  /**\n   * Returns the last portion of a path\n   * @param path - The path to test\n   * @param ext - Optional extension to remove\n   * @example\n   * ```ts\n   * // Get the basename of a URL\n   * path.basename('http://www.example.com/foo/bar/baz.png');\n   * // -> 'baz.png'\n   * // Get the basename of a file path\n   * path.basename('C:/Users/User/Documents/file.txt');\n   * // -> 'file.txt'\n   * ```\n   */\n  basename(path2, ext) {\n    assertPath(path2);\n    if (ext)\n      assertPath(ext);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let start = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i;\n    if (ext !== void 0 && ext.length > 0 && ext.length <= path2.length) {\n      if (ext.length === path2.length && ext === path2)\n        return \"\";\n      let extIdx = ext.length - 1;\n      let firstNonSlashEnd = -1;\n      for (i = path2.length - 1; i >= 0; --i) {\n        const code = path2.charCodeAt(i);\n        if (code === 47) {\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                end = i;\n              }\n            } else {\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path2.length;\n      return path2.slice(start, end);\n    }\n    for (i = path2.length - 1; i >= 0; --i) {\n      if (path2.charCodeAt(i) === 47) {\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n    if (end === -1)\n      return \"\";\n    return path2.slice(start, end);\n  },\n  /**\n   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n   * the first character of the basename of path, an empty string is returned.\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the extension of a URL\n   * path.extname('http://www.example.com/foo/bar/baz.png');\n   * // -> '.png'\n   * // Get the extension of a file path\n   * path.extname('C:/Users/User/Documents/file.txt');\n   * // -> '.txt'\n   * ```\n   */\n  extname(path2) {\n    assertPath(path2);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let preDotState = 0;\n    for (let i = path2.length - 1; i >= 0; --i) {\n      const code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return \"\";\n    }\n    return path2.slice(startDot, end);\n  },\n  /**\n   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Parse a URL\n   * const parsed = path.parse('http://www.example.com/foo/bar/baz.png');\n   * // -> {\n   * //   root: 'http://www.example.com/',\n   * //   dir: 'http://www.example.com/foo/bar',\n   * //   base: 'baz.png',\n   * //   ext: '.png',\n   * //   name: 'baz'\n   * // }\n   * // Parse a file path\n   * const parsedFile = path.parse('C:/Users/User/Documents/file.txt');\n   * // -> {\n   * //   root: 'C:/',\n   * //   dir: 'C:/Users/User/Documents',\n   * //   base: 'file.txt',\n   * //   ext: '.txt',\n   * //   name: 'file'\n   * // }\n   * ```\n   */\n  parse(path2) {\n    assertPath(path2);\n    const ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n    if (path2.length === 0)\n      return ret;\n    path2 = removeUrlParams(this.toPosix(path2));\n    let code = path2.charCodeAt(0);\n    const isAbsolute = this.isAbsolute(path2);\n    let start;\n    const protocol = \"\";\n    ret.root = this.rootname(path2);\n    if (isAbsolute || this.hasProtocol(path2)) {\n      start = 1;\n    } else {\n      start = 0;\n    }\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i = path2.length - 1;\n    let preDotState = 0;\n    for (; i >= start; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path2.slice(1, end);\n        else\n          ret.base = ret.name = path2.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path2.slice(1, startDot);\n        ret.base = path2.slice(1, end);\n      } else {\n        ret.name = path2.slice(startPart, startDot);\n        ret.base = path2.slice(startPart, end);\n      }\n      ret.ext = path2.slice(startDot, end);\n    }\n    ret.dir = this.dirname(path2);\n    if (protocol)\n      ret.dir = protocol + ret.dir;\n    return ret;\n  },\n  sep: \"/\",\n  delimiter: \":\",\n  joinExtensions: [\".html\"]\n};\n\nexport { path };\n//# sourceMappingURL=path.mjs.map\n","\"use strict\";\nfunction processX(base, ids, depth, result, tags) {\n  const id = ids[depth];\n  for (let i = 0; i < id.length; i++) {\n    const value = id[i];\n    if (depth < ids.length - 1) {\n      processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n    } else {\n      tags.push(base.replace(result[depth], value));\n    }\n  }\n}\nfunction createStringVariations(string) {\n  const regex = /\\{(.*?)\\}/g;\n  const result = string.match(regex);\n  const tags = [];\n  if (result) {\n    const ids = [];\n    result.forEach((vars) => {\n      const split = vars.substring(1, vars.length - 1).split(\",\");\n      ids.push(split);\n    });\n    processX(string, ids, 0, result, tags);\n  } else {\n    tags.push(string);\n  }\n  return tags;\n}\n\nexport { createStringVariations };\n//# sourceMappingURL=createStringVariations.mjs.map\n","\"use strict\";\nconst isSingleItem = (item) => !Array.isArray(item);\n\nexport { isSingleItem };\n//# sourceMappingURL=isSingleItem.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { createStringVariations } from '../utils/createStringVariations.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Resolver {\n  constructor() {\n    this._defaultBundleIdentifierOptions = {\n      connector: \"-\",\n      createBundleAssetId: (bundleId, assetId) => `${bundleId}${this._bundleIdConnector}${assetId}`,\n      extractAssetIdFromBundle: (bundleId, assetBundleId) => assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, \"\")\n    };\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    this._bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    this._createBundleAssetId = this._defaultBundleIdentifierOptions.createBundleAssetId;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    this._extractAssetIdFromBundle = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._parsers = [];\n    this._resolverHash = {};\n    this._bundles = {};\n  }\n  /**\n   * Override how the resolver deals with generating bundle ids.\n   * must be called before any bundles are added\n   * @param bundleIdentifier - the bundle identifier options\n   */\n  setBundleIdentifier(bundleIdentifier) {\n    this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n    this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n    this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n    if (this._extractAssetIdFromBundle(\"foo\", this._createBundleAssetId(\"foo\", \"bar\")) !== \"bar\") {\n      throw new Error(\"[Resolver] GenerateBundleAssetId are not working correctly\");\n    }\n  }\n  /**\n   * Let the resolver know which assets you prefer to use when resolving assets.\n   * Multiple prefer user defined rules can be added.\n   * @example\n   * resolver.prefer({\n   *     // first look for something with the correct format, and then then correct resolution\n   *     priority: ['format', 'resolution'],\n   *     params:{\n   *         format:'webp', // prefer webp images\n   *         resolution: 2, // prefer a resolution of 2\n   *     }\n   * })\n   * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n   * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n   * @param preferOrders - the prefer options\n   */\n  prefer(...preferOrders) {\n    preferOrders.forEach((prefer) => {\n      this._preferredOrder.push(prefer);\n      if (!prefer.priority) {\n        prefer.priority = Object.keys(prefer.params);\n      }\n    });\n    this._resolverHash = {};\n  }\n  /**\n   * Set the base path to prepend to all urls when resolving\n   * @example\n   * resolver.basePath = 'https://home.com/';\n   * resolver.add('foo', 'bar.ong');\n   * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n   * @param basePath - the base path to use\n   */\n  set basePath(basePath) {\n    this._basePath = basePath;\n  }\n  get basePath() {\n    return this._basePath;\n  }\n  /**\n   * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n   * default value for browsers is `window.location.origin`\n   * @example\n   * // Application hosted on https://home.com/some-path/index.html\n   * resolver.basePath = 'https://home.com/some-path/';\n   * resolver.rootPath = 'https://home.com/';\n   * resolver.add('foo', '/bar.png');\n   * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n   * @param rootPath - the root path to use\n   */\n  set rootPath(rootPath) {\n    this._rootPath = rootPath;\n  }\n  get rootPath() {\n    return this._rootPath;\n  }\n  /**\n   * All the active URL parsers that help the parser to extract information and create\n   * an asset object-based on parsing the URL itself.\n   *\n   * Can be added using the extensions API\n   * @example\n   * resolver.add('foo', [\n   *     {\n   *         resolution: 2,\n   *         format: 'png',\n   *         src: 'image@2x.png',\n   *     },\n   *     {\n   *         resolution:1,\n   *         format:'png',\n   *         src: 'image.png',\n   *     },\n   * ]);\n   *\n   * // With a url parser the information such as resolution and file format could extracted from the url itself:\n   * extensions.add({\n   *     extension: ExtensionType.ResolveParser,\n   *     test: loadTextures.test, // test if url ends in an image\n   *     parse: (value: string) =>\n   *     ({\n   *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n   *         format: value.split('.').pop(),\n   *         src: value,\n   *     }),\n   * });\n   *\n   * // Now resolution and format can be extracted from the url\n   * resolver.add('foo', [\n   *     'image@2x.png',\n   *     'image.png',\n   * ]);\n   */\n  get parsers() {\n    return this._parsers;\n  }\n  /** Used for testing, this resets the resolver to its initial state */\n  reset() {\n    this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._resolverHash = {};\n    this._rootPath = null;\n    this._basePath = null;\n    this._manifest = null;\n    this._bundles = {};\n    this._defaultSearchParams = null;\n  }\n  /**\n   * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n   * @param searchParams - the default url parameters to append when resolving urls\n   */\n  setDefaultSearchParams(searchParams) {\n    if (typeof searchParams === \"string\") {\n      this._defaultSearchParams = searchParams;\n    } else {\n      const queryValues = searchParams;\n      this._defaultSearchParams = Object.keys(queryValues).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`).join(\"&\");\n    }\n  }\n  /**\n   * Returns the aliases for a given asset\n   * @param asset - the asset to get the aliases for\n   */\n  getAlias(asset) {\n    const { alias, src } = asset;\n    const aliasesToUse = convertToList(\n      alias || src,\n      (value) => {\n        if (typeof value === \"string\")\n          return value;\n        if (Array.isArray(value))\n          return value.map((v) => v?.src ?? v);\n        if (value?.src)\n          return value.src;\n        return value;\n      },\n      true\n    );\n    return aliasesToUse;\n  }\n  /**\n   * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n   * generally a manifest would be built using a tool.\n   * @param manifest - the manifest to add to the resolver\n   */\n  addManifest(manifest) {\n    if (this._manifest) {\n      warn(\"[Resolver] Manifest already exists, this will be overwritten\");\n    }\n    this._manifest = manifest;\n    manifest.bundles.forEach((bundle) => {\n      this.addBundle(bundle.name, bundle.assets);\n    });\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can resolve them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * resolver.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * resolver.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const resolvedAssets = await resolver.resolveBundle('animals');\n   * @param bundleId - The id of the bundle to add\n   * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    const assetNames = [];\n    let convertedAssets = assets;\n    if (!Array.isArray(assets)) {\n      convertedAssets = Object.entries(assets).map(([alias, src]) => {\n        if (typeof src === \"string\" || Array.isArray(src)) {\n          return { alias, src };\n        }\n        return { alias, ...src };\n      });\n    }\n    convertedAssets.forEach((asset) => {\n      const srcs = asset.src;\n      const aliases = asset.alias;\n      let ids;\n      if (typeof aliases === \"string\") {\n        const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n        assetNames.push(bundleAssetId);\n        ids = [aliases, bundleAssetId];\n      } else {\n        const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n        assetNames.push(...bundleIds);\n        ids = [...aliases, ...bundleIds];\n      }\n      this.add({\n        ...asset,\n        ...{\n          alias: ids,\n          src: srcs\n        }\n      });\n    });\n    this._bundles[bundleId] = assetNames;\n  }\n  /**\n   * Tells the resolver what keys are associated with witch asset.\n   * The most important thing the resolver does\n   * @example\n   * // Single key, single asset:\n   * resolver.add({alias: 'foo', src: 'bar.png');\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Multiple keys, single asset:\n   * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   * resolver.resolveUrl('boo') // => 'bar.png'\n   *\n   * // Multiple keys, multiple assets:\n   * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Add custom data attached to the resolver\n   * Resolver.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n   * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n   */\n  add(aliases) {\n    const assets = [];\n    if (Array.isArray(aliases)) {\n      assets.push(...aliases);\n    } else {\n      assets.push(aliases);\n    }\n    let keyCheck;\n    keyCheck = (key) => {\n      if (this.hasKey(key)) {\n        warn(`[Resolver] already has key: ${key} overwriting`);\n      }\n    };\n    const assetArray = convertToList(assets);\n    assetArray.forEach((asset) => {\n      const { src } = asset;\n      let { data, format, loadParser: userDefinedLoadParser, parser: userDefinedParser } = asset;\n      const srcsToUse = convertToList(src).map((src2) => {\n        if (typeof src2 === \"string\") {\n          return createStringVariations(src2);\n        }\n        return Array.isArray(src2) ? src2 : [src2];\n      });\n      const aliasesToUse = this.getAlias(asset);\n      Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n      const resolvedAssets = [];\n      srcsToUse.forEach((srcs) => {\n        srcs.forEach((src2) => {\n          let formattedAsset = {};\n          if (typeof src2 !== \"object\") {\n            formattedAsset.src = src2;\n            for (let i = 0; i < this._parsers.length; i++) {\n              const parser = this._parsers[i];\n              if (parser.test(src2)) {\n                formattedAsset = parser.parse(src2);\n                break;\n              }\n            }\n          } else {\n            data = src2.data ?? data;\n            format = src2.format ?? format;\n            if (src2.loadParser || src2.parser) {\n              userDefinedLoadParser = src2.loadParser ?? userDefinedLoadParser;\n              userDefinedParser = src2.parser ?? userDefinedParser;\n            }\n            formattedAsset = {\n              ...formattedAsset,\n              ...src2\n            };\n          }\n          if (!aliasesToUse) {\n            throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n          }\n          formattedAsset = this._buildResolvedAsset(formattedAsset, {\n            aliases: aliasesToUse,\n            data,\n            format,\n            loadParser: userDefinedLoadParser,\n            parser: userDefinedParser\n          });\n          resolvedAssets.push(formattedAsset);\n        });\n      });\n      aliasesToUse.forEach((alias) => {\n        this._assetMap[alias] = resolvedAssets;\n      });\n    });\n  }\n  // TODO: this needs an overload like load did in Assets\n  /**\n   * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n   * a given bundleId or bundleIds.\n   * @example\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * resolver.setManifest(manifest);\n   * const resolved = resolver.resolveBundle('load-screen');\n   * @param bundleIds - The bundle ids to resolve\n   * @returns All the bundles assets or a hash of assets for each bundle specified\n   */\n  resolveBundle(bundleIds) {\n    const singleAsset = isSingleItem(bundleIds);\n    bundleIds = convertToList(bundleIds);\n    const out = {};\n    bundleIds.forEach((bundleId) => {\n      const assetNames = this._bundles[bundleId];\n      if (assetNames) {\n        const results = this.resolve(assetNames);\n        const assets = {};\n        for (const key in results) {\n          const asset = results[key];\n          assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n        }\n        out[bundleId] = assets;\n      }\n    });\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n   * @param key - The key or keys to resolve\n   * @returns - The URLs associated with the key(s)\n   */\n  resolveUrl(key) {\n    const result = this.resolve(key);\n    if (typeof key !== \"string\") {\n      const out = {};\n      for (const i in result) {\n        out[i] = result[i].src;\n      }\n      return out;\n    }\n    return result.src;\n  }\n  resolve(keys) {\n    const singleAsset = isSingleItem(keys);\n    keys = convertToList(keys);\n    const result = {};\n    keys.forEach((key) => {\n      if (!this._resolverHash[key]) {\n        if (this._assetMap[key]) {\n          let assets = this._assetMap[key];\n          const preferredOrder = this._getPreferredOrder(assets);\n          preferredOrder?.priority.forEach((priorityKey) => {\n            preferredOrder.params[priorityKey].forEach((value) => {\n              const filteredAssets = assets.filter((asset) => {\n                if (asset[priorityKey]) {\n                  return asset[priorityKey] === value;\n                }\n                return false;\n              });\n              if (filteredAssets.length) {\n                assets = filteredAssets;\n              }\n            });\n          });\n          this._resolverHash[key] = assets[0];\n        } else {\n          this._resolverHash[key] = this._buildResolvedAsset({\n            alias: [key],\n            src: key\n          }, {});\n        }\n      }\n      result[key] = this._resolverHash[key];\n    });\n    return singleAsset ? result[keys[0]] : result;\n  }\n  /**\n   * Checks if an asset with a given key exists in the resolver\n   * @param key - The key of the asset\n   */\n  hasKey(key) {\n    return !!this._assetMap[key];\n  }\n  /**\n   * Checks if a bundle with the given key exists in the resolver\n   * @param key - The key of the bundle\n   */\n  hasBundle(key) {\n    return !!this._bundles[key];\n  }\n  /**\n   * Internal function for figuring out what prefer criteria an asset should use.\n   * @param assets\n   */\n  _getPreferredOrder(assets) {\n    for (let i = 0; i < assets.length; i++) {\n      const asset = assets[i];\n      const preferred = this._preferredOrder.find((preference) => preference.params.format.includes(asset.format));\n      if (preferred) {\n        return preferred;\n      }\n    }\n    return this._preferredOrder[0];\n  }\n  /**\n   * Appends the default url parameters to the url\n   * @param url - The url to append the default parameters to\n   * @returns - The url with the default parameters appended\n   */\n  _appendDefaultSearchParams(url) {\n    if (!this._defaultSearchParams)\n      return url;\n    const paramConnector = /\\?/.test(url) ? \"&\" : \"?\";\n    return `${url}${paramConnector}${this._defaultSearchParams}`;\n  }\n  _buildResolvedAsset(formattedAsset, data) {\n    const { aliases, data: assetData, loadParser, parser, format } = data;\n    if (this._basePath || this._rootPath) {\n      formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n    }\n    formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n    formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n    formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n    formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n    formattedAsset.parser = parser ?? formattedAsset.parser;\n    formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n    return formattedAsset;\n  }\n}\n/**\n * The prefix that denotes a URL is for a retina asset.\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nResolver.RETINA_PREFIX = /@([0-9\\.]+)x/;\nfunction getUrlExtension(url) {\n  return url.split(\".\").pop().split(\"?\").shift().split(\"#\").shift();\n}\n\nexport { Resolver, getUrlExtension };\n//# sourceMappingURL=Resolver.mjs.map\n","\"use strict\";\nconst copySearchParams = (targetUrl, sourceUrl) => {\n  const searchParams = sourceUrl.split(\"?\")[1];\n  if (searchParams) {\n    targetUrl += `?${searchParams}`;\n  }\n  return targetUrl;\n};\n\nexport { copySearchParams };\n//# sourceMappingURL=copySearchParams.mjs.map\n","import { Rectangle } from '../maths/shapes/Rectangle.mjs';\nimport { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst _Spritesheet = class _Spritesheet {\n  constructor(optionsOrTexture, arg1) {\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    this.linkedSheets = [];\n    let options = optionsOrTexture;\n    if (optionsOrTexture?.source instanceof TextureSource) {\n      options = {\n        texture: optionsOrTexture,\n        data: arg1\n      };\n    }\n    const { texture, data, cachePrefix = \"\" } = options;\n    this.cachePrefix = cachePrefix;\n    this._texture = texture instanceof Texture ? texture : null;\n    this.textureSource = texture.source;\n    this.textures = {};\n    this.animations = {};\n    this.data = data;\n    const metaResolution = parseFloat(data.meta.scale);\n    if (metaResolution) {\n      this.resolution = metaResolution;\n      texture.source.resolution = this.resolution;\n    } else {\n      this.resolution = texture.source._resolution;\n    }\n    this._frames = this.data.frames;\n    this._frameKeys = Object.keys(this._frames);\n    this._batchIndex = 0;\n    this._callback = null;\n  }\n  /**\n   * Parser spritesheet from loaded data. This is done asynchronously\n   * to prevent creating too many Texture within a single process.\n   */\n  parse() {\n    return new Promise((resolve) => {\n      this._callback = resolve;\n      this._batchIndex = 0;\n      if (this._frameKeys.length <= _Spritesheet.BATCH_SIZE) {\n        this._processFrames(0);\n        this._processAnimations();\n        this._parseComplete();\n      } else {\n        this._nextBatch();\n      }\n    });\n  }\n  /**\n   * Process a batch of frames\n   * @param initialFrameIndex - The index of frame to start.\n   */\n  _processFrames(initialFrameIndex) {\n    let frameIndex = initialFrameIndex;\n    const maxFrames = _Spritesheet.BATCH_SIZE;\n    while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n      const i = this._frameKeys[frameIndex];\n      const data = this._frames[i];\n      const rect = data.frame;\n      if (rect) {\n        let frame = null;\n        let trim = null;\n        const sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;\n        const orig = new Rectangle(\n          0,\n          0,\n          Math.floor(sourceSize.w) / this.resolution,\n          Math.floor(sourceSize.h) / this.resolution\n        );\n        if (data.rotated) {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.h) / this.resolution,\n            Math.floor(rect.w) / this.resolution\n          );\n        } else {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        if (data.trimmed !== false && data.spriteSourceSize) {\n          trim = new Rectangle(\n            Math.floor(data.spriteSourceSize.x) / this.resolution,\n            Math.floor(data.spriteSourceSize.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        this.textures[i] = new Texture({\n          source: this.textureSource,\n          frame,\n          orig,\n          trim,\n          rotate: data.rotated ? 2 : 0,\n          defaultAnchor: data.anchor,\n          defaultBorders: data.borders,\n          label: i.toString()\n        });\n      }\n      frameIndex++;\n    }\n  }\n  /** Parse animations config. */\n  _processAnimations() {\n    const animations = this.data.animations || {};\n    for (const animName in animations) {\n      this.animations[animName] = [];\n      for (let i = 0; i < animations[animName].length; i++) {\n        const frameName = animations[animName][i];\n        this.animations[animName].push(this.textures[frameName]);\n      }\n    }\n  }\n  /** The parse has completed. */\n  _parseComplete() {\n    const callback = this._callback;\n    this._callback = null;\n    this._batchIndex = 0;\n    callback.call(this, this.textures);\n  }\n  /** Begin the next batch of textures. */\n  _nextBatch() {\n    this._processFrames(this._batchIndex * _Spritesheet.BATCH_SIZE);\n    this._batchIndex++;\n    setTimeout(() => {\n      if (this._batchIndex * _Spritesheet.BATCH_SIZE < this._frameKeys.length) {\n        this._nextBatch();\n      } else {\n        this._processAnimations();\n        this._parseComplete();\n      }\n    }, 0);\n  }\n  /**\n   * Destroy Spritesheet and don't use after this.\n   * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n   */\n  destroy(destroyBase = false) {\n    for (const i in this.textures) {\n      this.textures[i].destroy();\n    }\n    this._frames = null;\n    this._frameKeys = null;\n    this.data = null;\n    this.textures = null;\n    if (destroyBase) {\n      this._texture?.destroy();\n      this.textureSource.destroy();\n    }\n    this._texture = null;\n    this.textureSource = null;\n    this.linkedSheets = [];\n  }\n};\n/**\n * The maximum number of Textures to build per process.\n * @advanced\n */\n_Spritesheet.BATCH_SIZE = 1e3;\nlet Spritesheet = _Spritesheet;\n\nexport { Spritesheet };\n//# sourceMappingURL=Spritesheet.mjs.map\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser.mjs';\nimport { Resolver } from '../assets/resolver/Resolver.mjs';\nimport { copySearchParams } from '../assets/utils/copySearchParams.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { path } from '../utils/path.mjs';\nimport { Spritesheet } from './Spritesheet.mjs';\n\n\"use strict\";\nconst validImages = [\n  \"jpg\",\n  \"png\",\n  \"jpeg\",\n  \"avif\",\n  \"webp\",\n  \"basis\",\n  \"etc2\",\n  \"bc7\",\n  \"bc6h\",\n  \"bc5\",\n  \"bc4\",\n  \"bc3\",\n  \"bc2\",\n  \"bc1\",\n  \"eac\",\n  \"astc\"\n];\nfunction getCacheableAssets(keys, asset, ignoreMultiPack) {\n  const out = {};\n  keys.forEach((key) => {\n    out[key] = asset;\n  });\n  Object.keys(asset.textures).forEach((key) => {\n    out[`${asset.cachePrefix}${key}`] = asset.textures[key];\n  });\n  if (!ignoreMultiPack) {\n    const basePath = path.dirname(keys[0]);\n    asset.linkedSheets.forEach((item, i) => {\n      const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n      Object.assign(out, out2);\n    });\n  }\n  return out;\n}\nconst spritesheetAsset = {\n  extension: ExtensionType.Asset,\n  /** Handle the caching of the related Spritesheet Textures */\n  cache: {\n    test: (asset) => asset instanceof Spritesheet,\n    getCacheableAssets: (keys, asset) => getCacheableAssets(keys, asset, false)\n  },\n  /** Resolve the resolution of the asset. */\n  resolver: {\n    extension: {\n      type: ExtensionType.ResolveParser,\n      name: \"resolveSpritesheet\"\n    },\n    test: (value) => {\n      const tempURL = value.split(\"?\")[0];\n      const split = tempURL.split(\".\");\n      const extension = split.pop();\n      const format = split.pop();\n      return extension === \"json\" && validImages.includes(format);\n    },\n    parse: (value) => {\n      const split = value.split(\".\");\n      return {\n        resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n        format: split[split.length - 2],\n        src: value\n      };\n    }\n  },\n  /**\n   * Loader plugin that parses sprite sheets!\n   * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n   * If it is, we load the spritesheets image and parse the data into Spritesheet\n   * All textures in the sprite sheet are then added to the cache\n   */\n  loader: {\n    /** used for deprecation purposes */\n    name: \"spritesheetLoader\",\n    id: \"spritesheet\",\n    extension: {\n      type: ExtensionType.LoadParser,\n      priority: LoaderParserPriority.Normal,\n      name: \"spritesheetLoader\"\n    },\n    async testParse(asset, options) {\n      return path.extname(options.src).toLowerCase() === \".json\" && !!asset.frames;\n    },\n    async parse(asset, options, loader) {\n      const {\n        texture: imageTexture,\n        // if user need to use preloaded texture\n        imageFilename,\n        // if user need to use custom filename (not from jsonFile.meta.image)\n        textureOptions,\n        // if user need to set texture options on texture\n        cachePrefix\n        // if user need to use custom cache prefix\n      } = options?.data ?? {};\n      let basePath = path.dirname(options.src);\n      if (basePath && basePath.lastIndexOf(\"/\") !== basePath.length - 1) {\n        basePath += \"/\";\n      }\n      let texture;\n      if (imageTexture instanceof Texture) {\n        texture = imageTexture;\n      } else {\n        const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n        const assets = await loader.load([{ src: imagePath, data: textureOptions }]);\n        texture = assets[imagePath];\n      }\n      const spritesheet = new Spritesheet({\n        texture: texture.source,\n        data: asset,\n        cachePrefix\n      });\n      await spritesheet.parse();\n      const multiPacks = asset?.meta?.related_multi_packs;\n      if (Array.isArray(multiPacks)) {\n        const promises = [];\n        for (const item of multiPacks) {\n          if (typeof item !== \"string\") {\n            continue;\n          }\n          let itemUrl = basePath + item;\n          if (options.data?.ignoreMultiPack) {\n            continue;\n          }\n          itemUrl = copySearchParams(itemUrl, options.src);\n          promises.push(loader.load({\n            src: itemUrl,\n            data: {\n              textureOptions,\n              ignoreMultiPack: true\n            }\n          }));\n        }\n        const res = await Promise.all(promises);\n        spritesheet.linkedSheets = res;\n        res.forEach((item) => {\n          item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => sp !== item));\n        });\n      }\n      return spritesheet;\n    },\n    async unload(spritesheet, _resolvedAsset, loader) {\n      await loader.unload(spritesheet.textureSource._sourceOrigin);\n      spritesheet.destroy(false);\n    }\n  }\n};\n\nexport { spritesheetAsset };\n//# sourceMappingURL=spritesheetAsset.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { spritesheetAsset } from './spritesheetAsset.mjs';\n\n\"use strict\";\nextensions.add(spritesheetAsset);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nconst idCounts = /* @__PURE__ */ Object.create(null);\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createIdFromString(value, groupId) {\n  let id = idHash[value];\n  if (id === void 0) {\n    if (idCounts[groupId] === void 0) {\n      idCounts[groupId] = 1;\n    }\n    idHash[value] = id = idCounts[groupId]++;\n  }\n  return id;\n}\n\nexport { createIdFromString };\n//# sourceMappingURL=createIdFromString.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nlet context;\nfunction getTestContext() {\n  if (!context || context?.isContextLost()) {\n    const canvas = DOMAdapter.get().createCanvas();\n    context = canvas.getContext(\"webgl\", {});\n  }\n  return context;\n}\n\nexport { getTestContext };\n//# sourceMappingURL=getTestContext.mjs.map\n","import { getTestContext } from './getTestContext.mjs';\n\n\"use strict\";\nlet maxFragmentPrecision;\nfunction getMaxFragmentPrecision() {\n  if (!maxFragmentPrecision) {\n    maxFragmentPrecision = \"mediump\";\n    const gl = getTestContext();\n    if (gl) {\n      if (gl.getShaderPrecisionFormat) {\n        const shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n        maxFragmentPrecision = shaderFragment.precision ? \"highp\" : \"mediump\";\n      }\n    }\n  }\n  return maxFragmentPrecision;\n}\n\nexport { getMaxFragmentPrecision };\n//# sourceMappingURL=getMaxFragmentPrecision.mjs.map\n","\"use strict\";\nfunction addProgramDefines(src, isES300, isFragment) {\n  if (isES300)\n    return src;\n  if (isFragment) {\n    src = src.replace(\"out vec4 finalColor;\", \"\");\n    return `\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n  }\n  return `\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n\nexport { addProgramDefines };\n//# sourceMappingURL=addProgramDefines.mjs.map\n","\"use strict\";\nfunction ensurePrecision(src, options, isFragment) {\n  const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n  if (src.substring(0, 9) !== \"precision\") {\n    let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n    if (precision === \"highp\" && maxSupportedPrecision !== \"highp\") {\n      precision = \"mediump\";\n    }\n    return `precision ${precision} float;\n${src}`;\n  } else if (maxSupportedPrecision !== \"highp\" && src.substring(0, 15) === \"precision highp\") {\n    return src.replace(\"precision highp\", \"precision mediump\");\n  }\n  return src;\n}\n\nexport { ensurePrecision };\n//# sourceMappingURL=ensurePrecision.mjs.map\n","\"use strict\";\nfunction insertVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return `#version 300 es\n${src}`;\n}\n\nexport { insertVersion };\n//# sourceMappingURL=insertVersion.mjs.map\n","\"use strict\";\nconst fragmentNameCache = {};\nconst VertexNameCache = {};\nfunction setProgramName(src, { name = `pixi-program` }, isFragment = true) {\n  name = name.replace(/\\s+/g, \"-\");\n  name += isFragment ? \"-fragment\" : \"-vertex\";\n  const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n  if (nameCache[name]) {\n    nameCache[name]++;\n    name += `-${nameCache[name]}`;\n  } else {\n    nameCache[name] = 1;\n  }\n  if (src.indexOf(\"#define SHADER_NAME\") !== -1)\n    return src;\n  const shaderName = `#define SHADER_NAME ${name}`;\n  return `${shaderName}\n${src}`;\n}\n\nexport { setProgramName };\n//# sourceMappingURL=setProgramName.mjs.map\n","\"use strict\";\nfunction stripVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return src.replace(\"#version 300 es\", \"\");\n}\n\nexport { stripVersion };\n//# sourceMappingURL=stripVersion.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { getMaxFragmentPrecision } from './program/getMaxFragmentPrecision.mjs';\nimport { addProgramDefines } from './program/preprocessors/addProgramDefines.mjs';\nimport { ensurePrecision } from './program/preprocessors/ensurePrecision.mjs';\nimport { insertVersion } from './program/preprocessors/insertVersion.mjs';\nimport { setProgramName } from './program/preprocessors/setProgramName.mjs';\nimport { stripVersion } from './program/preprocessors/stripVersion.mjs';\n\n\"use strict\";\nconst processes = {\n  // strips any version headers..\n  stripVersion,\n  // adds precision string if not already present\n  ensurePrecision,\n  // add some defines if WebGL1 to make it more compatible with WebGL2 shaders\n  addProgramDefines,\n  // add the program name to the shader\n  setProgramName,\n  // add the version string to the shader header\n  insertVersion\n};\nconst programCache = /* @__PURE__ */ Object.create(null);\nconst _GlProgram = class _GlProgram {\n  /**\n   * Creates a shiny new GlProgram. Used by WebGL renderer.\n   * @param options - The options for the program.\n   */\n  constructor(options) {\n    options = { ..._GlProgram.defaultOptions, ...options };\n    const isES300 = options.fragment.indexOf(\"#version 300 es\") !== -1;\n    const preprocessorOptions = {\n      stripVersion: isES300,\n      ensurePrecision: {\n        requestedFragmentPrecision: options.preferredFragmentPrecision,\n        requestedVertexPrecision: options.preferredVertexPrecision,\n        maxSupportedVertexPrecision: \"highp\",\n        maxSupportedFragmentPrecision: getMaxFragmentPrecision()\n      },\n      setProgramName: {\n        name: options.name\n      },\n      addProgramDefines: isES300,\n      insertVersion: isES300\n    };\n    let fragment = options.fragment;\n    let vertex = options.vertex;\n    Object.keys(processes).forEach((processKey) => {\n      const processOptions = preprocessorOptions[processKey];\n      fragment = processes[processKey](fragment, processOptions, true);\n      vertex = processes[processKey](vertex, processOptions, false);\n    });\n    this.fragment = fragment;\n    this.vertex = vertex;\n    this.transformFeedbackVaryings = options.transformFeedbackVaryings;\n    this._key = createIdFromString(`${this.vertex}:${this.fragment}`, \"gl-program\");\n  }\n  /** destroys the program */\n  destroy() {\n    this.fragment = null;\n    this.vertex = null;\n    this._attributeData = null;\n    this._uniformData = null;\n    this._uniformBlockData = null;\n    this.transformFeedbackVaryings = null;\n    programCache[this._cacheKey] = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex}:${options.fragment}`;\n    if (!programCache[key]) {\n      programCache[key] = new _GlProgram(options);\n      programCache[key]._cacheKey = key;\n    }\n    return programCache[key];\n  }\n};\n/** The default options used by the program. */\n_GlProgram.defaultOptions = {\n  preferredVertexPrecision: \"highp\",\n  preferredFragmentPrecision: \"mediump\"\n};\nlet GlProgram = _GlProgram;\n\nexport { GlProgram };\n//# sourceMappingURL=GlProgram.mjs.map\n","\"use strict\";\nconst attributeFormatData = {\n  uint8x2: { size: 2, stride: 2, normalised: false },\n  uint8x4: { size: 4, stride: 4, normalised: false },\n  sint8x2: { size: 2, stride: 2, normalised: false },\n  sint8x4: { size: 4, stride: 4, normalised: false },\n  unorm8x2: { size: 2, stride: 2, normalised: true },\n  unorm8x4: { size: 4, stride: 4, normalised: true },\n  snorm8x2: { size: 2, stride: 2, normalised: true },\n  snorm8x4: { size: 4, stride: 4, normalised: true },\n  uint16x2: { size: 2, stride: 4, normalised: false },\n  uint16x4: { size: 4, stride: 8, normalised: false },\n  sint16x2: { size: 2, stride: 4, normalised: false },\n  sint16x4: { size: 4, stride: 8, normalised: false },\n  unorm16x2: { size: 2, stride: 4, normalised: true },\n  unorm16x4: { size: 4, stride: 8, normalised: true },\n  snorm16x2: { size: 2, stride: 4, normalised: true },\n  snorm16x4: { size: 4, stride: 8, normalised: true },\n  float16x2: { size: 2, stride: 4, normalised: false },\n  float16x4: { size: 4, stride: 8, normalised: false },\n  float32: { size: 1, stride: 4, normalised: false },\n  float32x2: { size: 2, stride: 8, normalised: false },\n  float32x3: { size: 3, stride: 12, normalised: false },\n  float32x4: { size: 4, stride: 16, normalised: false },\n  uint32: { size: 1, stride: 4, normalised: false },\n  uint32x2: { size: 2, stride: 8, normalised: false },\n  uint32x3: { size: 3, stride: 12, normalised: false },\n  uint32x4: { size: 4, stride: 16, normalised: false },\n  sint32: { size: 1, stride: 4, normalised: false },\n  sint32x2: { size: 2, stride: 8, normalised: false },\n  sint32x3: { size: 3, stride: 12, normalised: false },\n  sint32x4: { size: 4, stride: 16, normalised: false }\n};\nfunction getAttributeInfoFromFormat(format) {\n  return attributeFormatData[format] ?? attributeFormatData.float32;\n}\n\nexport { getAttributeInfoFromFormat };\n//# sourceMappingURL=getAttributeInfoFromFormat.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nconst WGSL_TO_VERTEX_TYPES = {\n  f32: \"float32\",\n  \"vec2<f32>\": \"float32x2\",\n  \"vec3<f32>\": \"float32x3\",\n  \"vec4<f32>\": \"float32x4\",\n  vec2f: \"float32x2\",\n  vec3f: \"float32x3\",\n  vec4f: \"float32x4\",\n  i32: \"sint32\",\n  \"vec2<i32>\": \"sint32x2\",\n  \"vec3<i32>\": \"sint32x3\",\n  \"vec4<i32>\": \"sint32x4\",\n  u32: \"uint32\",\n  \"vec2<u32>\": \"uint32x2\",\n  \"vec3<u32>\": \"uint32x3\",\n  \"vec4<u32>\": \"uint32x4\",\n  bool: \"uint32\",\n  \"vec2<bool>\": \"uint32x2\",\n  \"vec3<bool>\": \"uint32x3\",\n  \"vec4<bool>\": \"uint32x4\"\n};\nfunction extractAttributesFromGpuProgram({ source, entryPoint }) {\n  const results = {};\n  const mainVertStart = source.indexOf(`fn ${entryPoint}`);\n  if (mainVertStart !== -1) {\n    const arrowFunctionStart = source.indexOf(\"->\", mainVertStart);\n    if (arrowFunctionStart !== -1) {\n      const functionArgsSubstring = source.substring(mainVertStart, arrowFunctionStart);\n      const inputsRegex = /@location\\((\\d+)\\)\\s+([a-zA-Z0-9_]+)\\s*:\\s*([a-zA-Z0-9_<>]+)(?:,|\\s|$)/g;\n      let match;\n      while ((match = inputsRegex.exec(functionArgsSubstring)) !== null) {\n        const format = WGSL_TO_VERTEX_TYPES[match[3]] ?? \"float32\";\n        results[match[2]] = {\n          location: parseInt(match[1], 10),\n          format,\n          stride: getAttributeInfoFromFormat(format).stride,\n          offset: 0,\n          instance: false,\n          start: 0\n        };\n      }\n    }\n  }\n  return results;\n}\n\nexport { extractAttributesFromGpuProgram };\n//# sourceMappingURL=extractAttributesFromGpuProgram.mjs.map\n","\"use strict\";\nfunction extractStructAndGroups(wgsl) {\n  const linePattern = /(^|[^/])@(group|binding)\\(\\d+\\)[^;]+;/g;\n  const groupPattern = /@group\\((\\d+)\\)/;\n  const bindingPattern = /@binding\\((\\d+)\\)/;\n  const namePattern = /var(<[^>]+>)? (\\w+)/;\n  const typePattern = /:\\s*(\\w+)/;\n  const structPattern = /struct\\s+(\\w+)\\s*{([^}]+)}/g;\n  const structMemberPattern = /(\\w+)\\s*:\\s*([\\w\\<\\>]+)/g;\n  const structName = /struct\\s+(\\w+)/;\n  const groups = wgsl.match(linePattern)?.map((item) => ({\n    group: parseInt(item.match(groupPattern)[1], 10),\n    binding: parseInt(item.match(bindingPattern)[1], 10),\n    name: item.match(namePattern)[2],\n    isUniform: item.match(namePattern)[1] === \"<uniform>\",\n    type: item.match(typePattern)[1]\n  }));\n  if (!groups) {\n    return {\n      groups: [],\n      structs: []\n    };\n  }\n  const structs = wgsl.match(structPattern)?.map((struct) => {\n    const name = struct.match(structName)[1];\n    const members = struct.match(structMemberPattern).reduce((acc, member) => {\n      const [name2, type] = member.split(\":\");\n      acc[name2.trim()] = type.trim();\n      return acc;\n    }, {});\n    if (!members) {\n      return null;\n    }\n    return { name, members };\n  }).filter(({ name }) => groups.some((group) => group.type === name)) ?? [];\n  return {\n    groups,\n    structs\n  };\n}\n\nexport { extractStructAndGroups };\n//# sourceMappingURL=extractStructAndGroups.mjs.map\n","\"use strict\";\nvar ShaderStage = /* @__PURE__ */ ((ShaderStage2) => {\n  ShaderStage2[ShaderStage2[\"VERTEX\"] = 1] = \"VERTEX\";\n  ShaderStage2[ShaderStage2[\"FRAGMENT\"] = 2] = \"FRAGMENT\";\n  ShaderStage2[ShaderStage2[\"COMPUTE\"] = 4] = \"COMPUTE\";\n  return ShaderStage2;\n})(ShaderStage || {});\n\nexport { ShaderStage };\n//# sourceMappingURL=const.mjs.map\n","import { ShaderStage } from '../../../shared/shader/const.mjs';\n\n\"use strict\";\nfunction generateGpuLayoutGroups({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = [];\n    }\n    if (group.isUniform) {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.VERTEX | ShaderStage.FRAGMENT,\n        buffer: {\n          type: \"uniform\"\n        }\n      });\n    } else if (group.type === \"sampler\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        sampler: {\n          type: \"filtering\"\n        }\n      });\n    } else if (group.type === \"texture_2d\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        texture: {\n          sampleType: \"float\",\n          viewDimension: \"2d\",\n          multisampled: false\n        }\n      });\n    }\n  }\n  return layout;\n}\n\nexport { generateGpuLayoutGroups };\n//# sourceMappingURL=generateGpuLayoutGroups.mjs.map\n","\"use strict\";\nfunction generateLayoutHash({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = {};\n    }\n    layout[group.group][group.name] = group.binding;\n  }\n  return layout;\n}\n\nexport { generateLayoutHash };\n//# sourceMappingURL=generateLayoutHash.mjs.map\n","\"use strict\";\nfunction removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups) {\n  const structNameSet = /* @__PURE__ */ new Set();\n  const dupeGroupKeySet = /* @__PURE__ */ new Set();\n  const structs = [...vertexStructsAndGroups.structs, ...fragmentStructsAndGroups.structs].filter((struct) => {\n    if (structNameSet.has(struct.name)) {\n      return false;\n    }\n    structNameSet.add(struct.name);\n    return true;\n  });\n  const groups = [...vertexStructsAndGroups.groups, ...fragmentStructsAndGroups.groups].filter((group) => {\n    const key = `${group.name}-${group.binding}`;\n    if (dupeGroupKeySet.has(key)) {\n      return false;\n    }\n    dupeGroupKeySet.add(key);\n    return true;\n  });\n  return { structs, groups };\n}\n\nexport { removeStructAndGroupDuplicates };\n//# sourceMappingURL=removeStructAndGroupDuplicates.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { extractAttributesFromGpuProgram } from './utils/extractAttributesFromGpuProgram.mjs';\nimport { extractStructAndGroups } from './utils/extractStructAndGroups.mjs';\nimport { generateGpuLayoutGroups } from './utils/generateGpuLayoutGroups.mjs';\nimport { generateLayoutHash } from './utils/generateLayoutHash.mjs';\nimport { removeStructAndGroupDuplicates } from './utils/removeStructAndGroupDuplicates.mjs';\n\n\"use strict\";\nconst programCache = /* @__PURE__ */ Object.create(null);\nclass GpuProgram {\n  /**\n   * Create a new GpuProgram\n   * @param options - The options for the gpu program\n   */\n  constructor(options) {\n    /** @internal */\n    this._layoutKey = 0;\n    /** @internal */\n    this._attributeLocationsKey = 0;\n    const { fragment, vertex, layout, gpuLayout, name } = options;\n    this.name = name;\n    this.fragment = fragment;\n    this.vertex = vertex;\n    if (fragment.source === vertex.source) {\n      const structsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = structsAndGroups;\n    } else {\n      const vertexStructsAndGroups = extractStructAndGroups(vertex.source);\n      const fragmentStructsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups);\n    }\n    this.layout = layout ?? generateLayoutHash(this.structsAndGroups);\n    this.gpuLayout = gpuLayout ?? generateGpuLayoutGroups(this.structsAndGroups);\n    this.autoAssignGlobalUniforms = !!(this.layout[0]?.globalUniforms !== void 0);\n    this.autoAssignLocalUniforms = !!(this.layout[1]?.localUniforms !== void 0);\n    this._generateProgramKey();\n  }\n  // TODO maker this pure\n  _generateProgramKey() {\n    const { vertex, fragment } = this;\n    const bigKey = vertex.source + fragment.source + vertex.entryPoint + fragment.entryPoint;\n    this._layoutKey = createIdFromString(bigKey, \"program\");\n  }\n  get attributeData() {\n    this._attributeData ?? (this._attributeData = extractAttributesFromGpuProgram(this.vertex));\n    return this._attributeData;\n  }\n  /** destroys the program */\n  destroy() {\n    this.gpuLayout = null;\n    this.layout = null;\n    this.structsAndGroups = null;\n    this.fragment = null;\n    this.vertex = null;\n    programCache[this._cacheKey] = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex.source}:${options.fragment.source}:${options.fragment.entryPoint}:${options.vertex.entryPoint}`;\n    if (!programCache[key]) {\n      programCache[key] = new GpuProgram(options);\n      programCache[key]._cacheKey = key;\n    }\n    return programCache[key];\n  }\n}\n\nexport { GpuProgram };\n//# sourceMappingURL=GpuProgram.mjs.map\n","\"use strict\";\nconst UNIFORM_TYPES_VALUES = [\n  \"f32\",\n  \"i32\",\n  \"vec2<f32>\",\n  \"vec3<f32>\",\n  \"vec4<f32>\",\n  \"mat2x2<f32>\",\n  \"mat3x3<f32>\",\n  \"mat4x4<f32>\",\n  \"mat3x2<f32>\",\n  \"mat4x2<f32>\",\n  \"mat2x3<f32>\",\n  \"mat4x3<f32>\",\n  \"mat2x4<f32>\",\n  \"mat3x4<f32>\",\n  \"vec2<i32>\",\n  \"vec3<i32>\",\n  \"vec4<i32>\"\n];\nconst UNIFORM_TYPES_MAP = UNIFORM_TYPES_VALUES.reduce((acc, type) => {\n  acc[type] = true;\n  return acc;\n}, {});\n\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES };\n//# sourceMappingURL=types.mjs.map\n","\"use strict\";\nfunction getDefaultUniformValue(type, size) {\n  switch (type) {\n    case \"f32\":\n      return 0;\n    case \"vec2<f32>\":\n      return new Float32Array(2 * size);\n    case \"vec3<f32>\":\n      return new Float32Array(3 * size);\n    case \"vec4<f32>\":\n      return new Float32Array(4 * size);\n    case \"mat2x2<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3x3<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4x4<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { getDefaultUniformValue };\n//# sourceMappingURL=getDefaultUniformValue.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { createIdFromString } from '../utils/createIdFromString.mjs';\nimport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './types.mjs';\nimport { getDefaultUniformValue } from './utils/getDefaultUniformValue.mjs';\n\n\"use strict\";\nconst _UniformGroup = class _UniformGroup {\n  /**\n   * Create a new Uniform group\n   * @param uniformStructures - The structures of the uniform group\n   * @param options - The optional parameters of this uniform group\n   */\n  constructor(uniformStructures, options) {\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"uniform\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"uniformGroup\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /** used ito identify if this is a uniform group */\n    this.isUniformGroup = true;\n    /**\n     * used to flag if this Uniform groups data is different from what it has stored in its buffer / on the GPU\n     * @internal\n     */\n    this._dirtyId = 0;\n    // implementing the interface - UniformGroup are not destroyed\n    this.destroyed = false;\n    options = { ..._UniformGroup.defaultOptions, ...options };\n    this.uniformStructures = uniformStructures;\n    const uniforms = {};\n    for (const i in uniformStructures) {\n      const uniformData = uniformStructures[i];\n      uniformData.name = i;\n      uniformData.size = uniformData.size ?? 1;\n      if (!UNIFORM_TYPES_MAP[uniformData.type]) {\n        const arrayMatch = uniformData.type.match(/^array<(\\w+(?:<\\w+>)?),\\s*(\\d+)>$/);\n        if (arrayMatch) {\n          const [, innerType, size] = arrayMatch;\n          throw new Error(\n            `Uniform type ${uniformData.type} is not supported. Use type: '${innerType}', size: ${size} instead.`\n          );\n        }\n        throw new Error(`Uniform type ${uniformData.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(\", \")}`);\n      }\n      uniformData.value ?? (uniformData.value = getDefaultUniformValue(uniformData.type, uniformData.size));\n      uniforms[i] = uniformData.value;\n    }\n    this.uniforms = uniforms;\n    this._dirtyId = 1;\n    this.ubo = options.ubo;\n    this.isStatic = options.isStatic;\n    this._signature = createIdFromString(Object.keys(uniforms).map(\n      (i) => `${i}-${uniformStructures[i].type}`\n    ).join(\"-\"), \"uniform-group\");\n  }\n  /** Call this if you want the uniform groups data to be uploaded to the GPU only useful if `isStatic` is true. */\n  update() {\n    this._dirtyId++;\n  }\n};\n/** The default options used by the uniform group. */\n_UniformGroup.defaultOptions = {\n  /** if true the UniformGroup is handled as an Uniform buffer object. */\n  ubo: false,\n  /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n  isStatic: false\n};\nlet UniformGroup = _UniformGroup;\n\nexport { UniformGroup };\n//# sourceMappingURL=UniformGroup.mjs.map\n","\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource?.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n","\"use strict\";\nvar RendererType = /* @__PURE__ */ ((RendererType2) => {\n  RendererType2[RendererType2[\"WEBGL\"] = 1] = \"WEBGL\";\n  RendererType2[RendererType2[\"WEBGPU\"] = 2] = \"WEBGPU\";\n  RendererType2[RendererType2[\"BOTH\"] = 3] = \"BOTH\";\n  return RendererType2;\n})(RendererType || {});\n\nexport { RendererType };\n//# sourceMappingURL=types.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { GlProgram } from '../../gl/shader/GlProgram.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { GpuProgram } from '../../gpu/shader/GpuProgram.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from './UniformGroup.mjs';\n\n\"use strict\";\nclass Shader extends EventEmitter {\n  constructor(options) {\n    super();\n    /** A unique identifier for the shader */\n    this.uid = uid(\"shader\");\n    /**\n     * A record of the uniform groups and resources used by the shader.\n     * This is used by WebGL renderer to sync uniform data.\n     * @internal\n     */\n    this._uniformBindMap = /* @__PURE__ */ Object.create(null);\n    this._ownedBindGroups = [];\n    let {\n      gpuProgram,\n      glProgram,\n      groups,\n      resources,\n      compatibleRenderers,\n      groupMap\n    } = options;\n    this.gpuProgram = gpuProgram;\n    this.glProgram = glProgram;\n    if (compatibleRenderers === void 0) {\n      compatibleRenderers = 0;\n      if (gpuProgram)\n        compatibleRenderers |= RendererType.WEBGPU;\n      if (glProgram)\n        compatibleRenderers |= RendererType.WEBGL;\n    }\n    this.compatibleRenderers = compatibleRenderers;\n    const nameHash = {};\n    if (!resources && !groups) {\n      resources = {};\n    }\n    if (resources && groups) {\n      throw new Error(\"[Shader] Cannot have both resources and groups\");\n    } else if (!gpuProgram && groups && !groupMap) {\n      throw new Error(\"[Shader] No group map or WebGPU shader provided - consider using resources instead.\");\n    } else if (!gpuProgram && groups && groupMap) {\n      for (const i in groupMap) {\n        for (const j in groupMap[i]) {\n          const uniformName = groupMap[i][j];\n          nameHash[uniformName] = {\n            group: i,\n            binding: j,\n            name: uniformName\n          };\n        }\n      }\n    } else if (gpuProgram && groups && !groupMap) {\n      const groupData = gpuProgram.structsAndGroups.groups;\n      groupMap = {};\n      groupData.forEach((data) => {\n        groupMap[data.group] = groupMap[data.group] || {};\n        groupMap[data.group][data.binding] = data.name;\n        nameHash[data.name] = data;\n      });\n    } else if (resources) {\n      groups = {};\n      groupMap = {};\n      if (gpuProgram) {\n        const groupData = gpuProgram.structsAndGroups.groups;\n        groupData.forEach((data) => {\n          groupMap[data.group] = groupMap[data.group] || {};\n          groupMap[data.group][data.binding] = data.name;\n          nameHash[data.name] = data;\n        });\n      }\n      let bindTick = 0;\n      for (const i in resources) {\n        if (nameHash[i])\n          continue;\n        if (!groups[99]) {\n          groups[99] = new BindGroup();\n          this._ownedBindGroups.push(groups[99]);\n        }\n        nameHash[i] = { group: 99, binding: bindTick, name: i };\n        groupMap[99] = groupMap[99] || {};\n        groupMap[99][bindTick] = i;\n        bindTick++;\n      }\n      for (const i in resources) {\n        const name = i;\n        let value = resources[i];\n        if (!value.source && !value._resourceType) {\n          value = new UniformGroup(value);\n        }\n        const data = nameHash[name];\n        if (data) {\n          if (!groups[data.group]) {\n            groups[data.group] = new BindGroup();\n            this._ownedBindGroups.push(groups[data.group]);\n          }\n          groups[data.group].setResource(value, data.binding);\n        }\n      }\n    }\n    this.groups = groups;\n    this._uniformBindMap = groupMap;\n    this.resources = this._buildResourceAccessor(groups, nameHash);\n  }\n  /**\n   * Sometimes a resource group will be provided later (for example global uniforms)\n   * In such cases, this method can be used to let the shader know about the group.\n   * @param name - the name of the resource group\n   * @param groupIndex - the index of the group (should match the webGPU shader group location)\n   * @param bindIndex - the index of the bind point (should match the webGPU shader bind point)\n   */\n  addResource(name, groupIndex, bindIndex) {\n    var _a, _b;\n    (_a = this._uniformBindMap)[groupIndex] || (_a[groupIndex] = {});\n    (_b = this._uniformBindMap[groupIndex])[bindIndex] || (_b[bindIndex] = name);\n    if (!this.groups[groupIndex]) {\n      this.groups[groupIndex] = new BindGroup();\n      this._ownedBindGroups.push(this.groups[groupIndex]);\n    }\n  }\n  _buildResourceAccessor(groups, nameHash) {\n    const uniformsOut = {};\n    for (const i in nameHash) {\n      const data = nameHash[i];\n      Object.defineProperty(uniformsOut, data.name, {\n        get() {\n          return groups[data.group].getResource(data.binding);\n        },\n        set(value) {\n          groups[data.group].setResource(value, data.binding);\n        }\n      });\n    }\n    return uniformsOut;\n  }\n  /**\n   * Use to destroy the shader when its not longer needed.\n   * It will destroy the resources and remove listeners.\n   * @param destroyPrograms - if the programs should be destroyed as well.\n   * Make sure its not being used by other shaders!\n   */\n  destroy(destroyPrograms = false) {\n    this.emit(\"destroy\", this);\n    if (destroyPrograms) {\n      this.gpuProgram?.destroy();\n      this.glProgram?.destroy();\n    }\n    this.gpuProgram = null;\n    this.glProgram = null;\n    this.removeAllListeners();\n    this._uniformBindMap = null;\n    this._ownedBindGroups.forEach((bindGroup) => {\n      bindGroup.destroy();\n    });\n    this._ownedBindGroups = null;\n    this.resources = null;\n    this.groups = null;\n  }\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new Shader({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n}\n\nexport { Shader };\n//# sourceMappingURL=Shader.mjs.map\n","\"use strict\";\nconst blendModeIds = {\n  normal: 0,\n  add: 1,\n  multiply: 2,\n  screen: 3,\n  overlay: 4,\n  erase: 5,\n  \"normal-npm\": 6,\n  \"add-npm\": 7,\n  \"screen-npm\": 8,\n  min: 9,\n  max: 10\n};\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _State = class _State {\n  constructor() {\n    this.data = 0;\n    this.blendMode = \"normal\";\n    this.polygonOffset = 0;\n    this.blend = true;\n    this.depthMask = true;\n  }\n  /**\n   * Activates blending of the computed fragment color values.\n   * @default true\n   */\n  get blend() {\n    return !!(this.data & 1 << BLEND);\n  }\n  set blend(value) {\n    if (!!(this.data & 1 << BLEND) !== value) {\n      this.data ^= 1 << BLEND;\n    }\n  }\n  /**\n   * Activates adding an offset to depth values of polygon's fragments\n   * @default false\n   */\n  get offsets() {\n    return !!(this.data & 1 << OFFSET);\n  }\n  set offsets(value) {\n    if (!!(this.data & 1 << OFFSET) !== value) {\n      this.data ^= 1 << OFFSET;\n    }\n  }\n  /** The culling settings for this state none - No culling back - Back face culling front - Front face culling */\n  set cullMode(value) {\n    if (value === \"none\") {\n      this.culling = false;\n      return;\n    }\n    this.culling = true;\n    this.clockwiseFrontFace = value === \"front\";\n  }\n  get cullMode() {\n    if (!this.culling) {\n      return \"none\";\n    }\n    return this.clockwiseFrontFace ? \"front\" : \"back\";\n  }\n  /**\n   * Activates culling of polygons.\n   * @default false\n   */\n  get culling() {\n    return !!(this.data & 1 << CULLING);\n  }\n  set culling(value) {\n    if (!!(this.data & 1 << CULLING) !== value) {\n      this.data ^= 1 << CULLING;\n    }\n  }\n  /**\n   * Activates depth comparisons and updates to the depth buffer.\n   * @default false\n   */\n  get depthTest() {\n    return !!(this.data & 1 << DEPTH_TEST);\n  }\n  set depthTest(value) {\n    if (!!(this.data & 1 << DEPTH_TEST) !== value) {\n      this.data ^= 1 << DEPTH_TEST;\n    }\n  }\n  /**\n   * Enables or disables writing to the depth buffer.\n   * @default true\n   */\n  get depthMask() {\n    return !!(this.data & 1 << DEPTH_MASK);\n  }\n  set depthMask(value) {\n    if (!!(this.data & 1 << DEPTH_MASK) !== value) {\n      this.data ^= 1 << DEPTH_MASK;\n    }\n  }\n  /**\n   * Specifies whether or not front or back-facing polygons can be culled.\n   * @default false\n   */\n  get clockwiseFrontFace() {\n    return !!(this.data & 1 << WINDING);\n  }\n  set clockwiseFrontFace(value) {\n    if (!!(this.data & 1 << WINDING) !== value) {\n      this.data ^= 1 << WINDING;\n    }\n  }\n  /**\n   * The blend mode to be applied when this state is set. Apply a value of `normal` to reset the blend mode.\n   * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this._blendMode;\n  }\n  set blendMode(value) {\n    this.blend = value !== \"none\";\n    this._blendMode = value;\n    this._blendModeId = blendModeIds[value] || 0;\n  }\n  /**\n   * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n   * @default 0\n   */\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n  set polygonOffset(value) {\n    this.offsets = !!value;\n    this._polygonOffset = value;\n  }\n  toString() {\n    return `[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;\n  }\n  /**\n   * A quickly getting an instance of a State that is configured for 2d rendering.\n   * @returns a new State with values set for 2d rendering\n   */\n  static for2d() {\n    const state = new _State();\n    state.depthTest = false;\n    state.blend = true;\n    return state;\n  }\n};\n_State.default2d = _State.for2d();\nlet State = _State;\n\nexport { State };\n//# sourceMappingURL=State.mjs.map\n","import { GlProgram } from '../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../rendering/renderers/shared/shader/Shader.mjs';\nimport { State } from '../rendering/renderers/shared/state/State.mjs';\n\n\"use strict\";\nconst _Filter = class _Filter extends Shader {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     */\n    this._state = State.for2d();\n    this.blendMode = options.blendMode;\n    this.padding = options.padding;\n    if (typeof options.antialias === \"boolean\") {\n      this.antialias = options.antialias ? \"on\" : \"off\";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.clipToViewport = options.clipToViewport;\n    this.addResource(\"uTexture\", 0, 1);\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default \"normal\"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/** The default filter settings */\n_Filter.defaultOptions = {\n  blendMode: \"normal\",\n  resolution: 1,\n  padding: 0,\n  antialias: \"off\",\n  blendRequired: false,\n  clipToViewport: true\n};\nlet Filter = _Filter;\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst environments = [];\nextensions.handleByNamedList(ExtensionType.Environment, environments);\nasync function loadEnvironmentExtensions(skip) {\n  if (skip)\n    return;\n  for (let i = 0; i < environments.length; i++) {\n    const env = environments[i];\n    if (env.value.test()) {\n      await env.value.load();\n      return;\n    }\n  }\n}\nasync function autoDetectEnvironment(add) {\n  return loadEnvironmentExtensions(!add);\n}\n\nexport { autoDetectEnvironment, loadEnvironmentExtensions };\n//# sourceMappingURL=autoDetectEnvironment.mjs.map\n","\"use strict\";\nlet unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval === \"boolean\") {\n    return unsafeEval;\n  }\n  try {\n    const func = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = func({ a: \"b\" }, \"a\", \"b\") === true;\n  } catch (_e) {\n    unsafeEval = false;\n  }\n  return unsafeEval;\n}\n\nexport { unsafeEvalSupported };\n//# sourceMappingURL=unsafeEvalSupported.mjs.map\n","\nexport default function earcut(data, holeIndices, dim = 2) {\n\n    const hasHoles = holeIndices && holeIndices.length;\n    const outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n    let outerNode = linkedList(data, 0, outerLen, dim, true);\n    const triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    let minX, minY, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = data[0];\n        minY = data[1];\n        let maxX = minX;\n        let maxY = minY;\n\n        for (let i = dim; i < outerLen; i += dim) {\n            const x = data[i];\n            const y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    let last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (let i = start; i < end; i += dim) last = insertNode(i / dim | 0, data[i], data[i + 1], last);\n    } else {\n        for (let i = end - dim; i >= start; i -= dim) last = insertNode(i / dim | 0, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    let p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    let stop = ear;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        const prev = ear.prev;\n        const next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            triangles.push(prev.i, ear.i, next.i); // cut off the triangle\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    const a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    const ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox\n    const x0 = Math.min(ax, bx, cx),\n        y0 = Math.min(ay, by, cy),\n        x1 = Math.max(ax, bx, cx),\n        y1 = Math.max(ay, by, cy);\n\n    let p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    const a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    const ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox\n    const x0 = Math.min(ax, bx, cx),\n        y0 = Math.min(ay, by, cy),\n        x1 = Math.max(ax, bx, cx),\n        y1 = Math.max(ay, by, cy);\n\n    // z-order range for the current triangle bbox;\n    const minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    let p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles) {\n    let p = start;\n    do {\n        const a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i, p.i, b.i);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    let a = start;\n    do {\n        let b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                let c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    const queue = [];\n\n    for (let i = 0, len = holeIndices.length; i < len; i++) {\n        const start = holeIndices[i] * dim;\n        const end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        const list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareXYSlope);\n\n    // process holes from left to right\n    for (let i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareXYSlope(a, b) {\n    let result = a.x - b.x;\n    // when the left-most point of 2 holes meet at a vertex, sort the holes counterclockwise so that when we find\n    // the bridge to the outer shell is always the point that they meet at.\n    if (result === 0) {\n        result = a.y - b.y;\n        if (result === 0) {\n            const aSlope = (a.next.y - a.y) / (a.next.x - a.x);\n            const bSlope = (b.next.y - b.y) / (b.next.x - b.x);\n            result = aSlope - bSlope;\n        }\n    }\n    return result;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole(hole, outerNode) {\n    const bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    const bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    let p = outerNode;\n    const hx = hole.x;\n    const hy = hole.y;\n    let qx = -Infinity;\n    let m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    // unless they intersect at a vertex, then choose the vertex\n    if (equals(hole, p)) return p;\n    do {\n        if (equals(hole, p.next)) return p.next;\n        else if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            const x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    const stop = m;\n    const mx = m.x;\n    const my = m.y;\n    let tanMin = Infinity;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            const tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    let p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    let numMerges;\n    let inSize = 1;\n\n    do {\n        let p = list;\n        let e;\n        list = null;\n        let tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            let q = p;\n            let pSize = 0;\n            for (let i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            let qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    let p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a point lies within a convex triangle but false if its equal to the first point of the triangle\nfunction pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, px, py) {\n    return !(ax === px && ay === py) && pointInTriangle(ax, ay, bx, by, cx, cy, px, py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // doesn't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    const o1 = sign(area(p1, q1, p2));\n    const o2 = sign(area(p1, q1, q2));\n    const o3 = sign(area(p2, q2, p1));\n    const o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    let p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    let p = a;\n    let inside = false;\n    const px = (a.x + b.x) / 2;\n    const py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    const a2 = createNode(a.i, a.x, a.y),\n        b2 = createNode(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    const p = createNode(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction createNode(i, x, y) {\n    return {\n        i, // vertex index in coordinates array\n        x, y, // vertex coordinates\n        prev: null, // previous and next vertex nodes in a polygon ring\n        next: null,\n        z: 0, // z-order curve value\n        prevZ: null, // previous and next nodes in z-order\n        nextZ: null,\n        steiner: false // indicates whether this is a steiner point\n    };\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nexport function deviation(data, holeIndices, dim, triangles) {\n    const hasHoles = holeIndices && holeIndices.length;\n    const outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    let polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (let i = 0, len = holeIndices.length; i < len; i++) {\n            const start = holeIndices[i] * dim;\n            const end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    let trianglesArea = 0;\n    for (let i = 0; i < triangles.length; i += 3) {\n        const a = triangles[i] * dim;\n        const b = triangles[i + 1] * dim;\n        const c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n}\n\nfunction signedArea(data, start, end, dim) {\n    let sum = 0;\n    for (let i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nexport function flatten(data) {\n    const vertices = [];\n    const holes = [];\n    const dimensions = data[0][0].length;\n    let holeIndex = 0;\n    let prevLen = 0;\n\n    for (const ring of data) {\n        for (const p of ring) {\n            for (let d = 0; d < dimensions; d++) vertices.push(p[d]);\n        }\n        if (prevLen) {\n            holeIndex += prevLen;\n            holes.push(holeIndex);\n        }\n        prevLen = ring.length;\n    }\n    return {vertices, holes, dimensions};\n}\n","import earcutModule from 'earcut';\nexport { default as EventEmitter } from 'eventemitter3';\n\n\"use strict\";\nconst earcut = earcutModule.default || earcutModule;\n\nexport { earcut };\n//# sourceMappingURL=utils.mjs.map\n","\"use strict\";\nvar CLEAR = /* @__PURE__ */ ((CLEAR2) => {\n  CLEAR2[CLEAR2[\"NONE\"] = 0] = \"NONE\";\n  CLEAR2[CLEAR2[\"COLOR\"] = 16384] = \"COLOR\";\n  CLEAR2[CLEAR2[\"STENCIL\"] = 1024] = \"STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH\"] = 256] = \"DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_DEPTH\"] = 16640] = \"COLOR_DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_STENCIL\"] = 17408] = \"COLOR_STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH_STENCIL\"] = 1280] = \"DEPTH_STENCIL\";\n  CLEAR2[CLEAR2[\"ALL\"] = 17664] = \"ALL\";\n  return CLEAR2;\n})(CLEAR || {});\n\nexport { CLEAR };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass SystemRunner {\n  /**\n   * @param name - The function name that will be executed on the listeners added to this Runner.\n   */\n  constructor(name) {\n    this.items = [];\n    this._name = name;\n  }\n  /* jsdoc/check-param-names */\n  /**\n   * Dispatch/Broadcast Runner to all listeners added to the queue.\n   * @param {...any} params - (optional) parameters to pass to each listener\n   */\n  /* jsdoc/check-param-names */\n  emit(a0, a1, a2, a3, a4, a5, a6, a7) {\n    const { name, items } = this;\n    for (let i = 0, len = items.length; i < len; i++) {\n      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    return this;\n  }\n  /**\n   * Add a listener to the Runner\n   *\n   * Runners do not need to have scope or functions passed to them.\n   * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n   * as the name provided to the Runner when it was created.\n   *\n   * Eg A listener passed to this Runner will require a 'complete' function.\n   *\n   * ```ts\n   * import { Runner } from 'pixi.js';\n   *\n   * const complete = new Runner('complete');\n   * ```\n   *\n   * The scope used will be the object itself.\n   * @param {any} item - The object that will be listening.\n   */\n  add(item) {\n    if (item[this._name]) {\n      this.remove(item);\n      this.items.push(item);\n    }\n    return this;\n  }\n  /**\n   * Remove a single listener from the dispatch queue.\n   * @param {any} item - The listener that you would like to remove.\n   */\n  remove(item) {\n    const index = this.items.indexOf(item);\n    if (index !== -1) {\n      this.items.splice(index, 1);\n    }\n    return this;\n  }\n  /**\n   * Check to see if the listener is already in the Runner\n   * @param {any} item - The listener that you would like to check.\n   */\n  contains(item) {\n    return this.items.indexOf(item) !== -1;\n  }\n  /** Remove all listeners from the Runner */\n  removeAll() {\n    this.items.length = 0;\n    return this;\n  }\n  /** Remove all references, don't use after this. */\n  destroy() {\n    this.removeAll();\n    this.items = null;\n    this._name = null;\n  }\n  /**\n   * `true` if there are no this Runner contains no listeners\n   * @readonly\n   */\n  get empty() {\n    return this.items.length === 0;\n  }\n  /**\n   * The name of the runner.\n   * @readonly\n   */\n  get name() {\n    return this._name;\n  }\n}\n\nexport { SystemRunner };\n//# sourceMappingURL=SystemRunner.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { loadEnvironmentExtensions } from '../../../../environment/autoDetectEnvironment.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport '../../../../utils/utils.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { SystemRunner } from './SystemRunner.mjs';\nimport EventEmitter from 'eventemitter3';\n\n\"use strict\";\nconst defaultRunners = [\n  \"init\",\n  \"destroy\",\n  \"contextChange\",\n  \"resolutionChange\",\n  \"resetState\",\n  \"renderEnd\",\n  \"renderStart\",\n  \"render\",\n  \"update\",\n  \"postrender\",\n  \"prerender\"\n];\nconst _AbstractRenderer = class _AbstractRenderer extends EventEmitter {\n  /**\n   * Set up a system with a collection of SystemClasses and runners.\n   * Systems are attached dynamically to this class when added.\n   * @param config - the config for the system manager\n   */\n  constructor(config) {\n    super();\n    /** @internal */\n    this.uid = uid(\"renderer\");\n    /** @internal */\n    this.runners = /* @__PURE__ */ Object.create(null);\n    /** @internal */\n    this.renderPipes = /* @__PURE__ */ Object.create(null);\n    this._initOptions = {};\n    this._systemsHash = /* @__PURE__ */ Object.create(null);\n    this.type = config.type;\n    this.name = config.name;\n    this.config = config;\n    const combinedRunners = [...defaultRunners, ...this.config.runners ?? []];\n    this._addRunners(...combinedRunners);\n    this._unsafeEvalCheck();\n  }\n  /**\n   * Initialize the renderer.\n   * @param options - The options to use to create the renderer.\n   */\n  async init(options = {}) {\n    const skip = options.skipExtensionImports === true ? true : options.manageImports === false;\n    await loadEnvironmentExtensions(skip);\n    this._addSystems(this.config.systems);\n    this._addPipes(this.config.renderPipes, this.config.renderPipeAdaptors);\n    for (const systemName in this._systemsHash) {\n      const system = this._systemsHash[systemName];\n      const defaultSystemOptions = system.constructor.defaultOptions;\n      options = { ...defaultSystemOptions, ...options };\n    }\n    options = { ..._AbstractRenderer.defaultOptions, ...options };\n    this._roundPixels = options.roundPixels ? 1 : 0;\n    for (let i = 0; i < this.runners.init.items.length; i++) {\n      await this.runners.init.items[i].init(options);\n    }\n    this._initOptions = options;\n  }\n  render(args, deprecated) {\n    let options = args;\n    if (options instanceof Container) {\n      options = { container: options };\n      if (deprecated) {\n        deprecation(v8_0_0, \"passing a second argument is deprecated, please use render options instead\");\n        options.target = deprecated.renderTexture;\n      }\n    }\n    options.target || (options.target = this.view.renderTarget);\n    if (options.target === this.view.renderTarget) {\n      this._lastObjectRendered = options.container;\n      options.clearColor ?? (options.clearColor = this.background.colorRgba);\n      options.clear ?? (options.clear = this.background.clearBeforeRender);\n    }\n    if (options.clearColor) {\n      const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n      options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n    }\n    if (!options.transform) {\n      options.container.updateLocalTransform();\n      options.transform = options.container.localTransform;\n    }\n    if (!options.container.visible) {\n      return;\n    }\n    options.container.enableRenderGroup();\n    this.runners.prerender.emit(options);\n    this.runners.renderStart.emit(options);\n    this.runners.render.emit(options);\n    this.runners.renderEnd.emit(options);\n    this.runners.postrender.emit(options);\n  }\n  /**\n   * Resizes the WebGL view to the specified width and height.\n   * @param desiredScreenWidth - The desired width of the screen.\n   * @param desiredScreenHeight - The desired height of the screen.\n   * @param resolution - The resolution / device pixel ratio of the renderer.\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    const previousResolution = this.view.resolution;\n    this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.emit(\"resize\", this.view.screen.width, this.view.screen.height, this.view.resolution);\n    if (resolution !== void 0 && resolution !== previousResolution) {\n      this.runners.resolutionChange.emit(resolution);\n    }\n  }\n  /**\n   * Clears the render target.\n   * @param options - The options to use when clearing the render target.\n   * @param options.target - The render target to clear.\n   * @param options.clearColor - The color to clear with.\n   * @param options.clear - The clear mode to use.\n   * @advanced\n   */\n  clear(options = {}) {\n    const renderer = this;\n    options.target || (options.target = renderer.renderTarget.renderTarget);\n    options.clearColor || (options.clearColor = this.background.colorRgba);\n    options.clear ?? (options.clear = CLEAR.ALL);\n    const { clear, clearColor, target } = options;\n    Color.shared.setValue(clearColor ?? this.background.colorRgba);\n    renderer.renderTarget.clear(target, clear, Color.shared.toArray());\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.view.resolution;\n  }\n  set resolution(value) {\n    this.view.resolution = value;\n    this.runners.resolutionChange.emit(value);\n  }\n  /**\n   * Same as view.width, actual number of pixels in the canvas by horizontal.\n   * @type {number}\n   * @readonly\n   * @default 800\n   */\n  get width() {\n    return this.view.texture.frame.width;\n  }\n  /**\n   * Same as view.height, actual number of pixels in the canvas by vertical.\n   * @default 600\n   */\n  get height() {\n    return this.view.texture.frame.height;\n  }\n  // NOTE: this was `view` in v7\n  /**\n   * The canvas element that everything is drawn to.\n   * @type {environment.ICanvas}\n   */\n  get canvas() {\n    return this.view.canvas;\n  }\n  /**\n   * the last object rendered by the renderer. Useful for other plugins like interaction managers\n   * @readonly\n   */\n  get lastObjectRendered() {\n    return this._lastObjectRendered;\n  }\n  /**\n   * Flag if we are rendering to the screen vs renderTexture\n   * @readonly\n   * @default true\n   */\n  get renderingToScreen() {\n    const renderer = this;\n    return renderer.renderTarget.renderingToScreen;\n  }\n  /**\n   * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n   *\n   * Its safe to use as filterArea or hitArea for the whole stage.\n   */\n  get screen() {\n    return this.view.screen;\n  }\n  /**\n   * Create a bunch of runners based of a collection of ids\n   * @param runnerIds - the runner ids to add\n   */\n  _addRunners(...runnerIds) {\n    runnerIds.forEach((runnerId) => {\n      this.runners[runnerId] = new SystemRunner(runnerId);\n    });\n  }\n  _addSystems(systems) {\n    let i;\n    for (i in systems) {\n      const val = systems[i];\n      this._addSystem(val.value, val.name);\n    }\n  }\n  /**\n   * Add a new system to the renderer.\n   * @param ClassRef - Class reference\n   * @param name - Property name for system, if not specified\n   *        will use a static `name` property on the class itself. This\n   *        name will be assigned as s property on the Renderer so make\n   *        sure it doesn't collide with properties on Renderer.\n   * @returns Return instance of renderer\n   */\n  _addSystem(ClassRef, name) {\n    const system = new ClassRef(this);\n    if (this[name]) {\n      throw new Error(`Whoops! The name \"${name}\" is already in use`);\n    }\n    this[name] = system;\n    this._systemsHash[name] = system;\n    for (const i in this.runners) {\n      this.runners[i].add(system);\n    }\n    return this;\n  }\n  _addPipes(pipes, pipeAdaptors) {\n    const adaptors = pipeAdaptors.reduce((acc, adaptor) => {\n      acc[adaptor.name] = adaptor.value;\n      return acc;\n    }, {});\n    pipes.forEach((pipe) => {\n      const PipeClass = pipe.value;\n      const name = pipe.name;\n      const Adaptor = adaptors[name];\n      this.renderPipes[name] = new PipeClass(\n        this,\n        Adaptor ? new Adaptor() : null\n      );\n      this.runners.destroy.add(this.renderPipes[name]);\n    });\n  }\n  destroy(options = false) {\n    this.runners.destroy.items.reverse();\n    this.runners.destroy.emit(options);\n    Object.values(this.runners).forEach((runner) => {\n      runner.destroy();\n    });\n    if (options === true || typeof options === \"object\" && options.releaseGlobalResources) {\n      GlobalResourceRegistry.release();\n    }\n    this._systemsHash = null;\n    this.renderPipes = null;\n  }\n  /**\n   * Generate a texture from a container.\n   * @param options - options or container target to use when generating the texture\n   * @returns a texture\n   */\n  generateTexture(options) {\n    return this.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Whether the renderer will round coordinates to whole pixels when rendering.\n   * Can be overridden on a per scene item basis.\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  /**\n   * Overridable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   * @ignore\n   */\n  _unsafeEvalCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n  /**\n   * Resets the rendering state of the renderer.\n   * This is useful when you want to use the WebGL context directly and need to ensure PixiJS's internal state\n   * stays synchronized. When modifying the WebGL context state externally, calling this method before the next Pixi\n   * render will reset all internal caches and ensure it executes correctly.\n   *\n   * This is particularly useful when combining PixiJS with other rendering engines like Three.js:\n   * ```js\n   * // Reset Three.js state\n   * threeRenderer.resetState();\n   *\n   * // Render a Three.js scene\n   * threeRenderer.render(threeScene, threeCamera);\n   *\n   * // Reset PixiJS state since Three.js modified the WebGL context\n   * pixiRenderer.resetState();\n   *\n   * // Now render Pixi content\n   * pixiRenderer.render(pixiScene);\n   * ```\n   * @advanced\n   */\n  resetState() {\n    this.runners.resetState.emit();\n  }\n};\n/** The default options for the renderer. */\n_AbstractRenderer.defaultOptions = {\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @default 1\n   */\n  resolution: 1,\n  /**\n   * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n   * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n   * performance issues when using WebGL.\n   *\n   * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n   * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n   * driver version blacklisted by the\n   * browser.\n   *\n   * If your application requires high performance rendering, you may wish to set this to false.\n   * We recommend one of two options if you decide to set this flag to false:\n   *\n   * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n   *    not supported.\n   *\n   * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n   *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n   *    device & browser combination does not support high performance WebGL.\n   *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat: false,\n  /**\n   * Should round pixels be forced when rendering?\n   * @default false\n   */\n  roundPixels: false\n};\nlet AbstractRenderer = _AbstractRenderer;\n\nexport { AbstractRenderer };\n//# sourceMappingURL=AbstractRenderer.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nlet _isWebGLSupported;\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n  if (_isWebGLSupported !== void 0)\n    return _isWebGLSupported;\n  _isWebGLSupported = (() => {\n    const contextOptions = {\n      stencil: true,\n      failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    };\n    try {\n      if (!DOMAdapter.get().getWebGLRenderingContext()) {\n        return false;\n      }\n      const canvas = DOMAdapter.get().createCanvas();\n      let gl = canvas.getContext(\"webgl\", contextOptions);\n      const success = !!gl?.getContextAttributes()?.stencil;\n      if (gl) {\n        const loseContext = gl.getExtension(\"WEBGL_lose_context\");\n        if (loseContext) {\n          loseContext.loseContext();\n        }\n      }\n      gl = null;\n      return success;\n    } catch (_e) {\n      return false;\n    }\n  })();\n  return _isWebGLSupported;\n}\n\nexport { isWebGLSupported };\n//# sourceMappingURL=isWebGLSupported.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet _isWebGPUSupported;\nasync function isWebGPUSupported(options = {}) {\n  if (_isWebGPUSupported !== void 0)\n    return _isWebGPUSupported;\n  _isWebGPUSupported = await (async () => {\n    const gpu = DOMAdapter.get().getNavigator().gpu;\n    if (!gpu) {\n      return false;\n    }\n    try {\n      const adapter = await gpu.requestAdapter(options);\n      await adapter.requestDevice();\n      return true;\n    } catch (_e) {\n      return false;\n    }\n  })();\n  return _isWebGPUSupported;\n}\n\nexport { isWebGPUSupported };\n//# sourceMappingURL=isWebGPUSupported.mjs.map\n","import { isWebGLSupported } from '../../utils/browser/isWebGLSupported.mjs';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported.mjs';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nconst renderPriority = [\"webgl\", \"webgpu\", \"canvas\"];\nasync function autoDetectRenderer(options) {\n  let preferredOrder = [];\n  if (options.preference) {\n    preferredOrder.push(options.preference);\n    renderPriority.forEach((item) => {\n      if (item !== options.preference) {\n        preferredOrder.push(item);\n      }\n    });\n  } else {\n    preferredOrder = renderPriority.slice();\n  }\n  let RendererClass;\n  let finalOptions = {};\n  for (let i = 0; i < preferredOrder.length; i++) {\n    const rendererType = preferredOrder[i];\n    if (rendererType === \"webgpu\" && await isWebGPUSupported()) {\n      const { WebGPURenderer } = await import('./gpu/WebGPURenderer.mjs');\n      RendererClass = WebGPURenderer;\n      finalOptions = { ...options, ...options.webgpu };\n      break;\n    } else if (rendererType === \"webgl\" && isWebGLSupported(\n      options.failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    )) {\n      const { WebGLRenderer } = await import('./gl/WebGLRenderer.mjs');\n      RendererClass = WebGLRenderer;\n      finalOptions = { ...options, ...options.webgl };\n      break;\n    } else if (rendererType === \"canvas\") {\n      finalOptions = { ...options };\n      throw new Error(\"CanvasRenderer is not yet implemented\");\n    }\n  }\n  delete finalOptions.webgpu;\n  delete finalOptions.webgl;\n  if (!RendererClass) {\n    throw new Error(\"No available renderer for the current environment\");\n  }\n  const renderer = new RendererClass();\n  await renderer.init(finalOptions);\n  return renderer;\n}\n\nexport { autoDetectRenderer };\n//# sourceMappingURL=autoDetectRenderer.mjs.map\n","export { default as EventEmitter } from 'eventemitter3';\n\n\"use strict\";\nconst DATA_URI = /^\\s*data:(?:([\\w-]+)\\/([\\w+.-]+))?(?:;charset=([\\w-]+))?(?:;(base64))?,(.*)/i;\nconst VERSION = \"8.13.2\";\n\nexport { DATA_URI, VERSION };\n//# sourceMappingURL=const.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { VERSION } from '../const.mjs';\n\n\"use strict\";\nclass ApplicationInitHook {\n  static init() {\n    globalThis.__PIXI_APP_INIT__?.(this, VERSION);\n  }\n  static destroy() {\n  }\n}\n/** @ignore */\nApplicationInitHook.extension = ExtensionType.Application;\nclass RendererInitHook {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  init() {\n    globalThis.__PIXI_RENDERER_INIT__?.(this._renderer, VERSION);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nRendererInitHook.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"initHook\",\n  priority: -10\n};\n\nexport { ApplicationInitHook, RendererInitHook };\n//# sourceMappingURL=globalHooks.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { ApplicationInitHook } from '../utils/global/globalHooks.mjs';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _Application = class _Application {\n  constructor(...args) {\n    /**\n     * The root display container for your application.\n     * All visual elements should be added to this container or its children.\n     * @example\n     * ```js\n     * // Create a sprite and add it to the stage\n     * const sprite = Sprite.from('image.png');\n     * app.stage.addChild(sprite);\n     *\n     * // Create a container for grouping objects\n     * const container = new Container();\n     * app.stage.addChild(container);\n     * ```\n     */\n    this.stage = new Container();\n    if (args[0] !== void 0) {\n      deprecation(v8_0_0, \"Application constructor options are deprecated, please use Application.init() instead.\");\n    }\n  }\n  /**\n   * Initializes the PixiJS application with the specified options.\n   *\n   * This method must be called after creating a new Application instance.\n   * @param options - Configuration options for the application and renderer\n   * @returns A promise that resolves when initialization is complete\n   * @example\n   * ```js\n   * const app = new Application();\n   *\n   * // Initialize with custom options\n   * await app.init({\n   *     width: 800,\n   *     height: 600,\n   *     backgroundColor: 0x1099bb,\n   *     preference: 'webgl', // or 'webgpu'\n   * });\n   * ```\n   */\n  async init(options) {\n    options = { ...options };\n    this.renderer = await autoDetectRenderer(options);\n    _Application._plugins.forEach((plugin) => {\n      plugin.init.call(this, options);\n    });\n  }\n  /**\n   * Renders the current stage to the screen.\n   *\n   * When using the default setup with {@link TickerPlugin} (enabled by default), you typically don't need to call\n   * this method directly as rendering is handled automatically.\n   *\n   * Only use this method if you've disabled the {@link TickerPlugin} or need custom\n   * render timing control.\n   * @example\n   * ```js\n   * // Example 1: Default setup (TickerPlugin handles rendering)\n   * const app = new Application();\n   * await app.init();\n   * // No need to call render() - TickerPlugin handles it\n   *\n   * // Example 2: Custom rendering loop (if TickerPlugin is disabled)\n   * const app = new Application();\n   * await app.init({ autoStart: false }); // Disable automatic rendering\n   *\n   * function animate() {\n   *     app.render();\n   *     requestAnimationFrame(animate);\n   * }\n   * animate();\n   * ```\n   */\n  render() {\n    this.renderer.render({ container: this.stage });\n  }\n  /**\n   * Reference to the renderer's canvas element. This is the HTML element\n   * that displays your application's graphics.\n   * @readonly\n   * @type {HTMLCanvasElement}\n   * @example\n   * ```js\n   * // Create a new application\n   * const app = new Application();\n   * // Initialize the application\n   * await app.init({...});\n   * // Add canvas to the page\n   * document.body.appendChild(app.canvas);\n   *\n   * // Access the canvas directly\n   * console.log(app.canvas); // HTMLCanvasElement\n   * ```\n   */\n  get canvas() {\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's canvas element.\n   * @type {HTMLCanvasElement}\n   * @deprecated since 8.0.0\n   * @see {@link Application#canvas}\n   */\n  get view() {\n    deprecation(v8_0_0, \"Application.view is deprecated, please use Application.canvas instead.\");\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's screen rectangle. This represents the visible area of your application.\n   *\n   * It's commonly used for:\n   * - Setting filter areas for full-screen effects\n   * - Defining hit areas for screen-wide interaction\n   * - Determining the visible bounds of your application\n   * @readonly\n   * @example\n   * ```js\n   * // Use as filter area for a full-screen effect\n   * const blurFilter = new BlurFilter();\n   * sprite.filterArea = app.screen;\n   *\n   * // Use as hit area for screen-wide interaction\n   * const screenSprite = new Sprite();\n   * screenSprite.hitArea = app.screen;\n   *\n   * // Get screen dimensions\n   * console.log(app.screen.width, app.screen.height);\n   * ```\n   * @see {@link Rectangle} For all available properties and methods\n   */\n  get screen() {\n    return this.renderer.screen;\n  }\n  /**\n   * Destroys the application and all of its resources.\n   *\n   * This method should be called when you want to completely\n   * clean up the application and free all associated memory.\n   * @param rendererDestroyOptions - Options for destroying the renderer:\n   *  - `false` or `undefined`: Preserves the canvas element (default)\n   *  - `true`: Removes the canvas element\n   *  - `{ removeView: boolean }`: Object with removeView property to control canvas removal\n   * @param options - Options for destroying the application:\n   *  - `false` or `undefined`: Basic cleanup (default)\n   *  - `true`: Complete cleanup including children\n   *  - Detailed options object:\n   *    - `children`: Remove children\n   *    - `texture`: Destroy textures\n   *    - `textureSource`: Destroy texture sources\n   *    - `context`: Destroy WebGL context\n   * @example\n   * ```js\n   * // Basic cleanup\n   * app.destroy();\n   *\n   * // Remove canvas and do complete cleanup\n   * app.destroy(true, true);\n   *\n   * // Remove canvas with explicit options\n   * app.destroy({ removeView: true }, true);\n   *\n   * // Detailed cleanup with specific options\n   * app.destroy(\n   *     { removeView: true },\n   *     {\n   *         children: true,\n   *         texture: true,\n   *         textureSource: true,\n   *         context: true\n   *     }\n   * );\n   * ```\n   * > [!WARNING] After calling destroy, the application instance should no longer be used.\n   * > All properties will be null and further operations will throw errors.\n   */\n  destroy(rendererDestroyOptions = false, options = false) {\n    const plugins = _Application._plugins.slice(0);\n    plugins.reverse();\n    plugins.forEach((plugin) => {\n      plugin.destroy.call(this);\n    });\n    this.stage.destroy(options);\n    this.stage = null;\n    this.renderer.destroy(rendererDestroyOptions);\n    this.renderer = null;\n  }\n};\n/**\n * Collection of installed plugins.\n * @internal\n */\n_Application._plugins = [];\nlet Application = _Application;\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n\nexport { Application };\n//# sourceMappingURL=Application.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nclass AbstractBitmapFont extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** The map of characters by character code. */\n    this.chars = /* @__PURE__ */ Object.create(null);\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    this.lineHeight = 0;\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    this.fontFamily = \"\";\n    /** The metrics of the font face. */\n    this.fontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    this.baseLineOffset = 0;\n    /** The range and type of the distance field for this font. */\n    this.distanceField = { type: \"none\", range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    this.pages = [];\n    /** should the fill for this font be applied as a tint to the text. */\n    this.applyFillAsTint = true;\n    /** The size of the font face in pixels. */\n    this.baseMeasurementFontSize = 100;\n    this.baseRenderedFontSize = 100;\n  }\n  /**\n   * The name of the font face.\n   * @deprecated since 8.0.0 Use `fontFamily` instead.\n   */\n  get font() {\n    deprecation(v8_0_0, \"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.\");\n    return this.fontFamily;\n  }\n  /**\n   * The map of base page textures (i.e., sheets of glyphs).\n   * @deprecated since 8.0.0 Use `pages` instead.\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  /**\n   * The size of the font face in pixels.\n   * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n   */\n  get size() {\n    deprecation(v8_0_0, \"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.\");\n    return this.fontMetrics.fontSize;\n  }\n  /**\n   * The kind of distance field for this font or \"none\".\n   * @deprecated since 8.0.0 Use `distanceField.type` instead.\n   */\n  get distanceFieldRange() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.\");\n    return this.distanceField.range;\n  }\n  /**\n   * The range of the distance field in pixels.\n   * @deprecated since 8.0.0 Use `distanceField.range` instead.\n   */\n  get distanceFieldType() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.\");\n    return this.distanceField.type;\n  }\n  destroy(destroyTextures = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    for (const i in this.chars) {\n      this.chars[i].texture?.destroy();\n    }\n    this.chars = null;\n    if (destroyTextures) {\n      this.pages.forEach((page) => page.texture.destroy(true));\n      this.pages = null;\n    }\n  }\n}\n\nexport { AbstractBitmapFont };\n//# sourceMappingURL=AbstractBitmapFont.mjs.map\n","/**\n * tiny-lru\n *\n * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>\n * @license BSD-3-Clause\n * @version 11.4.5\n */\n/**\n * A high-performance Least Recently Used (LRU) cache implementation with optional TTL support.\n * Items are automatically evicted when the cache reaches its maximum size,\n * removing the least recently used items first. All core operations (get, set, delete) are O(1).\n *\n * @class LRU\n * @example\n * // Create a cache with max 100 items\n * const cache = new LRU(100);\n * cache.set('key1', 'value1');\n * console.log(cache.get('key1')); // 'value1'\n *\n * @example\n * // Create a cache with TTL\n * const cache = new LRU(100, 5000); // 5 second TTL\n * cache.set('key1', 'value1');\n * // After 5 seconds, key1 will be expired\n */\nclass LRU {\n\t/**\n\t * Creates a new LRU cache instance.\n\t * Note: Constructor does not validate parameters. Use lru() factory function for parameter validation.\n\t *\n\t * @constructor\n\t * @param {number} [max=0] - Maximum number of items to store. 0 means unlimited.\n\t * @param {number} [ttl=0] - Time to live in milliseconds. 0 means no expiration.\n\t * @param {boolean} [resetTtl=false] - Whether to reset TTL when accessing existing items via get().\n\t * @example\n\t * const cache = new LRU(1000, 60000, true); // 1000 items, 1 minute TTL, reset on access\n\t * @see {@link lru} For parameter validation\n\t * @since 1.0.0\n\t */\n\tconstructor (max = 0, ttl = 0, resetTtl = false) {\n\t\tthis.first = null;\n\t\tthis.items = Object.create(null);\n\t\tthis.last = null;\n\t\tthis.max = max;\n\t\tthis.resetTtl = resetTtl;\n\t\tthis.size = 0;\n\t\tthis.ttl = ttl;\n\t}\n\n\t/**\n\t * Removes all items from the cache.\n\t *\n\t * @method clear\n\t * @memberof LRU\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.clear();\n\t * console.log(cache.size); // 0\n\t * @since 1.0.0\n\t */\n\tclear () {\n\t\tthis.first = null;\n\t\tthis.items = Object.create(null);\n\t\tthis.last = null;\n\t\tthis.size = 0;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes an item from the cache by key.\n\t *\n\t * @method delete\n\t * @memberof LRU\n\t * @param {string} key - The key of the item to delete.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * cache.delete('key1');\n\t * console.log(cache.has('key1')); // false\n\t * @see {@link LRU#has}\n\t * @see {@link LRU#clear}\n\t * @since 1.0.0\n\t */\n\tdelete (key) {\n\t\tif (this.has(key)) {\n\t\t\tconst item = this.items[key];\n\n\t\t\tdelete this.items[key];\n\t\t\tthis.size--;\n\n\t\t\tif (item.prev !== null) {\n\t\t\t\titem.prev.next = item.next;\n\t\t\t}\n\n\t\t\tif (item.next !== null) {\n\t\t\t\titem.next.prev = item.prev;\n\t\t\t}\n\n\t\t\tif (this.first === item) {\n\t\t\t\tthis.first = item.next;\n\t\t\t}\n\n\t\t\tif (this.last === item) {\n\t\t\t\tthis.last = item.prev;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of [key, value] pairs for the specified keys.\n\t * Order follows LRU order (least to most recently used).\n\t *\n\t * @method entries\n\t * @memberof LRU\n\t * @param {string[]} [keys=this.keys()] - Array of keys to get entries for. Defaults to all keys.\n\t * @returns {Array<Array<*>>} Array of [key, value] pairs in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * console.log(cache.entries()); // [['a', 1], ['b', 2]]\n\t * console.log(cache.entries(['a'])); // [['a', 1]]\n\t * @see {@link LRU#keys}\n\t * @see {@link LRU#values}\n\t * @since 11.1.0\n\t */\n\tentries (keys = this.keys()) {\n\t\treturn keys.map(key => [key, this.get(key)]);\n\t}\n\n\t/**\n\t * Removes the least recently used item from the cache.\n\t *\n\t * @method evict\n\t * @memberof LRU\n\t * @param {boolean} [bypass=false] - Whether to force eviction even when cache is empty.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('old', 'value').set('new', 'value');\n\t * cache.evict(); // Removes 'old' item\n\t * @see {@link LRU#setWithEvicted}\n\t * @since 1.0.0\n\t */\n\tevict (bypass = false) {\n\t\tif (bypass || this.size > 0) {\n\t\t\tconst item = this.first;\n\n\t\t\tdelete this.items[item.key];\n\n\t\t\tif (--this.size === 0) {\n\t\t\t\tthis.first = null;\n\t\t\t\tthis.last = null;\n\t\t\t} else {\n\t\t\t\tthis.first = item.next;\n\t\t\t\tthis.first.prev = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns the expiration timestamp for a given key.\n\t *\n\t * @method expiresAt\n\t * @memberof LRU\n\t * @param {string} key - The key to check expiration for.\n\t * @returns {number|undefined} The expiration timestamp in milliseconds, or undefined if key doesn't exist.\n\t * @example\n\t * const cache = new LRU(100, 5000); // 5 second TTL\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.expiresAt('key1')); // timestamp 5 seconds from now\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#has}\n\t * @since 1.0.0\n\t */\n\texpiresAt (key) {\n\t\tlet result;\n\n\t\tif (this.has(key)) {\n\t\t\tresult = this.items[key].expiry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Retrieves a value from the cache by key. Updates the item's position to most recently used.\n\t *\n\t * @method get\n\t * @memberof LRU\n\t * @param {string} key - The key to retrieve.\n\t * @returns {*} The value associated with the key, or undefined if not found or expired.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.get('key1')); // 'value1'\n\t * console.log(cache.get('nonexistent')); // undefined\n\t * @see {@link LRU#set}\n\t * @see {@link LRU#has}\n\t * @since 1.0.0\n\t */\n\tget (key) {\n\t\tconst item = this.items[key];\n\n\t\tif (item !== undefined) {\n\t\t\t// Check TTL only if enabled to avoid unnecessary Date.now() calls\n\t\t\tif (this.ttl > 0) {\n\t\t\t\tif (item.expiry <= Date.now()) {\n\t\t\t\t\tthis.delete(key);\n\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fast LRU update without full set() overhead\n\t\t\tthis.moveToEnd(item);\n\n\t\t\treturn item.value;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Checks if a key exists in the cache.\n\t *\n\t * @method has\n\t * @memberof LRU\n\t * @param {string} key - The key to check for.\n\t * @returns {boolean} True if the key exists, false otherwise.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.has('key1')); // true\n\t * console.log(cache.has('nonexistent')); // false\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#delete}\n\t * @since 9.0.0\n\t */\n\thas (key) {\n\t\treturn key in this.items;\n\t}\n\n\t/**\n\t * Efficiently moves an item to the end of the LRU list (most recently used position).\n\t * This is an internal optimization method that avoids the overhead of the full set() operation\n\t * when only LRU position needs to be updated.\n\t *\n\t * @method moveToEnd\n\t * @memberof LRU\n\t * @param {Object} item - The cache item with prev/next pointers to reposition.\n\t * @private\n\t * @since 11.3.5\n\t */\n\tmoveToEnd (item) {\n\t\t// If already at the end, nothing to do\n\t\tif (this.last === item) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove item from current position in the list\n\t\tif (item.prev !== null) {\n\t\t\titem.prev.next = item.next;\n\t\t}\n\n\t\tif (item.next !== null) {\n\t\t\titem.next.prev = item.prev;\n\t\t}\n\n\t\t// Update first pointer if this was the first item\n\t\tif (this.first === item) {\n\t\t\tthis.first = item.next;\n\t\t}\n\n\t\t// Add item to the end\n\t\titem.prev = this.last;\n\t\titem.next = null;\n\n\t\tif (this.last !== null) {\n\t\t\tthis.last.next = item;\n\t\t}\n\n\t\tthis.last = item;\n\n\t\t// Handle edge case: if this was the only item, it's also first\n\t\tif (this.first === null) {\n\t\t\tthis.first = item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an array of all keys in the cache, ordered from least to most recently used.\n\t *\n\t * @method keys\n\t * @memberof LRU\n\t * @returns {string[]} Array of keys in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * cache.get('a'); // Move 'a' to most recent\n\t * console.log(cache.keys()); // ['b', 'a']\n\t * @see {@link LRU#values}\n\t * @see {@link LRU#entries}\n\t * @since 9.0.0\n\t */\n\tkeys () {\n\t\tconst result = [];\n\t\tlet x = this.first;\n\n\t\twhile (x !== null) {\n\t\t\tresult.push(x.key);\n\t\t\tx = x.next;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Sets a value in the cache and returns any evicted item.\n\t *\n\t * @method setWithEvicted\n\t * @memberof LRU\n\t * @param {string} key - The key to set.\n\t * @param {*} value - The value to store.\n\t * @param {boolean} [resetTtl=this.resetTtl] - Whether to reset the TTL for this operation.\n\t * @returns {Object|null} The evicted item (if any) with shape {key, value, expiry, prev, next}, or null.\n\t * @example\n\t * const cache = new LRU(2);\n\t * cache.set('a', 1).set('b', 2);\n\t * const evicted = cache.setWithEvicted('c', 3); // evicted = {key: 'a', value: 1, ...}\n\t * @see {@link LRU#set}\n\t * @see {@link LRU#evict}\n\t * @since 11.3.0\n\t */\n\tsetWithEvicted (key, value, resetTtl = this.resetTtl) {\n\t\tlet evicted = null;\n\n\t\tif (this.has(key)) {\n\t\t\tthis.set(key, value, true, resetTtl);\n\t\t} else {\n\t\t\tif (this.max > 0 && this.size === this.max) {\n\t\t\t\tevicted = {...this.first};\n\t\t\t\tthis.evict(true);\n\t\t\t}\n\n\t\t\tlet item = this.items[key] = {\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n\t\t\t\tkey: key,\n\t\t\t\tprev: this.last,\n\t\t\t\tnext: null,\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tif (++this.size === 1) {\n\t\t\t\tthis.first = item;\n\t\t\t} else {\n\t\t\t\tthis.last.next = item;\n\t\t\t}\n\n\t\t\tthis.last = item;\n\t\t}\n\n\t\treturn evicted;\n\t}\n\n\t/**\n\t * Sets a value in the cache. Updates the item's position to most recently used.\n\t *\n\t * @method set\n\t * @memberof LRU\n\t * @param {string} key - The key to set.\n\t * @param {*} value - The value to store.\n\t * @param {boolean} [bypass=false] - Internal parameter for setWithEvicted method.\n\t * @param {boolean} [resetTtl=this.resetTtl] - Whether to reset the TTL for this operation.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('key1', 'value1')\n\t *      .set('key2', 'value2')\n\t *      .set('key3', 'value3');\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#setWithEvicted}\n\t * @since 1.0.0\n\t */\n\tset (key, value, bypass = false, resetTtl = this.resetTtl) {\n\t\tlet item = this.items[key];\n\n\t\tif (bypass || item !== undefined) {\n\t\t\t// Existing item: update value and position\n\t\t\titem.value = value;\n\n\t\t\tif (bypass === false && resetTtl) {\n\t\t\t\titem.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl;\n\t\t\t}\n\n\t\t\t// Always move to end, but the bypass parameter affects TTL reset behavior\n\t\t\tthis.moveToEnd(item);\n\t\t} else {\n\t\t\t// New item: check for eviction and create\n\t\t\tif (this.max > 0 && this.size === this.max) {\n\t\t\t\tthis.evict(true);\n\t\t\t}\n\n\t\t\titem = this.items[key] = {\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n\t\t\t\tkey: key,\n\t\t\t\tprev: this.last,\n\t\t\t\tnext: null,\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tif (++this.size === 1) {\n\t\t\t\tthis.first = item;\n\t\t\t} else {\n\t\t\t\tthis.last.next = item;\n\t\t\t}\n\n\t\t\tthis.last = item;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of all values in the cache for the specified keys.\n\t * Order follows LRU order (least to most recently used).\n\t *\n\t * @method values\n\t * @memberof LRU\n\t * @param {string[]} [keys=this.keys()] - Array of keys to get values for. Defaults to all keys.\n\t * @returns {Array<*>} Array of values corresponding to the keys in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * console.log(cache.values()); // [1, 2]\n\t * console.log(cache.values(['a'])); // [1]\n\t * @see {@link LRU#keys}\n\t * @see {@link LRU#entries}\n\t * @since 11.1.0\n\t */\n\tvalues (keys = this.keys()) {\n\t\treturn keys.map(key => this.get(key));\n\t}\n}\n\n/**\n * Factory function to create a new LRU cache instance with parameter validation.\n *\n * @function lru\n * @param {number} [max=1000] - Maximum number of items to store. Must be >= 0. Use 0 for unlimited size.\n * @param {number} [ttl=0] - Time to live in milliseconds. Must be >= 0. Use 0 for no expiration.\n * @param {boolean} [resetTtl=false] - Whether to reset TTL when accessing existing items via get().\n * @returns {LRU} A new LRU cache instance.\n * @throws {TypeError} When parameters are invalid (negative numbers or wrong types).\n * @example\n * // Create cache with factory function\n * const cache = lru(100, 5000, true);\n * cache.set('key', 'value');\n *\n * @example\n * // Error handling\n * try {\n *   const cache = lru(-1); // Invalid max\n * } catch (error) {\n *   console.error(error.message); // \"Invalid max value\"\n * }\n * @see {@link LRU}\n * @since 1.0.0\n */\nfunction lru (max = 1000, ttl = 0, resetTtl = false) {\n\tif (isNaN(max) || max < 0) {\n\t\tthrow new TypeError(\"Invalid max value\");\n\t}\n\n\tif (isNaN(ttl) || ttl < 0) {\n\t\tthrow new TypeError(\"Invalid ttl value\");\n\t}\n\n\tif (typeof resetTtl !== \"boolean\") {\n\t\tthrow new TypeError(\"Invalid resetTtl value\");\n\t}\n\n\treturn new LRU(max, ttl, resetTtl);\n}export{LRU,lru};","\"use strict\";\nconst genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n];\nfunction fontStringFromTextStyle(style) {\n  const fontSizeString = typeof style.fontSize === \"number\" ? `${style.fontSize}px` : style.fontSize;\n  let fontFamilies = style.fontFamily;\n  if (!Array.isArray(style.fontFamily)) {\n    fontFamilies = style.fontFamily.split(\",\");\n  }\n  for (let i = fontFamilies.length - 1; i >= 0; i--) {\n    let fontFamily = fontFamilies[i].trim();\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontFamily) && !genericFontFamilies.includes(fontFamily)) {\n      fontFamily = `\"${fontFamily}\"`;\n    }\n    fontFamilies[i] = fontFamily;\n  }\n  return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${fontFamilies.join(\",\")}`;\n}\n\nexport { fontStringFromTextStyle };\n//# sourceMappingURL=fontStringFromTextStyle.mjs.map\n","import { lru } from 'tiny-lru';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\n\n\"use strict\";\nconst contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: true\n};\nconst _CanvasTextMetrics = class _CanvasTextMetrics {\n  /**\n   * Checking that we can use modern canvas 2D API.\n   *\n   * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n   * @see TextMetrics.experimentalLetterSpacing\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n   * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n   */\n  static get experimentalLetterSpacingSupported() {\n    let result = _CanvasTextMetrics._experimentalLetterSpacingSupported;\n    if (result === void 0) {\n      const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n      result = _CanvasTextMetrics._experimentalLetterSpacingSupported = \"letterSpacing\" in proto || \"textLetterSpacing\" in proto;\n    }\n    return result;\n  }\n  /**\n   * @param text - the text that was measured\n   * @param style - the style that was measured\n   * @param width - the measured width of the text\n   * @param height - the measured height of the text\n   * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n   * @param lineWidths - an array of the line widths for each line matched to `lines`\n   * @param lineHeight - the measured line height for this style\n   * @param maxLineWidth - the maximum line width for all measured lines\n   * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n   */\n  constructor(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines;\n    this.lineWidths = lineWidths;\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n  }\n  /**\n   * Measures the supplied string of text and returns a Rectangle.\n   * @param text - The text to measure.\n   * @param style - The text style to use for measuring\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @param wordWrap\n   * @returns Measured width and height of the text.\n   */\n  static measureText(text = \" \", style, canvas = _CanvasTextMetrics._canvas, wordWrap = style.wordWrap) {\n    const textKey = `${text}-${style.styleKey}-wordWrap-${wordWrap}`;\n    if (_CanvasTextMetrics._measurementCache.has(textKey)) {\n      return _CanvasTextMetrics._measurementCache.get(textKey);\n    }\n    const font = fontStringFromTextStyle(style);\n    const fontProperties = _CanvasTextMetrics.measureFont(font);\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n    const context = _CanvasTextMetrics.__context;\n    context.font = font;\n    const outputText = wordWrap ? _CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = _CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n    const strokeWidth = style._stroke?.width || 0;\n    let width = maxLineWidth + strokeWidth;\n    if (style.dropShadow) {\n      width += style.dropShadow.distance;\n    }\n    const lineHeight = style.lineHeight || fontProperties.fontSize;\n    let height = Math.max(lineHeight, fontProperties.fontSize + strokeWidth) + (lines.length - 1) * (lineHeight + style.leading);\n    if (style.dropShadow) {\n      height += style.dropShadow.distance;\n    }\n    const measurements = new _CanvasTextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n    _CanvasTextMetrics._measurementCache.set(textKey, measurements);\n    return measurements;\n  }\n  static _measureText(text, letterSpacing, context) {\n    let useExperimentalLetterSpacing = false;\n    if (_CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (_CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    const metrics = context.measureText(text);\n    let metricWidth = metrics.width;\n    const actualBoundingBoxLeft = -metrics.actualBoundingBoxLeft;\n    const actualBoundingBoxRight = metrics.actualBoundingBoxRight;\n    let boundsWidth = actualBoundingBoxRight - actualBoundingBoxLeft;\n    if (metricWidth > 0) {\n      if (useExperimentalLetterSpacing) {\n        metricWidth -= letterSpacing;\n        boundsWidth -= letterSpacing;\n      } else {\n        const val = (_CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n        metricWidth += val;\n        boundsWidth += val;\n      }\n    }\n    return Math.max(metricWidth, boundsWidth);\n  }\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   * @param text - String to apply word wrapping to\n   * @param style - the style to use when wrapping\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @returns New string with new lines applied where required\n   */\n  static _wordWrap(text, style, canvas = _CanvasTextMetrics._canvas) {\n    const context = canvas.getContext(\"2d\", contextSettings);\n    let width = 0;\n    let line = \"\";\n    let lines = \"\";\n    const cache = /* @__PURE__ */ Object.create(null);\n    const { letterSpacing, whiteSpace } = style;\n    const collapseSpaces = _CanvasTextMetrics._collapseSpaces(whiteSpace);\n    const collapseNewlines = _CanvasTextMetrics._collapseNewlines(whiteSpace);\n    let canPrependSpaces = !collapseSpaces;\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n    const tokens = _CanvasTextMetrics._tokenize(text);\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n      if (_CanvasTextMetrics._isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += _CanvasTextMetrics._addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = \"\";\n          width = 0;\n          continue;\n        }\n        token = \" \";\n      }\n      if (collapseSpaces) {\n        const currIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n      const tokenWidth = _CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n      if (tokenWidth > wordWrapWidth) {\n        if (line !== \"\") {\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (_CanvasTextMetrics.canBreakWords(token, style.breakWords)) {\n          const characters = _CanvasTextMetrics.wordWrapSplit(token);\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n            let lastChar = char;\n            let k = 1;\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              if (!_CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                char += nextChar;\n              } else {\n                break;\n              }\n              lastChar = nextChar;\n              k++;\n            }\n            j += k - 1;\n            const characterWidth = _CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n            if (characterWidth + width > wordWrapWidth) {\n              lines += _CanvasTextMetrics._addLine(line);\n              canPrependSpaces = false;\n              line = \"\";\n              width = 0;\n            }\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          if (line.length > 0) {\n            lines += _CanvasTextMetrics._addLine(line);\n            line = \"\";\n            width = 0;\n          }\n          const isLastToken = i === tokens.length - 1;\n          lines += _CanvasTextMetrics._addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = \"\";\n          width = 0;\n        }\n      } else {\n        if (tokenWidth + width > wordWrapWidth) {\n          canPrependSpaces = false;\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (line.length > 0 || !_CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          line += token;\n          width += tokenWidth;\n        }\n      }\n    }\n    lines += _CanvasTextMetrics._addLine(line, false);\n    return lines;\n  }\n  /**\n   * Convenience function for logging each line added during the wordWrap method.\n   * @param line    - The line of text to add\n   * @param newLine - Add new line character to end\n   * @returns A formatted line\n   */\n  static _addLine(line, newLine = true) {\n    line = _CanvasTextMetrics._trimRight(line);\n    line = newLine ? `${line}\n` : line;\n    return line;\n  }\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   * @param key            - The key\n   * @param letterSpacing  - The letter spacing\n   * @param cache          - The cache\n   * @param context        - The canvas context\n   * @returns The from cache.\n   */\n  static _getFromCache(key, letterSpacing, cache, context) {\n    let width = cache[key];\n    if (typeof width !== \"number\") {\n      width = _CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n      cache[key] = width;\n    }\n    return width;\n  }\n  /**\n   * Determines whether we should collapse breaking spaces.\n   * @param whiteSpace - The TextStyle property whiteSpace\n   * @returns Should collapse\n   */\n  static _collapseSpaces(whiteSpace) {\n    return whiteSpace === \"normal\" || whiteSpace === \"pre-line\";\n  }\n  /**\n   * Determines whether we should collapse newLine chars.\n   * @param whiteSpace - The white space\n   * @returns should collapse\n   */\n  static _collapseNewlines(whiteSpace) {\n    return whiteSpace === \"normal\";\n  }\n  /**\n   * Trims breaking whitespaces from string.\n   * @param text - The text\n   * @returns Trimmed string\n   */\n  static _trimRight(text) {\n    if (typeof text !== \"string\") {\n      return \"\";\n    }\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n      if (!_CanvasTextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n      text = text.slice(0, -1);\n    }\n    return text;\n  }\n  /**\n   * Determines if char is a newline.\n   * @param char - The character\n   * @returns True if newline, False otherwise.\n   */\n  static _isNewline(char) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n  }\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * It allows one to determine whether char should be a breaking whitespace\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param char - The character\n   * @param [_nextChar] - The next character\n   * @returns True if whitespace, False otherwise.\n   */\n  static isBreakingSpace(char, _nextChar) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n  }\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   * @param text - The text\n   * @returns A tokenized array\n   */\n  static _tokenize(text) {\n    const tokens = [];\n    let token = \"\";\n    if (typeof text !== \"string\") {\n      return tokens;\n    }\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const nextChar = text[i + 1];\n      if (_CanvasTextMetrics.isBreakingSpace(char, nextChar) || _CanvasTextMetrics._isNewline(char)) {\n        if (token !== \"\") {\n          tokens.push(token);\n          token = \"\";\n        }\n        if (char === \"\\r\" && nextChar === \"\\n\") {\n          tokens.push(\"\\r\\n\");\n          i++;\n        } else {\n          tokens.push(char);\n        }\n        continue;\n      }\n      token += char;\n    }\n    if (token !== \"\") {\n      tokens.push(token);\n    }\n    return tokens;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   * @param _token - The token\n   * @param breakWords - The style attr break words\n   * @returns Whether to break word or not\n   */\n  static canBreakWords(_token, breakWords) {\n    return breakWords;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to determine whether a pair of characters\n   * should be broken by newlines\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param _char - The character\n   * @param _nextChar - The next character\n   * @param _token - The token/word the characters are from\n   * @param _index - The index in the token of the char\n   * @param _breakWords - The style attr break words\n   * @returns whether to break word or not\n   */\n  static canBreakChars(_char, _nextChar, _token, _index, _breakWords) {\n    return true;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It is called when a token (usually a word) has to be split into separate pieces\n   * in order to determine the point to break a word.\n   * It must return an array of characters.\n   * @param token - The token to split\n   * @returns The characters of the token\n   * @see CanvasTextMetrics.graphemeSegmenter\n   */\n  static wordWrapSplit(token) {\n    return _CanvasTextMetrics.graphemeSegmenter(token);\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * @param font - String representing the style of the font\n   * @returns Font properties object\n   */\n  static measureFont(font) {\n    if (_CanvasTextMetrics._fonts[font]) {\n      return _CanvasTextMetrics._fonts[font];\n    }\n    const context = _CanvasTextMetrics._context;\n    context.font = font;\n    const metrics = context.measureText(_CanvasTextMetrics.METRICS_STRING + _CanvasTextMetrics.BASELINE_SYMBOL);\n    const properties = {\n      ascent: metrics.actualBoundingBoxAscent,\n      descent: metrics.actualBoundingBoxDescent,\n      fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n    };\n    _CanvasTextMetrics._fonts[font] = properties;\n    return properties;\n  }\n  /**\n   * Clear font metrics in metrics cache.\n   * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n   */\n  static clearMetrics(font = \"\") {\n    if (font) {\n      delete _CanvasTextMetrics._fonts[font];\n    } else {\n      _CanvasTextMetrics._fonts = {};\n    }\n  }\n  /**\n   * Cached canvas element for measuring text\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _canvas() {\n    if (!_CanvasTextMetrics.__canvas) {\n      let canvas;\n      try {\n        const c = new OffscreenCanvas(0, 0);\n        const context = c.getContext(\"2d\", contextSettings);\n        if (context?.measureText) {\n          _CanvasTextMetrics.__canvas = c;\n          return c;\n        }\n        canvas = DOMAdapter.get().createCanvas();\n      } catch (_cx) {\n        canvas = DOMAdapter.get().createCanvas();\n      }\n      canvas.width = canvas.height = 10;\n      _CanvasTextMetrics.__canvas = canvas;\n    }\n    return _CanvasTextMetrics.__canvas;\n  }\n  /**\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _context() {\n    if (!_CanvasTextMetrics.__context) {\n      _CanvasTextMetrics.__context = _CanvasTextMetrics._canvas.getContext(\"2d\", contextSettings);\n    }\n    return _CanvasTextMetrics.__context;\n  }\n};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n */\n_CanvasTextMetrics.METRICS_STRING = \"|\\xC9q\\xC5\";\n/** Baseline symbol for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_SYMBOL = \"M\";\n/** Baseline multiplier for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/** Height multiplier for setting height of canvas to calculate font metrics. */\n_CanvasTextMetrics.HEIGHT_MULTIPLIER = 2;\n/**\n * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n */\n_CanvasTextMetrics.graphemeSegmenter = (() => {\n  if (typeof Intl?.Segmenter === \"function\") {\n    const segmenter = new Intl.Segmenter();\n    return (s) => {\n      const segments = segmenter.segment(s);\n      const result = [];\n      let i = 0;\n      for (const segment of segments) {\n        result[i++] = segment.segment;\n      }\n      return result;\n    };\n  }\n  return (s) => [...s];\n})();\n/**\n * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n * lead to more accurate letter-spacing results because it does not try to manually draw\n * each character. However, this Chrome API is experimental and may not serve all cases yet.\n * @see TextMetrics.experimentalLetterSpacingSupported\n */\n_CanvasTextMetrics.experimentalLetterSpacing = false;\n/** Cache of {@link TextMetrics.FontMetrics} objects. */\n_CanvasTextMetrics._fonts = {};\n/** Cache of new line chars. */\n_CanvasTextMetrics._newlines = [\n  10,\n  // line feed\n  13\n  // carriage return\n];\n/** Cache of breaking spaces. */\n_CanvasTextMetrics._breakingSpaces = [\n  9,\n  // character tabulation\n  32,\n  // space\n  8192,\n  // en quad\n  8193,\n  // em quad\n  8194,\n  // en space\n  8195,\n  // em space\n  8196,\n  // three-per-em space\n  8197,\n  // four-per-em space\n  8198,\n  // six-per-em space\n  8200,\n  // punctuation space\n  8201,\n  // thin space\n  8202,\n  // hair space\n  8287,\n  // medium mathematical space\n  12288\n  // ideographic space\n];\n/** Cache for measured text metrics */\n_CanvasTextMetrics._measurementCache = lru(1e3);\nlet CanvasTextMetrics = _CanvasTextMetrics;\n\nexport { CanvasTextMetrics };\n//# sourceMappingURL=CanvasTextMetrics.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation } from '../../../../utils/logging/deprecation.mjs';\nimport { definedProps } from '../../../container/utils/definedProps.mjs';\n\n\"use strict\";\nconst emptyColorStops = [{ offset: 0, color: \"white\" }, { offset: 1, color: \"black\" }];\nconst _FillGradient = class _FillGradient {\n  constructor(...args) {\n    /**\n     * Unique identifier for this gradient instance\n     * @internal\n     */\n    this.uid = uid(\"fillGradient\");\n    /**\n     * Internal tick counter to track changes in the gradient.\n     * This is used to invalidate the gradient when the texture changes.\n     * @internal\n     */\n    this._tick = 0;\n    /** Type of gradient - currently only supports 'linear' */\n    this.type = \"linear\";\n    /** Array of color stops defining the gradient */\n    this.colorStops = [];\n    let options = ensureGradientOptions(args);\n    const defaults = options.type === \"radial\" ? _FillGradient.defaultRadialOptions : _FillGradient.defaultLinearOptions;\n    options = { ...defaults, ...definedProps(options) };\n    this._textureSize = options.textureSize;\n    this._wrapMode = options.wrapMode;\n    if (options.type === \"radial\") {\n      this.center = options.center;\n      this.outerCenter = options.outerCenter ?? this.center;\n      this.innerRadius = options.innerRadius;\n      this.outerRadius = options.outerRadius;\n      this.scale = options.scale;\n      this.rotation = options.rotation;\n    } else {\n      this.start = options.start;\n      this.end = options.end;\n    }\n    this.textureSpace = options.textureSpace;\n    this.type = options.type;\n    options.colorStops.forEach((stop) => {\n      this.addColorStop(stop.offset, stop.color);\n    });\n  }\n  /**\n   * Adds a color stop to the gradient\n   * @param offset - Position of the stop (0-1)\n   * @param color - Color of the stop\n   * @returns This gradient instance for chaining\n   */\n  addColorStop(offset, color) {\n    this.colorStops.push({ offset, color: Color.shared.setValue(color).toHexa() });\n    return this;\n  }\n  /**\n   * Builds the internal texture and transform for the gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildLinearGradient() {\n    if (this.texture)\n      return;\n    let { x: x0, y: y0 } = this.start;\n    let { x: x1, y: y1 } = this.end;\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    const flip = dx < 0 || dy < 0;\n    if (this._wrapMode === \"clamp-to-edge\") {\n      if (dx < 0) {\n        const temp = x0;\n        x0 = x1;\n        x1 = temp;\n        dx *= -1;\n      }\n      if (dy < 0) {\n        const temp = y0;\n        y0 = y1;\n        y1 = temp;\n        dy *= -1;\n      }\n    }\n    const colorStops = this.colorStops.length ? this.colorStops : emptyColorStops;\n    const defaultSize = this._textureSize;\n    const { canvas, context } = getCanvas(defaultSize, 1);\n    const gradient = !flip ? context.createLinearGradient(0, 0, this._textureSize, 0) : context.createLinearGradient(this._textureSize, 0, 0, 0);\n    addColorStops(gradient, colorStops);\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, defaultSize, 1);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressMode: this._wrapMode\n      })\n    });\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    const angle = Math.atan2(dy, dx);\n    const m = new Matrix();\n    m.scale(dist / defaultSize, 1);\n    m.rotate(angle);\n    m.translate(x0, y0);\n    if (this.textureSpace === \"local\") {\n      m.scale(defaultSize, defaultSize);\n    }\n    this.transform = m;\n  }\n  /**\n   * Builds the internal texture and transform for the gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildGradient() {\n    if (!this.texture)\n      this._tick++;\n    if (this.type === \"linear\") {\n      this.buildLinearGradient();\n    } else {\n      this.buildRadialGradient();\n    }\n  }\n  /**\n   * Builds the internal texture and transform for the radial gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildRadialGradient() {\n    if (this.texture)\n      return;\n    const colorStops = this.colorStops.length ? this.colorStops : emptyColorStops;\n    const defaultSize = this._textureSize;\n    const { canvas, context } = getCanvas(defaultSize, defaultSize);\n    const { x: x0, y: y0 } = this.center;\n    const { x: x1, y: y1 } = this.outerCenter;\n    const r0 = this.innerRadius;\n    const r1 = this.outerRadius;\n    const ox = x1 - r1;\n    const oy = y1 - r1;\n    const scale = defaultSize / (r1 * 2);\n    const cx = (x0 - ox) * scale;\n    const cy = (y0 - oy) * scale;\n    const gradient = context.createRadialGradient(\n      cx,\n      cy,\n      r0 * scale,\n      (x1 - ox) * scale,\n      (y1 - oy) * scale,\n      r1 * scale\n    );\n    addColorStops(gradient, colorStops);\n    context.fillStyle = colorStops[colorStops.length - 1].color;\n    context.fillRect(0, 0, defaultSize, defaultSize);\n    context.fillStyle = gradient;\n    context.translate(cx, cy);\n    context.rotate(this.rotation);\n    context.scale(1, this.scale);\n    context.translate(-cx, -cy);\n    context.fillRect(0, 0, defaultSize, defaultSize);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressMode: this._wrapMode\n      })\n    });\n    const m = new Matrix();\n    m.scale(1 / scale, 1 / scale);\n    m.translate(ox, oy);\n    if (this.textureSpace === \"local\") {\n      m.scale(defaultSize, defaultSize);\n    }\n    this.transform = m;\n  }\n  /** Destroys the gradient, releasing resources. This will also destroy the internal texture. */\n  destroy() {\n    this.texture?.destroy(true);\n    this.texture = null;\n    this.transform = null;\n    this.colorStops = [];\n    this.start = null;\n    this.end = null;\n    this.center = null;\n    this.outerCenter = null;\n  }\n  /**\n   * Returns a unique key for this gradient instance.\n   * This key is used for caching and texture management.\n   * @returns {string} Unique key for the gradient\n   */\n  get styleKey() {\n    return `fill-gradient-${this.uid}-${this._tick}`;\n  }\n};\n/** Default options for creating a gradient fill */\n_FillGradient.defaultLinearOptions = {\n  start: { x: 0, y: 0 },\n  end: { x: 0, y: 1 },\n  colorStops: [],\n  textureSpace: \"local\",\n  type: \"linear\",\n  textureSize: 256,\n  wrapMode: \"clamp-to-edge\"\n};\n/** Default options for creating a radial gradient fill */\n_FillGradient.defaultRadialOptions = {\n  center: { x: 0.5, y: 0.5 },\n  innerRadius: 0,\n  outerRadius: 0.5,\n  colorStops: [],\n  scale: 1,\n  textureSpace: \"local\",\n  type: \"radial\",\n  textureSize: 256,\n  wrapMode: \"clamp-to-edge\"\n};\nlet FillGradient = _FillGradient;\nfunction addColorStops(gradient, colorStops) {\n  for (let i = 0; i < colorStops.length; i++) {\n    const stop = colorStops[i];\n    gradient.addColorStop(stop.offset, stop.color);\n  }\n}\nfunction getCanvas(width, height) {\n  const canvas = DOMAdapter.get().createCanvas(width, height);\n  const context = canvas.getContext(\"2d\");\n  return { canvas, context };\n}\nfunction ensureGradientOptions(args) {\n  let options = args[0] ?? {};\n  if (typeof options === \"number\" || args[1]) {\n    deprecation(\"8.5.2\", `use options object instead`);\n    options = {\n      type: \"linear\",\n      start: { x: args[0], y: args[1] },\n      end: { x: args[2], y: args[3] },\n      textureSpace: args[4],\n      textureSize: args[5] ?? FillGradient.defaultLinearOptions.textureSize\n    };\n  }\n  return options;\n}\n\nexport { FillGradient };\n//# sourceMappingURL=FillGradient.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst repetitionMap = {\n  repeat: {\n    addressModeU: \"repeat\",\n    addressModeV: \"repeat\"\n  },\n  \"repeat-x\": {\n    addressModeU: \"repeat\",\n    addressModeV: \"clamp-to-edge\"\n  },\n  \"repeat-y\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"repeat\"\n  },\n  \"no-repeat\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"clamp-to-edge\"\n  }\n};\nclass FillPattern {\n  constructor(texture, repetition) {\n    /**\n     * unique id for this fill pattern\n     * @internal\n     */\n    this.uid = uid(\"fillPattern\");\n    /**\n     * Internal tick counter to track changes in the pattern.\n     * This is used to invalidate the pattern when the texture or transform changes.\n     * @internal\n     */\n    this._tick = 0;\n    /** The transform matrix applied to the pattern */\n    this.transform = new Matrix();\n    this.texture = texture;\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    if (repetition) {\n      texture.source.style.addressModeU = repetitionMap[repetition].addressModeU;\n      texture.source.style.addressModeV = repetitionMap[repetition].addressModeV;\n    }\n  }\n  /**\n   * Sets the transform for the pattern\n   * @param transform - The transform matrix to apply to the pattern.\n   * If not provided, the pattern will use the default transform.\n   */\n  setTransform(transform) {\n    const texture = this.texture;\n    this.transform.copyFrom(transform);\n    this.transform.invert();\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    this._tick++;\n  }\n  /** Internal texture used to render the gradient */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this._texture === value)\n      return;\n    this._texture = value;\n    this._tick++;\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `fill-pattern-${this.uid}-${this._tick}`;\n  }\n  /** Destroys the fill pattern, releasing resources. This will also destroy the internal texture. */\n  destroy() {\n    this.texture.destroy(true);\n    this.texture = null;\n  }\n}\n\nexport { FillPattern };\n//# sourceMappingURL=FillPattern.mjs.map\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","import parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction parseSVGPath(svgPath, path) {\n  const commands = parse(svgPath);\n  const subpaths = [];\n  let currentSubPath = null;\n  let lastX = 0;\n  let lastY = 0;\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    const type = command[0];\n    const data = command;\n    switch (type) {\n      case \"M\":\n        lastX = data[1];\n        lastY = data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"m\":\n        lastX += data[1];\n        lastY += data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"H\":\n        lastX = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"h\":\n        lastX += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"V\":\n        lastY = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"v\":\n        lastY += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"L\":\n        lastX = data[1];\n        lastY = data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"l\":\n        lastX += data[1];\n        lastY += data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"C\":\n        lastX = data[5];\n        lastY = data[6];\n        path.bezierCurveTo(\n          data[1],\n          data[2],\n          // First control point\n          data[3],\n          data[4],\n          // Second control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"c\":\n        path.bezierCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          // First control point\n          lastX + data[3],\n          lastY + data[4],\n          // Second control point\n          lastX + data[5],\n          lastY + data[6]\n          // End point\n        );\n        lastX += data[5];\n        lastY += data[6];\n        break;\n      case \"S\":\n        lastX = data[3];\n        lastY = data[4];\n        path.bezierCurveToShort(\n          data[1],\n          data[2],\n          // Control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"s\":\n        path.bezierCurveToShort(\n          lastX + data[1],\n          lastY + data[2],\n          // Control point\n          lastX + data[3],\n          lastY + data[4]\n          // End point\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"Q\":\n        lastX = data[3];\n        lastY = data[4];\n        path.quadraticCurveTo(\n          data[1],\n          data[2],\n          // Control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"q\":\n        path.quadraticCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          // Control point\n          lastX + data[3],\n          lastY + data[4]\n          // End point\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"T\":\n        lastX = data[1];\n        lastY = data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"t\":\n        lastX += data[1];\n        lastY += data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"A\":\n        lastX = data[6];\n        lastY = data[7];\n        path.arcToSvg(\n          data[1],\n          // rx\n          data[2],\n          // ry\n          data[3],\n          // x-axis-rotation\n          data[4],\n          // large-arc-flag\n          data[5],\n          // sweep-flag\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"a\":\n        lastX += data[6];\n        lastY += data[7];\n        path.arcToSvg(\n          data[1],\n          // rx\n          data[2],\n          // ry\n          data[3],\n          // x-axis-rotation\n          data[4],\n          // large-arc-flag\n          data[5],\n          // sweep-flag\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"Z\":\n      case \"z\":\n        path.closePath();\n        if (subpaths.length > 0) {\n          currentSubPath = subpaths.pop();\n          if (currentSubPath) {\n            lastX = currentSubPath.startX;\n            lastY = currentSubPath.startY;\n          } else {\n            lastX = 0;\n            lastY = 0;\n          }\n        }\n        currentSubPath = null;\n        break;\n      default:\n        warn(`Unknown SVG path command: ${type}`);\n    }\n    if (type !== \"Z\" && type !== \"z\") {\n      if (currentSubPath === null) {\n        currentSubPath = { startX: lastX, startY: lastY };\n        subpaths.push(currentSubPath);\n      }\n    }\n  }\n  return path;\n}\n\nexport { parseSVGPath };\n//# sourceMappingURL=parseSVGPath.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Circle {\n  /**\n   * @param x - The X coordinate of the center of this circle\n   * @param y - The Y coordinate of the center of this circle\n   * @param radius - The radius of the circle\n   */\n  constructor(x = 0, y = 0, radius = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks.\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Circle(0, 0, 50);\n     * console.log(shape.type); // 'circle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'circle') {\n     *     console.log(shape.radius);\n     * }\n     * ```\n     * @remarks\n     * - Used for shape type checking\n     * - More efficient than instanceof\n     * - Read-only property\n     * @readonly\n     * @default 'circle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     * @see {@link ShapePrimitive} For shape interface\n     */\n    this.type = \"circle\";\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }\n  /**\n   * Creates a clone of this Circle instance.\n   * @example\n   * ```ts\n   * // Basic circle cloning\n   * const original = new Circle(100, 100, 50);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.radius = 75;\n   *\n   * // Verify independence\n   * console.log(original.radius); // 50\n   * console.log(modified.radius); // 75\n   * ```\n   * @returns A copy of the Circle\n   * @see {@link Circle.copyFrom} For copying into existing circle\n   * @see {@link Circle.copyTo} For copying to another circle\n   */\n  clone() {\n    return new Circle(this.x, this.y, this.radius);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle.\n   *\n   * Uses the distance formula to determine if a point is inside the circle's radius.\n   *\n   * Commonly used for hit testing in PixiJS events and graphics.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const circle = new Circle(100, 100, 50);\n   * const isInside = circle.contains(120, 120);\n   *\n   * // Check mouse position\n   * const circle = new Circle(0, 0, 100);\n   * container.hitArea = circle;\n   * container.on('pointermove', (e) => {\n   *     // only called if pointer is within circle\n   * });\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Circle\n   * @see {@link Circle.strokeContains} For checking stroke intersection\n   * @see {@link Circle.getBounds} For getting bounding box\n   */\n  contains(x, y) {\n    if (this.radius <= 0)\n      return false;\n    const r2 = this.radius * this.radius;\n    let dx = this.x - x;\n    let dy = this.y - y;\n    dx *= dx;\n    dy *= dy;\n    return dx + dy <= r2;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const circle = new Circle(100, 100, 50);\n   * const isOnStroke = circle.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = circle.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = circle.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = circle.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width - The width of the line to check\n   * @param alignment - The alignment of the stroke, 0.5 by default\n   * @returns Whether the x/y coordinates are within this Circle's stroke\n   * @see {@link Circle.contains} For checking fill containment\n   * @see {@link Circle.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, width, alignment = 0.5) {\n    if (this.radius === 0)\n      return false;\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const radius = this.radius;\n    const outerWidth = (1 - alignment) * width;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return distance <= radius + outerWidth && distance > radius - (width - outerWidth);\n  }\n  /**\n   * Returns the framing rectangle of the circle as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const circle = new Circle(100, 100, 50);\n   * const bounds = circle.getBounds();\n   * // bounds: x=50, y=50, width=100, height=100\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * circle.getBounds(rect);\n   * ```\n   * @param out - Optional Rectangle object to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Circle.contains} For point containment\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x - this.radius;\n    out.y = this.y - this.radius;\n    out.width = this.radius * 2;\n    out.height = this.radius * 2;\n    return out;\n  }\n  /**\n   * Copies another circle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Circle(100, 100, 50);\n   * const target = new Circle();\n   * target.copyFrom(source);\n   * ```\n   * @param circle - The circle to copy from\n   * @returns Returns itself\n   * @see {@link Circle.copyTo} For copying to another circle\n   * @see {@link Circle.clone} For creating new circle copy\n   */\n  copyFrom(circle) {\n    this.x = circle.x;\n    this.y = circle.y;\n    this.radius = circle.radius;\n    return this;\n  }\n  /**\n   * Copies this circle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Circle(100, 100, 50);\n   * const target = new Circle();\n   * source.copyTo(target);\n   * ```\n   * @param circle - The circle to copy to\n   * @returns Returns given parameter\n   * @see {@link Circle.copyFrom} For copying from another circle\n   * @see {@link Circle.clone} For creating new circle copy\n   */\n  copyTo(circle) {\n    circle.copyFrom(this);\n    return circle;\n  }\n  toString() {\n    return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n  }\n}\n\nexport { Circle };\n//# sourceMappingURL=Circle.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Ellipse {\n  /**\n   * @param x - The X coordinate of the center of this ellipse\n   * @param y - The Y coordinate of the center of this ellipse\n   * @param halfWidth - The half width of this ellipse\n   * @param halfHeight - The half height of this ellipse\n   */\n  constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Ellipse(0, 0, 50, 25);\n     * console.log(shape.type); // 'ellipse'\n     *\n     * // Use in type guards\n     * if (shape.type === 'ellipse') {\n     *     console.log(shape.halfWidth, shape.halfHeight);\n     * }\n     * ```\n     * @readonly\n     * @default 'ellipse'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"ellipse\";\n    this.x = x;\n    this.y = y;\n    this.halfWidth = halfWidth;\n    this.halfHeight = halfHeight;\n  }\n  /**\n   * Creates a clone of this Ellipse instance.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Ellipse(100, 100, 50, 25);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.halfWidth *= 2;\n   * modified.halfHeight *= 2;\n   *\n   * // Verify independence\n   * console.log(original.halfWidth);  // 50\n   * console.log(modified.halfWidth);  // 100\n   * ```\n   * @returns A copy of the ellipse\n   * @see {@link Ellipse.copyFrom} For copying into existing ellipse\n   * @see {@link Ellipse.copyTo} For copying to another ellipse\n   */\n  clone() {\n    return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse.\n   * Uses normalized coordinates and the ellipse equation to determine containment.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const isInside = ellipse.contains(120, 110);\n   * ```\n   * @remarks\n   * - Uses ellipse equation (x/a + y/b  1)\n   * - Returns false if dimensions are 0 or negative\n   * - Normalized to center (0,0) for calculation\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coords are within this ellipse\n   * @see {@link Ellipse.strokeContains} For checking stroke intersection\n   * @see {@link Ellipse.getBounds} For getting containing rectangle\n   */\n  contains(x, y) {\n    if (this.halfWidth <= 0 || this.halfHeight <= 0) {\n      return false;\n    }\n    let normx = (x - this.x) / this.halfWidth;\n    let normy = (y - this.y) / this.halfHeight;\n    normx *= normx;\n    normy *= normy;\n    return normx + normy <= 1;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse including stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const isOnStroke = ellipse.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = ellipse.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = ellipse.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = ellipse.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @remarks\n   * - Uses normalized ellipse equations\n   * - Considers stroke alignment\n   * - Returns false if dimensions are 0\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coords are within this ellipse's stroke\n   * @see {@link Ellipse.contains} For checking fill containment\n   * @see {@link Ellipse.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const { halfWidth, halfHeight } = this;\n    if (halfWidth <= 0 || halfHeight <= 0) {\n      return false;\n    }\n    const strokeOuterWidth = strokeWidth * (1 - alignment);\n    const strokeInnerWidth = strokeWidth - strokeOuterWidth;\n    const innerHorizontal = halfWidth - strokeInnerWidth;\n    const innerVertical = halfHeight - strokeInnerWidth;\n    const outerHorizontal = halfWidth + strokeOuterWidth;\n    const outerVertical = halfHeight + strokeOuterWidth;\n    const normalizedX = x - this.x;\n    const normalizedY = y - this.y;\n    const innerEllipse = normalizedX * normalizedX / (innerHorizontal * innerHorizontal) + normalizedY * normalizedY / (innerVertical * innerVertical);\n    const outerEllipse = normalizedX * normalizedX / (outerHorizontal * outerHorizontal) + normalizedY * normalizedY / (outerVertical * outerVertical);\n    return innerEllipse > 1 && outerEllipse <= 1;\n  }\n  /**\n   * Returns the framing rectangle of the ellipse as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const bounds = ellipse.getBounds();\n   * // bounds: x=50, y=75, width=100, height=50\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * ellipse.getBounds(rect);\n   * ```\n   * @remarks\n   * - Creates Rectangle if none provided\n   * - Top-left is (x-halfWidth, y-halfHeight)\n   * - Width is halfWidth * 2\n   * - Height is halfHeight * 2\n   * @param out - Optional Rectangle object to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Ellipse.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x - this.halfWidth;\n    out.y = this.y - this.halfHeight;\n    out.width = this.halfWidth * 2;\n    out.height = this.halfHeight * 2;\n    return out;\n  }\n  /**\n   * Copies another ellipse to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Ellipse(100, 100, 50, 25);\n   * const target = new Ellipse();\n   * target.copyFrom(source);\n   * ```\n   * @param ellipse - The ellipse to copy from\n   * @returns Returns itself\n   * @see {@link Ellipse.copyTo} For copying to another ellipse\n   * @see {@link Ellipse.clone} For creating new ellipse copy\n   */\n  copyFrom(ellipse) {\n    this.x = ellipse.x;\n    this.y = ellipse.y;\n    this.halfWidth = ellipse.halfWidth;\n    this.halfHeight = ellipse.halfHeight;\n    return this;\n  }\n  /**\n   * Copies this ellipse to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Ellipse(100, 100, 50, 25);\n   * const target = new Ellipse();\n   * source.copyTo(target);\n   * ```\n   * @param ellipse - The ellipse to copy to\n   * @returns Returns given parameter\n   * @see {@link Ellipse.copyFrom} For copying from another ellipse\n   * @see {@link Ellipse.clone} For creating new ellipse copy\n   */\n  copyTo(ellipse) {\n    ellipse.copyFrom(this);\n    return ellipse;\n  }\n  toString() {\n    return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n  }\n}\n\nexport { Ellipse };\n//# sourceMappingURL=Ellipse.mjs.map\n","\"use strict\";\nfunction squaredDistanceToLineSegment(x, y, x1, y1, x2, y2) {\n  const a = x - x1;\n  const b = y - y1;\n  const c = x2 - x1;\n  const d = y2 - y1;\n  const dot = a * c + b * d;\n  const lenSq = c * c + d * d;\n  let param = -1;\n  if (lenSq !== 0) {\n    param = dot / lenSq;\n  }\n  let xx;\n  let yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * c;\n    yy = y1 + param * d;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return dx * dx + dy * dy;\n}\n\nexport { squaredDistanceToLineSegment };\n//# sourceMappingURL=squaredDistanceToLineSegment.mjs.map\n","import { deprecation } from '../../utils/logging/deprecation.mjs';\nimport { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment.mjs';\nimport { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nlet tempRect;\nlet tempRect2;\nclass Polygon {\n  /**\n   * @param points - This can be an array of Points\n   *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n   *  the arguments passed can be all the points of the polygon e.g.\n   *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n   *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n   */\n  constructor(...points) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Polygon([0, 0, 100, 0, 50, 100]);\n     * console.log(shape.type); // 'polygon'\n     *\n     * // Use in type guards\n     * if (shape.type === 'polygon') {\n     *     // TypeScript knows this is a Polygon\n     *     console.log(shape.points.length);\n     * }\n     * ```\n     * @readonly\n     * @default 'polygon'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"polygon\";\n    let flat = Array.isArray(points[0]) ? points[0] : points;\n    if (typeof flat[0] !== \"number\") {\n      const p = [];\n      for (let i = 0, il = flat.length; i < il; i++) {\n        p.push(flat[i].x, flat[i].y);\n      }\n      flat = p;\n    }\n    this.points = flat;\n    this.closePath = true;\n  }\n  /**\n   * Determines whether the polygon's points are arranged in a clockwise direction.\n   * Uses the shoelace formula (surveyor's formula) to calculate the signed area.\n   *\n   * A positive area indicates clockwise winding, while negative indicates counter-clockwise.\n   *\n   * The formula sums up the cross products of adjacent vertices:\n   * For each pair of adjacent points (x1,y1) and (x2,y2), we calculate (x1*y2 - x2*y1)\n   * The final sum divided by 2 gives the signed area - positive for clockwise.\n   * @example\n   * ```ts\n   * // Check polygon winding\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * console.log(polygon.isClockwise()); // Check direction\n   *\n   * // Use in path construction\n   * const hole = new Polygon([25, 25, 75, 25, 75, 75, 25, 75]);\n   * if (hole.isClockwise() === shape.isClockwise()) {\n   *     hole.points.reverse(); // Reverse for proper hole winding\n   * }\n   * ```\n   * @returns `true` if the polygon's points are arranged clockwise, `false` if counter-clockwise\n   */\n  isClockwise() {\n    let area = 0;\n    const points = this.points;\n    const length = points.length;\n    for (let i = 0; i < length; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % length];\n      const y2 = points[(i + 3) % length];\n      area += (x2 - x1) * (y2 + y1);\n    }\n    return area < 0;\n  }\n  /**\n   * Checks if this polygon completely contains another polygon.\n   * Used for detecting holes in shapes, like when parsing SVG paths.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const outerSquare = new Polygon([0,0, 100,0, 100,100, 0,100]); // A square\n   * const innerSquare = new Polygon([25,25, 75,25, 75,75, 25,75]); // A smaller square inside\n   *\n   * outerSquare.containsPolygon(innerSquare); // Returns true\n   * innerSquare.containsPolygon(outerSquare); // Returns false\n   * ```\n   * @remarks\n   * - Uses bounds check for quick rejection\n   * - Tests all points for containment\n   * @param polygon - The polygon to test for containment\n   * @returns True if this polygon completely contains the other polygon\n   * @see {@link Polygon.contains} For single point testing\n   * @see {@link Polygon.getBounds} For bounds calculation\n   */\n  containsPolygon(polygon) {\n    const thisBounds = this.getBounds(tempRect);\n    const otherBounds = polygon.getBounds(tempRect2);\n    if (!thisBounds.containsRect(otherBounds)) {\n      return false;\n    }\n    const points = polygon.points;\n    for (let i = 0; i < points.length; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      if (!this.contains(x, y)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  /**\n   * Creates a clone of this polygon.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.points[0] = 10; // Modify first x coordinate\n   * ```\n   * @returns A copy of the polygon\n   * @see {@link Polygon.copyFrom} For copying into existing polygon\n   * @see {@link Polygon.copyTo} For copying to another polygon\n   */\n  clone() {\n    const points = this.points.slice();\n    const polygon = new Polygon(points);\n    polygon.closePath = this.closePath;\n    return polygon;\n  }\n  /**\n   * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n   * Uses raycasting algorithm for point-in-polygon testing.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const isInside = polygon.contains(25, 25); // true\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this polygon\n   * @see {@link Polygon.strokeContains} For checking stroke intersection\n   * @see {@link Polygon.containsPolygon} For polygon-in-polygon testing\n   */\n  contains(x, y) {\n    let inside = false;\n    const length = this.points.length / 2;\n    for (let i = 0, j = length - 1; i < length; j = i++) {\n      const xi = this.points[i * 2];\n      const yi = this.points[i * 2 + 1];\n      const xj = this.points[j * 2];\n      const yj = this.points[j * 2 + 1];\n      const intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const isOnStroke = polygon.strokeContains(25, 25, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = polygon.strokeContains(25, 25, 4, 1);   // Inside\n   * const centerStroke = polygon.strokeContains(25, 25, 4, 0.5); // Centered\n   * const outerStroke = polygon.strokeContains(25, 25, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this polygon's stroke\n   * @see {@link Polygon.contains} For checking fill containment\n   * @see {@link Polygon.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const strokeWidthSquared = strokeWidth * strokeWidth;\n    const rightWidthSquared = strokeWidthSquared * (1 - alignment);\n    const leftWidthSquared = strokeWidthSquared - rightWidthSquared;\n    const { points } = this;\n    const iterationLength = points.length - (this.closePath ? 0 : 2);\n    for (let i = 0; i < iterationLength; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % points.length];\n      const y2 = points[(i + 3) % points.length];\n      const distanceSquared = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n      const sign = Math.sign((x2 - x1) * (y - y1) - (y2 - y1) * (x - x1));\n      if (distanceSquared <= (sign < 0 ? leftWidthSquared : rightWidthSquared)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Returns the framing rectangle of the polygon as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const bounds = polygon.getBounds();\n   * // bounds: x=0, y=0, width=100, height=100\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * polygon.getBounds(rect);\n   * ```\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Polygon.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    const points = this.points;\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      minX = x < minX ? x : minX;\n      maxX = x > maxX ? x : maxX;\n      minY = y < minY ? y : minY;\n      maxY = y > maxY ? y : maxY;\n    }\n    out.x = minX;\n    out.width = maxX - minX;\n    out.y = minY;\n    out.height = maxY - minY;\n    return out;\n  }\n  /**\n   * Copies another polygon to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const target = new Polygon();\n   * target.copyFrom(source);\n   * ```\n   * @param polygon - The polygon to copy from\n   * @returns Returns itself\n   * @see {@link Polygon.copyTo} For copying to another polygon\n   * @see {@link Polygon.clone} For creating new polygon copy\n   */\n  copyFrom(polygon) {\n    this.points = polygon.points.slice();\n    this.closePath = polygon.closePath;\n    return this;\n  }\n  /**\n   * Copies this polygon to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const target = new Polygon();\n   * source.copyTo(target);\n   * ```\n   * @param polygon - The polygon to copy to\n   * @returns Returns given parameter\n   * @see {@link Polygon.copyFrom} For copying from another polygon\n   * @see {@link Polygon.clone} For creating new polygon copy\n   */\n  copyTo(polygon) {\n    polygon.copyFrom(this);\n    return polygon;\n  }\n  toString() {\n    return `[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, \"\")}]`;\n  }\n  /**\n   * Get the last X coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.lastX); // 300\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the last vertex\n   * @see {@link Polygon.lastY} For last Y coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get lastX() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.lastY); // 400\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the last vertex\n   * @see {@link Polygon.lastX} For last X coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get lastY() {\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the last X coordinate of the polygon.\n   * @readonly\n   * @deprecated since 8.11.0, use {@link Polygon.lastX} instead.\n   */\n  get x() {\n    deprecation(\"8.11.0\", \"Polygon.lastX is deprecated, please use Polygon.lastX instead.\");\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon.\n   * @readonly\n   * @deprecated since 8.11.0, use {@link Polygon.lastY} instead.\n   */\n  get y() {\n    deprecation(\"8.11.0\", \"Polygon.y is deprecated, please use Polygon.lastY instead.\");\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the first X coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.x); // 0\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the first vertex\n   * @see {@link Polygon.startY} For first Y coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get startX() {\n    return this.points[0];\n  }\n  /**\n   * Get the first Y coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.y); // 0\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the first vertex\n   * @see {@link Polygon.startX} For first X coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get startY() {\n    return this.points[1];\n  }\n}\n\nexport { Polygon };\n//# sourceMappingURL=Polygon.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nconst isCornerWithinStroke = (pX, pY, cornerX, cornerY, radius, strokeWidthInner, strokeWidthOuter) => {\n  const dx = pX - cornerX;\n  const dy = pY - cornerY;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance >= radius - strokeWidthInner && distance <= radius + strokeWidthOuter;\n};\nclass RoundedRectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n   * @param width - The overall width of this rounded rectangle\n   * @param height - The overall height of this rounded rectangle\n   * @param radius - Controls the radius of the rounded corners\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0, radius = 20) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new RoundedRectangle(0, 0, 100, 100, 20);\n     * console.log(shape.type); // 'roundedRectangle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'roundedRectangle') {\n     *     console.log(shape.radius);\n     * }\n     * ```\n     * @readonly\n     * @default 'roundedRectangle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"roundedRectangle\";\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n  }\n  /**\n   * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const bounds = rect.getBounds();\n   * // bounds: x=100, y=100, width=200, height=150\n   *\n   * // Reuse existing rectangle\n   * const out = new Rectangle();\n   * rect.getBounds(out);\n   * ```\n   * @remarks\n   * - Rectangle matches outer dimensions\n   * - Ignores corner radius\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link RoundedRectangle.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x;\n    out.y = this.y;\n    out.width = this.width;\n    out.height = this.height;\n    return out;\n  }\n  /**\n   * Creates a clone of this Rounded Rectangle.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.radius = 30;\n   * modified.width *= 2;\n   *\n   * // Verify independence\n   * console.log(original.radius);  // 20\n   * console.log(modified.radius);  // 30\n   * ```\n   * @returns A copy of the rounded rectangle\n   * @see {@link RoundedRectangle.copyFrom} For copying into existing rectangle\n   * @see {@link RoundedRectangle.copyTo} For copying to another rectangle\n   */\n  clone() {\n    return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const target = new RoundedRectangle();\n   * target.copyFrom(source);\n   *\n   * // Chain with other operations\n   * const rect = new RoundedRectangle()\n   *     .copyFrom(source)\n   *     .getBounds(rect);\n   * ```\n   * @param rectangle - The rectangle to copy from\n   * @returns Returns itself\n   * @see {@link RoundedRectangle.copyTo} For copying to another rectangle\n   * @see {@link RoundedRectangle.clone} For creating new rectangle copy\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const target = new RoundedRectangle();\n   * source.copyTo(target);\n   *\n   * // Chain with other operations\n   * const result = source\n   *     .copyTo(new RoundedRectangle())\n   *     .getBounds();\n   * ```\n   * @param rectangle - The rectangle to copy to\n   * @returns Returns given parameter\n   * @see {@link RoundedRectangle.copyFrom} For copying from another rectangle\n   * @see {@link RoundedRectangle.clone} For creating new rectangle copy\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const isInside = rect.contains(150, 125); // true\n   * // Check corner radius\n   * const corner = rect.contains(100, 100); // false if within corner curve\n   * ```\n   * @remarks\n   * - Returns false if width/height is 0 or negative\n   * - Handles rounded corners with radius check\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rounded Rectangle\n   * @see {@link RoundedRectangle.strokeContains} For checking stroke intersection\n   * @see {@link RoundedRectangle.getBounds} For getting containing rectangle\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x <= this.x + this.width) {\n      if (y >= this.y && y <= this.y + this.height) {\n        const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (y >= this.y + radius && y <= this.y + this.height - radius || x >= this.x + radius && x <= this.x + this.width - radius) {\n          return true;\n        }\n        let dx = x - (this.x + radius);\n        let dy = y - (this.y + radius);\n        const radius2 = radius * radius;\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + this.width - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dy = y - (this.y + this.height - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const isOnStroke = rect.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = rect.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = rect.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = rect.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param pX - The X coordinate of the point to test\n   * @param pY - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this rectangle's stroke\n   * @see {@link RoundedRectangle.contains} For checking fill containment\n   * @see {@link RoundedRectangle.getBounds} For getting stroke bounds\n   */\n  strokeContains(pX, pY, strokeWidth, alignment = 0.5) {\n    const { x, y, width, height, radius } = this;\n    const strokeWidthOuter = strokeWidth * (1 - alignment);\n    const strokeWidthInner = strokeWidth - strokeWidthOuter;\n    const innerX = x + radius;\n    const innerY = y + radius;\n    const innerWidth = width - radius * 2;\n    const innerHeight = height - radius * 2;\n    const rightBound = x + width;\n    const bottomBound = y + height;\n    if ((pX >= x - strokeWidthOuter && pX <= x + strokeWidthInner || pX >= rightBound - strokeWidthInner && pX <= rightBound + strokeWidthOuter) && pY >= innerY && pY <= innerY + innerHeight) {\n      return true;\n    }\n    if ((pY >= y - strokeWidthOuter && pY <= y + strokeWidthInner || pY >= bottomBound - strokeWidthInner && pY <= bottomBound + strokeWidthOuter) && pX >= innerX && pX <= innerX + innerWidth) {\n      return true;\n    }\n    return (\n      // Top-left\n      pX < innerX && pY < innerY && isCornerWithinStroke(\n        pX,\n        pY,\n        innerX,\n        innerY,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX > rightBound - radius && pY < innerY && isCornerWithinStroke(\n        pX,\n        pY,\n        rightBound - radius,\n        innerY,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX > rightBound - radius && pY > bottomBound - radius && isCornerWithinStroke(\n        pX,\n        pY,\n        rightBound - radius,\n        bottomBound - radius,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX < innerX && pY > bottomBound - radius && isCornerWithinStroke(\n        pX,\n        pY,\n        innerX,\n        bottomBound - radius,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      )\n    );\n  }\n  toString() {\n    return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;\n  }\n}\n\nexport { RoundedRectangle };\n//# sourceMappingURL=RoundedRectangle.mjs.map\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cachedGroups = {};\nfunction getTextureBatchBindGroup(textures, size, maxTextures) {\n  let uid = 2166136261;\n  for (let i = 0; i < size; i++) {\n    uid ^= textures[i].uid;\n    uid = Math.imul(uid, 16777619);\n    uid >>>= 0;\n  }\n  return cachedGroups[uid] || generateTextureBatchBindGroup(textures, size, uid, maxTextures);\n}\nfunction generateTextureBatchBindGroup(textures, size, key, maxTextures) {\n  const bindGroupResources = {};\n  let bindIndex = 0;\n  for (let i = 0; i < maxTextures; i++) {\n    const texture = i < size ? textures[i] : Texture.EMPTY.source;\n    bindGroupResources[bindIndex++] = texture.source;\n    bindGroupResources[bindIndex++] = texture.style;\n  }\n  const bindGroup = new BindGroup(bindGroupResources);\n  cachedGroups[key] = bindGroup;\n  return bindGroup;\n}\n\nexport { getTextureBatchBindGroup };\n//# sourceMappingURL=getTextureBatchBindGroup.mjs.map\n","\"use strict\";\nclass ViewableBuffer {\n  constructor(sizeOrBuffer) {\n    if (typeof sizeOrBuffer === \"number\") {\n      this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n    } else if (sizeOrBuffer instanceof Uint8Array) {\n      this.rawBinaryData = sizeOrBuffer.buffer;\n    } else {\n      this.rawBinaryData = sizeOrBuffer;\n    }\n    this.uint32View = new Uint32Array(this.rawBinaryData);\n    this.float32View = new Float32Array(this.rawBinaryData);\n    this.size = this.rawBinaryData.byteLength;\n  }\n  /** View on the raw binary data as a `Int8Array`. */\n  get int8View() {\n    if (!this._int8View) {\n      this._int8View = new Int8Array(this.rawBinaryData);\n    }\n    return this._int8View;\n  }\n  /** View on the raw binary data as a `Uint8Array`. */\n  get uint8View() {\n    if (!this._uint8View) {\n      this._uint8View = new Uint8Array(this.rawBinaryData);\n    }\n    return this._uint8View;\n  }\n  /**  View on the raw binary data as a `Int16Array`. */\n  get int16View() {\n    if (!this._int16View) {\n      this._int16View = new Int16Array(this.rawBinaryData);\n    }\n    return this._int16View;\n  }\n  /** View on the raw binary data as a `Int32Array`. */\n  get int32View() {\n    if (!this._int32View) {\n      this._int32View = new Int32Array(this.rawBinaryData);\n    }\n    return this._int32View;\n  }\n  /** View on the raw binary data as a `Float64Array`. */\n  get float64View() {\n    if (!this._float64Array) {\n      this._float64Array = new Float64Array(this.rawBinaryData);\n    }\n    return this._float64Array;\n  }\n  /** View on the raw binary data as a `BigUint64Array`. */\n  get bigUint64View() {\n    if (!this._bigUint64Array) {\n      this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n    }\n    return this._bigUint64Array;\n  }\n  /**\n   * Returns the view of the given type.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *    `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - typed array of given type\n   */\n  view(type) {\n    return this[`${type}View`];\n  }\n  /** Destroys all buffer references. Do not use after calling this. */\n  destroy() {\n    this.rawBinaryData = null;\n    this._int8View = null;\n    this._uint8View = null;\n    this._int16View = null;\n    this.uint16View = null;\n    this._int32View = null;\n    this.uint32View = null;\n    this.float32View = null;\n  }\n  /**\n   * Returns the size of the given type in bytes.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *   `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - size of the type in bytes\n   */\n  static sizeOf(type) {\n    switch (type) {\n      case \"int8\":\n      case \"uint8\":\n        return 1;\n      case \"int16\":\n      case \"uint16\":\n        return 2;\n      case \"int32\":\n      case \"uint32\":\n      case \"float32\":\n        return 4;\n      default:\n        throw new Error(`${type} isn't a valid view type`);\n    }\n  }\n}\n\nexport { ViewableBuffer };\n//# sourceMappingURL=ViewableBuffer.mjs.map\n","\"use strict\";\nfunction fastCopy(sourceBuffer, destinationBuffer) {\n  const lengthDouble = sourceBuffer.byteLength / 8 | 0;\n  const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n  const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n  destinationFloat64View.set(sourceFloat64View);\n  const remainingBytes = sourceBuffer.byteLength - lengthDouble * 8;\n  if (remainingBytes > 0) {\n    const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n    const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n    destinationUint8View.set(sourceUint8View);\n  }\n}\n\nexport { fastCopy };\n//# sourceMappingURL=fastCopy.mjs.map\n","\"use strict\";\nconst BLEND_TO_NPM = {\n  normal: \"normal-npm\",\n  add: \"add-npm\",\n  screen: \"screen-npm\"\n};\nvar STENCIL_MODES = /* @__PURE__ */ ((STENCIL_MODES2) => {\n  STENCIL_MODES2[STENCIL_MODES2[\"DISABLED\"] = 0] = \"DISABLED\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_ADD\"] = 1] = \"RENDERING_MASK_ADD\";\n  STENCIL_MODES2[STENCIL_MODES2[\"MASK_ACTIVE\"] = 2] = \"MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"INVERSE_MASK_ACTIVE\"] = 3] = \"INVERSE_MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_REMOVE\"] = 4] = \"RENDERING_MASK_REMOVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"NONE\"] = 5] = \"NONE\";\n  return STENCIL_MODES2;\n})(STENCIL_MODES || {});\n\nexport { BLEND_TO_NPM, STENCIL_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { BLEND_TO_NPM } from './const.mjs';\n\n\"use strict\";\nfunction getAdjustedBlendModeBlend(blendMode, textureSource) {\n  if (textureSource.alphaMode === \"no-premultiply-alpha\") {\n    return BLEND_TO_NPM[blendMode] || blendMode;\n  }\n  return blendMode;\n}\n\nexport { getAdjustedBlendModeBlend };\n//# sourceMappingURL=getAdjustedBlendModeBlend.mjs.map\n","\"use strict\";\nconst fragTemplate = [\n  \"precision mediump float;\",\n  \"void main(void){\",\n  \"float test = 0.1;\",\n  \"%forloop%\",\n  \"gl_FragColor = vec4(0.0);\",\n  \"}\"\n].join(\"\\n\");\nfunction generateIfTestSrc(maxIfs) {\n  let src = \"\";\n  for (let i = 0; i < maxIfs; ++i) {\n    if (i > 0) {\n      src += \"\\nelse \";\n    }\n    if (i < maxIfs - 1) {\n      src += `if(test == ${i}.0){}`;\n    }\n  }\n  return src;\n}\nfunction checkMaxIfStatementsInShader(maxIfs, gl) {\n  if (maxIfs === 0) {\n    throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");\n  }\n  const shader = gl.createShader(gl.FRAGMENT_SHADER);\n  try {\n    while (true) {\n      const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n      gl.shaderSource(shader, fragmentSrc);\n      gl.compileShader(shader);\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        maxIfs = maxIfs / 2 | 0;\n      } else {\n        break;\n      }\n    }\n  } finally {\n    gl.deleteShader(shader);\n  }\n  return maxIfs;\n}\n\nexport { checkMaxIfStatementsInShader };\n//# sourceMappingURL=checkMaxIfStatementsInShader.mjs.map\n","import { getTestContext } from '../../../renderers/gl/shader/program/getTestContext.mjs';\nimport { checkMaxIfStatementsInShader } from './checkMaxIfStatementsInShader.mjs';\n\n\"use strict\";\nlet maxTexturesPerBatchCache = null;\nfunction getMaxTexturesPerBatch() {\n  if (maxTexturesPerBatchCache)\n    return maxTexturesPerBatchCache;\n  const gl = getTestContext();\n  maxTexturesPerBatchCache = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n  maxTexturesPerBatchCache = checkMaxIfStatementsInShader(\n    maxTexturesPerBatchCache,\n    gl\n  );\n  gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n  return maxTexturesPerBatchCache;\n}\n\nexport { getMaxTexturesPerBatch };\n//# sourceMappingURL=maxRecommendedTextures.mjs.map\n","\"use strict\";\nclass BatchTextureArray {\n  constructor() {\n    /** Respective locations for textures. */\n    this.ids = /* @__PURE__ */ Object.create(null);\n    this.textures = [];\n    this.count = 0;\n  }\n  /** Clear the textures and their locations. */\n  clear() {\n    for (let i = 0; i < this.count; i++) {\n      const t = this.textures[i];\n      this.textures[i] = null;\n      this.ids[t.uid] = null;\n    }\n    this.count = 0;\n  }\n}\n\nexport { BatchTextureArray };\n//# sourceMappingURL=BatchTextureArray.mjs.map\n","import { uid } from '../../../utils/data/uid.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { deprecation } from '../../../utils/logging/deprecation.mjs';\nimport { GlobalResourceRegistry } from '../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy.mjs';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures.mjs';\nimport { BatchTextureArray } from './BatchTextureArray.mjs';\n\n\"use strict\";\nclass Batch {\n  constructor() {\n    this.renderPipeId = \"batch\";\n    this.action = \"startBatch\";\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n    // for drawing..\n    this.start = 0;\n    this.size = 0;\n    this.textures = new BatchTextureArray();\n    this.blendMode = \"normal\";\n    this.topology = \"triangle-strip\";\n    this.canBundle = true;\n  }\n  destroy() {\n    this.textures = null;\n    this.gpuBindGroup = null;\n    this.bindGroup = null;\n    this.batcher = null;\n  }\n}\nconst batchPool = [];\nlet batchPoolIndex = 0;\nGlobalResourceRegistry.register({\n  clear: () => {\n    if (batchPool.length > 0) {\n      for (const item of batchPool) {\n        if (item)\n          item.destroy();\n      }\n    }\n    batchPool.length = 0;\n    batchPoolIndex = 0;\n  }\n});\nfunction getBatchFromPool() {\n  return batchPoolIndex > 0 ? batchPool[--batchPoolIndex] : new Batch();\n}\nfunction returnBatchToPool(batch) {\n  batchPool[batchPoolIndex++] = batch;\n}\nlet BATCH_TICK = 0;\nconst _Batcher = class _Batcher {\n  constructor(options) {\n    /** unique id for this batcher */\n    this.uid = uid(\"batcher\");\n    /** Indicates whether the batch data has been modified and needs updating. */\n    this.dirty = true;\n    /** The current index of the batch being processed. */\n    this.batchIndex = 0;\n    /** An array of all batches created during the current rendering process. */\n    this.batches = [];\n    this._elements = [];\n    options = { ..._Batcher.defaultOptions, ...options };\n    if (!options.maxTextures) {\n      deprecation(\"v8.8.0\", \"maxTextures is a required option for Batcher now, please pass it in the options\");\n      options.maxTextures = getMaxTexturesPerBatch();\n    }\n    const { maxTextures, attributesInitialSize, indicesInitialSize } = options;\n    this.attributeBuffer = new ViewableBuffer(attributesInitialSize * 4);\n    this.indexBuffer = new Uint16Array(indicesInitialSize);\n    this.maxTextures = maxTextures;\n  }\n  begin() {\n    this.elementSize = 0;\n    this.elementStart = 0;\n    this.indexSize = 0;\n    this.attributeSize = 0;\n    for (let i = 0; i < this.batchIndex; i++) {\n      returnBatchToPool(this.batches[i]);\n    }\n    this.batchIndex = 0;\n    this._batchIndexStart = 0;\n    this._batchIndexSize = 0;\n    this.dirty = true;\n  }\n  add(batchableObject) {\n    this._elements[this.elementSize++] = batchableObject;\n    batchableObject._indexStart = this.indexSize;\n    batchableObject._attributeStart = this.attributeSize;\n    batchableObject._batcher = this;\n    this.indexSize += batchableObject.indexSize;\n    this.attributeSize += batchableObject.attributeSize * this.vertexSize;\n  }\n  checkAndUpdateTexture(batchableObject, texture) {\n    const textureId = batchableObject._batch.textures.ids[texture._source.uid];\n    if (!textureId && textureId !== 0)\n      return false;\n    batchableObject._textureId = textureId;\n    batchableObject.texture = texture;\n    return true;\n  }\n  updateElement(batchableObject) {\n    this.dirty = true;\n    const attributeBuffer = this.attributeBuffer;\n    if (batchableObject.packAsQuad) {\n      this.packQuadAttributes(\n        batchableObject,\n        attributeBuffer.float32View,\n        attributeBuffer.uint32View,\n        batchableObject._attributeStart,\n        batchableObject._textureId\n      );\n    } else {\n      this.packAttributes(\n        batchableObject,\n        attributeBuffer.float32View,\n        attributeBuffer.uint32View,\n        batchableObject._attributeStart,\n        batchableObject._textureId\n      );\n    }\n  }\n  /**\n   * breaks the batcher. This happens when a batch gets too big,\n   * or we need to switch to a different type of rendering (a filter for example)\n   * @param instructionSet\n   */\n  break(instructionSet) {\n    const elements = this._elements;\n    if (!elements[this.elementStart])\n      return;\n    let batch = getBatchFromPool();\n    let textureBatch = batch.textures;\n    textureBatch.clear();\n    const firstElement = elements[this.elementStart];\n    let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n    let topology = firstElement.topology;\n    if (this.attributeSize * 4 > this.attributeBuffer.size) {\n      this._resizeAttributeBuffer(this.attributeSize * 4);\n    }\n    if (this.indexSize > this.indexBuffer.length) {\n      this._resizeIndexBuffer(this.indexSize);\n    }\n    const f32 = this.attributeBuffer.float32View;\n    const u32 = this.attributeBuffer.uint32View;\n    const indexBuffer = this.indexBuffer;\n    let size = this._batchIndexSize;\n    let start = this._batchIndexStart;\n    let action = \"startBatch\";\n    const maxTextures = this.maxTextures;\n    for (let i = this.elementStart; i < this.elementSize; ++i) {\n      const element = elements[i];\n      elements[i] = null;\n      const texture = element.texture;\n      const source = texture._source;\n      const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n      const breakRequired = blendMode !== adjustedBlendMode || topology !== element.topology;\n      if (source._batchTick === BATCH_TICK && !breakRequired) {\n        element._textureId = source._textureBindLocation;\n        size += element.indexSize;\n        if (element.packAsQuad) {\n          this.packQuadAttributes(\n            element,\n            f32,\n            u32,\n            element._attributeStart,\n            element._textureId\n          );\n          this.packQuadIndex(\n            indexBuffer,\n            element._indexStart,\n            element._attributeStart / this.vertexSize\n          );\n        } else {\n          this.packAttributes(\n            element,\n            f32,\n            u32,\n            element._attributeStart,\n            element._textureId\n          );\n          this.packIndex(\n            element,\n            indexBuffer,\n            element._indexStart,\n            element._attributeStart / this.vertexSize\n          );\n        }\n        element._batch = batch;\n        continue;\n      }\n      source._batchTick = BATCH_TICK;\n      if (textureBatch.count >= maxTextures || breakRequired) {\n        this._finishBatch(\n          batch,\n          start,\n          size - start,\n          textureBatch,\n          blendMode,\n          topology,\n          instructionSet,\n          action\n        );\n        action = \"renderBatch\";\n        start = size;\n        blendMode = adjustedBlendMode;\n        topology = element.topology;\n        batch = getBatchFromPool();\n        textureBatch = batch.textures;\n        textureBatch.clear();\n        ++BATCH_TICK;\n      }\n      element._textureId = source._textureBindLocation = textureBatch.count;\n      textureBatch.ids[source.uid] = textureBatch.count;\n      textureBatch.textures[textureBatch.count++] = source;\n      element._batch = batch;\n      size += element.indexSize;\n      if (element.packAsQuad) {\n        this.packQuadAttributes(\n          element,\n          f32,\n          u32,\n          element._attributeStart,\n          element._textureId\n        );\n        this.packQuadIndex(\n          indexBuffer,\n          element._indexStart,\n          element._attributeStart / this.vertexSize\n        );\n      } else {\n        this.packAttributes(\n          element,\n          f32,\n          u32,\n          element._attributeStart,\n          element._textureId\n        );\n        this.packIndex(\n          element,\n          indexBuffer,\n          element._indexStart,\n          element._attributeStart / this.vertexSize\n        );\n      }\n    }\n    if (textureBatch.count > 0) {\n      this._finishBatch(\n        batch,\n        start,\n        size - start,\n        textureBatch,\n        blendMode,\n        topology,\n        instructionSet,\n        action\n      );\n      start = size;\n      ++BATCH_TICK;\n    }\n    this.elementStart = this.elementSize;\n    this._batchIndexStart = start;\n    this._batchIndexSize = size;\n  }\n  _finishBatch(batch, indexStart, indexSize, textureBatch, blendMode, topology, instructionSet, action) {\n    batch.gpuBindGroup = null;\n    batch.bindGroup = null;\n    batch.action = action;\n    batch.batcher = this;\n    batch.textures = textureBatch;\n    batch.blendMode = blendMode;\n    batch.topology = topology;\n    batch.start = indexStart;\n    batch.size = indexSize;\n    ++BATCH_TICK;\n    this.batches[this.batchIndex++] = batch;\n    instructionSet.add(batch);\n  }\n  finish(instructionSet) {\n    this.break(instructionSet);\n  }\n  /**\n   * Resizes the attribute buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureAttributeBuffer(size) {\n    if (size * 4 <= this.attributeBuffer.size)\n      return;\n    this._resizeAttributeBuffer(size * 4);\n  }\n  /**\n   * Resizes the index buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureIndexBuffer(size) {\n    if (size <= this.indexBuffer.length)\n      return;\n    this._resizeIndexBuffer(size);\n  }\n  _resizeAttributeBuffer(size) {\n    const newSize = Math.max(size, this.attributeBuffer.size * 2);\n    const newArrayBuffer = new ViewableBuffer(newSize);\n    fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n    this.attributeBuffer = newArrayBuffer;\n  }\n  _resizeIndexBuffer(size) {\n    const indexBuffer = this.indexBuffer;\n    let newSize = Math.max(size, indexBuffer.length * 1.5);\n    newSize += newSize % 2;\n    const newIndexBuffer = newSize > 65535 ? new Uint32Array(newSize) : new Uint16Array(newSize);\n    if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT) {\n      for (let i = 0; i < indexBuffer.length; i++) {\n        newIndexBuffer[i] = indexBuffer[i];\n      }\n    } else {\n      fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n    }\n    this.indexBuffer = newIndexBuffer;\n  }\n  packQuadIndex(indexBuffer, index, indicesOffset) {\n    indexBuffer[index] = indicesOffset + 0;\n    indexBuffer[index + 1] = indicesOffset + 1;\n    indexBuffer[index + 2] = indicesOffset + 2;\n    indexBuffer[index + 3] = indicesOffset + 0;\n    indexBuffer[index + 4] = indicesOffset + 2;\n    indexBuffer[index + 5] = indicesOffset + 3;\n  }\n  packIndex(element, indexBuffer, index, indicesOffset) {\n    const indices = element.indices;\n    const size = element.indexSize;\n    const indexOffset = element.indexOffset;\n    const attributeOffset = element.attributeOffset;\n    for (let i = 0; i < size; i++) {\n      indexBuffer[index++] = indicesOffset + indices[i + indexOffset] - attributeOffset;\n    }\n  }\n  destroy() {\n    if (this.batches === null)\n      return;\n    for (let i = 0; i < this.batches.length; i++) {\n      returnBatchToPool(this.batches[i]);\n    }\n    this.batches = null;\n    for (let i = 0; i < this._elements.length; i++) {\n      if (this._elements[i])\n        this._elements[i]._batch = null;\n    }\n    this._elements = null;\n    this.indexBuffer = null;\n    this.attributeBuffer.destroy();\n    this.attributeBuffer = null;\n  }\n};\n_Batcher.defaultOptions = {\n  maxTextures: null,\n  attributesInitialSize: 4,\n  indicesInitialSize: 6\n};\nlet Batcher = _Batcher;\n\nexport { Batch, Batcher };\n//# sourceMappingURL=Batcher.mjs.map\n","\"use strict\";\nvar BufferUsage = /* @__PURE__ */ ((BufferUsage2) => {\n  BufferUsage2[BufferUsage2[\"MAP_READ\"] = 1] = \"MAP_READ\";\n  BufferUsage2[BufferUsage2[\"MAP_WRITE\"] = 2] = \"MAP_WRITE\";\n  BufferUsage2[BufferUsage2[\"COPY_SRC\"] = 4] = \"COPY_SRC\";\n  BufferUsage2[BufferUsage2[\"COPY_DST\"] = 8] = \"COPY_DST\";\n  BufferUsage2[BufferUsage2[\"INDEX\"] = 16] = \"INDEX\";\n  BufferUsage2[BufferUsage2[\"VERTEX\"] = 32] = \"VERTEX\";\n  BufferUsage2[BufferUsage2[\"UNIFORM\"] = 64] = \"UNIFORM\";\n  BufferUsage2[BufferUsage2[\"STORAGE\"] = 128] = \"STORAGE\";\n  BufferUsage2[BufferUsage2[\"INDIRECT\"] = 256] = \"INDIRECT\";\n  BufferUsage2[BufferUsage2[\"QUERY_RESOLVE\"] = 512] = \"QUERY_RESOLVE\";\n  BufferUsage2[BufferUsage2[\"STATIC\"] = 1024] = \"STATIC\";\n  return BufferUsage2;\n})(BufferUsage || {});\n\nexport { BufferUsage };\n//# sourceMappingURL=const.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { BufferUsage } from './const.mjs';\n\n\"use strict\";\nclass Buffer extends EventEmitter {\n  /**\n   * Creates a new Buffer with the given options\n   * @param options - the options for the buffer\n   */\n  constructor(options) {\n    let { data, size } = options;\n    const { usage, label, shrinkToFit } = options;\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"buffer\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /** @internal */\n    this._updateID = 1;\n    this._dataInt32 = null;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    this.shrinkToFit = true;\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    if (data instanceof Array) {\n      data = new Float32Array(data);\n    }\n    this._data = data;\n    size ?? (size = data?.byteLength);\n    const mappedAtCreation = !!data;\n    this.descriptor = {\n      size,\n      usage,\n      mappedAtCreation,\n      label\n    };\n    this.shrinkToFit = shrinkToFit ?? true;\n  }\n  /** the data in the buffer */\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    this.setDataWithSize(value, value.length, true);\n  }\n  get dataInt32() {\n    if (!this._dataInt32) {\n      this._dataInt32 = new Int32Array(this.data.buffer);\n    }\n    return this._dataInt32;\n  }\n  /** whether the buffer is static or not */\n  get static() {\n    return !!(this.descriptor.usage & BufferUsage.STATIC);\n  }\n  set static(value) {\n    if (value) {\n      this.descriptor.usage |= BufferUsage.STATIC;\n    } else {\n      this.descriptor.usage &= ~BufferUsage.STATIC;\n    }\n  }\n  /**\n   * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n   * If you only want to update a subset of the buffer, you can pass in the size of the data.\n   * @param value - the data to set\n   * @param size - the size of the data in bytes\n   * @param syncGPU - should the buffer be updated on the GPU immediately?\n   */\n  setDataWithSize(value, size, syncGPU) {\n    this._updateID++;\n    this._updateSize = size * value.BYTES_PER_ELEMENT;\n    if (this._data === value) {\n      if (syncGPU)\n        this.emit(\"update\", this);\n      return;\n    }\n    const oldData = this._data;\n    this._data = value;\n    this._dataInt32 = null;\n    if (!oldData || oldData.length !== value.length) {\n      if (!this.shrinkToFit && oldData && value.byteLength < oldData.byteLength) {\n        if (syncGPU)\n          this.emit(\"update\", this);\n      } else {\n        this.descriptor.size = value.byteLength;\n        this._resourceId = uid(\"resource\");\n        this.emit(\"change\", this);\n      }\n      return;\n    }\n    if (syncGPU)\n      this.emit(\"update\", this);\n  }\n  /**\n   * updates the buffer on the GPU to reflect the data in the buffer.\n   * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n   * you can pass in the size of the buffer to update.\n   * @param sizeInBytes - the new size of the buffer in bytes\n   */\n  update(sizeInBytes) {\n    this._updateSize = sizeInBytes ?? this._updateSize;\n    this._updateID++;\n    this.emit(\"update\", this);\n  }\n  /** Destroys the buffer */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this._data = null;\n    this.descriptor = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { Buffer };\n//# sourceMappingURL=Buffer.mjs.map\n","import { Buffer } from '../../buffer/Buffer.mjs';\nimport { BufferUsage } from '../../buffer/const.mjs';\n\n\"use strict\";\nfunction ensureIsBuffer(buffer, index) {\n  if (!(buffer instanceof Buffer)) {\n    let usage = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n    if (buffer instanceof Array) {\n      if (index) {\n        buffer = new Uint32Array(buffer);\n        usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n      } else {\n        buffer = new Float32Array(buffer);\n        usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n      }\n    }\n    buffer = new Buffer({\n      data: buffer,\n      label: index ? \"index-mesh-buffer\" : \"vertex-mesh-buffer\",\n      usage\n    });\n  }\n  return buffer;\n}\n\nexport { ensureIsBuffer };\n//# sourceMappingURL=ensureIsBuffer.mjs.map\n","\"use strict\";\nfunction getGeometryBounds(geometry, attributeId, bounds) {\n  const attribute = geometry.getAttribute(attributeId);\n  if (!attribute) {\n    bounds.minX = 0;\n    bounds.minY = 0;\n    bounds.maxX = 0;\n    bounds.maxY = 0;\n    return bounds;\n  }\n  const data = attribute.buffer.data;\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  const byteSize = data.BYTES_PER_ELEMENT;\n  const offset = (attribute.offset || 0) / byteSize;\n  const stride = (attribute.stride || 2 * 4) / byteSize;\n  for (let i = offset; i < data.length; i += stride) {\n    const x = data[i];\n    const y = data[i + 1];\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n  }\n  bounds.minX = minX;\n  bounds.minY = minY;\n  bounds.maxX = maxX;\n  bounds.maxY = maxY;\n  return bounds;\n}\n\nexport { getGeometryBounds };\n//# sourceMappingURL=getGeometryBounds.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer.mjs';\nimport { getGeometryBounds } from './utils/getGeometryBounds.mjs';\n\n\"use strict\";\nfunction ensureIsAttribute(attribute) {\n  if (attribute instanceof Buffer || Array.isArray(attribute) || attribute.BYTES_PER_ELEMENT) {\n    attribute = {\n      buffer: attribute\n    };\n  }\n  attribute.buffer = ensureIsBuffer(attribute.buffer, false);\n  return attribute;\n}\nclass Geometry extends EventEmitter {\n  /**\n   * Create a new instance of a geometry\n   * @param options - The options for the geometry.\n   */\n  constructor(options = {}) {\n    super();\n    /** The unique id of the geometry. */\n    this.uid = uid(\"geometry\");\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     */\n    this._layoutKey = 0;\n    /** the instance count of the geometry to draw */\n    this.instanceCount = 1;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    const { attributes, indexBuffer, topology } = options;\n    this.buffers = [];\n    this.attributes = {};\n    if (attributes) {\n      for (const i in attributes) {\n        this.addAttribute(i, attributes[i]);\n      }\n    }\n    this.instanceCount = options.instanceCount ?? 1;\n    if (indexBuffer) {\n      this.addIndex(indexBuffer);\n    }\n    this.topology = topology || \"triangle-list\";\n  }\n  onBufferUpdate() {\n    this._boundsDirty = true;\n    this.emit(\"update\", this);\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.getAttribute(id).buffer;\n  }\n  /**\n   * Used to figure out how many vertices there are in this geometry\n   * @returns the number of vertices in the geometry\n   */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      const buffer = attribute.buffer;\n      return buffer.data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /**\n   * Adds an attribute to the geometry.\n   * @param name - The name of the attribute to add.\n   * @param attributeOption - The attribute option to add.\n   */\n  addAttribute(name, attributeOption) {\n    const attribute = ensureIsAttribute(attributeOption);\n    const bufferIndex = this.buffers.indexOf(attribute.buffer);\n    if (bufferIndex === -1) {\n      this.buffers.push(attribute.buffer);\n      attribute.buffer.on(\"update\", this.onBufferUpdate, this);\n      attribute.buffer.on(\"change\", this.onBufferUpdate, this);\n    }\n    this.attributes[name] = attribute;\n  }\n  /**\n   * Adds an index buffer to the geometry.\n   * @param indexBuffer - The index buffer to add. Can be a Buffer, TypedArray, or an array of numbers.\n   */\n  addIndex(indexBuffer) {\n    this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n    this.buffers.push(this.indexBuffer);\n  }\n  /** Returns the bounds of the geometry. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    return getGeometryBounds(this, \"aPosition\", this._bounds);\n  }\n  /**\n   * destroys the geometry.\n   * @param destroyBuffers - destroy the buffers associated with this geometry\n   */\n  destroy(destroyBuffers = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    if (destroyBuffers) {\n      this.buffers.forEach((buffer) => buffer.destroy());\n    }\n    this.attributes = null;\n    this.buffers = null;\n    this.indexBuffer = null;\n    this._bounds = null;\n  }\n}\n\nexport { Geometry };\n//# sourceMappingURL=Geometry.mjs.map\n","import { Buffer } from '../../renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry.mjs';\n\n\"use strict\";\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\nclass BatchGeometry extends Geometry {\n  constructor() {\n    const vertexSize = 6;\n    const attributeBuffer = new Buffer({\n      data: placeHolderBufferData,\n      label: \"attribute-batch-buffer\",\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n      shrinkToFit: false\n    });\n    const indexBuffer = new Buffer({\n      data: placeHolderIndexData,\n      label: \"index-batch-buffer\",\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n      // | BufferUsage.STATIC,\n      shrinkToFit: false\n    });\n    const stride = vertexSize * 4;\n    super({\n      attributes: {\n        aPosition: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 0\n        },\n        aUV: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 2 * 4\n        },\n        aColor: {\n          buffer: attributeBuffer,\n          format: \"unorm8x4\",\n          stride,\n          offset: 4 * 4\n        },\n        aTextureIdAndRound: {\n          buffer: attributeBuffer,\n          format: \"uint16x2\",\n          stride,\n          offset: 5 * 4\n        }\n      },\n      indexBuffer\n    });\n  }\n}\n\nexport { BatchGeometry };\n//# sourceMappingURL=BatchGeometry.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addBits(srcParts, parts, name) {\n  if (srcParts) {\n    for (const i in srcParts) {\n      const id = i.toLocaleLowerCase();\n      const part = parts[id];\n      if (part) {\n        let sanitisedPart = srcParts[i];\n        if (i === \"header\") {\n          sanitisedPart = sanitisedPart.replace(/@in\\s+[^;]+;\\s*/g, \"\").replace(/@out\\s+[^;]+;\\s*/g, \"\");\n        }\n        if (name) {\n          part.push(`//----${name}----//`);\n        }\n        part.push(sanitisedPart);\n      } else {\n        warn(`${i} placement hook does not exist in shader`);\n      }\n    }\n  }\n}\n\nexport { addBits };\n//# sourceMappingURL=addBits.mjs.map\n","\"use strict\";\nconst findHooksRx = /\\{\\{(.*?)\\}\\}/g;\nfunction compileHooks(programSrc) {\n  const parts = {};\n  const partMatches = programSrc.match(findHooksRx)?.map((hook) => hook.replace(/[{()}]/g, \"\")) ?? [];\n  partMatches.forEach((hook) => {\n    parts[hook] = [];\n  });\n  return parts;\n}\n\nexport { compileHooks };\n//# sourceMappingURL=compileHooks.mjs.map\n","\"use strict\";\nfunction extractInputs(fragmentSource, out) {\n  let match;\n  const regex = /@in\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction compileInputs(fragments, template, sort = false) {\n  const results = [];\n  extractInputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractInputs(fragment.header, results);\n    }\n  });\n  const mainInput = results;\n  if (sort) {\n    mainInput.sort();\n  }\n  const finalString = mainInput.map((inValue, i) => `       @location(${i}) ${inValue},`).join(\"\\n\");\n  let cleanedString = template.replace(/@in\\s+[^;]+;\\s*/g, \"\");\n  cleanedString = cleanedString.replace(\"{{in}}\", `\n${finalString}\n`);\n  return cleanedString;\n}\n\nexport { compileInputs };\n//# sourceMappingURL=compileInputs.mjs.map\n","\"use strict\";\nfunction extractOutputs(fragmentSource, out) {\n  let match;\n  const regex = /@out\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction extractVariableName(value) {\n  const regex = /\\b(\\w+)\\s*:/g;\n  const match = regex.exec(value);\n  return match ? match[1] : \"\";\n}\nfunction stripVariable(value) {\n  const regex = /@.*?\\s+/g;\n  return value.replace(regex, \"\");\n}\nfunction compileOutputs(fragments, template) {\n  const results = [];\n  extractOutputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractOutputs(fragment.header, results);\n    }\n  });\n  let index = 0;\n  const mainStruct = results.sort().map((inValue) => {\n    if (inValue.indexOf(\"builtin\") > -1) {\n      return inValue;\n    }\n    return `@location(${index++}) ${inValue}`;\n  }).join(\",\\n\");\n  const mainStart = results.sort().map((inValue) => `       var ${stripVariable(inValue)};`).join(\"\\n\");\n  const mainEnd = `return VSOutput(\n            ${results.sort().map((inValue) => ` ${extractVariableName(inValue)}`).join(\",\\n\")});`;\n  let compiledCode = template.replace(/@out\\s+[^;]+;\\s*/g, \"\");\n  compiledCode = compiledCode.replace(\"{{struct}}\", `\n${mainStruct}\n`);\n  compiledCode = compiledCode.replace(\"{{start}}\", `\n${mainStart}\n`);\n  compiledCode = compiledCode.replace(\"{{return}}\", `\n${mainEnd}\n`);\n  return compiledCode;\n}\n\nexport { compileOutputs };\n//# sourceMappingURL=compileOutputs.mjs.map\n","\"use strict\";\nfunction injectBits(templateSrc, fragmentParts) {\n  let out = templateSrc;\n  for (const i in fragmentParts) {\n    const parts = fragmentParts[i];\n    const toInject = parts.join(\"\\n\");\n    if (toInject.length) {\n      out = out.replace(`{{${i}}}`, `//-----${i} START-----//\n${parts.join(\"\\n\")}\n//----${i} FINISH----//`);\n    } else {\n      out = out.replace(`{{${i}}}`, \"\");\n    }\n  }\n  return out;\n}\n\nexport { injectBits };\n//# sourceMappingURL=injectBits.mjs.map\n","import { addBits } from './utils/addBits.mjs';\nimport { compileHooks } from './utils/compileHooks.mjs';\nimport { compileInputs } from './utils/compileInputs.mjs';\nimport { compileOutputs } from './utils/compileOutputs.mjs';\nimport { injectBits } from './utils/injectBits.mjs';\n\n\"use strict\";\nconst cacheMap = /* @__PURE__ */ Object.create(null);\nconst bitCacheMap = /* @__PURE__ */ new Map();\nlet CACHE_UID = 0;\nfunction compileHighShader({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  const { vertex, fragment } = compileInputsAndOutputs(template, bits);\n  cacheMap[cacheId] = compileBits(vertex, fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileHighShaderGl({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  cacheMap[cacheId] = compileBits(template.vertex, template.fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileInputsAndOutputs(template, bits) {\n  const vertexFragments = bits.map((shaderBit) => shaderBit.vertex).filter((v) => !!v);\n  const fragmentFragments = bits.map((shaderBit) => shaderBit.fragment).filter((v) => !!v);\n  let compiledVertex = compileInputs(vertexFragments, template.vertex, true);\n  compiledVertex = compileOutputs(vertexFragments, compiledVertex);\n  const compiledFragment = compileInputs(fragmentFragments, template.fragment, true);\n  return {\n    vertex: compiledVertex,\n    fragment: compiledFragment\n  };\n}\nfunction generateCacheId(template, bits) {\n  return bits.map((highFragment) => {\n    if (!bitCacheMap.has(highFragment)) {\n      bitCacheMap.set(highFragment, CACHE_UID++);\n    }\n    return bitCacheMap.get(highFragment);\n  }).sort((a, b) => a - b).join(\"-\") + template.vertex + template.fragment;\n}\nfunction compileBits(vertex, fragment, bits) {\n  const vertexParts = compileHooks(vertex);\n  const fragmentParts = compileHooks(fragment);\n  bits.forEach((shaderBit) => {\n    addBits(shaderBit.vertex, vertexParts, shaderBit.name);\n    addBits(shaderBit.fragment, fragmentParts, shaderBit.name);\n  });\n  return {\n    vertex: injectBits(vertex, vertexParts),\n    fragment: injectBits(fragment, fragmentParts)\n  };\n}\n\nexport { compileHighShader, compileHighShaderGl };\n//# sourceMappingURL=compileHighShader.mjs.map\n","\"use strict\";\nconst vertexGPUTemplate = (\n  /* wgsl */\n  `\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n\n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n`\n);\nconst fragmentGPUTemplate = (\n  /* wgsl */\n  `\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n\n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n\n        {{start}}\n\n        var outColor:vec4<f32>;\n\n        {{main}}\n\n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n`\n);\nconst vertexGlTemplate = (\n  /* glsl */\n  `\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n\n        {{start}}\n\n        vColor = vec4(1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n`\n);\nconst fragmentGlTemplate = (\n  /* glsl */\n  `\n\n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n\n        {{start}}\n\n        vec4 outColor;\n\n        {{main}}\n\n        finalColor = outColor * vColor;\n\n        {{end}}\n    }\n`\n);\n\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate };\n//# sourceMappingURL=defaultProgramTemplate.mjs.map\n","\"use strict\";\nconst globalUniformsBit = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        `\n    )\n  }\n};\nconst globalUniformsUBOBitGl = {\n  name: \"global-uniforms-ubo-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform globalUniforms {\n            mat3 uProjectionMatrix;\n            mat3 uWorldTransformMatrix;\n            vec4 uWorldColorAlpha;\n            vec2 uResolution;\n          };\n        `\n    )\n  }\n};\nconst globalUniformsBitGl = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        `\n    )\n  }\n};\n\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl };\n//# sourceMappingURL=globalUniformsBit.mjs.map\n","import { GlProgram } from '../renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../renderers/gpu/shader/GpuProgram.mjs';\nimport { compileHighShader, compileHighShaderGl } from './compiler/compileHighShader.mjs';\nimport { fragmentGPUTemplate, vertexGPUTemplate, vertexGlTemplate, fragmentGlTemplate } from './defaultProgramTemplate.mjs';\nimport { globalUniformsBit, globalUniformsBitGl } from './shader-bits/globalUniformsBit.mjs';\n\n\"use strict\";\nfunction compileHighShaderGpuProgram({ bits, name }) {\n  const source = compileHighShader({\n    template: {\n      fragment: fragmentGPUTemplate,\n      vertex: vertexGPUTemplate\n    },\n    bits: [\n      globalUniformsBit,\n      ...bits\n    ]\n  });\n  return GpuProgram.from({\n    name,\n    vertex: {\n      source: source.vertex,\n      entryPoint: \"main\"\n    },\n    fragment: {\n      source: source.fragment,\n      entryPoint: \"main\"\n    }\n  });\n}\nfunction compileHighShaderGlProgram({ bits, name }) {\n  return new GlProgram({\n    name,\n    ...compileHighShaderGl({\n      template: {\n        vertex: vertexGlTemplate,\n        fragment: fragmentGlTemplate\n      },\n      bits: [\n        globalUniformsBitGl,\n        ...bits\n      ]\n    })\n  });\n}\n\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram };\n//# sourceMappingURL=compileHighShaderToProgram.mjs.map\n","\"use strict\";\nconst colorBit = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            @in aColor: vec4<f32>;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\nconst colorBitGl = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            in vec4 aColor;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\n\nexport { colorBit, colorBitGl };\n//# sourceMappingURL=colorBit.mjs.map\n","\"use strict\";\nconst textureBatchBitGpuCache = {};\nfunction generateBindingSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"@group(1) @binding(0) var textureSource1: texture_2d<f32>;\");\n    src.push(\"@group(1) @binding(1) var textureSampler1: sampler;\");\n  } else {\n    let bindingIndex = 0;\n    for (let i = 0; i < maxTextures; i++) {\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSource${i + 1}: texture_2d<f32>;`);\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSampler${i + 1}: sampler;`);\n    }\n  }\n  return src.join(\"\\n\");\n}\nfunction generateSampleSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);\");\n  } else {\n    src.push(\"switch vTextureId {\");\n    for (let i = 0; i < maxTextures; i++) {\n      if (i === maxTextures - 1) {\n        src.push(`  default:{`);\n      } else {\n        src.push(`  case ${i}:{`);\n      }\n      src.push(`      outColor = textureSampleGrad(textureSource${i + 1}, textureSampler${i + 1}, vUV, uvDx, uvDy);`);\n      src.push(`      break;}`);\n    }\n    src.push(`}`);\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBit(maxTextures) {\n  if (!textureBatchBitGpuCache[maxTextures]) {\n    textureBatchBitGpuCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${generateBindingSrc(maxTextures)}\n            `,\n        main: `\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${generateSampleSrc(maxTextures)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGpuCache[maxTextures];\n}\nconst textureBatchBitGlCache = {};\nfunction generateSampleGlSrc(maxTextures) {\n  const src = [];\n  for (let i = 0; i < maxTextures; i++) {\n    if (i > 0) {\n      src.push(\"else\");\n    }\n    if (i < maxTextures - 1) {\n      src.push(`if(vTextureId < ${i}.5)`);\n    }\n    src.push(\"{\");\n    src.push(`\toutColor = texture(uTextures[${i}], vUV);`);\n    src.push(\"}\");\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBitGl(maxTextures) {\n  if (!textureBatchBitGlCache[maxTextures]) {\n    textureBatchBitGlCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${maxTextures}];\n\n            `,\n        main: `\n\n                ${generateSampleGlSrc(maxTextures)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGlCache[maxTextures];\n}\n\nexport { generateTextureBatchBit, generateTextureBatchBitGl };\n//# sourceMappingURL=generateTextureBatchBit.mjs.map\n","\"use strict\";\nconst roundPixelsBit = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\nconst roundPixelsBitGl = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\n\nexport { roundPixelsBit, roundPixelsBitGl };\n//# sourceMappingURL=roundPixelsBit.mjs.map\n","import { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nconst batchSamplersUniformGroupHash = {};\nfunction getBatchSamplersUniformGroup(maxTextures) {\n  let batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures];\n  if (batchSamplersUniformGroup)\n    return batchSamplersUniformGroup;\n  const sampleValues = new Int32Array(maxTextures);\n  for (let i = 0; i < maxTextures; i++) {\n    sampleValues[i] = i;\n  }\n  batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures] = new UniformGroup({\n    uTextures: { value: sampleValues, type: `i32`, size: maxTextures }\n  }, { isStatic: true });\n  return batchSamplersUniformGroup;\n}\n\nexport { getBatchSamplersUniformGroup };\n//# sourceMappingURL=getBatchSamplersUniformGroup.mjs.map\n","import { compileHighShaderGlProgram, compileHighShaderGpuProgram } from '../../high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl, colorBit } from '../../high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl, generateTextureBatchBit } from '../../high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBitGl, roundPixelsBit } from '../../high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../renderers/shared/shader/Shader.mjs';\n\n\"use strict\";\nclass DefaultShader extends Shader {\n  constructor(maxTextures) {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"batch\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        roundPixelsBitGl\n      ]\n    });\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"batch\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(maxTextures),\n        roundPixelsBit\n      ]\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n  }\n}\n\nexport { DefaultShader };\n//# sourceMappingURL=DefaultShader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Batcher } from './Batcher.mjs';\nimport { BatchGeometry } from './BatchGeometry.mjs';\nimport { DefaultShader } from './DefaultShader.mjs';\n\n\"use strict\";\nlet defaultShader = null;\nconst _DefaultBatcher = class _DefaultBatcher extends Batcher {\n  constructor(options) {\n    super(options);\n    this.geometry = new BatchGeometry();\n    this.name = _DefaultBatcher.extension.name;\n    /** The size of one attribute. 1 = 32 bit. x, y, u, v, color, textureIdAndRound -> total = 6 */\n    this.vertexSize = 6;\n    defaultShader ?? (defaultShader = new DefaultShader(options.maxTextures));\n    this.shader = defaultShader;\n  }\n  /**\n   * Packs the attributes of a DefaultBatchableMeshElement into the provided views.\n   * @param element - The DefaultBatchableMeshElement to pack.\n   * @param float32View - The Float32Array view to pack into.\n   * @param uint32View - The Uint32Array view to pack into.\n   * @param index - The starting index in the views.\n   * @param textureId - The texture ID to use.\n   */\n  packAttributes(element, float32View, uint32View, index, textureId) {\n    const textureIdAndRound = textureId << 16 | element.roundPixels & 65535;\n    const wt = element.transform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const { positions, uvs } = element;\n    const argb = element.color;\n    const offset = element.attributeOffset;\n    const end = offset + element.attributeSize;\n    for (let i = offset; i < end; i++) {\n      const i2 = i * 2;\n      const x = positions[i2];\n      const y = positions[i2 + 1];\n      float32View[index++] = a * x + c * y + tx;\n      float32View[index++] = d * y + b * x + ty;\n      float32View[index++] = uvs[i2];\n      float32View[index++] = uvs[i2 + 1];\n      uint32View[index++] = argb;\n      uint32View[index++] = textureIdAndRound;\n    }\n  }\n  /**\n   * Packs the attributes of a DefaultBatchableQuadElement into the provided views.\n   * @param element - The DefaultBatchableQuadElement to pack.\n   * @param float32View - The Float32Array view to pack into.\n   * @param uint32View - The Uint32Array view to pack into.\n   * @param index - The starting index in the views.\n   * @param textureId - The texture ID to use.\n   */\n  packQuadAttributes(element, float32View, uint32View, index, textureId) {\n    const texture = element.texture;\n    const wt = element.transform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const bounds = element.bounds;\n    const w0 = bounds.maxX;\n    const w1 = bounds.minX;\n    const h0 = bounds.maxY;\n    const h1 = bounds.minY;\n    const uvs = texture.uvs;\n    const argb = element.color;\n    const textureIdAndRound = textureId << 16 | element.roundPixels & 65535;\n    float32View[index + 0] = a * w1 + c * h1 + tx;\n    float32View[index + 1] = d * h1 + b * w1 + ty;\n    float32View[index + 2] = uvs.x0;\n    float32View[index + 3] = uvs.y0;\n    uint32View[index + 4] = argb;\n    uint32View[index + 5] = textureIdAndRound;\n    float32View[index + 6] = a * w0 + c * h1 + tx;\n    float32View[index + 7] = d * h1 + b * w0 + ty;\n    float32View[index + 8] = uvs.x1;\n    float32View[index + 9] = uvs.y1;\n    uint32View[index + 10] = argb;\n    uint32View[index + 11] = textureIdAndRound;\n    float32View[index + 12] = a * w0 + c * h0 + tx;\n    float32View[index + 13] = d * h0 + b * w0 + ty;\n    float32View[index + 14] = uvs.x2;\n    float32View[index + 15] = uvs.y2;\n    uint32View[index + 16] = argb;\n    uint32View[index + 17] = textureIdAndRound;\n    float32View[index + 18] = a * w1 + c * h0 + tx;\n    float32View[index + 19] = d * h0 + b * w1 + ty;\n    float32View[index + 20] = uvs.x3;\n    float32View[index + 21] = uvs.y3;\n    uint32View[index + 22] = argb;\n    uint32View[index + 23] = textureIdAndRound;\n  }\n};\n/** @ignore */\n_DefaultBatcher.extension = {\n  type: [\n    ExtensionType.Batcher\n  ],\n  name: \"default\"\n};\nlet DefaultBatcher = _DefaultBatcher;\n\nexport { DefaultBatcher };\n//# sourceMappingURL=DefaultBatcher.mjs.map\n","\"use strict\";\nfunction buildUvs(vertices, verticesStride, verticesOffset, uvs, uvsOffset, uvsStride, size, matrix = null) {\n  let index = 0;\n  verticesOffset *= verticesStride;\n  uvsOffset *= uvsStride;\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  while (index < size) {\n    const x = vertices[verticesOffset];\n    const y = vertices[verticesOffset + 1];\n    uvs[uvsOffset] = a * x + c * y + tx;\n    uvs[uvsOffset + 1] = b * x + d * y + ty;\n    uvsOffset += uvsStride;\n    verticesOffset += verticesStride;\n    index++;\n  }\n}\nfunction buildSimpleUvs(uvs, uvsOffset, uvsStride, size) {\n  let index = 0;\n  uvsOffset *= uvsStride;\n  while (index < size) {\n    uvs[uvsOffset] = 0;\n    uvs[uvsOffset + 1] = 0;\n    uvsOffset += uvsStride;\n    index++;\n  }\n}\n\nexport { buildSimpleUvs, buildUvs };\n//# sourceMappingURL=buildUvs.mjs.map\n","\"use strict\";\nfunction transformVertices(vertices, m, offset, stride, size) {\n  const a = m.a;\n  const b = m.b;\n  const c = m.c;\n  const d = m.d;\n  const tx = m.tx;\n  const ty = m.ty;\n  offset || (offset = 0);\n  stride || (stride = 2);\n  size || (size = vertices.length / stride - offset);\n  let index = offset * stride;\n  for (let i = 0; i < size; i++) {\n    const x = vertices[index];\n    const y = vertices[index + 1];\n    vertices[index] = a * x + c * y + tx;\n    vertices[index + 1] = b * x + d * y + ty;\n    index += stride;\n  }\n}\n\nexport { transformVertices };\n//# sourceMappingURL=transformVertices.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { multiplyHexColors } from '../../container/utils/multiplyHexColors.mjs';\n\n\"use strict\";\nconst identityMatrix = new Matrix();\nclass BatchableGraphics {\n  constructor() {\n    this.packAsQuad = false;\n    this.batcherName = \"default\";\n    this.topology = \"triangle-list\";\n    this.applyTransform = true;\n    this.roundPixels = 0;\n    this._batcher = null;\n    this._batch = null;\n  }\n  get uvs() {\n    return this.geometryData.uvs;\n  }\n  get positions() {\n    return this.geometryData.vertices;\n  }\n  get indices() {\n    return this.geometryData.indices;\n  }\n  get blendMode() {\n    if (this.renderable && this.applyTransform) {\n      return this.renderable.groupBlendMode;\n    }\n    return \"normal\";\n  }\n  get color() {\n    const rgb = this.baseColor;\n    const bgr = rgb >> 16 | rgb & 65280 | (rgb & 255) << 16;\n    const renderable = this.renderable;\n    if (renderable) {\n      return multiplyHexColors(bgr, renderable.groupColor) + (this.alpha * renderable.groupAlpha * 255 << 24);\n    }\n    return bgr + (this.alpha * 255 << 24);\n  }\n  get transform() {\n    return this.renderable?.groupTransform || identityMatrix;\n  }\n  copyTo(gpuBuffer) {\n    gpuBuffer.indexOffset = this.indexOffset;\n    gpuBuffer.indexSize = this.indexSize;\n    gpuBuffer.attributeOffset = this.attributeOffset;\n    gpuBuffer.attributeSize = this.attributeSize;\n    gpuBuffer.baseColor = this.baseColor;\n    gpuBuffer.alpha = this.alpha;\n    gpuBuffer.texture = this.texture;\n    gpuBuffer.geometryData = this.geometryData;\n    gpuBuffer.topology = this.topology;\n  }\n  reset() {\n    this.applyTransform = true;\n    this.renderable = null;\n    this.topology = \"triangle-list\";\n  }\n  destroy() {\n    this.renderable = null;\n    this.texture = null;\n    this.geometryData = null;\n    this._batcher = null;\n    this._batch = null;\n  }\n}\n\nexport { BatchableGraphics };\n//# sourceMappingURL=BatchableGraphics.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildCircle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"circle\"\n  },\n  build(shape, points) {\n    let x;\n    let y;\n    let dx;\n    let dy;\n    let rx;\n    let ry;\n    if (shape.type === \"circle\") {\n      const circle = shape;\n      rx = ry = circle.radius;\n      if (rx <= 0) {\n        return false;\n      }\n      x = circle.x;\n      y = circle.y;\n      dx = dy = 0;\n    } else if (shape.type === \"ellipse\") {\n      const ellipse = shape;\n      rx = ellipse.halfWidth;\n      ry = ellipse.halfHeight;\n      if (rx <= 0 || ry <= 0) {\n        return false;\n      }\n      x = ellipse.x;\n      y = ellipse.y;\n      dx = dy = 0;\n    } else {\n      const roundedRect = shape;\n      const halfWidth = roundedRect.width / 2;\n      const halfHeight = roundedRect.height / 2;\n      x = roundedRect.x + halfWidth;\n      y = roundedRect.y + halfHeight;\n      rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n      dx = halfWidth - rx;\n      dy = halfHeight - ry;\n    }\n    if (dx < 0 || dy < 0) {\n      return false;\n    }\n    const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n    const m = n * 8 + (dx ? 4 : 0) + (dy ? 4 : 0);\n    if (m === 0) {\n      return false;\n    }\n    if (n === 0) {\n      points[0] = points[6] = x + dx;\n      points[1] = points[3] = y + dy;\n      points[2] = points[4] = x - dx;\n      points[5] = points[7] = y - dy;\n      return true;\n    }\n    let j1 = 0;\n    let j2 = n * 4 + (dx ? 2 : 0) + 2;\n    let j3 = j2;\n    let j4 = m;\n    let x0 = dx + rx;\n    let y0 = dy;\n    let x1 = x + x0;\n    let x2 = x - x0;\n    let y1 = y + y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j2] = y1;\n    points[--j2] = x2;\n    if (dy) {\n      const y22 = y - y0;\n      points[j3++] = x2;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x1;\n    }\n    for (let i = 1; i < n; i++) {\n      const a = Math.PI / 2 * (i / n);\n      const x02 = dx + Math.cos(a) * rx;\n      const y02 = dy + Math.sin(a) * ry;\n      const x12 = x + x02;\n      const x22 = x - x02;\n      const y12 = y + y02;\n      const y22 = y - y02;\n      points[j1++] = x12;\n      points[j1++] = y12;\n      points[--j2] = y12;\n      points[--j2] = x22;\n      points[j3++] = x22;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x12;\n    }\n    x0 = dx;\n    y0 = dy + ry;\n    x1 = x + x0;\n    x2 = x - x0;\n    y1 = y + y0;\n    const y2 = y - y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j4] = y2;\n    points[--j4] = x1;\n    if (dx) {\n      points[j1++] = x2;\n      points[j1++] = y1;\n      points[--j4] = y2;\n      points[--j4] = x2;\n    }\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    if (points.length === 0) {\n      return;\n    }\n    let centerX = 0;\n    let centerY = 0;\n    for (let i = 0; i < points.length; i += 2) {\n      centerX += points[i];\n      centerY += points[i + 1];\n    }\n    centerX /= points.length / 2;\n    centerY /= points.length / 2;\n    let count = verticesOffset;\n    vertices[count * verticesStride] = centerX;\n    vertices[count * verticesStride + 1] = centerY;\n    const centerIndex = count++;\n    for (let i = 0; i < points.length; i += 2) {\n      vertices[count * verticesStride] = points[i];\n      vertices[count * verticesStride + 1] = points[i + 1];\n      if (i > 0) {\n        indices[indicesOffset++] = count;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n      }\n      count++;\n    }\n    indices[indicesOffset++] = centerIndex + 1;\n    indices[indicesOffset++] = centerIndex;\n    indices[indicesOffset++] = count - 1;\n  }\n};\nconst buildEllipse = { ...buildCircle, extension: { ...buildCircle.extension, name: \"ellipse\" } };\nconst buildRoundedRectangle = { ...buildCircle, extension: { ...buildCircle.extension, name: \"roundedRectangle\" } };\n\nexport { buildCircle, buildEllipse, buildRoundedRectangle };\n//# sourceMappingURL=buildCircle.mjs.map\n","\"use strict\";\nconst closePointEps = 1e-4;\nconst curveEps = 1e-4;\n\nexport { closePointEps, curveEps };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction getOrientationOfPoints(points) {\n  const m = points.length;\n  if (m < 6) {\n    return 1;\n  }\n  let area = 0;\n  for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n    const x2 = points[i];\n    const y2 = points[i + 1];\n    area += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  if (area < 0) {\n    return -1;\n  }\n  return 1;\n}\n\nexport { getOrientationOfPoints };\n//# sourceMappingURL=getOrientationOfPoints.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { closePointEps, curveEps } from '../const.mjs';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints.mjs';\n\n\"use strict\";\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {\n  const ix = x - nx * innerWeight;\n  const iy = y - ny * innerWeight;\n  const ox = x + nx * outerWeight;\n  const oy = y + ny * outerWeight;\n  let exx;\n  let eyy;\n  if (clockwise) {\n    exx = ny;\n    eyy = -nx;\n  } else {\n    exx = -ny;\n    eyy = nx;\n  }\n  const eix = ix + exx;\n  const eiy = iy + eyy;\n  const eox = ox + exx;\n  const eoy = oy + eyy;\n  verts.push(eix, eiy);\n  verts.push(eox, eoy);\n  return 2;\n}\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n  const cx2p0x = sx - cx;\n  const cy2p0y = sy - cy;\n  let angle0 = Math.atan2(cx2p0x, cy2p0y);\n  let angle1 = Math.atan2(ex - cx, ey - cy);\n  if (clockwise && angle0 < angle1) {\n    angle0 += Math.PI * 2;\n  } else if (!clockwise && angle0 > angle1) {\n    angle1 += Math.PI * 2;\n  }\n  let startAngle = angle0;\n  const angleDiff = angle1 - angle0;\n  const absAngleDiff = Math.abs(angleDiff);\n  const radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);\n  const segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;\n  const angleInc = angleDiff / segCount;\n  startAngle += angleInc;\n  if (clockwise) {\n    verts.push(cx, cy);\n    verts.push(sx, sy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(cx, cy);\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n    }\n    verts.push(cx, cy);\n    verts.push(ex, ey);\n  } else {\n    verts.push(sx, sy);\n    verts.push(cx, cy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n      verts.push(cx, cy);\n    }\n    verts.push(ex, ey);\n    verts.push(cx, cy);\n  }\n  return segCount * 2;\n}\nfunction buildLine(points, lineStyle, flipAlignment, closed, vertices, indices) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const style = lineStyle;\n  let alignment = style.alignment;\n  if (lineStyle.alignment !== 0.5) {\n    let orientation = getOrientationOfPoints(points);\n    if (flipAlignment)\n      orientation *= -1;\n    alignment = (alignment - 0.5) * orientation + 0.5;\n  }\n  const firstPoint = new Point(points[0], points[1]);\n  const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n  const closedShape = closed;\n  const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;\n  if (closedShape) {\n    points = points.slice();\n    if (closedPath) {\n      points.pop();\n      points.pop();\n      lastPoint.set(points[points.length - 2], points[points.length - 1]);\n    }\n    const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n    const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n    points.unshift(midPointX, midPointY);\n    points.push(midPointX, midPointY);\n  }\n  const verts = vertices;\n  const length = points.length / 2;\n  let indexCount = points.length;\n  const indexStart = verts.length / 2;\n  const width = style.width / 2;\n  const widthSquared = width * width;\n  const miterLimitSquared = style.miterLimit * style.miterLimit;\n  let x0 = points[0];\n  let y0 = points[1];\n  let x1 = points[2];\n  let y1 = points[3];\n  let x2 = 0;\n  let y2 = 0;\n  let perpX = -(y0 - y1);\n  let perpY = x0 - x1;\n  let perp1x = 0;\n  let perp1y = 0;\n  let dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  const ratio = alignment;\n  const innerWeight = (1 - ratio) * 2;\n  const outerWeight = ratio * 2;\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x0 - perpX * (innerWeight - outerWeight) * 0.5,\n        y0 - perpY * (innerWeight - outerWeight) * 0.5,\n        x0 - perpX * innerWeight,\n        y0 - perpY * innerWeight,\n        x0 + perpX * outerWeight,\n        y0 + perpY * outerWeight,\n        verts,\n        true\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n    }\n  }\n  verts.push(\n    x0 - perpX * innerWeight,\n    y0 - perpY * innerWeight\n  );\n  verts.push(\n    x0 + perpX * outerWeight,\n    y0 + perpY * outerWeight\n  );\n  for (let i = 1; i < length - 1; ++i) {\n    x0 = points[(i - 1) * 2];\n    y0 = points[(i - 1) * 2 + 1];\n    x1 = points[i * 2];\n    y1 = points[i * 2 + 1];\n    x2 = points[(i + 1) * 2];\n    y2 = points[(i + 1) * 2 + 1];\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n    dist = Math.sqrt(perpX * perpX + perpY * perpY);\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n    perp1x = -(y1 - y2);\n    perp1y = x1 - x2;\n    dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);\n    perp1x /= dist;\n    perp1y /= dist;\n    perp1x *= width;\n    perp1y *= width;\n    const dx0 = x1 - x0;\n    const dy0 = y0 - y1;\n    const dx1 = x1 - x2;\n    const dy1 = y2 - y1;\n    const dot = dx0 * dx1 + dy0 * dy1;\n    const cross = dy0 * dx1 - dy1 * dx0;\n    const clockwise = cross < 0;\n    if (Math.abs(cross) < 1e-3 * Math.abs(dot)) {\n      verts.push(\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight\n      );\n      verts.push(\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight\n      );\n      if (dot >= 0) {\n        if (style.join === \"round\") {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n        } else {\n          indexCount += 2;\n        }\n        verts.push(\n          x1 - perp1x * outerWeight,\n          y1 - perp1y * outerWeight\n        );\n        verts.push(\n          x1 + perp1x * innerWeight,\n          y1 + perp1y * innerWeight\n        );\n      }\n      continue;\n    }\n    const c1 = (-perpX + x0) * (-perpY + y1) - (-perpX + x1) * (-perpY + y0);\n    const c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);\n    const px = (dx0 * c2 - dx1 * c1) / cross;\n    const py = (dy1 * c1 - dy0 * c2) / cross;\n    const pDist = (px - x1) * (px - x1) + (py - y1) * (py - y1);\n    const imx = x1 + (px - x1) * innerWeight;\n    const imy = y1 + (py - y1) * innerWeight;\n    const omx = x1 - (px - x1) * outerWeight;\n    const omy = y1 - (py - y1) * outerWeight;\n    const smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);\n    const insideWeight = clockwise ? innerWeight : outerWeight;\n    const smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;\n    const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n    if (insideMiterOk) {\n      if (style.join === \"bevel\" || pDist / widthSquared > miterLimitSquared) {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n        indexCount += 2;\n      } else if (style.join === \"round\") {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 4;\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n      } else {\n        verts.push(imx, imy);\n        verts.push(omx, omy);\n      }\n    } else {\n      verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n      verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n      if (style.join === \"round\") {\n        if (clockwise) {\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 2;\n        } else {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 2;\n        }\n      } else if (style.join === \"miter\" && pDist / widthSquared <= miterLimitSquared) {\n        if (clockwise) {\n          verts.push(omx, omy);\n          verts.push(omx, omy);\n        } else {\n          verts.push(imx, imy);\n          verts.push(imx, imy);\n        }\n        indexCount += 2;\n      }\n      verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n      verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n      indexCount += 2;\n    }\n  }\n  x0 = points[(length - 2) * 2];\n  y0 = points[(length - 2) * 2 + 1];\n  x1 = points[(length - 1) * 2];\n  y1 = points[(length - 1) * 2 + 1];\n  perpX = -(y0 - y1);\n  perpY = x0 - x1;\n  dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n  verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x1 - perpX * (innerWeight - outerWeight) * 0.5,\n        y1 - perpY * (innerWeight - outerWeight) * 0.5,\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight,\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight,\n        verts,\n        false\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n    }\n  }\n  const eps2 = curveEps * curveEps;\n  for (let i = indexStart; i < indexCount + indexStart - 2; ++i) {\n    x0 = verts[i * 2];\n    y0 = verts[i * 2 + 1];\n    x1 = verts[(i + 1) * 2];\n    y1 = verts[(i + 1) * 2 + 1];\n    x2 = verts[(i + 2) * 2];\n    y2 = verts[(i + 2) * 2 + 1];\n    if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {\n      continue;\n    }\n    indices.push(i, i + 1, i + 2);\n  }\n}\n\nexport { buildLine };\n//# sourceMappingURL=buildLine.mjs.map\n","import { closePointEps } from '../const.mjs';\n\n\"use strict\";\nfunction buildPixelLine(points, closed, vertices, indices) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const fx = points[0];\n  const fy = points[1];\n  const lx = points[points.length - 2];\n  const ly = points[points.length - 1];\n  const closePath = closed || Math.abs(fx - lx) < eps && Math.abs(fy - ly) < eps;\n  const verts = vertices;\n  const length = points.length / 2;\n  const indexStart = verts.length / 2;\n  for (let i = 0; i < length; i++) {\n    verts.push(points[i * 2]);\n    verts.push(points[i * 2 + 1]);\n  }\n  for (let i = 0; i < length - 1; i++) {\n    indices.push(indexStart + i, indexStart + i + 1);\n  }\n  if (closePath) {\n    indices.push(indexStart + length - 1, indexStart);\n  }\n}\n\nexport { buildPixelLine };\n//# sourceMappingURL=buildPixelLine.mjs.map\n","import { earcut } from '../../../../utils/utils.mjs';\n\n\"use strict\";\nfunction triangulateWithHoles(points, holes, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n  const triangles = earcut(points, holes, 2);\n  if (!triangles) {\n    return;\n  }\n  for (let i = 0; i < triangles.length; i += 3) {\n    indices[indicesOffset++] = triangles[i] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 1] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 2] + verticesOffset;\n  }\n  let index = verticesOffset * verticesStride;\n  for (let i = 0; i < points.length; i += 2) {\n    vertices[index] = points[i];\n    vertices[index + 1] = points[i + 1];\n    index += verticesStride;\n  }\n}\n\nexport { triangulateWithHoles };\n//# sourceMappingURL=triangulateWithHoles.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { triangulateWithHoles } from '../utils/triangulateWithHoles.mjs';\n\n\"use strict\";\nconst emptyArray = [];\nconst buildPolygon = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"polygon\"\n  },\n  build(shape, points) {\n    for (let i = 0; i < shape.points.length; i++) {\n      points[i] = shape.points[i];\n    }\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n  }\n};\n\nexport { buildPolygon };\n//# sourceMappingURL=buildPolygon.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildRectangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"rectangle\"\n  },\n  build(shape, points) {\n    const rectData = shape;\n    const x = rectData.x;\n    const y = rectData.y;\n    const width = rectData.width;\n    const height = rectData.height;\n    if (!(width > 0 && height > 0)) {\n      return false;\n    }\n    points[0] = x;\n    points[1] = y;\n    points[2] = x + width;\n    points[3] = y;\n    points[4] = x + width;\n    points[5] = y + height;\n    points[6] = x;\n    points[7] = y + height;\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[6];\n    vertices[verticesOffset + count + 1] = points[7];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    count += verticesStride;\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 3;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildRectangle };\n//# sourceMappingURL=buildRectangle.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildTriangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"triangle\"\n  },\n  build(shape, points) {\n    points[0] = shape.x;\n    points[1] = shape.y;\n    points[2] = shape.x2;\n    points[3] = shape.y2;\n    points[4] = shape.x3;\n    points[5] = shape.y3;\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildTriangle };\n//# sourceMappingURL=buildTriangle.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\n\n\"use strict\";\nconst tempTextureMatrix = new Matrix();\nconst tempRect = new Rectangle();\nfunction generateTextureMatrix(out, style, shape, matrix) {\n  const textureMatrix = style.matrix ? out.copyFrom(style.matrix).invert() : out.identity();\n  if (style.textureSpace === \"local\") {\n    const bounds = shape.getBounds(tempRect);\n    if (style.width) {\n      bounds.pad(style.width);\n    }\n    const { x: tx, y: ty } = bounds;\n    const sx = 1 / bounds.width;\n    const sy = 1 / bounds.height;\n    const mTx = -tx * sx;\n    const mTy = -ty * sy;\n    const a1 = textureMatrix.a;\n    const b1 = textureMatrix.b;\n    const c1 = textureMatrix.c;\n    const d1 = textureMatrix.d;\n    textureMatrix.a *= sx;\n    textureMatrix.b *= sx;\n    textureMatrix.c *= sy;\n    textureMatrix.d *= sy;\n    textureMatrix.tx = mTx * a1 + mTy * c1 + textureMatrix.tx;\n    textureMatrix.ty = mTx * b1 + mTy * d1 + textureMatrix.ty;\n  } else {\n    textureMatrix.translate(style.texture.frame.x, style.texture.frame.y);\n    textureMatrix.scale(1 / style.texture.source.width, 1 / style.texture.source.height);\n  }\n  const sourceStyle = style.texture.source.style;\n  if (!(style.fill instanceof FillGradient) && sourceStyle.addressMode === \"clamp-to-edge\") {\n    sourceStyle.addressMode = \"repeat\";\n    sourceStyle.update();\n  }\n  if (matrix) {\n    textureMatrix.append(tempTextureMatrix.copyFrom(matrix).invert());\n  }\n  return textureMatrix;\n}\n\nexport { generateTextureMatrix };\n//# sourceMappingURL=generateTextureFillMatrix.mjs.map\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { buildUvs, buildSimpleUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { BatchableGraphics } from '../BatchableGraphics.mjs';\nimport { buildCircle, buildEllipse, buildRoundedRectangle } from '../buildCommands/buildCircle.mjs';\nimport { buildLine } from '../buildCommands/buildLine.mjs';\nimport { buildPixelLine } from '../buildCommands/buildPixelLine.mjs';\nimport { buildPolygon } from '../buildCommands/buildPolygon.mjs';\nimport { buildRectangle } from '../buildCommands/buildRectangle.mjs';\nimport { buildTriangle } from '../buildCommands/buildTriangle.mjs';\nimport { generateTextureMatrix } from './generateTextureFillMatrix.mjs';\nimport { triangulateWithHoles } from './triangulateWithHoles.mjs';\n\n\"use strict\";\nconst shapeBuilders = {};\nextensions.handleByMap(ExtensionType.ShapeBuilder, shapeBuilders);\nextensions.add(buildRectangle, buildPolygon, buildTriangle, buildCircle, buildEllipse, buildRoundedRectangle);\nconst tempRect = new Rectangle();\nconst tempTextureMatrix = new Matrix();\nfunction buildContextBatches(context, gpuContext) {\n  const { geometryData, batches } = gpuContext;\n  batches.length = 0;\n  geometryData.indices.length = 0;\n  geometryData.vertices.length = 0;\n  geometryData.uvs.length = 0;\n  for (let i = 0; i < context.instructions.length; i++) {\n    const instruction = context.instructions[i];\n    if (instruction.action === \"texture\") {\n      addTextureToGeometryData(instruction.data, batches, geometryData);\n    } else if (instruction.action === \"fill\" || instruction.action === \"stroke\") {\n      const isStroke = instruction.action === \"stroke\";\n      const shapePath = instruction.data.path.shapePath;\n      const style = instruction.data.style;\n      const hole = instruction.data.hole;\n      if (isStroke && hole) {\n        addShapePathToGeometryData(hole.shapePath, style, true, batches, geometryData);\n      }\n      if (hole) {\n        shapePath.shapePrimitives[shapePath.shapePrimitives.length - 1].holes = hole.shapePath.shapePrimitives;\n      }\n      addShapePathToGeometryData(shapePath, style, isStroke, batches, geometryData);\n    }\n  }\n}\nfunction addTextureToGeometryData(data, batches, geometryData) {\n  const points = [];\n  const build = shapeBuilders.rectangle;\n  const rect = tempRect;\n  rect.x = data.dx;\n  rect.y = data.dy;\n  rect.width = data.dw;\n  rect.height = data.dh;\n  const matrix = data.transform;\n  if (!build.build(rect, points)) {\n    return;\n  }\n  const { vertices, uvs, indices } = geometryData;\n  const indexOffset = indices.length;\n  const vertOffset = vertices.length / 2;\n  if (matrix) {\n    transformVertices(points, matrix);\n  }\n  build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n  const texture = data.image;\n  const textureUvs = texture.uvs;\n  uvs.push(\n    textureUvs.x0,\n    textureUvs.y0,\n    textureUvs.x1,\n    textureUvs.y1,\n    textureUvs.x3,\n    textureUvs.y3,\n    textureUvs.x2,\n    textureUvs.y2\n  );\n  const graphicsBatch = BigPool.get(BatchableGraphics);\n  graphicsBatch.indexOffset = indexOffset;\n  graphicsBatch.indexSize = indices.length - indexOffset;\n  graphicsBatch.attributeOffset = vertOffset;\n  graphicsBatch.attributeSize = vertices.length / 2 - vertOffset;\n  graphicsBatch.baseColor = data.style;\n  graphicsBatch.alpha = data.alpha;\n  graphicsBatch.texture = texture;\n  graphicsBatch.geometryData = geometryData;\n  batches.push(graphicsBatch);\n}\nfunction addShapePathToGeometryData(shapePath, style, isStroke, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  shapePath.shapePrimitives.forEach(({ shape, transform: matrix, holes }) => {\n    const points = [];\n    const build = shapeBuilders[shape.type];\n    if (!build.build(shape, points)) {\n      return;\n    }\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n    let topology = \"triangle-list\";\n    if (matrix) {\n      transformVertices(points, matrix);\n    }\n    if (!isStroke) {\n      if (holes) {\n        const holeIndices = [];\n        const otherPoints = points.slice();\n        const holeArrays = getHoleArrays(holes);\n        holeArrays.forEach((holePoints) => {\n          holeIndices.push(otherPoints.length / 2);\n          otherPoints.push(...holePoints);\n        });\n        triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n      } else {\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n      }\n    } else {\n      const close = shape.closePath ?? true;\n      const lineStyle = style;\n      if (!lineStyle.pixelLine) {\n        buildLine(points, lineStyle, false, close, vertices, indices);\n      } else {\n        buildPixelLine(points, close, vertices, indices);\n        topology = \"line-list\";\n      }\n    }\n    const uvsOffset = uvs.length / 2;\n    const texture = style.texture;\n    if (texture !== Texture.WHITE) {\n      const textureMatrix = generateTextureMatrix(tempTextureMatrix, style, shape, matrix);\n      buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, vertices.length / 2 - vertOffset, textureMatrix);\n    } else {\n      buildSimpleUvs(uvs, uvsOffset, 2, vertices.length / 2 - vertOffset);\n    }\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n    graphicsBatch.attributeOffset = vertOffset;\n    graphicsBatch.attributeSize = vertices.length / 2 - vertOffset;\n    graphicsBatch.baseColor = style.color;\n    graphicsBatch.alpha = style.alpha;\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n    graphicsBatch.topology = topology;\n    batches.push(graphicsBatch);\n  });\n}\nfunction getHoleArrays(holePrimitives) {\n  const holeArrays = [];\n  for (let k = 0; k < holePrimitives.length; k++) {\n    const holePrimitive = holePrimitives[k].shape;\n    const holePoints = [];\n    const holeBuilder = shapeBuilders[holePrimitive.type];\n    if (holeBuilder.build(holePrimitive, holePoints)) {\n      holeArrays.push(holePoints);\n    }\n  }\n  return holeArrays;\n}\n\nexport { buildContextBatches, shapeBuilders };\n//# sourceMappingURL=buildContextBatches.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { DefaultBatcher } from '../../../rendering/batcher/shared/DefaultBatcher.mjs';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { deprecation, v8_3_4 } from '../../../utils/logging/deprecation.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { buildContextBatches } from './utils/buildContextBatches.mjs';\n\n\"use strict\";\nclass GpuGraphicsContext {\n  constructor() {\n    this.batches = [];\n    this.geometryData = {\n      vertices: [],\n      uvs: [],\n      indices: []\n    };\n  }\n}\nclass GraphicsContextRenderData {\n  constructor() {\n    this.instructions = new InstructionSet();\n  }\n  init(maxTextures) {\n    this.batcher = new DefaultBatcher({\n      maxTextures\n    });\n    this.instructions.reset();\n  }\n  /**\n   * @deprecated since version 8.0.0\n   * Use `batcher.geometry` instead.\n   * @see {Batcher#geometry}\n   */\n  get geometry() {\n    deprecation(v8_3_4, \"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead.\");\n    return this.batcher.geometry;\n  }\n  destroy() {\n    this.batcher.destroy();\n    this.instructions.destroy();\n    this.batcher = null;\n    this.instructions = null;\n  }\n}\nconst _GraphicsContextSystem = class _GraphicsContextSystem {\n  constructor(renderer) {\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    this._gpuContextHash = {};\n    // used for non-batchable graphics\n    this._graphicsDataContextHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    renderer.renderableGC.addManagedHash(this, \"_gpuContextHash\");\n    renderer.renderableGC.addManagedHash(this, \"_graphicsDataContextHash\");\n  }\n  /**\n   * Runner init called, update the default options\n   * @ignore\n   */\n  init(options) {\n    _GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness ?? _GraphicsContextSystem.defaultOptions.bezierSmoothness;\n  }\n  /**\n   * Returns the render data for a given GraphicsContext.\n   * @param context - The GraphicsContext to get the render data for.\n   * @internal\n   */\n  getContextRenderData(context) {\n    return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n  }\n  /**\n   * Updates the GPU context for a given GraphicsContext.\n   * If the context is dirty, it will rebuild the batches and geometry data.\n   * @param context - The GraphicsContext to update.\n   * @returns The updated GpuGraphicsContext.\n   * @internal\n   */\n  updateGpuContext(context) {\n    let gpuContext = this._gpuContextHash[context.uid] || this._initContext(context);\n    if (context.dirty) {\n      if (gpuContext) {\n        this._cleanGraphicsContextData(context);\n      } else {\n        gpuContext = this._initContext(context);\n      }\n      buildContextBatches(context, gpuContext);\n      const batchMode = context.batchMode;\n      if (context.customShader || batchMode === \"no-batch\") {\n        gpuContext.isBatchable = false;\n      } else if (batchMode === \"auto\") {\n        gpuContext.isBatchable = gpuContext.geometryData.vertices.length < 400;\n      } else {\n        gpuContext.isBatchable = true;\n      }\n      context.dirty = false;\n    }\n    return gpuContext;\n  }\n  /**\n   * Returns the GpuGraphicsContext for a given GraphicsContext.\n   * If it does not exist, it will initialize a new one.\n   * @param context - The GraphicsContext to get the GpuGraphicsContext for.\n   * @returns The GpuGraphicsContext for the given GraphicsContext.\n   * @internal\n   */\n  getGpuContext(context) {\n    return this._gpuContextHash[context.uid] || this._initContext(context);\n  }\n  _initContextRenderData(context) {\n    const graphicsData = BigPool.get(GraphicsContextRenderData, {\n      maxTextures: this._renderer.limits.maxBatchableTextures\n    });\n    const { batches, geometryData } = this._gpuContextHash[context.uid];\n    const vertexSize = geometryData.vertices.length;\n    const indexSize = geometryData.indices.length;\n    for (let i = 0; i < batches.length; i++) {\n      batches[i].applyTransform = false;\n    }\n    const batcher = graphicsData.batcher;\n    batcher.ensureAttributeBuffer(vertexSize);\n    batcher.ensureIndexBuffer(indexSize);\n    batcher.begin();\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batcher.add(batch);\n    }\n    batcher.finish(graphicsData.instructions);\n    const geometry = batcher.geometry;\n    geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n    geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n    const drawBatches = batcher.batches;\n    for (let i = 0; i < drawBatches.length; i++) {\n      const batch = drawBatches[i];\n      batch.bindGroup = getTextureBatchBindGroup(\n        batch.textures.textures,\n        batch.textures.count,\n        this._renderer.limits.maxBatchableTextures\n      );\n    }\n    this._graphicsDataContextHash[context.uid] = graphicsData;\n    return graphicsData;\n  }\n  _initContext(context) {\n    const gpuContext = new GpuGraphicsContext();\n    gpuContext.context = context;\n    this._gpuContextHash[context.uid] = gpuContext;\n    context.on(\"destroy\", this.onGraphicsContextDestroy, this);\n    return this._gpuContextHash[context.uid];\n  }\n  onGraphicsContextDestroy(context) {\n    this._cleanGraphicsContextData(context);\n    context.off(\"destroy\", this.onGraphicsContextDestroy, this);\n    this._gpuContextHash[context.uid] = null;\n  }\n  _cleanGraphicsContextData(context) {\n    const gpuContext = this._gpuContextHash[context.uid];\n    if (!gpuContext.isBatchable) {\n      if (this._graphicsDataContextHash[context.uid]) {\n        BigPool.return(this.getContextRenderData(context));\n        this._graphicsDataContextHash[context.uid] = null;\n      }\n    }\n    if (gpuContext.batches) {\n      gpuContext.batches.forEach((batch) => {\n        BigPool.return(batch);\n      });\n    }\n  }\n  destroy() {\n    for (const i in this._gpuContextHash) {\n      if (this._gpuContextHash[i]) {\n        this.onGraphicsContextDestroy(this._gpuContextHash[i].context);\n      }\n    }\n  }\n};\n/** @ignore */\n_GraphicsContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"graphicsContext\"\n};\n/** The default options for the GraphicsContextSystem. */\n_GraphicsContextSystem.defaultOptions = {\n  /**\n   * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n   * @default 0.5\n   */\n  bezierSmoothness: 0.5\n};\nlet GraphicsContextSystem = _GraphicsContextSystem;\n\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem };\n//# sourceMappingURL=GraphicsContextSystem.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\nfunction buildAdaptiveBezier(points, sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance) {\n  recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(x1, y1, x2, y2, x3, y3, x4, y4, points, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x34 = (x3 + x4) / 2;\n  const y34 = (y3 + y4) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  const x234 = (x23 + x34) / 2;\n  const y234 = (y23 + y34) / 2;\n  const x1234 = (x123 + x234) / 2;\n  const y1234 = (y123 + y234) / 2;\n  if (level > 0) {\n    let dx = x4 - x1;\n    let dy = y4 - y1;\n    const d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx);\n    const d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx);\n    let da1;\n    let da2;\n    if (d2 > FLT_EPSILON && d3 > FLT_EPSILON) {\n      if ((d2 + d3) * (d2 + d3) <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        const a23 = Math.atan2(y3 - y2, x3 - x2);\n        da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n        da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da2 >= pi)\n          da2 = 2 * pi - da2;\n        if (da1 + da2 < mAngleTolerance) {\n          points.push(x1234, y1234);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n          if (da2 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else if (d2 > FLT_EPSILON) {\n      if (d2 * d2 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n        }\n      }\n    } else if (d3 > FLT_EPSILON) {\n      if (d3 * d3 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else {\n      dx = x1234 - (x1 + x4) / 2;\n      dy = y1234 - (y1 + y4) / 2;\n      if (dx * dx + dy * dy <= distanceTolerance) {\n        points.push(x1234, y1234);\n        return;\n      }\n    }\n  }\n  recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n  recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveBezier };\n//# sourceMappingURL=buildAdaptiveBezier.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nfunction buildAdaptiveQuadratic(points, sX, sY, cp1x, cp1y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance) {\n  recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(points, x1, y1, x2, y2, x3, y3, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  let dx = x3 - x1;\n  let dy = y3 - y1;\n  const d = Math.abs((x2 - x3) * dy - (y2 - y3) * dx);\n  if (d > FLT_EPSILON) {\n    if (d * d <= distanceTolerance * (dx * dx + dy * dy)) {\n      if (mAngleTolerance < curveAngleToleranceEpsilon) {\n        points.push(x123, y123);\n        return;\n      }\n      let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n      if (da >= pi)\n        da = 2 * pi - da;\n      if (da < mAngleTolerance) {\n        points.push(x123, y123);\n        return;\n      }\n    }\n  } else {\n    dx = x123 - (x1 + x3) / 2;\n    dy = y123 - (y1 + y3) / 2;\n    if (dx * dx + dy * dy <= distanceTolerance) {\n      points.push(x123, y123);\n      return;\n    }\n  }\n  recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n  recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveQuadratic };\n//# sourceMappingURL=buildAdaptiveQuadratic.mjs.map\n","\"use strict\";\nfunction buildArc(points, x, y, radius, start, end, clockwise, steps) {\n  let dist = Math.abs(start - end);\n  if (!clockwise && start > end) {\n    dist = 2 * Math.PI - dist;\n  } else if (clockwise && end > start) {\n    dist = 2 * Math.PI - dist;\n  }\n  steps || (steps = Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / Math.PI))));\n  steps = Math.max(steps, 3);\n  let f = dist / steps;\n  let t = start;\n  f *= clockwise ? -1 : 1;\n  for (let i = 0; i < steps + 1; i++) {\n    const cs = Math.cos(t);\n    const sn = Math.sin(t);\n    const nx = x + cs * radius;\n    const ny = y + sn * radius;\n    points.push(nx, ny);\n    t += f;\n  }\n}\n\nexport { buildArc };\n//# sourceMappingURL=buildArc.mjs.map\n","import { buildArc } from './buildArc.mjs';\n\n\"use strict\";\nfunction buildArcTo(points, x1, y1, x2, y2, radius) {\n  const fromX = points[points.length - 2];\n  const fromY = points[points.length - 1];\n  const a1 = fromY - y1;\n  const b1 = fromX - x1;\n  const a2 = y2 - y1;\n  const b2 = x2 - x1;\n  const mm = Math.abs(a1 * b2 - b1 * a2);\n  if (mm < 1e-8 || radius === 0) {\n    if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n      points.push(x1, y1);\n    }\n    return;\n  }\n  const dd = a1 * a1 + b1 * b1;\n  const cc = a2 * a2 + b2 * b2;\n  const tt = a1 * a2 + b1 * b2;\n  const k1 = radius * Math.sqrt(dd) / mm;\n  const k2 = radius * Math.sqrt(cc) / mm;\n  const j1 = k1 * tt / dd;\n  const j2 = k2 * tt / cc;\n  const cx = k1 * b2 + k2 * b1;\n  const cy = k1 * a2 + k2 * a1;\n  const px = b1 * (k2 + j1);\n  const py = a1 * (k2 + j1);\n  const qx = b2 * (k1 + j2);\n  const qy = a2 * (k1 + j2);\n  const startAngle = Math.atan2(py - cy, px - cx);\n  const endAngle = Math.atan2(qy - cy, qx - cx);\n  buildArc(\n    points,\n    cx + x1,\n    cy + y1,\n    radius,\n    startAngle,\n    endAngle,\n    b1 * a2 > b2 * a1\n  );\n}\n\nexport { buildArcTo };\n//# sourceMappingURL=buildArcTo.mjs.map\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier.mjs';\n\n\"use strict\";\nconst TAU = Math.PI * 2;\nconst out = {\n  centerX: 0,\n  centerY: 0,\n  ang1: 0,\n  ang2: 0\n};\nconst mapToEllipse = ({ x, y }, rx, ry, cosPhi, sinPhi, centerX, centerY, out2) => {\n  x *= rx;\n  y *= ry;\n  const xp = cosPhi * x - sinPhi * y;\n  const yp = sinPhi * x + cosPhi * y;\n  out2.x = xp + centerX;\n  out2.y = yp + centerY;\n  return out2;\n};\nfunction approxUnitArc(ang1, ang2) {\n  const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n  const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n  const x1 = Math.cos(ang1);\n  const y1 = Math.sin(ang1);\n  const x2 = Math.cos(ang1 + ang2);\n  const y2 = Math.sin(ang1 + ang2);\n  return [\n    {\n      x: x1 - y1 * a,\n      y: y1 + x1 * a\n    },\n    {\n      x: x2 + y2 * a,\n      y: y2 - x2 * a\n    },\n    {\n      x: x2,\n      y: y2\n    }\n  ];\n}\nconst vectorAngle = (ux, uy, vx, vy) => {\n  const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n  let dot = ux * vx + uy * vy;\n  if (dot > 1) {\n    dot = 1;\n  }\n  if (dot < -1) {\n    dot = -1;\n  }\n  return sign * Math.acos(dot);\n};\nconst getArcCenter = (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinPhi, cosPhi, pxp, pyp, out2) => {\n  const rxSq = Math.pow(rx, 2);\n  const rySq = Math.pow(ry, 2);\n  const pxpSq = Math.pow(pxp, 2);\n  const pypSq = Math.pow(pyp, 2);\n  let radicant = rxSq * rySq - rxSq * pypSq - rySq * pxpSq;\n  if (radicant < 0) {\n    radicant = 0;\n  }\n  radicant /= rxSq * pypSq + rySq * pxpSq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n  const centerXp = radicant * rx / ry * pyp;\n  const centerYp = radicant * -ry / rx * pxp;\n  const centerX = cosPhi * centerXp - sinPhi * centerYp + (px + cx) / 2;\n  const centerY = sinPhi * centerXp + cosPhi * centerYp + (py + cy) / 2;\n  const vx1 = (pxp - centerXp) / rx;\n  const vy1 = (pyp - centerYp) / ry;\n  const vx2 = (-pxp - centerXp) / rx;\n  const vy2 = (-pyp - centerYp) / ry;\n  const ang1 = vectorAngle(1, 0, vx1, vy1);\n  let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n  out2.centerX = centerX;\n  out2.centerY = centerY;\n  out2.ang1 = ang1;\n  out2.ang2 = ang2;\n};\nfunction buildArcToSvg(points, px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0) {\n  if (rx === 0 || ry === 0) {\n    return;\n  }\n  const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n  const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n  const pxp = cosPhi * (px - cx) / 2 + sinPhi * (py - cy) / 2;\n  const pyp = -sinPhi * (px - cx) / 2 + cosPhi * (py - cy) / 2;\n  if (pxp === 0 && pyp === 0) {\n    return;\n  }\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  getArcCenter(\n    px,\n    py,\n    cx,\n    cy,\n    rx,\n    ry,\n    largeArcFlag,\n    sweepFlag,\n    sinPhi,\n    cosPhi,\n    pxp,\n    pyp,\n    out\n  );\n  let { ang1, ang2 } = out;\n  const { centerX, centerY } = out;\n  let ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1 - ratio) < 1e-7) {\n    ratio = 1;\n  }\n  const segments = Math.max(Math.ceil(ratio), 1);\n  ang2 /= segments;\n  let lastX = points[points.length - 2];\n  let lastY = points[points.length - 1];\n  const outCurvePoint = { x: 0, y: 0 };\n  for (let i = 0; i < segments; i++) {\n    const curve = approxUnitArc(ang1, ang2);\n    const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    buildAdaptiveBezier(\n      points,\n      lastX,\n      lastY,\n      x1,\n      y1,\n      x2,\n      y2,\n      x,\n      y\n    );\n    lastX = x;\n    lastY = y;\n    ang1 += ang2;\n  }\n}\n\nexport { buildArcToSvg };\n//# sourceMappingURL=buildArcToSvg.mjs.map\n","\"use strict\";\nfunction roundedShapeArc(g, points, radius) {\n  const vecFrom = (p, pp) => {\n    const x = pp.x - p.x;\n    const y = pp.y - p.y;\n    const len = Math.sqrt(x * x + y * y);\n    const nx = x / len;\n    const ny = y / len;\n    return { len, nx, ny };\n  };\n  const sharpCorner = (i, p) => {\n    if (i === 0) {\n      g.moveTo(p.x, p.y);\n    } else {\n      g.lineTo(p.x, p.y);\n    }\n  };\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i % points.length];\n    const pRadius = p2.radius ?? radius;\n    if (pRadius <= 0) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    const p3 = points[(i + 1) % points.length];\n    const v1 = vecFrom(p2, p1);\n    const v2 = vecFrom(p2, p3);\n    if (v1.len < 1e-4 || v2.len < 1e-4) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    let angle = Math.asin(v1.nx * v2.ny - v1.ny * v2.nx);\n    let radDirection = 1;\n    let drawDirection = false;\n    if (v1.nx * v2.nx - v1.ny * -v2.ny < 0) {\n      if (angle < 0) {\n        angle = Math.PI + angle;\n      } else {\n        angle = Math.PI - angle;\n        radDirection = -1;\n        drawDirection = true;\n      }\n    } else if (angle > 0) {\n      radDirection = -1;\n      drawDirection = true;\n    }\n    const halfAngle = angle / 2;\n    let cRadius;\n    let lenOut = Math.abs(\n      Math.cos(halfAngle) * pRadius / Math.sin(halfAngle)\n    );\n    if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n      lenOut = Math.min(v1.len / 2, v2.len / 2);\n      cRadius = Math.abs(lenOut * Math.sin(halfAngle) / Math.cos(halfAngle));\n    } else {\n      cRadius = pRadius;\n    }\n    const cX = p2.x + v2.nx * lenOut + -v2.ny * cRadius * radDirection;\n    const cY = p2.y + v2.ny * lenOut + v2.nx * cRadius * radDirection;\n    const startAngle = Math.atan2(v1.ny, v1.nx) + Math.PI / 2 * radDirection;\n    const endAngle = Math.atan2(v2.ny, v2.nx) - Math.PI / 2 * radDirection;\n    if (i === 0) {\n      g.moveTo(\n        cX + Math.cos(startAngle) * cRadius,\n        cY + Math.sin(startAngle) * cRadius\n      );\n    }\n    g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n    p1 = p2;\n  }\n}\nfunction roundedShapeQuadraticCurve(g, points, radius, smoothness) {\n  const distance = (p1, p2) => Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n  const pointLerp = (p1, p2, t) => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t\n  });\n  const numPoints = points.length;\n  for (let i = 0; i < numPoints; i++) {\n    const thisPoint = points[(i + 1) % numPoints];\n    const pRadius = thisPoint.radius ?? radius;\n    if (pRadius <= 0) {\n      if (i === 0) {\n        g.moveTo(thisPoint.x, thisPoint.y);\n      } else {\n        g.lineTo(thisPoint.x, thisPoint.y);\n      }\n      continue;\n    }\n    const lastPoint = points[i];\n    const nextPoint = points[(i + 2) % numPoints];\n    const lastEdgeLength = distance(lastPoint, thisPoint);\n    let start;\n    if (lastEdgeLength < 1e-4) {\n      start = thisPoint;\n    } else {\n      const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n      start = pointLerp(\n        thisPoint,\n        lastPoint,\n        lastOffsetDistance / lastEdgeLength\n      );\n    }\n    const nextEdgeLength = distance(nextPoint, thisPoint);\n    let end;\n    if (nextEdgeLength < 1e-4) {\n      end = thisPoint;\n    } else {\n      const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n      end = pointLerp(\n        thisPoint,\n        nextPoint,\n        nextOffsetDistance / nextEdgeLength\n      );\n    }\n    if (i === 0) {\n      g.moveTo(start.x, start.y);\n    } else {\n      g.lineTo(start.x, start.y);\n    }\n    g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n  }\n}\n\nexport { roundedShapeArc, roundedShapeQuadraticCurve };\n//# sourceMappingURL=roundShape.mjs.map\n","import { Circle } from '../../../../maths/shapes/Circle.mjs';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse.mjs';\nimport { Polygon } from '../../../../maths/shapes/Polygon.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle.mjs';\nimport { Bounds } from '../../../container/bounds/Bounds.mjs';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier.mjs';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic.mjs';\nimport { buildArc } from '../buildCommands/buildArc.mjs';\nimport { buildArcTo } from '../buildCommands/buildArcTo.mjs';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg.mjs';\nimport { roundedShapeQuadraticCurve, roundedShapeArc } from './roundShape.mjs';\n\n\"use strict\";\nconst tempRectangle = new Rectangle();\nclass ShapePath {\n  constructor(graphicsPath2D) {\n    /** The list of shape primitives that make up the path. */\n    this.shapePrimitives = [];\n    this._currentPoly = null;\n    this._bounds = new Bounds();\n    this._graphicsPath2D = graphicsPath2D;\n    this.signed = graphicsPath2D.checkForHoles;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this.startPoly(x, y);\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n    if (fromX !== x || fromY !== y) {\n      points.push(x, y);\n    }\n    return this;\n  }\n  /**\n   * Adds an arc to the path. The arc is centered at (x, y)\n   *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The radius of the arc.\n   * @param startAngle - The starting angle of the arc, in radians.\n   * @param endAngle - The ending angle of the arc, in radians.\n   * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._ensurePoly(false);\n    const points = this._currentPoly.points;\n    buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n    return this;\n  }\n  /**\n   * Adds an arc to the path with the arc tangent to the line joining two specified points.\n   * The arc radius is specified by `radius`.\n   * @param x1 - The x-coordinate of the first point.\n   * @param y1 - The y-coordinate of the first point.\n   * @param x2 - The x-coordinate of the second point.\n   * @param y2 - The y-coordinate of the second point.\n   * @param radius - The radius of the arc.\n   * @returns The instance of the current object for chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    buildArcTo(points, x1, y1, x2, y2, radius);\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    const points = this._currentPoly.points;\n    buildArcToSvg(\n      points,\n      this._currentPoly.lastX,\n      this._currentPoly.lastY,\n      x,\n      y,\n      rx,\n      ry,\n      xAxisRotation,\n      largeArcFlag,\n      sweepFlag\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveBezier(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      cp2x,\n      cp2y,\n      x,\n      y,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the control point.\n   * @param cp1y - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cp1x, cp1y, x, y, smoothing) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveQuadratic(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      x,\n      y,\n      smoothing\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.endPoly(true);\n    return this;\n  }\n  /**\n   * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n   * @param path - The `GraphicsPath` object representing the path to add.\n   * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    this.endPoly();\n    if (transform && !transform.isIdentity()) {\n      path = path.clone(true);\n      path.transform(transform);\n    }\n    const shapePrimitives = this.shapePrimitives;\n    const start = shapePrimitives.length;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    if (path.checkForHoles && shapePrimitives.length - start > 1) {\n      let mainShape = null;\n      for (let i = start; i < shapePrimitives.length; i++) {\n        const shapePrimitive = shapePrimitives[i];\n        if (shapePrimitive.shape.type === \"polygon\") {\n          const polygon = shapePrimitive.shape;\n          const mainPolygon = mainShape?.shape;\n          if (mainPolygon && mainPolygon.containsPolygon(polygon)) {\n            mainShape.holes || (mainShape.holes = []);\n            mainShape.holes.push(shapePrimitive);\n            shapePrimitives.copyWithin(i, i + 1);\n            shapePrimitives.length--;\n            i--;\n          } else {\n            mainShape = shapePrimitive;\n          }\n        }\n      }\n    }\n    return this;\n  }\n  /**\n   * Finalizes the drawing of the current path. Optionally, it can close the path.\n   * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n   */\n  finish(closePath = false) {\n    this.endPoly(closePath);\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.drawShape(new Rectangle(x, y, w, h), transform);\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.drawShape(new Circle(x, y, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n   * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  poly(points, close, transform) {\n    const polygon = new Polygon(points);\n    polygon.closePath = close;\n    this.drawShape(polygon, transform);\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    sides = Math.max(sides | 0, 3);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const polygon = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = startAngle - i * delta;\n      polygon.push(\n        x + radius * Math.cos(angle),\n        y + radius * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation = 0, smoothness) {\n    sides = Math.max(sides | 0, 3);\n    if (corner <= 0) {\n      return this.regularPoly(x, y, radius, sides, rotation);\n    }\n    const sideLength = radius * Math.sin(Math.PI / sides) - 1e-3;\n    corner = Math.min(corner, sideLength);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const internalAngle = (sides - 2) * Math.PI / sides / 2;\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      const x0 = x + radius * Math.cos(angle);\n      const y0 = y + radius * Math.sin(angle);\n      const a1 = angle + Math.PI + internalAngle;\n      const a2 = angle - Math.PI - internalAngle;\n      const x1 = x0 + corner * Math.cos(a1);\n      const y1 = y0 + corner * Math.sin(a1);\n      const x3 = x0 + corner * Math.cos(a2);\n      const y3 = y0 + corner * Math.sin(a2);\n      if (i === 0) {\n        this.moveTo(x1, y1);\n      } else {\n        this.lineTo(x1, y1);\n      }\n      this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic = false, smoothness) {\n    if (points.length < 3) {\n      return this;\n    }\n    if (useQuadratic) {\n      roundedShapeQuadraticCurve(this, points, radius, smoothness);\n    } else {\n      roundedShapeArc(this, points, radius);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    if (fillet === 0) {\n      return this.rect(x, y, width, height);\n    }\n    const maxFillet = Math.min(width, height) / 2;\n    const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n    const right = x + width;\n    const bottom = y + height;\n    const dir = inset < 0 ? -inset : 0;\n    const size = Math.abs(inset);\n    return this.moveTo(x, y + size).arcTo(x + dir, y + dir, x + size, y, size).lineTo(right - size, y).arcTo(right - dir, y + dir, right, y + size, size).lineTo(right, bottom - size).arcTo(right - dir, bottom - dir, x + width - size, bottom, size).lineTo(x + size, bottom).arcTo(x + dir, bottom - dir, x, bottom - size, size).closePath();\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    if (chamfer <= 0) {\n      return this.rect(x, y, width, height);\n    }\n    const inset = Math.min(chamfer, Math.min(width, height) / 2);\n    const right = x + width;\n    const bottom = y + height;\n    const points = [\n      x + inset,\n      y,\n      right - inset,\n      y,\n      right,\n      y + inset,\n      right,\n      bottom - inset,\n      right - inset,\n      bottom,\n      x + inset,\n      bottom,\n      x,\n      bottom - inset,\n      x,\n      y + inset\n    ];\n    for (let i = points.length - 1; i >= 2; i -= 2) {\n      if (points[i] === points[i - 2] && points[i - 1] === points[i - 3]) {\n        points.splice(i - 1, 2);\n      }\n    }\n    return this.poly(points, true, transform);\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY, transform) {\n    this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius, transform) {\n    this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a given shape on the canvas.\n   * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n   * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n   * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n   * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n   * scaling, and translations.\n   * @returns The instance of the current object for chaining.\n   */\n  drawShape(shape, matrix) {\n    this.endPoly();\n    this.shapePrimitives.push({ shape, transform: matrix });\n    return this;\n  }\n  /**\n   * Starts a new polygon path from the specified starting point.\n   * This method initializes a new polygon or ends the current one if it exists.\n   * @param x - The x-coordinate of the starting point of the new polygon.\n   * @param y - The y-coordinate of the starting point of the new polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  startPoly(x, y) {\n    let currentPoly = this._currentPoly;\n    if (currentPoly) {\n      this.endPoly();\n    }\n    currentPoly = new Polygon();\n    currentPoly.points.push(x, y);\n    this._currentPoly = currentPoly;\n    return this;\n  }\n  /**\n   * Ends the current polygon path. If `closePath` is set to true,\n   * the path is closed by connecting the last point to the first one.\n   * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n   * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n   *  back to the starting point. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  endPoly(closePath = false) {\n    const shape = this._currentPoly;\n    if (shape && shape.points.length > 2) {\n      shape.closePath = closePath;\n      this.shapePrimitives.push({ shape });\n    }\n    this._currentPoly = null;\n    return this;\n  }\n  _ensurePoly(start = true) {\n    if (this._currentPoly)\n      return;\n    this._currentPoly = new Polygon();\n    if (start) {\n      const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n      if (lastShape) {\n        let lx = lastShape.shape.x;\n        let ly = lastShape.shape.y;\n        if (lastShape.transform && !lastShape.transform.isIdentity()) {\n          const t = lastShape.transform;\n          const tempX = lx;\n          lx = t.a * lx + t.c * ly + t.tx;\n          ly = t.b * tempX + t.d * ly + t.ty;\n        }\n        this._currentPoly.points.push(lx, ly);\n      } else {\n        this._currentPoly.points.push(0, 0);\n      }\n    }\n  }\n  /** Builds the path. */\n  buildPath() {\n    const path = this._graphicsPath2D;\n    this.shapePrimitives.length = 0;\n    this._currentPoly = null;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    this.finish();\n  }\n  /** Gets the bounds of the path. */\n  get bounds() {\n    const bounds = this._bounds;\n    bounds.clear();\n    const shapePrimitives = this.shapePrimitives;\n    for (let i = 0; i < shapePrimitives.length; i++) {\n      const shapePrimitive = shapePrimitives[i];\n      const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n      if (shapePrimitive.transform) {\n        bounds.addRect(boundsRect, shapePrimitive.transform);\n      } else {\n        bounds.addRect(boundsRect);\n      }\n    }\n    return bounds;\n  }\n}\n\nexport { ShapePath };\n//# sourceMappingURL=ShapePath.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { parseSVGPath } from '../svg/parseSVGPath.mjs';\nimport { ShapePath } from './ShapePath.mjs';\n\n\"use strict\";\nclass GraphicsPath {\n  /**\n   * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n   * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n   * @param signed\n   */\n  constructor(instructions, signed = false) {\n    this.instructions = [];\n    /** unique id for this graphics path */\n    this.uid = uid(\"graphicsPath\");\n    this._dirty = true;\n    this.checkForHoles = signed;\n    if (typeof instructions === \"string\") {\n      parseSVGPath(instructions, this);\n    } else {\n      this.instructions = instructions?.slice() ?? [];\n    }\n  }\n  /**\n   * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n   * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n   */\n  get shapePath() {\n    if (!this._shapePath) {\n      this._shapePath = new ShapePath(this);\n    }\n    if (this._dirty) {\n      this._dirty = false;\n      this._shapePath.buildPath();\n    }\n    return this._shapePath;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @param transform - An optional transformation to apply to the added path.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    path = path.clone();\n    this.instructions.push({ action: \"addPath\", data: [path, transform] });\n    this._dirty = true;\n    return this;\n  }\n  arc(...args) {\n    this.instructions.push({ action: \"arc\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcTo(...args) {\n    this.instructions.push({ action: \"arcTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcToSvg(...args) {\n    this.instructions.push({ action: \"arcToSvg\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  bezierCurveTo(...args) {\n    this.instructions.push({ action: \"bezierCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires two points: the second control point and the end point. The first control point is assumed to be\n   * The starting point is the last point in the current path.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveToShort(cp2x, cp2y, x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cp1x = 0;\n    let cp1y = 0;\n    if (!last || last.action !== \"bezierCurveTo\") {\n      cp1x = lastPoint.x;\n      cp1y = lastPoint.y;\n    } else {\n      cp1x = last.data[2];\n      cp1y = last.data[3];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cp1x = currentX + (currentX - cp1x);\n      cp1y = currentY + (currentY - cp1y);\n    }\n    this.instructions.push({ action: \"bezierCurveTo\", data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.instructions.push({ action: \"closePath\", data: [] });\n    this._dirty = true;\n    return this;\n  }\n  ellipse(...args) {\n    this.instructions.push({ action: \"ellipse\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  lineTo(...args) {\n    this.instructions.push({ action: \"lineTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  moveTo(...args) {\n    this.instructions.push({ action: \"moveTo\", data: args });\n    return this;\n  }\n  quadraticCurveTo(...args) {\n    this.instructions.push({ action: \"quadraticCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It uses the previous point as the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveToShort(x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cpx1 = 0;\n    let cpy1 = 0;\n    if (!last || last.action !== \"quadraticCurveTo\") {\n      cpx1 = lastPoint.x;\n      cpy1 = lastPoint.y;\n    } else {\n      cpx1 = last.data[0];\n      cpy1 = last.data[1];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cpx1 = currentX + (currentX - cpx1);\n      cpy1 = currentY + (currentY - cpy1);\n    }\n    this.instructions.push({ action: \"quadraticCurveTo\", data: [cpx1, cpy1, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.instructions.push({ action: \"rect\", data: [x, y, w, h, transform] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.instructions.push({ action: \"circle\", data: [x, y, radius, transform] });\n    this._dirty = true;\n    return this;\n  }\n  roundRect(...args) {\n    this.instructions.push({ action: \"roundRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  poly(...args) {\n    this.instructions.push({ action: \"poly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  regularPoly(...args) {\n    this.instructions.push({ action: \"regularPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundPoly(...args) {\n    this.instructions.push({ action: \"roundPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundShape(...args) {\n    this.instructions.push({ action: \"roundShape\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  filletRect(...args) {\n    this.instructions.push({ action: \"filletRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  chamferRect(...args) {\n    this.instructions.push({ action: \"chamferRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @param transform - An optional `Matrix` object to apply a transformation to the star.\n   * This can include rotations, scaling, and translations.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  // eslint-disable-next-line max-len\n  star(x, y, points, radius, innerRadius, rotation, transform) {\n    innerRadius || (innerRadius = radius / 2);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const len = points * 2;\n    const delta = Math.PI * 2 / len;\n    const polygon = [];\n    for (let i = 0; i < len; i++) {\n      const r = i % 2 ? innerRadius : radius;\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + r * Math.cos(angle),\n        y + r * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n   * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n   * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n   * do not affect the original `GraphicsPath` and vice versa.\n   * @param deep - A boolean flag indicating whether the clone should be deep.\n   * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n   */\n  clone(deep = false) {\n    const newGraphicsPath2D = new GraphicsPath();\n    newGraphicsPath2D.checkForHoles = this.checkForHoles;\n    if (!deep) {\n      newGraphicsPath2D.instructions = this.instructions.slice();\n    } else {\n      for (let i = 0; i < this.instructions.length; i++) {\n        const instruction = this.instructions[i];\n        newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n      }\n    }\n    return newGraphicsPath2D;\n  }\n  clear() {\n    this.instructions.length = 0;\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n   * This method enables the modification of the path's geometry according to the provided\n   * transformation matrix, which can include translations, rotations, scaling, and skewing.\n   *\n   * Each drawing instruction in the path is updated to reflect the transformation,\n   * ensuring the visual representation of the path is consistent with the applied matrix.\n   *\n   * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n   * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n   * allowing for fine-grained control over the path's appearance.\n   * @param matrix - A `Matrix` object representing the transformation to apply.\n   * @returns The instance of the current object for chaining further operations.\n   */\n  transform(matrix) {\n    if (matrix.isIdentity())\n      return this;\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let x = 0;\n    let y = 0;\n    let cpx1 = 0;\n    let cpy1 = 0;\n    let cpx2 = 0;\n    let cpy2 = 0;\n    let rx = 0;\n    let ry = 0;\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const data = instruction.data;\n      switch (instruction.action) {\n        case \"moveTo\":\n        case \"lineTo\":\n          x = data[0];\n          y = data[1];\n          data[0] = a * x + c * y + tx;\n          data[1] = b * x + d * y + ty;\n          break;\n        case \"bezierCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          cpx2 = data[2];\n          cpy2 = data[3];\n          x = data[4];\n          y = data[5];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * cpx2 + c * cpy2 + tx;\n          data[3] = b * cpx2 + d * cpy2 + ty;\n          data[4] = a * x + c * y + tx;\n          data[5] = b * x + d * y + ty;\n          break;\n        case \"quadraticCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          x = data[2];\n          y = data[3];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * x + c * y + tx;\n          data[3] = b * x + d * y + ty;\n          break;\n        case \"arcToSvg\":\n          x = data[5];\n          y = data[6];\n          rx = data[0];\n          ry = data[1];\n          data[0] = a * rx + c * ry;\n          data[1] = b * rx + d * ry;\n          data[5] = a * x + c * y + tx;\n          data[6] = b * x + d * y + ty;\n          break;\n        case \"circle\":\n          data[4] = adjustTransform(data[3], matrix);\n          break;\n        case \"rect\":\n          data[4] = adjustTransform(data[4], matrix);\n          break;\n        case \"ellipse\":\n          data[8] = adjustTransform(data[8], matrix);\n          break;\n        case \"roundRect\":\n          data[5] = adjustTransform(data[5], matrix);\n          break;\n        case \"addPath\":\n          data[0].transform(matrix);\n          break;\n        case \"poly\":\n          data[2] = adjustTransform(data[2], matrix);\n          break;\n        default:\n          warn(\"unknown transform action\", instruction.action);\n          break;\n      }\n    }\n    this._dirty = true;\n    return this;\n  }\n  get bounds() {\n    return this.shapePath.bounds;\n  }\n  /**\n   * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n   * This method is useful for operations that depend on the path's current endpoint,\n   * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n   * ensuring the last point's position is accurately determined regardless of the path's complexity.\n   *\n   * If the last instruction is a `closePath`, the method iterates backward through the instructions\n   *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n   * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n   * the last point from the nested path.\n   * @param out - A `Point` object where the last point's coordinates will be stored.\n   * This object is modified directly to contain the result.\n   * @returns The `Point` object containing the last point's coordinates.\n   */\n  getLastPoint(out) {\n    let index = this.instructions.length - 1;\n    let lastInstruction = this.instructions[index];\n    if (!lastInstruction) {\n      out.x = 0;\n      out.y = 0;\n      return out;\n    }\n    while (lastInstruction.action === \"closePath\") {\n      index--;\n      if (index < 0) {\n        out.x = 0;\n        out.y = 0;\n        return out;\n      }\n      lastInstruction = this.instructions[index];\n    }\n    switch (lastInstruction.action) {\n      case \"moveTo\":\n      case \"lineTo\":\n        out.x = lastInstruction.data[0];\n        out.y = lastInstruction.data[1];\n        break;\n      case \"quadraticCurveTo\":\n        out.x = lastInstruction.data[2];\n        out.y = lastInstruction.data[3];\n        break;\n      case \"bezierCurveTo\":\n        out.x = lastInstruction.data[4];\n        out.y = lastInstruction.data[5];\n        break;\n      case \"arc\":\n      case \"arcToSvg\":\n        out.x = lastInstruction.data[5];\n        out.y = lastInstruction.data[6];\n        break;\n      case \"addPath\":\n        lastInstruction.data[0].getLastPoint(out);\n        break;\n    }\n    return out;\n  }\n}\nfunction adjustTransform(currentMatrix, transform) {\n  if (currentMatrix) {\n    return currentMatrix.prepend(transform);\n  }\n  return transform.clone();\n}\n\nexport { GraphicsPath };\n//# sourceMappingURL=GraphicsPath.mjs.map\n","\"use strict\";\nfunction parseSVGFloatAttribute(svg, id, defaultValue) {\n  const value = svg.getAttribute(id);\n  return value ? Number(value) : defaultValue;\n}\n\nexport { parseSVGFloatAttribute };\n//# sourceMappingURL=parseSVGFloatAttribute.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { parseSVGFloatAttribute } from './parseSVGFloatAttribute.mjs';\n\n\"use strict\";\nfunction parseSVGDefinitions(svg, session) {\n  const definitions = svg.querySelectorAll(\"defs\");\n  for (let i = 0; i < definitions.length; i++) {\n    const definition = definitions[i];\n    for (let j = 0; j < definition.children.length; j++) {\n      const child = definition.children[j];\n      switch (child.nodeName.toLowerCase()) {\n        case \"lineargradient\":\n          session.defs[child.id] = parseLinearGradient(child);\n          break;\n        case \"radialgradient\":\n          session.defs[child.id] = parseRadialGradient(child);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n}\nfunction parseLinearGradient(child) {\n  const x0 = parseSVGFloatAttribute(child, \"x1\", 0);\n  const y0 = parseSVGFloatAttribute(child, \"y1\", 0);\n  const x1 = parseSVGFloatAttribute(child, \"x2\", 1);\n  const y1 = parseSVGFloatAttribute(child, \"y2\", 0);\n  const gradientUnit = child.getAttribute(\"gradientUnits\") || \"objectBoundingBox\";\n  const gradient = new FillGradient(\n    x0,\n    y0,\n    x1,\n    y1,\n    gradientUnit === \"objectBoundingBox\" ? \"local\" : \"global\"\n  );\n  for (let k = 0; k < child.children.length; k++) {\n    const stop = child.children[k];\n    const offset = parseSVGFloatAttribute(stop, \"offset\", 0);\n    const color = Color.shared.setValue(stop.getAttribute(\"stop-color\")).toNumber();\n    gradient.addColorStop(offset, color);\n  }\n  return gradient;\n}\nfunction parseRadialGradient(_child) {\n  warn(\"[SVG Parser] Radial gradients are not yet supported\");\n  return new FillGradient(0, 0, 1, 0);\n}\n\nexport { parseSVGDefinitions };\n//# sourceMappingURL=parseSVGDefinitions.mjs.map\n","\"use strict\";\nfunction extractSvgUrlId(url) {\n  const match = url.match(/url\\s*\\(\\s*['\"]?\\s*#([^'\"\\s)]+)\\s*['\"]?\\s*\\)/i);\n  return match ? match[1] : \"\";\n}\n\nexport { extractSvgUrlId };\n//# sourceMappingURL=extractSvgUrlId.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { extractSvgUrlId } from './utils/extractSvgUrlId.mjs';\n\n\"use strict\";\nconst styleAttributes = {\n  // Fill properties\n  fill: { type: \"paint\", default: 0 },\n  // Fill color/gradient\n  \"fill-opacity\": { type: \"number\", default: 1 },\n  // Fill transparency\n  // Stroke properties\n  stroke: { type: \"paint\", default: 0 },\n  // Stroke color/gradient\n  \"stroke-width\": { type: \"number\", default: 1 },\n  // Width of stroke\n  \"stroke-opacity\": { type: \"number\", default: 1 },\n  // Stroke transparency\n  \"stroke-linecap\": { type: \"string\", default: \"butt\" },\n  // End cap style: butt, round, square\n  \"stroke-linejoin\": { type: \"string\", default: \"miter\" },\n  // Join style: miter, round, bevel\n  \"stroke-miterlimit\": { type: \"number\", default: 10 },\n  // Limit on miter join sharpness\n  \"stroke-dasharray\": { type: \"string\", default: \"none\" },\n  // Dash pattern\n  \"stroke-dashoffset\": { type: \"number\", default: 0 },\n  // Offset for dash pattern\n  // Global properties\n  opacity: { type: \"number\", default: 1 }\n  // Overall opacity\n};\nfunction parseSVGStyle(svg, session) {\n  const style = svg.getAttribute(\"style\");\n  const strokeStyle = {};\n  const fillStyle = {};\n  const result = {\n    strokeStyle,\n    fillStyle,\n    useFill: false,\n    useStroke: false\n  };\n  for (const key in styleAttributes) {\n    const attribute = svg.getAttribute(key);\n    if (attribute) {\n      parseAttribute(session, result, key, attribute.trim());\n    }\n  }\n  if (style) {\n    const styleParts = style.split(\";\");\n    for (let i = 0; i < styleParts.length; i++) {\n      const stylePart = styleParts[i].trim();\n      const [key, value] = stylePart.split(\":\");\n      if (styleAttributes[key]) {\n        parseAttribute(session, result, key, value.trim());\n      }\n    }\n  }\n  return {\n    strokeStyle: result.useStroke ? strokeStyle : null,\n    fillStyle: result.useFill ? fillStyle : null,\n    useFill: result.useFill,\n    useStroke: result.useStroke\n  };\n}\nfunction parseAttribute(session, result, id, value) {\n  switch (id) {\n    case \"stroke\":\n      if (value !== \"none\") {\n        if (value.startsWith(\"url(\")) {\n          const id2 = extractSvgUrlId(value);\n          result.strokeStyle.fill = session.defs[id2];\n        } else {\n          result.strokeStyle.color = Color.shared.setValue(value).toNumber();\n        }\n        result.useStroke = true;\n      }\n      break;\n    case \"stroke-width\":\n      result.strokeStyle.width = Number(value);\n      break;\n    case \"fill\":\n      if (value !== \"none\") {\n        if (value.startsWith(\"url(\")) {\n          const id2 = extractSvgUrlId(value);\n          result.fillStyle.fill = session.defs[id2];\n        } else {\n          result.fillStyle.color = Color.shared.setValue(value).toNumber();\n        }\n        result.useFill = true;\n      }\n      break;\n    case \"fill-opacity\":\n      result.fillStyle.alpha = Number(value);\n      break;\n    case \"stroke-opacity\":\n      result.strokeStyle.alpha = Number(value);\n      break;\n    case \"opacity\":\n      result.fillStyle.alpha = Number(value);\n      result.strokeStyle.alpha = Number(value);\n      break;\n  }\n}\n\nexport { parseSVGStyle, styleAttributes };\n//# sourceMappingURL=parseSVGStyle.mjs.map\n","\"use strict\";\nfunction checkForNestedPattern(subpathsWithArea) {\n  if (subpathsWithArea.length <= 2) {\n    return true;\n  }\n  const areas = subpathsWithArea.map((s) => s.area).sort((a, b) => b - a);\n  const [largestArea, secondArea] = areas;\n  const smallestArea = areas[areas.length - 1];\n  const largestToSecondRatio = largestArea / secondArea;\n  const secondToSmallestRatio = secondArea / smallestArea;\n  if (largestToSecondRatio > 3 && secondToSmallestRatio < 2) {\n    return false;\n  }\n  return true;\n}\nfunction getFillInstructionData(context, index = 0) {\n  const instruction = context.instructions[index];\n  if (!instruction || instruction.action !== \"fill\") {\n    throw new Error(`Expected fill instruction at index ${index}, got ${instruction?.action || \"undefined\"}`);\n  }\n  return instruction.data;\n}\n\nexport { checkForNestedPattern, getFillInstructionData };\n//# sourceMappingURL=fillOperations.mjs.map\n","import { GraphicsPath } from '../../path/GraphicsPath.mjs';\n\n\"use strict\";\nfunction extractSubpaths(pathData) {\n  const parts = pathData.split(/(?=[Mm])/);\n  const subpaths = parts.filter((part) => part.trim().length > 0);\n  return subpaths;\n}\nfunction calculatePathArea(pathData) {\n  const coords = pathData.match(/[-+]?[0-9]*\\.?[0-9]+/g);\n  if (!coords || coords.length < 4)\n    return 0;\n  const numbers = coords.map(Number);\n  const xs = [];\n  const ys = [];\n  for (let i = 0; i < numbers.length; i += 2) {\n    if (i + 1 < numbers.length) {\n      xs.push(numbers[i]);\n      ys.push(numbers[i + 1]);\n    }\n  }\n  if (xs.length === 0 || ys.length === 0)\n    return 0;\n  const minX = Math.min(...xs);\n  const maxX = Math.max(...xs);\n  const minY = Math.min(...ys);\n  const maxY = Math.max(...ys);\n  const area = (maxX - minX) * (maxY - minY);\n  return area;\n}\nfunction appendSVGPath(pathData, graphicsPath) {\n  const tempPath = new GraphicsPath(pathData, false);\n  for (const instruction of tempPath.instructions) {\n    graphicsPath.instructions.push(instruction);\n  }\n}\n\nexport { appendSVGPath, calculatePathArea, extractSubpaths };\n//# sourceMappingURL=pathOperations.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\nimport { GraphicsPath } from '../path/GraphicsPath.mjs';\nimport { parseSVGDefinitions } from './parseSVGDefinitions.mjs';\nimport { parseSVGFloatAttribute } from './parseSVGFloatAttribute.mjs';\nimport { parseSVGStyle } from './parseSVGStyle.mjs';\nimport { checkForNestedPattern } from './utils/fillOperations.mjs';\nimport { extractSubpaths, calculatePathArea, appendSVGPath } from './utils/pathOperations.mjs';\n\n\"use strict\";\nfunction SVGParser(svg, graphicsContext) {\n  if (typeof svg === \"string\") {\n    const div = document.createElement(\"div\");\n    div.innerHTML = svg.trim();\n    svg = div.querySelector(\"svg\");\n  }\n  const session = {\n    context: graphicsContext,\n    defs: {},\n    path: new GraphicsPath()\n  };\n  parseSVGDefinitions(svg, session);\n  const children = svg.children;\n  const { fillStyle, strokeStyle } = parseSVGStyle(svg, session);\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (child.nodeName.toLowerCase() === \"defs\")\n      continue;\n    renderChildren(child, session, fillStyle, strokeStyle);\n  }\n  return graphicsContext;\n}\nfunction renderChildren(svg, session, fillStyle, strokeStyle) {\n  const children = svg.children;\n  const { fillStyle: f1, strokeStyle: s1 } = parseSVGStyle(svg, session);\n  if (f1 && fillStyle) {\n    fillStyle = { ...fillStyle, ...f1 };\n  } else if (f1) {\n    fillStyle = f1;\n  }\n  if (s1 && strokeStyle) {\n    strokeStyle = { ...strokeStyle, ...s1 };\n  } else if (s1) {\n    strokeStyle = s1;\n  }\n  const noStyle = !fillStyle && !strokeStyle;\n  if (noStyle) {\n    fillStyle = { color: 0 };\n  }\n  let x;\n  let y;\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let cx;\n  let cy;\n  let r;\n  let rx;\n  let ry;\n  let points;\n  let pointsString;\n  let d;\n  let graphicsPath;\n  let width;\n  let height;\n  switch (svg.nodeName.toLowerCase()) {\n    case \"path\": {\n      d = svg.getAttribute(\"d\");\n      const fillRule = svg.getAttribute(\"fill-rule\");\n      const subpaths = extractSubpaths(d);\n      const hasExplicitEvenodd = fillRule === \"evenodd\";\n      const hasMultipleSubpaths = subpaths.length > 1;\n      const shouldProcessHoles = hasExplicitEvenodd && hasMultipleSubpaths;\n      if (shouldProcessHoles) {\n        const subpathsWithArea = subpaths.map((subpath) => ({\n          path: subpath,\n          area: calculatePathArea(subpath)\n        }));\n        subpathsWithArea.sort((a, b) => b.area - a.area);\n        const useMultipleHolesApproach = subpaths.length > 3 || !checkForNestedPattern(subpathsWithArea);\n        if (useMultipleHolesApproach) {\n          for (let i = 0; i < subpathsWithArea.length; i++) {\n            const subpath = subpathsWithArea[i];\n            const isMainShape = i === 0;\n            session.context.beginPath();\n            const newPath = new GraphicsPath(void 0, true);\n            appendSVGPath(subpath.path, newPath);\n            session.context.path(newPath);\n            if (isMainShape) {\n              if (fillStyle)\n                session.context.fill(fillStyle);\n              if (strokeStyle)\n                session.context.stroke(strokeStyle);\n            } else {\n              session.context.cut();\n            }\n          }\n        } else {\n          for (let i = 0; i < subpathsWithArea.length; i++) {\n            const subpath = subpathsWithArea[i];\n            const isHole = i % 2 === 1;\n            session.context.beginPath();\n            const newPath = new GraphicsPath(void 0, true);\n            appendSVGPath(subpath.path, newPath);\n            session.context.path(newPath);\n            if (isHole) {\n              session.context.cut();\n            } else {\n              if (fillStyle)\n                session.context.fill(fillStyle);\n              if (strokeStyle)\n                session.context.stroke(strokeStyle);\n            }\n          }\n        }\n      } else {\n        const useEvenoddForGraphicsPath = fillRule ? fillRule === \"evenodd\" : true;\n        graphicsPath = new GraphicsPath(d, useEvenoddForGraphicsPath);\n        session.context.path(graphicsPath);\n        if (fillStyle)\n          session.context.fill(fillStyle);\n        if (strokeStyle)\n          session.context.stroke(strokeStyle);\n      }\n      break;\n    }\n    case \"circle\":\n      cx = parseSVGFloatAttribute(svg, \"cx\", 0);\n      cy = parseSVGFloatAttribute(svg, \"cy\", 0);\n      r = parseSVGFloatAttribute(svg, \"r\", 0);\n      session.context.ellipse(cx, cy, r, r);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"rect\":\n      x = parseSVGFloatAttribute(svg, \"x\", 0);\n      y = parseSVGFloatAttribute(svg, \"y\", 0);\n      width = parseSVGFloatAttribute(svg, \"width\", 0);\n      height = parseSVGFloatAttribute(svg, \"height\", 0);\n      rx = parseSVGFloatAttribute(svg, \"rx\", 0);\n      ry = parseSVGFloatAttribute(svg, \"ry\", 0);\n      if (rx || ry) {\n        session.context.roundRect(x, y, width, height, rx || ry);\n      } else {\n        session.context.rect(x, y, width, height);\n      }\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"ellipse\":\n      cx = parseSVGFloatAttribute(svg, \"cx\", 0);\n      cy = parseSVGFloatAttribute(svg, \"cy\", 0);\n      rx = parseSVGFloatAttribute(svg, \"rx\", 0);\n      ry = parseSVGFloatAttribute(svg, \"ry\", 0);\n      session.context.beginPath();\n      session.context.ellipse(cx, cy, rx, ry);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"line\":\n      x1 = parseSVGFloatAttribute(svg, \"x1\", 0);\n      y1 = parseSVGFloatAttribute(svg, \"y1\", 0);\n      x2 = parseSVGFloatAttribute(svg, \"x2\", 0);\n      y2 = parseSVGFloatAttribute(svg, \"y2\", 0);\n      session.context.beginPath();\n      session.context.moveTo(x1, y1);\n      session.context.lineTo(x2, y2);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"polygon\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, true);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"polyline\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, false);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"g\":\n    case \"svg\":\n      break;\n    default: {\n      warn(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n      break;\n    }\n  }\n  if (noStyle) {\n    fillStyle = null;\n  }\n  for (let i = 0; i < children.length; i++) {\n    renderChildren(children[i], session, fillStyle, strokeStyle);\n  }\n}\n\nexport { SVGParser };\n//# sourceMappingURL=SVGParser.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { FillPattern } from '../fill/FillPattern.mjs';\n\n\"use strict\";\nfunction isColorLike(value) {\n  return Color.isColorLike(value);\n}\nfunction isFillPattern(value) {\n  return value instanceof FillPattern;\n}\nfunction isFillGradient(value) {\n  return value instanceof FillGradient;\n}\nfunction isTexture(value) {\n  return value instanceof Texture;\n}\nfunction handleColorLike(fill, value, defaultStyle) {\n  const temp = Color.shared.setValue(value ?? 0);\n  fill.color = temp.toNumber();\n  fill.alpha = temp.alpha === 1 ? defaultStyle.alpha : temp.alpha;\n  fill.texture = Texture.WHITE;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleTexture(fill, value, defaultStyle) {\n  fill.texture = value;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillPattern(fill, value, defaultStyle) {\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillGradient(fill, value, defaultStyle) {\n  value.buildGradient();\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  fill.textureSpace = value.textureSpace;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillObject(value, defaultStyle) {\n  const style = { ...defaultStyle, ...value };\n  const color = Color.shared.setValue(style.color);\n  style.alpha *= color.alpha;\n  style.color = color.toNumber();\n  return style;\n}\nfunction toFillStyle(value, defaultStyle) {\n  if (value === void 0 || value === null) {\n    return null;\n  }\n  const fill = {};\n  const objectStyle = value;\n  if (isColorLike(value)) {\n    return handleColorLike(fill, value, defaultStyle);\n  } else if (isTexture(value)) {\n    return handleTexture(fill, value, defaultStyle);\n  } else if (isFillPattern(value)) {\n    return handleFillPattern(fill, value, defaultStyle);\n  } else if (isFillGradient(value)) {\n    return handleFillGradient(fill, value, defaultStyle);\n  } else if (objectStyle.fill && isFillPattern(objectStyle.fill)) {\n    return handleFillPattern(objectStyle, objectStyle.fill, defaultStyle);\n  } else if (objectStyle.fill && isFillGradient(objectStyle.fill)) {\n    return handleFillGradient(objectStyle, objectStyle.fill, defaultStyle);\n  }\n  return handleFillObject(objectStyle, defaultStyle);\n}\nfunction toStrokeStyle(value, defaultStyle) {\n  const { width, alignment, miterLimit, cap, join, pixelLine, ...rest } = defaultStyle;\n  const fill = toFillStyle(value, rest);\n  if (!fill) {\n    return null;\n  }\n  return {\n    width,\n    alignment,\n    miterLimit,\n    cap,\n    join,\n    pixelLine,\n    ...fill\n  };\n}\n\nexport { toFillStyle, toStrokeStyle };\n//# sourceMappingURL=convertFillInputToFillStyle.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../../color/Color.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { GraphicsPath } from './path/GraphicsPath.mjs';\nimport { SVGParser } from './svg/SVGParser.mjs';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst tmpPoint = new Point();\nconst tempMatrix = new Matrix();\nconst _GraphicsContext = class _GraphicsContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /**\n     * unique id for this graphics context\n     * @internal\n     */\n    this.uid = uid(\"graphicsContext\");\n    /**\n     * Indicates whether content is updated and have to be re-rendered.\n     * @internal\n     */\n    this.dirty = true;\n    /** The batch mode for this graphics context. It can be 'auto', 'batch', or 'no-batch'. */\n    this.batchMode = \"auto\";\n    /** @internal */\n    this.instructions = [];\n    this._activePath = new GraphicsPath();\n    this._transform = new Matrix();\n    this._fillStyle = { ..._GraphicsContext.defaultFillStyle };\n    this._strokeStyle = { ..._GraphicsContext.defaultStrokeStyle };\n    this._stateStack = [];\n    this._tick = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n  }\n  /**\n   * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n   * including the current drawing state, transformations, styles, and instructions.\n   * @returns A new GraphicsContext instance with the same properties and state as this one.\n   */\n  clone() {\n    const clone = new _GraphicsContext();\n    clone.batchMode = this.batchMode;\n    clone.instructions = this.instructions.slice();\n    clone._activePath = this._activePath.clone();\n    clone._transform = this._transform.clone();\n    clone._fillStyle = { ...this._fillStyle };\n    clone._strokeStyle = { ...this._strokeStyle };\n    clone._stateStack = this._stateStack.slice();\n    clone._bounds = this._bounds.clone();\n    clone._boundsDirty = true;\n    return clone;\n  }\n  /**\n   * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n   */\n  get fillStyle() {\n    return this._fillStyle;\n  }\n  set fillStyle(value) {\n    this._fillStyle = toFillStyle(value, _GraphicsContext.defaultFillStyle);\n  }\n  /**\n   * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   */\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._strokeStyle = toStrokeStyle(value, _GraphicsContext.defaultStrokeStyle);\n  }\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n   *                or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(style) {\n    this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    return this;\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   *                or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(style) {\n    this._strokeStyle = toFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    return this;\n  }\n  texture(texture, tint, dx, dy, dw, dh) {\n    this.instructions.push({\n      action: \"texture\",\n      data: {\n        image: texture,\n        dx: dx || 0,\n        dy: dy || 0,\n        dw: dw || texture.frame.width,\n        dh: dh || texture.frame.height,\n        transform: this._transform.clone(),\n        alpha: this._fillStyle.alpha,\n        style: tint ? Color.shared.setValue(tint).toNumber() : 16777215\n      }\n    });\n    this.onUpdate();\n    return this;\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    this._activePath = new GraphicsPath();\n    return this;\n  }\n  fill(style, alpha) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"stroke\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      if (alpha !== void 0 && typeof style === \"number\") {\n        deprecation(v8_0_0, \"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead\");\n        style = { color: style, alpha };\n      }\n      this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    }\n    this.instructions.push({\n      action: \"fill\",\n      // TODO copy fill style!\n      data: { style: this.fillStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  _initNextPathLocation() {\n    const { x, y } = this._activePath.getLastPoint(Point.shared);\n    this._activePath.clear();\n    this._activePath.moveTo(x, y);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(style) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction && lastInstruction.action === \"fill\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      this._strokeStyle = toStrokeStyle(style, _GraphicsContext.defaultStrokeStyle);\n    }\n    this.instructions.push({\n      action: \"stroke\",\n      // TODO copy fill style!\n      data: { style: this.strokeStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  cut() {\n    for (let i = 0; i < 2; i++) {\n      const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n      const holePath = this._activePath.clone();\n      if (lastInstruction) {\n        if (lastInstruction.action === \"stroke\" || lastInstruction.action === \"fill\") {\n          if (lastInstruction.data.hole) {\n            lastInstruction.data.hole.addPath(holePath);\n          } else {\n            lastInstruction.data.hole = holePath;\n            break;\n          }\n        }\n      }\n    }\n    this._initNextPathLocation();\n    return this;\n  }\n  /**\n   * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n   * starting and ending angles, and direction.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The arc's radius.\n   * @param startAngle - The starting angle, in radians.\n   * @param endAngle - The ending angle, in radians.\n   * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arc(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      radius,\n      startAngle,\n      endAngle,\n      counterclockwise\n    );\n    return this;\n  }\n  /**\n   * Adds an arc to the current path with the given control points and radius, connected to the previous point\n   * by a straight line if necessary.\n   * @param x1 - The x-coordinate of the first control point.\n   * @param y1 - The y-coordinate of the first control point.\n   * @param x2 - The x-coordinate of the second control point.\n   * @param y2 - The y-coordinate of the second control point.\n   * @param radius - The arc's radius.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcTo(\n      t.a * x1 + t.c * y1 + t.tx,\n      t.b * x1 + t.d * y1 + t.ty,\n      t.a * x2 + t.c * y2 + t.tx,\n      t.b * x2 + t.d * y2 + t.ty,\n      radius\n    );\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcToSvg(\n      rx,\n      ry,\n      xAxisRotation,\n      // should we rotate this with transform??\n      largeArcFlag,\n      sweepFlag,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.bezierCurveTo(\n      t.a * cp1x + t.c * cp1y + t.tx,\n      t.b * cp1x + t.d * cp1y + t.ty,\n      t.a * cp2x + t.c * cp2y + t.tx,\n      t.b * cp2x + t.d * cp2y + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this._tick++;\n    this._activePath?.closePath();\n    return this;\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY) {\n    this._tick++;\n    this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius) {\n    this._tick++;\n    this._activePath.circle(x, y, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @returns The instance of the current object for chaining.\n   */\n  path(path) {\n    this._tick++;\n    this._activePath.addPath(path, this._transform.clone());\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.lineTo(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    const instructions = this._activePath.instructions;\n    const transformedX = t.a * x + t.c * y + t.tx;\n    const transformedY = t.b * x + t.d * y + t.ty;\n    if (instructions.length === 1 && instructions[0].action === \"moveTo\") {\n      instructions[0].data[0] = transformedX;\n      instructions[0].data[1] = transformedY;\n      return this;\n    }\n    this._activePath.moveTo(\n      transformedX,\n      transformedY\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cpx - The x-coordinate of the control point.\n   * @param cpy - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cpx, cpy, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.quadraticCurveTo(\n      t.a * cpx + t.c * cpy + t.tx,\n      t.b * cpx + t.d * cpy + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h) {\n    this._tick++;\n    this._activePath.rect(x, y, w, h, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius) {\n    this._tick++;\n    this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n   * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n   * rotated, or translated as needed.\n   * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates, of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   */\n  poly(points, close) {\n    this._tick++;\n    this._activePath.poly(points, close, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    this._tick++;\n    this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation) {\n    this._tick++;\n    this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n    return this;\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic, smoothness) {\n    this._tick++;\n    this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n    return this;\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    this._tick++;\n    this._activePath.filletRect(x, y, width, height, fillet);\n    return this;\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    this._tick++;\n    this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  star(x, y, points, radius, innerRadius = 0, rotation = 0) {\n    this._tick++;\n    this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n    return this;\n  }\n  /**\n   * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n   * defined in SVG format to be drawn within the graphics context.\n   * @param svg - The SVG string to be parsed and rendered.\n   */\n  svg(svg) {\n    this._tick++;\n    SVGParser(svg, this);\n    return this;\n  }\n  /**\n   * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n   * This includes transformations, fill styles, and stroke styles.\n   */\n  restore() {\n    const state = this._stateStack.pop();\n    if (state) {\n      this._transform = state.transform;\n      this._fillStyle = state.fillStyle;\n      this._strokeStyle = state.strokeStyle;\n    }\n    return this;\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    this._stateStack.push({\n      transform: this._transform.clone(),\n      fillStyle: { ...this._fillStyle },\n      strokeStyle: { ...this._strokeStyle }\n    });\n    return this;\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this._transform;\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    this._transform.identity();\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the graphics context around the current origin.\n   * @param angle - The angle of rotation in radians.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  rotate(angle) {\n    this._transform.rotate(angle);\n    return this;\n  }\n  /**\n   * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n   * @param x - The scale factor in the horizontal direction.\n   * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  scale(x, y = x) {\n    this._transform.scale(x, y);\n    return this;\n  }\n  setTransform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n      return this;\n    }\n    this._transform.set(a, b, c, d, dx, dy);\n    return this;\n  }\n  transform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.append(a);\n      return this;\n    }\n    tempMatrix.set(a, b, c, d, dx, dy);\n    this._transform.append(tempMatrix);\n    return this;\n  }\n  /**\n   * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n   * @param x - The amount to translate in the horizontal direction.\n   * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  translate(x, y = x) {\n    this._transform.translate(x, y);\n    return this;\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    this._activePath.clear();\n    this.instructions.length = 0;\n    this.resetTransform();\n    this.onUpdate();\n    return this;\n  }\n  onUpdate() {\n    this._boundsDirty = true;\n    if (this.dirty)\n      return;\n    this.emit(\"update\", this, 16);\n    this.dirty = true;\n  }\n  /** The bounds of the graphic shape. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    const bounds = this._bounds;\n    bounds.clear();\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const action = instruction.action;\n      if (action === \"fill\") {\n        const data = instruction.data;\n        bounds.addBounds(data.path.bounds);\n      } else if (action === \"texture\") {\n        const data = instruction.data;\n        bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n      }\n      if (action === \"stroke\") {\n        const data = instruction.data;\n        const alignment = data.style.alignment;\n        const outerPadding = data.style.width * (1 - alignment);\n        const _bounds = data.path.bounds;\n        bounds.addFrame(\n          _bounds.minX - outerPadding,\n          _bounds.minY - outerPadding,\n          _bounds.maxX + outerPadding,\n          _bounds.maxY + outerPadding\n        );\n      }\n    }\n    return bounds;\n  }\n  /**\n   * Check to see if a point is contained within this geometry.\n   * @param point - Point to check if it's contained.\n   * @returns {boolean} `true` if the point is contained within geometry.\n   */\n  containsPoint(point) {\n    if (!this.bounds.containsPoint(point.x, point.y))\n      return false;\n    const instructions = this.instructions;\n    let hasHit = false;\n    for (let k = 0; k < instructions.length; k++) {\n      const instruction = instructions[k];\n      const data = instruction.data;\n      const path = data.path;\n      if (!instruction.action || !path)\n        continue;\n      const style = data.style;\n      const shapes = path.shapePath.shapePrimitives;\n      for (let i = 0; i < shapes.length; i++) {\n        const shape = shapes[i].shape;\n        if (!style || !shape)\n          continue;\n        const transform = shapes[i].transform;\n        const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n        if (instruction.action === \"fill\") {\n          hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n        } else {\n          const strokeStyle = style;\n          hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, strokeStyle.width, strokeStyle.alignment);\n        }\n        const holes = data.hole;\n        if (holes) {\n          const holeShapes = holes.shapePath?.shapePrimitives;\n          if (holeShapes) {\n            for (let j = 0; j < holeShapes.length; j++) {\n              if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y)) {\n                hasHit = false;\n              }\n            }\n          }\n        }\n        if (hasHit) {\n          return true;\n        }\n      }\n    }\n    return hasHit;\n  }\n  /**\n   * Destroys the GraphicsData object.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * context.destroy();\n   * context.destroy(true);\n   * context.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options = false) {\n    this._stateStack.length = 0;\n    this._transform = null;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fillStyle.texture) {\n        this._fillStyle.fill && \"uid\" in this._fillStyle.fill ? this._fillStyle.fill.destroy() : this._fillStyle.texture.destroy(destroyTextureSource);\n      }\n      if (this._strokeStyle.texture) {\n        this._strokeStyle.fill && \"uid\" in this._strokeStyle.fill ? this._strokeStyle.fill.destroy() : this._strokeStyle.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fillStyle = null;\n    this._strokeStyle = null;\n    this.instructions = null;\n    this._activePath = null;\n    this._bounds = null;\n    this._stateStack = null;\n    this.customShader = null;\n    this._transform = null;\n  }\n};\n/** The default fill style to use when none is provided. */\n_GraphicsContext.defaultFillStyle = {\n  /** The color to use for the fill. */\n  color: 16777215,\n  /** The alpha value to use for the fill. */\n  alpha: 1,\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null,\n  /** Whether coordinates are 'global' or 'local' */\n  textureSpace: \"local\"\n};\n/** The default stroke style to use when none is provided. */\n_GraphicsContext.defaultStrokeStyle = {\n  /** The width of the stroke. */\n  width: 1,\n  /** The color to use for the stroke. */\n  color: 16777215,\n  /** The alpha value to use for the stroke. */\n  alpha: 1,\n  /** The alignment of the stroke. */\n  alignment: 0.5,\n  /** The miter limit to use. */\n  miterLimit: 10,\n  /** The line cap style to use. */\n  cap: \"butt\",\n  /** The line join style to use. */\n  join: \"miter\",\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null,\n  /** Whether coordinates are 'global' or 'local' */\n  textureSpace: \"local\",\n  /** If the stroke is a pixel line. */\n  pixelLine: false\n};\nlet GraphicsContext = _GraphicsContext;\n\nexport { GraphicsContext };\n//# sourceMappingURL=GraphicsContext.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../graphics/shared/fill/FillPattern.mjs';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext.mjs';\nimport { toFillStyle, toStrokeStyle } from '../graphics/shared/utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst _TextStyle = class _TextStyle extends EventEmitter {\n  constructor(style = {}) {\n    super();\n    /**\n     * Unique identifier for the TextStyle class.\n     * This is used to track instances and ensure uniqueness.\n     * @internal\n     */\n    this.uid = uid(\"textStyle\");\n    /**\n     * Internal tick counter used to track updates and changes.\n     * This is incremented whenever the style is modified, allowing for efficient change detection.\n     * @internal\n     */\n    this._tick = 0;\n    convertV7Tov8Style(style);\n    const fullStyle = { ..._TextStyle.defaultTextStyle, ...style };\n    for (const key in fullStyle) {\n      const thisKey = key;\n      this[thisKey] = fullStyle[key];\n    }\n    this.update();\n    this._tick = 0;\n  }\n  /**\n   * Alignment for multiline text, does not affect single line text.\n   * @type {'left'|'center'|'right'|'justify'}\n   */\n  get align() {\n    return this._align;\n  }\n  set align(value) {\n    this._align = value;\n    this.update();\n  }\n  /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n  get breakWords() {\n    return this._breakWords;\n  }\n  set breakWords(value) {\n    this._breakWords = value;\n    this.update();\n  }\n  /** Set a drop shadow for the text. */\n  get dropShadow() {\n    return this._dropShadow;\n  }\n  set dropShadow(value) {\n    if (value !== null && typeof value === \"object\") {\n      this._dropShadow = this._createProxy({ ..._TextStyle.defaultDropShadow, ...value });\n    } else {\n      this._dropShadow = value ? this._createProxy({ ..._TextStyle.defaultDropShadow }) : null;\n    }\n    this.update();\n  }\n  /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n  get fontFamily() {\n    return this._fontFamily;\n  }\n  set fontFamily(value) {\n    this._fontFamily = value;\n    this.update();\n  }\n  /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n  get fontSize() {\n    return this._fontSize;\n  }\n  set fontSize(value) {\n    if (typeof value === \"string\") {\n      this._fontSize = parseInt(value, 10);\n    } else {\n      this._fontSize = value;\n    }\n    this.update();\n  }\n  /**\n   * The font style.\n   * @type {'normal'|'italic'|'oblique'}\n   */\n  get fontStyle() {\n    return this._fontStyle;\n  }\n  set fontStyle(value) {\n    this._fontStyle = value.toLowerCase();\n    this.update();\n  }\n  /**\n   * The font variant.\n   * @type {'normal'|'small-caps'}\n   */\n  get fontVariant() {\n    return this._fontVariant;\n  }\n  set fontVariant(value) {\n    this._fontVariant = value;\n    this.update();\n  }\n  /**\n   * The font weight.\n   * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  get fontWeight() {\n    return this._fontWeight;\n  }\n  set fontWeight(value) {\n    this._fontWeight = value;\n    this.update();\n  }\n  /** The space between lines. */\n  get leading() {\n    return this._leading;\n  }\n  set leading(value) {\n    this._leading = value;\n    this.update();\n  }\n  /** The amount of spacing between letters, default is 0. */\n  get letterSpacing() {\n    return this._letterSpacing;\n  }\n  set letterSpacing(value) {\n    this._letterSpacing = value;\n    this.update();\n  }\n  /** The line height, a number that represents the vertical space that a letter uses. */\n  get lineHeight() {\n    return this._lineHeight;\n  }\n  set lineHeight(value) {\n    this._lineHeight = value;\n    this.update();\n  }\n  /**\n   * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n   * by adding padding to all sides of the text.\n   * > [!NOTE] This will NOT affect the positioning or bounds of the text.\n   */\n  get padding() {\n    return this._padding;\n  }\n  set padding(value) {\n    this._padding = value;\n    this.update();\n  }\n  /**\n   * An optional filter or array of filters to apply to the text, allowing for advanced visual effects.\n   * These filters will be applied to the text as it is created, resulting in faster rendering for static text\n   * compared to applying the filter directly to the text object (which would be applied at run time).\n   * @default null\n   */\n  get filters() {\n    return this._filters;\n  }\n  set filters(value) {\n    this._filters = Object.freeze(value);\n    this.update();\n  }\n  /**\n   * Trim transparent borders from the text texture.\n   * > [!IMPORTANT] PERFORMANCE WARNING:\n   * > This is a costly operation as it requires scanning pixel alpha values.\n   * > Avoid using `trim: true` for dynamic text, as it could significantly impact performance.\n   */\n  get trim() {\n    return this._trim;\n  }\n  set trim(value) {\n    this._trim = value;\n    this.update();\n  }\n  /**\n   * The baseline of the text that is rendered.\n   * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  get textBaseline() {\n    return this._textBaseline;\n  }\n  set textBaseline(value) {\n    this._textBaseline = value;\n    this.update();\n  }\n  /**\n   * How newlines and spaces should be handled.\n   * Default is 'pre' (preserve, preserve).\n   *\n   *  value       | New lines     |   Spaces\n   *  ---         | ---           |   ---\n   * 'normal'     | Collapse      |   Collapse\n   * 'pre'        | Preserve      |   Preserve\n   * 'pre-line'   | Preserve      |   Collapse\n   * @type {'normal'|'pre'|'pre-line'}\n   */\n  get whiteSpace() {\n    return this._whiteSpace;\n  }\n  set whiteSpace(value) {\n    this._whiteSpace = value;\n    this.update();\n  }\n  /** Indicates if word wrap should be used. */\n  get wordWrap() {\n    return this._wordWrap;\n  }\n  set wordWrap(value) {\n    this._wordWrap = value;\n    this.update();\n  }\n  /** The width at which text will wrap, it needs wordWrap to be set to true. */\n  get wordWrapWidth() {\n    return this._wordWrapWidth;\n  }\n  set wordWrapWidth(value) {\n    this._wordWrapWidth = value;\n    this.update();\n  }\n  /**\n   * The fill style that will be used to color the text.\n   * This can be:\n   * - A color string like 'red', '#00FF00', or 'rgba(255,0,0,0.5)'\n   * - A hex number like 0xff0000 for red\n   * - A FillStyle object with properties like { color: 0xff0000, alpha: 0.5 }\n   * - A FillGradient for gradient fills\n   * - A FillPattern for pattern/texture fills\n   *\n   * When using a FillGradient, vertical gradients (angle of 90 degrees) are applied per line of text,\n   * while gradients at any other angle are spread across the entire text body as a whole.\n   * @example\n   * // Vertical gradient applied per line\n   * const verticalGradient = new FillGradient(0, 0, 0, 1)\n   *     .addColorStop(0, 0xff0000)\n   *     .addColorStop(1, 0x0000ff);\n   *\n   * const text = new Text({\n   *     text: 'Line 1\\nLine 2',\n   *     style: { fill: verticalGradient }\n   * });\n   *\n   * To manage the gradient in a global scope, set the textureSpace property of the FillGradient to 'global'.\n   * @type {string|number|FillStyle|FillGradient|FillPattern}\n   */\n  get fill() {\n    return this._originalFill;\n  }\n  set fill(value) {\n    if (value === this._originalFill)\n      return;\n    this._originalFill = value;\n    if (this._isFillStyle(value)) {\n      this._originalFill = this._createProxy({ ...GraphicsContext.defaultFillStyle, ...value }, () => {\n        this._fill = toFillStyle(\n          { ...this._originalFill },\n          GraphicsContext.defaultFillStyle\n        );\n      });\n    }\n    this._fill = toFillStyle(\n      value === 0 ? \"black\" : value,\n      GraphicsContext.defaultFillStyle\n    );\n    this.update();\n  }\n  /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n  get stroke() {\n    return this._originalStroke;\n  }\n  set stroke(value) {\n    if (value === this._originalStroke)\n      return;\n    this._originalStroke = value;\n    if (this._isFillStyle(value)) {\n      this._originalStroke = this._createProxy({ ...GraphicsContext.defaultStrokeStyle, ...value }, () => {\n        this._stroke = toStrokeStyle(\n          { ...this._originalStroke },\n          GraphicsContext.defaultStrokeStyle\n        );\n      });\n    }\n    this._stroke = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    this.update();\n  }\n  update() {\n    this._tick++;\n    this.emit(\"update\", this);\n  }\n  /** Resets all properties to the default values */\n  reset() {\n    const defaultStyle = _TextStyle.defaultTextStyle;\n    for (const key in defaultStyle) {\n      this[key] = defaultStyle[key];\n    }\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `${this.uid}-${this._tick}`;\n  }\n  /**\n   * Creates a new TextStyle object with the same values as this one.\n   * @returns New cloned TextStyle object\n   */\n  clone() {\n    return new _TextStyle({\n      align: this.align,\n      breakWords: this.breakWords,\n      dropShadow: this._dropShadow ? { ...this._dropShadow } : null,\n      fill: this._fill,\n      fontFamily: this.fontFamily,\n      fontSize: this.fontSize,\n      fontStyle: this.fontStyle,\n      fontVariant: this.fontVariant,\n      fontWeight: this.fontWeight,\n      leading: this.leading,\n      letterSpacing: this.letterSpacing,\n      lineHeight: this.lineHeight,\n      padding: this.padding,\n      stroke: this._stroke,\n      textBaseline: this.textBaseline,\n      whiteSpace: this.whiteSpace,\n      wordWrap: this.wordWrap,\n      wordWrapWidth: this.wordWrapWidth,\n      filters: this._filters ? [...this._filters] : void 0\n    });\n  }\n  /**\n   * Returns the final padding for the text style, taking into account any filters applied.\n   * Used internally for correct measurements\n   * @internal\n   * @returns {number} The final padding for the text style.\n   */\n  _getFinalPadding() {\n    let filterPadding = 0;\n    if (this._filters) {\n      for (let i = 0; i < this._filters.length; i++) {\n        filterPadding += this._filters[i].padding;\n      }\n    }\n    return Math.max(this._padding, filterPadding);\n  }\n  /**\n   * Destroys this text style.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * // Destroy the text style and its textures\n   * textStyle.destroy({ texture: true, textureSource: true });\n   * textStyle.destroy(true);\n   */\n  destroy(options = false) {\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fill?.texture) {\n        this._fill.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalFill?.texture) {\n        this._originalFill.texture.destroy(destroyTextureSource);\n      }\n      if (this._stroke?.texture) {\n        this._stroke.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalStroke?.texture) {\n        this._originalStroke.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fill = null;\n    this._stroke = null;\n    this.dropShadow = null;\n    this._originalStroke = null;\n    this._originalFill = null;\n  }\n  _createProxy(value, cb) {\n    return new Proxy(value, {\n      set: (target, property, newValue) => {\n        target[property] = newValue;\n        cb?.(property, newValue);\n        this.update();\n        return true;\n      }\n    });\n  }\n  _isFillStyle(value) {\n    return (value ?? null) !== null && !(Color.isColorLike(value) || value instanceof FillGradient || value instanceof FillPattern);\n  }\n};\n/**\n * Default drop shadow settings used when enabling drop shadows on text.\n * These values are used as the base configuration when drop shadows are enabled without specific settings.\n * @example\n * ```ts\n * // Customize default settings globally\n * TextStyle.defaultDropShadow.alpha = 0.5;    // 50% opacity for all shadows\n * TextStyle.defaultDropShadow.blur = 2;       // 2px blur for all shadows\n * TextStyle.defaultDropShadow.color = 'blue'; // Blue shadows by default\n * ```\n */\n_TextStyle.defaultDropShadow = {\n  alpha: 1,\n  angle: Math.PI / 6,\n  blur: 0,\n  color: \"black\",\n  distance: 5\n};\n/**\n * Default text style settings used when creating new text objects.\n * These values serve as the base configuration and can be customized globally.\n * @example\n * ```ts\n * // Customize default text style globally\n * TextStyle.defaultTextStyle.fontSize = 16;\n * TextStyle.defaultTextStyle.fill = 0x333333;\n * TextStyle.defaultTextStyle.fontFamily = ['Arial', 'Helvetica', 'sans-serif'];\n * ```\n */\n_TextStyle.defaultTextStyle = {\n  align: \"left\",\n  breakWords: false,\n  dropShadow: null,\n  fill: \"black\",\n  fontFamily: \"Arial\",\n  fontSize: 26,\n  fontStyle: \"normal\",\n  fontVariant: \"normal\",\n  fontWeight: \"normal\",\n  leading: 0,\n  letterSpacing: 0,\n  lineHeight: 0,\n  padding: 0,\n  stroke: null,\n  textBaseline: \"alphabetic\",\n  trim: false,\n  whiteSpace: \"pre\",\n  wordWrap: false,\n  wordWrapWidth: 100\n};\nlet TextStyle = _TextStyle;\nfunction convertV7Tov8Style(style) {\n  const oldStyle = style;\n  if (typeof oldStyle.dropShadow === \"boolean\" && oldStyle.dropShadow) {\n    const defaults = TextStyle.defaultDropShadow;\n    style.dropShadow = {\n      alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n      angle: oldStyle.dropShadowAngle ?? defaults.angle,\n      blur: oldStyle.dropShadowBlur ?? defaults.blur,\n      color: oldStyle.dropShadowColor ?? defaults.color,\n      distance: oldStyle.dropShadowDistance ?? defaults.distance\n    };\n  }\n  if (oldStyle.strokeThickness !== void 0) {\n    deprecation(v8_0_0, \"strokeThickness is now a part of stroke\");\n    const color = oldStyle.stroke;\n    let obj = {};\n    if (Color.isColorLike(color)) {\n      obj.color = color;\n    } else if (color instanceof FillGradient || color instanceof FillPattern) {\n      obj.fill = color;\n    } else if (Object.hasOwnProperty.call(color, \"color\") || Object.hasOwnProperty.call(color, \"fill\")) {\n      obj = color;\n    } else {\n      throw new Error(\"Invalid stroke value.\");\n    }\n    style.stroke = {\n      ...obj,\n      width: oldStyle.strokeThickness\n    };\n  }\n  if (Array.isArray(oldStyle.fillGradientStops)) {\n    deprecation(v8_0_0, \"gradient fill is now a fill pattern: `new FillGradient(...)`\");\n    if (!Array.isArray(oldStyle.fill) || oldStyle.fill.length === 0) {\n      throw new Error(\"Invalid fill value. Expected an array of colors for gradient fill.\");\n    }\n    if (oldStyle.fill.length !== oldStyle.fillGradientStops.length) {\n      warn(\"The number of fill colors must match the number of fill gradient stops.\");\n    }\n    const gradientFill = new FillGradient({\n      start: { x: 0, y: 0 },\n      end: { x: 0, y: 1 },\n      textureSpace: \"local\"\n    });\n    const fillGradientStops = oldStyle.fillGradientStops.slice();\n    const fills = oldStyle.fill.map((color) => Color.shared.setValue(color).toNumber());\n    fillGradientStops.forEach((stop, index) => {\n      gradientFill.addColorStop(stop, fills[index]);\n    });\n    style.fill = {\n      fill: gradientFill\n    };\n  }\n}\n\nexport { TextStyle };\n//# sourceMappingURL=TextStyle.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\n\n\"use strict\";\nclass CanvasPoolClass {\n  constructor(canvasOptions) {\n    this._canvasPool = /* @__PURE__ */ Object.create(null);\n    this.canvasOptions = canvasOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */\n  _createCanvasAndContext(pixelWidth, pixelHeight) {\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = pixelWidth;\n    canvas.height = pixelHeight;\n    const context = canvas.getContext(\"2d\");\n    return { canvas, context };\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */\n  getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n    minWidth = Math.ceil(minWidth * resolution - 1e-6);\n    minHeight = Math.ceil(minHeight * resolution - 1e-6);\n    minWidth = nextPow2(minWidth);\n    minHeight = nextPow2(minHeight);\n    const key = (minWidth << 17) + (minHeight << 1);\n    if (!this._canvasPool[key]) {\n      this._canvasPool[key] = [];\n    }\n    let canvasAndContext = this._canvasPool[key].pop();\n    if (!canvasAndContext) {\n      canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n    }\n    return canvasAndContext;\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    const canvas = canvasAndContext.canvas;\n    const { width, height } = canvas;\n    const key = (width << 17) + (height << 1);\n    canvasAndContext.context.resetTransform();\n    canvasAndContext.context.clearRect(0, 0, width, height);\n    this._canvasPool[key].push(canvasAndContext);\n  }\n  clear() {\n    this._canvasPool = {};\n  }\n}\nconst CanvasPool = new CanvasPoolClass();\nGlobalResourceRegistry.register(CanvasPool);\n\nexport { CanvasPool, CanvasPoolClass };\n//# sourceMappingURL=CanvasPool.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern.mjs';\n\n\"use strict\";\nconst PRECISION = 1e5;\nfunction getCanvasFillStyle(fillStyle, context, textMetrics, padding = 0) {\n  if (fillStyle.texture === Texture.WHITE && !fillStyle.fill) {\n    return Color.shared.setValue(fillStyle.color).setAlpha(fillStyle.alpha ?? 1).toHexa();\n  } else if (!fillStyle.fill) {\n    const pattern = context.createPattern(fillStyle.texture.source.resource, \"repeat\");\n    const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n    tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillPattern) {\n    const fillPattern = fillStyle.fill;\n    const pattern = context.createPattern(fillPattern.texture.source.resource, \"repeat\");\n    const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n    tempMatrix.scale(\n      fillPattern.texture.frame.width,\n      fillPattern.texture.frame.height\n    );\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillGradient) {\n    const fillGradient = fillStyle.fill;\n    const isLinear = fillGradient.type === \"linear\";\n    const isLocal = fillGradient.textureSpace === \"local\";\n    let width = 1;\n    let height = 1;\n    if (isLocal && textMetrics) {\n      width = textMetrics.width + padding;\n      height = textMetrics.height + padding;\n    }\n    let gradient;\n    let isNearlyVertical = false;\n    if (isLinear) {\n      const { start, end } = fillGradient;\n      gradient = context.createLinearGradient(\n        start.x * width,\n        start.y * height,\n        end.x * width,\n        end.y * height\n      );\n      isNearlyVertical = Math.abs(end.x - start.x) < Math.abs((end.y - start.y) * 0.1);\n    } else {\n      const { center, innerRadius, outerCenter, outerRadius } = fillGradient;\n      gradient = context.createRadialGradient(\n        center.x * width,\n        center.y * height,\n        innerRadius * width,\n        outerCenter.x * width,\n        outerCenter.y * height,\n        outerRadius * width\n      );\n    }\n    if (isNearlyVertical && isLocal && textMetrics) {\n      const ratio = textMetrics.lineHeight / height;\n      for (let i = 0; i < textMetrics.lines.length; i++) {\n        const start = (i * textMetrics.lineHeight + padding / 2) / height;\n        fillGradient.colorStops.forEach((stop) => {\n          const globalStop = start + stop.offset * ratio;\n          gradient.addColorStop(\n            // fix to 5 decimal places to avoid floating point precision issues\n            Math.floor(globalStop * PRECISION) / PRECISION,\n            Color.shared.setValue(stop.color).toHex()\n          );\n        });\n      }\n    } else {\n      fillGradient.colorStops.forEach((stop) => {\n        gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n      });\n    }\n    return gradient;\n  }\n  warn(\"FillStyle not recognised\", fillStyle);\n  return \"red\";\n}\n\nexport { getCanvasFillStyle };\n//# sourceMappingURL=getCanvasFillStyle.mjs.map\n","import { Color } from '../../color/Color.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\n\n\"use strict\";\nconst _DynamicBitmapFont = class _DynamicBitmapFont extends AbstractBitmapFont {\n  /**\n   * @param options - The options for the dynamic bitmap font.\n   */\n  constructor(options) {\n    super();\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    this.resolution = 1;\n    /** The pages of the font. */\n    this.pages = [];\n    this._padding = 0;\n    this._measureCache = /* @__PURE__ */ Object.create(null);\n    this._currentChars = [];\n    this._currentX = 0;\n    this._currentY = 0;\n    this._currentMaxCharHeight = 0;\n    this._currentPageIndex = -1;\n    this._skipKerning = false;\n    const dynamicOptions = { ..._DynamicBitmapFont.defaultOptions, ...options };\n    this._textureSize = dynamicOptions.textureSize;\n    this._mipmap = dynamicOptions.mipmap;\n    const style = dynamicOptions.style.clone();\n    if (dynamicOptions.overrideFill) {\n      style._fill.color = 16777215;\n      style._fill.alpha = 1;\n      style._fill.texture = Texture.WHITE;\n      style._fill.fill = null;\n    }\n    this.applyFillAsTint = dynamicOptions.overrideFill;\n    const requestedFontSize = style.fontSize;\n    style.fontSize = this.baseMeasurementFontSize;\n    const font = fontStringFromTextStyle(style);\n    if (dynamicOptions.overrideSize) {\n      if (style._stroke) {\n        style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n      }\n    } else {\n      style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n    }\n    this._style = style;\n    this._skipKerning = dynamicOptions.skipKerning ?? false;\n    this.resolution = dynamicOptions.resolution ?? 1;\n    this._padding = dynamicOptions.padding ?? 4;\n    if (dynamicOptions.textureStyle) {\n      this._textureStyle = dynamicOptions.textureStyle instanceof TextureStyle ? dynamicOptions.textureStyle : new TextureStyle(dynamicOptions.textureStyle);\n    }\n    this.fontMetrics = CanvasTextMetrics.measureFont(font);\n    this.lineHeight = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n  }\n  ensureCharacters(chars) {\n    const charList = CanvasTextMetrics.graphemeSegmenter(chars).filter((char) => !this._currentChars.includes(char)).filter((char, index, self) => self.indexOf(char) === index);\n    if (!charList.length)\n      return;\n    this._currentChars = [...this._currentChars, ...charList];\n    let pageData;\n    if (this._currentPageIndex === -1) {\n      pageData = this._nextPage();\n    } else {\n      pageData = this.pages[this._currentPageIndex];\n    }\n    let { canvas, context } = pageData.canvasAndContext;\n    let textureSource = pageData.texture.source;\n    const style = this._style;\n    let currentX = this._currentX;\n    let currentY = this._currentY;\n    let currentMaxCharHeight = this._currentMaxCharHeight;\n    const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n    const padding = this._padding * fontScale;\n    let skipTexture = false;\n    const maxTextureWidth = canvas.width / this.resolution;\n    const maxTextureHeight = canvas.height / this.resolution;\n    for (let i = 0; i < charList.length; i++) {\n      const char = charList[i];\n      const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n      metrics.lineHeight = metrics.height;\n      const width = metrics.width * fontScale;\n      const textureGlyphWidth = Math.ceil((style.fontStyle === \"italic\" ? 2 : 1) * width);\n      const height = metrics.height * fontScale;\n      const paddedWidth = textureGlyphWidth + padding * 2;\n      const paddedHeight = height + padding * 2;\n      skipTexture = false;\n      if (char !== \"\\n\" && char !== \"\\r\" && char !== \"\t\" && char !== \" \") {\n        skipTexture = true;\n        currentMaxCharHeight = Math.ceil(Math.max(paddedHeight, currentMaxCharHeight));\n      }\n      if (currentX + paddedWidth > maxTextureWidth) {\n        currentY += currentMaxCharHeight;\n        currentMaxCharHeight = paddedHeight;\n        currentX = 0;\n        if (currentY + currentMaxCharHeight > maxTextureHeight) {\n          textureSource.update();\n          const pageData2 = this._nextPage();\n          canvas = pageData2.canvasAndContext.canvas;\n          context = pageData2.canvasAndContext.context;\n          textureSource = pageData2.texture.source;\n          currentX = 0;\n          currentY = 0;\n          currentMaxCharHeight = 0;\n        }\n      }\n      const xAdvance = width / fontScale - (style.dropShadow?.distance ?? 0) - (style._stroke?.width ?? 0);\n      this.chars[char] = {\n        id: char.codePointAt(0),\n        xOffset: -this._padding,\n        yOffset: -this._padding,\n        xAdvance,\n        kerning: {}\n      };\n      if (skipTexture) {\n        this._drawGlyph(\n          context,\n          metrics,\n          currentX + padding,\n          currentY + padding,\n          fontScale,\n          style\n        );\n        const px = textureSource.width * fontScale;\n        const py = textureSource.height * fontScale;\n        const frame = new Rectangle(\n          currentX / px * textureSource.width,\n          currentY / py * textureSource.height,\n          paddedWidth / px * textureSource.width,\n          paddedHeight / py * textureSource.height\n        );\n        this.chars[char].texture = new Texture({\n          source: textureSource,\n          frame\n        });\n        currentX += Math.ceil(paddedWidth);\n      }\n    }\n    textureSource.update();\n    this._currentX = currentX;\n    this._currentY = currentY;\n    this._currentMaxCharHeight = currentMaxCharHeight;\n    this._skipKerning && this._applyKerning(charList, context);\n  }\n  /**\n   * @deprecated since 8.0.0\n   * The map of base page textures (i.e., sheets of glyphs).\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  _applyKerning(newChars, context) {\n    const measureCache = this._measureCache;\n    for (let i = 0; i < newChars.length; i++) {\n      const first = newChars[i];\n      for (let j = 0; j < this._currentChars.length; j++) {\n        const second = this._currentChars[j];\n        let c1 = measureCache[first];\n        if (!c1)\n          c1 = measureCache[first] = context.measureText(first).width;\n        let c2 = measureCache[second];\n        if (!c2)\n          c2 = measureCache[second] = context.measureText(second).width;\n        let total = context.measureText(first + second).width;\n        let amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[first].kerning[second] = amount;\n        }\n        total = context.measureText(first + second).width;\n        amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[second].kerning[first] = amount;\n        }\n      }\n    }\n  }\n  _nextPage() {\n    this._currentPageIndex++;\n    const textureResolution = this.resolution;\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n      this._textureSize,\n      this._textureSize,\n      textureResolution\n    );\n    this._setupContext(canvasAndContext.context, this._style, textureResolution);\n    const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n    const texture = new Texture({\n      source: new ImageSource({\n        resource: canvasAndContext.canvas,\n        resolution,\n        alphaMode: \"premultiply-alpha-on-upload\",\n        autoGenerateMipmaps: this._mipmap\n      })\n    });\n    if (this._textureStyle) {\n      texture.source.style = this._textureStyle;\n    }\n    const pageData = {\n      canvasAndContext,\n      texture\n    };\n    this.pages[this._currentPageIndex] = pageData;\n    return pageData;\n  }\n  // canvas style!\n  _setupContext(context, style, resolution) {\n    style.fontSize = this.baseRenderedFontSize;\n    context.scale(resolution, resolution);\n    context.font = fontStringFromTextStyle(style);\n    style.fontSize = this.baseMeasurementFontSize;\n    context.textBaseline = style.textBaseline;\n    const stroke = style._stroke;\n    const strokeThickness = stroke?.width ?? 0;\n    if (stroke) {\n      context.lineWidth = strokeThickness;\n      context.lineJoin = stroke.join;\n      context.miterLimit = stroke.miterLimit;\n      context.strokeStyle = getCanvasFillStyle(stroke, context);\n    }\n    if (style._fill) {\n      context.fillStyle = getCanvasFillStyle(style._fill, context);\n    }\n    if (style.dropShadow) {\n      const shadowOptions = style.dropShadow;\n      const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n      const dropShadowBlur = shadowOptions.blur * resolution;\n      const dropShadowDistance = shadowOptions.distance * resolution;\n      context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n      context.shadowBlur = dropShadowBlur;\n      context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n      context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n    } else {\n      context.shadowColor = \"black\";\n      context.shadowBlur = 0;\n      context.shadowOffsetX = 0;\n      context.shadowOffsetY = 0;\n    }\n  }\n  _drawGlyph(context, metrics, x, y, fontScale, style) {\n    const char = metrics.text;\n    const fontProperties = metrics.fontProperties;\n    const stroke = style._stroke;\n    const strokeThickness = (stroke?.width ?? 0) * fontScale;\n    const tx = x + strokeThickness / 2;\n    const ty = y - strokeThickness / 2;\n    const descent = fontProperties.descent * fontScale;\n    const lineHeight = metrics.lineHeight * fontScale;\n    let removeShadow = false;\n    if (style.stroke && strokeThickness) {\n      removeShadow = true;\n      context.strokeText(char, tx, ty + lineHeight - descent);\n    }\n    const { shadowBlur, shadowOffsetX, shadowOffsetY } = context;\n    if (style._fill) {\n      if (removeShadow) {\n        context.shadowBlur = 0;\n        context.shadowOffsetX = 0;\n        context.shadowOffsetY = 0;\n      }\n      context.fillText(char, tx, ty + lineHeight - descent);\n    }\n    if (removeShadow) {\n      context.shadowBlur = shadowBlur;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n    }\n  }\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { canvasAndContext, texture } = this.pages[i];\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n};\n_DynamicBitmapFont.defaultOptions = {\n  textureSize: 512,\n  style: new TextStyle(),\n  mipmap: true\n};\nlet DynamicBitmapFont = _DynamicBitmapFont;\n\nexport { DynamicBitmapFont };\n//# sourceMappingURL=DynamicBitmapFont.mjs.map\n","\"use strict\";\nfunction getBitmapTextLayout(chars, style, font, trimEnd) {\n  const layoutData = {\n    width: 0,\n    height: 0,\n    offsetY: 0,\n    scale: style.fontSize / font.baseMeasurementFontSize,\n    lines: [{\n      width: 0,\n      charPositions: [],\n      spaceWidth: 0,\n      spacesIndex: [],\n      chars: []\n    }]\n  };\n  layoutData.offsetY = font.baseLineOffset;\n  let currentLine = layoutData.lines[0];\n  let previousChar = null;\n  let firstWord = true;\n  const currentWord = {\n    spaceWord: false,\n    width: 0,\n    start: 0,\n    index: 0,\n    // use index to not modify the array as we use it a lot!\n    positions: [],\n    chars: []\n  };\n  const scale = font.baseMeasurementFontSize / style.fontSize;\n  const adjustedLetterSpacing = style.letterSpacing * scale;\n  const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n  const adjustedLineHeight = style.lineHeight ? style.lineHeight * scale : font.lineHeight;\n  const breakWords = style.wordWrap && style.breakWords;\n  const nextWord = (word) => {\n    const start = currentLine.width;\n    for (let j = 0; j < currentWord.index; j++) {\n      const position = word.positions[j];\n      currentLine.chars.push(word.chars[j]);\n      currentLine.charPositions.push(position + start);\n    }\n    currentLine.width += word.width;\n    firstWord = false;\n    currentWord.width = 0;\n    currentWord.index = 0;\n    currentWord.chars.length = 0;\n  };\n  const nextLine = () => {\n    let index = currentLine.chars.length - 1;\n    if (trimEnd) {\n      let lastChar = currentLine.chars[index];\n      while (lastChar === \" \") {\n        currentLine.width -= font.chars[lastChar].xAdvance;\n        lastChar = currentLine.chars[--index];\n      }\n    }\n    layoutData.width = Math.max(layoutData.width, currentLine.width);\n    currentLine = {\n      width: 0,\n      charPositions: [],\n      chars: [],\n      spaceWidth: 0,\n      spacesIndex: []\n    };\n    firstWord = true;\n    layoutData.lines.push(currentLine);\n    layoutData.height += adjustedLineHeight;\n  };\n  const checkIsOverflow = (lineWidth) => lineWidth - adjustedLetterSpacing > adjustedWordWrapWidth;\n  for (let i = 0; i < chars.length + 1; i++) {\n    let char;\n    const isEnd = i === chars.length;\n    if (!isEnd) {\n      char = chars[i];\n    }\n    const charData = font.chars[char] || font.chars[\" \"];\n    const isSpace = /(?:\\s)/.test(char);\n    const isWordBreak = isSpace || char === \"\\r\" || char === \"\\n\" || isEnd;\n    if (isWordBreak) {\n      const addWordToNextLine = !firstWord && style.wordWrap && checkIsOverflow(currentLine.width + currentWord.width);\n      if (addWordToNextLine) {\n        nextLine();\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      } else {\n        currentWord.start = currentLine.width;\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      }\n      if (char === \"\\r\" || char === \"\\n\") {\n        nextLine();\n      } else if (!isEnd) {\n        const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n        currentLine.width += spaceWidth;\n        currentLine.spaceWidth = spaceWidth;\n        currentLine.spacesIndex.push(currentLine.charPositions.length);\n        currentLine.chars.push(char);\n      }\n    } else {\n      const kerning = charData.kerning[previousChar] || 0;\n      const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n      const addWordToNextLine = breakWords && checkIsOverflow(currentLine.width + currentWord.width + nextCharWidth);\n      if (addWordToNextLine) {\n        nextWord(currentWord);\n        nextLine();\n      }\n      currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n      currentWord.chars.push(char);\n      currentWord.width += nextCharWidth;\n    }\n    previousChar = char;\n  }\n  nextLine();\n  if (style.align === \"center\") {\n    alignCenter(layoutData);\n  } else if (style.align === \"right\") {\n    alignRight(layoutData);\n  } else if (style.align === \"justify\") {\n    alignJustify(layoutData);\n  }\n  return layoutData;\n}\nfunction alignCenter(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width / 2 - line.width / 2;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignRight(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width - line.width;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignJustify(measurementData) {\n  const width = measurementData.width;\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    let indy = 0;\n    let spaceIndex = line.spacesIndex[indy++];\n    let offset = 0;\n    const totalSpaces = line.spacesIndex.length;\n    const newSpaceWidth = (width - line.width) / totalSpaces;\n    const spaceWidth = newSpaceWidth;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      if (j === spaceIndex) {\n        spaceIndex = line.spacesIndex[indy++];\n        offset += spaceWidth;\n      }\n      line.charPositions[j] += offset;\n    }\n  }\n}\n\nexport { getBitmapTextLayout };\n//# sourceMappingURL=getBitmapTextLayout.mjs.map\n","\"use strict\";\nfunction resolveCharacters(chars) {\n  if (chars === \"\") {\n    return [];\n  }\n  if (typeof chars === \"string\") {\n    chars = [chars];\n  }\n  const result = [];\n  for (let i = 0, j = chars.length; i < j; i++) {\n    const item = chars[i];\n    if (Array.isArray(item)) {\n      if (item.length !== 2) {\n        throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n      }\n      if (item[0].length === 0 || item[1].length === 0) {\n        throw new Error(\"[BitmapFont]: Invalid character delimiter.\");\n      }\n      const startCode = item[0].charCodeAt(0);\n      const endCode = item[1].charCodeAt(0);\n      if (endCode < startCode) {\n        throw new Error(\"[BitmapFont]: Invalid character range.\");\n      }\n      for (let i2 = startCode, j2 = endCode; i2 <= j2; i2++) {\n        result.push(String.fromCharCode(i2));\n      }\n    } else {\n      result.push(...Array.from(item));\n    }\n  }\n  if (result.length === 0) {\n    throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");\n  }\n  return result;\n}\n\nexport { resolveCharacters };\n//# sourceMappingURL=resolveCharacters.mjs.map\n","import { lru } from 'tiny-lru';\nimport { Cache } from '../../assets/cache/Cache.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { DynamicBitmapFont } from './DynamicBitmapFont.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nlet fontCount = 0;\nclass BitmapFontManagerClass {\n  constructor() {\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    this.ALPHA = [[\"a\", \"z\"], [\"A\", \"Z\"], \" \"];\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    this.NUMERIC = [[\"0\", \"9\"]];\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    this.ALPHANUMERIC = [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \" \"];\n    /**\n     * This character set consists of all the ASCII table.\n     * @type {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    this.ASCII = [[\" \", \"~\"]];\n    /** Default options for installing a new BitmapFont. */\n    this.defaultOptions = {\n      chars: this.ALPHANUMERIC,\n      resolution: 1,\n      padding: 4,\n      skipKerning: false,\n      textureStyle: null\n    };\n    /** Cache for measured text layouts to avoid recalculating them multiple times. */\n    this.measureCache = lru(1e3);\n  }\n  /**\n   * Get a font for the specified text and style.\n   * @param text - The text to get the font for\n   * @param style - The style to use\n   */\n  getFont(text, style) {\n    let fontFamilyKey = `${style.fontFamily}-bitmap`;\n    let overrideFill = true;\n    if (style._fill.fill && !style._stroke) {\n      fontFamilyKey += style._fill.fill.styleKey;\n      overrideFill = false;\n    } else if (style._stroke || style.dropShadow) {\n      fontFamilyKey = `${style.styleKey}-bitmap`;\n      overrideFill = false;\n    }\n    if (!Cache.has(fontFamilyKey)) {\n      const styleCopy = Object.create(style);\n      styleCopy.lineHeight = 0;\n      const fnt = new DynamicBitmapFont({\n        style: styleCopy,\n        overrideFill,\n        overrideSize: true,\n        ...this.defaultOptions\n      });\n      fontCount++;\n      if (fontCount > 50) {\n        warn(\"BitmapText\", `You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \\`BitmapFont.install({name:\"style1\", style})\\``);\n      }\n      fnt.once(\"destroy\", () => {\n        fontCount--;\n        Cache.remove(fontFamilyKey);\n      });\n      Cache.set(\n        fontFamilyKey,\n        fnt\n      );\n    }\n    const dynamicFont = Cache.get(fontFamilyKey);\n    dynamicFont.ensureCharacters?.(text);\n    return dynamicFont;\n  }\n  /**\n   * Get the layout of a text for the specified style.\n   * @param text - The text to get the layout for\n   * @param style - The style to use\n   * @param trimEnd - Whether to ignore whitespaces at the end of each line\n   */\n  getLayout(text, style, trimEnd = true) {\n    const bitmapFont = this.getFont(text, style);\n    const id = `${text}-${style.styleKey}-${trimEnd}`;\n    if (this.measureCache.has(id)) {\n      return this.measureCache.get(id);\n    }\n    const segments = CanvasTextMetrics.graphemeSegmenter(text);\n    const layoutData = getBitmapTextLayout(segments, style, bitmapFont, trimEnd);\n    this.measureCache.set(id, layoutData);\n    return layoutData;\n  }\n  /**\n   * Measure the text using the specified style.\n   * @param text - The text to measure\n   * @param style - The style to use\n   * @param trimEnd - Whether to ignore whitespaces at the end of each line\n   */\n  measureText(text, style, trimEnd = true) {\n    return this.getLayout(text, style, trimEnd);\n  }\n  // eslint-disable-next-line max-len\n  install(...args) {\n    let options = args[0];\n    if (typeof options === \"string\") {\n      options = {\n        name: options,\n        style: args[1],\n        chars: args[2]?.chars,\n        resolution: args[2]?.resolution,\n        padding: args[2]?.padding,\n        skipKerning: args[2]?.skipKerning\n      };\n      deprecation(v8_0_0, \"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})\");\n    }\n    const name = options?.name;\n    if (!name) {\n      throw new Error(\"[BitmapFontManager] Property `name` is required.\");\n    }\n    options = { ...this.defaultOptions, ...options };\n    const textStyle = options.style;\n    const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n    const overrideFill = options.dynamicFill ?? this._canUseTintForStyle(style);\n    const font = new DynamicBitmapFont({\n      style,\n      overrideFill,\n      skipKerning: options.skipKerning,\n      padding: options.padding,\n      resolution: options.resolution,\n      overrideSize: false,\n      textureStyle: options.textureStyle\n    });\n    const flatChars = resolveCharacters(options.chars);\n    font.ensureCharacters(flatChars.join(\"\"));\n    Cache.set(`${name}-bitmap`, font);\n    font.once(\"destroy\", () => Cache.remove(`${name}-bitmap`));\n    return font;\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  uninstall(name) {\n    const cacheKey = `${name}-bitmap`;\n    const font = Cache.get(cacheKey);\n    if (font) {\n      font.destroy();\n    }\n  }\n  /**\n   * Determines if a style can use tinting instead of baking colors into the bitmap.\n   * Tinting is more efficient as it allows reusing the same bitmap with different colors.\n   * @param style - The text style to evaluate\n   * @returns true if the style can use tinting, false if colors must be baked in\n   * @private\n   */\n  _canUseTintForStyle(style) {\n    return !style._stroke && (!style.dropShadow || style.dropShadow.color === 0) && !style._fill.fill && style._fill.color === 16777215;\n  }\n}\nconst BitmapFontManager = new BitmapFontManagerClass();\n\nexport { BitmapFontManager };\n//# sourceMappingURL=BitmapFontManager.mjs.map\n","import { groupD8 } from '../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapFont extends AbstractBitmapFont {\n  constructor(options, url) {\n    super();\n    const { textures, data } = options;\n    Object.keys(data.pages).forEach((key) => {\n      const pageData = data.pages[parseInt(key, 10)];\n      const texture = textures[pageData.id];\n      this.pages.push({ texture });\n    });\n    Object.keys(data.chars).forEach((key) => {\n      const charData = data.chars[key];\n      const {\n        frame: textureFrame,\n        source: textureSource,\n        rotate: textureRotate\n      } = textures[charData.page];\n      const frame = groupD8.transformRectCoords(\n        charData,\n        textureFrame,\n        textureRotate,\n        new Rectangle()\n      );\n      const texture = new Texture({\n        frame,\n        orig: new Rectangle(0, 0, charData.width, charData.height),\n        source: textureSource,\n        rotate: textureRotate\n      });\n      this.chars[key] = {\n        id: key.codePointAt(0),\n        xOffset: charData.xOffset,\n        yOffset: charData.yOffset,\n        xAdvance: charData.xAdvance,\n        kerning: charData.kerning ?? {},\n        texture\n      };\n    });\n    this.baseRenderedFontSize = data.fontSize;\n    this.baseMeasurementFontSize = data.fontSize;\n    this.fontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: data.fontSize\n    };\n    this.baseLineOffset = data.baseLineOffset;\n    this.lineHeight = data.lineHeight;\n    this.fontFamily = data.fontFamily;\n    this.distanceField = data.distanceField ?? {\n      type: \"none\",\n      range: 0\n    };\n    this.url = url;\n  }\n  /** Destroys the BitmapFont object. */\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { texture } = this.pages[i];\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n  /**\n   * Generates and installs a bitmap font with the specified options.\n   * The font will be cached and available for use in BitmapText objects.\n   * @param options - Setup options for font generation\n   * @returns Installed font instance\n   * @example\n   * ```ts\n   * // Install a basic font\n   * BitmapFont.install({\n   *     name: 'Title',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *         fontSize: 32,\n   *         fill: '#ffffff'\n   *     }\n   * });\n   *\n   * // Install with advanced options\n   * BitmapFont.install({\n   *     name: 'Custom',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *         fontSize: 24,\n   *         fill: '#00ff00',\n   *         stroke: { color: '#000000', width: 2 }\n   *     },\n   *     chars: [['a', 'z'], ['A', 'Z'], ['0', '9']],\n   *     resolution: 2,\n   *     padding: 4,\n   *     textureStyle: {\n   *         scaleMode: 'nearest'\n   *     }\n   * });\n   * ```\n   */\n  static install(options) {\n    BitmapFontManager.install(options);\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * This frees up memory and resources associated with the font.\n   * @param name - The name of the bitmap font to uninstall\n   * @example\n   * ```ts\n   * // Remove a font when it's no longer needed\n   * BitmapFont.uninstall('MyCustomFont');\n   *\n   * // Clear multiple fonts\n   * ['Title', 'Heading', 'Body'].forEach(BitmapFont.uninstall);\n   * ```\n   */\n  static uninstall(name) {\n    BitmapFontManager.uninstall(name);\n  }\n}\n\nexport { BitmapFont };\n//# sourceMappingURL=BitmapFont.mjs.map\n","\"use strict\";\nconst bitmapFontTextParser = {\n  test(data) {\n    return typeof data === \"string\" && data.startsWith(\"info face=\");\n  },\n  parse(txt) {\n    const items = txt.match(/^[a-z]+\\s+.+$/gm);\n    const rawData = {\n      info: [],\n      common: [],\n      page: [],\n      char: [],\n      chars: [],\n      kerning: [],\n      kernings: [],\n      distanceField: []\n    };\n    for (const i in items) {\n      const name = items[i].match(/^[a-z]+/gm)[0];\n      const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n      const itemData = {};\n      for (const i2 in attributeList) {\n        const split = attributeList[i2].split(\"=\");\n        const key = split[0];\n        const strValue = split[1].replace(/\"/gm, \"\");\n        const floatValue = parseFloat(strValue);\n        const value = isNaN(floatValue) ? strValue : floatValue;\n        itemData[key] = value;\n      }\n      rawData[name].push(itemData);\n    }\n    const font = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const [info] = rawData.info;\n    const [common] = rawData.common;\n    const [distanceField] = rawData.distanceField ?? [];\n    if (distanceField) {\n      font.distanceField = {\n        range: parseInt(distanceField.distanceRange, 10),\n        type: distanceField.fieldType\n      };\n    }\n    font.fontSize = parseInt(info.size, 10);\n    font.fontFamily = info.face;\n    font.lineHeight = parseInt(common.lineHeight, 10);\n    const page = rawData.page;\n    for (let i = 0; i < page.length; i++) {\n      font.pages.push({\n        id: parseInt(page[i].id, 10) || 0,\n        file: page[i].file\n      });\n    }\n    const map = {};\n    font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n    const char = rawData.char;\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.id, 10);\n      let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      font.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.page, 10) || 0,\n        x: parseInt(charNode.x, 10),\n        y: parseInt(charNode.y, 10),\n        width: parseInt(charNode.width, 10),\n        height: parseInt(charNode.height, 10),\n        xOffset: parseInt(charNode.xoffset, 10),\n        yOffset: parseInt(charNode.yoffset, 10),\n        xAdvance: parseInt(charNode.xadvance, 10),\n        kerning: {}\n      };\n    }\n    const kerning = rawData.kerning || [];\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].first, 10);\n      const second = parseInt(kerning[i].second, 10);\n      const amount = parseInt(kerning[i].amount, 10);\n      font.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return font;\n  }\n};\n\nexport { bitmapFontTextParser };\n//# sourceMappingURL=bitmapFontTextParser.mjs.map\n","\"use strict\";\nconst bitmapFontXMLParser = {\n  test(data) {\n    const xml = data;\n    return typeof xml !== \"string\" && \"getElementsByTagName\" in xml && xml.getElementsByTagName(\"page\").length && xml.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n  },\n  parse(xml) {\n    const data = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const info = xml.getElementsByTagName(\"info\")[0];\n    const common = xml.getElementsByTagName(\"common\")[0];\n    const distanceField = xml.getElementsByTagName(\"distanceField\")[0];\n    if (distanceField) {\n      data.distanceField = {\n        type: distanceField.getAttribute(\"fieldType\"),\n        range: parseInt(distanceField.getAttribute(\"distanceRange\"), 10)\n      };\n    }\n    const page = xml.getElementsByTagName(\"page\");\n    const char = xml.getElementsByTagName(\"char\");\n    const kerning = xml.getElementsByTagName(\"kerning\");\n    data.fontSize = parseInt(info.getAttribute(\"size\"), 10);\n    data.fontFamily = info.getAttribute(\"face\");\n    data.lineHeight = parseInt(common.getAttribute(\"lineHeight\"), 10);\n    for (let i = 0; i < page.length; i++) {\n      data.pages.push({\n        id: parseInt(page[i].getAttribute(\"id\"), 10) || 0,\n        file: page[i].getAttribute(\"file\")\n      });\n    }\n    const map = {};\n    data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute(\"base\"), 10);\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.getAttribute(\"id\"), 10);\n      let letter = charNode.getAttribute(\"letter\") ?? charNode.getAttribute(\"char\") ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      data.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.getAttribute(\"page\"), 10) || 0,\n        x: parseInt(charNode.getAttribute(\"x\"), 10),\n        y: parseInt(charNode.getAttribute(\"y\"), 10),\n        width: parseInt(charNode.getAttribute(\"width\"), 10),\n        height: parseInt(charNode.getAttribute(\"height\"), 10),\n        // render deets..\n        xOffset: parseInt(charNode.getAttribute(\"xoffset\"), 10),\n        yOffset: parseInt(charNode.getAttribute(\"yoffset\"), 10),\n        // + baseLineOffset,\n        xAdvance: parseInt(charNode.getAttribute(\"xadvance\"), 10),\n        kerning: {}\n      };\n    }\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].getAttribute(\"first\"), 10);\n      const second = parseInt(kerning[i].getAttribute(\"second\"), 10);\n      const amount = parseInt(kerning[i].getAttribute(\"amount\"), 10);\n      data.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return data;\n  }\n};\n\nexport { bitmapFontXMLParser };\n//# sourceMappingURL=bitmapFontXMLParser.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser.mjs';\n\n\"use strict\";\nconst bitmapFontXMLStringParser = {\n  test(data) {\n    if (typeof data === \"string\" && data.includes(\"<font>\")) {\n      return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n    }\n    return false;\n  },\n  parse(data) {\n    return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n  }\n};\n\nexport { bitmapFontXMLStringParser };\n//# sourceMappingURL=bitmapFontXMLStringParser.mjs.map\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser.mjs';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams.mjs';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { BitmapFont } from '../BitmapFont.mjs';\nimport { bitmapFontTextParser } from './bitmapFontTextParser.mjs';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser.mjs';\n\n\"use strict\";\nconst validExtensions = [\".xml\", \".fnt\"];\nconst bitmapFontCachePlugin = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheBitmapFont\"\n  },\n  test: (asset) => asset instanceof BitmapFont,\n  getCacheableAssets(keys, asset) {\n    const out = {};\n    keys.forEach((key) => {\n      out[key] = asset;\n      out[`${key}-bitmap`] = asset;\n    });\n    out[`${asset.fontFamily}-bitmap`] = asset;\n    return out;\n  }\n};\nconst loadBitmapFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Normal\n  },\n  /** used for deprecation purposes */\n  name: \"loadBitmapFont\",\n  id: \"bitmap-font\",\n  test(url) {\n    return validExtensions.includes(path.extname(url).toLowerCase());\n  },\n  async testParse(data) {\n    return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n  },\n  async parse(asset, data, loader) {\n    const bitmapFontData = bitmapFontTextParser.test(asset) ? bitmapFontTextParser.parse(asset) : bitmapFontXMLStringParser.parse(asset);\n    const { src } = data;\n    const { pages } = bitmapFontData;\n    const textureUrls = [];\n    const textureOptions = bitmapFontData.distanceField ? {\n      scaleMode: \"linear\",\n      alphaMode: \"premultiply-alpha-on-upload\",\n      autoGenerateMipmaps: false,\n      resolution: 1\n    } : {};\n    for (let i = 0; i < pages.length; ++i) {\n      const pageFile = pages[i].file;\n      let imagePath = path.join(path.dirname(src), pageFile);\n      imagePath = copySearchParams(imagePath, src);\n      textureUrls.push({\n        src: imagePath,\n        data: textureOptions\n      });\n    }\n    const loadedTextures = await loader.load(textureUrls);\n    const textures = textureUrls.map((url) => loadedTextures[url.src]);\n    const bitmapFont = new BitmapFont({\n      data: bitmapFontData,\n      textures\n    }, src);\n    return bitmapFont;\n  },\n  async load(url, _options) {\n    const response = await DOMAdapter.get().fetch(url);\n    return await response.text();\n  },\n  async unload(bitmapFont, _resolvedAsset, loader) {\n    await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n    bitmapFont.destroy();\n  }\n};\n\nexport { bitmapFontCachePlugin, loadBitmapFont };\n//# sourceMappingURL=loadBitmapFont.mjs.map\n","\"use strict\";\nclass BackgroundLoader {\n  /**\n   * @param loader\n   * @param verbose - should the loader log to the console\n   */\n  constructor(loader, verbose = false) {\n    this._loader = loader;\n    this._assetList = [];\n    this._isLoading = false;\n    this._maxConcurrent = 1;\n    this.verbose = verbose;\n  }\n  /**\n   * Adds assets to the background loading queue. Assets are loaded one at a time to minimize\n   * performance impact.\n   * @param assetUrls - Array of resolved assets to load in the background\n   * @example\n   * ```ts\n   * // Add assets to background load queue\n   * backgroundLoader.add([\n   *     { src: 'images/level1/bg.png' },\n   *     { src: 'images/level1/characters.json' }\n   * ]);\n   *\n   * // Assets will load sequentially in the background\n   * // The loader automatically pauses when high-priority loads occur\n   * // e.g. Assets.load() is called\n   * ```\n   * @remarks\n   * - Assets are loaded one at a time to minimize performance impact\n   * - Loading automatically pauses when Assets.load() is called\n   * - No progress tracking is available for background loading\n   * - Assets are cached as they complete loading\n   * @internal\n   */\n  add(assetUrls) {\n    assetUrls.forEach((a) => {\n      this._assetList.push(a);\n    });\n    if (this.verbose) {\n      console.log(\"[BackgroundLoader] assets: \", this._assetList);\n    }\n    if (this._isActive && !this._isLoading) {\n      void this._next();\n    }\n  }\n  /**\n   * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n   *\n   * The max assets it will try to load at one time will be 4.\n   */\n  async _next() {\n    if (this._assetList.length && this._isActive) {\n      this._isLoading = true;\n      const toLoad = [];\n      const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n      for (let i = 0; i < toLoadAmount; i++) {\n        toLoad.push(this._assetList.pop());\n      }\n      await this._loader.load(toLoad);\n      this._isLoading = false;\n      void this._next();\n    }\n  }\n  /**\n   * Controls the active state of the background loader. When active, the loader will\n   * continue processing its queue. When inactive, loading is paused.\n   * @returns Whether the background loader is currently active\n   * @example\n   * ```ts\n   * // Pause background loading\n   * backgroundLoader.active = false;\n   *\n   * // Resume background loading\n   * backgroundLoader.active = true;\n   *\n   * // Check current state\n   * console.log(backgroundLoader.active); // true/false\n   *\n   * // Common use case: Pause during intensive operations\n   * backgroundLoader.active = false;  // Pause background loading\n   * ... // Perform high-priority tasks\n   * backgroundLoader.active = true;   // Resume background loading\n   * ```\n   * @remarks\n   * - Setting to true resumes loading immediately\n   * - Setting to false pauses after current asset completes\n   * - Background loading is automatically paused during `Assets.load()`\n   * - Assets already being loaded will complete even when set to false\n   */\n  get active() {\n    return this._isActive;\n  }\n  set active(value) {\n    if (this._isActive === value)\n      return;\n    this._isActive = value;\n    if (value && !this._isLoading) {\n      void this._next();\n    }\n  }\n}\n\nexport { BackgroundLoader };\n//# sourceMappingURL=BackgroundLoader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cacheTextureArray = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheTextureArray\"\n  },\n  test: (asset) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n  getCacheableAssets: (keys, asset) => {\n    const out = {};\n    keys.forEach((key) => {\n      asset.forEach((item, i) => {\n        out[key + (i === 0 ? \"\" : i + 1)] = item;\n      });\n    });\n    return out;\n  }\n};\n\nexport { cacheTextureArray };\n//# sourceMappingURL=cacheTextureArray.mjs.map\n","\"use strict\";\nasync function testImageFormat(imageData) {\n  if (\"Image\" in globalThis) {\n    return new Promise((resolve) => {\n      const image = new Image();\n      image.onload = () => {\n        resolve(true);\n      };\n      image.onerror = () => {\n        resolve(false);\n      };\n      image.src = imageData;\n    });\n  }\n  if (\"createImageBitmap\" in globalThis && \"fetch\" in globalThis) {\n    try {\n      const blob = await (await fetch(imageData)).blob();\n      await createImageBitmap(blob);\n    } catch (_e) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { testImageFormat };\n//# sourceMappingURL=testImageFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectAvif = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 1\n  },\n  test: async () => testImageFormat(\n    // eslint-disable-next-line max-len\n    \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=\"\n  ),\n  add: async (formats) => [...formats, \"avif\"],\n  remove: async (formats) => formats.filter((f) => f !== \"avif\")\n};\n\nexport { detectAvif };\n//# sourceMappingURL=detectAvif.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst imageFormats = [\"png\", \"jpg\", \"jpeg\"];\nconst detectDefaults = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: -1\n  },\n  test: () => Promise.resolve(true),\n  add: async (formats) => [...formats, ...imageFormats],\n  remove: async (formats) => formats.filter((f) => !imageFormats.includes(f))\n};\n\nexport { detectDefaults };\n//# sourceMappingURL=detectDefaults.mjs.map\n","\"use strict\";\nconst inWorker = \"WorkerGlobalScope\" in globalThis && globalThis instanceof globalThis.WorkerGlobalScope;\nfunction testVideoFormat(mimeType) {\n  if (inWorker) {\n    return false;\n  }\n  const video = document.createElement(\"video\");\n  return video.canPlayType(mimeType) !== \"\";\n}\n\nexport { testVideoFormat };\n//# sourceMappingURL=testVideoFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectMp4 = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/mp4\"),\n  add: async (formats) => [...formats, \"mp4\", \"m4v\"],\n  remove: async (formats) => formats.filter((f) => f !== \"mp4\" && f !== \"m4v\")\n};\n\nexport { detectMp4 };\n//# sourceMappingURL=detectMp4.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectOgv = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/ogg\"),\n  add: async (formats) => [...formats, \"ogv\"],\n  remove: async (formats) => formats.filter((f) => f !== \"ogv\")\n};\n\nexport { detectOgv };\n//# sourceMappingURL=detectOgv.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectWebm = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/webm\"),\n  add: async (formats) => [...formats, \"webm\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webm\")\n};\n\nexport { detectWebm };\n//# sourceMappingURL=detectWebm.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectWebp = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testImageFormat(\n    \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\"\n  ),\n  add: async (formats) => [...formats, \"webp\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webp\")\n};\n\nexport { detectWebp };\n//# sourceMappingURL=detectWebp.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Loader {\n  constructor() {\n    this._parsers = [];\n    this._parsersValidated = false;\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    this.parsers = new Proxy(this._parsers, {\n      set: (target, key, value) => {\n        this._parsersValidated = false;\n        target[key] = value;\n        return true;\n      }\n    });\n    /** Cache loading promises that ae currently active */\n    this.promiseCache = {};\n  }\n  /** function used for testing */\n  reset() {\n    this._parsersValidated = false;\n    this.promiseCache = {};\n  }\n  /**\n   * Used internally to generate a promise for the asset to be loaded.\n   * @param url - The URL to be loaded\n   * @param data - any custom additional information relevant to the asset being loaded\n   * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n   */\n  _getLoadPromiseAndParser(url, data) {\n    const result = {\n      promise: null,\n      parser: null\n    };\n    result.promise = (async () => {\n      let asset = null;\n      let parser = null;\n      if (data.parser || data.loadParser) {\n        parser = this._parserHash[data.parser || data.loadParser];\n        if (data.loadParser) {\n          warn(\n            `[Assets] \"loadParser\" is deprecated, use \"parser\" instead for ${url}`\n          );\n        }\n        if (!parser) {\n          warn(\n            `[Assets] specified load parser \"${data.parser || data.loadParser}\" not found while loading ${url}`\n          );\n        }\n      }\n      if (!parser) {\n        for (let i = 0; i < this.parsers.length; i++) {\n          const parserX = this.parsers[i];\n          if (parserX.load && parserX.test?.(url, data, this)) {\n            parser = parserX;\n            break;\n          }\n        }\n        if (!parser) {\n          warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n          return null;\n        }\n      }\n      asset = await parser.load(url, data, this);\n      result.parser = parser;\n      for (let i = 0; i < this.parsers.length; i++) {\n        const parser2 = this.parsers[i];\n        if (parser2.parse) {\n          if (parser2.parse && await parser2.testParse?.(asset, data, this)) {\n            asset = await parser2.parse(asset, data, this) || asset;\n            result.parser = parser2;\n          }\n        }\n      }\n      return asset;\n    })();\n    return result;\n  }\n  async load(assetsToLoadIn, onProgress) {\n    if (!this._parsersValidated) {\n      this._validateParsers();\n    }\n    let count = 0;\n    const assets = {};\n    const singleAsset = isSingleItem(assetsToLoadIn);\n    const assetsToLoad = convertToList(assetsToLoadIn, (item) => ({\n      alias: [item],\n      src: item,\n      data: {}\n    }));\n    const total = assetsToLoad.length;\n    const promises = assetsToLoad.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      if (!assets[asset.src]) {\n        try {\n          if (!this.promiseCache[url]) {\n            this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n          }\n          assets[asset.src] = await this.promiseCache[url].promise;\n          if (onProgress)\n            onProgress(++count / total);\n        } catch (e) {\n          delete this.promiseCache[url];\n          delete assets[asset.src];\n          throw new Error(`[Loader.load] Failed to load ${url}.\n${e}`);\n        }\n      }\n    });\n    await Promise.all(promises);\n    return singleAsset ? assets[assetsToLoad[0].src] : assets;\n  }\n  /**\n   * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n   * The parser that created the asset, will be the one that unloads it.\n   * @example\n   * // Single asset:\n   * const asset = await Loader.load('cool.png');\n   *\n   * await Loader.unload('cool.png');\n   *\n   * console.log(asset.destroyed); // true\n   * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n   */\n  async unload(assetsToUnloadIn) {\n    const assetsToUnload = convertToList(assetsToUnloadIn, (item) => ({\n      alias: [item],\n      src: item\n    }));\n    const promises = assetsToUnload.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      const loadPromise = this.promiseCache[url];\n      if (loadPromise) {\n        const loadedAsset = await loadPromise.promise;\n        delete this.promiseCache[url];\n        await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n      }\n    });\n    await Promise.all(promises);\n  }\n  /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n  _validateParsers() {\n    this._parsersValidated = true;\n    this._parserHash = this._parsers.filter((parser) => parser.name || parser.id).reduce((hash, parser) => {\n      if (!parser.name && !parser.id) {\n        warn(`[Assets] parser should have an id`);\n      } else if (hash[parser.name] || hash[parser.id]) {\n        warn(`[Assets] parser id conflict \"${parser.id}\"`);\n      }\n      hash[parser.name] = parser;\n      if (parser.id)\n        hash[parser.id] = parser;\n      return hash;\n    }, {});\n  }\n}\n\nexport { Loader };\n//# sourceMappingURL=Loader.mjs.map\n","\"use strict\";\nfunction checkDataUrl(url, mimes) {\n  if (Array.isArray(mimes)) {\n    for (const mime of mimes) {\n      if (url.startsWith(`data:${mime}`))\n        return true;\n    }\n    return false;\n  }\n  return url.startsWith(`data:${mimes}`);\n}\n\nexport { checkDataUrl };\n//# sourceMappingURL=checkDataUrl.mjs.map\n","import { path } from '../../utils/path.mjs';\n\n\"use strict\";\nfunction checkExtension(url, extension) {\n  const tempURL = url.split(\"?\")[0];\n  const ext = path.extname(tempURL).toLowerCase();\n  if (Array.isArray(extension)) {\n    return extension.includes(ext);\n  }\n  return ext === extension;\n}\n\nexport { checkExtension };\n//# sourceMappingURL=checkExtension.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validJSONExtension = \".json\";\nconst validJSONMIME = \"application/json\";\nconst loadJson = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  /** used for deprecation purposes */\n  name: \"loadJson\",\n  id: \"json\",\n  test(url) {\n    return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const json = await response.json();\n    return json;\n  }\n};\n\nexport { loadJson };\n//# sourceMappingURL=loadJson.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validTXTExtension = \".txt\";\nconst validTXTMIME = \"text/plain\";\nconst loadTxt = {\n  /** used for deprecation purposes */\n  name: \"loadTxt\",\n  id: \"text\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadTxt\"\n  },\n  test(url) {\n    return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const txt = await response.text();\n    return txt;\n  }\n};\n\nexport { loadTxt };\n//# sourceMappingURL=loadTxt.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { Cache } from '../../cache/Cache.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validWeights = [\n  \"normal\",\n  \"bold\",\n  \"100\",\n  \"200\",\n  \"300\",\n  \"400\",\n  \"500\",\n  \"600\",\n  \"700\",\n  \"800\",\n  \"900\"\n];\nconst validFontExtensions = [\".ttf\", \".otf\", \".woff\", \".woff2\"];\nconst validFontMIMEs = [\n  \"font/ttf\",\n  \"font/otf\",\n  \"font/woff\",\n  \"font/woff2\"\n];\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\nfunction getFontFamilyName(url) {\n  const ext = path.extname(url);\n  const name = path.basename(url, ext);\n  const nameWithSpaces = name.replace(/(-|_)/g, \" \");\n  const nameTokens = nameWithSpaces.toLowerCase().split(\" \").map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n  let valid = nameTokens.length > 0;\n  for (const token of nameTokens) {\n    if (!token.match(CSS_IDENT_TOKEN_REGEX)) {\n      valid = false;\n      break;\n    }\n  }\n  let fontFamilyName = nameTokens.join(\" \");\n  if (!valid) {\n    fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, \"\\\\$&\")}\"`;\n  }\n  return fontFamilyName;\n}\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\nfunction encodeURIWhenNeeded(uri) {\n  if (validURICharactersRegex.test(uri)) {\n    return uri;\n  }\n  return encodeURI(uri);\n}\nconst loadWebFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  /** used for deprecation purposes */\n  name: \"loadWebFont\",\n  id: \"web-font\",\n  test(url) {\n    return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n  },\n  async load(url, options) {\n    const fonts = DOMAdapter.get().getFontFaceSet();\n    if (fonts) {\n      const fontFaces = [];\n      const name = options.data?.family ?? getFontFamilyName(url);\n      const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? [\"normal\"];\n      const data = options.data ?? {};\n      for (let i = 0; i < weights.length; i++) {\n        const weight = weights[i];\n        const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n          ...data,\n          weight\n        });\n        await font.load();\n        fonts.add(font);\n        fontFaces.push(font);\n      }\n      if (Cache.has(`${name}-and-url`)) {\n        const cached = Cache.get(`${name}-and-url`);\n        cached.entries.push({ url, faces: fontFaces });\n      } else {\n        Cache.set(`${name}-and-url`, {\n          entries: [{ url, faces: fontFaces }]\n        });\n      }\n      return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n    }\n    warn(\"[loadWebFont] FontFace API is not supported. Skipping loading font\");\n    return null;\n  },\n  unload(font) {\n    const fonts = Array.isArray(font) ? font : [font];\n    const fontFamily = fonts[0].family;\n    const cached = Cache.get(`${fontFamily}-and-url`);\n    const entry = cached.entries.find((f) => f.faces.some((t) => fonts.indexOf(t) !== -1));\n    entry.faces = entry.faces.filter((f) => fonts.indexOf(f) === -1);\n    if (entry.faces.length === 0) {\n      cached.entries = cached.entries.filter((f) => f !== entry);\n    }\n    fonts.forEach((t) => {\n      DOMAdapter.get().getFontFaceSet().delete(t);\n    });\n    if (cached.entries.length === 0) {\n      Cache.remove(`${fontFamily}-and-url`);\n    }\n  }\n};\n\nexport { getFontFamilyName, loadWebFont };\n//# sourceMappingURL=loadWebFont.mjs.map\n","import { Resolver } from '../../assets/resolver/Resolver.mjs';\n\n\"use strict\";\nfunction getResolutionOfUrl(url, defaultValue = 1) {\n  const resolution = Resolver.RETINA_PREFIX?.exec(url);\n  if (resolution) {\n    return parseFloat(resolution[1]);\n  }\n  return defaultValue;\n}\n\nexport { getResolutionOfUrl };\n//# sourceMappingURL=getResolutionOfUrl.mjs.map\n","import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { Cache } from '../../../../cache/Cache.mjs';\n\n\"use strict\";\nfunction createTexture(source, loader, url) {\n  source.label = url;\n  source._sourceOrigin = url;\n  const texture = new Texture({\n    source,\n    label: url\n  });\n  const unload = () => {\n    delete loader.promiseCache[url];\n    if (Cache.has(url)) {\n      Cache.remove(url);\n    }\n  };\n  texture.source.once(\"destroy\", () => {\n    if (loader.promiseCache[url]) {\n      warn(\"[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.\");\n      unload();\n    }\n  });\n  texture.once(\"destroy\", () => {\n    if (!source.destroyed) {\n      warn(\"[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.\");\n      unload();\n    }\n  });\n  return texture;\n}\n\nexport { createTexture };\n//# sourceMappingURL=createTexture.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validSVGExtension = \".svg\";\nconst validSVGMIME = \"image/svg+xml\";\nconst loadSvg = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadSVG\"\n  },\n  /** used for deprecation purposes */\n  name: \"loadSVG\",\n  id: \"svg\",\n  config: {\n    crossOrigin: \"anonymous\",\n    parseAsGraphicsContext: false\n  },\n  test(url) {\n    return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n  },\n  async load(url, asset, loader) {\n    if (asset.data?.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext) {\n      return loadAsGraphics(url);\n    }\n    return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n  },\n  unload(asset) {\n    asset.destroy(true);\n  }\n};\nasync function loadAsTexture(url, asset, loader, crossOrigin) {\n  const response = await DOMAdapter.get().fetch(url);\n  const image = DOMAdapter.get().createImage();\n  image.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(await response.text())}`;\n  image.crossOrigin = crossOrigin;\n  await image.decode();\n  const width = asset.data?.width ?? image.width;\n  const height = asset.data?.height ?? image.height;\n  const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n  const canvasWidth = Math.ceil(width * resolution);\n  const canvasHeight = Math.ceil(height * resolution);\n  const canvas = DOMAdapter.get().createCanvas(canvasWidth, canvasHeight);\n  const context = canvas.getContext(\"2d\");\n  context.imageSmoothingEnabled = true;\n  context.imageSmoothingQuality = \"high\";\n  context.drawImage(image, 0, 0, width * resolution, height * resolution);\n  const { parseAsGraphicsContext: _p, ...rest } = asset.data ?? {};\n  const base = new ImageSource({\n    resource: canvas,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    resolution,\n    ...rest\n  });\n  return createTexture(base, loader, url);\n}\nasync function loadAsGraphics(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const svgSource = await response.text();\n  const context = new GraphicsContext();\n  context.svg(svgSource);\n  return context;\n}\n\nexport { loadSvg };\n//# sourceMappingURL=loadSVG.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\")\\n          return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (_e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url, alphaMode) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      return alphaMode === \\\"premultiplied-alpha\\\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \\\"none\\\" }) : createImageBitmap(imageBlob);\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n","import WorkerInstance from '../../../_virtual/checkImageBitmap.worker.mjs';\nimport WorkerInstance$1 from '../../../_virtual/loadImageBitmap.worker.mjs';\n\n\"use strict\";\nlet UUID = 0;\nlet MAX_WORKERS;\nclass WorkerManagerClass {\n  constructor() {\n    /** Whether the worker manager has been initialized */\n    this._initialized = false;\n    /** Current number of created workers (used to enforce MAX_WORKERS limit) */\n    this._createdWorkers = 0;\n    this._workerPool = [];\n    this._queue = [];\n    this._resolveHash = {};\n  }\n  /**\n   * Checks if ImageBitmap is supported in the current environment.\n   *\n   * This method uses a dedicated worker to test ImageBitmap support\n   * and caches the result for subsequent calls.\n   * @returns Promise that resolves to true if ImageBitmap is supported, false otherwise\n   */\n  isImageBitmapSupported() {\n    if (this._isImageBitmapSupported !== void 0)\n      return this._isImageBitmapSupported;\n    this._isImageBitmapSupported = new Promise((resolve) => {\n      const { worker } = new WorkerInstance();\n      worker.addEventListener(\"message\", (event) => {\n        worker.terminate();\n        WorkerInstance.revokeObjectURL();\n        resolve(event.data);\n      });\n    });\n    return this._isImageBitmapSupported;\n  }\n  /**\n   * Loads an image as an ImageBitmap using a web worker.\n   * @param src - The source URL or path of the image to load\n   * @param asset - Optional resolved asset containing additional texture source options\n   * @returns Promise that resolves to the loaded ImageBitmap\n   * @example\n   * ```typescript\n   * const bitmap = await WorkerManager.loadImageBitmap('image.png');\n   * const bitmapWithOptions = await WorkerManager.loadImageBitmap('image.png', asset);\n   * ```\n   */\n  loadImageBitmap(src, asset) {\n    return this._run(\"loadImageBitmap\", [src, asset?.data?.alphaMode]);\n  }\n  /**\n   * Initializes the worker pool if not already initialized.\n   * Currently a no-op but reserved for future initialization logic.\n   */\n  async _initWorkers() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n  }\n  /**\n   * Gets an available worker from the pool or creates a new one if needed.\n   *\n   * Workers are created up to the MAX_WORKERS limit (based on navigator.hardwareConcurrency).\n   * Each worker is configured with a message handler for processing results.\n   * @returns Available worker or undefined if pool is at capacity and no workers are free\n   */\n  _getWorker() {\n    if (MAX_WORKERS === void 0) {\n      MAX_WORKERS = navigator.hardwareConcurrency || 4;\n    }\n    let worker = this._workerPool.pop();\n    if (!worker && this._createdWorkers < MAX_WORKERS) {\n      this._createdWorkers++;\n      worker = new WorkerInstance$1().worker;\n      worker.addEventListener(\"message\", (event) => {\n        this._complete(event.data);\n        this._returnWorker(event.target);\n        this._next();\n      });\n    }\n    return worker;\n  }\n  /**\n   * Returns a worker to the pool after completing a task.\n   * @param worker - The worker to return to the pool\n   */\n  _returnWorker(worker) {\n    this._workerPool.push(worker);\n  }\n  /**\n   * Handles completion of a worker task by resolving or rejecting the corresponding promise.\n   * @param data - Result data from the worker containing uuid, data, and optional error\n   */\n  _complete(data) {\n    if (data.error !== void 0) {\n      this._resolveHash[data.uuid].reject(data.error);\n    } else {\n      this._resolveHash[data.uuid].resolve(data.data);\n    }\n    this._resolveHash[data.uuid] = null;\n  }\n  /**\n   * Executes a task using the worker pool system.\n   *\n   * Queues the task and processes it when a worker becomes available.\n   * @param id - Identifier for the type of task to run\n   * @param args - Arguments to pass to the worker\n   * @returns Promise that resolves with the worker's result\n   */\n  async _run(id, args) {\n    await this._initWorkers();\n    const promise = new Promise((resolve, reject) => {\n      this._queue.push({ id, arguments: args, resolve, reject });\n    });\n    this._next();\n    return promise;\n  }\n  /**\n   * Processes the next item in the queue if workers are available.\n   *\n   * This method is called after worker initialization and when workers\n   * complete tasks to continue processing the queue.\n   */\n  _next() {\n    if (!this._queue.length)\n      return;\n    const worker = this._getWorker();\n    if (!worker) {\n      return;\n    }\n    const toDo = this._queue.pop();\n    const id = toDo.id;\n    this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n    worker.postMessage({\n      data: toDo.arguments,\n      uuid: UUID++,\n      id\n    });\n  }\n  /**\n   * Resets the worker manager, terminating all workers and clearing the queue.\n   *\n   * This method:\n   * - Terminates all active workers\n   * - Rejects all pending promises with an error\n   * - Clears all internal state\n   * - Resets initialization flags\n   *\n   * This should be called when the worker manager is no longer needed\n   * to prevent memory leaks and ensure proper cleanup.\n   * @example\n   * ```typescript\n   * // Clean up when shutting down\n   * WorkerManager.reset();\n   * ```\n   */\n  reset() {\n    this._workerPool.forEach((worker) => worker.terminate());\n    this._workerPool.length = 0;\n    Object.values(this._resolveHash).forEach(({ reject }) => {\n      reject?.(new Error(\"WorkerManager destroyed\"));\n    });\n    this._resolveHash = {};\n    this._queue.length = 0;\n    this._initialized = false;\n    this._createdWorkers = 0;\n  }\n}\nconst WorkerManager = new WorkerManagerClass();\n\nexport { WorkerManager };\n//# sourceMappingURL=WorkerManager.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { WorkerManager } from '../../workers/WorkerManager.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validImageExtensions = [\".jpeg\", \".jpg\", \".png\", \".webp\", \".avif\"];\nconst validImageMIMEs = [\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/webp\",\n  \"image/avif\"\n];\nasync function loadImageBitmap(url, asset) {\n  const response = await DOMAdapter.get().fetch(url);\n  if (!response.ok) {\n    throw new Error(`[loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n  }\n  const imageBlob = await response.blob();\n  return asset?.data?.alphaMode === \"premultiplied-alpha\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \"none\" }) : createImageBitmap(imageBlob);\n}\nconst loadTextures = {\n  /** used for deprecation purposes */\n  name: \"loadTextures\",\n  id: \"texture\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.High,\n    name: \"loadTextures\"\n  },\n  config: {\n    preferWorkers: true,\n    preferCreateImageBitmap: true,\n    crossOrigin: \"anonymous\"\n  },\n  test(url) {\n    return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n  },\n  async load(url, asset, loader) {\n    let src = null;\n    if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap) {\n      if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported()) {\n        src = await WorkerManager.loadImageBitmap(url, asset);\n      } else {\n        src = await loadImageBitmap(url, asset);\n      }\n    } else {\n      src = await new Promise((resolve, reject) => {\n        src = DOMAdapter.get().createImage();\n        src.crossOrigin = this.config.crossOrigin;\n        src.src = url;\n        if (src.complete) {\n          resolve(src);\n        } else {\n          src.onload = () => {\n            resolve(src);\n          };\n          src.onerror = reject;\n        }\n      });\n    }\n    const base = new ImageSource({\n      resource: src,\n      alphaMode: \"premultiply-alpha-on-upload\",\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      ...asset.data\n    });\n    return createTexture(base, loader, url);\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { loadImageBitmap, loadTextures };\n//# sourceMappingURL=loadTextures.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource.mjs';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { testVideoFormat } from '../../../detections/utils/testVideoFormat.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst potentialVideoExtensions = [\".mp4\", \".m4v\", \".webm\", \".ogg\", \".ogv\", \".h264\", \".avi\", \".mov\"];\nlet validVideoExtensions;\nlet validVideoMIMEs;\nfunction crossOrigin(element, url, crossorigin) {\n  if (crossorigin === void 0 && !url.startsWith(\"data:\")) {\n    element.crossOrigin = determineCrossOrigin(url);\n  } else if (crossorigin !== false) {\n    element.crossOrigin = typeof crossorigin === \"string\" ? crossorigin : \"anonymous\";\n  }\n}\nfunction preloadVideo(element) {\n  return new Promise((resolve, reject) => {\n    element.addEventListener(\"canplaythrough\", loaded);\n    element.addEventListener(\"error\", error);\n    element.load();\n    function loaded() {\n      cleanup();\n      resolve();\n    }\n    function error(err) {\n      cleanup();\n      reject(err);\n    }\n    function cleanup() {\n      element.removeEventListener(\"canplaythrough\", loaded);\n      element.removeEventListener(\"error\", error);\n    }\n  });\n}\nfunction determineCrossOrigin(url, loc = globalThis.location) {\n  if (url.startsWith(\"data:\")) {\n    return \"\";\n  }\n  loc || (loc = globalThis.location);\n  const parsedUrl = new URL(url, document.baseURI);\n  if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol) {\n    return \"anonymous\";\n  }\n  return \"\";\n}\nfunction getBrowserSupportedVideoExtensions() {\n  const supportedExtensions = [];\n  const supportedMimes = [];\n  for (const ext of potentialVideoExtensions) {\n    const mimeType = VideoSource.MIME_TYPES[ext.substring(1)] || `video/${ext.substring(1)}`;\n    if (testVideoFormat(mimeType)) {\n      supportedExtensions.push(ext);\n      if (!supportedMimes.includes(mimeType)) {\n        supportedMimes.push(mimeType);\n      }\n    }\n  }\n  return {\n    validVideoExtensions: supportedExtensions,\n    validVideoMime: supportedMimes\n  };\n}\nconst loadVideoTextures = {\n  /** used for deprecation purposes */\n  name: \"loadVideo\",\n  id: \"video\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    name: \"loadVideo\"\n  },\n  test(url) {\n    if (!validVideoExtensions || !validVideoMIMEs) {\n      const { validVideoExtensions: ve, validVideoMime: vm } = getBrowserSupportedVideoExtensions();\n      validVideoExtensions = ve;\n      validVideoMIMEs = vm;\n    }\n    const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n    const isValidExtension = checkExtension(url, validVideoExtensions);\n    return isValidDataUrl || isValidExtension;\n  },\n  async load(url, asset, loader) {\n    const options = {\n      ...VideoSource.defaultOptions,\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n      ...asset.data\n    };\n    const videoElement = document.createElement(\"video\");\n    const attributeMap = {\n      preload: options.autoLoad !== false ? \"auto\" : void 0,\n      \"webkit-playsinline\": options.playsinline !== false ? \"\" : void 0,\n      playsinline: options.playsinline !== false ? \"\" : void 0,\n      muted: options.muted === true ? \"\" : void 0,\n      loop: options.loop === true ? \"\" : void 0,\n      autoplay: options.autoPlay !== false ? \"\" : void 0\n    };\n    Object.keys(attributeMap).forEach((key) => {\n      const value = attributeMap[key];\n      if (value !== void 0)\n        videoElement.setAttribute(key, value);\n    });\n    if (options.muted === true) {\n      videoElement.muted = true;\n    }\n    crossOrigin(videoElement, url, options.crossorigin);\n    const sourceElement = document.createElement(\"source\");\n    let mime;\n    if (options.mime) {\n      mime = options.mime;\n    } else if (url.startsWith(\"data:\")) {\n      mime = url.slice(5, url.indexOf(\";\"));\n    } else if (!url.startsWith(\"blob:\")) {\n      const ext = url.split(\"?\")[0].slice(url.lastIndexOf(\".\") + 1).toLowerCase();\n      mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n    }\n    sourceElement.src = url;\n    if (mime) {\n      sourceElement.type = mime;\n    }\n    return new Promise((resolve) => {\n      const onCanPlay = async () => {\n        const base = new VideoSource({ ...options, resource: videoElement });\n        videoElement.removeEventListener(\"canplay\", onCanPlay);\n        if (asset.data.preload) {\n          await preloadVideo(videoElement);\n        }\n        resolve(createTexture(base, loader, url));\n      };\n      if (options.preload && !options.autoPlay) {\n        videoElement.load();\n      }\n      videoElement.addEventListener(\"canplay\", onCanPlay);\n      videoElement.appendChild(sourceElement);\n    });\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo };\n//# sourceMappingURL=loadVideoTextures.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures.mjs';\nimport { Resolver } from '../Resolver.mjs';\n\n\"use strict\";\nconst resolveTextureUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    name: \"resolveTexture\"\n  },\n  test: loadTextures.test,\n  parse: (value) => ({\n    resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n    format: value.split(\".\").pop(),\n    src: value\n  })\n};\n\nexport { resolveTextureUrl };\n//# sourceMappingURL=resolveTextureUrl.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Resolver } from '../Resolver.mjs';\nimport { resolveTextureUrl } from './resolveTextureUrl.mjs';\n\n\"use strict\";\nconst resolveJsonUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    priority: -2,\n    name: \"resolveJson\"\n  },\n  test: (value) => Resolver.RETINA_PREFIX.test(value) && value.endsWith(\".json\"),\n  parse: resolveTextureUrl.parse\n};\n\nexport { resolveJsonUrl };\n//# sourceMappingURL=resolveJsonUrl.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { loadBitmapFont, bitmapFontCachePlugin } from '../scene/text-bitmap/asset/loadBitmapFont.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\nimport { BackgroundLoader } from './BackgroundLoader.mjs';\nimport { Cache } from './cache/Cache.mjs';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray.mjs';\nimport { detectAvif } from './detections/parsers/detectAvif.mjs';\nimport { detectDefaults } from './detections/parsers/detectDefaults.mjs';\nimport { detectMp4 } from './detections/parsers/detectMp4.mjs';\nimport { detectOgv } from './detections/parsers/detectOgv.mjs';\nimport { detectWebm } from './detections/parsers/detectWebm.mjs';\nimport { detectWebp } from './detections/parsers/detectWebp.mjs';\nimport { Loader } from './loader/Loader.mjs';\nimport { loadJson } from './loader/parsers/loadJson.mjs';\nimport { loadTxt } from './loader/parsers/loadTxt.mjs';\nimport { loadWebFont } from './loader/parsers/loadWebFont.mjs';\nimport { loadSvg } from './loader/parsers/textures/loadSVG.mjs';\nimport { loadTextures } from './loader/parsers/textures/loadTextures.mjs';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures.mjs';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl.mjs';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl.mjs';\nimport { Resolver } from './resolver/Resolver.mjs';\nimport { convertToList } from './utils/convertToList.mjs';\nimport { isSingleItem } from './utils/isSingleItem.mjs';\n\n\"use strict\";\nclass AssetsClass {\n  constructor() {\n    this._detections = [];\n    this._initialized = false;\n    this.resolver = new Resolver();\n    this.loader = new Loader();\n    this.cache = Cache;\n    this._backgroundLoader = new BackgroundLoader(this.loader);\n    this._backgroundLoader.active = true;\n    this.reset();\n  }\n  /**\n   * Initializes the Assets class with configuration options. While not required,\n   * calling this before loading assets is recommended to set up default behaviors.\n   * @param options - Configuration options for the Assets system\n   * @example\n   * ```ts\n   * // Basic initialization (optional as Assets.load will call this automatically)\n   * await Assets.init();\n   *\n   * // With CDN configuration\n   * await Assets.init({\n   *     basePath: 'https://my-cdn.com/assets/',\n   *     defaultSearchParams: { version: '1.0.0' }\n   * });\n   *\n   * // With manifest and preferences\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [{\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'hero',\n   *                     src: 'hero.{png,webp}',\n   *                     data: { scaleMode: SCALE_MODES.NEAREST }\n   *                 },\n   *                 {\n   *                     alias: 'map',\n   *                     src: 'map.json'\n   *                 }\n   *             ]\n   *         }]\n   *     },\n   *     // Optimize for device capabilities\n   *     texturePreference: {\n   *         resolution: window.devicePixelRatio,\n   *         format: ['webp', 'png']\n   *     },\n   *     // Set global preferences\n   *     preferences: {\n   *         crossOrigin: 'anonymous',\n   *     }\n   * });\n   *\n   * // Load assets after initialization\n   * const heroTexture = await Assets.load('hero');\n   * ```\n   * @remarks\n   * - Can be called only once; subsequent calls will be ignored with a warning\n   * - Format detection runs automatically unless `skipDetections` is true\n   * - The manifest can be a URL to a JSON file or an inline object\n   * @see {@link AssetInitOptions} For all available initialization options\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async init(options = {}) {\n    if (this._initialized) {\n      warn(\"[Assets]AssetManager already initialized, did you load before calling this Assets.init()?\");\n      return;\n    }\n    this._initialized = true;\n    if (options.defaultSearchParams) {\n      this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n    }\n    if (options.basePath) {\n      this.resolver.basePath = options.basePath;\n    }\n    if (options.bundleIdentifier) {\n      this.resolver.setBundleIdentifier(options.bundleIdentifier);\n    }\n    if (options.manifest) {\n      let manifest = options.manifest;\n      if (typeof manifest === \"string\") {\n        manifest = await this.load(manifest);\n      }\n      this.resolver.addManifest(manifest);\n    }\n    const resolutionPref = options.texturePreference?.resolution ?? 1;\n    const resolution = typeof resolutionPref === \"number\" ? [resolutionPref] : resolutionPref;\n    const formats = await this._detectFormats({\n      preferredFormats: options.texturePreference?.format,\n      skipDetections: options.skipDetections,\n      detections: this._detections\n    });\n    this.resolver.prefer({\n      params: {\n        format: formats,\n        resolution\n      }\n    });\n    if (options.preferences) {\n      this.setPreferences(options.preferences);\n    }\n  }\n  /**\n   * Registers assets with the Assets resolver. This method maps keys (aliases) to asset sources,\n   * allowing you to load assets using friendly names instead of direct URLs.\n   * @param assets - The unresolved assets to add to the resolver\n   * @example\n   * ```ts\n   * // Basic usage - single asset\n   * Assets.add({\n   *     alias: 'myTexture',\n   *     src: 'assets/texture.png'\n   * });\n   * const texture = await Assets.load('myTexture');\n   *\n   * // Multiple aliases for the same asset\n   * Assets.add({\n   *     alias: ['hero', 'player'],\n   *     src: 'hero.png'\n   * });\n   * const hero1 = await Assets.load('hero');\n   * const hero2 = await Assets.load('player'); // Same texture\n   *\n   * // Multiple format support\n   * Assets.add({\n   *     alias: 'character',\n   *     src: 'character.{webp,png}' // Will choose best format\n   * });\n   * Assets.add({\n   *     alias: 'character',\n   *     src: ['character.webp', 'character.png'], // Explicitly specify formats\n   * });\n   *\n   * // With texture options\n   * Assets.add({\n   *     alias: 'sprite',\n   *     src: 'sprite.png',\n   *     data: { scaleMode: 'nearest' }\n   * });\n   *\n   * // Multiple assets at once\n   * Assets.add([\n   *     { alias: 'bg', src: 'background.png' },\n   *     { alias: 'music', src: 'music.mp3' },\n   *     { alias: 'spritesheet', src: 'sheet.json', data: { ignoreMultiPack: false } }\n   * ]);\n   * ```\n   * @remarks\n   * - Assets are resolved when loaded, not when added\n   * - Multiple formats use the best available format for the browser\n   * - Adding with same alias overwrites previous definition\n   * - The `data` property is passed to the asset loader\n   * @see {@link Resolver} For details on asset resolution\n   * @see {@link LoaderParser} For asset-specific data options\n   * @advanced\n   */\n  add(assets) {\n    this.resolver.add(assets);\n  }\n  async load(urls, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const singleAsset = isSingleItem(urls);\n    const urlArray = convertToList(urls).map((url) => {\n      if (typeof url !== \"string\") {\n        const aliases = this.resolver.getAlias(url);\n        if (aliases.some((alias) => !this.resolver.hasKey(alias))) {\n          this.add(url);\n        }\n        return Array.isArray(aliases) ? aliases[0] : aliases;\n      }\n      if (!this.resolver.hasKey(url))\n        this.add({ alias: url, src: url });\n      return url;\n    });\n    const resolveResults = this.resolver.resolve(urlArray);\n    const out = await this._mapLoadToResolve(resolveResults, onProgress);\n    return singleAsset ? out[urlArray[0]] : out;\n  }\n  /**\n   * Registers a bundle of assets that can be loaded as a group. Bundles are useful for organizing\n   * assets into logical groups, such as game levels or UI screens.\n   * @param bundleId - Unique identifier for the bundle\n   * @param assets - Assets to include in the bundle\n   * @example\n   * ```ts\n   * // Add a bundle using array format\n   * Assets.addBundle('animals', [\n   *     { alias: 'bunny', src: 'bunny.png' },\n   *     { alias: 'chicken', src: 'chicken.png' },\n   *     { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   *\n   * // Add a bundle using object format\n   * Assets.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * // Add a bundle with advanced options\n   * Assets.addBundle('ui', [\n   *     {\n   *         alias: 'button',\n   *         src: 'button.{webp,png}',\n   *         data: { scaleMode: 'nearest' }\n   *     },\n   *     {\n   *         alias: ['logo', 'brand'],  // Multiple aliases\n   *         src: 'logo.svg',\n   *         data: { resolution: 2 }\n   *     }\n   * ]);\n   *\n   * // Load the bundle\n   * await Assets.loadBundle('animals');\n   *\n   * // Use the loaded assets\n   * const bunny = Sprite.from('bunny');\n   * const chicken = Sprite.from('chicken');\n   * ```\n   * @remarks\n   * - Bundle IDs must be unique\n   * - Assets in bundles are not loaded until `loadBundle` is called\n   * - Bundles can be background loaded using `backgroundLoadBundle`\n   * - Assets in bundles can be loaded individually using their aliases\n   * @see {@link Assets.loadBundle} For loading bundles\n   * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n   * @see {@link Assets.unloadBundle} For unloading bundles\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  addBundle(bundleId, assets) {\n    this.resolver.addBundle(bundleId, assets);\n  }\n  /**\n   * Loads a bundle or multiple bundles of assets. Bundles are collections of related assets\n   * that can be loaded together.\n   * @param bundleIds - Single bundle ID or array of bundle IDs to load\n   * @param onProgress - Optional callback for load progress (0.0 to 1.0)\n   * @returns Promise that resolves with the loaded bundle assets\n   * @example\n   * ```ts\n   * // Define bundles in your manifest\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}', // use an array of individual assets\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * // Initialize with manifest\n   * await Assets.init({ manifest });\n   *\n   * // Or add bundles programmatically\n   * Assets.addBundle('load-screen', [...]);\n   * Assets.loadBundle('load-screen');\n   *\n   * // Load a single bundle\n   * await Assets.loadBundle('load-screen');\n   * const bg = Sprite.from('background'); // Uses alias from bundle\n   *\n   * // Load multiple bundles\n   * await Assets.loadBundle([\n   *     'load-screen',\n   *     'game-screen'\n   * ]);\n   *\n   * // Load with progress tracking\n   * await Assets.loadBundle('game-screen', (progress) => {\n   *     console.log(`Loading: ${Math.round(progress * 100)}%`);\n   * });\n   * ```\n   * @remarks\n   * - Bundle assets are cached automatically\n   * - Bundles can be pre-loaded using `backgroundLoadBundle`\n   * - Assets in bundles can be accessed by their aliases\n   * - Progress callback receives values from 0.0 to 1.0\n   * @throws {Error} If the bundle ID doesn't exist in the manifest\n   * @see {@link Assets.addBundle} For adding bundles programmatically\n   * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n   * @see {@link Assets.unloadBundle} For unloading bundles\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async loadBundle(bundleIds, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    let singleAsset = false;\n    if (typeof bundleIds === \"string\") {\n      singleAsset = true;\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const out = {};\n    const keys = Object.keys(resolveResults);\n    let count = 0;\n    let total = 0;\n    const _onProgress = () => {\n      onProgress?.(++count / total);\n    };\n    const promises = keys.map((bundleId) => {\n      const resolveResult = resolveResults[bundleId];\n      const values = Object.values(resolveResult);\n      const totalAssetsToLoad = [...new Set(values.flat())];\n      total += totalAssetsToLoad.length;\n      return this._mapLoadToResolve(resolveResult, _onProgress).then((resolveResult2) => {\n        out[bundleId] = resolveResult2;\n      });\n    });\n    await Promise.all(promises);\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Initiates background loading of assets. This allows assets to be loaded passively while other operations\n   * continue, making them instantly available when needed later.\n   *\n   * Background loading is useful for:\n   * - Preloading game levels while in a menu\n   * - Loading non-critical assets during gameplay\n   * - Reducing visible loading screens\n   * @param urls - Single URL/alias or array of URLs/aliases to load in the background\n   * @example\n   * ```ts\n   * // Basic background loading\n   * Assets.backgroundLoad('images/level2-assets.png');\n   *\n   * // Background load multiple assets\n   * Assets.backgroundLoad([\n   *     'images/sprite1.png',\n   *     'images/sprite2.png',\n   *     'images/background.png'\n   * ]);\n   *\n   * // Later, when you need the assets\n   * const textures = await Assets.load([\n   *     'images/sprite1.png',\n   *     'images/sprite2.png'\n   * ]); // Resolves immediately if background loading completed\n   * ```\n   * @remarks\n   * - Background loading happens one asset at a time to avoid blocking the main thread\n   * - Loading can be interrupted safely by calling `Assets.load()`\n   * - Assets are cached as they complete loading\n   * - No progress tracking is available for background loading\n   */\n  async backgroundLoad(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof urls === \"string\") {\n      urls = [urls];\n    }\n    const resolveResults = this.resolver.resolve(urls);\n    this._backgroundLoader.add(Object.values(resolveResults));\n  }\n  /**\n   * Initiates background loading of asset bundles. Similar to backgroundLoad but works with\n   * predefined bundles of assets.\n   *\n   * Perfect for:\n   * - Preloading level bundles during gameplay\n   * - Loading UI assets during splash screens\n   * - Preparing assets for upcoming game states\n   * @param bundleIds - Single bundle ID or array of bundle IDs to load in the background\n   * @example\n   * ```ts\n   * // Define bundles in your manifest\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [\n   *             {\n   *               name: 'home',\n   *               assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'images/home-bg.png',\n   *                 },\n   *                 {\n   *                     alias: 'logo',\n   *                     src: 'images/logo.png',\n   *                 }\n   *              ]\n   *            },\n   *            {\n   *             name: 'level-1',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'images/level1/bg.png',\n   *                 },\n   *                 {\n   *                     alias: 'sprites',\n   *                     src: 'images/level1/sprites.json'\n   *                 }\n   *             ]\n   *         }]\n   *     }\n   * });\n   *\n   * // Load the home screen assets right away\n   * await Assets.loadBundle('home');\n   * showHomeScreen();\n   *\n   * // Start background loading while showing home screen\n   * Assets.backgroundLoadBundle('level-1');\n   *\n   * // When player starts level, load completes faster\n   * await Assets.loadBundle('level-1');\n   * hideHomeScreen();\n   * startLevel();\n   * ```\n   * @remarks\n   * - Bundle assets are loaded one at a time\n   * - Loading can be interrupted safely by calling `Assets.loadBundle()`\n   * - Assets are cached as they complete loading\n   * - Requires bundles to be registered via manifest or `addBundle`\n   * @see {@link Assets.addBundle} For adding bundles programmatically\n   * @see {@link Assets.loadBundle} For immediate bundle loading\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async backgroundLoadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof bundleIds === \"string\") {\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    Object.values(resolveResults).forEach((resolveResult) => {\n      this._backgroundLoader.add(Object.values(resolveResult));\n    });\n  }\n  /**\n   * Only intended for development purposes.\n   * This will wipe the resolver and caches.\n   * You will need to reinitialize the Asset\n   * @internal\n   */\n  reset() {\n    this.resolver.reset();\n    this.loader.reset();\n    this.cache.reset();\n    this._initialized = false;\n  }\n  get(keys) {\n    if (typeof keys === \"string\") {\n      return Cache.get(keys);\n    }\n    const assets = {};\n    for (let i = 0; i < keys.length; i++) {\n      assets[i] = Cache.get(keys[i]);\n    }\n    return assets;\n  }\n  /**\n   * helper function to map resolved assets back to loaded assets\n   * @param resolveResults - the resolve results from the resolver\n   * @param onProgress - the progress callback\n   */\n  async _mapLoadToResolve(resolveResults, onProgress) {\n    const resolveArray = [...new Set(Object.values(resolveResults))];\n    this._backgroundLoader.active = false;\n    const loadedAssets = await this.loader.load(resolveArray, onProgress);\n    this._backgroundLoader.active = true;\n    const out = {};\n    resolveArray.forEach((resolveResult) => {\n      const asset = loadedAssets[resolveResult.src];\n      const keys = [resolveResult.src];\n      if (resolveResult.alias) {\n        keys.push(...resolveResult.alias);\n      }\n      keys.forEach((key) => {\n        out[key] = asset;\n      });\n      Cache.set(keys, asset);\n    });\n    return out;\n  }\n  /**\n   * Unloads assets and releases them from memory. This method ensures proper cleanup of\n   * loaded assets when they're no longer needed.\n   * @param urls - Single URL/alias or array of URLs/aliases to unload\n   * @example\n   * ```ts\n   * // Unload a single asset\n   * await Assets.unload('images/sprite.png');\n   *\n   * // Unload using an alias\n   * await Assets.unload('hero'); // Unloads the asset registered with 'hero' alias\n   *\n   * // Unload multiple assets\n   * await Assets.unload([\n   *     'images/background.png',\n   *     'images/character.png',\n   *     'hero'\n   * ]);\n   *\n   * // Unload and handle creation of new instances\n   * await Assets.unload('hero');\n   * const newHero = await Assets.load('hero'); // Will load fresh from source\n   * ```\n   * @remarks\n   * > [!WARNING]\n   * > Make sure assets aren't being used before unloading:\n   * > - Remove sprites using the texture\n   * > - Clear any references to the asset\n   * > - Textures will be destroyed and can't be used after unloading\n   * @throws {Error} If the asset is not found in cache\n   */\n  async unload(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const urlArray = convertToList(urls).map((url) => typeof url !== \"string\" ? url.src : url);\n    const resolveResults = this.resolver.resolve(urlArray);\n    await this._unloadFromResolved(resolveResults);\n  }\n  /**\n   * Unloads all assets in a bundle. Use this to free memory when a bundle's assets\n   * are no longer needed, such as when switching game levels.\n   * @param bundleIds - Single bundle ID or array of bundle IDs to unload\n   * @example\n   * ```ts\n   * // Define and load a bundle\n   * Assets.addBundle('level-1', {\n   *     background: 'level1/bg.png',\n   *     sprites: 'level1/sprites.json',\n   *     music: 'level1/music.mp3'\n   * });\n   *\n   * // Load the bundle\n   * const level1 = await Assets.loadBundle('level-1');\n   *\n   * // Use the assets\n   * const background = Sprite.from(level1.background);\n   *\n   * // When done with the level, unload everything\n   * await Assets.unloadBundle('level-1');\n   * // background sprite is now invalid!\n   *\n   * // Unload multiple bundles\n   * await Assets.unloadBundle([\n   *     'level-1',\n   *     'level-2',\n   *     'ui-elements'\n   * ]);\n   * ```\n   * @remarks\n   * > [!WARNING]\n   * > - All assets in the bundle will be destroyed\n   * > - Bundle needs to be reloaded to use assets again\n   * > - Make sure no sprites or other objects are using the assets\n   * @throws {Error} If the bundle is not found\n   * @see {@link Assets.addBundle} For adding bundles\n   * @see {@link Assets.loadBundle} For loading bundles\n   */\n  async unloadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    bundleIds = convertToList(bundleIds);\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const promises = Object.keys(resolveResults).map((bundleId) => this._unloadFromResolved(resolveResults[bundleId]));\n    await Promise.all(promises);\n  }\n  async _unloadFromResolved(resolveResult) {\n    const resolveArray = Object.values(resolveResult);\n    resolveArray.forEach((resolveResult2) => {\n      Cache.remove(resolveResult2.src);\n    });\n    await this.loader.unload(resolveArray);\n  }\n  /**\n   * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n   * the users preferred formats order.\n   * @param options - the options to use when detecting formats\n   * @param options.preferredFormats - the preferred formats to use\n   * @param options.skipDetections - if we should skip the detections altogether\n   * @param options.detections - the detections to use\n   * @returns - the detected formats\n   */\n  async _detectFormats(options) {\n    let formats = [];\n    if (options.preferredFormats) {\n      formats = Array.isArray(options.preferredFormats) ? options.preferredFormats : [options.preferredFormats];\n    }\n    for (const detection of options.detections) {\n      if (options.skipDetections || await detection.test()) {\n        formats = await detection.add(formats);\n      } else if (!options.skipDetections) {\n        formats = await detection.remove(formats);\n      }\n    }\n    formats = formats.filter((format, index) => formats.indexOf(format) === index);\n    return formats;\n  }\n  /**\n   * All the detection parsers currently added to the Assets class.\n   * @advanced\n   */\n  get detections() {\n    return this._detections;\n  }\n  /**\n   * Sets global preferences for asset loading behavior. This method configures how assets\n   * are loaded and processed across all parsers.\n   * @param preferences - Asset loading preferences\n   * @example\n   * ```ts\n   * // Basic preferences\n   * Assets.setPreferences({\n   *     crossOrigin: 'anonymous',\n   *     parseAsGraphicsContext: false\n   * });\n   * ```\n   * @remarks\n   * Preferences are applied to all compatible parsers and affect future asset loading.\n   * Common preferences include:\n   * - `crossOrigin`: CORS setting for loaded assets\n   * - `preferWorkers`: Whether to use web workers for loading textures\n   * - `preferCreateImageBitmap`: Use `createImageBitmap` for texture creation. Turning this off will use the `Image` constructor instead.\n   * @see {@link AssetsPreferences} For all available preferences\n   */\n  setPreferences(preferences) {\n    this.loader.parsers.forEach((parser) => {\n      if (!parser.config)\n        return;\n      Object.keys(parser.config).filter((key) => key in preferences).forEach((key) => {\n        parser.config[key] = preferences[key];\n      });\n    });\n  }\n}\nconst Assets = new AssetsClass();\nextensions.handleByList(ExtensionType.LoadParser, Assets.loader.parsers).handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers).handleByList(ExtensionType.CacheParser, Assets.cache.parsers).handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n  cacheTextureArray,\n  detectDefaults,\n  detectAvif,\n  detectWebp,\n  detectMp4,\n  detectOgv,\n  detectWebm,\n  loadJson,\n  loadTxt,\n  loadWebFont,\n  loadSvg,\n  loadTextures,\n  loadVideoTextures,\n  loadBitmapFont,\n  bitmapFontCachePlugin,\n  resolveTextureUrl,\n  resolveJsonUrl\n);\nconst assetKeyMap = {\n  loader: ExtensionType.LoadParser,\n  resolver: ExtensionType.ResolveParser,\n  cache: ExtensionType.CacheParser,\n  detection: ExtensionType.DetectionParser\n};\nextensions.handle(ExtensionType.Asset, (extension) => {\n  const ref = extension.ref;\n  Object.entries(assetKeyMap).filter(([key]) => !!ref[key]).forEach(([key, type]) => extensions.add(Object.assign(\n    ref[key],\n    // Allow the function to optionally define it's own\n    // ExtensionMetadata, the use cases here is priority for LoaderParsers\n    { extension: ref[key].extension ?? type }\n  )));\n}, (extension) => {\n  const ref = extension.ref;\n  Object.keys(assetKeyMap).filter((key) => !!ref[key]).forEach((key) => extensions.remove(ref[key]));\n});\n\nexport { Assets, AssetsClass };\n//# sourceMappingURL=Assets.mjs.map\n","\"use strict\";\nconst GAUSSIAN_VALUES = {\n  5: [0.153388, 0.221461, 0.250301],\n  7: [0.071303, 0.131514, 0.189879, 0.214607],\n  9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],\n  11: [93e-4, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],\n  13: [2406e-6, 9255e-6, 0.027867, 0.065666, 0.121117, 0.174868, 0.197641],\n  15: [489e-6, 2403e-6, 9246e-6, 0.02784, 0.065602, 0.120999, 0.174697, 0.197448]\n};\n\nexport { GAUSSIAN_VALUES };\n//# sourceMappingURL=const.mjs.map\n","import { GAUSSIAN_VALUES } from '../const.mjs';\n\n\"use strict\";\nconst fragTemplate = [\n  \"in vec2 vBlurTexCoords[%size%];\",\n  \"uniform sampler2D uTexture;\",\n  \"out vec4 finalColor;\",\n  \"void main(void)\",\n  \"{\",\n  \"    finalColor = vec4(0.0);\",\n  \"    %blur%\",\n  \"}\"\n].join(\"\\n\");\nfunction generateBlurFragSource(kernelSize) {\n  const kernel = GAUSSIAN_VALUES[kernelSize];\n  const halfLength = kernel.length;\n  let fragSource = fragTemplate;\n  let blurLoop = \"\";\n  const template = \"finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;\";\n  let value;\n  for (let i = 0; i < kernelSize; i++) {\n    let blur = template.replace(\"%index%\", i.toString());\n    value = i;\n    if (i >= halfLength) {\n      value = kernelSize - i - 1;\n    }\n    blur = blur.replace(\"%value%\", kernel[value].toString());\n    blurLoop += blur;\n    blurLoop += \"\\n\";\n  }\n  fragSource = fragSource.replace(\"%blur%\", blurLoop);\n  fragSource = fragSource.replace(\"%size%\", kernelSize.toString());\n  return fragSource;\n}\n\nexport { generateBlurFragSource };\n//# sourceMappingURL=generateBlurFragSource.mjs.map\n","\"use strict\";\nconst vertTemplate = `\n    in vec2 aPosition;\n\n    uniform float uStrength;\n\n    out vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 uInputSize;\n    uniform vec4 uOutputFrame;\n    uniform vec4 uOutputTexture;\n\n    vec4 filterVertexPosition( void )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\n    vec2 filterTextureCoord( void )\n    {\n        return aPosition * (uOutputFrame.zw * uInputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        float pixelStrength = uInputSize.%dimension% * uStrength;\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }`;\nfunction generateBlurVertSource(kernelSize, x) {\n  const halfLength = Math.ceil(kernelSize / 2);\n  let vertSource = vertTemplate;\n  let blurLoop = \"\";\n  let template;\n  if (x) {\n    template = \"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);\";\n  } else {\n    template = \"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);\";\n  }\n  for (let i = 0; i < kernelSize; i++) {\n    let blur = template.replace(\"%index%\", i.toString());\n    blur = blur.replace(\"%sampleIndex%\", `${i - (halfLength - 1)}.0`);\n    blurLoop += blur;\n    blurLoop += \"\\n\";\n  }\n  vertSource = vertSource.replace(\"%blur%\", blurLoop);\n  vertSource = vertSource.replace(\"%size%\", kernelSize.toString());\n  vertSource = vertSource.replace(\"%dimension%\", x ? \"z\" : \"w\");\n  return vertSource;\n}\n\nexport { generateBlurVertSource };\n//# sourceMappingURL=generateBlurVertSource.mjs.map\n","import { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { generateBlurFragSource } from './generateBlurFragSource.mjs';\nimport { generateBlurVertSource } from './generateBlurVertSource.mjs';\n\n\"use strict\";\nfunction generateBlurGlProgram(horizontal, kernelSize) {\n  const vertex = generateBlurVertSource(kernelSize, horizontal);\n  const fragment = generateBlurFragSource(kernelSize);\n  return GlProgram.from({\n    vertex,\n    fragment,\n    name: `blur-${horizontal ? \"horizontal\" : \"vertical\"}-pass-filter`\n  });\n}\n\nexport { generateBlurGlProgram };\n//# sourceMappingURL=generateBlurGlProgram.mjs.map\n","var source = \"\\n\\nstruct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct BlurUniforms {\\n  uStrength:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;\\n\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    %blur-struct%\\n  };\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  \\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>, \\n) -> VSOutput {\\n\\n  let filteredCord = filterTextureCoord(aPosition);\\n\\n  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;\\n\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n    %blur-vertex-out%\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @builtin(position) position: vec4<f32>,\\n  %blur-fragment-in%\\n) -> @location(0) vec4<f32> {\\n\\n    var   finalColor = vec4(0.0);\\n\\n    %blur-sampling%\\n\\n    return finalColor;\\n}\";\n\nexport { source as default };\n//# sourceMappingURL=blur-template.wgsl.mjs.map\n","import { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { GAUSSIAN_VALUES } from '../const.mjs';\nimport source from './blur-template.wgsl.mjs';\n\n\"use strict\";\nfunction generateBlurProgram(horizontal, kernelSize) {\n  const kernel = GAUSSIAN_VALUES[kernelSize];\n  const halfLength = kernel.length;\n  const blurStructSource = [];\n  const blurOutSource = [];\n  const blurSamplingSource = [];\n  for (let i = 0; i < kernelSize; i++) {\n    blurStructSource[i] = `@location(${i}) offset${i}: vec2<f32>,`;\n    if (horizontal) {\n      blurOutSource[i] = `filteredCord + vec2(${i - halfLength + 1} * pixelStrength, 0.0),`;\n    } else {\n      blurOutSource[i] = `filteredCord + vec2(0.0, ${i - halfLength + 1} * pixelStrength),`;\n    }\n    const kernelIndex = i < halfLength ? i : kernelSize - i - 1;\n    const kernelValue = kernel[kernelIndex].toString();\n    blurSamplingSource[i] = `finalColor += textureSample(uTexture, uSampler, offset${i}) * ${kernelValue};`;\n  }\n  const blurStruct = blurStructSource.join(\"\\n\");\n  const blurOut = blurOutSource.join(\"\\n\");\n  const blurSampling = blurSamplingSource.join(\"\\n\");\n  const finalSource = source.replace(\"%blur-struct%\", blurStruct).replace(\"%blur-vertex-out%\", blurOut).replace(\"%blur-fragment-in%\", blurStruct).replace(\"%blur-sampling%\", blurSampling).replace(\"%dimension%\", horizontal ? \"z\" : \"w\");\n  return GpuProgram.from({\n    vertex: {\n      source: finalSource,\n      entryPoint: \"mainVertex\"\n    },\n    fragment: {\n      source: finalSource,\n      entryPoint: \"mainFragment\"\n    }\n  });\n}\n\nexport { generateBlurProgram };\n//# sourceMappingURL=generateBlurProgram.mjs.map\n","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../../rendering/renderers/types.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport { generateBlurGlProgram } from './gl/generateBlurGlProgram.mjs';\nimport { generateBlurProgram } from './gpu/generateBlurProgram.mjs';\n\n\"use strict\";\nconst _BlurFilterPass = class _BlurFilterPass extends Filter {\n  /**\n   * @param options\n   * @param options.horizontal - Do pass along the x-axis (`true`) or y-axis (`false`).\n   * @param options.strength - The strength of the blur filter.\n   * @param options.quality - The quality of the blur filter.\n   * @param options.kernelSize - The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15.\n   */\n  constructor(options) {\n    options = { ..._BlurFilterPass.defaultOptions, ...options };\n    const glProgram = generateBlurGlProgram(options.horizontal, options.kernelSize);\n    const gpuProgram = generateBlurProgram(options.horizontal, options.kernelSize);\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        blurUniforms: {\n          uStrength: { value: 0, type: \"f32\" }\n        }\n      },\n      ...options\n    });\n    this.horizontal = options.horizontal;\n    this._quality = 0;\n    this.quality = options.quality;\n    this.blur = options.strength;\n    this._uniforms = this.resources.blurUniforms.uniforms;\n  }\n  /**\n   * Applies the filter.\n   * @param filterManager - The manager.\n   * @param input - The input target.\n   * @param output - The output target.\n   * @param clearMode - How to clear\n   */\n  apply(filterManager, input, output, clearMode) {\n    this._uniforms.uStrength = this.strength / this.passes;\n    if (this.passes === 1) {\n      filterManager.applyFilter(this, input, output, clearMode);\n    } else {\n      const tempTexture = TexturePool.getSameSizeTexture(input);\n      let flip = input;\n      let flop = tempTexture;\n      this._state.blend = false;\n      const shouldClear = filterManager.renderer.type === RendererType.WEBGPU;\n      for (let i = 0; i < this.passes - 1; i++) {\n        filterManager.applyFilter(this, flip, flop, i === 0 ? true : shouldClear);\n        const temp = flop;\n        flop = flip;\n        flip = temp;\n      }\n      this._state.blend = true;\n      filterManager.applyFilter(this, flip, output, clearMode);\n      TexturePool.returnTexture(tempTexture);\n    }\n  }\n  /**\n   * Sets the strength of both the blur.\n   * @default 16\n   */\n  get blur() {\n    return this.strength;\n  }\n  set blur(value) {\n    this.padding = 1 + Math.abs(value) * 2;\n    this.strength = value;\n  }\n  /**\n   * Sets the quality of the blur by modifying the number of passes. More passes means higher\n   * quality blurring but the lower the performance.\n   * @default 4\n   */\n  get quality() {\n    return this._quality;\n  }\n  set quality(value) {\n    this._quality = value;\n    this.passes = value;\n  }\n};\n/** Default blur filter pass options */\n_BlurFilterPass.defaultOptions = {\n  /** The strength of the blur filter. */\n  strength: 8,\n  /** The quality of the blur filter. */\n  quality: 4,\n  /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n  kernelSize: 5\n};\nlet BlurFilterPass = _BlurFilterPass;\n\nexport { BlurFilterPass };\n//# sourceMappingURL=BlurFilterPass.mjs.map\n","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../../rendering/renderers/types.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport { BlurFilterPass } from './BlurFilterPass.mjs';\n\n\"use strict\";\nclass BlurFilter extends Filter {\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(v8_0_0, \"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }\");\n      options = { strength: options };\n      if (args[1] !== void 0)\n        options.quality = args[1];\n      if (args[2] !== void 0)\n        options.resolution = args[2] || \"inherit\";\n      if (args[3] !== void 0)\n        options.kernelSize = args[3];\n    }\n    options = { ...BlurFilterPass.defaultOptions, ...options };\n    const { strength, strengthX, strengthY, quality, ...rest } = options;\n    super({\n      ...rest,\n      compatibleRenderers: RendererType.BOTH,\n      resources: {}\n    });\n    this._repeatEdgePixels = false;\n    this.blurXFilter = new BlurFilterPass({ horizontal: true, ...options });\n    this.blurYFilter = new BlurFilterPass({ horizontal: false, ...options });\n    this.quality = quality;\n    this.strengthX = strengthX ?? strength;\n    this.strengthY = strengthY ?? strength;\n    this.repeatEdgePixels = false;\n  }\n  /**\n   * Applies the filter.\n   * @param filterManager - The manager.\n   * @param input - The input target.\n   * @param output - The output target.\n   * @param clearMode - How to clear\n   * @advanced\n   */\n  apply(filterManager, input, output, clearMode) {\n    const xStrength = Math.abs(this.blurXFilter.strength);\n    const yStrength = Math.abs(this.blurYFilter.strength);\n    if (xStrength && yStrength) {\n      const tempTexture = TexturePool.getSameSizeTexture(input);\n      this.blurXFilter.blendMode = \"normal\";\n      this.blurXFilter.apply(filterManager, input, tempTexture, true);\n      this.blurYFilter.blendMode = this.blendMode;\n      this.blurYFilter.apply(filterManager, tempTexture, output, clearMode);\n      TexturePool.returnTexture(tempTexture);\n    } else if (yStrength) {\n      this.blurYFilter.blendMode = this.blendMode;\n      this.blurYFilter.apply(filterManager, input, output, clearMode);\n    } else {\n      this.blurXFilter.blendMode = this.blendMode;\n      this.blurXFilter.apply(filterManager, input, output, clearMode);\n    }\n  }\n  updatePadding() {\n    if (this._repeatEdgePixels) {\n      this.padding = 0;\n    } else {\n      this.padding = Math.max(Math.abs(this.blurXFilter.blur), Math.abs(this.blurYFilter.blur)) * 2;\n    }\n  }\n  /**\n   * Sets the strength of both the blurX and blurY properties simultaneously.\n   * Controls the overall intensity of the Gaussian blur effect.\n   * @example\n   * ```ts\n   * // Set equal blur strength for both axes\n   * filter.strength = 8;\n   *\n   * // Will throw error if X and Y are different\n   * filter.strengthX = 4;\n   * filter.strengthY = 8;\n   * filter.strength; // Error: BlurFilter's strengthX and strengthY are different\n   * ```\n   * @default 8\n   * @throws {Error} If strengthX and strengthY are different values\n   */\n  get strength() {\n    if (this.strengthX !== this.strengthY) {\n      throw new Error(\"BlurFilter's strengthX and strengthY are different\");\n    }\n    return this.strengthX;\n  }\n  set strength(value) {\n    this.blurXFilter.blur = this.blurYFilter.blur = value;\n    this.updatePadding();\n  }\n  /**\n   * Sets the number of passes for blur. More passes means higher quality blurring.\n   * Controls the precision and smoothness of the blur effect at the cost of performance.\n   * @example\n   * ```ts\n   * // High quality blur (slower)\n   * filter.quality = 8;\n   *\n   * // Low quality blur (faster)\n   * filter.quality = 2;\n   * ```\n   * @default 4\n   * @remarks Higher values produce better quality but impact performance\n   */\n  get quality() {\n    return this.blurXFilter.quality;\n  }\n  set quality(value) {\n    this.blurXFilter.quality = this.blurYFilter.quality = value;\n  }\n  /**\n   * Sets the strength of horizontal blur.\n   * Controls the blur intensity along the x-axis independently.\n   * @example\n   * ```ts\n   * // Apply horizontal-only blur\n   * filter.strengthX = 8;\n   * filter.strengthY = 0;\n   *\n   * // Create motion blur effect\n   * filter.strengthX = 16;\n   * filter.strengthY = 2;\n   * ```\n   * @default 8\n   */\n  get strengthX() {\n    return this.blurXFilter.blur;\n  }\n  set strengthX(value) {\n    this.blurXFilter.blur = value;\n    this.updatePadding();\n  }\n  /**\n   * Sets the strength of the vertical blur.\n   * Controls the blur intensity along the y-axis independently.\n   * @example\n   * ```ts\n   * // Apply vertical-only blur\n   * filter.strengthX = 0;\n   * filter.strengthY = 8;\n   *\n   * // Create radial blur effect\n   * filter.strengthX = 8;\n   * filter.strengthY = 8;\n   * ```\n   * @default 8\n   */\n  get strengthY() {\n    return this.blurYFilter.blur;\n  }\n  set strengthY(value) {\n    this.blurYFilter.blur = value;\n    this.updatePadding();\n  }\n  /**\n   * Sets the strength of both the blurX and blurY properties simultaneously\n   * @default 2\n   * @deprecated since 8.3.0\n   * @see BlurFilter.strength\n   */\n  get blur() {\n    deprecation(\"8.3.0\", \"BlurFilter.blur is deprecated, please use BlurFilter.strength instead.\");\n    return this.strength;\n  }\n  set blur(value) {\n    deprecation(\"8.3.0\", \"BlurFilter.blur is deprecated, please use BlurFilter.strength instead.\");\n    this.strength = value;\n  }\n  /**\n   * Sets the strength of the blurX property\n   * @default 2\n   * @deprecated since 8.3.0\n   * @see BlurFilter.strengthX\n   */\n  get blurX() {\n    deprecation(\"8.3.0\", \"BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead.\");\n    return this.strengthX;\n  }\n  set blurX(value) {\n    deprecation(\"8.3.0\", \"BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead.\");\n    this.strengthX = value;\n  }\n  /**\n   * Sets the strength of the blurY property\n   * @default 2\n   * @deprecated since 8.3.0\n   * @see BlurFilter.strengthY\n   */\n  get blurY() {\n    deprecation(\"8.3.0\", \"BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead.\");\n    return this.strengthY;\n  }\n  set blurY(value) {\n    deprecation(\"8.3.0\", \"BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead.\");\n    this.strengthY = value;\n  }\n  /**\n   * If set to true the edge of the target will be clamped\n   * @default false\n   */\n  get repeatEdgePixels() {\n    return this._repeatEdgePixels;\n  }\n  set repeatEdgePixels(value) {\n    this._repeatEdgePixels = value;\n    this.updatePadding();\n  }\n}\n/**\n * Default blur filter options\n * @example\n * ```ts\n * // Set default options for all BlurFilters\n * BlurFilter.defaultOptions = {\n *     strength: 10,       // Default blur strength\n *     quality: 2,        // Default blur quality\n *     kernelSize: 7      // Default kernel size\n * };\n * // Create a filter with these defaults\n * const filter = new BlurFilter(); // Uses default options\n * ```\n * @remarks\n * - These options are used when creating a new BlurFilter without specific parameters\n * - Can be overridden by passing options to the constructor\n * - Useful for setting global defaults for all blur filters in your application\n * @see {@link BlurFilterOptions} For detailed options\n * @see {@link BlurFilter} The filter that uses these options\n */\nBlurFilter.defaultOptions = {\n  /** The strength of the blur filter. */\n  strength: 8,\n  /** The quality of the blur filter. */\n  quality: 4,\n  /** The kernelSize of the blur filter.Options: 5, 7, 9, 11, 13, 15. */\n  kernelSize: 5\n};\n\nexport { BlurFilter };\n//# sourceMappingURL=BlurFilter.mjs.map\n","\"use strict\";\nfunction pointInTriangle(px, py, x1, y1, x2, y2, x3, y3) {\n  const v2x = x3 - x1;\n  const v2y = y3 - y1;\n  const v1x = x2 - x1;\n  const v1y = y2 - y1;\n  const v0x = px - x1;\n  const v0y = py - y1;\n  const dot00 = v2x * v2x + v2y * v2y;\n  const dot01 = v2x * v1x + v2y * v1y;\n  const dot02 = v2x * v0x + v2y * v0y;\n  const dot11 = v1x * v1x + v1y * v1y;\n  const dot12 = v1x * v0x + v1y * v0y;\n  const invDenom = 1 / (dot00 * dot11 - dot01 * dot01);\n  const u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n  const v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n  return u >= 0 && v >= 0 && u + v < 1;\n}\n\nexport { pointInTriangle };\n//# sourceMappingURL=pointInTriangle.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../../view/ViewContainer.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends ViewContainer {\n  /**\n   * Creates a new Graphics object.\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"graphics\";\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.didViewUpdate = true;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The underlying graphics context used for drawing operations.\n   * Controls how shapes and paths are rendered.\n   * @example\n   * ```ts\n   * // Create a shared context\n   * const sharedContext = new GraphicsContext();\n   *\n   * // Create graphics objects sharing the same context\n   * const graphics1 = new Graphics();\n   * const graphics2 = new Graphics();\n   *\n   * // Assign shared context\n   * graphics1.context = sharedContext;\n   * graphics2.context = sharedContext;\n   *\n   * // Both graphics will show the same shapes\n   * sharedContext\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @see {@link GraphicsContext} For drawing operations\n   * @see {@link GraphicsOptions} For context configuration\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphics object.\n   * Returns the boundaries after all graphical operations but before any transforms.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Get bounds information\n   * const bounds = graphics.bounds;\n   * console.log(bounds.width);  // 100\n   * console.log(bounds.height); // 100\n   * ```\n   * @readonly\n   * @see {@link Bounds} For bounds operations\n   * @see {@link Container#getBounds} For transformed bounds\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Graphics objects do not need to update their bounds as the context handles this.\n   * @private\n   */\n  updateBounds() {\n  }\n  /**\n   * Checks if the object contains the given point.\n   * Returns true if the point lies within the Graphics object's rendered area.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Check point intersection\n   * if (graphics.containsPoint({ x: 50, y: 50 })) {\n   *     console.log('Point is inside rectangle!');\n   * }\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is inside the Graphics object\n   * @see {@link Graphics#bounds} For bounding box checks\n   * @see {@link PointData} For point data structure\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @example\n   * ```ts\n   * // Destroy the graphics and its context\n   * graphics.destroy();\n   * graphics.destroy(true);\n   * graphics.destroy({ context: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context.\n   * The fill style can be a color, gradient, pattern, or a complex style object.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics\n   *     .setFillStyle({ color: 0xff0000 }) // Red fill\n   *     .rect(0, 0, 100, 100)\n   *     .fill();\n   *\n   * // Gradient fill\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setFillStyle(gradient)\n   *     .circle(100, 100, 50)\n   *     .fill();\n   *\n   * // Pattern fill\n   * const pattern = new FillPattern(texture);\n   * graphics\n   *     .setFillStyle({\n   *         fill: pattern,\n   *         alpha: 0.5\n   *     })\n   *     .rect(0, 0, 200, 200)\n   *     .fill();\n   * ```\n   * @param {FillInput} args - The fill style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link FillStyle} For fill style options\n   * @see {@link FillGradient} For gradient fills\n   * @see {@link FillPattern} For pattern fills\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context.\n   * Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color stroke\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 2,\n   *         color: 0x000000\n   *     })\n   *     .rect(0, 0, 100, 100)\n   *     .stroke();\n   *\n   * // Complex stroke style\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 4,\n   *         color: 0xff0000,\n   *         alpha: 0.5,\n   *         join: 'round',\n   *         cap: 'round',\n   *         alignment: 0.5\n   *     })\n   *     .circle(100, 100, 50)\n   *     .stroke();\n   *\n   * // Gradient stroke\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 10,\n   *         fill: gradient\n   *     })\n   *     .poly([0,0, 100,50, 0,100])\n   *     .stroke();\n   * ```\n   * @param {StrokeInput} args - The stroke style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link FillPattern} For pattern strokes\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style or specified style.\n   * Outlines the shape using the stroke settings.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Stroke with direct color\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .stroke({\n   *         width: 2,\n   *         color: 0xff0000\n   *     }); // 2px red stroke\n   *\n   * // Fill with texture\n   * graphics\n   *    .rect(0, 0, 100, 100)\n   *    .stroke(myTexture); // Fill with texture\n   *\n   * // Stroke with gradient\n   * const gradient = new FillGradient({\n   *     end: { x: 1, y: 0 },\n   *     colorStops: [\n   *         { offset: 0, color: 0xff0000 },\n   *         { offset: 0.5, color: 0x00ff00 },\n   *         { offset: 1, color: 0x0000ff },\n   *     ],\n   * });\n   *\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .stroke({\n   *         width: 4,\n   *         fill: gradient,\n   *         alignment: 0.5,\n   *         join: 'round'\n   *     });\n   * ```\n   * @param {StrokeStyle} args - Optional stroke style to apply. Can be:\n   * - A stroke style object with width, color, etc.\n   * - A gradient\n   * - A pattern\n   * If omitted, uses current stroke style.\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link setStrokeStyle} For setting default stroke style\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   * graphics\n   *     .circle(150, 150, 50)\n   *     .fill({ color: 0x00ff00 })\n   *     .beginPath() // Starts a new path\n   *     .circle(250, 150, 50)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for chaining\n   * @see {@link Graphics#moveTo} For starting a new subpath\n   * @see {@link Graphics#closePath} For closing the current path\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path.\n   *\n   * If a hole is not completely in a shape, it will fail to cut correctly.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw outer circle\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *     .circle(100, 100, 25) // Inner circle\n   *     .cut() // Cuts out the inner circle from the outer circle\n   * ```\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start point.\n   *\n   * This is useful for completing shapes and ensuring they are properly closed for fills.\n   * @example\n   * ```ts\n   * // Create a triangle with closed path\n   * const graphics = new Graphics();\n   * graphics\n   *     .moveTo(50, 50)\n   *     .lineTo(100, 100)\n   *     .lineTo(0, 100)\n   *     .closePath()\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path\n   * @see {@link Graphics#fill} For filling closed paths\n   * @see {@link Graphics#stroke} For stroking paths\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /**\n   * Saves the current graphics state onto a stack. The state includes:\n   * - Current transformation matrix\n   * - Current fill style\n   * - Current stroke style\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Save state before complex operations\n   * graphics.save();\n   *\n   * // Create transformed and styled shape\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4)\n   *     .setFillStyle({\n   *         color: 0xff0000,\n   *         alpha: 0.5\n   *     })\n   *     .rect(-25, -25, 50, 50)\n   *     .fill();\n   *\n   * // Restore to original state\n   * graphics.restore();\n   *\n   * // Continue drawing with previous state\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .fill();\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#restore} For restoring the saved state\n   * @see {@link Graphics#setTransform} For setting transformations\n   */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * This matrix represents all accumulated transformations including translate, scale, and rotate.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply some transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4);\n   *\n   * // Get the current transform matrix\n   * const matrix = graphics.getTransform();\n   * console.log(matrix.tx, matrix.ty); // 100, 100\n   *\n   * // Use the matrix for other operations\n   * graphics\n   *     .setTransform(matrix)\n   *     .circle(0, 0, 50)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @returns The current transformation matrix.\n   * @see {@link Graphics#setTransform} For setting the transform matrix\n   * @see {@link Matrix} For matrix operations\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .scaleTransform(2, 2)\n   *     .circle(0, 0, 25)\n   *     .fill({ color: 0xff0000 });\n   * // Reset transform to default state\n   * graphics\n   *     .resetTransform()\n   *     .circle(50, 50, 25) // Will draw at actual coordinates\n   *     .fill({ color: 0x00ff00 });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#getTransform} For getting the current transform\n   * @see {@link Graphics#setTransform} For setting a specific transform\n   * @see {@link Graphics#save} For saving the current transform state\n   * @see {@link Graphics#restore} For restoring a previous transform state\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it.\n   * This includes clearing the current path, fill style, stroke style, and transformations.\n   *\n   * > [!NOTE] Graphics objects are not designed to be continuously cleared and redrawn.\n   * > Instead, they are intended to be used for static or semi-static graphics that\n   * > can be redrawn as needed. Frequent clearing and redrawing may lead to performance issues.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw some shapes\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 })\n   *     .rect(200, 100, 100, 50)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Clear all graphics\n   * graphics.clear();\n   *\n   * // Start fresh with new shapes\n   * graphics\n   *     .circle(150, 150, 30)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path without clearing styles\n   * @see {@link Graphics#save} For saving the current state\n   * @see {@link Graphics#restore} For restoring a previous state\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * Gets or sets the current fill style for the graphics context. The fill style determines\n   * how shapes are filled when using the fill() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics.fillStyle = {\n   *     color: 0xff0000,  // Red\n   *     alpha: 1\n   * };\n   *\n   * // Using gradients\n   * const gradient = new FillGradient({\n   *     end: { x: 0, y: 1 }, // Vertical gradient\n   *     stops: [\n   *         { offset: 0, color: 0xff0000, alpha: 1 }, // Start color\n   *         { offset: 1, color: 0x0000ff, alpha: 1 }  // End color\n   *     ]\n   * });\n   *\n   * graphics.fillStyle = {\n   *     fill: gradient,\n   *     alpha: 0.8\n   * };\n   *\n   * // Using patterns\n   * graphics.fillStyle = {\n   *     texture: myTexture,\n   *     alpha: 1,\n   *     matrix: new Matrix()\n   *         .scale(0.5, 0.5)\n   *         .rotate(Math.PI / 4)\n   * };\n   * ```\n   * @type {ConvertedFillStyle}\n   * @see {@link FillStyle} For all available fill style options\n   * @see {@link FillGradient} For creating gradient fills\n   * @see {@link Graphics#fill} For applying the fill to paths\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * Gets or sets the current stroke style for the graphics context. The stroke style determines\n   * how paths are outlined when using the stroke() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic stroke style\n   * graphics.strokeStyle = {\n   *     width: 2,\n   *     color: 0xff0000,\n   *     alpha: 1\n   * };\n   *\n   * // Using with gradients\n   * const gradient = new FillGradient({\n   *   end: { x: 0, y: 1 },\n   *   stops: [\n   *       { offset: 0, color: 0xff0000, alpha: 1 },\n   *       { offset: 1, color: 0x0000ff, alpha: 1 }\n   *   ]\n   * });\n   *\n   * graphics.strokeStyle = {\n   *     width: 4,\n   *     fill: gradient,\n   *     alignment: 0.5,\n   *     join: 'round',\n   *     cap: 'round'\n   * };\n   *\n   * // Complex stroke settings\n   * graphics.strokeStyle = {\n   *     width: 6,\n   *     color: 0x00ff00,\n   *     alpha: 0.5,\n   *     join: 'miter',\n   *     miterLimit: 10,\n   * };\n   * ```\n   * @see {@link StrokeStyle} For all available stroke style options\n   * @see {@link Graphics#stroke} For applying the stroke to paths\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object that copies the current graphics content.\n   * The clone can either share the same context (shallow clone) or have its own independent\n   * context (deep clone).\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Create original graphics content\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Create a shallow clone (shared context)\n   * const shallowClone = graphics.clone();\n   *\n   * // Changes to original affect the clone\n   * graphics\n   *     .circle(200, 100, 30)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Create a deep clone (independent context)\n   * const deepClone = graphics.clone(true);\n   *\n   * // Modify deep clone independently\n   * deepClone\n   *     .translateTransform(100, 100)\n   *     .circle(0, 0, 40)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @param deep - Whether to create a deep clone of the graphics object.\n   *              If false (default), the context will be shared between objects.\n   *              If true, creates an independent copy of the context.\n   * @returns A new Graphics instance with either shared or copied context\n   * @see {@link Graphics#context} For accessing the underlying graphics context\n   * @see {@link GraphicsContext} For understanding the shared context behavior\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    if (color !== void 0)\n      fillStyle.color = color;\n    if (alpha !== void 0)\n      fillStyle.alpha = alpha;\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _MeshGeometry = class _MeshGeometry extends Geometry {\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (options instanceof Float32Array) {\n      deprecation(v8_0_0, \"use new MeshGeometry({ positions, uvs, indices }) instead\");\n      options = {\n        positions: options,\n        uvs: args[1],\n        indices: args[2]\n      };\n    }\n    options = { ..._MeshGeometry.defaultOptions, ...options };\n    const positions = options.positions || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n    let uvs = options.uvs;\n    if (!uvs) {\n      if (options.positions) {\n        uvs = new Float32Array(positions.length);\n      } else {\n        uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n      }\n    }\n    const indices = options.indices || new Uint32Array([0, 1, 2, 0, 2, 3]);\n    const shrinkToFit = options.shrinkBuffersToFit;\n    const positionBuffer = new Buffer({\n      data: positions,\n      label: \"attribute-mesh-positions\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const uvBuffer = new Buffer({\n      data: uvs,\n      label: \"attribute-mesh-uvs\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const indexBuffer = new Buffer({\n      data: indices,\n      label: \"index-mesh-buffer\",\n      shrinkToFit,\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST\n    });\n    super({\n      attributes: {\n        aPosition: {\n          buffer: positionBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        },\n        aUV: {\n          buffer: uvBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        }\n      },\n      indexBuffer,\n      topology: options.topology\n    });\n    this.batchMode = \"auto\";\n  }\n  /** The positions of the mesh. */\n  get positions() {\n    return this.attributes.aPosition.buffer.data;\n  }\n  /**\n   * Set the positions of the mesh.\n   * When setting the positions, its important that the uvs array is at least as long as the positions array.\n   * otherwise the geometry will not be valid.\n   * @param {Float32Array} value - The positions of the mesh.\n   */\n  set positions(value) {\n    this.attributes.aPosition.buffer.data = value;\n  }\n  /** The UVs of the mesh. */\n  get uvs() {\n    return this.attributes.aUV.buffer.data;\n  }\n  /**\n   * Set the UVs of the mesh.\n   * Its important that the uvs array you set is at least as long as the positions array.\n   * otherwise the geometry will not be valid.\n   * @param {Float32Array} value - The UVs of the mesh.\n   */\n  set uvs(value) {\n    this.attributes.aUV.buffer.data = value;\n  }\n  /** The indices of the mesh. */\n  get indices() {\n    return this.indexBuffer.data;\n  }\n  set indices(value) {\n    this.indexBuffer.data = value;\n  }\n};\n_MeshGeometry.defaultOptions = {\n  topology: \"triangle-list\",\n  shrinkBuffersToFit: false\n};\nlet MeshGeometry = _MeshGeometry;\n\nexport { MeshGeometry };\n//# sourceMappingURL=MeshGeometry.mjs.map\n","import { pointInTriangle } from '../../../maths/point/pointInTriangle.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { State } from '../../../rendering/renderers/shared/state/State.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../../view/ViewContainer.mjs';\nimport { MeshGeometry } from './MeshGeometry.mjs';\n\n\"use strict\";\nclass Mesh extends ViewContainer {\n  constructor(...args) {\n    let options = args[0];\n    if (options instanceof Geometry) {\n      deprecation(v8_0_0, \"Mesh: use new Mesh({ geometry, shader }) instead\");\n      options = {\n        geometry: options,\n        shader: args[1]\n      };\n      if (args[3]) {\n        deprecation(v8_0_0, \"Mesh: drawMode argument has been removed, use geometry.topology instead\");\n        options.geometry.topology = args[3];\n      }\n    }\n    const { geometry, shader, texture, roundPixels, state, ...rest } = options;\n    super({\n      label: \"Mesh\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"mesh\";\n    /** @internal */\n    this._shader = null;\n    this.allowChildren = false;\n    this.shader = shader ?? null;\n    this.texture = texture ?? shader?.texture ?? Texture.WHITE;\n    this.state = state ?? State.for2d();\n    this._geometry = geometry;\n    this._geometry.on(\"update\", this.onViewUpdate, this);\n    this.roundPixels = roundPixels ?? false;\n  }\n  /** Alias for {@link Mesh#shader}. */\n  get material() {\n    deprecation(v8_0_0, \"mesh.material property has been removed, use mesh.shader instead\");\n    return this._shader;\n  }\n  /**\n   * Represents the vertex and fragment shaders that processes the geometry and runs on the GPU.\n   * Can be shared between multiple Mesh objects.\n   */\n  set shader(value) {\n    if (this._shader === value)\n      return;\n    this._shader = value;\n    this.onViewUpdate();\n  }\n  get shader() {\n    return this._shader;\n  }\n  /**\n   * Includes vertex positions, face indices, colors, UVs, and\n   * custom attributes within buffers, reducing the cost of passing all\n   * this data to the GPU. Can be shared between multiple Mesh objects.\n   */\n  set geometry(value) {\n    if (this._geometry === value)\n      return;\n    this._geometry?.off(\"update\", this.onViewUpdate, this);\n    value.on(\"update\", this.onViewUpdate, this);\n    this._geometry = value;\n    this.onViewUpdate();\n  }\n  get geometry() {\n    return this._geometry;\n  }\n  /** The texture that the Mesh uses. Null for non-MeshMaterial shaders */\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    if (this.shader) {\n      this.shader.texture = value;\n    }\n    this._texture = value;\n    this.onViewUpdate();\n  }\n  get texture() {\n    return this._texture;\n  }\n  get batched() {\n    if (this._shader)\n      return false;\n    if ((this.state.data & 12) !== 0)\n      return false;\n    if (this._geometry instanceof MeshGeometry) {\n      if (this._geometry.batchMode === \"auto\") {\n        return this._geometry.positions.length / 2 <= 100;\n      }\n      return this._geometry.batchMode === \"batch\";\n    }\n    return false;\n  }\n  /**\n   * The local bounds of the mesh.\n   * @type {Bounds}\n   */\n  get bounds() {\n    return this._geometry.bounds;\n  }\n  /**\n   * Update local bounds of the mesh.\n   * @private\n   */\n  updateBounds() {\n    this._bounds = this._geometry.bounds;\n  }\n  /**\n   * Checks if the object contains the given point.\n   * @param point - The point to check\n   */\n  containsPoint(point) {\n    const { x, y } = point;\n    if (!this.bounds.containsPoint(x, y))\n      return false;\n    const vertices = this.geometry.getBuffer(\"aPosition\").data;\n    const step = this.geometry.topology === \"triangle-strip\" ? 3 : 1;\n    if (this.geometry.getIndex()) {\n      const indices = this.geometry.getIndex().data;\n      const len = indices.length;\n      for (let i = 0; i + 2 < len; i += step) {\n        const ind0 = indices[i] * 2;\n        const ind1 = indices[i + 1] * 2;\n        const ind2 = indices[i + 2] * 2;\n        if (pointInTriangle(\n          x,\n          y,\n          vertices[ind0],\n          vertices[ind0 + 1],\n          vertices[ind1],\n          vertices[ind1 + 1],\n          vertices[ind2],\n          vertices[ind2 + 1]\n        )) {\n          return true;\n        }\n      }\n    } else {\n      const len = vertices.length / 2;\n      for (let i = 0; i + 2 < len; i += step) {\n        const ind0 = i * 2;\n        const ind1 = (i + 1) * 2;\n        const ind2 = (i + 2) * 2;\n        if (pointInTriangle(\n          x,\n          y,\n          vertices[ind0],\n          vertices[ind0 + 1],\n          vertices[ind1],\n          vertices[ind1 + 1],\n          vertices[ind2],\n          vertices[ind2 + 1]\n        )) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * mesh.destroy();\n   * mesh.destroy(true);\n   * mesh.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._geometry?.off(\"update\", this.onViewUpdate, this);\n    this._texture = null;\n    this._geometry = null;\n    this._shader = null;\n    this._gpuData = null;\n  }\n}\n\nexport { Mesh };\n//# sourceMappingURL=Mesh.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../view/ViewContainer.mjs';\n\n\"use strict\";\nclass AbstractText extends ViewContainer {\n  constructor(options, styleClass) {\n    const { text, resolution, style, anchor, width, height, roundPixels, ...rest } = options;\n    super({\n      ...rest\n    });\n    /** @internal */\n    this.batched = true;\n    /** @internal */\n    this._resolution = null;\n    /** @internal */\n    this._autoResolution = true;\n    /** @internal */\n    this._didTextUpdate = true;\n    this._styleClass = styleClass;\n    this.text = text ?? \"\";\n    this.style = style;\n    this.resolution = resolution ?? null;\n    this.allowChildren = false;\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor)\n      this.anchor = anchor;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * The anchor point of the text that controls the origin point for positioning and rotation.\n   * Can be a number (same value for x/y) or a PointData object.\n   * - (0,0) is top-left\n   * - (0.5,0.5) is center\n   * - (1,1) is bottom-right\n   * ```ts\n   * // Set anchor to center\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   *     anchor: 0.5 // Same as { x: 0.5, y: 0.5 }\n   * });\n   * // Set anchor to top-left\n   * const text2 = new Text({\n   *     text: 'Hello Pixi!',\n   *     anchor: { x: 0, y: 0 } // Top-left corner\n   * });\n   * // Set anchor to bottom-right\n   * const text3 = new Text({\n   *     text: 'Hello Pixi!',\n   *     anchor: { x: 1, y: 1 } // Bottom-right corner\n   * });\n   * ```\n   * @default { x: 0, y: 0 }\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   * The text content to display. Use '\\n' for line breaks.\n   * Accepts strings, numbers, or objects with toString() method.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   * });\n   * const multilineText = new Text({\n   *     text: 'Line 1\\nLine 2\\nLine 3',\n   * });\n   * const numberText = new Text({\n   *     text: 12345, // Will be converted to '12345'\n   * });\n   * const objectText = new Text({\n   *     text: { toString: () => 'Object Text' }, // Custom toString\n   * });\n   *\n   * // Update text dynamically\n   * text.text = 'Updated Text'; // Re-renders with new text\n   * text.text = 67890; // Updates to '67890'\n   * text.text = { toString: () => 'Dynamic Text' }; // Uses custom toString method\n   * // Clear text\n   * text.text = ''; // Clears the text\n   * ```\n   * @default ''\n   */\n  set text(value) {\n    value = value.toString();\n    if (this._text === value)\n      return;\n    this._text = value;\n    this.onViewUpdate();\n  }\n  get text() {\n    return this._text;\n  }\n  /**\n   * The resolution/device pixel ratio for rendering.\n   * Higher values result in sharper text at the cost of performance.\n   * Set to null for auto-resolution based on device.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   *     resolution: 2 // High DPI for sharper text\n   * });\n   * const autoResText = new Text({\n   *     text: 'Auto Resolution',\n   *     resolution: null // Use device's pixel ratio\n   * });\n   * ```\n   * @default null\n   */\n  set resolution(value) {\n    this._autoResolution = value === null;\n    this._resolution = value;\n    this.onViewUpdate();\n  }\n  get resolution() {\n    return this._resolution;\n  }\n  get style() {\n    return this._style;\n  }\n  /**\n   * The style configuration for the text.\n   * Can be a TextStyle instance or a configuration object.\n   * Supports canvas text styles, HTML text styles, and bitmap text styles.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Styled Text',\n   *     style: {\n   *         fontSize: 24,\n   *         fill: 0xff1010, // Red color\n   *         fontFamily: 'Arial',\n   *         align: 'center', // Center alignment\n   *         stroke: { color: '#4a1850', width: 5 }, // Purple stroke\n   *         dropShadow: {\n   *             color: '#000000', // Black shadow\n   *             blur: 4, // Shadow blur\n   *             distance: 6 // Shadow distance\n   *         }\n   *     }\n   * });\n   * const htmlText = new HTMLText({\n   *     text: 'HTML Styled Text',\n   *     style: {\n   *         fontSize: '20px',\n   *         fill: 'blue',\n   *         fontFamily: 'Verdana',\n   *     }\n   * });\n   * const bitmapText = new BitmapText({\n   *     text: 'Bitmap Styled Text',\n   *     style: {\n   *         fontName: 'Arial',\n   *         fontSize: 32,\n   *     }\n   * })\n   *\n   * // Update style dynamically\n   * text.style = {\n   *     fontSize: 30, // Change font size\n   *     fill: 0x00ff00, // Change color to green\n   *     align: 'right', // Change alignment to right\n   *     stroke: { color: '#000000', width: 2 }, // Add black stroke\n   * }\n   */\n  set style(style) {\n    style || (style = {});\n    this._style?.off(\"update\", this.onViewUpdate, this);\n    if (style instanceof this._styleClass) {\n      this._style = style;\n    } else {\n      this._style = new this._styleClass(style);\n    }\n    this._style.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The width of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set width directly\n   * texture.width = 200;\n   * console.log(texture.scale.x); // Scale adjusted to match width\n   *\n   * // For better performance when setting both width and height\n   * texture.setSize(300, 400); // Avoids recalculating bounds twice\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x) * this.bounds.width;\n  }\n  set width(value) {\n    this._setWidth(value, this.bounds.width);\n  }\n  /**\n   * The height of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set height directly\n   * texture.height = 200;\n   * console.log(texture.scale.y); // Scale adjusted to match height\n   *\n   * // For better performance when setting both width and height\n   * texture.setSize(300, 400); // Avoids recalculating bounds twice\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y) * this.bounds.height;\n  }\n  set height(value) {\n    this._setHeight(value, this.bounds.height);\n  }\n  /**\n   * Retrieves the size of the Text as a [Size]{@link Size} object based on the texture dimensions and scale.\n   * This is faster than getting width and height separately as it only calculates the bounds once.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   *     style: { fontSize: 24 }\n   * });\n   * const size = text.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * text.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in, to avoid allocating a new object\n   * @returns The size of the Sprite\n   * @see {@link Text#width} For getting just the width\n   * @see {@link Text#height} For getting just the height\n   * @see {@link Text#setSize} For setting both width and height\n   */\n  getSize(out) {\n    out || (out = {});\n    out.width = Math.abs(this.scale.x) * this.bounds.width;\n    out.height = Math.abs(this.scale.y) * this.bounds.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Text to the specified width and height.\n   * This is faster than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * const text = new Text({\n   *    text: 'Hello Pixi!',\n   *    style: { fontSize: 24 }\n   * });\n   * text.setSize(100, 200); // Width: 100, Height: 200\n   *\n   * // Set uniform size\n   * text.setSize(100); // Sets both width and height to 100\n   *\n   * // Set size with object\n   * text.setSize({\n   *     width: 200,\n   *     height: 300\n   * });\n   * ```\n   * @param value - This can be either a number or a {@link Size} object\n   * @param height - The height to set. Defaults to the value of `width` if not provided\n   * @see {@link Text#width} For setting width only\n   * @see {@link Text#height} For setting height only\n   */\n  setSize(value, height) {\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, this.bounds.width);\n    height !== void 0 && this._setHeight(height, this.bounds.height);\n  }\n  /**\n   * Checks if the object contains the given point in local coordinates.\n   * Uses the text's bounds for hit testing.\n   * @example\n   * ```ts\n   * // Basic point check\n   * const localPoint = { x: 50, y: 25 };\n   * const contains = text.containsPoint(localPoint);\n   * console.log('Point is inside:', contains);\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is within the text's bounds\n   * @see {@link Container#toLocal} For converting global coordinates to local\n   */\n  containsPoint(point) {\n    const width = this.bounds.width;\n    const height = this.bounds.height;\n    const x1 = -width * this.anchor.x;\n    let y1 = 0;\n    if (point.x >= x1 && point.x <= x1 + width) {\n      y1 = -height * this.anchor.y;\n      if (point.y >= y1 && point.y <= y1 + height)\n        return true;\n    }\n    return false;\n  }\n  /** @internal */\n  onViewUpdate() {\n    if (!this.didViewUpdate)\n      this._didTextUpdate = true;\n    super.onViewUpdate();\n  }\n  /**\n   * Destroys this text renderable and optionally its style texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * // Destroys the text and its style\n   * text.destroy({ style: true, texture: true, textureSource: true });\n   * text.destroy(true);\n   * text.destroy() // Destroys the text, but not its style\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    this.owner = null;\n    this._bounds = null;\n    this._anchor = null;\n    if (typeof options === \"boolean\" ? options : options?.style) {\n      this._style.destroy(options);\n    }\n    this._style = null;\n    this._text = null;\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `${this._text}:${this._style.styleKey}:${this._resolution}`;\n  }\n}\nfunction ensureTextOptions(args, name) {\n  let options = args[0] ?? {};\n  if (typeof options === \"string\" || args[1]) {\n    deprecation(v8_0_0, `use new ${name}({ text: \"hi!\", style }) instead`);\n    options = {\n      text: options,\n      style: args[1]\n    };\n  }\n  return options;\n}\n\nexport { AbstractText, ensureTextOptions };\n//# sourceMappingURL=AbstractText.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { nextPow2 } from '../../maths/misc/pow2.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nlet _internalCanvas = null;\nlet _internalContext = null;\nfunction ensureInternalCanvas(width, height) {\n  if (!_internalCanvas) {\n    _internalCanvas = DOMAdapter.get().createCanvas(256, 128);\n    _internalContext = _internalCanvas.getContext(\"2d\", { willReadFrequently: true });\n    _internalContext.globalCompositeOperation = \"copy\";\n    _internalContext.globalAlpha = 1;\n  }\n  if (_internalCanvas.width < width || _internalCanvas.height < height) {\n    _internalCanvas.width = nextPow2(width);\n    _internalCanvas.height = nextPow2(height);\n  }\n}\nfunction checkRow(data, width, y) {\n  for (let x = 0, index = 4 * y * width; x < width; ++x, index += 4) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction checkColumn(data, width, x, top, bottom) {\n  const stride = 4 * width;\n  for (let y = top, index = top * stride + 4 * x; y <= bottom; ++y, index += stride) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction getCanvasBoundingBox(...args) {\n  let options = args[0];\n  if (!options.canvas) {\n    options = { canvas: args[0], resolution: args[1] };\n  }\n  const { canvas } = options;\n  const resolution = Math.min(options.resolution ?? 1, 1);\n  const width = options.width ?? canvas.width;\n  const height = options.height ?? canvas.height;\n  let output = options.output;\n  ensureInternalCanvas(width, height);\n  if (!_internalContext) {\n    throw new TypeError(\"Failed to get canvas 2D context\");\n  }\n  _internalContext.drawImage(\n    canvas,\n    0,\n    0,\n    width,\n    height,\n    0,\n    0,\n    width * resolution,\n    height * resolution\n  );\n  const imageData = _internalContext.getImageData(0, 0, width, height);\n  const data = imageData.data;\n  let left = 0;\n  let top = 0;\n  let right = width - 1;\n  let bottom = height - 1;\n  while (top < height && checkRow(data, width, top))\n    ++top;\n  if (top === height)\n    return Rectangle.EMPTY;\n  while (checkRow(data, width, bottom))\n    --bottom;\n  while (checkColumn(data, width, left, top, bottom))\n    ++left;\n  while (checkColumn(data, width, right, top, bottom))\n    --right;\n  ++right;\n  ++bottom;\n  _internalContext.globalCompositeOperation = \"source-over\";\n  _internalContext.strokeRect(left, top, right - left, bottom - top);\n  _internalContext.globalCompositeOperation = \"copy\";\n  output ?? (output = new Rectangle());\n  output.set(left / resolution, top / resolution, (right - left) / resolution, (bottom - top) / resolution);\n  return output;\n}\n\nexport { getCanvasBoundingBox };\n//# sourceMappingURL=getCanvasBoundingBox.mjs.map\n","import { Color } from '../../../color/Color.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { getCanvasBoundingBox } from '../../../utils/canvas/getCanvasBoundingBox.mjs';\nimport { CanvasTextMetrics } from './CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from './utils/getCanvasFillStyle.mjs';\n\n\"use strict\";\nconst tempRect = new Rectangle();\nclass CanvasTextGeneratorClass {\n  /**\n   * Creates a canvas with the specified text rendered to it.\n   *\n   * Generates a canvas of appropriate size, renders the text with the provided style,\n   * and returns both the canvas/context and a Rectangle representing the text bounds.\n   *\n   * When trim is enabled in the style, the frame will represent the bounds of the\n   * non-transparent pixels, which can be smaller than the full canvas.\n   * @param options - The options for generating the text canvas\n   * @param options.text - The text to render\n   * @param options.style - The style to apply to the text\n   * @param options.resolution - The resolution of the canvas (defaults to 1)\n   * @param options.padding\n   * @returns An object containing the canvas/context and the frame (bounds) of the text\n   */\n  getCanvasAndContext(options) {\n    const { text, style, resolution = 1 } = options;\n    const padding = style._getFinalPadding();\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + padding * 2) * resolution);\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(width, height);\n    this._renderTextToCanvas(text, style, padding, resolution, canvasAndContext);\n    const frame = style.trim ? getCanvasBoundingBox({ canvas: canvasAndContext.canvas, width, height, resolution: 1, output: tempRect }) : tempRect.set(0, 0, width, height);\n    return {\n      canvasAndContext,\n      frame\n    };\n  }\n  /**\n   * Returns a canvas and context to the pool.\n   *\n   * This should be called when you're done with the canvas to allow reuse\n   * and prevent memory leaks.\n   * @param canvasAndContext - The canvas and context to return to the pool\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    CanvasPool.returnCanvasAndContext(canvasAndContext);\n  }\n  /**\n   * Renders text to its canvas, and updates its texture.\n   * @param text - The text to render\n   * @param style - The style of the text\n   * @param padding - The padding of the text\n   * @param resolution - The resolution of the text\n   * @param canvasAndContext - The canvas and context to render the text to\n   */\n  _renderTextToCanvas(text, style, padding, resolution, canvasAndContext) {\n    const { canvas, context } = canvasAndContext;\n    const font = fontStringFromTextStyle(style);\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const lines = measured.lines;\n    const lineHeight = measured.lineHeight;\n    const lineWidths = measured.lineWidths;\n    const maxLineWidth = measured.maxLineWidth;\n    const fontProperties = measured.fontProperties;\n    const height = canvas.height;\n    context.resetTransform();\n    context.scale(resolution, resolution);\n    context.textBaseline = style.textBaseline;\n    if (style._stroke?.width) {\n      const strokeStyle = style._stroke;\n      context.lineWidth = strokeStyle.width;\n      context.miterLimit = strokeStyle.miterLimit;\n      context.lineJoin = strokeStyle.join;\n      context.lineCap = strokeStyle.cap;\n    }\n    context.font = font;\n    let linePositionX;\n    let linePositionY;\n    const passesCount = style.dropShadow ? 2 : 1;\n    for (let i = 0; i < passesCount; ++i) {\n      const isShadowPass = style.dropShadow && i === 0;\n      const dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + padding * 2) : 0;\n      const dsOffsetShadow = dsOffsetText * resolution;\n      if (isShadowPass) {\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        const shadowOptions = style.dropShadow;\n        const dropShadowColor = shadowOptions.color;\n        const dropShadowAlpha = shadowOptions.alpha;\n        context.shadowColor = Color.shared.setValue(dropShadowColor).setAlpha(dropShadowAlpha).toRgbaString();\n        const dropShadowBlur = shadowOptions.blur * resolution;\n        const dropShadowDistance = shadowOptions.distance * resolution;\n        context.shadowBlur = dropShadowBlur;\n        context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n        context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance + dsOffsetShadow;\n      } else {\n        context.fillStyle = style._fill ? getCanvasFillStyle(style._fill, context, measured, padding * 2) : null;\n        if (style._stroke?.width) {\n          const strokePadding = style._stroke.width * 0.5 + padding * 2;\n          context.strokeStyle = getCanvasFillStyle(style._stroke, context, measured, strokePadding);\n        }\n        context.shadowColor = \"black\";\n      }\n      let linePositionYShift = (lineHeight - fontProperties.fontSize) / 2;\n      if (lineHeight - fontProperties.fontSize < 0) {\n        linePositionYShift = 0;\n      }\n      const strokeWidth = style._stroke?.width ?? 0;\n      for (let i2 = 0; i2 < lines.length; i2++) {\n        linePositionX = strokeWidth / 2;\n        linePositionY = strokeWidth / 2 + i2 * lineHeight + fontProperties.ascent + linePositionYShift;\n        if (style.align === \"right\") {\n          linePositionX += maxLineWidth - lineWidths[i2];\n        } else if (style.align === \"center\") {\n          linePositionX += (maxLineWidth - lineWidths[i2]) / 2;\n        }\n        if (style._stroke?.width) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + padding,\n            linePositionY + padding - dsOffsetText,\n            true\n          );\n        }\n        if (style._fill !== void 0) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + padding,\n            linePositionY + padding - dsOffsetText\n          );\n        }\n      }\n    }\n  }\n  /**\n   * Render the text with letter-spacing.\n   *\n   * This method handles rendering text with the correct letter spacing, using either:\n   * 1. Native letter spacing if supported by the browser\n   * 2. Manual letter spacing calculation if not natively supported\n   *\n   * For manual letter spacing, it calculates the position of each character\n   * based on its width and the desired spacing.\n   * @param text - The text to draw\n   * @param style - The text style to apply\n   * @param canvasAndContext - The canvas and context to draw to\n   * @param x - Horizontal position to draw the text\n   * @param y - Vertical position to draw the text\n   * @param isStroke - Whether to render the stroke (true) or fill (false)\n   * @private\n   */\n  _drawLetterSpacing(text, style, canvasAndContext, x, y, isStroke = false) {\n    const { context } = canvasAndContext;\n    const letterSpacing = style.letterSpacing;\n    let useExperimentalLetterSpacing = false;\n    if (CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    if (letterSpacing === 0 || useExperimentalLetterSpacing) {\n      if (isStroke) {\n        context.strokeText(text, x, y);\n      } else {\n        context.fillText(text, x, y);\n      }\n      return;\n    }\n    let currentPosition = x;\n    const stringArray = CanvasTextMetrics.graphemeSegmenter(text);\n    let previousWidth = context.measureText(text).width;\n    let currentWidth = 0;\n    for (let i = 0; i < stringArray.length; ++i) {\n      const currentChar = stringArray[i];\n      if (isStroke) {\n        context.strokeText(currentChar, currentPosition, y);\n      } else {\n        context.fillText(currentChar, currentPosition, y);\n      }\n      let textStr = \"\";\n      for (let j = i + 1; j < stringArray.length; ++j) {\n        textStr += stringArray[j];\n      }\n      currentWidth = context.measureText(textStr).width;\n      currentPosition += previousWidth - currentWidth + letterSpacing;\n      previousWidth = currentWidth;\n    }\n  }\n}\nconst CanvasTextGenerator = new CanvasTextGeneratorClass();\n\nexport { CanvasTextGenerator };\n//# sourceMappingURL=CanvasTextGenerator.mjs.map\n","import { TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { AbstractText, ensureTextOptions } from './AbstractText.mjs';\nimport { CanvasTextGenerator } from './canvas/CanvasTextGenerator.mjs';\nimport { CanvasTextMetrics } from './canvas/CanvasTextMetrics.mjs';\nimport { TextStyle } from './TextStyle.mjs';\n\n\"use strict\";\nclass Text extends AbstractText {\n  constructor(...args) {\n    const options = ensureTextOptions(args, \"Text\");\n    super(options, TextStyle);\n    /** @internal */\n    this.renderPipeId = \"text\";\n    if (options.textureStyle) {\n      this.textureStyle = options.textureStyle instanceof TextureStyle ? options.textureStyle : new TextureStyle(options.textureStyle);\n    }\n  }\n  /** @private */\n  updateBounds() {\n    const bounds = this._bounds;\n    const anchor = this._anchor;\n    let width = 0;\n    let height = 0;\n    if (this._style.trim) {\n      const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n        text: this.text,\n        style: this._style,\n        resolution: 1\n      });\n      CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n      width = frame.width;\n      height = frame.height;\n    } else {\n      const canvasMeasurement = CanvasTextMetrics.measureText(\n        this._text,\n        this._style\n      );\n      width = canvasMeasurement.width;\n      height = canvasMeasurement.height;\n    }\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n}\n\nexport { Text };\n//# sourceMappingURL=Text.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { AbstractText, ensureTextOptions } from '../text/AbstractText.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapText extends AbstractText {\n  constructor(...args) {\n    var _a;\n    const options = ensureTextOptions(args, \"BitmapText\");\n    options.style ?? (options.style = options.style || {});\n    (_a = options.style).fill ?? (_a.fill = 16777215);\n    super(options, TextStyle);\n    /** @internal */\n    this.renderPipeId = \"bitmapText\";\n  }\n  /** @private */\n  updateBounds() {\n    const bounds = this._bounds;\n    const anchor = this._anchor;\n    const bitmapMeasurement = BitmapFontManager.measureText(this.text, this._style);\n    const scale = bitmapMeasurement.scale;\n    const offset = bitmapMeasurement.offsetY * scale;\n    let width = bitmapMeasurement.width * scale;\n    let height = bitmapMeasurement.height * scale;\n    const stroke = this._style._stroke;\n    if (stroke) {\n      width += stroke.width;\n      height += stroke.width;\n    }\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * (height + offset);\n    bounds.maxY = bounds.minY + height;\n  }\n  /**\n   * The resolution / device pixel ratio for text rendering.\n   * Unlike other text types, BitmapText resolution is managed by the BitmapFont.\n   * Individual resolution changes are not supported.\n   * @example\n   * ```ts\n   * //  Incorrect: Setting resolution directly (will trigger warning)\n   * const text = new BitmapText({\n   *     text: 'Hello',\n   *     resolution: 2 // This will be ignored\n   * });\n   *\n   * //  Correct: Set resolution when installing the font\n   * BitmapFont.install({\n   *     name: 'MyFont',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *     },\n   *     resolution: 2 // Resolution is set here\n   * });\n   *\n   * const text = new BitmapText({\n   *     text: 'Hello',\n   *     style: {\n   *         fontFamily: 'MyFont' // Uses font's resolution\n   *     }\n   * });\n   * ```\n   * @default 1\n   * @see {@link BitmapFont.install} For setting font resolution\n   * @throws {Warning} When attempting to change resolution directly\n   * @readonly\n   */\n  set resolution(value) {\n    if (value !== null) {\n      warn(\n        // eslint-disable-next-line max-len\n        \"[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.\"\n      );\n    }\n  }\n  get resolution() {\n    return this._resolution;\n  }\n}\n\nexport { BitmapText };\n//# sourceMappingURL=BitmapText.mjs.map\n","import { warn } from '../../../../../utils/logging/warn.mjs';\nimport { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nfunction ensureAttributes(geometry, extractedData) {\n  for (const i in geometry.attributes) {\n    const attribute = geometry.attributes[i];\n    const attributeData = extractedData[i];\n    if (attributeData) {\n      attribute.format ?? (attribute.format = attributeData.format);\n      attribute.offset ?? (attribute.offset = attributeData.offset);\n      attribute.instance ?? (attribute.instance = attributeData.instance);\n    } else {\n      warn(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`);\n    }\n  }\n  ensureStartAndStride(geometry);\n}\nfunction ensureStartAndStride(geometry) {\n  const { buffers, attributes } = geometry;\n  const tempStride = {};\n  const tempStart = {};\n  for (const j in buffers) {\n    const buffer = buffers[j];\n    tempStride[buffer.uid] = 0;\n    tempStart[buffer.uid] = 0;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    tempStride[attribute.buffer.uid] += getAttributeInfoFromFormat(attribute.format).stride;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    attribute.stride ?? (attribute.stride = tempStride[attribute.buffer.uid]);\n    attribute.start ?? (attribute.start = tempStart[attribute.buffer.uid]);\n    tempStart[attribute.buffer.uid] += getAttributeInfoFromFormat(attribute.format).stride;\n  }\n}\n\nexport { ensureAttributes };\n//# sourceMappingURL=ensureAttributes.mjs.map\n","import { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\n\n\"use strict\";\nclass RenderTexture extends Texture {\n  static create(options) {\n    return new RenderTexture({\n      source: new TextureSource(options)\n    });\n  }\n  /**\n   * Resizes the render texture.\n   * @param width - The new width of the render texture.\n   * @param height - The new height of the render texture.\n   * @param resolution - The new resolution of the render texture.\n   * @returns This texture.\n   */\n  resize(width, height, resolution) {\n    this.source.resize(width, height, resolution);\n    return this;\n  }\n}\n\nexport { RenderTexture };\n//# sourceMappingURL=RenderTexture.mjs.map\n","import { ViewContainer } from '../view/ViewContainer.mjs';\n\n\"use strict\";\nclass RenderContainer extends ViewContainer {\n  /**\n   * @param options - The options for the container.\n   */\n  constructor(options) {\n    if (typeof options === \"function\") {\n      options = { render: options };\n    }\n    const { render, ...rest } = options;\n    super({\n      label: \"RenderContainer\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"customRender\";\n    /** @internal */\n    this.batched = false;\n    if (render)\n      this.render = render;\n    this.containsPoint = options.containsPoint ?? (() => false);\n    this.addBounds = options.addBounds ?? (() => false);\n  }\n  /** @private */\n  updateBounds() {\n    this._bounds.clear();\n    this.addBounds(this._bounds);\n  }\n  /**\n   * An overridable function that can be used to render the object using the current renderer.\n   * @param _renderer - The current renderer\n   */\n  render(_renderer) {\n  }\n}\n\nexport { RenderContainer };\n//# sourceMappingURL=RenderContainer.mjs.map\n","import { browserExt } from './environment-browser/browserExt.mjs';\nimport { webworkerExt } from './environment-webworker/webworkerExt.mjs';\nimport { extensions } from './extensions/Extensions.mjs';\nexport { ExtensionType, normalizeExtensionPriority } from './extensions/Extensions.mjs';\nimport './rendering/init.mjs';\nimport './spritesheet/init.mjs';\nimport './accessibility/index.mjs';\nimport './advanced-blend-modes/index.mjs';\nimport './app/index.mjs';\nimport './assets/index.mjs';\nimport './color/index.mjs';\nimport './compressed-textures/index.mjs';\nimport './culling/index.mjs';\nimport './dom/index.mjs';\nimport './environment/index.mjs';\nimport './environment-browser/index.mjs';\nimport './environment-webworker/index.mjs';\nimport './events/index.mjs';\nimport './extensions/index.mjs';\nimport './filters/index.mjs';\nimport './maths/index.mjs';\nimport './prepare/index.mjs';\nimport './rendering/index.mjs';\nimport './scene/index.mjs';\nimport './spritesheet/index.mjs';\nimport './ticker/index.mjs';\nimport './utils/index.mjs';\nexport { AccessibilitySystem } from './accessibility/AccessibilitySystem.mjs';\nexport { accessibilityTarget } from './accessibility/accessibilityTarget.mjs';\nexport { ColorBlend } from './advanced-blend-modes/ColorBlend.mjs';\nexport { ColorBurnBlend } from './advanced-blend-modes/ColorBurnBlend.mjs';\nexport { ColorDodgeBlend } from './advanced-blend-modes/ColorDodgeBlend.mjs';\nexport { DarkenBlend } from './advanced-blend-modes/DarkenBlend.mjs';\nexport { DifferenceBlend } from './advanced-blend-modes/DifferenceBlend.mjs';\nexport { DivideBlend } from './advanced-blend-modes/DivideBlend.mjs';\nexport { ExclusionBlend } from './advanced-blend-modes/ExclusionBlend.mjs';\nexport { HardLightBlend } from './advanced-blend-modes/HardLightBlend.mjs';\nexport { HardMixBlend } from './advanced-blend-modes/HardMixBlend.mjs';\nexport { LightenBlend } from './advanced-blend-modes/LightenBlend.mjs';\nexport { LinearBurnBlend } from './advanced-blend-modes/LinearBurnBlend.mjs';\nexport { LinearDodgeBlend } from './advanced-blend-modes/LinearDodgeBlend.mjs';\nexport { LinearLightBlend } from './advanced-blend-modes/LinearLightBlend.mjs';\nexport { LuminosityBlend } from './advanced-blend-modes/LuminosityBlend.mjs';\nexport { NegationBlend } from './advanced-blend-modes/NegationBlend.mjs';\nexport { OverlayBlend } from './advanced-blend-modes/OverlayBlend.mjs';\nexport { PinLightBlend } from './advanced-blend-modes/PinLightBlend.mjs';\nexport { SaturationBlend } from './advanced-blend-modes/SaturationBlend.mjs';\nexport { SoftLightBlend } from './advanced-blend-modes/SoftLightBlend.mjs';\nexport { SubtractBlend } from './advanced-blend-modes/SubtractBlend.mjs';\nexport { VividLightBlend } from './advanced-blend-modes/VividLightBlend.mjs';\nexport { Application } from './app/Application.mjs';\nexport { ResizePlugin } from './app/ResizePlugin.mjs';\nexport { TickerPlugin } from './app/TickerPlugin.mjs';\nexport { Assets, AssetsClass } from './assets/Assets.mjs';\nexport { BackgroundLoader } from './assets/BackgroundLoader.mjs';\nexport { Cache } from './assets/cache/Cache.mjs';\nexport { cacheTextureArray } from './assets/cache/parsers/cacheTextureArray.mjs';\nexport { detectAvif } from './assets/detections/parsers/detectAvif.mjs';\nexport { detectDefaults } from './assets/detections/parsers/detectDefaults.mjs';\nexport { detectMp4 } from './assets/detections/parsers/detectMp4.mjs';\nexport { detectOgv } from './assets/detections/parsers/detectOgv.mjs';\nexport { detectWebm } from './assets/detections/parsers/detectWebm.mjs';\nexport { detectWebp } from './assets/detections/parsers/detectWebp.mjs';\nexport { testImageFormat } from './assets/detections/utils/testImageFormat.mjs';\nexport { testVideoFormat } from './assets/detections/utils/testVideoFormat.mjs';\nexport { Loader } from './assets/loader/Loader.mjs';\nexport { LoaderParserPriority } from './assets/loader/parsers/LoaderParser.mjs';\nexport { loadJson } from './assets/loader/parsers/loadJson.mjs';\nexport { loadTxt } from './assets/loader/parsers/loadTxt.mjs';\nexport { getFontFamilyName, loadWebFont } from './assets/loader/parsers/loadWebFont.mjs';\nexport { loadSvg } from './assets/loader/parsers/textures/loadSVG.mjs';\nexport { loadImageBitmap, loadTextures } from './assets/loader/parsers/textures/loadTextures.mjs';\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo } from './assets/loader/parsers/textures/loadVideoTextures.mjs';\nexport { createTexture } from './assets/loader/parsers/textures/utils/createTexture.mjs';\nexport { WorkerManager } from './assets/loader/workers/WorkerManager.mjs';\nexport { resolveJsonUrl } from './assets/resolver/parsers/resolveJsonUrl.mjs';\nexport { resolveTextureUrl } from './assets/resolver/parsers/resolveTextureUrl.mjs';\nexport { Resolver, getUrlExtension } from './assets/resolver/Resolver.mjs';\nexport { checkDataUrl } from './assets/utils/checkDataUrl.mjs';\nexport { checkExtension } from './assets/utils/checkExtension.mjs';\nexport { convertToList } from './assets/utils/convertToList.mjs';\nexport { copySearchParams } from './assets/utils/copySearchParams.mjs';\nexport { createStringVariations } from './assets/utils/createStringVariations.mjs';\nexport { isSingleItem } from './assets/utils/isSingleItem.mjs';\nexport { Color } from './color/Color.mjs';\nexport { detectBasis } from './compressed-textures/basis/detectBasis.mjs';\nexport { loadBasis } from './compressed-textures/basis/loadBasis.mjs';\nexport { createLevelBuffers } from './compressed-textures/basis/utils/createLevelBuffers.mjs';\nexport { gpuFormatToBasisTranscoderFormat } from './compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.mjs';\nexport { basisTranscoderUrls, setBasisTranscoderPath } from './compressed-textures/basis/utils/setBasisTranscoderPath.mjs';\nexport { loadBasisOnWorker } from './compressed-textures/basis/worker/loadBasisOnWorker.mjs';\nexport { D3D10_RESOURCE_DIMENSION, D3DFMT, DDS, DXGI_FORMAT, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './compressed-textures/dds/const.mjs';\nexport { loadDDS } from './compressed-textures/dds/loadDDS.mjs';\nexport { parseDDS } from './compressed-textures/dds/parseDDS.mjs';\nexport { loadKTX } from './compressed-textures/ktx/loadKTX.mjs';\nexport { parseKTX } from './compressed-textures/ktx/parseKTX.mjs';\nexport { GL_INTERNAL_FORMAT, KTX } from './compressed-textures/ktx2/const.mjs';\nexport { loadKTX2 } from './compressed-textures/ktx2/loadKTX2.mjs';\nexport { convertFormatIfRequired } from './compressed-textures/ktx2/utils/convertFormatIfRequired.mjs';\nexport { createLevelBuffersFromKTX } from './compressed-textures/ktx2/utils/createLevelBuffersFromKTX.mjs';\nexport { getTextureFormatFromKTXTexture } from './compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.mjs';\nexport { glFormatToGPUFormat } from './compressed-textures/ktx2/utils/glFormatToGPUFormat.mjs';\nexport { gpuFormatToKTXBasisTranscoderFormat } from './compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.mjs';\nexport { ktxTranscoderUrls, setKTXTranscoderPath } from './compressed-textures/ktx2/utils/setKTXTranscoderPath.mjs';\nexport { vkFormatToGPUFormat } from './compressed-textures/ktx2/utils/vkFormatToGPUFormat.mjs';\nexport { loadKTX2onWorker } from './compressed-textures/ktx2/worker/loadKTX2onWorker.mjs';\nexport { detectCompressed } from './compressed-textures/shared/detectCompressed.mjs';\nexport { resolveCompressedTextureUrl, validFormats } from './compressed-textures/shared/resolveCompressedTextureUrl.mjs';\nexport { Culler } from './culling/Culler.mjs';\nexport { CullerPlugin } from './culling/CullerPlugin.mjs';\nexport { cullingMixin } from './culling/cullingMixin.mjs';\nexport { CanvasObserver } from './dom/CanvasObserver.mjs';\nexport { DOMContainer } from './dom/DOMContainer.mjs';\nexport { DOMPipe } from './dom/DOMPipe.mjs';\nexport { DOMAdapter } from './environment/adapter.mjs';\nexport { autoDetectEnvironment, loadEnvironmentExtensions } from './environment/autoDetectEnvironment.mjs';\nexport { BrowserAdapter } from './environment-browser/BrowserAdapter.mjs';\nexport { WebWorkerAdapter } from './environment-webworker/WebWorkerAdapter.mjs';\nexport { EventBoundary } from './events/EventBoundary.mjs';\nexport { EventSystem } from './events/EventSystem.mjs';\nexport { EventsTicker } from './events/EventTicker.mjs';\nexport { FederatedEvent } from './events/FederatedEvent.mjs';\nexport { FederatedContainer } from './events/FederatedEventTarget.mjs';\nexport { FederatedMouseEvent } from './events/FederatedMouseEvent.mjs';\nexport { FederatedPointerEvent } from './events/FederatedPointerEvent.mjs';\nexport { FederatedWheelEvent } from './events/FederatedWheelEvent.mjs';\nexport { default as blendTemplateFrag } from './filters/blend-modes/blend-template.frag.mjs';\nexport { default as blendTemplateVert } from './filters/blend-modes/blend-template.vert.mjs';\nexport { default as blendTemplateWgsl } from './filters/blend-modes/blend-template.wgsl.mjs';\nexport { default as hslWgsl } from './filters/blend-modes/hsl.wgsl.mjs';\nexport { default as alphaFrag } from './filters/defaults/alpha/alpha.frag.mjs';\nexport { default as alphaWgsl } from './filters/defaults/alpha/alpha.wgsl.mjs';\nexport { default as blurTemplateWgsl } from './filters/defaults/blur/gpu/blur-template.wgsl.mjs';\nexport { default as colorMatrixFilterFrag } from './filters/defaults/color-matrix/colorMatrixFilter.frag.mjs';\nexport { default as colorMatrixFilterWgsl } from './filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs';\nexport { default as defaultFilterVert } from './filters/defaults/defaultFilter.vert.mjs';\nexport { default as displacementFrag } from './filters/defaults/displacement/displacement.frag.mjs';\nexport { default as displacementVert } from './filters/defaults/displacement/displacement.vert.mjs';\nexport { default as displacementWgsl } from './filters/defaults/displacement/displacement.wgsl.mjs';\nexport { default as noiseFrag } from './filters/defaults/noise/noise.frag.mjs';\nexport { default as noiseWgsl } from './filters/defaults/noise/noise.wgsl.mjs';\nexport { default as maskFrag } from './filters/mask/mask.frag.mjs';\nexport { default as maskVert } from './filters/mask/mask.vert.mjs';\nexport { default as maskWgsl } from './filters/mask/mask.wgsl.mjs';\nexport { BlendModeFilter } from './filters/blend-modes/BlendModeFilter.mjs';\nexport { hslgl } from './filters/blend-modes/hls/GLhls.mjs';\nexport { hslgpu } from './filters/blend-modes/hls/GPUhls.mjs';\nexport { AlphaFilter } from './filters/defaults/alpha/AlphaFilter.mjs';\nexport { BlurFilter } from './filters/defaults/blur/BlurFilter.mjs';\nexport { BlurFilterPass } from './filters/defaults/blur/BlurFilterPass.mjs';\nexport { GAUSSIAN_VALUES } from './filters/defaults/blur/const.mjs';\nexport { generateBlurFragSource } from './filters/defaults/blur/gl/generateBlurFragSource.mjs';\nexport { generateBlurGlProgram } from './filters/defaults/blur/gl/generateBlurGlProgram.mjs';\nexport { generateBlurVertSource } from './filters/defaults/blur/gl/generateBlurVertSource.mjs';\nexport { generateBlurProgram } from './filters/defaults/blur/gpu/generateBlurProgram.mjs';\nexport { ColorMatrixFilter } from './filters/defaults/color-matrix/ColorMatrixFilter.mjs';\nexport { DisplacementFilter } from './filters/defaults/displacement/DisplacementFilter.mjs';\nexport { NoiseFilter } from './filters/defaults/noise/NoiseFilter.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { FilterEffect } from './filters/FilterEffect.mjs';\nexport { FilterPipe } from './filters/FilterPipe.mjs';\nexport { FilterSystem } from './filters/FilterSystem.mjs';\nexport { MaskFilter } from './filters/mask/MaskFilter.mjs';\nexport { groupD8 } from './maths/matrix/groupD8.mjs';\nexport { Matrix } from './maths/matrix/Matrix.mjs';\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG } from './maths/misc/const.mjs';\nexport { isPow2, log2, nextPow2 } from './maths/misc/pow2.mjs';\nexport { squaredDistanceToLineSegment } from './maths/misc/squaredDistanceToLineSegment.mjs';\nexport { ObservablePoint } from './maths/point/ObservablePoint.mjs';\nexport { Point } from './maths/point/Point.mjs';\nexport { pointInTriangle } from './maths/point/pointInTriangle.mjs';\nexport { Circle } from './maths/shapes/Circle.mjs';\nexport { Ellipse } from './maths/shapes/Ellipse.mjs';\nexport { Polygon } from './maths/shapes/Polygon.mjs';\nexport { Rectangle } from './maths/shapes/Rectangle.mjs';\nexport { RoundedRectangle } from './maths/shapes/RoundedRectangle.mjs';\nexport { Triangle } from './maths/shapes/Triangle.mjs';\nexport { PrepareBase } from './prepare/PrepareBase.mjs';\nexport { PrepareQueue } from './prepare/PrepareQueue.mjs';\nexport { PrepareSystem } from './prepare/PrepareSystem.mjs';\nexport { PrepareUpload } from './prepare/PrepareUpload.mjs';\nexport { GlBatchAdaptor } from './rendering/batcher/gl/GlBatchAdaptor.mjs';\nexport { checkMaxIfStatementsInShader } from './rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs';\nexport { getMaxTexturesPerBatch } from './rendering/batcher/gl/utils/maxRecommendedTextures.mjs';\nexport { generateGPULayout } from './rendering/batcher/gpu/generateGPULayout.mjs';\nexport { generateLayout } from './rendering/batcher/gpu/generateLayout.mjs';\nexport { getTextureBatchBindGroup } from './rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nexport { GpuBatchAdaptor } from './rendering/batcher/gpu/GpuBatchAdaptor.mjs';\nexport { Batch, Batcher } from './rendering/batcher/shared/Batcher.mjs';\nexport { BatcherPipe } from './rendering/batcher/shared/BatcherPipe.mjs';\nexport { BatchGeometry } from './rendering/batcher/shared/BatchGeometry.mjs';\nexport { BatchTextureArray } from './rendering/batcher/shared/BatchTextureArray.mjs';\nexport { DefaultBatcher } from './rendering/batcher/shared/DefaultBatcher.mjs';\nexport { DefaultShader } from './rendering/batcher/shared/DefaultShader.mjs';\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram } from './rendering/high-shader/compileHighShaderToProgram.mjs';\nexport { compileHighShader, compileHighShaderGl } from './rendering/high-shader/compiler/compileHighShader.mjs';\nexport { addBits } from './rendering/high-shader/compiler/utils/addBits.mjs';\nexport { compileHooks } from './rendering/high-shader/compiler/utils/compileHooks.mjs';\nexport { compileInputs } from './rendering/high-shader/compiler/utils/compileInputs.mjs';\nexport { compileOutputs } from './rendering/high-shader/compiler/utils/compileOutputs.mjs';\nexport { formatShader } from './rendering/high-shader/compiler/utils/formatShader.mjs';\nexport { injectBits } from './rendering/high-shader/compiler/utils/injectBits.mjs';\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate } from './rendering/high-shader/defaultProgramTemplate.mjs';\nexport { colorBit, colorBitGl } from './rendering/high-shader/shader-bits/colorBit.mjs';\nexport { generateTextureBatchBit, generateTextureBatchBitGl } from './rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl } from './rendering/high-shader/shader-bits/globalUniformsBit.mjs';\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 } from './rendering/high-shader/shader-bits/localUniformBit.mjs';\nexport { roundPixelsBit, roundPixelsBitGl } from './rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nexport { textureBit, textureBitGl } from './rendering/high-shader/shader-bits/textureBit.mjs';\nexport { AlphaMask } from './rendering/mask/alpha/AlphaMask.mjs';\nexport { AlphaMaskPipe } from './rendering/mask/alpha/AlphaMaskPipe.mjs';\nexport { ColorMask } from './rendering/mask/color/ColorMask.mjs';\nexport { ColorMaskPipe } from './rendering/mask/color/ColorMaskPipe.mjs';\nexport { MaskEffectManager, MaskEffectManagerClass } from './rendering/mask/MaskEffectManager.mjs';\nexport { ScissorMask } from './rendering/mask/scissor/ScissorMask.mjs';\nexport { StencilMask } from './rendering/mask/stencil/StencilMask.mjs';\nexport { StencilMaskPipe } from './rendering/mask/stencil/StencilMaskPipe.mjs';\nexport { addMaskBounds } from './rendering/mask/utils/addMaskBounds.mjs';\nexport { addMaskLocalBounds } from './rendering/mask/utils/addMaskLocalBounds.mjs';\nexport { autoDetectRenderer } from './rendering/renderers/autoDetectRenderer.mjs';\nexport { BUFFER_TYPE } from './rendering/renderers/gl/buffer/const.mjs';\nexport { GlBuffer } from './rendering/renderers/gl/buffer/GlBuffer.mjs';\nexport { GlBufferSystem } from './rendering/renderers/gl/buffer/GlBufferSystem.mjs';\nexport { CLEAR } from './rendering/renderers/gl/const.mjs';\nexport { GlContextSystem } from './rendering/renderers/gl/context/GlContextSystem.mjs';\nexport { GlGeometrySystem } from './rendering/renderers/gl/geometry/GlGeometrySystem.mjs';\nexport { getGlTypeFromFormat } from './rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs';\nexport { GlBackBufferSystem } from './rendering/renderers/gl/GlBackBufferSystem.mjs';\nexport { GlColorMaskSystem } from './rendering/renderers/gl/GlColorMaskSystem.mjs';\nexport { GlEncoderSystem } from './rendering/renderers/gl/GlEncoderSystem.mjs';\nexport { GlLimitsSystem } from './rendering/renderers/gl/GlLimitsSystem.mjs';\nexport { GlRenderTarget } from './rendering/renderers/gl/GlRenderTarget.mjs';\nexport { GlStencilSystem } from './rendering/renderers/gl/GlStencilSystem.mjs';\nexport { GlUboSystem } from './rendering/renderers/gl/GlUboSystem.mjs';\nexport { GlRenderTargetAdaptor } from './rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs';\nexport { GlRenderTargetSystem } from './rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs';\nexport { generateShaderSyncCode } from './rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs';\nexport { getBatchSamplersUniformGroup } from './rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nexport { GlProgram } from './rendering/renderers/gl/shader/GlProgram.mjs';\nexport { GlProgramData, IGLUniformData } from './rendering/renderers/gl/shader/GlProgramData.mjs';\nexport { GlShaderSystem } from './rendering/renderers/gl/shader/GlShaderSystem.mjs';\nexport { GlUniformGroupSystem } from './rendering/renderers/gl/shader/GlUniformGroupSystem.mjs';\nexport { migrateFragmentFromV7toV8 } from './rendering/renderers/gl/shader/migrateFragmentFromV7toV8.mjs';\nexport { compileShader } from './rendering/renderers/gl/shader/program/compileShader.mjs';\nexport { defaultValue } from './rendering/renderers/gl/shader/program/defaultValue.mjs';\nexport { ensureAttributes } from './rendering/renderers/gl/shader/program/ensureAttributes.mjs';\nexport { extractAttributesFromGlProgram } from './rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs';\nexport { generateProgram } from './rendering/renderers/gl/shader/program/generateProgram.mjs';\nexport { getMaxFragmentPrecision } from './rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs';\nexport { getTestContext } from './rendering/renderers/gl/shader/program/getTestContext.mjs';\nexport { getUboData } from './rendering/renderers/gl/shader/program/getUboData.mjs';\nexport { getUniformData } from './rendering/renderers/gl/shader/program/getUniformData.mjs';\nexport { logProgramError } from './rendering/renderers/gl/shader/program/logProgramError.mjs';\nexport { mapSize } from './rendering/renderers/gl/shader/program/mapSize.mjs';\nexport { mapGlToVertexFormat, mapType } from './rendering/renderers/gl/shader/program/mapType.mjs';\nexport { addProgramDefines } from './rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs';\nexport { ensurePrecision } from './rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs';\nexport { insertVersion } from './rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs';\nexport { setProgramName } from './rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs';\nexport { stripVersion } from './rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs';\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 } from './rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs';\nexport { createUboSyncFunctionSTD40 } from './rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs';\nexport { generateArraySyncSTD40 } from './rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs';\nexport { generateUniformsSync } from './rendering/renderers/gl/shader/utils/generateUniformsSync.mjs';\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs';\nexport { GlStateSystem } from './rendering/renderers/gl/state/GlStateSystem.mjs';\nexport { mapWebGLBlendModesToPixi } from './rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs';\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES } from './rendering/renderers/gl/texture/const.mjs';\nexport { GlTexture } from './rendering/renderers/gl/texture/GlTexture.mjs';\nexport { GlTextureSystem } from './rendering/renderers/gl/texture/GlTextureSystem.mjs';\nexport { glUploadBufferImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs';\nexport { glUploadCompressedTextureResource } from './rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs';\nexport { glUploadImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs';\nexport { glUploadVideoResource } from './rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs';\nexport { applyStyleParams } from './rendering/renderers/gl/texture/utils/applyStyleParams.mjs';\nexport { getSupportedGlCompressedTextureFormats } from './rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.mjs';\nexport { mapFormatToGlFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs';\nexport { mapFormatToGlInternalFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs';\nexport { mapFormatToGlType } from './rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs';\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress } from './rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs';\nexport { unpremultiplyAlpha } from './rendering/renderers/gl/texture/utils/unpremultiplyAlpha.mjs';\nexport { WebGLRenderer } from './rendering/renderers/gl/WebGLRenderer.mjs';\nexport { BindGroupSystem } from './rendering/renderers/gpu/BindGroupSystem.mjs';\nexport { GpuBufferSystem } from './rendering/renderers/gpu/buffer/GpuBufferSystem.mjs';\nexport { UboBatch } from './rendering/renderers/gpu/buffer/UboBatch.mjs';\nexport { GpuColorMaskSystem } from './rendering/renderers/gpu/GpuColorMaskSystem.mjs';\nexport { GpuDeviceSystem } from './rendering/renderers/gpu/GpuDeviceSystem.mjs';\nexport { GpuEncoderSystem } from './rendering/renderers/gpu/GpuEncoderSystem.mjs';\nexport { GpuLimitsSystem } from './rendering/renderers/gpu/GpuLimitsSystem.mjs';\nexport { GpuStencilSystem } from './rendering/renderers/gpu/GpuStencilSystem.mjs';\nexport { GpuUboSystem } from './rendering/renderers/gpu/GpuUboSystem.mjs';\nexport { GpuUniformBatchPipe } from './rendering/renderers/gpu/GpuUniformBatchPipe.mjs';\nexport { PipelineSystem } from './rendering/renderers/gpu/pipeline/PipelineSystem.mjs';\nexport { calculateProjection } from './rendering/renderers/gpu/renderTarget/calculateProjection.mjs';\nexport { GpuRenderTarget } from './rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs';\nexport { GpuRenderTargetAdaptor } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs';\nexport { GpuRenderTargetSystem } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs';\nexport { BindGroup } from './rendering/renderers/gpu/shader/BindGroup.mjs';\nexport { GpuProgram } from './rendering/renderers/gpu/shader/GpuProgram.mjs';\nexport { GpuShaderSystem } from './rendering/renderers/gpu/shader/GpuShaderSystem.mjs';\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL } from './rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs';\nexport { createUboSyncFunctionWGSL } from './rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs';\nexport { extractAttributesFromGpuProgram } from './rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs';\nexport { extractStructAndGroups } from './rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs';\nexport { generateArraySyncWGSL } from './rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs';\nexport { generateGpuLayoutGroups } from './rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs';\nexport { generateLayoutHash } from './rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs';\nexport { removeStructAndGroupDuplicates } from './rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs';\nexport { GpuBlendModesToPixi } from './rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs';\nexport { GpuStateSystem } from './rendering/renderers/gpu/state/GpuStateSystem.mjs';\nexport { GpuStencilModesToPixi } from './rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs';\nexport { GpuTextureSystem } from './rendering/renderers/gpu/texture/GpuTextureSystem.mjs';\nexport { gpuUploadBufferImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs';\nexport { blockDataMap, gpuUploadCompressedTextureResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs';\nexport { gpuUploadImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs';\nexport { gpuUploadVideoResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs';\nexport { getSupportedGPUCompressedTextureFormats } from './rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.mjs';\nexport { GpuMipmapGenerator } from './rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs';\nexport { WebGPURenderer } from './rendering/renderers/gpu/WebGPURenderer.mjs';\nexport { BackgroundSystem } from './rendering/renderers/shared/background/BackgroundSystem.mjs';\nexport { BlendModePipe } from './rendering/renderers/shared/blendModes/BlendModePipe.mjs';\nexport { Buffer } from './rendering/renderers/shared/buffer/Buffer.mjs';\nexport { BufferResource } from './rendering/renderers/shared/buffer/BufferResource.mjs';\nexport { BufferUsage } from './rendering/renderers/shared/buffer/const.mjs';\nexport { fastCopy } from './rendering/renderers/shared/buffer/utils/fastCopy.mjs';\nexport { ExtractSystem } from './rendering/renderers/shared/extract/ExtractSystem.mjs';\nexport { GenerateTextureSystem } from './rendering/renderers/shared/extract/GenerateTextureSystem.mjs';\nexport { DRAW_MODES } from './rendering/renderers/shared/geometry/const.mjs';\nexport { Geometry } from './rendering/renderers/shared/geometry/Geometry.mjs';\nexport { buildSimpleUvs, buildUvs } from './rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nexport { ensureIsBuffer } from './rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs';\nexport { getAttributeInfoFromFormat } from './rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nexport { getGeometryBounds } from './rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs';\nexport { transformVertices } from './rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nexport { InstructionSet } from './rendering/renderers/shared/instructions/InstructionSet.mjs';\nexport { GlobalUniformSystem } from './rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs';\nexport { isRenderingToScreen } from './rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs';\nexport { RenderTarget } from './rendering/renderers/shared/renderTarget/RenderTarget.mjs';\nexport { RenderTargetSystem } from './rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs';\nexport { SchedulerSystem } from './rendering/renderers/shared/SchedulerSystem.mjs';\nexport { ShaderStage } from './rendering/renderers/shared/shader/const.mjs';\nexport { Shader } from './rendering/renderers/shared/shader/Shader.mjs';\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './rendering/renderers/shared/shader/types.mjs';\nexport { UboSystem } from './rendering/renderers/shared/shader/UboSystem.mjs';\nexport { UniformGroup } from './rendering/renderers/shared/shader/UniformGroup.mjs';\nexport { createUboSyncFunction } from './rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs';\nexport { getDefaultUniformValue } from './rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs';\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL } from './rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs';\nexport { uniformParsers } from './rendering/renderers/shared/shader/utils/uniformParsers.mjs';\nexport { HelloSystem } from './rendering/renderers/shared/startup/HelloSystem.mjs';\nexport { BLEND_TO_NPM, STENCIL_MODES } from './rendering/renderers/shared/state/const.mjs';\nexport { getAdjustedBlendModeBlend } from './rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nexport { State } from './rendering/renderers/shared/state/State.mjs';\nexport { AbstractRenderer } from './rendering/renderers/shared/system/AbstractRenderer.mjs';\nexport { SharedRenderPipes, SharedSystems } from './rendering/renderers/shared/system/SharedSystems.mjs';\nexport { SystemRunner } from './rendering/renderers/shared/system/SystemRunner.mjs';\nexport { CanvasPool, CanvasPoolClass } from './rendering/renderers/shared/texture/CanvasPool.mjs';\nexport { DEPRECATED_SCALE_MODES, DEPRECATED_WRAP_MODES, SCALE_MODES, WRAP_MODES } from './rendering/renderers/shared/texture/const.mjs';\nexport { RenderableGCSystem } from './rendering/renderers/shared/texture/RenderableGCSystem.mjs';\nexport { RenderTexture } from './rendering/renderers/shared/texture/RenderTexture.mjs';\nexport { BufferImageSource } from './rendering/renderers/shared/texture/sources/BufferImageSource.mjs';\nexport { CanvasSource } from './rendering/renderers/shared/texture/sources/CanvasSource.mjs';\nexport { CompressedSource } from './rendering/renderers/shared/texture/sources/CompressedSource.mjs';\nexport { ImageSource } from './rendering/renderers/shared/texture/sources/ImageSource.mjs';\nexport { TextureSource } from './rendering/renderers/shared/texture/sources/TextureSource.mjs';\nexport { VideoSource } from './rendering/renderers/shared/texture/sources/VideoSource.mjs';\nexport { Texture } from './rendering/renderers/shared/texture/Texture.mjs';\nexport { TextureGCSystem } from './rendering/renderers/shared/texture/TextureGCSystem.mjs';\nexport { TextureMatrix } from './rendering/renderers/shared/texture/TextureMatrix.mjs';\nexport { TexturePool, TexturePoolClass } from './rendering/renderers/shared/texture/TexturePool.mjs';\nexport { TextureStyle } from './rendering/renderers/shared/texture/TextureStyle.mjs';\nexport { TextureUvs } from './rendering/renderers/shared/texture/TextureUvs.mjs';\nexport { getCanvasTexture, hasCachedCanvasTexture } from './rendering/renderers/shared/texture/utils/getCanvasTexture.mjs';\nexport { getSupportedCompressedTextureFormats } from './rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.mjs';\nexport { getSupportedTextureFormats, nonCompressedFormats } from './rendering/renderers/shared/texture/utils/getSupportedTextureFormats.mjs';\nexport { autoDetectSource, resourceToTexture, textureFrom } from './rendering/renderers/shared/texture/utils/textureFrom.mjs';\nexport { createIdFromString } from './rendering/renderers/shared/utils/createIdFromString.mjs';\nexport { parseFunctionBody } from './rendering/renderers/shared/utils/parseFunctionBody.mjs';\nexport { ViewSystem } from './rendering/renderers/shared/view/ViewSystem.mjs';\nexport { RendererType } from './rendering/renderers/types.mjs';\nexport { default as particlesFrag } from './scene/particle-container/shared/shader/particles.frag.mjs';\nexport { default as particlesVert } from './scene/particle-container/shared/shader/particles.vert.mjs';\nexport { default as particlesWgsl } from './scene/particle-container/shared/shader/particles.wgsl.mjs';\nexport { Bounds } from './scene/container/bounds/Bounds.mjs';\nexport { getFastGlobalBounds } from './scene/container/bounds/getFastGlobalBounds.mjs';\nexport { getGlobalBounds, updateTransformBackwards } from './scene/container/bounds/getGlobalBounds.mjs';\nexport { getLocalBounds } from './scene/container/bounds/getLocalBounds.mjs';\nexport { getGlobalRenderableBounds } from './scene/container/bounds/getRenderableBounds.mjs';\nexport { boundsPool, matrixPool } from './scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nexport { cacheAsTextureMixin } from './scene/container/container-mixins/cacheAsTextureMixin.mjs';\nexport { childrenHelperMixin } from './scene/container/container-mixins/childrenHelperMixin.mjs';\nexport { collectRenderablesMixin } from './scene/container/container-mixins/collectRenderablesMixin.mjs';\nexport { effectsMixin } from './scene/container/container-mixins/effectsMixin.mjs';\nexport { findMixin } from './scene/container/container-mixins/findMixin.mjs';\nexport { getFastGlobalBoundsMixin } from './scene/container/container-mixins/getFastGlobalBoundsMixin.mjs';\nexport { bgr2rgb, getGlobalMixin } from './scene/container/container-mixins/getGlobalMixin.mjs';\nexport { measureMixin } from './scene/container/container-mixins/measureMixin.mjs';\nexport { onRenderMixin } from './scene/container/container-mixins/onRenderMixin.mjs';\nexport { sortMixin } from './scene/container/container-mixins/sortMixin.mjs';\nexport { toLocalGlobalMixin } from './scene/container/container-mixins/toLocalGlobalMixin.mjs';\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE } from './scene/container/Container.mjs';\nexport { CustomRenderPipe } from './scene/container/CustomRenderPipe.mjs';\nexport { RenderContainer } from './scene/container/RenderContainer.mjs';\nexport { RenderGroup } from './scene/container/RenderGroup.mjs';\nexport { RenderGroupPipe } from './scene/container/RenderGroupPipe.mjs';\nexport { RenderGroupSystem } from './scene/container/RenderGroupSystem.mjs';\nexport { assignWithIgnore } from './scene/container/utils/assignWithIgnore.mjs';\nexport { checkChildrenDidChange } from './scene/container/utils/checkChildrenDidChange.mjs';\nexport { clearList } from './scene/container/utils/clearList.mjs';\nexport { collectAllRenderables } from './scene/container/utils/collectAllRenderables.mjs';\nexport { definedProps } from './scene/container/utils/definedProps.mjs';\nexport { executeInstructions } from './scene/container/utils/executeInstructions.mjs';\nexport { multiplyColors } from './scene/container/utils/multiplyColors.mjs';\nexport { multiplyHexColors } from './scene/container/utils/multiplyHexColors.mjs';\nexport { updateLocalTransform } from './scene/container/utils/updateLocalTransform.mjs';\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren } from './scene/container/utils/updateRenderGroupTransforms.mjs';\nexport { updateWorldTransform } from './scene/container/utils/updateWorldTransform.mjs';\nexport { validateRenderables } from './scene/container/utils/validateRenderables.mjs';\nexport { GlGraphicsAdaptor } from './scene/graphics/gl/GlGraphicsAdaptor.mjs';\nexport { color32BitToUniform, colorToUniform } from './scene/graphics/gpu/colorToUniform.mjs';\nexport { GpuGraphicsAdaptor } from './scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nexport { BatchableGraphics } from './scene/graphics/shared/BatchableGraphics.mjs';\nexport { buildAdaptiveBezier } from './scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs';\nexport { buildAdaptiveQuadratic } from './scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs';\nexport { buildArc } from './scene/graphics/shared/buildCommands/buildArc.mjs';\nexport { buildArcTo } from './scene/graphics/shared/buildCommands/buildArcTo.mjs';\nexport { buildArcToSvg } from './scene/graphics/shared/buildCommands/buildArcToSvg.mjs';\nexport { buildCircle, buildEllipse, buildRoundedRectangle } from './scene/graphics/shared/buildCommands/buildCircle.mjs';\nexport { buildLine } from './scene/graphics/shared/buildCommands/buildLine.mjs';\nexport { buildPixelLine } from './scene/graphics/shared/buildCommands/buildPixelLine.mjs';\nexport { buildPolygon } from './scene/graphics/shared/buildCommands/buildPolygon.mjs';\nexport { buildRectangle } from './scene/graphics/shared/buildCommands/buildRectangle.mjs';\nexport { buildTriangle } from './scene/graphics/shared/buildCommands/buildTriangle.mjs';\nexport { closePointEps, curveEps } from './scene/graphics/shared/const.mjs';\nexport { FillGradient } from './scene/graphics/shared/fill/FillGradient.mjs';\nexport { FillPattern } from './scene/graphics/shared/fill/FillPattern.mjs';\nexport { Graphics } from './scene/graphics/shared/Graphics.mjs';\nexport { GraphicsContext } from './scene/graphics/shared/GraphicsContext.mjs';\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem } from './scene/graphics/shared/GraphicsContextSystem.mjs';\nexport { GraphicsGpuData, GraphicsPipe } from './scene/graphics/shared/GraphicsPipe.mjs';\nexport { GraphicsPath } from './scene/graphics/shared/path/GraphicsPath.mjs';\nexport { roundedShapeArc, roundedShapeQuadraticCurve } from './scene/graphics/shared/path/roundShape.mjs';\nexport { ShapePath } from './scene/graphics/shared/path/ShapePath.mjs';\nexport { parseSVGDefinitions } from './scene/graphics/shared/svg/parseSVGDefinitions.mjs';\nexport { parseSVGFloatAttribute } from './scene/graphics/shared/svg/parseSVGFloatAttribute.mjs';\nexport { parseSVGPath } from './scene/graphics/shared/svg/parseSVGPath.mjs';\nexport { parseSVGStyle, styleAttributes } from './scene/graphics/shared/svg/parseSVGStyle.mjs';\nexport { SVGParser } from './scene/graphics/shared/svg/SVGParser.mjs';\nexport { extractSvgUrlId } from './scene/graphics/shared/svg/utils/extractSvgUrlId.mjs';\nexport { checkForNestedPattern, getFillInstructionData } from './scene/graphics/shared/svg/utils/fillOperations.mjs';\nexport { appendSVGPath, calculatePathArea, extractSubpaths } from './scene/graphics/shared/svg/utils/pathOperations.mjs';\nexport { buildContextBatches, shapeBuilders } from './scene/graphics/shared/utils/buildContextBatches.mjs';\nexport { buildGeometryFromPath } from './scene/graphics/shared/utils/buildGeometryFromPath.mjs';\nexport { toFillStyle, toStrokeStyle } from './scene/graphics/shared/utils/convertFillInputToFillStyle.mjs';\nexport { generateTextureMatrix } from './scene/graphics/shared/utils/generateTextureFillMatrix.mjs';\nexport { getOrientationOfPoints } from './scene/graphics/shared/utils/getOrientationOfPoints.mjs';\nexport { triangulateWithHoles } from './scene/graphics/shared/utils/triangulateWithHoles.mjs';\nexport { RenderLayer } from './scene/layers/RenderLayer.mjs';\nexport { PerspectiveMesh } from './scene/mesh-perspective/PerspectiveMesh.mjs';\nexport { PerspectivePlaneGeometry } from './scene/mesh-perspective/PerspectivePlaneGeometry.mjs';\nexport { applyProjectiveTransformationToPlane } from './scene/mesh-perspective/utils/applyProjectiveTransformationToPlane.mjs';\nexport { compute2DProjection } from './scene/mesh-perspective/utils/compute2DProjections.mjs';\nexport { MeshPlane } from './scene/mesh-plane/MeshPlane.mjs';\nexport { PlaneGeometry } from './scene/mesh-plane/PlaneGeometry.mjs';\nexport { MeshRope } from './scene/mesh-simple/MeshRope.mjs';\nexport { MeshSimple } from './scene/mesh-simple/MeshSimple.mjs';\nexport { RopeGeometry } from './scene/mesh-simple/RopeGeometry.mjs';\nexport { GlMeshAdaptor } from './scene/mesh/gl/GlMeshAdaptor.mjs';\nexport { GpuMeshAdapter } from './scene/mesh/gpu/GpuMeshAdapter.mjs';\nexport { BatchableMesh } from './scene/mesh/shared/BatchableMesh.mjs';\nexport { getTextureDefaultMatrix } from './scene/mesh/shared/getTextureDefaultMatrix.mjs';\nexport { Mesh } from './scene/mesh/shared/Mesh.mjs';\nexport { MeshGeometry } from './scene/mesh/shared/MeshGeometry.mjs';\nexport { MeshGpuData, MeshPipe } from './scene/mesh/shared/MeshPipe.mjs';\nexport { GlParticleContainerAdaptor } from './scene/particle-container/gl/GlParticleContainerAdaptor.mjs';\nexport { GpuParticleContainerAdaptor } from './scene/particle-container/gpu/GpuParticleContainerAdaptor.mjs';\nexport { GlParticleContainerPipe } from './scene/particle-container/shared/GlParticleContainerPipe.mjs';\nexport { GpuParticleContainerPipe } from './scene/particle-container/shared/GpuParticleContainerPipe.mjs';\nexport { Particle } from './scene/particle-container/shared/Particle.mjs';\nexport { ParticleBuffer } from './scene/particle-container/shared/ParticleBuffer.mjs';\nexport { ParticleContainer } from './scene/particle-container/shared/ParticleContainer.mjs';\nexport { ParticleContainerPipe } from './scene/particle-container/shared/ParticleContainerPipe.mjs';\nexport { particleData } from './scene/particle-container/shared/particleData.mjs';\nexport { ParticleShader } from './scene/particle-container/shared/shader/ParticleShader.mjs';\nexport { createIndicesForQuads } from './scene/particle-container/shared/utils/createIndicesForQuads.mjs';\nexport { generateParticleUpdateFunction } from './scene/particle-container/shared/utils/generateParticleUpdateFunction.mjs';\nexport { AnimatedSprite } from './scene/sprite-animated/AnimatedSprite.mjs';\nexport { NineSliceGeometry } from './scene/sprite-nine-slice/NineSliceGeometry.mjs';\nexport { NineSlicePlane, NineSliceSprite } from './scene/sprite-nine-slice/NineSliceSprite.mjs';\nexport { NineSliceSpriteGpuData, NineSliceSpritePipe } from './scene/sprite-nine-slice/NineSliceSpritePipe.mjs';\nexport { tilingBit, tilingBitGl } from './scene/sprite-tiling/shader/tilingBit.mjs';\nexport { TilingSpriteShader } from './scene/sprite-tiling/shader/TilingSpriteShader.mjs';\nexport { TilingSprite } from './scene/sprite-tiling/TilingSprite.mjs';\nexport { TilingSpriteGpuData, TilingSpritePipe } from './scene/sprite-tiling/TilingSpritePipe.mjs';\nexport { applyMatrix } from './scene/sprite-tiling/utils/applyMatrix.mjs';\nexport { QuadGeometry } from './scene/sprite-tiling/utils/QuadGeometry.mjs';\nexport { setPositions } from './scene/sprite-tiling/utils/setPositions.mjs';\nexport { setUvs } from './scene/sprite-tiling/utils/setUvs.mjs';\nexport { BatchableSprite } from './scene/sprite/BatchableSprite.mjs';\nexport { Sprite } from './scene/sprite/Sprite.mjs';\nexport { SpritePipe } from './scene/sprite/SpritePipe.mjs';\nexport { AbstractBitmapFont } from './scene/text-bitmap/AbstractBitmapFont.mjs';\nexport { bitmapFontTextParser } from './scene/text-bitmap/asset/bitmapFontTextParser.mjs';\nexport { bitmapFontXMLParser } from './scene/text-bitmap/asset/bitmapFontXMLParser.mjs';\nexport { bitmapFontXMLStringParser } from './scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs';\nexport { bitmapFontCachePlugin, loadBitmapFont } from './scene/text-bitmap/asset/loadBitmapFont.mjs';\nexport { BitmapFont } from './scene/text-bitmap/BitmapFont.mjs';\nexport { BitmapFontManager } from './scene/text-bitmap/BitmapFontManager.mjs';\nexport { BitmapText } from './scene/text-bitmap/BitmapText.mjs';\nexport { BitmapTextGraphics, BitmapTextPipe } from './scene/text-bitmap/BitmapTextPipe.mjs';\nexport { DynamicBitmapFont } from './scene/text-bitmap/DynamicBitmapFont.mjs';\nexport { bitmapTextSplit } from './scene/text-bitmap/utils/bitmapTextSplit.mjs';\nexport { getBitmapTextLayout } from './scene/text-bitmap/utils/getBitmapTextLayout.mjs';\nexport { resolveCharacters } from './scene/text-bitmap/utils/resolveCharacters.mjs';\nexport { BatchableHTMLText } from './scene/text-html/BatchableHTMLText.mjs';\nexport { HTMLText } from './scene/text-html/HTMLText.mjs';\nexport { HTMLTextPipe } from './scene/text-html/HTMLTextPipe.mjs';\nexport { HTMLTextRenderData } from './scene/text-html/HTMLTextRenderData.mjs';\nexport { HTMLTextStyle } from './scene/text-html/HTMLTextStyle.mjs';\nexport { HTMLTextSystem } from './scene/text-html/HTMLTextSystem.mjs';\nexport { extractFontFamilies } from './scene/text-html/utils/extractFontFamilies.mjs';\nexport { FontStylePromiseCache, getFontCss } from './scene/text-html/utils/getFontCss.mjs';\nexport { getSVGUrl } from './scene/text-html/utils/getSVGUrl.mjs';\nexport { getTemporaryCanvasFromImage } from './scene/text-html/utils/getTemporaryCanvasFromImage.mjs';\nexport { loadFontAsBase64 } from './scene/text-html/utils/loadFontAsBase64.mjs';\nexport { loadFontCSS } from './scene/text-html/utils/loadFontCSS.mjs';\nexport { loadSVGImage } from './scene/text-html/utils/loadSVGImage.mjs';\nexport { measureHtmlText } from './scene/text-html/utils/measureHtmlText.mjs';\nexport { textStyleToCSS } from './scene/text-html/utils/textStyleToCSS.mjs';\nexport { AbstractSplitText } from './scene/text-split/AbstractSplitText.mjs';\nexport { SplitBitmapText } from './scene/text-split/SplitBitmapText.mjs';\nexport { SplitText } from './scene/text-split/SplitText.mjs';\nexport { AbstractText, ensureTextOptions } from './scene/text/AbstractText.mjs';\nexport { BatchableText } from './scene/text/canvas/BatchableText.mjs';\nexport { CanvasTextGenerator } from './scene/text/canvas/CanvasTextGenerator.mjs';\nexport { CanvasTextMetrics } from './scene/text/canvas/CanvasTextMetrics.mjs';\nexport { CanvasTextPipe } from './scene/text/canvas/CanvasTextPipe.mjs';\nexport { CanvasTextSystem } from './scene/text/canvas/CanvasTextSystem.mjs';\nexport { fontStringFromTextStyle } from './scene/text/canvas/utils/fontStringFromTextStyle.mjs';\nexport { getCanvasFillStyle } from './scene/text/canvas/utils/getCanvasFillStyle.mjs';\nexport { SdfShader } from './scene/text/sdfShader/SdfShader.mjs';\nexport { localUniformMSDFBit, localUniformMSDFBitGl } from './scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs';\nexport { mSDFBit, mSDFBitGl } from './scene/text/sdfShader/shader-bits/mSDFBit.mjs';\nexport { Text } from './scene/text/Text.mjs';\nexport { TextStyle } from './scene/text/TextStyle.mjs';\nexport { canvasTextSplit } from './scene/text/utils/canvasTextSplit.mjs';\nexport { generateTextStyleKey } from './scene/text/utils/generateTextStyleKey.mjs';\nexport { getPo2TextureFromSource } from './scene/text/utils/getPo2TextureFromSource.mjs';\nexport { updateTextBounds } from './scene/text/utils/updateTextBounds.mjs';\nexport { ViewContainer } from './scene/view/ViewContainer.mjs';\nexport { Spritesheet } from './spritesheet/Spritesheet.mjs';\nexport { spritesheetAsset } from './spritesheet/spritesheetAsset.mjs';\nexport { UPDATE_PRIORITY } from './ticker/const.mjs';\nexport { Ticker } from './ticker/Ticker.mjs';\nexport { TickerListener } from './ticker/TickerListener.mjs';\nexport { detectVideoAlphaMode } from './utils/browser/detectVideoAlphaMode.mjs';\nexport { isMobile } from './utils/browser/isMobile.mjs';\nexport { isSafari } from './utils/browser/isSafari.mjs';\nexport { isWebGLSupported } from './utils/browser/isWebGLSupported.mjs';\nexport { isWebGPUSupported } from './utils/browser/isWebGPUSupported.mjs';\nexport { unsafeEvalSupported } from './utils/browser/unsafeEvalSupported.mjs';\nexport { getCanvasBoundingBox } from './utils/canvas/getCanvasBoundingBox.mjs';\nexport { DATA_URI, VERSION } from './utils/const.mjs';\nexport { default as EventEmitter } from 'eventemitter3';\nexport { cleanArray, cleanHash } from './utils/data/clean.mjs';\nexport { removeItems } from './utils/data/removeItems.mjs';\nexport { resetUids, uid } from './utils/data/uid.mjs';\nexport { updateQuadBounds } from './utils/data/updateQuadBounds.mjs';\nexport { ViewableBuffer } from './utils/data/ViewableBuffer.mjs';\nexport { ApplicationInitHook, RendererInitHook } from './utils/global/globalHooks.mjs';\nexport { deprecation, v8_0_0, v8_3_4 } from './utils/logging/deprecation.mjs';\nexport { logDebugTexture } from './utils/logging/logDebugTexture.mjs';\nexport { logRenderGroupScene, logScene } from './utils/logging/logScene.mjs';\nexport { warn } from './utils/logging/warn.mjs';\nexport { NOOP } from './utils/misc/NOOP.mjs';\nexport { Transform } from './utils/misc/Transform.mjs';\nexport { getResolutionOfUrl } from './utils/network/getResolutionOfUrl.mjs';\nexport { path } from './utils/path.mjs';\nexport { GlobalResourceRegistry } from './utils/pool/GlobalResourceRegistry.mjs';\nexport { Pool } from './utils/pool/Pool.mjs';\nexport { BigPool, PoolGroupClass } from './utils/pool/PoolGroup.mjs';\nexport { sayHello } from './utils/sayHello.mjs';\nexport { earcut } from './utils/utils.mjs';\n\n\"use strict\";\nextensions.add(browserExt, webworkerExt);\n\nexport { browserExt, extensions, webworkerExt };\n//# sourceMappingURL=index.mjs.map\n","import { Timeline } from \"./Timeline.js\";\r\nimport { binarySearch } from \"../Utils.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class TimelineDragWindow {\r\n    isDragging = false;\r\n    obj;\r\n    graphics;\r\n    dragWindow;\r\n\r\n    startTimestamp;\r\n    endTimestamp;\r\n\r\n    isObjectSelecting = false;\r\n\r\n    currentX = null;\r\n\r\n    checkObjectsInWindow() {\r\n        const selectedList = [];\r\n\r\n        if (this.startTimestamp && this.endTimestamp) {\r\n            const objList = Game.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList;\r\n            const compareFunc = (element, _) => {\r\n                let startTime = this.startTimestamp;\r\n                let endTime = this.endTimestamp;\r\n\r\n                if (startTime > endTime) {\r\n                    endTime = startTime;\r\n                    startTime = this.endTimestamp;\r\n                }\r\n\r\n                if (element.obj.endTime < startTime) return -1;\r\n                if (element.obj.time > endTime) return 1;\r\n                return 0;\r\n            };\r\n            const foundIndex = binarySearch(objList, null, compareFunc);\r\n\r\n            if (foundIndex !== -1) {\r\n                let start = foundIndex - 1;\r\n                let end = foundIndex + 1;\r\n\r\n                while (start >= 0 && compareFunc(objList[start], null) === 0) {\r\n                    selectedList.push(objList[start]);\r\n                    start--;\r\n                }\r\n\r\n                selectedList.reverse();\r\n                selectedList.push(objList[foundIndex]);\r\n\r\n                while (end <= objList.length - 1 && compareFunc(objList[end], null) === 0) {\r\n                    selectedList.push(objList[end]);\r\n                    end++;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!this.isObjectSelecting) Game.SELECTED = selectedList.map((o) => o.obj.time);\r\n    }\r\n\r\n    constructor() {\r\n        this.obj = new PIXI.Container();\r\n        this.obj.eventMode = \"static\";\r\n\r\n        this.graphics = new PIXI.Graphics().rect(0, 0, Timeline.WIDTH, Timeline.HEIGHT).fill({ color: 0xffffff, alpha: 0.01} );\r\n        this.graphics.zIndex = -1;\r\n        // this.obj.interactive = true;\r\n\r\n        this.dragWindow = new PIXI.Graphics().rect(0, 0, 0, 0);\r\n        this.dragWindow.zIndex = -1;\r\n\r\n        this.obj.addChild(this.graphics, this.dragWindow);\r\n\r\n        this.obj.on(\"mousedown\", (e) => {\r\n            if (!Game.BEATMAP_FILE) return;\r\n            if (this.isObjectSelecting) return;\r\n\r\n            const { x, y } = this.obj.toLocal(e.global);\r\n            const center = Timeline.WIDTH / 2;\r\n            const currentTime = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\r\n            this.startTimestamp = currentTime - ((center - x) / Timeline.ZOOM_DISTANCE) * 500;\r\n            this.isDragging = true;\r\n        });\r\n\r\n        this.obj.on(\"mousemove\", (e) => this.handleDraggingEvent(e));\r\n        this.obj.on(\"wheel\", (e) => this.handleDraggingEvent(e));\r\n\r\n        this.obj.on(\"mouseup\", (e) => this.handleEndEvent(e));\r\n        this.obj.on(\"touchstart\", (e) => this.handleEndEvent(e));\r\n        this.obj.on(\"mouseleave\", (e) => this.handleLeaveEvent(e));\r\n    }\r\n\r\n    clearAll() {\r\n        this.obj.removeChild(this.graphics)\r\n        this.obj.removeChild(this.dragWindow);\r\n\r\n        const children = this.obj.removeChildren();\r\n\r\n        children.forEach((child) => {\r\n            child.destroy();\r\n        })\r\n        \r\n        this.obj.addChild(this.graphics, this.dragWindow);\r\n    }\r\n\r\n    handleDraggingEvent(e) {\r\n        if (!this.isDragging) return;\r\n\r\n        const { x, y } = this.obj.toLocal(e.global);\r\n        const center = Timeline.WIDTH / 2;\r\n        const currentTime = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\r\n        this.endTimestamp = currentTime - ((center - x) / Timeline.ZOOM_DISTANCE) * 500;\r\n        this.currentX = x;\r\n\r\n        this.checkObjectsInWindow();\r\n    }\r\n\r\n    handleEndEvent(e) {\r\n        this.checkObjectsInWindow();\r\n\r\n        this.startTimestamp = null;\r\n        this.endTimestamp = null;\r\n\r\n        this.isObjectSelecting = false;\r\n\r\n        this.isDragging = false;\r\n        this.currentX = -1;\r\n    }\r\n\r\n    handleLeaveEvent(e) {\r\n        if (!this.isDragging) return;\r\n        this.checkObjectsInWindow();\r\n\r\n        this.startTimestamp = null;\r\n        this.endTimestamp = null;\r\n\r\n        this.isObjectSelecting = false;\r\n\r\n        this.isDragging = false;\r\n        this.currentX = -1;\r\n    }\r\n\r\n    resize() {\r\n        this.graphics.clear().rect(0, 0, Timeline.WIDTH, Timeline.HEIGHT).fill({ color: 0xffffff, alpha: 0.01 });\r\n    }\r\n\r\n    draw(timestamp) {\r\n        if (!this.startTimestamp || !this.endTimestamp) {\r\n            this.dragWindow.clear();\r\n            return;\r\n        }\r\n\r\n        const center = Timeline.WIDTH / 2;\r\n\r\n        if (this.isDragging && this.currentX) {\r\n            this.endTimestamp = timestamp - ((center - this.currentX) / Timeline.ZOOM_DISTANCE) * 500;\r\n            this.checkObjectsInWindow();\r\n        }\r\n\r\n        let startTime = this.startTimestamp;\r\n        let endTime = this.endTimestamp;\r\n\r\n        if (startTime > endTime) {\r\n            endTime = startTime;\r\n            startTime = this.endTimestamp;\r\n        }\r\n\r\n        const deltaStart = timestamp - startTime;\r\n        const deltaEnd = timestamp - endTime;\r\n\r\n        const xStart = Math.max(center - (deltaStart / 500) * Timeline.ZOOM_DISTANCE, 0);\r\n        const xEnd = center - (deltaEnd / 500) * Timeline.ZOOM_DISTANCE;\r\n\r\n        this.dragWindow\r\n            .clear()\r\n            .rect(xStart, 0, xEnd - xStart, Timeline.HEIGHT)\r\n            .fill({ color: 0xffffff, alpha: 0.2 });\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\n\r\nexport class Component {\r\n    masterContainer;\r\n    container;\r\n    mask;\r\n    paddingMask;\r\n\r\n    constructor(x, y, w, h, color = 0x000000, alpha = 0, borderRadius = 0) {\r\n        this._x = x;\r\n        this._y = y;\r\n        this._w = w;\r\n        this._h = h;\r\n        this._borderRadius = borderRadius;\r\n        this._color = color;\r\n        this._alpha = alpha;\r\n        this._padding = 0;\r\n        this._borderBox = true;\r\n        this._overflow = \"hidden\";\r\n\r\n        this.masterContainer = new PIXI.Container();\r\n        this.masterContainer.x = this._x;\r\n        this.masterContainer.y = this._y;\r\n\r\n        this.paddingMask = new PIXI.Graphics();\r\n        this.masterContainer.addChild(this.paddingMask);\r\n        this.masterContainer.mask = this.paddingMask;\r\n\r\n        this.background = new PIXI.Graphics();\r\n        this.masterContainer.addChild(this.background);\r\n\r\n        this.container = new PIXI.Container();\r\n        this.container.x = this._padding;\r\n        this.container.y = this._padding;\r\n\r\n        this.mask = new PIXI.Graphics();\r\n        this.container.addChild(this.mask);\r\n        this.container.mask = this.mask;\r\n\r\n        this.container.eventMode = \"static\";\r\n\r\n        this.masterContainer.addChild(this.container);\r\n        this.masterContainer.eventMode = \"static\";\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(val) {\r\n        if (val === this._x) return;\r\n        this._x = val;\r\n        this.updatePosition();\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(val) {\r\n        if (val === this._y) return;\r\n        this._y = val;\r\n        this.updatePosition();\r\n    }\r\n\r\n    get w() {\r\n        return this._w;\r\n    }\r\n\r\n    set w(val) {\r\n        if (val === this._w) return;\r\n\r\n        this._w = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get h() {\r\n        return this._h;\r\n    }\r\n\r\n    set h(val) {\r\n        if (val === this._h) return;\r\n\r\n        this._h = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get borderRadius() {\r\n        return this._borderRadius ;\r\n    }\r\n\r\n    set borderRadius(val) {\r\n        if (val === this._borderRadius) return;\r\n\r\n        this._borderRadius = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get padding() {\r\n        return this._padding ;\r\n    }\r\n\r\n    set padding(val) {\r\n        if (val === this._padding) return;\r\n        this._padding = val;\r\n\r\n        this.updatePosition();\r\n        this.redraw();\r\n    }\r\n\r\n    get borderBox() {\r\n        return this._borderBox;\r\n    }\r\n\r\n    set borderBox(val) {\r\n        if (val === this._borderBox) return;\r\n        this._borderBox = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get color() {\r\n        return this._color;\r\n    }\r\n\r\n    set color(val) {\r\n        if (val === this._color) return;\r\n\r\n        this._color = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get alpha() {\r\n        return this._alpha;\r\n    }\r\n\r\n    set alpha(val) {\r\n        if (val === this._alpha) return;\r\n\r\n        this._alpha = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get overflow() {\r\n        return this._overflow;\r\n    }\r\n\r\n    set overflow(val) {\r\n        this._overflow = val;\r\n        this.redraw();\r\n    }\r\n\r\n    resize(w, h) {\r\n        this._w = w ?? this._w;\r\n        this._h = h ?? this._h;\r\n\r\n        this.redraw();\r\n    }\r\n\r\n    updatePosition() {\r\n        this.masterContainer.x = this._x;\r\n        this.masterContainer.y = this._y;\r\n\r\n        this.container.x = this._padding;\r\n        this.container.y = this._padding;\r\n    }\r\n\r\n    redraw() {\r\n        this.container.x = this.padding;\r\n        this.container.y = this.padding;\r\n\r\n        if (this.borderBox) {\r\n            this.paddingMask.clear().roundRect(0, 0, this._w, this._h, this.borderRadius).fill({ color: 0x000000, alpha: 0.01 });\r\n            this.background.clear().roundRect(0, 0, this._w, this._h, this.borderRadius).fill({ color: this._color, alpha: this._alpha });\r\n            this.mask\r\n                .clear()\r\n                .roundRect(0, 0, this._w - this.padding * 2, this._h - this.padding * 2, 0)\r\n                .fill({ color: 0x000000, alpha: 0.01 });\r\n\r\n            if (this.overflow === \"hidden\") {\r\n                this.masterContainer.mask = this.paddingMask;\r\n                this.container.mask = this.mask;\r\n            }\r\n\r\n            if (this.overflow === \"visible\") {\r\n                this.masterContainer.mask = undefined;\r\n                this.container.mask = undefined;\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        this.paddingMask\r\n            .clear()\r\n            .roundRect(0, 0, this._w + this.padding * 2, this._h + this.padding * 2, this.borderRadius)\r\n            .fill({ color: 0x000000, alpha: 0.01 });\r\n        this.background\r\n            .clear()\r\n            .roundRect(0, 0, this._w + this.padding * 2, this._h + this.padding * 2, this.borderRadius)\r\n            .fill({ color: this._color, alpha: this._alpha });\r\n        this.mask.clear().roundRect(0, 0, this._w, this._h, 0).fill({ color: 0x000000, alpha: 0.01 });\r\n\r\n        if (this.overflow === \"hidden\") {\r\n            this.masterContainer.mask = this.paddingMask;\r\n            this.container.mask = this.mask;\r\n        }\r\n\r\n        if (this.overflow === \"visible\") {\r\n            this.masterContainer.mask = undefined;\r\n            this.container.mask = undefined;\r\n        }\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Timeline } from \"./Timeline\";\r\nimport { Clamp } from \"../Utils\";\r\nimport { Game } from \"../Game\";\r\n\r\nclass Button {\r\n    x;\r\n    y;\r\n    w;\r\n    h;\r\n\r\n    isHover = false;\r\n    container;\r\n\r\n    async init(x, y, w, h, imgURL) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.w = w;\r\n        this.h = h;\r\n\r\n        this.graphics = new PIXI.Graphics().rect(0, 0, w, h).fill(Game.COLOR_PALETTES.primary3);\r\n\r\n        this.container = new PIXI.Container();\r\n        this.container.on(\"mouseenter\", () => {\r\n            this.isHover = true;\r\n            this.draw();\r\n        });\r\n        this.container.on(\"mouseleave\", () => {\r\n            this.isHover = false;\r\n            this.draw();\r\n        });\r\n        this.container.eventMode = \"static\";\r\n\r\n        this.container.x = this.x;\r\n        this.container.y = this.y;\r\n\r\n        this.container.addChild(this.graphics);\r\n\r\n        if (imgURL) {\r\n            const texture = await PIXI.Assets.load(imgURL);\r\n            const sprite = new PIXI.Sprite(texture);\r\n            this.container.addChild(sprite);\r\n\r\n            sprite.anchor.set(0.5);\r\n            sprite.x = this.w / 2;\r\n            sprite.y = this.h / 2;\r\n\r\n            this.sprite = sprite;\r\n        }\r\n    }\r\n\r\n    constructor() {}\r\n\r\n    setOnClick(fn) {\r\n        this.container.on(\"click\", fn);\r\n        this.container.on(\"tap\", fn);\r\n    }\r\n\r\n    draw(timestamp) {\r\n        this.h = Timeline.MASTER_CONTAINER.h / 2;\r\n\r\n        this.container.x = this.x;\r\n        this.container.y = this.y === 0 ? 0 : Timeline.MASTER_CONTAINER.h / 2;\r\n\r\n        this.graphics\r\n            .clear()\r\n            .rect(0, 0, this.w , this.h)\r\n            .fill(!this.isHover ? Game.COLOR_PALETTES.primary3 : Game.COLOR_PALETTES.primary4);\r\n\r\n        if (!this.sprite) return;\r\n\r\n        this.sprite.scale.set(0.5 );\r\n        this.sprite.x = (this.w ) / 2;\r\n        this.sprite.y = this.h / 2;\r\n    }\r\n}\r\n\r\nexport class TimelineZoomer {\r\n    graphics;\r\n    zoomIn;\r\n    zoomOut;\r\n\r\n    container;\r\n\r\n    async init() {\r\n        this.graphics = new PIXI.Graphics().rect(0, 0, 40, Timeline.HEIGHT).fill(Game.COLOR_PALETTES.primary3);\r\n\r\n        this.container = new PIXI.Container();\r\n        this.container.addChild(this.graphics);\r\n\r\n        this.zoomIn = new Button();\r\n        await this.zoomIn.init(0, 0, 40, Timeline.MASTER_CONTAINER.h / 2, \"static/plus2.svg\");\r\n\r\n        this.zoomOut = new Button();\r\n        await this.zoomOut.init(0, Timeline.MASTER_CONTAINER.h / 2, 40, Timeline.MASTER_CONTAINER.h / 2, \"static/minus.svg\");\r\n\r\n        this.container.addChild(this.zoomIn.container);\r\n        this.container.addChild(this.zoomOut.container);\r\n\r\n        this.zoomIn.setOnClick(() => {\r\n            Timeline.ZOOM_DISTANCE = Clamp(Timeline.ZOOM_DISTANCE + 1 * 20, 20, 800);\r\n            \r\n            const currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n            currentLocalStorage.timeline.zoomRate = Timeline.ZOOM_DISTANCE;\r\n            localStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n            Game.WORKER.postMessage({\r\n                type: \"range\",\r\n                range: (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500 + Timeline.LOOK_AHEAD,\r\n            });\r\n        });\r\n\r\n        this.zoomOut.setOnClick(() => {\r\n            Timeline.ZOOM_DISTANCE = Clamp(Timeline.ZOOM_DISTANCE - 1 * 20, 20, 800);\r\n\r\n            const currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n            currentLocalStorage.timeline.zoomRate = Timeline.ZOOM_DISTANCE;\r\n            localStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n            Game.WORKER.postMessage({\r\n                type: \"range\",\r\n                range: (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500 + Timeline.LOOK_AHEAD,\r\n            });\r\n        });\r\n    }\r\n\r\n    constructor() {}\r\n\r\n    draw(timestamp) {\r\n        this.graphics\r\n            .clear()\r\n            .rect(0, 0, 40 , Timeline.HEIGHT)\r\n            .fill(Game.COLOR_PALETTES.primary3);\r\n        this.zoomIn.draw(timestamp);\r\n        this.zoomOut.draw(timestamp);\r\n    }\r\n}\r\n","import { Game } from \"./Game.js\";\r\nimport { Database } from \"./Database.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport {loadParallel} from \"./Utils.js\";\r\n\r\nexport class Texture {\r\n    static SELECTED;\r\n    static SELECTED_ARGON;\r\n    static FOLLOWPOINT;\r\n    static ARGON = {\r\n        DEFAULTS: null,\r\n        HIT_CIRCLE: null,\r\n        HIT_CIRCLE_OVERLAY: null,\r\n        SLIDER_B: null,\r\n        REVERSE_ARROW: null,\r\n        SLIDER_FOLLOW_CIRCLE: null,\r\n        APPROACH_CIRCLE: null,\r\n        GLOW: null\r\n    };\r\n    static LEGACY = {\r\n        DEFAULTS: null,\r\n        HIT_CIRCLE: null,\r\n        HIT_CIRCLE_OVERLAY: null,\r\n        SLIDER_B: null,\r\n        REVERSE_ARROW: null,\r\n        SLIDER_FOLLOW_CIRCLE: null,\r\n        APPROACH_CIRCLE: null,\r\n    };\r\n    static CUSTOM = {};\r\n    static SLIDER_TEXTURE;\r\n\r\n    static createSelectedHitCircle() {\r\n        return new PIXI.Graphics()\r\n        .setStrokeStyle({\r\n            width: 12,\r\n            color: 0xedab00,\r\n            alpha: 1,\r\n            cap: \"round\",\r\n            alignment: 1,\r\n        })\r\n        .arc(0, 0, 59, 0, Math.PI * 2).stroke();\r\n    }\r\n\r\n    static createHitCircle() {\r\n        const hitCircle = new PIXI.Container();\r\n\r\n        const circle_1 = new PIXI.Graphics().circle(0, 0, 59).fill(0xffffff);\r\n        const circle_2 = new PIXI.Graphics().circle(0, 0, 47).fill(0x9a9a9a);\r\n        const circle_3 = new PIXI.Graphics().circle(0, 0, 35).fill(0x2f2f2f);\r\n\r\n        hitCircle.addChild(circle_1);\r\n        hitCircle.addChild(circle_2);\r\n        hitCircle.addChild(circle_3);\r\n\r\n        return hitCircle;\r\n    }\r\n\r\n    static createHitCircleOverlay() {\r\n        return new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 4,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 1,\r\n            })\r\n            .arc(0, 0, 67, 0, Math.PI * 2).stroke();\r\n    }\r\n\r\n    static createApproachCircle() {\r\n        return new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 4,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 0,\r\n            })\r\n            .circle(0, 0, 59).stroke();\r\n    }\r\n\r\n    static createSliderBall() {\r\n        const sliderBallOutLine = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 15,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 1,\r\n            })\r\n            .arc(0, 0, 59, 0, Math.PI * 2).stroke();\r\n\r\n        const sliderBallContainer = new PIXI.Container();\r\n        sliderBallContainer.addChild(sliderBallOutLine);\r\n\r\n        return sliderBallContainer;\r\n    }\r\n\r\n    static async createSliderBallBG() {\r\n        const radius = 59;\r\n\r\n        const canvas = document.createElement(\"canvas\");\r\n        canvas.width = radius * 2;\r\n        canvas.height = radius * 2;\r\n\r\n        const ctx = canvas.getContext(\"2d\");\r\n\r\n        const gradient = ctx.createLinearGradient(0, 0, 0, radius * 2);\r\n        gradient.addColorStop(0, \"white\");\r\n        gradient.addColorStop(1, \"rgb(74, 74, 74)\");\r\n\r\n        ctx.fillStyle = gradient;\r\n        ctx.fillRect(0, 0, radius * 2, radius * 2);\r\n\r\n        const tx = await PIXI.Assets.load(canvas.toDataURL());\r\n        return tx;\r\n\r\n        // const bg = new PIXI.Graphics().beginTextureFill(tx).drawRect(0, 0, radius * 2, radius * 2).endFill();\r\n        // const cont = new PIXI.Container();\r\n        // cont.addChild(bg);\r\n\r\n        // return cont;\r\n    }\r\n\r\n    static createSliderFollowCircle() {\r\n        const graphic = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 8,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 1,\r\n            })\r\n            .circle(0, 0, 128)\r\n            .fill({ color: 0xffffff, alpha: 0.3} ).stroke()\r\n\r\n        return graphic;\r\n    }\r\n\r\n    static createGlow() {\r\n        const graphic = new PIXI.Graphics().circle(0, 0, 59).fill(0xffffff);\r\n        return graphic;\r\n    }\r\n\r\n    static async createTexture(type) {\r\n        let graphics = null;\r\n\r\n        switch (type) {\r\n            case \"SELECTED_HIT_CIRCLE\":\r\n                graphics = Texture.createSelectedHitCircle();\r\n                break;\r\n            case \"HIT_CIRCLE\":\r\n                graphics = Texture.createHitCircle();\r\n                break;\r\n            case \"HIT_CIRCLE_OVERLAY\":\r\n                graphics = Texture.createHitCircleOverlay();\r\n                break;\r\n            case \"SLIDER_BALL\":\r\n                graphics = Texture.createSliderBall();\r\n                break;\r\n            case \"SLIDER_BALL_BG\":\r\n                return await Texture.createSliderBallBG();\r\n            case \"SLIDER_FOLLOW_CIRCLE\":\r\n                graphics = Texture.createSliderFollowCircle();\r\n                break;\r\n            case \"GLOW\":\r\n                graphics = Texture.createGlow();\r\n        }\r\n\r\n        if (!graphics) return null;\r\n        const { width, height } = graphics;\r\n\r\n        const renderTexture = PIXI.RenderTexture.create({\r\n            width: width,\r\n            height: height,\r\n            antialias: true\r\n            // resolution: window.devicePixelRatio,\r\n        });\r\n\r\n        Game.APP.renderer.render({\r\n            container: graphics,\r\n            target: renderTexture,\r\n            clearColor: new PIXI.Color([0, 0, 0, 0.0]),\r\n            transform: new PIXI.Matrix(1, 0, 0, 1, width / 2, height / 2),\r\n        });\r\n\r\n        // Game.APP.renderer.framebuffer.blit();\r\n\r\n        graphics.destroy(true);\r\n\r\n        return renderTexture;\r\n    }\r\n\r\n    static async generateDefaultTextures() {\r\n        await loadParallel((loadAsync) => {\r\n            loadAsync(async () => Texture.SELECTED = {\r\n                // texture: PIXI.Texture.from(\"/static/legacy/hitcircleselect@2x.png\"),\r\n                texture: await PIXI.Assets.load(await Database.getDefaults(\"base64s\", \"hitcircleselect@2x\", \"legacy\")),\r\n                isHD: true,\r\n            })\r\n            loadAsync(async () => Texture.SELECTED_ARGON = {\r\n                texture: await Texture.createTexture(\"SELECTED_HIT_CIRCLE\"),\r\n                isHD: false,\r\n            });\r\n            loadAsync(async () => Texture.FOLLOWPOINT = {\r\n                texture: await PIXI.Assets.load(\"/static/followpoint@2x.png\"),\r\n                isHD: true\r\n            });\r\n            loadAsync(async () => Texture.ARGON.HIT_CIRCLE = {\r\n                texture: await Texture.createTexture(\"HIT_CIRCLE\"),\r\n                isHD: false,\r\n            });\r\n            loadAsync(async () => Texture.ARGON.HIT_CIRCLE_OVERLAY = {\r\n                texture: await Texture.createTexture(\"HIT_CIRCLE_OVERLAY\"),\r\n                isHD: false,\r\n            });\r\n            loadAsync(async () => {\r\n                const [ring, arrow, gradient] = await Promise.all([\r\n                    Texture.createTexture(\"SLIDER_BALL\"),\r\n                    PIXI.Assets.load(\"/static/arrow.png\"),\r\n                    Texture.createTexture(\"SLIDER_BALL_BG\")\r\n                ])\r\n\r\n                Texture.ARGON.SLIDER_B = {\r\n                    ring: {\r\n                        texture: ring,\r\n                        isHD: false,\r\n                    },\r\n                    arrow: {\r\n                        texture: arrow,\r\n                        isHD: false,\r\n                    },\r\n                    gradient: {\r\n                        texture: gradient,\r\n                        isHD: false,\r\n                    },\r\n                }\r\n            })\r\n            loadAsync(async () => {\r\n                const [arrow, ring] = await Promise.all([\r\n                    Database.getDefaults(\"base64s\", \"reversearrow@2x\", \"argon\").then(source => PIXI.Assets.load(source)),\r\n                    Database.getDefaults(\"base64s\", \"repeat-edge-piece\", \"argon\").then(source => PIXI.Assets.load(source))\r\n                ])\r\n\r\n                Texture.ARGON.REVERSE_ARROW = {\r\n                    arrow: {\r\n                        // texture: PIXI.Texture.from(\"/static/argon/reversearrow@2x.png\"),\r\n                        texture: arrow,\r\n                        isHD: true,\r\n                    },\r\n                    ring: {\r\n                        // texture: PIXI.Texture.from(\"/static/argon/repeat-edge-piece.png\"),\r\n                        texture: ring,\r\n                        isHD: false,\r\n                    },\r\n                };\r\n            })\r\n            loadAsync(async () => Texture.ARGON.SLIDER_FOLLOW_CIRCLE = {\r\n                texture: await Texture.createTexture(\"SLIDER_FOLLOW_CIRCLE\"),\r\n                isHD: false,\r\n            });\r\n            loadAsync(async () => Texture.ARGON.APPROACH_CIRCLE = {\r\n                // texture: PIXI.Texture.from(\"/static/argon/approachcircle@2x.png\"),\r\n                texture: await PIXI.Assets.load(await Database.getDefaults(\"base64s\", \"approachcircle@2x\", \"argon\")),\r\n                isHD: true,\r\n            });\r\n            loadAsync(async () => {\r\n                Texture.ARGON.DEFAULTS = await Promise.all(Array.from({ length: 10}).map(async (_, idx) => {\r\n                    return {\r\n                        // texture: PIXI.Texture.from(`static/argon/default-${idx}@2x.png`),\r\n                        texture: await PIXI.Assets.load(await Database.getDefaults(\"base64s\", `default-${idx}@2x`, \"argon\")),\r\n                        isHD: true,\r\n                    }\r\n                }));\r\n            });\r\n\r\n            loadAsync(async () => Texture.ARGON.GLOW = {\r\n                texture: await Texture.createTexture(\"GLOW\"),\r\n                isHD: false\r\n            })\r\n\r\n            const updateKeys = [\r\n                \"HIT_CIRCLE\",\r\n                \"HIT_CIRCLE_OVERLAY\",\r\n                \"SLIDER_B\",\r\n                \"SLIDER_FOLLOW_CIRCLE\",\r\n                \"REVERSE_ARROW\",\r\n                \"APPROACH_CIRCLE\",\r\n            ]\r\n\r\n            for (const key of updateKeys)\r\n                loadAsync(() => Texture.updateTextureFor(key))\r\n\r\n            loadAsync(async () => {\r\n                const LEGACY_NUM = await Promise.all(\r\n                    Array.from({length: 10}).map(async (_, idx) => {\r\n                        return {\r\n                            // texture: PIXI.Texture.from(`static/argon/default-${idx}@2x.png`),\r\n                            base64: await Database.getDefaults(\"base64s\", `default-${idx}@2x`, \"legacy\"),\r\n                            isHD: true,\r\n                        }\r\n                    })\r\n                );\r\n\r\n                await Texture.updateNumberTextures(LEGACY_NUM)\r\n            })\r\n\r\n            loadAsync(async () => Texture.BALL_SPEC = {\r\n                texture: await PIXI.Assets.load(\"static/sliderb-spec@2x.png\"),\r\n                isHD: true,\r\n            })\r\n\r\n            loadAsync(async () => Texture.BALL_ND = {\r\n                texture: await PIXI.Assets.load(\"static/sliderb-nd@2x.png\"),\r\n                isHD: true,\r\n            })\r\n        })\r\n    }\r\n\r\n    static async updateNumberTextures(arr, forIdx) {\r\n        if (forIdx) {\r\n            Texture.CUSTOM[forIdx].DEFAULTS = [];\r\n            for (const [idx, obj] of arr.entries()) {\r\n                const { base64, isHD } = obj;\r\n\r\n                Texture.CUSTOM[forIdx].DEFAULTS.push({\r\n                    texture: base64 ? await PIXI.Assets.load(base64) : await PIXI.Assets.load(`static/legacy/default-${idx}@2x.png`),\r\n                    isHD: base64 ? isHD : false,\r\n                });\r\n            }\r\n            return;\r\n        }\r\n\r\n        Texture.LEGACY.DEFAULTS = [];\r\n        for (const [idx, obj] of arr.entries()) {\r\n            const { base64, isHD } = obj;\r\n            const texture = base64 ? await PIXI.Assets.load(base64) : await PIXI.Assets.load(`static/legacy/default-${idx}@2x.png`);\r\n            \r\n            Texture.LEGACY.DEFAULTS.push({\r\n                texture,\r\n                isHD: base64 ? isHD : false,\r\n            });\r\n        }\r\n    }\r\n\r\n    static async updateTextureFor(type, base64, isHD, forIdx) {\r\n        if (forIdx && !Texture.CUSTOM[forIdx]) {\r\n            Texture.CUSTOM[forIdx] = {\r\n                DEFAULTS: null,\r\n                HIT_CIRCLE: null,\r\n                HIT_CIRCLE_OVERLAY: null,\r\n                SLIDER_B: null,\r\n                REVERSE_ARROW: null,\r\n                SLIDER_FOLLOW_CIRCLE: null,\r\n                APPROACH_CIRCLE: null,\r\n            };\r\n        }\r\n\r\n        const textureSet = forIdx ? Texture.CUSTOM[forIdx] : Texture.LEGACY;\r\n\r\n        switch (type) {\r\n            case \"HIT_CIRCLE\":\r\n                textureSet.HIT_CIRCLE = {\r\n                    // texture: base64 ? PIXI.Texture.from(base64) : PIXI.Texture.from(\"static/legacy/hitcircle@2x.png\"),\r\n                    texture: await PIXI.Assets.load(base64 ?? (await Database.getDefaults(\"base64s\", `hitcircle@2x`, \"legacy\"))),\r\n                    isHD: base64 ? isHD : true,\r\n                };\r\n                break;\r\n            case \"HIT_CIRCLE_OVERLAY\":\r\n                textureSet.HIT_CIRCLE_OVERLAY = {\r\n                    // texture: base64 ? PIXI.Texture.from(base64) : PIXI.Texture.from(\"static/legacy/hitcircleoverlay@2x.png\"),\r\n                    texture: await PIXI.Assets.load(base64 ?? (await Database.getDefaults(\"base64s\", `hitcircleoverlay@2x`, \"legacy\"))),\r\n                    isHD: base64 ? isHD : true,\r\n                };\r\n                break;\r\n            case \"SLIDER_B\":\r\n                textureSet.SLIDER_B = {\r\n                    ring: {\r\n                        // texture: base64 ? PIXI.Texture.from(base64) : PIXI.Texture.from(\"static/legacy/sliderb0@2x.png\"),\r\n                        texture: await PIXI.Assets.load(base64 ?? (await Database.getDefaults(\"base64s\", `sliderb0@2x`, \"legacy\"))),\r\n                        isHD: base64 ? isHD : true,\r\n                    },\r\n                    arrow: {\r\n                        texture: await PIXI.Assets.load(\"static/empty.png\"),\r\n                        isHD: false,\r\n                    },\r\n                    gradient: {\r\n                        texture: await PIXI.Assets.load(\"static/empty.png\"),\r\n                        isHD: false,\r\n                    },\r\n                };\r\n                break;\r\n            case \"REVERSE_ARROW\":\r\n                textureSet.REVERSE_ARROW = {\r\n                    arrow: {\r\n                        // texture: PIXI.Texture.from(base64 ?? \"static/legacy/reversearrow@2x.png\"),\r\n                        texture: await PIXI.Assets.load(base64 ?? (await Database.getDefaults(\"base64s\", `reversearrow@2x`, \"legacy\"))),\r\n                        isHD: base64 ? isHD : true,\r\n                    },\r\n                    ring: {\r\n                        texture: await PIXI.Assets.load(\"static/empty.png\"),\r\n                        isHD: false,\r\n                    },\r\n                };\r\n                break;\r\n            case \"SLIDER_FOLLOW_CIRCLE\":\r\n                textureSet.SLIDER_FOLLOW_CIRCLE = {\r\n                    // texture: PIXI.Texture.from(base64 ?? \"static/legacy/sliderfollowcircle@2x.png\"),\r\n                    texture: await PIXI.Assets.load(base64 ?? (await Database.getDefaults(\"base64s\", `sliderfollowcircle@2x`, \"legacy\"))),\r\n                    isHD: base64 ? isHD : true,\r\n                };\r\n                break;\r\n            case \"APPROACH_CIRCLE\":\r\n                textureSet.APPROACH_CIRCLE = {\r\n                    // texture: PIXI.Texture.from(base64 ?? \"static/legacy/approachcircle@2x.png\"),\r\n                    texture: await PIXI.Assets.load(base64 ?? (await Database.getDefaults(\"base64s\", `approachcircle@2x`, \"legacy\"))),\r\n                    isHD: base64 ? isHD : true,\r\n                };\r\n                break;\r\n        }\r\n    }\r\n}\r\n","const typeEnum = {\r\n    \"message\": \"/static/info.svg\",\r\n    \"warning\": \"/static/alert-triangle.svg\",\r\n    \"error\": \"/static/badge-alert.svg\",\r\n}\r\n\r\nexport class Notification {\r\n    timeout;   \r\n    dialog;\r\n    button;\r\n    autoTimeout = true;\r\n\r\n    constructor({ message, autoTimeout = true, type = \"message\"}) {\r\n        const dialog = document.createElement(\"div\");\r\n        dialog.classList.add(\"noti\", type);\r\n\r\n        const img = document.createElement(\"img\");\r\n        img.src = typeEnum[type];\r\n        img.width = 24;\r\n        img.height = 24;\r\n\r\n        const div = document.createElement(\"div\");\r\n        div.classList.add(\"notiContent\");\r\n        div.textContent = message;\r\n\r\n        const button = document.createElement(\"button\");\r\n        button.classList.add(\"notiDismiss\");\r\n\r\n        const img2 = document.createElement(\"img\");\r\n        img2.src = \"/static/close.png\";\r\n        img2.width = 24;\r\n        img2.height = 24;\r\n\r\n        button.append(img2);\r\n\r\n        dialog.append(img, div, button);\r\n        \r\n        this.dialog = dialog;\r\n        this.button = button;\r\n\r\n        if (autoTimeout === undefined) return;\r\n        this.autoTimeout = autoTimeout;\r\n    }\r\n\r\n    notify() {\r\n        document.querySelector(\".notiContainer\").append(this.dialog);\r\n        this.button.blur();\r\n\r\n        this.dialog.classList.remove(\"animationOut\");\r\n        this.dialog.classList.add(\"animationIn\");\r\n        // this.dialog.show();\r\n\r\n        const close = () => {\r\n            // this.dialog.close();\r\n\r\n            this.dialog.classList.remove(\"animationIn\");\r\n            this.dialog.classList.add(\"animationOut\");\r\n\r\n            this.dialog.onanimationend = () => {\r\n                document.querySelector(\".notiContainer\").removeChild(this.dialog);\r\n            };\r\n        };\r\n\r\n        this.timeout = setTimeout(this.autoTimeout ? close : () => {}, 2000);\r\n\r\n        this.button.addEventListener(\"click\", () => {\r\n            clearTimeout(this.timeout);\r\n            close();\r\n        });\r\n    }\r\n}\r\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = Object.freeze({\n    Linear: Object.freeze({\n        None: function (amount) {\n            return amount;\n        },\n        In: function (amount) {\n            return this.None(amount);\n        },\n        Out: function (amount) {\n            return this.None(amount);\n        },\n        InOut: function (amount) {\n            return this.None(amount);\n        },\n    }),\n    Quadratic: Object.freeze({\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    }),\n    Cubic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    }),\n    Quartic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    }),\n    Quintic: Object.freeze({\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    }),\n    Sinusoidal: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sin(((1.0 - amount) * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.sin(Math.PI * (0.5 - amount)));\n        },\n    }),\n    Exponential: Object.freeze({\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    }),\n    Circular: Object.freeze({\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    }),\n    Elastic: Object.freeze({\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    }),\n    Back: Object.freeze({\n        In: function (amount) {\n            var s = 1.70158;\n            return amount === 1 ? 1 : amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return amount === 0 ? 0 : --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    }),\n    Bounce: Object.freeze({\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    }),\n    generatePow: function (power) {\n        if (power === void 0) { power = 4; }\n        power = power < Number.EPSILON ? Number.EPSILON : power;\n        power = power > 10000 ? 10000 : power;\n        return {\n            In: function (amount) {\n                return Math.pow(amount, power);\n            },\n            Out: function (amount) {\n                return 1 - Math.pow((1 - amount), power);\n            },\n            InOut: function (amount) {\n                if (amount < 0.5) {\n                    return Math.pow((amount * 2), power) / 2;\n                }\n                return (1 - Math.pow((2 - amount * 2), power)) / 2 + 0.5;\n            },\n        };\n    },\n});\n\nvar now = function () { return performance.now(); };\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._isDynamic = false;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        // eslint-disable-next-line\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._propertiesAreSetUp = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (target, duration) {\n        if (duration === void 0) { duration = 1000; }\n        if (this._isPlaying)\n            throw new Error('Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.');\n        this._valuesEnd = target;\n        this._propertiesAreSetUp = false;\n        this._duration = duration;\n        return this;\n    };\n    Tween.prototype.duration = function (duration) {\n        if (duration === void 0) { duration = 1000; }\n        this._duration = duration;\n        return this;\n    };\n    Tween.prototype.dynamic = function (dynamic) {\n        if (dynamic === void 0) { dynamic = false; }\n        this._isDynamic = dynamic;\n        return this;\n    };\n    Tween.prototype.start = function (time, overrideStartingValues) {\n        if (time === void 0) { time = now(); }\n        if (overrideStartingValues === void 0) { overrideStartingValues = false; }\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._onEveryStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time;\n        this._startTime += this._delayTime;\n        if (!this._propertiesAreSetUp || overrideStartingValues) {\n            this._propertiesAreSetUp = true;\n            // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n            if (!this._isDynamic) {\n                var tmp = {};\n                for (var prop in this._valuesEnd)\n                    tmp[prop] = this._valuesEnd[prop];\n                this._valuesEnd = tmp;\n            }\n            this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat, overrideStartingValues);\n        }\n        return this;\n    };\n    Tween.prototype.startFromCurrentValues = function (time) {\n        return this.start(time, true);\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat, overrideStartingValues) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // Handle an array of relative values.\n                // Creates a local copy of the Array with the start value at the front\n                var temp = [startValue];\n                for (var i = 0, l = endValues.length; i < l; i += 1) {\n                    var value = this._handleRelativeValue(startValue, endValues[i]);\n                    if (isNaN(value)) {\n                        isInterpolationList = false;\n                        console.warn('Found invalid interpolation list. Skipping.');\n                        break;\n                    }\n                    temp.push(value);\n                }\n                if (isInterpolationList) {\n                    // if (_valuesStart[property] === undefined) { // handle end values only the first time. NOT NEEDED? setupProperties is now guarded by _propertiesAreSetUp.\n                    _valuesEnd[property] = temp;\n                    // }\n                }\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                var nestedObject = startValue;\n                for (var prop in nestedObject) {\n                    _valuesStart[property][prop] = nestedObject[prop];\n                }\n                // TODO? repeat nested values? And yoyo? And array values?\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {};\n                var endValues = _valuesEnd[property];\n                // If dynamic is not enabled, clone the end values instead of using the passed-in end values.\n                if (!this._isDynamic) {\n                    var tmp = {};\n                    for (var prop in endValues)\n                        tmp[prop] = endValues[prop];\n                    _valuesEnd[property] = endValues = tmp;\n                }\n                this._setupProperties(nestedObject, _valuesStart[property], endValues, _valuesStartRepeat[property], overrideStartingValues);\n            }\n            else {\n                // Save the starting value, but only once unless override is requested.\n                if (typeof _valuesStart[property] === 'undefined' || overrideStartingValues) {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        if (group === void 0) { group = mainGroup; }\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        if (amount === void 0) { amount = 0; }\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        if (times === void 0) { times = 0; }\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        if (yoyo === void 0) { yoyo = false; }\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        if (easingFunction === void 0) { easingFunction = Easing.Linear.None; }\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        if (interpolationFunction === void 0) { interpolationFunction = Interpolation.Linear; }\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    // eslint-disable-next-line\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onEveryStart = function (callback) {\n        this._onEveryStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time, true);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        if (this._onEveryStartCallbackFired === false) {\n            if (this._onEveryStartCallback) {\n                this._onEveryStartCallback(this._object);\n            }\n            this._onEveryStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                this._onEveryStartCallbackFired = false;\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration, false);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        return parseFloat(end);\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '21.1.1';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, exports as default, getAll, nextId, now, remove, removeAll, update };\n","import { Beatmap } from \"./Beatmap\";\r\n\r\nexport class HitSound {\r\n    static HIT_SAMPLES = [\"\", \"normal\", \"soft\", \"drum\"];\r\n    static HIT_SOUNDS = [\"hitwhistle\", \"hitfinish\", \"hitclap\"];\r\n    static PARSE_ENUM = {\r\n        Normal: 1,\r\n        Soft: 2,\r\n        Drum: 3,\r\n    };\r\n\r\n    static GetHitSound(hitSoundParam) {\r\n        return parseInt(hitSoundParam)\r\n            .toString(2)\r\n            .padStart(4, \"0\")\r\n            .split(\"\")\r\n            .reverse()\r\n            .slice(1)\r\n            .reduce(\r\n                (accm, flag, idx) => {\r\n                    if (flag === \"1\") accm.push(HitSound.HIT_SOUNDS[idx]);\r\n                    return accm;\r\n                },\r\n                [\"hitnormal\"]\r\n            );\r\n    }\r\n\r\n    static GetHitSample(hitSampleParam, timingPoint) {\r\n        if (!/^\\d:\\d.*/g.test(hitSampleParam)) hitSampleParam = \"0:0\";\r\n\r\n        const defaultIndex = timingPoint.sampleSet !== 0 ? timingPoint.sampleSet : HitSound.PARSE_ENUM[Beatmap.SAMPLE_SET];\r\n        const [normalIndex, additionIndex] = hitSampleParam.split(\":\");\r\n\r\n        const normalSet = HitSound.HIT_SAMPLES[parseInt(normalIndex) === 0 ? defaultIndex : normalIndex];\r\n        const additionSet = parseInt(additionIndex) === 0 ? normalSet : HitSound.HIT_SAMPLES[additionIndex];\r\n\r\n        return {\r\n            normalSet,\r\n            additionSet,\r\n        };\r\n    }\r\n\r\n    static GetName(hitSampleParam, hitSoundParam, timingPoint) {\r\n        const hitSound = HitSound.GetHitSound(hitSoundParam);\r\n        const { normalSet, additionSet } = HitSound.GetHitSample(hitSampleParam, timingPoint);\r\n        const idx = timingPoint.sampleIdx;\r\n\r\n        return hitSound.map((hs) => {\r\n            if (hs === \"hitnormal\") return `${normalSet}-${hs}${idx}`;\r\n            return `${additionSet}-${hs}${idx}`;\r\n        });\r\n    }\r\n}\r\n","import { HitSound } from \"./HitSound\";\r\nimport { Beatmap } from \"./Beatmap\";\r\nimport { Clamp, binarySearchNearest } from \"./Utils\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport * as TWEEN from \"@tweenjs/tween.js\";\r\nimport { Game } from \"./Game\";\r\nimport { Component } from \"./WindowManager\";\r\n\r\nclass TimingPoint {\r\n    obj;\r\n    marker;\r\n    indicator;\r\n    timingPoint;\r\n\r\n    time;\r\n    value;\r\n    sample;\r\n    volume;\r\n\r\n    idx;\r\n\r\n    static FONT_SIZE = 13;\r\n\r\n    static EMIT_CHANGE = false;\r\n\r\n    constructor(timingPoint, idx) {\r\n        this.timingPoint = timingPoint;\r\n        this.idx = idx;\r\n        this.graphics = new PIXI.Graphics();\r\n        this.obj = new PIXI.Container();\r\n        this.obj.y = 40  * this.idx;\r\n        this.obj.cullable = true;\r\n        this.obj.eventMode = \"none\";\r\n\r\n        this.marker = new PIXI.Graphics()\r\n            .roundRect(\r\n                90 ,\r\n                5 ,\r\n                TimingPanel.WIDTH - 105 ,\r\n                30 ,\r\n                5 \r\n            )\r\n            .fill(0x1b1b1b);\r\n\r\n        this.indicator = new PIXI.Graphics()\r\n            .roundRect(95 , 10 , 5 , 20 , 5 )\r\n            .fill(this.timingPoint.beatstep ? 0xf5425a : 0x42f560);\r\n\r\n        let currentTime = timingPoint.time;\r\n        const isNeg = currentTime < 0;\r\n        if (currentTime < 0) currentTime *= -1;\r\n\r\n        const minute = Math.floor(currentTime / 60000);\r\n        const second = Math.floor((currentTime - minute * 60000) / 1000);\r\n        const mili = currentTime - minute * 60000 - second * 1000;\r\n\r\n        const timestamp = `${isNeg ? \"-\" : \"\"}${minute.toString().padStart(2, \"0\")}:${second.toString().padStart(2, \"0\")}:${mili\r\n            .toFixed(0)\r\n            .padStart(3, \"0\")}`;\r\n\r\n        this.timestamp = new PIXI.Text({\r\n            text: timestamp,\r\n            // renderMode: \"canvas\",\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontWeight: 400,\r\n                fontSize: TimingPoint.FONT_SIZE ,\r\n                fill: 0xffffff,\r\n            },\r\n        });\r\n\r\n        this.timestamp.x = 10 ;\r\n        this.timestamp.y = 20 ;\r\n        this.timestamp.anchor.set(0, 0.5);\r\n\r\n        this.value = new PIXI.Text({\r\n            text: `${(timingPoint.beatstep ? 60000 / timingPoint.beatstep : timingPoint.svMultiplier).toFixed(2)}${\r\n                timingPoint.beatstep ? \" BPM\" : \"x\"\r\n            }`,\r\n            // renderMode: \"canvas\",\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontWeight: 500,\r\n                fontSize: TimingPoint.FONT_SIZE ,\r\n                fill: 0xffffff,\r\n            },\r\n        });\r\n\r\n        this.value.x = 120 ;\r\n        this.value.y = 20 ;\r\n        this.value.anchor.set(0, 0.5);\r\n\r\n        this.obj.addChild(this.graphics);\r\n        this.obj.addChild(this.marker);\r\n        this.obj.addChild(this.indicator);\r\n        this.obj.addChild(this.timestamp);\r\n        this.obj.addChild(this.value);\r\n        // TimingPanel.stage.addChild(this.obj);\r\n\r\n        this.sample = new PIXI.Text({\r\n            text: `${(HitSound.HIT_SAMPLES[timingPoint.sampleSet][0] ?? \"\").toUpperCase()}${timingPoint.sampleIdx !== 0 ? \":C\" + timingPoint.sampleIdx : \"\"}`,\r\n            // renderMode: \"canvas\",\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontWeight: 500,\r\n                fontSize: TimingPoint.FONT_SIZE ,\r\n                fill: 0xffffff,\r\n            },\r\n        });\r\n        this.sample.x = 210 ;\r\n        this.sample.y = 20 ;\r\n        this.sample.anchor.set(0, 0.5);\r\n\r\n        this.volume = new PIXI.Text({\r\n            text: `${timingPoint.sampleVol}%`,\r\n            // renderMode: \"canvas\",\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontWeight: 500,\r\n                fontSize: TimingPoint.FONT_SIZE ,\r\n                fill: 0xffffff,\r\n            },\r\n        });\r\n        this.volume.x = 270 ;\r\n        this.volume.y = 20 ;\r\n        this.volume.anchor.set(0, 0.5);\r\n\r\n        this.obj.addChild(this.sample);\r\n        this.obj.addChild(this.volume);\r\n    }\r\n\r\n    changeColor() {\r\n        const bg = Game.COLOR_PALETTES.primary4;\r\n        const bgDark = Game.COLOR_PALETTES.primary1;\r\n        const accent = Game.COLOR_PALETTES.accent1;\r\n\r\n        this.marker\r\n            .clear()\r\n            .roundRect(\r\n                90 ,\r\n                5 ,\r\n                TimingPanel.WIDTH - 105 ,\r\n                30 ,\r\n                5 \r\n            )\r\n            .fill(this.timingPoint.isKiai ? accent : bg);\r\n\r\n        this.value.style.fill = this.timingPoint.isKiai ? bgDark : 0xffffff;\r\n        this.sample.style.fill = this.timingPoint.isKiai ? bgDark : 0xffffff;\r\n        this.volume.style.fill = this.timingPoint.isKiai ? bgDark : 0xffffff;\r\n    }\r\n\r\n    resize() {\r\n        this.changeColor();\r\n\r\n        // if (Game.DEVE_RATIO !== devicePixelRatio) {\r\n        //     this.indicator\r\n        //         .clear()\r\n        //         .roundRect(95 , 10 , 5 , 20 , 5 )\r\n        //         .fill(this.timingPoint.beatstep ? 0xf5425a : 0x42f560);\r\n\r\n        //     this.timestamp.style.fontSize = TimingPoint.FONT_SIZE ;\r\n        //     this.timestamp.x = 10 ;\r\n        //     this.timestamp.y = 20 ;\r\n\r\n        //     this.value.style.fontSize = TimingPoint.FONT_SIZE ;\r\n        //     this.value.x = 120 ;\r\n        //     this.value.y = 20 ;\r\n\r\n        //     this.sample.style.fontSize = TimingPoint.FONT_SIZE ;\r\n        //     this.sample.x = 210 ;\r\n        //     this.sample.y = 20 ;\r\n\r\n        //     this.volume.style.fontSize = TimingPoint.FONT_SIZE ;\r\n        //     this.volume.x = 270 ;\r\n        //     this.volume.y = 20 ;\r\n\r\n        //     this.obj.y = 40  * this.idx - TimingPanel.SCROLLED;\r\n        // }\r\n    }\r\n\r\n    update() {\r\n        this.obj.y = 40  * this.idx - TimingPanel.SCROLLED;\r\n\r\n        this.graphics.clear();\r\n\r\n        if (this.idx === TimingPanel.CURRENT_SV_IDX) {\r\n            const bg = Game.COLOR_PALETTES.primary5;\r\n\r\n            this.graphics.roundRect(0, 0, TimingPanel.WIDTH - 10 , 40 , 5 ).fill(bg);\r\n        }\r\n    }\r\n}\r\n\r\nexport class TimingPanel {\r\n    static renderer;\r\n    static stage;\r\n    static scrollbar;\r\n\r\n    static WIDTH;\r\n    static HEIGHT;\r\n\r\n    static POINTS = [];\r\n    static SCROLL_RATE = 0;\r\n\r\n    static SCROLLED = 0;\r\n    static MAX_HEIGHT = 0;\r\n\r\n    static TWEEN_LIST = [];\r\n\r\n    static IS_DRAGGING = false;\r\n    static START_Y = -1;\r\n    static DELTA_Y_LOCAL = 0;\r\n\r\n    static IS_TOUCHING = false;\r\n    static START_Y_TOUCH = -1;\r\n    static TOUCH_VELOCITY = 0;\r\n    static TOUCH_LAST_TIMESTAMP = 0;\r\n    static TOUCH_TWEEN = null;\r\n\r\n    static CURRENT_SV_IDX = 0;\r\n\r\n    static MASTER_CONTAINER;\r\n    static SIZE_Y = 0;\r\n    static ON_ANIM = false;\r\n\r\n    static init() {\r\n        this.MASTER_CONTAINER = new Component(0, 0, 370 , Game.APP.renderer.height - 100);\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n        this.MASTER_CONTAINER.padding = 15;\r\n        this.MASTER_CONTAINER.alpha = 1;\r\n        this.MASTER_CONTAINER.borderRadius = 10;\r\n\r\n        this.WIDTH = this.MASTER_CONTAINER.w;\r\n        this.HEIGHT = this.MASTER_CONTAINER.h;\r\n\r\n        this._size_x = 0;\r\n\r\n        this.stage = this.MASTER_CONTAINER.container;\r\n        this.stage.hitArea = new PIXI.Rectangle(0, 0, this.WIDTH, this.HEIGHT);\r\n\r\n        this.stage.on(\"wheel\", (e) => {\r\n            let scrolled = this.SCROLLED;\r\n            scrolled = Clamp(scrolled + e.deltaY, 0, this.MAX_HEIGHT - this.HEIGHT);\r\n\r\n            const tween = new TWEEN.Tween({ scrolled: this.SCROLLED }, false)\r\n                .to({ scrolled }, 100)\r\n                .easing(TWEEN.Easing.Cubic.Out)\r\n                .onUpdate((object) => {\r\n                    this.SCROLLED = object.scrolled;\r\n                    this.EMIT_CHANGE = true;\r\n                })\r\n                .start();\r\n\r\n            tween.onComplete = () => TWEEN.remove(tween);\r\n            TWEEN.add(tween);\r\n        });\r\n\r\n        this.stage.eventMode = \"static\";\r\n        this.stage.on(\"touchstart\", (e) => this.handleTouchDown(e));\r\n        this.stage.on(\"globaltouchmove\", (e) => this.handleTouchMove(e));\r\n        this.stage.on(\"touchend\", (e) => this.handleTouchUp(e));\r\n        this.stage.on(\"touchendoutside\", (e) => this.handleTouchUp(e));\r\n\r\n        this.scrollbar = new PIXI.Graphics();\r\n\r\n        this.scrollbar.eventMode = \"static\";\r\n        this.scrollbar.on(\"mousedown\", (e) => this.handleMouseDown(e));\r\n        this.scrollbar.on(\"globalmousemove\", (e) => this.handleMouseMove(e));\r\n        this.scrollbar.on(\"mouseup\", (e) => this.handleMouseUp(e));\r\n        this.scrollbar.on(\"mouseupoutside\", (e) => this.handleMouseUp(e));\r\n\r\n        this.stage.addChild(this.scrollbar);\r\n\r\n        this.forceResize();\r\n        this.forceUpdate();\r\n\r\n        // globalThis.__PIXI_RENDERER__ = this.renderer;\r\n        // globalThis.__PIXI_STAGE__ = this.stage;\r\n    }\r\n\r\n    static scrollTo(timestamp) {\r\n        if (!Game.BEATMAP_FILE?.beatmapRenderData?.objectsController) return;\r\n\r\n        let foundIndex = binarySearchNearest(this.POINTS, timestamp, (point, time) => {\r\n            if (point.timingPoint.time < time) return -1;\r\n            if (point.timingPoint.time > time) return 1;\r\n            return 0;\r\n        });\r\n\r\n        while (foundIndex > 0 && this.POINTS[foundIndex].timingPoint.time > timestamp) foundIndex--;\r\n\r\n        this.CURRENT_SV_IDX = foundIndex;\r\n\r\n        let rate = this.SCROLLED;\r\n        if (40  * foundIndex - this.SCROLLED < 0) rate = 40  * foundIndex;\r\n        if (40  * foundIndex - this.SCROLLED > this.HEIGHT - 40 )\r\n            rate = 40  * foundIndex - (this.HEIGHT - 40 );\r\n\r\n        this.forceUpdate();\r\n\r\n        if (rate === this.SCROLLED) return;\r\n\r\n        const tween = new TWEEN.Tween({ rate: this.SCROLLED }, false)\r\n            .to({ rate }, 50)\r\n            .easing(TWEEN.Easing.Quintic.Out)\r\n            .onUpdate((object) => {\r\n                this.SCROLLED = object.rate;\r\n                this.EMIT_CHANGE = true;\r\n            })\r\n            .start();\r\n\r\n        tween.onComplete = () => TWEEN.remove(tween);\r\n        TWEEN.add(tween);\r\n    }\r\n\r\n    static handleTouchDown(e) {\r\n        this.IS_TOUCHING = true;\r\n        this.START_Y_TOUCH = e.global.y;\r\n        this.TOUCH_LAST_TIMESTAMP = performance.now();\r\n\r\n        if (this.TOUCH_TWEEN) this.TOUCH_TWEEN.stop();\r\n    }\r\n\r\n    static handleTouchMove(e) {\r\n        if (!this.IS_TOUCHING) return;\r\n\r\n        const deltaY = e.global.y - this.START_Y_TOUCH;\r\n\r\n        this.START_Y_TOUCH = e.global.y;\r\n\r\n        if (this.SCROLLED - deltaY > this.MAX_HEIGHT - this.HEIGHT || this.SCROLLED - deltaY < 0) {\r\n            window.scrollBy(0, -deltaY );\r\n        }\r\n\r\n        this.SCROLLED = Clamp(this.SCROLLED - deltaY, 0, this.MAX_HEIGHT - this.HEIGHT);\r\n        this.EMIT_CHANGE = true;\r\n\r\n        const deltaT = performance.now() - this.TOUCH_LAST_TIMESTAMP;\r\n\r\n        if (deltaT !== 0) this.TOUCH_VELOCITY = deltaY / deltaT;\r\n\r\n        this.TOUCH_LAST_TIMESTAMP = performance.now();\r\n    }\r\n\r\n    static handleTouchUp(e) {\r\n        this.IS_TOUCHING = false;\r\n\r\n        const currentTimestamp = performance.now();\r\n        this.TOUCH_VELOCITY = this.TOUCH_VELOCITY * Clamp(1 - (currentTimestamp - this.TOUCH_LAST_TIMESTAMP) / 200, 0, 1);\r\n\r\n        const predicted = this.TOUCH_VELOCITY * 300;\r\n        const startScroll = this.SCROLLED;\r\n\r\n        let previousScroll = 0;\r\n        this.TOUCH_TWEEN = new TWEEN.Tween({ predicted: 0 }, false)\r\n            .to({ predicted: predicted }, 300)\r\n            .easing(TWEEN.Easing.Quadratic.Out)\r\n            .onUpdate((object) => {\r\n                this.SCROLLED = Clamp(startScroll - object.predicted, 0, this.MAX_HEIGHT - this.HEIGHT);\r\n                this.EMIT_CHANGE = true;\r\n\r\n                if (\r\n                    (startScroll - object.predicted > this.MAX_HEIGHT - this.HEIGHT || startScroll - object.predicted < 0) &&\r\n                    startScroll > 0 &&\r\n                    startScroll < this.MAX_HEIGHT - this.HEIGHT\r\n                ) {\r\n                    window.scrollBy(0, -(object.predicted - previousScroll));\r\n                }\r\n\r\n                previousScroll = object.predicted;\r\n            })\r\n            .start();\r\n\r\n        this.TOUCH_TWEEN.onComplete = () => {\r\n            TWEEN.remove(this.TOUCH_TWEEN);\r\n            this.TOUCH_TWEEN = null;\r\n        };\r\n\r\n        this.TOUCH_TWEEN.onStop = () => {\r\n            TWEEN.remove(this.TOUCH_TWEEN);\r\n            this.TOUCH_TWEEN = null;\r\n        };\r\n\r\n        TWEEN.add(this.TOUCH_TWEEN);\r\n\r\n        this.START_Y_TOUCH = -1;\r\n        this.TOUCH_VELOCITY = 0;\r\n        this.TOUCH_LAST_TIMESTAMP = 0;\r\n    }\r\n\r\n    static handleMouseDown(e) {\r\n        this.IS_DRAGGING = true;\r\n        this.START_Y = e.global.y;\r\n        this.DELTA_Y_LOCAL = this.scrollbar.toLocal(e.global).y;\r\n    }\r\n\r\n    static handleMouseMove(e) {\r\n        if (!this.IS_DRAGGING) return;\r\n        const deltaY =\r\n            ((e.global.y - this.START_Y) / (this.HEIGHT - this.HEIGHT * (this.HEIGHT / this.MAX_HEIGHT))) * (this.MAX_HEIGHT - this.HEIGHT);\r\n\r\n        const scrollBarHeight = this.HEIGHT * (this.HEIGHT / this.MAX_HEIGHT);\r\n        this.START_Y = Clamp(e.global.y, this.DELTA_Y_LOCAL, this.HEIGHT + this.DELTA_Y_LOCAL - scrollBarHeight);\r\n\r\n        this.SCROLLED = Clamp(this.SCROLLED + deltaY, 0, this.MAX_HEIGHT - this.HEIGHT);\r\n        this.EMIT_CHANGE = true;\r\n    }\r\n\r\n    static handleMouseUp(e) {\r\n        this.IS_DRAGGING = false;\r\n        this.START_Y = -1;\r\n        this.DELTA_Y_LOCAL = 0;\r\n    }\r\n\r\n    static initTimingPoints() {\r\n        this.MAX_HEIGHT = 40  * Beatmap.timingPointsList.length;\r\n        this.scrollbar\r\n            .clear()\r\n            .roundRect(0, 0, 5 , this.HEIGHT * (this.HEIGHT / this.MAX_HEIGHT))\r\n            .fill({ color: 0xaaaaaa, alpha: this.MAX_HEIGHT <= this.HEIGHT ? 0 : 1 });\r\n        this.POINTS = [];\r\n        this.SCROLLED = 0;\r\n        Beatmap.timingPointsList.forEach((point, idx) => {\r\n            const p = new TimingPoint(point, idx);\r\n            this.POINTS.push(p);\r\n        });\r\n    }\r\n\r\n    static get SIZE_X() {\r\n        return this._size_x;\r\n    }\r\n\r\n    static set SIZE_X(val) {\r\n        this._size_x = val;\r\n        this.EMIT_CHANGE = true;\r\n    }\r\n\r\n    static forceResize() {\r\n        if (innerWidth / innerHeight < 1) {\r\n            if (Game.SHOW_TIMING_PANEL && !this.ON_ANIM) this.SIZE_X = Game.WRAPPER.h * 0.75;\r\n\r\n            this.MASTER_CONTAINER.x = 0;\r\n            this.MASTER_CONTAINER.y = Game.APP.renderer.height - Game.WRAPPER.h * 0.75 * (this.SIZE_X / (Game.WRAPPER.h * 0.75));\r\n            this.MASTER_CONTAINER.w = Game.APP.renderer.width;\r\n            this.MASTER_CONTAINER.h = this.SIZE_X;\r\n\r\n            this.scrollTo(Game.BEATMAP_FILE?.audioNode?.getCurrentTime() ?? 0);\r\n        } else {\r\n            if (Game.SHOW_TIMING_PANEL && !this.ON_ANIM) this.SIZE_X = 400 ;\r\n\r\n            this.MASTER_CONTAINER.x = Game.APP.renderer.width - this.SIZE_X;\r\n            this.MASTER_CONTAINER.y = !Game.IS_FULLSCREEN ? 0  : 0;\r\n            this.MASTER_CONTAINER.w = 400 ;\r\n            this.MASTER_CONTAINER.h = Game.APP.renderer.height - (!Game.IS_FULLSCREEN ? 0  : 0) - this.SIZE_Y ;\r\n\r\n            if (Game.IS_FULLSCREEN) this.MASTER_CONTAINER.borderRadius = 0;\r\n            else this.MASTER_CONTAINER.borderRadius = 10;\r\n        }\r\n\r\n        this.MASTER_CONTAINER.redraw();\r\n\r\n        // }\r\n\r\n        if (this.MASTER_CONTAINER.color !== Game.COLOR_PALETTES.primary3) this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n        if (\r\n            this.WIDTH === this.MASTER_CONTAINER.w - this.MASTER_CONTAINER.padding * 2 &&\r\n            this.HEIGHT === this.MASTER_CONTAINER.h - this.MASTER_CONTAINER.padding * 2\r\n        )\r\n            return;\r\n\r\n        this.EMIT_CHANGE = true;\r\n\r\n        this.WIDTH = this.MASTER_CONTAINER.w - this.MASTER_CONTAINER.padding * 2;\r\n        this.HEIGHT = this.MASTER_CONTAINER.h - this.MASTER_CONTAINER.padding * 2;\r\n        // this.renderer.resize(this.WIDTH, this.HEIGHT);\r\n\r\n        this.stage.hitArea = new PIXI.Rectangle(0, 0, this.WIDTH, this.HEIGHT);\r\n\r\n        this.MAX_HEIGHT = 40  * Beatmap.timingPointsList.length;\r\n\r\n        this.scrollbar\r\n            .clear()\r\n            .roundRect(0, 0, 5 , this.HEIGHT * (this.HEIGHT / this.MAX_HEIGHT))\r\n            .fill({ color: 0xaaaaaa, alpha: this.MAX_HEIGHT <= this.HEIGHT ? 0 : 1 });\r\n\r\n        // if (Game.DEVE_RATIO !== devicePixelRatio) {\r\n        //     this.POINTS.forEach((point) => point.resize());\r\n        // }\r\n    }\r\n\r\n    static resize() {\r\n        // if (innerWidth / innerHeight < 1) {\r\n        //     this.MASTER_CONTAINER.x = 0;\r\n        //     this.MASTER_CONTAINER.y = Game.WRAPPER.h * 0.3;\r\n        //     this.MASTER_CONTAINER.w = Game.WRAPPER.w;\r\n        //     this.MASTER_CONTAINER.h = Game.WRAPPER.h * 0.7;\r\n        // } else {\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.forceResize();\r\n        // this.renderer.view.style.transform = `scale(${1 })`;\r\n    }\r\n\r\n    static forceUpdate() {\r\n        if (!Game.SHOW_TIMING_PANEL) return;\r\n        this.stage.removeChildren();\r\n        this.stage.addChild(this.MASTER_CONTAINER.mask);\r\n\r\n        let idx = Math.floor(this.SCROLLED / (40 ));\r\n        while (idx < this.POINTS.length && 40  * idx - this.SCROLLED < this.HEIGHT) {\r\n            if (idx < 0) {\r\n                idx++;\r\n                continue;\r\n            }\r\n\r\n            const point = this.POINTS[idx++];\r\n\r\n            this.stage.addChild(point.obj);\r\n            point.resize();\r\n            point.update();\r\n        }\r\n\r\n        this.stage.addChild(this.scrollbar);\r\n\r\n        this.scrollbar.x = this.WIDTH - 5 ;\r\n        this.scrollbar.y = (this.HEIGHT - this.HEIGHT * (this.HEIGHT / this.MAX_HEIGHT)) * (this.SCROLLED / (this.MAX_HEIGHT - this.HEIGHT));\r\n    }\r\n\r\n    static update(time) {\r\n        this.resize();\r\n        if (!this.EMIT_CHANGE) return;\r\n        this.forceUpdate();\r\n        this.EMIT_CHANGE = false;\r\n    }\r\n}\r\n","/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nvar NEWTON_ITERATIONS = 4;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\n\nvar kSplineTableSize = 11;\nvar kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nvar float32ArraySupported = typeof Float32Array === 'function';\n\nfunction A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\nfunction B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\nfunction C (aA1)      { return 3.0 * aA1; }\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nfunction calcBezier (aT, aA1, aA2) { return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT; }\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nfunction getSlope (aT, aA1, aA2) { return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1); }\n\nfunction binarySubdivide (aX, aA, aB, mX1, mX2) {\n  var currentX, currentT, i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) {\n      aB = currentT;\n    } else {\n      aA = currentT;\n    }\n  } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n  return currentT;\n}\n\nfunction newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\n for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n   var currentSlope = getSlope(aGuessT, mX1, mX2);\n   if (currentSlope === 0.0) {\n     return aGuessT;\n   }\n   var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n   aGuessT -= currentX / currentSlope;\n }\n return aGuessT;\n}\n\nfunction LinearEasing (x) {\n  return x;\n}\n\nmodule.exports = function bezier (mX1, mY1, mX2, mY2) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  // Precompute samples table\n  var sampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n  for (var i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  function getTForX (aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = kSplineTableSize - 1;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += kSampleStepSize;\n    }\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    var dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    var guessForT = intervalStart + dist * kSampleStepSize;\n\n    var initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n    }\n  }\n\n  return function BezierEasing (x) {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (x === 0) {\n      return 0;\n    }\n    if (x === 1) {\n      return 1;\n    }\n    return calcBezier(getTForX(x), mY1, mY2);\n  };\n};\n","import * as PIXI from \"pixi.js\";\r\n\r\nexport class Text {\r\n    constructor({ text, renderMode, style }) {\r\n        this._text = text;\r\n\r\n        this._sprite = new PIXI.Text({\r\n            text: this.text,\r\n            // renderMode: renderMode ?? \"canvas\",\r\n            style: style,\r\n        });\r\n\r\n        this._metrics = PIXI.CanvasTextMetrics.measureText(text, this._sprite.style);\r\n        this._color = style.fill;\r\n\r\n        this._x = 0;\r\n        this._y = 0;\r\n    }\r\n\r\n    get text() {\r\n        return this._text;\r\n    }\r\n\r\n    set text(val) {\r\n        if (this._text === val) return;\r\n        \r\n        this._text = val;\r\n        this._sprite.text = val;\r\n        this._metrics = PIXI.CanvasTextMetrics.measureText(val, this._sprite.style);\r\n\r\n        this._resize();\r\n    }\r\n\r\n    get color() {\r\n        return this._color;\r\n    }\r\n\r\n    set color(val) {\r\n        if (val === this._color) return;\r\n        this._color = val;\r\n        this.style.fill = val;\r\n    }\r\n\r\n    get sprite() {\r\n        return this._sprite;\r\n    }\r\n\r\n    get style() {\r\n        return this._sprite.style;\r\n    }\r\n\r\n    get width() {\r\n        return this._metrics.width;\r\n    }\r\n\r\n    get height() {\r\n        return this._metrics.height;\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(val) {\r\n        if (this._x === val) return;\r\n        this._x = val;\r\n        this.update();\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(val) {\r\n        if (this._y === val) return;\r\n        this._y = val;\r\n        this.update();\r\n    }\r\n\r\n    _resize() {\r\n        this._metrics = PIXI.CanvasTextMetrics.measureText(this.text, this.style);\r\n    }\r\n\r\n    update() {\r\n        this._resize();\r\n        this.sprite.x = this.x;\r\n        this.sprite.y = this.y;\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Text } from \"./Text\";\r\n\r\nexport class Container {\r\n    constructor() {\r\n        this.container = new PIXI.Container();\r\n        this.content = new PIXI.Container();\r\n        this.background = new PIXI.Graphics();\r\n\r\n        this._paddingX = 0;\r\n        this._paddingY = 0;\r\n        this._color = 0x000000;\r\n        this._alpha = 0;\r\n        this._borderRadius = 0;\r\n        this._child = undefined;\r\n\r\n        this._x = 0;\r\n        this._y = 0;\r\n\r\n        this._width = undefined;\r\n        this._height = undefined;\r\n\r\n        this.container.addChild(this.background, this.content);\r\n        this.container.x = 0;\r\n        this.container.y = 0;\r\n\r\n        this.placeItemsCenter = false;\r\n    }\r\n\r\n    addChild(child) {\r\n        this._child = child;\r\n\r\n        if (child instanceof Text) {\r\n            this.content.addChild(child.sprite);\r\n            return;\r\n        }\r\n\r\n        this.content.addChild(child);\r\n    }\r\n\r\n    get paddingX() {\r\n        return this._paddingX ;\r\n    }\r\n\r\n    set paddingX(val) {\r\n        this._paddingX = val;\r\n        this.update();\r\n    }\r\n\r\n    get paddingY() {\r\n        return this._paddingY ;\r\n    }\r\n\r\n    set paddingY(val) {\r\n        this._paddingY = val;\r\n        this.update();\r\n    }\r\n\r\n    get color() {\r\n        return this._color;\r\n    }\r\n\r\n    set color(val) {\r\n        this._color = val;\r\n        this.alpha = 1;\r\n        this.update();\r\n    }\r\n\r\n    get alpha() {\r\n        return this._alpha;\r\n    }\r\n\r\n    set alpha(val) {\r\n        this._alpha = val;\r\n        this.update();\r\n    }\r\n\r\n    get width() {\r\n        if (!this._width) return (this._child?.width ?? 0) + this.paddingX * 2;\r\n        return this._width;\r\n    }\r\n\r\n    set width(val) {\r\n        if (val === this._width) return;\r\n        this._width = val;\r\n        this.update();\r\n    }\r\n\r\n    get height() {\r\n        if (!this._height) return (this._child?.height ?? 0) + this.paddingY * 2;\r\n        return this._height;\r\n    }\r\n\r\n    set height(val) {\r\n        if (val === this._height) return;\r\n        this._height = val;\r\n        this.update();\r\n    }\r\n\r\n    get x() {\r\n        return this._x;\r\n    }\r\n\r\n    set x(val) {\r\n        if (val === this._x) return;\r\n        this._x = val;\r\n        this.update();\r\n    }\r\n\r\n    get y() {\r\n        return this._y;\r\n    }\r\n\r\n    set y(val) {\r\n        if (val === this._y) return;\r\n        this._y = val;\r\n        this.update();\r\n    }\r\n\r\n    get borderRadius() {\r\n        return this._borderRadius ;\r\n    }\r\n\r\n    set borderRadius(val) {\r\n        if (val === this._borderRadius) return;\r\n        this._borderRadius = val;\r\n        this.update();\r\n    }\r\n\r\n    update() {\r\n        this.container.x = this.x;\r\n        this.container.y = this.y;\r\n\r\n        if (!this.placeItemsCenter) {\r\n            this.content.x = this.paddingX;\r\n            this.content.y = this.paddingY;\r\n        } else {\r\n            this.content.x = (this.width - (this._child?.width ?? 0)) / 2;\r\n            this.content.y = (this.height - (this._child?.height ?? 0)) / 2;\r\n        }\r\n\r\n        this.background.clear().roundRect(0, 0, this.width, this.height, this.borderRadius).fill({ color: this.color, alpha: this.alpha });\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\"\r\nimport { Text } from \"./Text\";\r\n\r\nexport class FlexBox {\r\n    container;\r\n    children = [];\r\n\r\n    constructor() {\r\n        this.container = new PIXI.Container();\r\n        this._gap = 0;\r\n        this._flexDirection = \"column\";\r\n        this._justifyContent = \"center\";\r\n    }\r\n\r\n    addChild(...children) {\r\n        this.children.push(...children);\r\n\r\n        children.forEach((child) => {\r\n            if (child instanceof Text) {\r\n                this.container.addChild(child.sprite);\r\n                return;\r\n            }\r\n\r\n            this.container.addChild(child);\r\n        })\r\n        this.update();\r\n    }\r\n\r\n    get gap() {\r\n        return this._gap ;\r\n    }\r\n\r\n    set gap(val) {\r\n        this._gap = val;\r\n        this.update();\r\n    }\r\n\r\n    get flexDirection() {\r\n        return this._flexDirection;\r\n    }\r\n\r\n    set flexDirection(val) {\r\n        if (![\"row\", \"column\"].includes(val)) return;\r\n        this._flexDirection = val;\r\n        this.update();\r\n    }\r\n\r\n    get justifyContent() {\r\n        return this._justifyContent;\r\n    }\r\n\r\n    set justifyContent(val) {\r\n        this._justifyContent = val;\r\n        this.update();\r\n    }\r\n\r\n    get width() {\r\n        return this.container.width;\r\n    }\r\n\r\n    get height() {\r\n        return this.container.height;\r\n    }\r\n\r\n    get x() {\r\n        return this.container.x;\r\n    }\r\n\r\n    set x(val) {\r\n        this.container.x = val;\r\n    }\r\n\r\n    get y() {\r\n        return this.container.y;\r\n    }\r\n\r\n    set y(val) {\r\n        this.container.y = val;\r\n    }\r\n\r\n    getLargestChildFactor(factor) {\r\n        return Math.max(...this.children.map((child) => child[factor]));\r\n    }\r\n\r\n    update() {\r\n        const _static = this.flexDirection === \"column\" ? \"y\" : \"x\";\r\n        const dynamic = this.flexDirection === \"column\" ? \"x\" : \"y\";\r\n        const plusfactor = this.flexDirection === \"column\" ? \"width\" : \"height\";\r\n        const centerFactor = this.flexDirection === \"column\" ? \"height\" : \"width\";\r\n\r\n        this.children.forEach((child, idx, arr) => {\r\n            if (this.justifyContent === \"center\") child[_static] = Math.ceil((this.getLargestChildFactor(centerFactor) - child[centerFactor]) * 0.5);\r\n            if (this.justifyContent === \"start\") child[_static] = 0;\r\n\r\n            if (idx === 0) {\r\n                child[dynamic] = 0;\r\n                return;\r\n            }\r\n\r\n            child[dynamic] = arr[idx - 1][dynamic] + arr[idx - 1][plusfactor] + this.gap;\r\n        });\r\n    }\r\n}\r\n","import { Game } from \"./Game\";\r\nimport * as TWEEN from \"@tweenjs/tween.js\";\r\nimport { Component } from \"./WindowManager\";\r\nimport { TimingPanel } from \"./TimingPanel\";\r\nimport bezier from \"bezier-easing\";\r\nimport { Container } from \"./UI/Container\";\r\nimport { FlexBox } from \"./UI/FlexBox\";\r\nimport { Text } from \"./UI/Text\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { Clamp } from \"./Utils\";\r\n\r\nexport function toggleMetadataPanel() {\r\n    MetadataPanel.ON_ANIM = true;\r\n\r\n    let result = {\r\n        game: 0,\r\n        timing: 0,\r\n        metadata: 0,\r\n    };\r\n\r\n    if (!Game.SHOW_METADATA) {\r\n        result = {\r\n            game: innerWidth < innerHeight ? 0 : 400,\r\n            timing: 0,\r\n            metadata: innerWidth < innerHeight ? Game.WRAPPER.h * 0.75 : 400 ,\r\n        };\r\n\r\n        // document.querySelector(\".mapBG\").style.width = `calc(100% - 410px)`;\r\n    }\r\n\r\n    if (Game.SHOW_METADATA) {\r\n        result = {\r\n            game: 0,\r\n            timing: 0,\r\n            metadata: 0,\r\n        };\r\n        // document.querySelector(\".mapBG\").style.width = ``;\r\n    }\r\n\r\n    Game.SHOW_TIMING_PANEL = false;\r\n    Game.SHOW_METADATA = !Game.SHOW_METADATA;\r\n\r\n    const easing = bezier(0, 0.4, 0, 1.0);\r\n\r\n    const tween = new TWEEN.Tween({\r\n        reduction: {\r\n            game: Game.REDUCTION,\r\n            timing: TimingPanel.SIZE_X,\r\n            metadata: MetadataPanel.SIZE_X,\r\n        },\r\n    })\r\n        .easing((t) => {\r\n            return easing(t);\r\n        })\r\n        .to({ reduction: result }, 200)\r\n        .onUpdate((obj) => {\r\n            Game.REDUCTION = obj.reduction.game;\r\n            MetadataPanel.SIZE_X = obj.reduction.metadata;\r\n            TimingPanel.SIZE_X = obj.reduction.timing;\r\n            MetadataPanel.ON_ANIM = true;\r\n\r\n            Game.EMIT_STACK.push(true);\r\n        })\r\n        .onComplete(() => {\r\n            MetadataPanel.ON_ANIM = false;\r\n        })\r\n        .start();\r\n}\r\n\r\nexport class MetadataPanel {\r\n    static MASTER_CONTAINER;\r\n    static SIZE_X = 0;\r\n    static SIZE_Y = 0;\r\n\r\n    static ARTIST;\r\n    static ROMANIZED_ARTIST;\r\n    static TITLE;\r\n    static ROMANIZED_TITLE;\r\n    static DIFFICULTY_NAME;\r\n    static SOURCE;\r\n    static TAG;\r\n\r\n    static LABEL = {\r\n        artist: null,\r\n        romanized_artist: null,\r\n        title: null,\r\n        romanized_title: null,\r\n        difficulty_name: null,\r\n        source: null,\r\n        tag: null,\r\n    };\r\n\r\n    static CONTAINERS = {\r\n        artist: null,\r\n        romanized_artist: null,\r\n        title: null,\r\n        romanized_title: null,\r\n        difficulty_name: null,\r\n        source: null,\r\n        tag: null,\r\n    };\r\n\r\n    static container;\r\n\r\n    static ON_ANIM = false;\r\n    static SCROLL_RATE = 0;\r\n\r\n    static IS_TOUCHING = false;\r\n    static START_Y_TOUCH = -1;\r\n    static TOUCH_VELOCITY = 0;\r\n    static TOUCH_LAST_TIMESTAMP = 0;\r\n    static TOUCH_TWEEN = null;\r\n\r\n    static SCROLLED = 0;\r\n\r\n    static init() {\r\n        this.MASTER_CONTAINER = new Component(0, 0, 370 , Game.APP.renderer.height - 100);\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n        this.MASTER_CONTAINER.padding = 15;\r\n        this.MASTER_CONTAINER.alpha = 1;\r\n        this.MASTER_CONTAINER.borderRadius = 10;\r\n        this.MASTER_CONTAINER.masterContainer.on(\"touchstart\", (e) => {\r\n            this.IS_TOUCHING = true;\r\n            this.START_Y_TOUCH = e.global.y;\r\n            this.TOUCH_LAST_TIMESTAMP = performance.now();\r\n\r\n            if (this.TOUCH_TWEEN) this.TOUCH_TWEEN.stop();\r\n        });\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"touchmove\", (e) => {\r\n            if (!this.IS_TOUCHING) return;\r\n\r\n            const heightDiff = Math.max(0, this.flex.height - this.container.height + this.container.paddingY );\r\n            const deltaY = e.global.y - this.START_Y_TOUCH;\r\n\r\n            this.START_Y_TOUCH = e.global.y;\r\n\r\n            if (this.SCROLLED - deltaY > heightDiff || this.SCROLLED - deltaY < 0) {\r\n                window.scrollBy(0, -deltaY );\r\n            }\r\n\r\n            this.SCROLLED = Clamp(this.SCROLLED - deltaY, 0, heightDiff);\r\n            this.flex.y = -this.SCROLLED;\r\n\r\n            const deltaT = performance.now() - this.TOUCH_LAST_TIMESTAMP;\r\n\r\n            if (deltaT !== 0) this.TOUCH_VELOCITY = deltaY / deltaT;\r\n\r\n            this.TOUCH_LAST_TIMESTAMP = performance.now();\r\n        });\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"touchend\", (e) => {\r\n            this.IS_TOUCHING = false;\r\n            const heightDiff = Math.max(0, this.flex.height - this.container.height + this.container.paddingY );\r\n\r\n            const currentTimestamp = performance.now();\r\n            this.TOUCH_VELOCITY = this.TOUCH_VELOCITY * Clamp(1 - (currentTimestamp - this.TOUCH_LAST_TIMESTAMP) / 200, 0, 1);\r\n\r\n            const predicted = this.TOUCH_VELOCITY * 300;\r\n            const startScroll = this.SCROLLED;\r\n\r\n            let previousScroll = 0;\r\n            this.TOUCH_TWEEN = new TWEEN.Tween({ predicted: 0 }, false)\r\n                .to({ predicted: predicted }, 300)\r\n                .easing(TWEEN.Easing.Quadratic.Out)\r\n                .onUpdate((object) => {\r\n                    this.SCROLLED = Clamp(startScroll - object.predicted, 0, heightDiff);\r\n                    this.flex.y = -this.SCROLLED;\r\n\r\n                    if (\r\n                        (startScroll - object.predicted > heightDiff || startScroll - object.predicted < 0) &&\r\n                        startScroll > 0 &&\r\n                        startScroll < heightDiff\r\n                    ) {\r\n                        window.scrollBy(0, -(object.predicted - previousScroll));\r\n                    }\r\n\r\n                    previousScroll = object.predicted;\r\n                })\r\n                .start();\r\n\r\n            this.TOUCH_TWEEN.onComplete = () => {\r\n                TWEEN.remove(this.TOUCH_TWEEN);\r\n                this.TOUCH_TWEEN = null;\r\n            };\r\n\r\n            this.TOUCH_TWEEN.onStop = () => {\r\n                TWEEN.remove(this.TOUCH_TWEEN);\r\n                this.TOUCH_TWEEN = null;\r\n            };\r\n\r\n            TWEEN.add(this.TOUCH_TWEEN);\r\n\r\n            this.START_Y_TOUCH = -1;\r\n            this.TOUCH_VELOCITY = 0;\r\n            this.TOUCH_LAST_TIMESTAMP = 0;\r\n        });\r\n\r\n        this.WIDTH = this.MASTER_CONTAINER.w;\r\n        this.HEIGHT = this.MASTER_CONTAINER.h;\r\n\r\n        this.flex = new FlexBox();\r\n        this.flex.flexDirection = \"row\";\r\n        this.flex.gap = 20;\r\n        this.flex.justifyContent = \"start\";\r\n\r\n        this.container = new Container();\r\n        this.container.paddingX = 20;\r\n        this.container.paddingY = 20;\r\n        this.container.color = Game.COLOR_PALETTES.primary2;\r\n        this.container.borderRadius = 10;\r\n\r\n        const contentStyle = {\r\n            fontSize: 16,\r\n            fontFamily: \"Torus\",\r\n            fill: \"white\",\r\n            fontWeight: 500,\r\n            wordWrap: true,\r\n        };\r\n\r\n        const labelStyle = {\r\n            fontSize: 12,\r\n            fontFamily: \"Torus\",\r\n            fill: \"white\",\r\n            fontWeight: 400,\r\n            wordWrap: true,\r\n        };\r\n\r\n        Object.keys(this.LABEL).forEach((label) => {\r\n            this.LABEL[label] = new Text({\r\n                text: label.replaceAll(\"_\", \" \"),\r\n                style: labelStyle,\r\n            });\r\n            this[label.toUpperCase()] = new Text({ text: \"\", style: contentStyle });\r\n            this.CONTAINERS[label] = new FlexBox();\r\n            this.CONTAINERS[label].flexDirection = \"row\";\r\n            this.CONTAINERS[label].justifyContent = \"start\";\r\n            this.CONTAINERS[label].gap = 6;\r\n\r\n            this.CONTAINERS[label].addChild(this.LABEL[label].sprite, this[label.toUpperCase()].sprite);\r\n            this.flex.addChild(this.CONTAINERS[label].container);\r\n            this.container.addChild(this.flex.container);\r\n        });\r\n\r\n        this.MASTER_CONTAINER.container.addChild(this.container.container);\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get artist() {\r\n        return this._artist;\r\n    }\r\n\r\n    static set artist(val) {\r\n        this._artist = val;\r\n        this.ARTIST.text = val;\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get romanized_artist() {\r\n        return this._romanized_artist;\r\n    }\r\n\r\n    static set romanized_artist(val) {\r\n        this._romanized_artist = val;\r\n        this.ROMANIZED_ARTIST.text = val;\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get title() {\r\n        return this._title;\r\n    }\r\n\r\n    static set title(val) {\r\n        this._title = val;\r\n        this.TITLE.text = val;\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get romanized_title() {\r\n        return this._romanized_title;\r\n    }\r\n\r\n    static set romanized_title(val) {\r\n        this._romanized_title = val;\r\n        this.ROMANIZED_TITLE.text = val;\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get difficulty_name() {\r\n        return this._difficulty_name;\r\n    }\r\n\r\n    static set difficulty_name(val) {\r\n        this._difficulty_name = val;\r\n        this.DIFFICULTY_NAME.text = val;\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get source() {\r\n        return this._source;\r\n    }\r\n\r\n    static set source(val) {\r\n        this._source = val;\r\n        this.SOURCE.text = val;\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static get tag() {\r\n        return this._tag;\r\n    }\r\n\r\n    static set tag(val) {\r\n        this._tag = val;\r\n        this.TAG.text = val;\r\n    }\r\n\r\n    static resize() {\r\n        if (innerWidth / innerHeight < 1) {\r\n            if (Game.SHOW_METADATA && !this.ON_ANIM) this.SIZE_X = Game.WRAPPER.h * 0.75;\r\n            this.MASTER_CONTAINER.x = 0;\r\n            this.MASTER_CONTAINER.y = Game.APP.renderer.height - Game.WRAPPER.h * 0.75 * (this.SIZE_X / (Game.WRAPPER.h * 0.75));\r\n            this.MASTER_CONTAINER.w = Game.APP.renderer.width;\r\n            this.MASTER_CONTAINER.h = this.SIZE_X;\r\n        } else {\r\n            if (Game.SHOW_METADATA && !this.ON_ANIM) this.SIZE_X = 400 ;\r\n\r\n            this.MASTER_CONTAINER.x = Game.APP.renderer.width - this.SIZE_X;\r\n            this.MASTER_CONTAINER.y = !Game.IS_FULLSCREEN ? 0  : 0;\r\n            this.MASTER_CONTAINER.w = 400 ;\r\n            this.MASTER_CONTAINER.h = Game.APP.renderer.height - (!Game.IS_FULLSCREEN ? 0  : 0) - this.SIZE_Y ;\r\n        }\r\n\r\n        if (\r\n            this.WIDTH === this.MASTER_CONTAINER.w - this.MASTER_CONTAINER.padding * 2 &&\r\n            this.HEIGHT === this.MASTER_CONTAINER.h - this.MASTER_CONTAINER.padding * 2\r\n        )\r\n            return;\r\n\r\n        this.WIDTH = this.MASTER_CONTAINER.w;\r\n        this.HEIGHT = this.MASTER_CONTAINER.h;\r\n\r\n        if (Game.IS_FULLSCREEN) this.MASTER_CONTAINER.borderRadius = 0;\r\n        else this.MASTER_CONTAINER.borderRadius = 10;\r\n    }\r\n\r\n    static forceUpdate() {\r\n        this.resize();\r\n\r\n        this.container.width = this.MASTER_CONTAINER.w - this.MASTER_CONTAINER.padding * 2;\r\n        this.container.height = this.MASTER_CONTAINER.h - this.MASTER_CONTAINER.padding * 2;\r\n\r\n        Object.keys(this.LABEL).forEach((label) => {\r\n            this.LABEL[label].style.wordWrapWidth = this.container.width - this.container.paddingX * 2;\r\n            this[label.toUpperCase()].style.wordWrapWidth = this.container.width - this.container.paddingX * 2;\r\n\r\n            this.LABEL[label].style.fontSize = 12 ;\r\n            this[label.toUpperCase()].style.fontSize = 16 ;\r\n\r\n            this.LABEL[label].update();\r\n            this[label.toUpperCase()].update();\r\n\r\n            this.CONTAINERS[label].update();\r\n            this.flex.update();\r\n        });\r\n\r\n        // this.flex.update();\r\n        this.container.update();\r\n        this.MASTER_CONTAINER.redraw();\r\n    }\r\n\r\n    static update() {\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.forceUpdate();\r\n    }\r\n}\r\n","export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n","import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n","export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","import { ObjectsController } from \"./HitObjects/ObjectsController.js\";\r\nimport { parseTime } from \"./ProgressBar.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { Component } from \"./WindowManager.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport { Beatmap } from \"./Beatmap.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\n\r\nexport function closePopup() {\r\n    const popup = document.querySelector(\".seekTo\");\r\n\r\n    popup.classList.remove(\"popupAnim\");\r\n    popup.classList.add(\"popoutAnim\");\r\n    popup.close();\r\n}\r\n\r\nexport function openPopup() {\r\n    const popup = document.querySelector(\".seekTo\");\r\n\r\n    popup.classList.remove(\"popoutAnim\");\r\n    popup.classList.add(\"popupAnim\");\r\n    popup.show();\r\n}\r\n\r\nexport function showPopup() {\r\n    const popup = document.querySelector(\".seekTo\");\r\n    const timeInput = document.querySelector(\"#jumpToTime\");\r\n    timeInput.blur();\r\n\r\n    if (!popup.open) {\r\n        if (Game.BEATMAP_FILE?.audioNode) {\r\n            const currentTime = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\r\n            const minute = Math.floor(currentTime / 60000);\r\n            const second = Math.floor((currentTime - minute * 60000) / 1000);\r\n            const mili = currentTime - minute * 60000 - second * 1000;\r\n\r\n            timeInput.value = `${minute.toString().padStart(2, \"0\")}:${second.toString().padStart(2, \"0\")}:${mili.toFixed(0).padStart(3, \"0\")}`;\r\n\r\n            const origin = window.location.origin;\r\n            const currentTimestamp = Game.BEATMAP_FILE !== undefined ? Game.BEATMAP_FILE.audioNode.getCurrentTime() : 0;\r\n            const mapId = Beatmap.CURRENT_MAPID || \"\";\r\n            document.querySelector(\"#previewURL\").value = `${origin}${\r\n                !origin.includes(\"github.io\") ? \"\" : \"/beatmap-viewer-how\"\r\n            }?b=${mapId}&t=${currentTimestamp}`;\r\n        }\r\n\r\n        openPopup();\r\n        return;\r\n    }\r\n\r\n    closePopup();\r\n}\r\n\r\nexport class Timestamp {\r\n    static renderer;\r\n    static stage;\r\n\r\n    static WIDTH;\r\n    static HEIGHT;\r\n\r\n    static MASTER_CONTAINER;\r\n\r\n    static digits = {\r\n        minutes: [],\r\n        seconds: [],\r\n        miliseconds: [],\r\n    };\r\n\r\n    static EMIT_CHANGE = false;\r\n\r\n    static createDigit(x = 0, type = \"digit\") {\r\n        const digit = new PIXI.BitmapText({\r\n            text: type === \"digit\" ? `0` : \":\",\r\n            // renderMode: \"bitmap\",\r\n            style: {\r\n                fontFamily: \"Torus16\",\r\n                fontSize: 16 ,\r\n                align: \"center\",\r\n                fontWeight: 400,\r\n            },\r\n        });\r\n\r\n        digit.anchor.set(0.5);\r\n        digit.x = x;\r\n        digit.y = type === \"digit\" ? this.HEIGHT / 2 : this.HEIGHT / 2 - 1;\r\n\r\n        return digit;\r\n    }\r\n\r\n    static init() {\r\n        // this.renderer = new PIXI.Renderer({ width: 110, height: 60, backgroundColor: 0x4c566a, antialias: true, autoDensity: true });\r\n        // document.querySelector(\"#timeContainer\").append(this.renderer.view);\r\n\r\n        this.MASTER_CONTAINER = new Component(0, Game.WRAPPER.h - 60 , 110 , 60 );\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary4;\r\n        this.MASTER_CONTAINER.alpha = 1;\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"mouseenter\", () => {\r\n            this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary5;\r\n        });\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"mouseleave\", () => {\r\n            this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary4;\r\n        });\r\n\r\n        this.stage = this.MASTER_CONTAINER.container;\r\n\r\n        this.WIDTH = 120 ;\r\n        this.HEIGHT = 60 ;\r\n\r\n        const timeContainer = new PIXI.Container();\r\n        const minutes = new PIXI.Container();\r\n        const seconds = new PIXI.Container();\r\n        const miliseconds = new PIXI.Container();\r\n\r\n        this.colons = [];\r\n\r\n        for (let i = 0; i < 2; i++) {\r\n            const digit = this.createDigit(i * 9);\r\n            minutes.addChild(digit);\r\n            this.digits.minutes.push(digit);\r\n        }\r\n\r\n        this.colons.push(this.createDigit(16, \"colon\"));\r\n        minutes.addChild(this.colons.at(-1));\r\n\r\n        for (let i = 0; i < 2; i++) {\r\n            const digit = this.createDigit(i * 9);\r\n            seconds.addChild(digit);\r\n            this.digits.seconds.push(digit);\r\n        }\r\n\r\n        this.colons.push(this.createDigit(16, \"colon\"));\r\n        seconds.addChild(this.colons.at(-1));\r\n\r\n        for (let i = 0; i < 3; i++) {\r\n            const digit = this.createDigit(i * 9);\r\n            miliseconds.addChild(digit);\r\n            this.digits.miliseconds.push(digit);\r\n        }\r\n\r\n        minutes.x = 0;\r\n        seconds.x = 24 ;\r\n        miliseconds.x = 48 ;\r\n\r\n        timeContainer.addChild(minutes, seconds, miliseconds);\r\n        timeContainer.x = 23;\r\n\r\n        this.minutes = minutes;\r\n        this.seconds = seconds;\r\n        this.miliseconds = miliseconds;\r\n        this.timeContainer = timeContainer;\r\n\r\n        this.stage.addChild(timeContainer);\r\n        this.rePosition();\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"click\", () => {\r\n            showPopup();\r\n        });\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"tap\", () => {\r\n            showPopup();\r\n        });\r\n    }\r\n\r\n    static rePosition() {\r\n        if (!this.MASTER_CONTAINER) return;\r\n\r\n        this.MASTER_CONTAINER.x = 0;\r\n        if (innerWidth / innerHeight < 1) {\r\n            this.MASTER_CONTAINER.y = Game.STATS.container.y + Game.STATS.container.height + 60 - Timeline.HEIGHT_REDUCTION;\r\n            this.MASTER_CONTAINER.w = Game.WRAPPER.w / 2;\r\n            this.timeContainer.x = (this.MASTER_CONTAINER.w - this.timeContainer.width) / 2;\r\n        } else {\r\n            this.MASTER_CONTAINER.y = Game.WRAPPER.h - 60 ;\r\n            this.MASTER_CONTAINER.w = 110 ;\r\n            this.timeContainer.x = 23 ;\r\n        }\r\n        this.MASTER_CONTAINER.h = 60 ;\r\n\r\n        this.WIDTH = 120 ;\r\n        this.HEIGHT = 60 ;\r\n\r\n        this.minutes.x = 0;\r\n        this.seconds.x = 24 ;\r\n        this.miliseconds.x = 48 ;\r\n\r\n        this.colons.forEach((colon) => {\r\n            colon.x = 16 ;\r\n            colon.y = this.HEIGHT / 2 - 1 ;\r\n            colon.style.fontSize = 16 ;\r\n        });\r\n\r\n        this.digits.minutes.forEach((digit, idx) => {\r\n            digit.x = 9 * idx ;\r\n            digit.y = this.HEIGHT / 2;\r\n            digit.style.fontSize = 16 ;\r\n        });\r\n\r\n        this.digits.seconds.forEach((digit, idx) => {\r\n            digit.x = 9 * idx ;\r\n            digit.y = this.HEIGHT / 2;\r\n            digit.style.fontSize = 16 ;\r\n        });\r\n\r\n        this.digits.miliseconds.forEach((digit, idx) => {\r\n            digit.x = 9 * idx ;\r\n            digit.y = this.HEIGHT / 2;\r\n            digit.style.fontSize = 16 ;\r\n        });\r\n    }\r\n\r\n    static forceUpdate(time) {\r\n        const currentDigits = parseTime(time);\r\n        const lastDigits = parseTime(ObjectsController.lastTimestamp ?? 0);\r\n\r\n        currentDigits.miliseconds.forEach((val, idx) => {\r\n            if (val === lastDigits.miliseconds[idx]) return;\r\n            this.digits.miliseconds[idx].text = val;\r\n        });\r\n\r\n        currentDigits.seconds.forEach((val, idx) => {\r\n            if (val === lastDigits.seconds[idx]) return;\r\n            this.digits.seconds[idx].text = val;\r\n        });\r\n\r\n        currentDigits.minutes.forEach((val, idx) => {\r\n            if (val === lastDigits.minutes[idx]) return;\r\n            this.digits.minutes[idx].text = val;\r\n        });\r\n\r\n        if (!this.EMIT_CHANGE) return;\r\n        this.rePosition();\r\n    }\r\n\r\n    static update(time) {\r\n        if (Game.IS_FULLSCREEN) {\r\n            this.MASTER_CONTAINER.masterContainer.visible = Game.IS_HOVERING_PROGRESS;\r\n        } else {\r\n            this.MASTER_CONTAINER.masterContainer.visible = true;\r\n        }\r\n        \r\n        if (Game.EMIT_STACK.length !== 0) this.EMIT_CHANGE = true;\r\n\r\n        this.forceUpdate(time);\r\n        this.EMIT_CHANGE = false;\r\n        // this.renderer.render(this.stage);\r\n    }\r\n}\r\n","export default \"in vec2 aPosition;\\r\\nin vec3 aColor;\\r\\n\\r\\nout vec3 vColor;\\r\\n\\r\\nuniform mat3 uProjectionMatrix;\\r\\nuniform mat3 uWorldTransformMatrix;\\r\\nuniform mat3 uTransformMatrix;\\r\\n\\r\\nvoid main() {\\r\\n    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;\\r\\n    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\\r\\n    vColor = aColor;\\r\\n}\"","export default \"in vec3 vColor;\\r\\n\\r\\nout vec4 finalColor;\\r\\n\\r\\nvoid main() {\\r\\n    finalColor = vec4(vColor, 1.0) * 0.6;\\r\\n}\"","export default \"struct GlobalUniforms {\\r\\n    uProjectionMatrix : mat3x3<f32>,\\r\\n    uWorldTransformMatrix : mat3x3<f32>,\\r\\n    uWorldColorAlpha : vec4<f32>,\\r\\n    uResolution : vec2<f32>,\\r\\n}\\r\\n\\r\\nstruct LocalUniforms {\\r\\n    uTransformMatrix : mat3x3<f32>,\\r\\n    uColor : vec4<f32>,\\r\\n    uRound : f32,\\r\\n}\\r\\n\\r\\nstruct VertexOutput {\\r\\n    @builtin(position) position: vec4<f32>,\\r\\n    @location(0) vColor: vec3<f32>\\r\\n}\\r\\n\\r\\n@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\\r\\n@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\\r\\n\\r\\n@vertex\\r\\nfn vsMain(\\r\\n    @location(0) aPosition: vec2<f32>,\\r\\n    @location(1) aColor: vec3<f32>\\r\\n) -> VertexOutput {\\r\\n    var mvp: mat3x3<f32> = globalUniforms.uProjectionMatrix * globalUniforms.uWorldTransformMatrix * localUniforms.uTransformMatrix;\\r\\n    var pos: vec3<f32> = mvp * vec3<f32>(\\r\\n        aPosition[0],\\r\\n        aPosition[1],\\r\\n        1.0\\r\\n    );\\r\\n\\r\\n    var vColor: vec3<f32> = aColor;\\r\\n\\r\\n    return VertexOutput(\\r\\n        vec4<f32>(pos[0], pos[1], 0.0, 1.0),\\r\\n        vColor\\r\\n    );\\r\\n}\\r\\n\\r\\n@fragment\\r\\nfn fsMain(\\r\\n    input: VertexOutput\\r\\n) -> @location(0) vec4<f32> {\\r\\n    return vec4<f32>(\\r\\n        input.vColor[0],\\r\\n        input.vColor[1],\\r\\n        input.vColor[2],\\r\\n        1.0,\\r\\n    ) * 0.6;\\r\\n}\"","import { Beatmap } from \"./Beatmap.js\";\r\nimport { Clamp } from \"./Utils.js\";\r\nimport { setAudioTime } from \"./ProgressBar.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { Component } from \"./WindowManager.js\";\r\nimport { PlayContainer } from \"./PlayButtons.js\";\r\nimport vertexSrc from \"./Shaders/Progress/TimingPoint.vert?raw\";\r\nimport fragmentSrc from \"./Shaders/Progress/TimingPoint.frag?raw\";\r\nimport gpuSrc from \"./Shaders/Progress/TimingPoint.wgsl?raw\";\r\n\r\nexport class ProgressBar {\r\n    static renderer;\r\n    static stage;\r\n    static container;\r\n    static line;\r\n    static thumb;\r\n    static timeline;\r\n    static breakKiai;\r\n    static timelineObjs = [];\r\n\r\n    static WIDTH;\r\n    static HEIGHT;\r\n\r\n    static TIMELINE_WIDTH;\r\n    static TIMELINE_HEIGHT;\r\n\r\n    static PERCENTAGE = 0;\r\n    static IS_DRAGGING = false;\r\n    static IS_HOVERING = false;\r\n\r\n    static initLine() {\r\n        this.line = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 4,\r\n                cap: \"round\",\r\n                color: 0x88c0d0,\r\n            })\r\n            .moveTo(0, this.HEIGHT / 2)\r\n            .lineTo(this.WIDTH - 80, this.HEIGHT / 2)\r\n            .stroke();\r\n    }\r\n\r\n    static initThumb() {\r\n        this.thumb = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 4,\r\n                cap: \"round\",\r\n                alignment: 0,\r\n                color: 0x88c0d0,\r\n            })\r\n            .roundRect(-20, -5, 40, 10, 10)\r\n            .fill(0x2e3440)\r\n            .stroke()\r\n            .setStrokeStyle()\r\n            .circle(0, 0, 2)\r\n            .fill(0x88c0d0);\r\n        this.thumb.y = this.HEIGHT / 2;\r\n\r\n        // this.thumb.interactive = true;\r\n        this.thumb.eventMode = \"static\";\r\n\r\n        this.thumb.on(\"mouseenter\", (e) => {\r\n            this.restyle(true);\r\n        });\r\n\r\n        this.thumb.on(\"mouseleave\", (e) => {\r\n            if (!this.IS_DRAGGING) this.restyle();\r\n        });\r\n    }\r\n\r\n    static initContainer() {\r\n        this.container = new PIXI.Container();\r\n\r\n        this.container.addChild(this.line);\r\n        this.container.addChild(this.thumb);\r\n        this.container.x = 40;\r\n        this.container.hitArea = new PIXI.Rectangle(-40, 0, this.WIDTH, this.HEIGHT);\r\n        // this.container.interactive = true;\r\n        this.container.eventMode = \"static\";\r\n\r\n        this.container.on(\"mousedown\", (e) => {\r\n            Game.IS_SEEKING = true;\r\n            this.handleMouseDown(e);\r\n        });\r\n        this.container.on(\"mousemove\", (e) => {\r\n            this.handleMouseMove(e);\r\n        });\r\n        this.container.on(\"mouseup\", (e) => {\r\n            Game.IS_SEEKING = false;\r\n            this.handleMouseUp(e);\r\n        });\r\n        this.container.on(\"mouseleave\", (e) => {\r\n            Game.IS_SEEKING = false;\r\n            if (!this.IS_DRAGGING) return;\r\n            this.handleMouseUp(e);\r\n        });\r\n\r\n        this.container.on(\"touchstart\", (e) => {\r\n            this.handleMouseDown(e);\r\n        });\r\n        this.container.on(\"touchmove\", (e) => {\r\n            this.handleMouseMove(e);\r\n        });\r\n        this.container.on(\"touchend\", (e) => {\r\n            this.handleMouseUp(e);\r\n        });\r\n\r\n        this.stage.addChild(this.container);\r\n    }\r\n\r\n    static initBreakKiai() {\r\n        this.stage.addChildAt(this.breakKiai, 1);\r\n        this.breakKiai.x = 40;\r\n        this.breakKiai.y = this.HEIGHT / 3;\r\n\r\n        if (!Game.BEATMAP_FILE?.audioNode) return;\r\n\r\n        const fullTime = Game.BEATMAP_FILE.audioNode.duration;\r\n        const width = this.WIDTH - 80;\r\n        const height = this.HEIGHT / 3;\r\n\r\n        this.breakKiai.clear();\r\n        Beatmap.breakPeriods.forEach((period) => {\r\n            const startX = (period[0] / fullTime) * width;\r\n            const endX = (period[1] / fullTime) * width;\r\n\r\n            this.breakKiai.rect(startX, 0, endX - startX, height).fill({ color: 0xffffff, alpha: 0.5 });\r\n        });\r\n\r\n        for (let i = 0; i < Beatmap.kiaiList.length; i += 2) {\r\n            const startX = (Beatmap.kiaiList[i].time / fullTime) * width;\r\n            const endX = ((Beatmap.kiaiList[i + 1]?.time ?? fullTime) / fullTime) * width;\r\n\r\n            this.breakKiai.rect(startX, 0, endX - startX, height).fill({ color: 0xd87b0f, alpha: 0.5 });\r\n        }\r\n    }\r\n\r\n    static initTimingPoints() {\r\n        this.timeline.x = 40;\r\n        this.timeline.y = 10;\r\n\r\n        if (!Game.BEATMAP_FILE?.audioNode) return;\r\n\r\n        const fullTime = Game.BEATMAP_FILE.audioNode.duration;\r\n        const width = this.WIDTH - 80;\r\n        const height = this.HEIGHT / 2 - 10;\r\n\r\n        const positionsBuffer = [];\r\n        const colorBuffer = [];\r\n\r\n        Beatmap.timingPointsList.forEach((point, idx) => {\r\n            const x = (point.time / fullTime) * width;\r\n            const color = point.beatstep ? [0.96, 0.26, 0.35] : [0.26, 0.96, 0.38];\r\n\r\n            positionsBuffer.push(...[x, 0, x, height / 2]);\r\n            colorBuffer.push(...[...color, ...color]);\r\n        });\r\n\r\n        const geometry = new PIXI.Geometry({\r\n            attributes: {\r\n                aPosition: positionsBuffer,\r\n                aColor: colorBuffer,\r\n            },\r\n            topology: \"line-list\",\r\n        });\r\n\r\n        this.timeline.geometry = geometry;\r\n    }\r\n\r\n    static reinitPoints() {\r\n        this.stage.removeChild(this.timeline);\r\n\r\n        this.timeline = new PIXI.Mesh({\r\n            geometry: new PIXI.Geometry({\r\n                attributes: {\r\n                    aPosition: [0, 0, 1, 0],\r\n                    aColor: [1, 0, 0, 1, 1, 1],\r\n                },\r\n                topology: \"line-list\",\r\n            }),\r\n            shader: PIXI.Shader.from({\r\n                gl: PIXI.GlProgram.from({\r\n                    vertex: vertexSrc,\r\n                    fragment: fragmentSrc,\r\n                }),\r\n                gpu: PIXI.GpuProgram.from({\r\n                    vertex: {\r\n                        source: gpuSrc,\r\n                        entryPoint: \"vsMain\",\r\n                    },\r\n                    fragment: {\r\n                        source: gpuSrc,\r\n                        entryPoint: \"fsMain\",\r\n                    },\r\n                }),\r\n            }),\r\n        });\r\n        this.timeline.x = 40;\r\n        this.timeline.y = 10;\r\n        this.stage.addChildAt(this.timeline, 0);\r\n    }\r\n\r\n    static init() {\r\n        this.WIDTH = Game.MASTER_CONTAINER.w - (110 + 360 + 60 + 60);\r\n        this.HEIGHT = 60;\r\n\r\n        this.MASTER_CONTAINER = new Component(110 + 360 + 60, Game.WRAPPER.h - 60, this.WIDTH, this.HEIGHT);\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary2;\r\n        this.MASTER_CONTAINER.alpha = 1;\r\n\r\n        this.stage = this.MASTER_CONTAINER.container;\r\n\r\n        const gpu = PIXI.GpuProgram.from({\r\n            vertex: {\r\n                source: gpuSrc,\r\n                entryPoint: \"vsMain\",\r\n            },\r\n            fragment: {\r\n                source: gpuSrc,\r\n                entryPoint: \"fsMain\",\r\n            },\r\n        });\r\n        gpu.autoAssignGlobalUniforms = true;\r\n        gpu.autoAssignLocalUniforms = true;\r\n\r\n        this.timeline = new PIXI.Mesh({\r\n            geometry: new PIXI.Geometry({\r\n                attributes: {\r\n                    aPosition: [0, 0, 1, 0],\r\n                    aColor: [1, 0, 0, 1, 1, 1],\r\n                },\r\n                topology: \"line-list\",\r\n            }),\r\n            shader: PIXI.Shader.from({\r\n                gl: PIXI.GlProgram.from({\r\n                    vertex: vertexSrc,\r\n                    fragment: fragmentSrc,\r\n                }),\r\n                gpu,\r\n            }),\r\n        });\r\n        this.timeline.x = 40;\r\n        this.timeline.y = 10;\r\n        this.stage.addChildAt(this.timeline, 0);\r\n\r\n        this.breakKiai = new PIXI.Graphics();\r\n        this.breakKiai.eventMode = \"none\";\r\n        this.stage.addChildAt(this.breakKiai, 1);\r\n\r\n        this.initLine();\r\n        this.initThumb();\r\n        this.initContainer();\r\n    }\r\n\r\n    static handleMouseDown(e) {\r\n        this.IS_DRAGGING = true;\r\n\r\n        let { x } = this.container.toLocal(e.global);\r\n        let width = this.WIDTH - 80;\r\n\r\n        const percentage = Clamp(x / width, 0, 1);\r\n        setAudioTime(percentage);\r\n\r\n        this.restyle(true);\r\n    }\r\n\r\n    static handleMouseMove(e) {\r\n        if (!this.IS_DRAGGING) return;\r\n\r\n        let { x } = this.container.toLocal(e.global);\r\n        let width = this.WIDTH - 80;\r\n\r\n        const percentage = Clamp(x / width, 0, 1);\r\n        setAudioTime(percentage);\r\n    }\r\n\r\n    static handleMouseUp(e) {\r\n        this.IS_DRAGGING = false;\r\n        this.restyle();\r\n    }\r\n\r\n    static forceResize() {\r\n        if (!this.MASTER_CONTAINER) return;\r\n\r\n        if (innerWidth / innerHeight < 1) {\r\n            this.MASTER_CONTAINER.x = 0;\r\n            this.MASTER_CONTAINER.y = PlayContainer.MASTER_CONTAINER.y + PlayContainer.MASTER_CONTAINER.height;\r\n            this.MASTER_CONTAINER.w = Game.WRAPPER.w;\r\n        } else {\r\n            this.MASTER_CONTAINER.x = 110 + 360 + 60;\r\n            this.MASTER_CONTAINER.y = Game.WRAPPER.h - 60;\r\n            this.MASTER_CONTAINER.w = Game.MASTER_CONTAINER.w - (110 + 360 + 60 + 60);\r\n        }\r\n\r\n        this.MASTER_CONTAINER.h = 60;\r\n\r\n        const width = this.MASTER_CONTAINER.w;\r\n        const height = this.MASTER_CONTAINER.h;\r\n\r\n        if (this.WIDTH === width && this.HEIGHT === height) return;\r\n\r\n        this.WIDTH = width;\r\n        this.HEIGHT = height;\r\n\r\n        this.restyle();\r\n        // if (Game.DEVE_RATIO !== devicePixelRatio) this.reinitPoints();\r\n        this.initTimingPoints();\r\n        this.initBreakKiai();\r\n\r\n        this.thumb.y = this.HEIGHT / 2;\r\n\r\n        this.container.x = 40;\r\n        this.container.hitArea = new PIXI.Rectangle(-40, 0, this.WIDTH, this.HEIGHT);\r\n    }\r\n\r\n    static resize() {\r\n        if (Game.IS_FULLSCREEN) {\r\n            this.MASTER_CONTAINER.masterContainer.visible = Game.IS_HOVERING_PROGRESS;\r\n        } else {\r\n            this.MASTER_CONTAINER.masterContainer.visible = true;\r\n        }\r\n\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.forceResize();\r\n    }\r\n\r\n    static restyle(isHover) {\r\n        let bgColor = Game.COLOR_PALETTES.primary2;\r\n        let accentColor = Game.COLOR_PALETTES.accent1;\r\n\r\n        if (!bgColor) bgColor = 0x2e3440;\r\n        if (!accentColor) accentColor = 0x88c0d0;\r\n\r\n        this.line\r\n            .clear()\r\n            .setStrokeStyle({\r\n                width: 4,\r\n                cap: \"round\",\r\n                color: accentColor,\r\n            })\r\n            .moveTo(0, this.HEIGHT / 2)\r\n            .lineTo(this.WIDTH - 80, this.HEIGHT / 2)\r\n            .stroke();\r\n\r\n        this.thumb\r\n            .clear()\r\n            .setStrokeStyle({\r\n                width: 4,\r\n                cap: \"round\",\r\n                alignment: 0,\r\n                color: accentColor,\r\n            })\r\n            .roundRect(-20, -5, 40, 10, 10)\r\n            .fill(isHover ? accentColor : bgColor)\r\n            .stroke()\r\n            .setStrokeStyle()\r\n            .circle(0, 0, 2)\r\n            .fill(isHover ? bgColor : accentColor);\r\n    }\r\n\r\n    static update(time) {\r\n        this.resize();\r\n\r\n        if (Game.BEATMAP_FILE?.audioNode?.buf) {\r\n            this.thumb.x = (time / (Game.BEATMAP_FILE?.audioNode?.raw_buf.duration * 1000)) * (this.WIDTH - 80);\r\n        }\r\n\r\n        // this.renderer.render(this.stage);\r\n    }\r\n}\r\n","import { Game } from \"../Game.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class ApproachCircle {\r\n    obj;\r\n    hitCircle;\r\n\r\n    constructor(hitCircle) {\r\n        this.hitCircle = hitCircle;\r\n\r\n        const approachCircle = new PIXI.Sprite(Texture.ARGON.APPROACH_CIRCLE.texture);\r\n        approachCircle.anchor.set(0.5);\r\n        approachCircle.zIndex = Game.BEATMAP_FILE?.audioNode?.raw_buf.duration * 1000 + 1;\r\n        this.obj = approachCircle;\r\n\r\n        // this.obj.visible = false;\r\n    }\r\n\r\n    draw(timestamp) {\r\n        const skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n        const textures = skinType !== \"CUSTOM\" ? Texture[skinType] : Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n        const hdScale = textures.APPROACH_CIRCLE.isHD ? 0.5 : 1;\r\n        this.obj.texture = textures.APPROACH_CIRCLE.texture;\r\n\r\n        const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n        const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.hitCircle.colourIdx : this.hitCircle.colourHaxedIdx;\r\n        this.obj.tint = colors[idx % colors.length];\r\n\r\n        let approachRateExpandRate = 1;\r\n\r\n        if (timestamp <= this.hitCircle.time) {\r\n            const preemptRate = (timestamp - (this.hitCircle.time - Beatmap.moddedStats.preempt)) / Beatmap.moddedStats.preempt;\r\n            approachRateExpandRate = Math.max(-3 * Math.min(preemptRate, 1) + 4, 1);\r\n        }\r\n\r\n        const x = this.hitCircle.originalX;\r\n        const y = !Game.MODS.HR ? this.hitCircle.originalY : 384 - this.hitCircle.originalY;\r\n        const stackDistance = this.hitCircle.stackHeight * Beatmap.moddedStats.stackOffset;\r\n\r\n        this.obj.x = (x + stackDistance) * Game.SCALE_RATE;\r\n        this.obj.y = (y + stackDistance) * Game.SCALE_RATE;\r\n\r\n        const circleBaseScale = Beatmap.moddedStats.radius / 54.4;\r\n\r\n        this.obj.scale.set(hdScale * approachRateExpandRate * Game.SCALE_RATE * circleBaseScale * (skinType === \"ARGON\" ? 0.94 : (236 / 256) ** 2));\r\n        this.obj.alpha = this.hitCircle.opacity;\r\n\r\n        if (Game.MODS.HD || timestamp > this.hitCircle.time) this.obj.alpha = 0;\r\n    }\r\n}\r\n","import { Game } from \"../Game.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { ObjectsController } from \"./ObjectsController.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { ProgressBar } from \"../Progress.js\";\r\nimport { ApproachCircle } from \"./ApproachCircle.js\";\r\nimport { NumberSprite } from \"./NumberSprite.js\";\r\nimport { Clamp, Fixed, Dist, Add, FlipHR, binarySearch, easeOutElastic, easeOutElasticHalf, easeOutQuint } from \"../Utils.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { ScoreParser } from \"../ScoreParser.js\";\r\nimport * as d3 from \"d3\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class HitCircle {\r\n    startTime;\r\n    hitTime;\r\n\r\n    endTime;\r\n    killTime;\r\n\r\n    positionX;\r\n    positionY;\r\n\r\n    endX;\r\n    endY;\r\n\r\n    originalX;\r\n    originalY;\r\n\r\n    stackHeight = 0;\r\n    time;\r\n\r\n    obj;\r\n    selected;\r\n    judgementObj;\r\n\r\n    hitCircleSprite;\r\n    hitCircleOverlaySprite;\r\n\r\n    number;\r\n    approachCircleObj;\r\n\r\n    comboIdx = 1;\r\n    colourIdx = 1;\r\n    colourHaxedIdx = 1;\r\n\r\n    opacity = 0;\r\n\r\n    hitSounds;\r\n\r\n    skinIdx = 0;\r\n    skinType = 0;\r\n    props = {\r\n        color: null,\r\n        opacity: null,\r\n        glowOpacity: null,\r\n        glowScale: null,\r\n        blendMode: null,\r\n        expand: null,\r\n        x: null,\r\n        y: null,\r\n    };\r\n\r\n    judgementContainer;\r\n    judgement;\r\n\r\n    isHit = false;\r\n\r\n    drawSelected() {\r\n        const circleBaseScale = Beatmap.moddedStats.radius / 54.4;\r\n\r\n        const stackHeight = this.stackHeight;\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n        const x = this.originalX + stackHeight * currentStackOffset;\r\n        const y = !Game.MODS.HR ? this.originalY + stackHeight * currentStackOffset : 384 - this.originalY + stackHeight * currentStackOffset;\r\n\r\n        this.selected.x = x * Game.SCALE_RATE;\r\n        this.selected.y = y * Game.SCALE_RATE;\r\n\r\n        this.selected.scale.set(circleBaseScale * Game.SCALE_RATE * (236 / 256) ** 2 * (this.skinType === \"0\" ? 1 : 0.5));\r\n    }\r\n\r\n    playHitsound(timestamp, lastTimestamp) {\r\n        if (!this.hitSounds) return;\r\n        if (!Game.BEATMAP_FILE.audioNode.isPlaying) return;\r\n        if (!timestamp || !lastTimestamp) return;\r\n        if (timestamp < this.hitTime || lastTimestamp >= this.hitTime) return;\r\n        if (this.judgement && this.judgement.val === 0) return;\r\n\r\n        if (!ScoreParser.REPLAY_DATA) {\r\n            this.hitSounds.play();\r\n            return;\r\n        }\r\n\r\n        // Will reimplement later for optimization\r\n        const evaluation = binarySearch(ScoreParser.EVAL_LIST, this.time, (evaluation, time) => {\r\n            if (evaluation.time < time) return -1;\r\n            if (evaluation.time > time) return 1;\r\n            return 0;\r\n        });\r\n\r\n        if (evaluation !== -1) this.hitSounds.play();\r\n    }\r\n\r\n    handleSkinChange() {\r\n        if (this.skinIdx === Skinning.SKIN_IDX && this.skinType === Game.SKINNING.type) return;\r\n        this.skinIdx = Skinning.SKIN_IDX;\r\n        this.skinType = Game.SKINNING.type;\r\n\r\n        const skinType = Skinning.SKIN_ENUM[this.skinType];\r\n        const textures = skinType !== \"CUSTOM\" ? Texture[skinType] : Texture.CUSTOM[this.skinIdx];\r\n\r\n        this.hitCircleSprite.texture = textures.HIT_CIRCLE.texture;\r\n        this.hitCircleSprite.scale.set(textures.HIT_CIRCLE.isHD ? 0.5 : 1);\r\n\r\n        this.hitCircleOverlaySprite.texture = textures.HIT_CIRCLE_OVERLAY.texture;\r\n        this.hitCircleOverlaySprite.scale.set(textures.HIT_CIRCLE_OVERLAY.isHD ? 0.5 : 1);\r\n\r\n        this.selected.texture = Game.SKINNING.type === \"0\" ? Texture.SELECTED_ARGON.texture : Texture.SELECTED.texture;\r\n\r\n        if (this.skinType !== \"0\") {\r\n            this.hitCircleSprite.alpha = 0.9;\r\n        } else {\r\n            this.hitCircleSprite.alpha = 1;\r\n        }\r\n    }\r\n\r\n    updateColor(timestamp) {\r\n        // Untint HitCircle on hit when hit animation is disabled\r\n        const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n        const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.colourIdx : this.colourHaxedIdx;\r\n        let color = colors[idx % colors.length];\r\n\r\n        if (this.skinType === \"1\") {\r\n            color = parseInt(\r\n                d3\r\n                    .color(`#${color.toString(16).padStart(6, \"0\")}`)\r\n                    .darker()\r\n                    .hex()\r\n                    .slice(1),\r\n                16\r\n            );\r\n        }\r\n\r\n        if (this.skinType === \"0\" && timestamp > this.hitTime) {\r\n            color = parseInt(\r\n                d3\r\n                    .color(`#${color.toString(16).padStart(6, \"0\")}`)\r\n                    .brighter(1.0)\r\n                    .hex()\r\n                    .slice(1),\r\n                16\r\n            );\r\n        }\r\n\r\n        if (!Game.SLIDER_APPEARANCE.hitAnim && timestamp > this.hitTime) {\r\n            color = 0xffffff;\r\n        }\r\n\r\n        if (this.props.color === color) return;\r\n\r\n        this.props.color = color;\r\n        this.hitCircleSprite.tint = this.props.color;\r\n    }\r\n\r\n    updateOpacity(timestamp) {\r\n        // Calculate current timing stats\r\n        const currentPreempt = Beatmap.moddedStats.preempt;\r\n        const currentFadeIn = Beatmap.moddedStats.fadeIn;\r\n        const fadeOutTime = Game.SLIDER_APPEARANCE.hitAnim ? 240 : 800;\r\n\r\n        // Calculate object opacity\r\n        let currentOpacity = 0;\r\n        if (!Game.MODS.HD) {\r\n            if (timestamp < this.hitTime) {\r\n                currentOpacity = (timestamp - (this.time - currentPreempt)) / currentFadeIn;\r\n            } else {\r\n                if (this.skinType !== \"0\" || (this.skinType === \"0\" && !Game.SLIDER_APPEARANCE.hitAnim)) {\r\n                    currentOpacity = 1 - (timestamp - this.hitTime) / fadeOutTime;\r\n                } else {\r\n                    currentOpacity = 1 - easeOutQuint((timestamp - this.hitTime) / 800);\r\n                }\r\n            }\r\n        } else {\r\n            if (timestamp < this.time - currentPreempt + currentFadeIn) {\r\n                currentOpacity = (timestamp - (this.time - currentPreempt)) / currentFadeIn;\r\n            } else {\r\n                currentOpacity = 1 - (timestamp - (this.time - currentPreempt + currentFadeIn)) / (currentPreempt * 0.3);\r\n            }\r\n        }\r\n        currentOpacity = Clamp(currentOpacity, 0, 1);\r\n        this.opacity = currentOpacity;\r\n\r\n        if (this.hitTime > this.killTime && timestamp > this.killTime - 50) currentOpacity = Clamp((this.killTime - timestamp) / 50, 0, currentOpacity);\r\n        if (currentOpacity === this.props.opacity) return;\r\n\r\n        this.props.opacity = currentOpacity;\r\n        this.hitCircleContainer.alpha = this.props.opacity;\r\n    }\r\n\r\n    updateExpand(timestamp) {\r\n        // Calculate object radius on HR / EZ toggle\r\n        const circleBaseScale = (Beatmap.moddedStats.radius / 54.4) * (this.skinType === \"0\" ? 0.95 : 1);\r\n\r\n        // Calculate object expandation\r\n        let currentExpand = 1;\r\n\r\n        if (this.skinType !== \"0\") {\r\n            if (Game.SLIDER_APPEARANCE.hitAnim && timestamp > this.hitTime) {\r\n                currentExpand = 0.5 * Clamp((timestamp - this.hitTime) / 240, 0, 1) + 1;\r\n            }\r\n            currentExpand = Math.max(currentExpand, 1);\r\n        } else {\r\n            if (Game.SLIDER_APPEARANCE.hitAnim && timestamp > this.hitTime) {\r\n                currentExpand = 1 - 0.2 * easeOutElasticHalf(Clamp((timestamp - this.hitTime) / 400, 0, 1));\r\n            }\r\n        }\r\n\r\n        const scale = currentExpand * circleBaseScale * Game.SCALE_RATE * (236 / 256) ** 2;\r\n        if (this.props.expand === scale) return;\r\n\r\n        this.props.expand = scale;\r\n        this.hitCircleContainer.scale.set(this.props.expand);\r\n    }\r\n\r\n    updatePosition() {\r\n        // Calculate stack offset for this object\r\n        const stackHeight = this.stackHeight;\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n        // Set HitCircle position\r\n        const x = (this.originalX + stackHeight * currentStackOffset) * Game.SCALE_RATE;\r\n        const y = (!Game.MODS.HR ? this.originalY + stackHeight * currentStackOffset : 384 - this.originalY + stackHeight * currentStackOffset) * Game.SCALE_RATE;\r\n\r\n        if (this.props.x !== x) {\r\n            this.props.x = x;\r\n            this.obj.x = x;\r\n        }\r\n\r\n        if (this.props.y !== y) {\r\n            this.props.y = y;\r\n            this.obj.y = y;\r\n        }\r\n    }\r\n\r\n    updateJudgement(timestamp) {\r\n        if (!this.judgement) return;\r\n        this.judgement.draw(timestamp);\r\n    }\r\n\r\n    updateSprite(timestamp) {\r\n        let opacity = 1;\r\n        let scale = 1;\r\n        if (timestamp > this.hitTime && this.skinType === \"0\" && Game.SLIDER_APPEARANCE.hitAnim) {\r\n            opacity = 1 - Clamp((timestamp - this.hitTime) / 400, 0, 1);\r\n        }\r\n\r\n        if (this.props.glowOpacity !== opacity) {\r\n            this.props.glowOpacity = opacity;\r\n            this.hitCircleSprite.alpha = this.props.glowOpacity;\r\n        }\r\n\r\n        if (this.skinType !== \"0\" || !Game.SLIDER_APPEARANCE.hitAnim) {\r\n            let blendMode = this.props.blendMode;\r\n            blendMode = \"normal\";\r\n\r\n            if (this.props.blendMode !== blendMode) {\r\n                this.props.blendMode = blendMode;\r\n                this.hitCircleSprite.blendMode = this.props.blendMode;\r\n            }\r\n\r\n            if (this.props.glowScale !== scale) {\r\n                const skinType = Skinning.SKIN_ENUM[this.skinType];\r\n                const textures = skinType !== \"CUSTOM\" ? Texture[skinType] : Texture.CUSTOM[this.skinIdx];\r\n\r\n                this.props.glowScale = scale;\r\n                this.hitCircleSprite.scale.set(this.props.glowScale * (textures.HIT_CIRCLE.isHD ? 0.5 : 1));\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (timestamp <= this.hitTime) {\r\n            scale = 1;\r\n        } else {\r\n            scale = 1 - 0.1 * easeOutElasticHalf(Clamp((timestamp - this.hitTime) / 400, 0, 1));\r\n        }\r\n\r\n        if (this.props.glowScale !== scale) {\r\n            this.props.glowScale = scale;\r\n            this.hitCircleSprite.scale.set(this.props.glowScale);\r\n        }\r\n\r\n        if (this.isHit === timestamp > this.hitTime) return;\r\n        this.isHit = timestamp > this.hitTime;\r\n\r\n        let blendMode = this.props.blendMode;\r\n\r\n        if (!this.isHit) {\r\n            this.hitCircleSprite.texture = Texture.ARGON.HIT_CIRCLE.texture;\r\n            blendMode = \"normal\";\r\n        }\r\n\r\n        if (this.isHit) {\r\n            this.hitCircleSprite.texture = Texture.ARGON.GLOW.texture;\r\n            blendMode = \"add\";\r\n        }\r\n\r\n        if (this.props.blendMode !== blendMode) {\r\n            this.props.blendMode = blendMode;\r\n            this.hitCircleSprite.blendMode = this.props.blendMode;\r\n        }\r\n    }\r\n\r\n    draw(timestamp) {\r\n        this.handleSkinChange();\r\n        this.updateSprite(timestamp);\r\n        this.updateColor(timestamp);\r\n        this.updateOpacity(timestamp);\r\n        this.updateExpand(timestamp);\r\n        this.updatePosition();\r\n        this.updateJudgement(timestamp);\r\n\r\n        this.number.draw(timestamp);\r\n        this.approachCircleObj.draw(timestamp);\r\n        \r\n        // if (!ProgressBar.IS_DRAGGING) this.playHitsound(timestamp);\r\n    }\r\n\r\n    eval(inputIdx) {\r\n        const radius = Beatmap.moddedStats.radius;\r\n        const currentInput = ScoreParser.CURSOR_DATA[inputIdx];\r\n\r\n        if (!currentInput) {\r\n            return null;\r\n        }\r\n\r\n        // Input before Hit Window\r\n        if (currentInput.time - this.time <= -Beatmap.hitWindows.MEH) return null;\r\n        // Input after Hit Window\r\n        if (currentInput.time - this.time >= Beatmap.hitWindows.MEH) return { val: 0, valV2: 0 };\r\n        // Input during Note Lock\r\n        if (\r\n            ScoreParser.EVAL_LIST.at(-1)?.eval === 0 &&\r\n            Math.abs(currentInput.time - (ScoreParser.EVAL_LIST.at(-1)?.time ?? currentInput.time)) < Beatmap.hitWindows.MEH\r\n        )\r\n            return null;\r\n\r\n        // Input while not pressing any keys / releasing keys\r\n        const prevInput = ScoreParser.CURSOR_DATA[inputIdx - 1];\r\n        if (\r\n            currentInput.inputArray.length === 0 ||\r\n            prevInput.inputArray.length > currentInput.inputArray.length ||\r\n            (prevInput.inputArray.length === currentInput.inputArray.length &&\r\n                JSON.stringify(prevInput.inputArray) === JSON.stringify(currentInput.inputArray))\r\n        )\r\n            return null;\r\n\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n        const additionalMemory = {\r\n            x: this.stackHeight * currentStackOffset,\r\n            y: this.stackHeight * currentStackOffset,\r\n        };\r\n\r\n        // Misaim\r\n        if (\r\n            Fixed(\r\n                Dist(\r\n                    currentInput,\r\n                    Game.MODS.HR\r\n                        ? Add(FlipHR({ x: this.originalX, y: this.originalY }), additionalMemory)\r\n                        : Add({ x: this.originalX, y: this.originalY }, additionalMemory)\r\n                ) / radius,\r\n                2\r\n            ) > 1\r\n        ) {\r\n            this.hitTime = this.killTime;\r\n            this.killTime = this.time + Beatmap.hitWindows.MEH;\r\n            return null;\r\n        }\r\n\r\n        let val = 0;\r\n        const delta = Math.abs(currentInput.time - this.time);\r\n\r\n        if (delta < Beatmap.hitWindows.GREAT) val = 300;\r\n        if (delta >= Beatmap.hitWindows.GREAT && delta < Beatmap.hitWindows.OK) val = 100;\r\n        if (delta >= Beatmap.hitWindows.OK && delta < Beatmap.hitWindows.MEH) val = 50;\r\n\r\n        if (val !== 0) {\r\n            this.hitTime = currentInput.time;\r\n            this.endTime = this.hitTime;\r\n            this.killTime = this.endTime + 240;\r\n        }\r\n\r\n        return { val, valV2: val, delta: currentInput.time - this.time, inputTime: currentInput.time };\r\n    }\r\n\r\n    constructor(positionX, positionY, time, hitSounds) {\r\n        this.originalX = parseInt(positionX);\r\n        this.originalY = parseInt(positionY);\r\n\r\n        this.startPosition = {\r\n            x: this.originalX,\r\n            y: this.originalY\r\n        };\r\n\r\n        this.endPosition = {\r\n            x: this.originalX,\r\n            y: this.originalY\r\n        };\r\n\r\n        this.time = time;\r\n        this.endTime = time;\r\n        this.hitTime = time;\r\n\r\n        this.startTime = time - Beatmap.stats.preempt;\r\n        this.killTime = time + 240;\r\n\r\n        const selected = new PIXI.Sprite(Game.SKINNING.type === \"0\" ? Texture.SELECTED_ARGON.texture : Texture.SELECTED.texture);\r\n        selected.anchor.set(0.5);\r\n        selected.scale.set(Game.SKINNING.type === \"0\" ? 1 : 0.5);\r\n        this.selected = selected;\r\n\r\n        const hitCircleOverlaySprite = new PIXI.Sprite(Texture.ARGON.HIT_CIRCLE_OVERLAY.texture);\r\n        hitCircleOverlaySprite.anchor.set(0.5);\r\n        hitCircleOverlaySprite.scale.set(Texture.ARGON.HIT_CIRCLE_OVERLAY.isHD ? 0.5 : 1);\r\n        this.hitCircleOverlaySprite = hitCircleOverlaySprite;\r\n\r\n        const hitCircleSprite = new PIXI.Sprite(Texture.ARGON.HIT_CIRCLE.texture);\r\n        hitCircleSprite.anchor.set(0.5);\r\n        hitCircleSprite.scale.set(Texture.ARGON.HIT_CIRCLE.isHD ? 0.5 : 1);\r\n        this.hitCircleSprite = hitCircleSprite;\r\n\r\n        this.number = new NumberSprite(this);\r\n        this.judgementContainer = new PIXI.Container();\r\n\r\n        const hitCircleContainer = new PIXI.Container();\r\n        hitCircleContainer.addChild(hitCircleSprite);\r\n        hitCircleContainer.addChild(hitCircleOverlaySprite);\r\n        hitCircleContainer.addChild(this.number.obj);\r\n\r\n        this.hitCircleContainer = hitCircleContainer;\r\n        // hitCircleContainer.x = (this.originalX * Game.WIDTH) / 512;\r\n        // hitCircleContainer.y = (this.originalY * Game.WIDTH) / 512;\r\n\r\n        const container = new PIXI.Container();\r\n        container.addChild(this.judgementContainer);\r\n        container.addChild(this.hitCircleContainer);\r\n\r\n        this.approachCircleObj = new ApproachCircle(this);\r\n\r\n        this.obj = container;\r\n        this.obj.label = `${Math.round(this.time)}-HITCIRCLE`\r\n        // this.obj.visible = false;\r\n\r\n        this.hitSounds = hitSounds;\r\n    }\r\n}\r\n","import { HitCircle } from \"./HitCircle\";\r\nimport { Game } from \"../Game\";\r\nimport { Beatmap } from \"../Beatmap\";\r\nimport { Skinning } from \"../Skinning\";\r\n\r\nexport class SliderEnd {\r\n    baseSlider;\r\n    endPosition;\r\n\r\n    hitCircle;\r\n\r\n    props = {\r\n        alpha: null,\r\n        x: null,\r\n        y: null,\r\n    };\r\n\r\n    constructor(baseSlider) {\r\n        const endPosition = baseSlider.realTrackPoints.at(-1);\r\n        this.hitCircle = new HitCircle(endPosition.x, endPosition.y, baseSlider.endTime, null);\r\n        this.hitCircle.number.obj.alpha = 0;\r\n\r\n        this.baseSlider = baseSlider;\r\n        this.endPosition = endPosition;\r\n    }\r\n\r\n    updatePosition() {\r\n        const stackHeight = this.baseSlider.stackHeight;\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n        const x = this.endPosition.x + stackHeight * currentStackOffset;\r\n        const y = !Game.MODS.HR ? this.endPosition.y + stackHeight * currentStackOffset : 384 - this.endPosition.y + stackHeight * currentStackOffset;\r\n\r\n        if (this.props.x !== x) {\r\n            this.props.x = x;\r\n            this.hitCircle.obj.x = this.props.x * Game.SCALE_RATE;\r\n        }\r\n\r\n        if (this.props.y !== y) {\r\n            this.props.y = y;\r\n            this.hitCircle.obj.y = this.props.y * Game.SCALE_RATE;\r\n        }\r\n    }\r\n\r\n    getAlpha(timestamp) {\r\n        const currentPreempt = Beatmap.moddedStats.preempt;\r\n        const currentFadeIn = Beatmap.moddedStats.fadeIn;\r\n\r\n        const startTime = this.baseSlider.time - currentPreempt + currentPreempt / 3;\r\n\r\n        if (timestamp < this.baseSlider.endTime && !Game.SLIDER_APPEARANCE.snaking) {\r\n            return this.baseSlider.opacity;\r\n        }\r\n\r\n        if (timestamp < startTime) {\r\n            return 0;\r\n        }\r\n\r\n        if (timestamp >= startTime && timestamp < startTime + currentFadeIn) {\r\n            return ((timestamp - startTime) / currentFadeIn) * 0.9;\r\n        }\r\n\r\n        if (timestamp > startTime + currentFadeIn && Game.MODS.HD) {\r\n            return this.baseSlider.opacity * 0.9;\r\n        }\r\n\r\n        if (timestamp >= startTime + currentFadeIn && timestamp < this.baseSlider.endTime) {\r\n            return 0.9;\r\n        }\r\n    }\r\n\r\n    draw(timestamp) {\r\n        if (!Game.SLIDER_APPEARANCE.sliderend || Skinning.SKIN_ENUM[Game.SKINNING.type] === \"ARGON\") {\r\n            if (this.props.alpha !== 0) {\r\n                this.props.alpha = 0;\r\n                this.hitCircle.obj.alpha = 0;\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        this.hitCircle.colourHaxedIdx = this.baseSlider.colourHaxedIdx;\r\n        this.hitCircle.colourIdx = this.baseSlider.colourIdx;\r\n\r\n        this.hitCircle.draw(timestamp);\r\n        this.hitCircle.number.obj.alpha = 0;\r\n\r\n        this.updatePosition();\r\n\r\n        const alpha = this.getAlpha(timestamp);\r\n        if (alpha !== undefined && (this.props.alpha !== alpha || this.hitCircle.props.alpha !== alpha)) {\r\n            this.props.alpha = alpha;\r\n            this.hitCircle.hitCircleContainer.alpha = alpha;\r\n        }\r\n    }\r\n}\r\n","export default \"precision mediump float;\\r\\nattribute vec4 aPosition;\\r\\nattribute float isCirc;\\r\\n\\r\\nout float dist;\\r\\n\\r\\nuniform float dx, ox, dy, oy;\\r\\nuniform float inverse;\\r\\nuniform vec2 ballPosition;\\r\\nuniform float startt;\\r\\nuniform float endt;\\r\\n\\r\\nvoid main() {\\r\\n    dist = aPosition[3];\\r\\n\\r\\n    float distance_var = 0.0;\\r\\n    if (aPosition[2] < startt || aPosition[2] > endt) distance_var = 1.0;\\r\\n\\r\\n    float x = aPosition[0];\\r\\n    float y = aPosition[1];\\r\\n\\r\\n    if (isCirc == 1.0) {\\r\\n        x += ballPosition[0];\\r\\n        y += ballPosition[1];\\r\\n    }\\r\\n\\r\\n    y = inverse == 0.0 ? y : 384.0 - y;\\r\\n\\r\\n    if (isCirc == 1.0) {\\r\\n        gl_Position = vec4(x, y, aPosition[3], 1.0);\\r\\n    } else {\\r\\n        gl_Position = vec4(x, y, aPosition[3] + 2.0 * distance_var, 1.0);\\r\\n    }\\r\\n    gl_Position.x = -1.0 + x * dx + ox;\\r\\n    gl_Position.y = (y * dy + 1.0) + oy;\\r\\n}\"","export default \"in float dist;\\r\\n\\r\\nout vec4 finalColor;\\r\\n\\r\\nuniform float circleBaseScale;\\r\\n\\r\\nuniform float alpha;\\r\\nuniform float bodyAlpha;\\r\\nuniform vec4 borderColor;\\r\\nuniform vec4 innerColor;\\r\\nuniform vec4 outerColor;\\r\\nuniform float borderWidth;\\r\\n\\r\\nvoid main() {\\r\\n    float position = dist / circleBaseScale;\\r\\n\\r\\n    float a = 1.0;\\r\\n    float innerWidth = 1.0 - borderWidth;\\r\\n    float blurRate = 0.02;\\r\\n\\r\\n    // Set body color\\r\\n    vec4 color = mix(innerColor, outerColor, position);\\r\\n\\r\\n    // Set border color\\r\\n    if (position >= innerWidth + blurRate) {\\r\\n        color = borderColor;\\r\\n    }\\r\\n\\r\\n    // Set body alpha\\r\\n    if (position < innerWidth) {\\r\\n        a = bodyAlpha;\\r\\n    }\\r\\n\\r\\n    // Anti-aliasing at outer edge\\r\\n    if (1.0 - position < blurRate) {\\r\\n        a = (1.0 - position) / blurRate; \\r\\n    }\\r\\n\\r\\n    // Anti-aliasing at inner edge\\r\\n    if (position >= innerWidth && position < innerWidth + blurRate) {\\r\\n        float mu = (position - innerWidth) / blurRate;\\r\\n        color = borderColor * mu + (1.0 - mu) * color;\\r\\n\\r\\n        // a = 1.0;\\r\\n        // if (skinning != 0.0) a = 1.0 * mu + (1.0 - mu) * 0.7;\\r\\n        a = 1.0 * mu + (1.0 - mu) * bodyAlpha;\\r\\n    }\\r\\n\\r\\n    color.a = 1.0;\\r\\n\\r\\n    finalColor = vec4(color.rgb, 1.0) * a * alpha * (position > 1.0 ? 0.0 : 1.0);\\r\\n    // finalColor = vec4(vec3(1.0 - position), 1.0) * (position > 1.0 ? 0.0 : 1.0);\\r\\n}\"","export default \"struct CustomUniforms {\\r\\n    // Vertex Uniforms\\r\\n    dx: f32,\\r\\n    ox: f32,\\r\\n    dy: f32,\\r\\n    oy: f32,\\r\\n    inverse: f32,\\r\\n    startt: f32,\\r\\n    endt: f32,\\r\\n    stackOffset: f32,\\r\\n    ballPosition: vec2<f32>,\\r\\n    // Fragment Uniforms\\r\\n    circleBaseScale: f32,\\r\\n    alpha: f32,\\r\\n    bodyAlpha: f32,\\r\\n    borderColor: vec4<f32>,\\r\\n    innerColor: vec4<f32>,\\r\\n    outerColor: vec4<f32>,\\r\\n    borderWidth: f32,\\r\\n}\\r\\n\\r\\nstruct VertexOutput {\\r\\n    @builtin(position) position : vec4<f32>,\\r\\n    @location(0) dist : f32,\\r\\n}\\r\\n\\r\\n@group(0) @binding(0) var<uniform> customUniforms : CustomUniforms;\\r\\n\\r\\n@vertex\\r\\nfn vsMain(\\r\\n    @location(0) aPosition: vec4<f32>,\\r\\n    @location(1) isCirc: f32,\\r\\n) -> VertexOutput {\\r\\n    var dist = aPosition[3];\\r\\n\\r\\n    var distance_var = 0.0;\\r\\n    if (aPosition[2] < customUniforms.startt || aPosition[2] > customUniforms.endt) {\\r\\n        distance_var = 1.0;\\r\\n    }\\r\\n\\r\\n    var x: f32 = aPosition.x;\\r\\n    var y: f32 = aPosition.y;\\r\\n\\r\\n    if (isCirc == 1.0) {\\r\\n        x += customUniforms.ballPosition.x;\\r\\n        y += customUniforms.ballPosition.y;\\r\\n    }\\r\\n\\r\\n    if (customUniforms.inverse > 0) {\\r\\n        y = 384.0 - y;\\r\\n    }\\r\\n\\r\\n    var z: f32 = aPosition[3] + 2.0 * distance_var;\\r\\n\\r\\n    var offset_x = customUniforms.ox;\\r\\n    var offset_y = customUniforms.oy;\\r\\n\\r\\n    if (isCirc == 1.0) {\\r\\n        return VertexOutput(\\r\\n            vec4<f32>(\\r\\n                -1.0 + x * customUniforms.dx + offset_x,\\r\\n                (y * customUniforms.dy + 1.0) + offset_y,\\r\\n                aPosition[3],\\r\\n                1.0\\r\\n            ),\\r\\n            dist\\r\\n        );\\r\\n    }\\r\\n\\r\\n    return VertexOutput(\\r\\n        vec4<f32>(\\r\\n            -1.0 + x * customUniforms.dx + offset_x,\\r\\n            (y * customUniforms.dy + 1.0) + offset_y,\\r\\n            z,\\r\\n            1.0\\r\\n        ),\\r\\n        dist\\r\\n    );\\r\\n}\\r\\n\\r\\n@fragment\\r\\nfn fsMain(\\r\\n    input: VertexOutput\\r\\n) -> @location(0) vec4<f32> {\\r\\n    var position = input.dist / customUniforms.circleBaseScale;\\r\\n\\r\\n    var a = 1.0;\\r\\n    var innerWidth = 1.0 - customUniforms.borderWidth;\\r\\n    var blurRate = 0.02;\\r\\n\\r\\n    var color: vec4<f32> = mix(customUniforms.innerColor, customUniforms.outerColor, position);\\r\\n\\r\\n    if (position >= innerWidth + blurRate) {\\r\\n        color = customUniforms.borderColor;\\r\\n    }\\r\\n\\r\\n    if (position < innerWidth) {\\r\\n        a = customUniforms.bodyAlpha;\\r\\n    }\\r\\n\\r\\n    if (1.0 - position < blurRate) {\\r\\n        a = (1.0 - position) / blurRate; \\r\\n    }\\r\\n\\r\\n    if (position >= innerWidth && position < innerWidth + blurRate) {\\r\\n        var mu: f32 = (position - innerWidth) / blurRate;\\r\\n        color = customUniforms.borderColor * mu + (1.0 - mu) * color;\\r\\n\\r\\n        a = 1.0 * mu + (1.0 - mu) * customUniforms.bodyAlpha;\\r\\n    }\\r\\n\\r\\n    color[3] = 1.0;\\r\\n\\r\\n    if (position > 1.0) {\\r\\n        return vec4<f32>(0.0, 0.0, 0.0, 0.0);\\r\\n    }\\r\\n    \\r\\n    return vec4<f32>(color[0], color[1], color[2], 1.0) * a * customUniforms.alpha;\\r\\n    // return vec4<f32>(vec3<f32>(1.0 - position), 1.0);\\r\\n}\"","export default \"@vertex\\r\\nfn vsMain(\\r\\n    @location(0) aPosition: vec2f\\r\\n) -> @builtin(position) vec4f {\\r\\n    return vec4f(aPosition, 1.0, 1.0);\\r\\n}\\r\\n\\r\\n@fragment\\r\\nfn fsMain(\\r\\n    @builtin(position) position: vec4f\\r\\n) -> @location(0) vec4f {\\r\\n    return vec4f(0, 0, 0, 1);\\r\\n}\"","export default \"in vec2 aPosition;\\r\\n\\r\\nvoid main() {\\r\\n    gl_Position = vec4(aPosition, 1.0, 1.0);\\r\\n}\"","export default \"out vec4 finalColor;\\r\\n\\r\\nvoid main() {\\r\\n    finalColor = vec4(0.0, 0.0, 0.0, 0.0);\\r\\n}\"","import * as PIXI from \"pixi.js\";\r\nimport { Game } from \"../Game\";\r\n\r\nimport clearSrc from \"../Shaders/Clear/Clear.wgsl?raw\";\r\nimport clearVert from \"../Shaders/Clear/Clear.vert?raw\";\r\nimport clearFrag from \"../Shaders/Clear/Clear.frag?raw\";\r\n\r\nconst topologyStringToId = {\r\n\t\"point-list\": 0,\r\n\t\"line-list\": 1,\r\n\t\"line-strip\": 2,\r\n\t\"triangle-list\": 3,\r\n\t\"triangle-strip\": 4,\r\n};\r\n\r\nfunction getGraphicsStateKey(\r\n\tgeometryLayout,\r\n\tshaderKey,\r\n\tstate,\r\n\tblendMode,\r\n\ttopology,\r\n) {\r\n\treturn (\r\n\t\t(geometryLayout << 24) | // Allocate the 8 bits for geometryLayouts at the top\r\n\t\t(shaderKey << 16) | // Next 8 bits for shaderKeys\r\n\t\t(state << 10) | // 6 bits for state\r\n\t\t(blendMode << 5) | // 5 bits for blendMode\r\n\t\ttopology\r\n\t); // And 3 bits for topology at the least significant position\r\n}\r\n\r\nconst clearGeometry = new PIXI.Geometry({\r\n\tattributes: {\r\n\t\taPosition: new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]),\r\n\t},\r\n\tindexBuffer: new Uint16Array([0, 1, 2, 0, 2, 3]),\r\n});\r\n\r\nconst clearGl = PIXI.GlProgram.from({\r\n\tvertex: clearVert,\r\n\tfragment: clearFrag,\r\n});\r\n\r\nconst clearGpu = PIXI.GpuProgram.from({\r\n\tvertex: {\r\n\t\tsource: clearSrc,\r\n\t\tentryPoint: \"vsMain\",\r\n\t},\r\n\tfragment: {\r\n\t\tsource: clearSrc,\r\n\t\tentryPoint: \"fsMain\",\r\n\t},\r\n});\r\n\r\nconst clearShader = PIXI.Shader.from({\r\n\tgl: clearGl,\r\n\tgpu: clearGpu,\r\n});\r\n\r\nconst depthFunc = {\r\n\t\"-1\": \"always\",\r\n\t0: \"less\",\r\n\t1: \"equal\",\r\n};\r\n\r\nexport class SliderMeshContainer extends PIXI.RenderContainer {\r\n\tpassCount = 0;\r\n\r\n\tconstructor(body) {\r\n\t\tsuper({\r\n\t\t\trender: (renderer) => {\r\n\t\t\t\tif (renderer.gpu) {\r\n\t\t\t\t\tthis.webGPURender(renderer, body);\r\n\t\t\t\t}\r\n\t\t\t\tif (renderer.gl) {\r\n\t\t\t\t\tthis.webGLRender(renderer, body);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tcreatePipeline(renderer, geometry, program, state, topology) {\r\n\t\tconst device = renderer.gpu.device;\r\n\t\tconst buffers = renderer.pipeline._createVertexBufferLayouts(geometry, program);\r\n\t\tconst blendModes = renderer.state.getColorTargets(state);\r\n\r\n\t\tblendModes[0].writeMask = renderer.pipeline._colorMask;\r\n\r\n\t\tconst layout = renderer.shader.getProgramData(program).pipeline;\r\n\t\tconst descriptor = {\r\n\t\t\tvertex: {\r\n\t\t\t\tmodule: renderer.pipeline._getModule(program.vertex.source),\r\n\t\t\t\tentryPoint: program.vertex.entryPoint,\r\n\t\t\t\tbuffers,\r\n\t\t\t},\r\n\t\t\tfragment: {\r\n\t\t\t\tmodule: renderer.pipeline._getModule(program.fragment.source),\r\n\t\t\t\tentryPoint: program.fragment.entryPoint,\r\n\t\t\t\ttargets: blendModes,\r\n\t\t\t},\r\n\t\t\tprimitive: {\r\n\t\t\t\ttopology,\r\n\t\t\t\tcullMode: state.cullMode,\r\n\t\t\t},\r\n\t\t\tlayout,\r\n\t\t\tmultisample: {\r\n\t\t\t\tcount: renderer.pipeline._multisampleCount,\r\n\t\t\t},\r\n\t\t\t// depthStencil,\r\n\t\t\tlabel: `PIXI Pipeline`,\r\n\t\t};\r\n\r\n\t\t// only apply if the texture has stencil or depth\r\n\t\tif (renderer.pipeline._depthStencilAttachment) {\r\n\t\t\t// mask states..\r\n\t\t\tdescriptor.depthStencil = {\r\n\t\t\t\t...renderer.pipeline._stencilState,\r\n\t\t\t\tformat: \"depth24plus-stencil8\",\r\n\t\t\t\tdepthWriteEnabled: state.depthTest,\r\n\t\t\t\tdepthCompare: depthFunc[this.passCount],\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tconst pipeline = device.createRenderPipeline(descriptor);\r\n\t\treturn pipeline;\r\n\t}\r\n\r\n\tgetPipeline(renderer, geometry, program, state) {\r\n\t\tif (!geometry._layoutKey) {\r\n\t\t\tPIXI.ensureAttributes(geometry, program.attributeData);\r\n\r\n\t\t\t// prepare the geometry for the pipeline\r\n\t\t\trenderer.pipeline._generateBufferKey(geometry);\r\n\t\t}\r\n\r\n\t\tconst topology = geometry.topology;\r\n\r\n\t\tconst key = getGraphicsStateKey(\r\n\t\t\tgeometry._layoutKey,\r\n\t\t\tprogram._layoutKey,\r\n\t\t\tstate.data,\r\n\t\t\tstate._blendModeId,\r\n\t\t\ttopologyStringToId[topology],\r\n\t\t);\r\n\r\n\t\tif (renderer.pipeline._pipeCache[key])\r\n\t\t\treturn renderer.pipeline._pipeCache[key];\r\n\r\n\t\trenderer.pipeline._pipeCache[key] = this.createPipeline(\r\n\t\t\trenderer,\r\n\t\t\tgeometry,\r\n\t\t\tprogram,\r\n\t\t\tstate,\r\n\t\t\ttopology,\r\n\t\t);\r\n\t\treturn renderer.pipeline._pipeCache[key];\r\n\t}\r\n\r\n\tsetPipeline(renderer, geometry, program, state) {\r\n\t\tconst pipeline = this.getPipeline(renderer, geometry, program, state);\r\n\t\trenderer.encoder.setPipeline(pipeline);\r\n\t}\r\n\r\n\tdraw(renderer, geometry, shader, state) {\r\n\t\trenderer.renderTarget.renderTarget.depth = true;\r\n\t\tthis.setPipeline(renderer, geometry, shader.gpuProgram, state);\r\n\t\trenderer.encoder.setGeometry(geometry, shader.gpuProgram);\r\n\t\trenderer.encoder._setShaderBindGroups(shader, undefined);\r\n\r\n\t\trenderer.encoder.renderPassEncoder.drawIndexed(\r\n\t\t\tgeometry.indexBuffer.data.length,\r\n\t\t\tgeometry.instanceCount,\r\n\t\t\t0,\r\n\t\t);\r\n\t}\r\n\r\n\tdrawGPUSlider(renderer, body, state) {\r\n\t\tconst base_ox = body.transform.ox;\r\n\t\tconst base_oy = body.transform.oy;\r\n\r\n\t\tbody.shader.resources.customUniforms.uniforms.ox = base_ox;\r\n\t\tbody.shader.resources.customUniforms.uniforms.oy = base_oy;\r\n\r\n\t\tthis.draw(renderer, body.geometry, body.shader, state);\r\n\t}\r\n\r\n\tdrawGPUCircle(renderer, body, state) {\r\n\t\tthis.draw(renderer, body.circleGeometry, body.shader, state);\r\n\t}\r\n\r\n\twebGPURender(renderer, body) {\r\n\t\tconst state = PIXI.State.for2d();\r\n\t\tstate.depthTest = true;\r\n\r\n        const base_ox = body.transform.ox;\r\n\t\tconst base_oy = body.transform.oy;\r\n\r\n\t\t// Clear Depth\r\n\t\t// VERY IMPORTANT\r\n\t\tthis.passCount = -1;\r\n\t\trenderer.pipeline.setColorMask(0b0000);\r\n\t\tthis.draw(renderer, clearGeometry, clearShader, state);\r\n\r\n\t\t// Set min depth\r\n\t\t// ALSO VERY IMPORTANT\r\n\t\tthis.passCount = 0;\r\n\t\trenderer.pipeline.setColorMask(0b0000);\r\n\r\n\t\tbody.shader.resources.customUniforms.uniforms.startt = body.startt;\r\n\t\tbody.shader.resources.customUniforms.uniforms.endt = body.endt;\r\n\r\n\t\tthis.drawGPUSlider(renderer, body, state);\r\n\t\tif (!(body.startt === 0.0 && body.endt === 1.0))\r\n\t\t\tthis.drawGPUCircle(renderer, body, state);\r\n\r\n\t\t// le draw\r\n\t\t// IMPORTANT\r\n\t\tthis.passCount = 1;\r\n\t\trenderer.pipeline.setColorMask(0b1111);\r\n\r\n\t\tthis.drawGPUSlider(renderer, body, state);\r\n\t\tif (!(body.startt === 0.0 && body.endt === 1.0))\r\n\t\t\tthis.drawGPUCircle(renderer, body, state);\r\n\r\n\t\tstate.depthTest = false;\r\n\t\tbody.shader.resources.customUniforms.uniforms.ox = base_ox;\r\n\t\tbody.shader.resources.customUniforms.uniforms.oy = base_oy;\r\n\t}\r\n\r\n\twebGLRender(renderer, body) {\r\n\t\tconst state = PIXI.State.for2d();\r\n\t\tconst drawMode = 4;\r\n\r\n\t\tconst gl = renderer.gl;\r\n\t\tgl.clearDepth(1.0);\r\n\t\tgl.clear(gl.DEPTH_BUFFER_BIT);\r\n\t\tgl.colorMask(false, false, false, false);\r\n\r\n\t\trenderer.state.set(state);\r\n\t\trenderer.state.setDepthTest(true);\r\n\r\n\t\tlet glType;\r\n\t\tlet indexLength;\r\n\r\n\t\tconst base_ox = body.transform.ox;\r\n\t\tconst base_oy = body.transform.oy;\r\n\r\n\t\tfunction bind(geometry, shader) {\r\n\t\t\trenderer.shader.bind(shader);\r\n\t\t\trenderer.geometry.bind(geometry, shader.glProgram);\r\n\t\t\tconst byteSize = geometry.indexBuffer.data.BYTES_PER_ELEMENT;\r\n\t\t\tglType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\r\n\t\t\tindexLength = geometry.indexBuffer.data.length;\r\n\t\t}\r\n\r\n\t\tfunction drawCircle() {\r\n\t\t\tbind(body.circleGeometry, body.shader);\r\n\t\t\tgl.drawElements(drawMode, indexLength, glType, 0);\r\n\t\t}\r\n\r\n\t\tfunction drawSlider() {\r\n\t\t\tbody.shader.resources.customUniforms.uniforms.ox = base_ox;\r\n\t\t\tbody.shader.resources.customUniforms.uniforms.oy = base_oy;\r\n\r\n\t\t\tbind(body.geometry, body.shader);\r\n\t\t\tgl.drawElements(drawMode, indexLength, glType, 0);\r\n\t\t}\r\n\r\n\t\tbody.shader.resources.customUniforms.uniforms.startt = body.startt;\r\n\t\tbody.shader.resources.customUniforms.uniforms.endt = body.endt;\r\n\r\n\t\t// First pass\r\n\t\tif (!(body.startt === 0.0 && body.endt === 1.0)) drawCircle();\r\n\t\tdrawSlider();\r\n\r\n\t\tgl.depthFunc(gl.EQUAL);\r\n\t\tgl.colorMask(true, true, true, true);\r\n\r\n\t\t// Second pass\r\n\t\tif (!(body.startt === 0.0 && body.endt === 1.0)) drawCircle();\r\n\t\tdrawSlider();\r\n\r\n\t\tgl.depthFunc(gl.LESS);\r\n\r\n\t\trenderer.state.setDepthTest(false);\r\n\r\n\t\tbody.shader.resources.customUniforms.uniforms.ox = base_ox;\r\n\t\tbody.shader.resources.customUniforms.uniforms.oy = base_oy;\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport vertexSrc from \"../Shaders/SliderBody.vert?raw\";\r\nimport fragmentSrc from \"../Shaders/SliderBody.frag?raw\";\r\nimport fragFilter from \"../Shaders/Alpha.frag?raw\";\r\nimport gpuSrc from \"../Shaders/SliderBody.wgsl?raw\";\r\nimport gpuFilter from \"../Shaders/Alpha.wgsl?raw\";\r\nimport { Game } from \"../Game\";\r\nimport { Skinning } from \"../Skinning\";\r\nimport { Beatmap } from \"../Beatmap\";\r\nimport { SliderMeshContainer } from \"./SliderMeshContainer\";\r\n\r\nconst DIVIDES = 64;\r\n\r\nexport class SliderBody {\r\n    container;\r\n    filter;\r\n\r\n    bodyMesh;\r\n    circleMesh;\r\n    shader;\r\n\r\n    angleList;\r\n    slider;\r\n\r\n    startt = 0.0;\r\n    endt = 1.0;\r\n\r\n    scaleRate = 1;\r\n\r\n    static RADIUS = 54.4 * (236 / 256);\r\n\r\n    transform = {\r\n        ox: 0,\r\n        oy: 0,\r\n        dx: 0,\r\n        dy: 0,\r\n    };\r\n\r\n    ballPosition = {\r\n        x: 0,\r\n        y: 0,\r\n    };\r\n\r\n    constructor(angleList, curveGeometry, circleGeometry, slider, isSelected) {\r\n        this.angleList = angleList;\r\n        this.isSelected = isSelected;\r\n        this.slider = slider;\r\n\r\n        const gl = PIXI.GlProgram.from({\r\n            vertex: vertexSrc,\r\n            fragment: fragmentSrc,\r\n        });\r\n\r\n        const gpu = PIXI.GpuProgram.from({\r\n            vertex: {\r\n                source: gpuSrc,\r\n                entryPoint: \"vsMain\",\r\n            },\r\n            fragment: {\r\n                source: gpuSrc,\r\n                entryPoint: \"fsMain\",\r\n            },\r\n        });\r\n        gpu.autoAssignGlobalUniforms = true;\r\n        gpu.autoAssignLocalUniforms = true;\r\n\r\n        this.shader = PIXI.Shader.from({\r\n            gl,\r\n            gpu,\r\n            resources: {\r\n                customUniforms: {\r\n                    // Vertex Uniforms\r\n                    dx: { value: 0, type: \"f32\" },\r\n                    ox: { value: 0, type: \"f32\" },\r\n                    dy: { value: 0, type: \"f32\" },\r\n                    oy: { value: 0, type: \"f32\" },\r\n                    inverse: { value: 0, type: \"f32\" },\r\n                    startt: { value: 0, type: \"f32\" },\r\n                    endt: { value: 0, type: \"f32\" },\r\n                    stackOffset: { value: 0, type: \"f32\" },\r\n                    ballPosition: { value: [0, 0], type: \"vec2<f32>\" },\r\n                    // Fragment Uniforms\r\n                    circleBaseScale: { value: 1, type: \"f32\" },\r\n                    alpha: { value: 1.0, type: \"f32\" },\r\n                    bodyAlpha: { value: 1, type: \"f32\" },\r\n                    borderColor: { value: [1.0, 1.0, 1.0, 1.0], type: \"vec4<f32>\" },\r\n                    innerColor: { value: [0.0, 0.0, 0.0, 0.0], type: \"vec4<f32>\" },\r\n                    outerColor: { value: [0.0, 0.0, 0.0, 0.0], type: \"vec4<f32>\" },\r\n                    borderWidth: { value: 0.128, type: \"f32\" },\r\n                },\r\n            },\r\n        });\r\n\r\n        this.geometry = curveGeometry;\r\n        this.circleGeometry = circleGeometry;\r\n\r\n        // console.log(curveGeometry);\r\n\r\n        this.container = new SliderMeshContainer(this);\r\n\r\n        this.tint = [0.0, 0.0, 0.0, 1.0];\r\n    }\r\n\r\n    update() {\r\n        const SKIN_TYPE = parseInt(Game.SKINNING.type);\r\n        const IS_SELECTED = this.isSelected;\r\n\r\n        const sliderTrackOverride = Skinning.SLIDER_TRACK_OVERRIDE;\r\n        const tint = this.tint;\r\n        const borderColor =\r\n            SKIN_TYPE === 0 || SKIN_TYPE === 1 || IS_SELECTED\r\n                ? tint\r\n                : SKIN_TYPE === 2 || SKIN_TYPE === 3\r\n                ? [1, 1, 1, 1]\r\n                : Skinning.SLIDER_BORDER ?? [1, 1, 1, 1];\r\n        const bodyColor = SKIN_TYPE === 0 || SKIN_TYPE === 1 ? tint : sliderTrackOverride ?? this.tint;\r\n        const circleBaseScale = (Beatmap.moddedStats.radius / 54.4) * (SKIN_TYPE !== 0 || IS_SELECTED ? 1 : 0.95);\r\n        const bodyAlpha = IS_SELECTED ? 0 : SKIN_TYPE !== 0 ? 0.7 : 1;\r\n        const borderWidth = SKIN_TYPE === 0 ? 0.128 * 1.65 : 0.115;\r\n\r\n        let innerColor, outerColor;\r\n\r\n        switch (SKIN_TYPE) {\r\n            case 0: {\r\n                outerColor = SliderBody.darken(bodyColor, 4.0);\r\n                innerColor = SliderBody.darken(bodyColor, 4.0);\r\n                break;\r\n            }\r\n            case 1: {\r\n                outerColor = SliderBody.darken(bodyColor, 2.0);\r\n                innerColor = SliderBody.darken(bodyColor, 0.5);\r\n                break;\r\n            }\r\n            case 3: {\r\n                outerColor = SliderBody.lighten(bodyColor, 0.1);\r\n                innerColor = SliderBody.darken(bodyColor, 0.5);\r\n                break;\r\n            }\r\n            default: {\r\n                outerColor = SliderBody.darken(bodyColor, 0.1);\r\n                innerColor = SliderBody.lighten(bodyColor, 0.5);\r\n                break;\r\n            }\r\n        }\r\n\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n        const dx = (2 * (Game.WIDTH / 512)) / Game.APP.renderer.width;\r\n        const dy = (-2 * Game.HEIGHT) / Game.APP.renderer.height / 384;\r\n\r\n        const offsetX = this.slider.stackHeight * currentStackOffset * dx;\r\n        const offsetY = this.slider.stackHeight * currentStackOffset * dy;\r\n\r\n        const transform = {\r\n            dx: dx,\r\n            ox: (2 * (Game.MASTER_CONTAINER.x + Game.OFFSET_X)) / Game.APP.renderer.width + offsetX,\r\n            dy: dy,\r\n            oy: (-2 * (Game.MASTER_CONTAINER.y + Game.OFFSET_Y + Game.WRAPPER.y)) / Game.APP.renderer.height + offsetY,\r\n        };\r\n\r\n        this.transform = transform;\r\n\r\n        this.shader.resources.customUniforms.uniforms.dx = transform.dx;\r\n        this.shader.resources.customUniforms.uniforms.ox = transform.ox;\r\n        this.shader.resources.customUniforms.uniforms.dy = transform.dy;\r\n        this.shader.resources.customUniforms.uniforms.oy = transform.oy;\r\n        this.shader.resources.customUniforms.uniforms.inverse = Game.MODS.HR ? 1 : 0;\r\n        this.shader.resources.customUniforms.uniforms.stackOffset = this.slider.stackHeight * currentStackOffset;\r\n\r\n        const point = SliderBody.getPointAtT(this.angleList, this.startt, this.endt);\r\n        this.ballPosition = point;\r\n        this.shader.resources.customUniforms.uniforms.ballPosition = [point.x, point.y];\r\n\r\n        this.shader.resources.customUniforms.uniforms.circleBaseScale = circleBaseScale;\r\n\r\n        this.shader.resources.customUniforms.uniforms.bodyAlpha = bodyAlpha;\r\n        this.shader.resources.customUniforms.uniforms.borderColor = borderColor;\r\n        this.shader.resources.customUniforms.uniforms.innerColor = innerColor;\r\n        this.shader.resources.customUniforms.uniforms.outerColor = outerColor;\r\n        this.shader.resources.customUniforms.uniforms.borderWidth = borderWidth;\r\n    }\r\n\r\n    get alpha() {\r\n        // return this.filter.alpha;\r\n    }\r\n\r\n    set alpha(val) {\r\n        this.shader.resources.customUniforms.uniforms.alpha = val;\r\n    }\r\n\r\n    static curveGeometry(curve0, radius) {\r\n        // returning PIXI.Geometry object\r\n        // osu relative coordinate -> osu pixels\r\n        // console.log(curve0);\r\n        const curve = new Array();\r\n        // filter out coinciding points\r\n        for (let i = 0; i < curve0.length; ++i)\r\n            if (i == 0 || Math.abs(curve0[i].x - curve0[i - 1].x) > 0.00001 || Math.abs(curve0[i].y - curve0[i - 1].y) > 0.00001)\r\n                curve.push(curve0[i]);\r\n\r\n        let vert = new Array();\r\n        let index = new Array();\r\n        const vertUnserialized = new Array();\r\n\r\n        vert.push(curve[0].x, curve[0].y, curve[0].t, 0.0); // first point on curve\r\n        vertUnserialized.push({ x: curve[0].x, y: curve[0].y, z: curve[0].t, t: 0.0 }); // first point on curve\r\n\r\n        // add rectangles around each segment of curve\r\n        for (let i = 1; i < curve.length; ++i) {\r\n            // Current point\r\n            let x = curve[i].x;\r\n            let y = curve[i].y;\r\n            let t = curve[i].t;\r\n\r\n            // Previous point\r\n            let lx = curve[i - 1].x;\r\n            let ly = curve[i - 1].y;\r\n            let lt = curve[i - 1].t;\r\n\r\n            // Delta x, y\r\n            let dx = x - lx;\r\n            let dy = y - ly;\r\n            let length = Math.hypot(dx, dy);\r\n\r\n            let ox = (radius * -dy) / length;\r\n            let oy = (radius * dx) / length;\r\n\r\n            vert.push(lx + ox, ly + oy, lt, 1.0);\r\n            vert.push(lx - ox, ly - oy, lt, 1.0);\r\n            vert.push(x + ox, y + oy, t, 1.0);\r\n            vert.push(x - ox, y - oy, t, 1.0);\r\n            vert.push(x, y, t, 0.0);\r\n\r\n            vertUnserialized.push({ x: lx + ox, y: ly + oy, z: lt, t: 1.0 });\r\n            vertUnserialized.push({ x: lx - ox, y: ly - oy, z: lt, t: 1.0 });\r\n            vertUnserialized.push({ x: x + ox, y: y + oy, z: t, t: 1.0 });\r\n            vertUnserialized.push({ x: x - ox, y: y - oy, z: t, t: 1.0 });\r\n            vertUnserialized.push({ x: x, y: y, z: t, t: 0.0 });\r\n\r\n            let n = 5 * i + 1;\r\n            // indices for 4 triangles composing 2 rectangles\r\n            index.push(n - 6, n - 5, n - 1, n - 5, n - 1, n - 3);\r\n            index.push(n - 6, n - 4, n - 1, n - 4, n - 1, n - 2);\r\n        }\r\n\r\n        function addArc(c, p1, p2, t) {\r\n            // c as center, sector from c-p1 to c-p2 counterclockwise\r\n            let theta_1 = Math.atan2(vert[4 * p1 + 1] - vert[4 * c + 1], vert[4 * p1] - vert[4 * c]);\r\n            let theta_2 = Math.atan2(vert[4 * p2 + 1] - vert[4 * c + 1], vert[4 * p2] - vert[4 * c]);\r\n            if (theta_1 > theta_2) theta_2 += 2 * Math.PI;\r\n            let theta = theta_2 - theta_1;\r\n            let divs = Math.ceil((DIVIDES * Math.abs(theta)) / (2 * Math.PI));\r\n            theta /= divs;\r\n            let last = p1;\r\n            for (let i = 1; i < divs; ++i) {\r\n                vert.push(vert[4 * c] + radius * Math.cos(theta_1 + i * theta), vert[4 * c + 1] + radius * Math.sin(theta_1 + i * theta), t, 1.0);\r\n                vertUnserialized.push({\r\n                    x: vert[4 * c] + radius * Math.cos(theta_1 + i * theta),\r\n                    y: vert[4 * c + 1] + radius * Math.sin(theta_1 + i * theta),\r\n                    z: t,\r\n                    t: 1.0,\r\n                });\r\n                let newv = vert.length / 4 - 1;\r\n                index.push(c, last, newv);\r\n                last = newv;\r\n            }\r\n            index.push(c, last, p2);\r\n        }\r\n\r\n        // add sectors for turning points of curve\r\n        for (let i = 1; i < curve.length - 1; ++i) {\r\n            let dx1 = curve[i].x - curve[i - 1].x;\r\n            let dy1 = curve[i].y - curve[i - 1].y;\r\n            let dx2 = curve[i + 1].x - curve[i].x;\r\n            let dy2 = curve[i + 1].y - curve[i].y;\r\n            let t = dx1 * dy2 - dx2 * dy1; // d1 x d2\r\n            if (t > 0) {\r\n                // turning counterclockwise\r\n                addArc(5 * i, 5 * i - 1, 5 * i + 2, curve[i].t);\r\n            } else {\r\n                // turning clockwise or straight back\r\n                addArc(5 * i, 5 * i + 1, 5 * i - 2, curve[i].t);\r\n            }\r\n        }\r\n\r\n        // add half-circle for head & tail of curve\r\n        addArc(0, 1, 2, curve[0].t);\r\n        addArc(5 * curve.length - 5, 5 * curve.length - 6, 5 * curve.length - 7, curve.at(-1).t);\r\n\r\n        return new PIXI.Geometry({\r\n            attributes: {\r\n                aPosition: new Float32Array(vert),\r\n                isCirc: new Float32Array(new Array(vert.length / 4).fill(0.0)),\r\n            },\r\n            indexBuffer: index,\r\n        });\r\n    }\r\n\r\n    static circleGeometry(radius) {\r\n        let vert = new Array();\r\n        let index = new Array();\r\n        vert.push(0.0, 0.0, 0.0, 0.0); // center\r\n        // radius *= 0.978;xx\r\n        for (let i = 0; i < DIVIDES; ++i) {\r\n            let theta = ((2 * Math.PI) / DIVIDES) * i;\r\n            vert.push(radius * Math.cos(theta), radius * Math.sin(theta), 0.0, 1.0);\r\n            index.push(0, i + 1, ((i + 1) % DIVIDES) + 1);\r\n        }\r\n        return new PIXI.Geometry({\r\n            attributes: {\r\n                aPosition: new Float32Array(vert),\r\n                isCirc: new Float32Array(new Array(vert.length / 4).fill(1.0)),\r\n            },\r\n            indexBuffer: index,\r\n        });\r\n    }\r\n\r\n    static getPointAtT(list, startt, endt) {\r\n        let t = 0;\r\n        if (startt == 0.0 && endt == 1.0) {\r\n            t = startt;\r\n        } else if (startt == 0.0) {\r\n            t = endt;\r\n        } else if (endt == 1.0) {\r\n            t = startt;\r\n        }\r\n\r\n        if (isNaN(t)) t = 0;\r\n        if (t <= 0) return list.at(0);\r\n        if (t >= 1) return list.at(-1);\r\n\r\n        const startIdx = Math.floor(t * (list.length - 1));\r\n        const endIdx = Math.ceil(t * (list.length - 1));\r\n        const rawIdx = t * (list.length - 1);\r\n\r\n        const lerpValue = (rawIdx - startIdx) / (endIdx - startIdx);\r\n\r\n        // console.log(t, startIdx, endIdx)\r\n\r\n        const x = list[startIdx].x + lerpValue * (list[endIdx].x - list[startIdx].x);\r\n        const y = list[startIdx].y + lerpValue * (list[endIdx].y - list[startIdx].y);\r\n        // const angle = list[startIdx].angle + lerpValue * (list[endIdx].angle - list[startIdx].angle);\r\n        const angle = lerpValue >= 0.5 ? list[endIdx].angle : list[startIdx].angle;\r\n        // const t = (time - this.time) / (this.endTime - this.time);\r\n\r\n        return {\r\n            x,\r\n            y,\r\n            t,\r\n            angle,\r\n        };\r\n    }\r\n\r\n    static lighten(color, amount) {\r\n        amount *= 0.5;\r\n\r\n        const ret = [];\r\n        ret[0] = Math.min(1.0, color[0] * (1.0 + 0.5 * amount) + 1.0 * amount);\r\n        ret[1] = Math.min(1.0, color[1] * (1.0 + 0.5 * amount) + 1.0 * amount);\r\n        ret[2] = Math.min(1.0, color[2] * (1.0 + 0.5 * amount) + 1.0 * amount);\r\n\r\n        return ret;\r\n    }\r\n\r\n    static darken(color, amount) {\r\n        const scalar = Math.max(1.0, 1.0 + amount);\r\n        const ret = [];\r\n        ret[0] = Math.min(1.0, color[0] / scalar);\r\n        ret[1] = Math.min(1.0, color[1] / scalar);\r\n        ret[2] = Math.min(1.0, color[2] / scalar);\r\n\r\n        return ret;\r\n    }\r\n}\r\n","import { SliderBody } from \"./SliderBody.js\";\r\n\r\n// Ported from https://github.com/111116/webosu/blob/master/scripts/SliderMesh.js\r\n// Also have a visit at http://osugame.online/ , very cool tbh\r\n\r\nexport class SliderGeometryContainers {\r\n    curve;\r\n    geometry;\r\n\r\n    sliderContainer;\r\n    selSliderContainer;\r\n\r\n    constructor(curve, slider) {\r\n        this.curve = curve;\r\n\r\n        // this.sliderContainer = new SliderMesh(this.curve, slider);\r\n        // this.selSliderContainer = new SliderMesh(this.curve, slider);\r\n\r\n        this.geometry = SliderBody.curveGeometry(this.curve, SliderBody.RADIUS);\r\n        this.circle = SliderBody.circleGeometry(SliderBody.RADIUS);\r\n\r\n        this.sliderContainer = new SliderBody(this.curve, this.geometry, this.circle, slider, false);\r\n        this.selSliderContainer = new SliderBody(this.curve, this.geometry, this.circle, slider, true);\r\n    }\r\n}","export default \"in vec2 aPosition;\\r\\nin vec2 aUV;\\r\\n\\r\\nout vec2 vUV;\\r\\n\\r\\nuniform mat3 uProjectionMatrix;\\r\\nuniform mat3 uWorldTransformMatrix;\\r\\n\\r\\nuniform mat3 uTransformMatrix;\\r\\n\\r\\nvoid main() {\\r\\n    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;\\r\\n    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\\r\\n\\r\\n    vUV = aUV;\\r\\n}\"","export default \"in vec2 vUV;\\r\\nuniform float t;\\r\\nuniform float a;\\r\\nuniform vec4 color;\\r\\n\\r\\nvec4 getColor(float x) {\\r\\n    x = mod(x - t, 1.0) * 4.0;\\r\\n\\r\\n    float blurRate = 0.02;\\r\\n\\r\\n    if (mod(x, 1.0) >= 0.0 && mod(x, 1.0) < blurRate) {\\r\\n        if (mod(floor(x), 2.0) == 0.0)\\r\\n            return vec4(color.rgb * (mod(x, 1.0) / blurRate), 1.0);\\r\\n        \\r\\n        return vec4(color.rgb * (1.0 - mod(x, 1.0) / blurRate), 1.0);\\r\\n    }\\r\\n\\r\\n    if (mod(floor(x), 2.0) == 0.0) {\\r\\n        return color;\\r\\n    }\\r\\n\\r\\n    return vec4(0.0, 0.0, 0.0, 1.0);\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n    float x = (vUV.x - 0.5) * 2.0;\\r\\n    float y = (vUV.y - 0.5) * 2.0;\\r\\n    float dist = sqrt(x * x + y * y);\\r\\n    float blurRate = 0.02;\\r\\n\\r\\n    if (dist >= 1.0) {\\r\\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\\r\\n        return;\\r\\n    }\\r\\n\\r\\n    float max_x = sqrt(1.0 - y * y) * 0.8 + 0.2;\\r\\n    float virt_x = max_x == 0.0 ? 0.0 : x / max_x; \\r\\n    float dest_x = asin(virt_x) / (3.14159265358 / 2.0);\\r\\n    vec4 fcolor = getColor(dest_x / 2.0 + 0.5);\\r\\n\\r\\n    if (dist < 1.0 && dist >= 1.0 - blurRate) {\\r\\n        float diff = 1.0 - dist;\\r\\n        gl_FragColor = fcolor * (diff / blurRate) * a;\\r\\n        return;\\r\\n    }\\r\\n\\r\\n    gl_FragColor = fcolor * a;\\r\\n}\"","export default \"struct GlobalUniforms {\\r\\n    projectionMatrix : mat3x3<f32>,\\r\\n    worldTransformMatrix : mat3x3<f32>,\\r\\n    worldColorAlpha : vec4<f32>,\\r\\n    uResolution : vec2<f32>,\\r\\n}\\r\\n\\r\\nstruct LocalUniforms {\\r\\n    uTransformMatrix : mat3x3<f32>,\\r\\n    uColor : vec4<f32>,\\r\\n    uRound : f32,\\r\\n}\\r\\n\\r\\nstruct CustomUniforms {\\r\\n    t: f32,\\r\\n    a: f32,\\r\\n    color: vec4<f32>\\r\\n}\\r\\n\\r\\nstruct VertexOutput {\\r\\n    @builtin(position) position: vec4<f32>,\\r\\n    @location(0) vUV: vec2<f32>\\r\\n}\\r\\n\\r\\n@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\\r\\n@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\\r\\n@group(2) @binding(0) var<uniform> customUniforms : CustomUniforms;\\r\\n\\r\\nfn modulo(x: f32, y: f32) -> f32 {\\r\\n    return x % y;\\r\\n}\\r\\n\\r\\n@vertex\\r\\nfn vsMain(\\r\\n    @location(0) aPosition: vec2<f32>,\\r\\n    @location(1) aUV: vec2<f32>\\r\\n) -> VertexOutput {\\r\\n    var mvp = globalUniforms.projectionMatrix * globalUniforms.worldTransformMatrix * localUniforms.uTransformMatrix;\\r\\n    return VertexOutput(\\r\\n        vec4<f32>(mvp * vec3<f32>(aPosition, 1.0), 1.0),\\r\\n        aUV\\r\\n    );\\r\\n}\\r\\n\\r\\nfn getColor(x: f32) -> vec4<f32> {\\r\\n    var x_ = modulo(x - customUniforms.t, 1.0) * 4.0;\\r\\n\\r\\n    var blurRate = 0.02;\\r\\n\\r\\n    if (modulo(x_, 1.0) >= 0.0 && modulo(x_, 1.0) < blurRate) {\\r\\n        if (modulo(floor(x_), 2.0) == 0.0) {\\r\\n            return vec4<f32>(customUniforms.color.rgb * (modulo(x_, 1.0) / blurRate), 1.0);\\r\\n        }\\r\\n        \\r\\n        return vec4<f32>(customUniforms.color.rgb * (1.0 - modulo(x_, 1.0) / blurRate), 1.0);\\r\\n    }\\r\\n\\r\\n    if (modulo(floor(x_), 2.0) == 0.0) {\\r\\n        return customUniforms.color;\\r\\n    }\\r\\n\\r\\n    return vec4<f32>(0.0, 0.0, 0.0, 1.0);\\r\\n}\\r\\n\\r\\n@fragment\\r\\nfn fsMain(\\r\\n    input : VertexOutput\\r\\n) -> @location(0) vec4<f32> {\\r\\n    var x = (input.vUV.x - 0.5) * 2.0;\\r\\n    var y = (input.vUV.y - 0.5) * 2.0;\\r\\n    var dist = sqrt(x * x + y * y);\\r\\n    var blurRate = 0.02;\\r\\n\\r\\n    if (dist >= 1.0) {\\r\\n        return vec4<f32>(0.0, 0.0, 0.0, 0.0);\\r\\n    }\\r\\n\\r\\n    var max_x = sqrt(1.0 - y * y) * 0.8 + 0.2;\\r\\n\\r\\n    var virt_x = 0.0; \\r\\n    if (max_x != 0.0) {\\r\\n        virt_x = x / max_x;\\r\\n    }\\r\\n\\r\\n    var dest_x = asin(virt_x) / (3.14159265358 / 2.0);\\r\\n    var fcolor = getColor(dest_x / 2.0 + 0.5);\\r\\n\\r\\n    if (dist < 1.0 && dist >= 1.0 - blurRate) {\\r\\n        var diff = 1.0 - dist;\\r\\n        return fcolor * (diff / blurRate) * customUniforms.a;\\r\\n    }\\r\\n\\r\\n    return fcolor * customUniforms.a;\\r\\n}\"","import { Game } from \"../Game.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { Clamp, easeOutQuint, easeOutSine } from \"../Utils.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport vertex from \"../Shaders/SliderBall/SliderBall.vert?raw\";\r\nimport fragment from \"../Shaders/SliderBall/SliderBall.frag?raw\";\r\nimport gpu from \"../Shaders/SliderBall/SliderBall.wgsl?raw\";\r\n\r\nexport class SliderBall {\r\n\tbaseSlider;\r\n\r\n\tobj;\r\n\tarrow;\r\n\tring;\r\n\tbg;\r\n\tfollowCircle;\r\n\tsliderB;\r\n\r\n\tconstructor(baseSlider) {\r\n\t\tthis.baseSlider = baseSlider;\r\n\t\tthis.obj = new PIXI.Container();\r\n\r\n\t\tconst sliderFollowCircle = new PIXI.Sprite(\r\n\t\t\tTexture.ARGON.SLIDER_FOLLOW_CIRCLE.texture,\r\n\t\t);\r\n\t\tconst sprite = new PIXI.Sprite(Texture.ARGON.SLIDER_B.arrow.texture);\r\n\t\tconst outerRing = new PIXI.Sprite(Texture.ARGON.SLIDER_B.ring.texture);\r\n\t\tconst bgMask = new PIXI.Graphics().circle(0, 0, 59).fill(0xffffff);\r\n\t\tconst bgSprite = new PIXI.Sprite(Texture.ARGON.SLIDER_B.gradient.texture);\r\n\t\tbgSprite.mask = bgMask;\r\n\r\n\t\tconst defaultBallGeometry = new PIXI.Geometry({\r\n\t\t\tattributes: {\r\n\t\t\t\taPosition: new Float32Array([\r\n\t\t\t\t\t-59, -59, 59, -59, -59, 59, -59, 59, 59, -59, 59, 59,\r\n\t\t\t\t]),\r\n\t\t\t\taUV: new Float32Array([0, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1]),\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst defaultBallShader = PIXI.Shader.from({\r\n\t\t\tgl: {\r\n\t\t\t\tvertex,\r\n\t\t\t\tfragment,\r\n\t\t\t},\r\n\t\t\tgpu: {\r\n\t\t\t\tvertex: {\r\n\t\t\t\t\tsource: gpu,\r\n\t\t\t\t\tentryPoint: \"vsMain\",\r\n\t\t\t\t},\r\n\t\t\t\tfragment: {\r\n\t\t\t\t\tsource: gpu,\r\n\t\t\t\t\tentryPoint: \"fsMain\",\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tresources: {\r\n\t\t\t\tcustomUniforms: {\r\n\t\t\t\t\tt: { value: 0, type: \"f32\" },\r\n\t\t\t\t\ta: { value: 0, type: \"f32\" },\r\n\t\t\t\t\tcolor: { value: [1.0, 1.0, 1.0, 1.0], type: \"vec4<f32>\" },\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tconst defaultBall = new PIXI.Mesh({\r\n\t\t\tgeometry: defaultBallGeometry,\r\n\t\t\tshader: defaultBallShader,\r\n\t\t});\r\n\r\n\t\tconst defaultSpec = new PIXI.Sprite({\r\n\t\t\ttexture: Texture.BALL_SPEC.texture,\r\n\t\t\tblendMode: \"add\",\r\n\t\t});\r\n\r\n\t\tconst defaultNd = new PIXI.Sprite({\r\n\t\t\ttexture: Texture.BALL_ND.texture,\r\n\t\t\tblendMode: \"multiply\",\r\n\t\t});\r\n\r\n\t\tdefaultSpec.anchor.set(0.5);\r\n\t\t// defaultSpec.scale.set(0.5);\r\n\t\tdefaultNd.anchor.set(0.5);\r\n\t\t// defaultNd.scale.set(0.5);\r\n\r\n\t\tconst defaultContainer = new PIXI.Container();\r\n\t\tdefaultContainer.addChild(defaultBall);\r\n\t\tdefaultContainer.addChild(defaultNd);\r\n\t\tdefaultContainer.addChild(defaultSpec);\r\n\r\n\t\tsliderFollowCircle.anchor.set(0.5);\r\n\t\tsprite.anchor.set(0.5);\r\n\t\touterRing.anchor.set(0.5);\r\n\t\tbgSprite.anchor.set(0.5);\r\n\r\n\t\touterRing.scale.set(Texture.ARGON.SLIDER_B.ring.isHD ? 0.5 : 1);\r\n\r\n\t\tconst sliderB = new PIXI.Container();\r\n\t\tsliderB.addChild(bgMask);\r\n\t\tsliderB.addChild(bgSprite);\r\n\t\tsliderB.addChild(sprite);\r\n\t\tsliderB.addChild(outerRing);\r\n\t\tsliderB.addChild(defaultContainer);\r\n\r\n\t\tthis.obj.addChild(sliderFollowCircle);\r\n\t\tthis.obj.addChild(sliderB);\r\n\r\n\t\tthis.arrow = sprite;\r\n\t\tthis.ring = outerRing;\r\n\t\tthis.bg = bgSprite;\r\n\t\tthis.followCircle = sliderFollowCircle;\r\n\t\tthis.sliderB = sliderB;\r\n\t\tthis.shader = defaultBallShader;\r\n\t\tthis.defaultContainer = defaultContainer;\r\n\t\tthis.defaultB = defaultBall;\r\n\t}\r\n\r\n\tdraw(timestamp) {\r\n\t\tconst skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n\t\tconst textures =\r\n\t\t\tskinType !== \"CUSTOM\"\r\n\t\t\t\t? Texture[skinType]\r\n\t\t\t\t: Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n\t\tconst circleBaseScale =\r\n\t\t\t(Beatmap.moddedStats.radius / 54.4) * (skinType === \"ARGON\" ? 0.95 : 1);\r\n\t\tconst sliderFollowSkinScale = textures.SLIDER_FOLLOW_CIRCLE.isHD\r\n\t\t\t? 0.25\r\n\t\t\t: 0.5;\r\n\r\n\t\tthis.followCircle.texture = textures.SLIDER_FOLLOW_CIRCLE.texture;\r\n\t\tthis.arrow.texture = textures.SLIDER_B.arrow.texture;\r\n\t\tthis.ring.texture = textures.SLIDER_B.ring.texture;\r\n\t\tthis.bg.texture = textures.SLIDER_B.gradient.texture;\r\n\r\n\t\tthis.followCircle.scale.set(sliderFollowSkinScale);\r\n\t\tthis.ring.scale.set(textures.SLIDER_B.ring.isHD ? 0.5 : 1);\r\n\r\n\t\tthis.obj.alpha = 1;\r\n\t\tthis.sliderB.alpha = 1;\r\n\t\tthis.shader.resources.customUniforms.uniforms.a = 1.0;\r\n\t\tthis.followCircle.alpha = 1;\r\n\t\tthis.followCircle.scale.set(2.4 * sliderFollowSkinScale);\r\n\r\n\t\tif (\r\n\t\t\ttimestamp < this.baseSlider.time ||\r\n\t\t\ttimestamp >= this.baseSlider.endTime + 200\r\n\t\t)\r\n\t\t\tthis.obj.alpha = 0;\r\n\t\tif (\r\n\t\t\ttimestamp >= this.baseSlider.time &&\r\n\t\t\ttimestamp < this.baseSlider.time + 300\r\n\t\t) {\r\n\t\t\tconst alphaB = Clamp(\r\n\t\t\t\t(timestamp - this.baseSlider.time) /\r\n\t\t\t\t\tMath.min(200, this.baseSlider.sliderTime),\r\n\t\t\t\t0,\r\n\t\t\t\t1,\r\n\t\t\t);\r\n\t\t\tconst alphaF = Clamp(\r\n\t\t\t\t(timestamp - this.baseSlider.time) /\r\n\t\t\t\t\tMath.min(180, this.baseSlider.sliderTime),\r\n\t\t\t\t0,\r\n\t\t\t\t1,\r\n\t\t\t);\r\n\r\n\t\t\tthis.sliderB.alpha = easeOutQuint(alphaB);\r\n\t\t\tthis.shader.resources.customUniforms.uniforms.a = easeOutQuint(alphaB);\r\n\t\t\tthis.followCircle.alpha = easeOutQuint(alphaF);\r\n\t\t\tthis.followCircle.scale.set(\r\n\t\t\t\t(1.5 + easeOutSine(alphaF) * 0.9) * sliderFollowSkinScale,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tthis.arrow.scale.set(0.7, 0.8);\r\n\r\n\t\tlet point =\r\n\t\t\tthis.baseSlider.getPointAtTime(timestamp) ??\r\n\t\t\tthis.baseSlider.realTrackPoints.at(-1);\r\n\r\n\t\t// if (this.baseSlider.time === 2031) {\r\n\t\t// \tconsole.log(point.angle)\r\n\t\t// }\r\n\r\n\t\tif (timestamp < this.baseSlider.time)\r\n\t\t\tpoint = this.baseSlider.realTrackPoints.at(0);\r\n\r\n\t\tthis.arrow.angle = !Game.MODS.HR ? point.angle : -point.angle;\r\n\t\tthis.defaultB.angle = !Game.MODS.HR ? point.angle : -point.angle;\r\n\r\n\t\tconst currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n\t\tlet { x, y } = point;\r\n\t\tif (Game.MODS.HR) y = 384 - y;\r\n\r\n\t\tthis.obj.scale.set(circleBaseScale * Game.SCALE_RATE * (236 / 256) ** 2);\r\n\r\n\t\tthis.obj.x =\r\n\t\t\t(x + this.baseSlider.stackHeight * currentStackOffset) *\r\n\t\t\t(Game.WIDTH / 512);\r\n\t\tthis.obj.y =\r\n\t\t\t(y + this.baseSlider.stackHeight * currentStackOffset) *\r\n\t\t\t(Game.WIDTH / 512);\r\n\r\n\t\tconst colors = Game.SLIDER_APPEARANCE.ignoreSkin\r\n\t\t\t? Skinning.DEFAULT_COLORS\r\n\t\t\t: Beatmap.COLORS;\r\n\t\tconst idx = Game.SLIDER_APPEARANCE.ignoreSkin\r\n\t\t\t? this.baseSlider.colourIdx\r\n\t\t\t: this.baseSlider.colourHaxedIdx;\r\n\r\n\t\tthis.bg.tint = colors[idx % colors.length];\r\n\t\tthis.bg.angle = -this.obj.angle;\r\n\t\tthis.ring.visible = true;\r\n\t\tthis.defaultContainer.visible = false;\r\n\r\n\t\tthis.followCircle.tint = 0xffffff;\r\n\t\tif (skinType === \"ARGON\")\r\n\t\t\tthis.followCircle.tint = colors[idx % colors.length];\r\n\r\n\t\tif (skinType === \"LEGACY\") {\r\n\t\t\tthis.ring.visible = false;\r\n\t\t\tthis.defaultContainer.visible = true;\r\n\t\t}\r\n\r\n\t\tif (timestamp > this.baseSlider.endTime) {\r\n\t\t\tconst alphaB = Clamp((timestamp - this.baseSlider.endTime) / 100, 0, 1);\r\n\t\t\tthis.sliderB.alpha = 1 - easeOutQuint(alphaB);\r\n\t\t\tthis.shader.resources.customUniforms.uniforms.a =\r\n\t\t\t\t1 - easeOutQuint(alphaB);\r\n\r\n\t\t\tconst alphaF = Clamp((timestamp - this.baseSlider.endTime) / 100, 0, 1);\r\n\t\t\tthis.followCircle.alpha = 1 - easeOutQuint(alphaF);\r\n\t\t\tthis.followCircle.scale.set(\r\n\t\t\t\t(1.0 + easeOutSine(1 - alphaF) * 1.4) * sliderFollowSkinScale,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst duration = (0.15 / this.baseSlider.velocity) * (100 / 6);\r\n\t\tconst t =\r\n\t\t\t(Math.min(\r\n\t\t\t\ttimestamp - this.baseSlider.time,\r\n\t\t\t\tthis.baseSlider.endTime - this.baseSlider.time,\r\n\t\t\t) %\r\n\t\t\t\tduration) /\r\n\t\t\tduration;\r\n\r\n\t\tthis.shader.resources.customUniforms.uniforms.t = t;\r\n\t\tthis.shader.resources.customUniforms.uniforms.color = [\r\n\t\t\t((colors[idx % colors.length] & 0xff0000) >> 16) / 255,\r\n\t\t\t((colors[idx % colors.length] & 0x00ff00) >> 8) / 255,\r\n\t\t\t(colors[idx % colors.length] & 0x0000ff) / 255,\r\n\t\t\t1.0,\r\n\t\t];\r\n\t}\r\n}\r\n","import { Game } from \"../Game.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { ObjectsController } from \"./ObjectsController.js\";\r\nimport { Clamp, easeOutSine, binarySearch } from \"../Utils.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { ScoreParser } from \"../ScoreParser.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { HitCircle } from \"./HitCircle.js\";\r\n\r\nexport class ReverseArrow {\r\n    baseSlider;\r\n    time;\r\n    willHit = false;\r\n    idx;\r\n\r\n    position;\r\n    angle;\r\n    stackHeight;\r\n\r\n    obj;\r\n    ringSprite;\r\n    arrowSprite;\r\n    baseUnit = 200 / 2;\r\n\r\n    hitCircle;\r\n\r\n    constructor(baseSlider, time, position, angle, stackHeight, idx) {\r\n        this.baseSlider = baseSlider;\r\n        this.time = time;\r\n        this.position = position;\r\n        this.angle = angle;\r\n        this.stackHeight = stackHeight;\r\n        this.idx = idx;\r\n\r\n        const arrowSprite = new PIXI.Sprite(Texture.ARGON.REVERSE_ARROW.arrow.texture);\r\n        arrowSprite.anchor.set(0.5);\r\n        this.arrowSprite = arrowSprite;\r\n\r\n        const ringSprite = new PIXI.Sprite(Texture.ARGON.REVERSE_ARROW.ring.texture);\r\n        ringSprite.anchor.set(0.5);\r\n        ringSprite.scale.set(0.5 * (229 / 200));\r\n        this.ringSprite = ringSprite;\r\n\r\n        this.hitCircle = new HitCircle(0, 0, this.time, null);\r\n\r\n        this.obj = new PIXI.Container();\r\n        this.obj.addChild(this.hitCircle.obj);\r\n        this.obj.addChild(ringSprite);\r\n        this.obj.addChild(arrowSprite);\r\n\r\n        // this.baseUnit = Math.max(this.obj.width, this.obj.height);\r\n    }\r\n\r\n    calculatePulseAtTime(timestamp) {\r\n        const modulo = timestamp % 300;\r\n        let pulseRate = 0;\r\n\r\n        if (modulo <= 35) pulseRate = modulo / 35;\r\n        if (modulo > 35 && modulo < 35 + 250) pulseRate = 1 - (modulo - 35) / 250;\r\n\r\n        return pulseRate;\r\n    }\r\n\r\n    playHitsound(timestamp, lastTimestamp) {\r\n        if (!Game.BEATMAP_FILE.audioNode.isPlaying) return;\r\n        if (!timestamp || !lastTimestamp) return;\r\n        if (timestamp < this.time || lastTimestamp >= this.time) return;\r\n\r\n        if (!ScoreParser.REPLAY_DATA) {\r\n            this.baseSlider.hitSounds.sliderReverse[this.idx].play();\r\n            return;\r\n        }\r\n\r\n        // Will reimplement later;\r\n        const evaluation = binarySearch(ScoreParser.EVAL_LIST, this.baseSlider.time, (evaluation, time) => {\r\n            if (evaluation.time < time) return -1;\r\n            if (evaluation.time > time) return 1;\r\n            return 0;\r\n        });\r\n\r\n        if (ScoreParser.EVAL_LIST[evaluation]?.checkPointState.filter((checkPoint) => checkPoint.type === \"Slider Repeat\")[this.idx].eval === 1)\r\n            this.baseSlider.hitSounds.sliderReverse[this.idx].play();\r\n    }\r\n\r\n    draw(timestamp) {\r\n        // this.playHitsound(timestamp);\r\n\r\n        this.hitCircle.colourHaxedIdx = this.baseSlider.colourHaxedIdx;\r\n        this.hitCircle.colourIdx = this.baseSlider.colourIdx;\r\n\r\n        this.hitCircle.draw(timestamp);\r\n        this.hitCircle.number.obj.alpha = 0;\r\n        this.hitCircle.hitCircleContainer.alpha = Game.SLIDER_APPEARANCE.sliderend && Game.SKINNING.type !== \"0\" ? 0.9 : 0;\r\n\r\n        const skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n        const textures = skinType !== \"CUSTOM\" ? Texture[skinType] : Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n        this.ringSprite.texture = textures.REVERSE_ARROW.ring.texture;\r\n        this.arrowSprite.texture = textures.REVERSE_ARROW.arrow.texture;\r\n\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n        const circleBaseScale = Beatmap.moddedStats.radius / 54.4;\r\n\r\n        const y = !Game.MODS.HR ? this.position.y : 384 - this.position.y;\r\n\r\n        this.obj.x = (this.position.x + this.baseSlider.stackHeight * currentStackOffset) * (Game.WIDTH / 512);\r\n        this.obj.y = (y + this.baseSlider.stackHeight * currentStackOffset) * (Game.WIDTH / 512);\r\n        this.obj.rotation = !Game.MODS.HR ? this.angle : Math.PI * 2 - this.angle;\r\n        this.hitCircle.obj.rotation = !Game.MODS.HR ? -this.angle : -(Math.PI * 2 - this.angle);\r\n        this.hitCircle.obj.x = 0;\r\n        this.hitCircle.obj.y = 0;\r\n\r\n        let pulseRate = this.calculatePulseAtTime(timestamp);\r\n\r\n        const baseScale =\r\n            circleBaseScale * Game.SCALE_RATE * (textures.REVERSE_ARROW.arrow.isHD ? 0.5 : 1) * (236 / 256) ** 2 * (skinType === \"ARGON\" ? 0.95 : 1);\r\n\r\n        this.arrowSprite.scale.set(baseScale * (1 + easeOutSine(pulseRate) * 0.2));\r\n        this.ringSprite.scale.set((229 / 200) * baseScale);\r\n        this.ringSprite.x = easeOutSine(pulseRate) * -6 * Game.SCALE_RATE;\r\n        this.obj.scale.set(1);\r\n        this.obj.alpha = 0;\r\n\r\n        if (this.idx === 0 && timestamp < this.baseSlider.time) {\r\n            this.obj.alpha = Clamp((this.baseSlider.opacity - 0.5) * 2, 0, 1);\r\n            return;\r\n        }\r\n\r\n        if (timestamp > this.baseSlider.time && Game.MODS.HD)\r\n            this.hitCircle.hitCircleContainer.alpha = Game.SLIDER_APPEARANCE.sliderend && Game.SKINNING.type !== \"0\" ? this.baseSlider.opacity * 0.9 : 0;\r\n\r\n        const fadeInTime = Math.min(300, this.baseSlider.sliderTime);\r\n        if (this.idx !== 0) {\r\n            if (timestamp < this.time - this.baseSlider.sliderTime * 2) return;\r\n            if (timestamp >= this.time - this.baseSlider.sliderTime * 2 && timestamp < this.time - this.baseSlider.sliderTime * 2 + fadeInTime) {\r\n                this.obj.alpha = (timestamp - (this.time - this.baseSlider.sliderTime * 2)) / fadeInTime;\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (timestamp < this.time) {\r\n            this.obj.alpha = 1;\r\n            return;\r\n        }\r\n\r\n        if (Game.MODS.HD) {\r\n            this.obj.alpha = 1;\r\n\r\n            if (timestamp > this.time) this.obj.alpha = 0;\r\n            return;\r\n        }\r\n\r\n        // if (ScoreParser.REPLAY_DATA) {\r\n        //     return;\r\n        // }\r\n\r\n        const spanTime = this.baseSlider.endTime - this.baseSlider.time;\r\n        const animationDuration = Math.min(300, spanTime);\r\n        this.arrowSprite.scale.set(baseScale);\r\n        this.ringSprite.x = 0;\r\n\r\n        const percentage = (timestamp - this.time) / animationDuration;\r\n        this.obj.scale.set(Clamp(easeOutSine(percentage), 0, 1) * 0.5 + 1);\r\n        this.obj.alpha = Clamp(1 - easeOutSine(percentage), 0, 1);\r\n\r\n        if (timestamp > this.time + animationDuration) this.obj.alpha = 0;\r\n    }\r\n}\r\n","import { Beatmap } from \"../Beatmap.js\";\r\nimport { Clamp, binarySearchNearest, binarySearch, easeOutElastic } from \"../Utils.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport { ObjectsController } from \"./ObjectsController.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { HitSample } from \"../Audio.js\";\r\nimport { HitSound } from \"../HitSound.js\";\r\nimport { ScoreParser } from \"../ScoreParser.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class SliderTick {\r\n    hitTime = -1;\r\n    info;\r\n    spanIdx;\r\n\r\n    obj;\r\n    graphic;\r\n\r\n    slider;\r\n\r\n    scale;\r\n\r\n    hitSound;\r\n\r\n    constructor(info, slider, spanIdx) {\r\n        this.info = info;\r\n        this.slider = slider;\r\n\r\n        this.obj = new PIXI.Container();\r\n        this.graphic = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 3,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 1,\r\n            })\r\n            .circle(0, 0, 4).stroke();\r\n        this.obj.addChild(this.graphic);\r\n        this.scale = Beatmap.moddedStats.radius / 54.4;\r\n\r\n        this.spanIdx = spanIdx;\r\n        this.getHitSound();\r\n    }\r\n\r\n    getHitSound() {\r\n        let foundNearestIndex = binarySearchNearest(Beatmap.timingPointsList, this.info.time, (element, value) => {\r\n            if (element.time < value) return -1;\r\n            if (element.time > value) return 1;\r\n            return 0;\r\n        });\r\n\r\n        while (Beatmap.timingPointsList[foundNearestIndex].time > this.info.time && foundNearestIndex > 0) {\r\n            foundNearestIndex--;\r\n        }\r\n\r\n        const { sampleIdx, sampleSet: timingSampleSet, sampleVol } = Beatmap.timingPointsList[foundNearestIndex];\r\n        const normalSet = this.slider.hitSounds.defaultSet.normal;\r\n\r\n        let sampleSet = HitSound.HIT_SAMPLES[Beatmap.SAMPLE_SET];\r\n        if (timingSampleSet !== 0) sampleSet = HitSound.HIT_SAMPLES[timingSampleSet];\r\n        if (normalSet !== 0) sampleSet = HitSound.HIT_SAMPLES[normalSet];\r\n\r\n        this.hitSound = new HitSample([`${sampleSet}-slidertick${sampleIdx}`], sampleVol / 100);\r\n    }\r\n\r\n    playHitsound(timestamp, lastTimestamp) {\r\n        if (!this.hitSound) return;\r\n        if (!Game.BEATMAP_FILE.audioNode.isPlaying) return;\r\n        if (!timestamp || !lastTimestamp) return;\r\n        if (timestamp < this.info.time || lastTimestamp >= this.info.time) return;\r\n\r\n        if (!ScoreParser.REPLAY_DATA) {\r\n            this.hitSound.play();\r\n            return;\r\n        }\r\n\r\n        const evaluation = binarySearch(ScoreParser.EVAL_LIST, this.slider.time, (evaluation, time) => {\r\n            if (evaluation.time < time) return -1;\r\n            if (evaluation.time > time) return 1;\r\n            return 0;\r\n        });\r\n\r\n        if (ScoreParser.EVAL_LIST[evaluation]?.checkPointState.filter((checkPoint) => checkPoint.type === \"Slider Tick\")[this.spanIdx].eval === 1)\r\n            this.hitSound.play();\r\n    }\r\n\r\n    draw(timestamp) {\r\n        // this.playHitsound(timestamp);\r\n\r\n        const skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n\r\n        // This appears to be a very bullshit implementation from me so please do not follow T.T\r\n        const appearTime =\r\n            this.slider.time -\r\n            Beatmap.moddedStats.preempt / 2 +\r\n            this.spanIdx * (Beatmap.moddedStats.preempt / 2 / this.slider.sliderParts.filter((p) => p.type === \"Slider Tick\").length);\r\n\r\n        let expandTime = 600;\r\n        if (this.info.time - appearTime < expandTime) expandTime = this.info.time - appearTime;\r\n\r\n        const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n        const circleBaseScale = Beatmap.moddedStats.radius / 54.4;\r\n\r\n        let { x, y } = this.info;\r\n        if (Game.MODS.HR) y = 384 - y;\r\n\r\n        this.obj.x = (x + this.slider.stackHeight * currentStackOffset) * Game.SCALE_RATE;\r\n        this.obj.y = (y + this.slider.stackHeight * currentStackOffset) * Game.SCALE_RATE;\r\n\r\n        this.graphic.tint = 0xffffff;\r\n        if (skinType !== \"LEGACY\" && skinType !== \"CUSTOM\") {\r\n            const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n            const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.slider.colourIdx : this.slider.colourHaxedIdx;\r\n            const color = colors[idx % colors.length];\r\n\r\n            this.graphic.tint = color;\r\n        }\r\n\r\n        if (timestamp < appearTime) {\r\n            this.obj.alpha = 0;\r\n            return;\r\n        }\r\n\r\n        if (timestamp >= appearTime && timestamp < appearTime + expandTime) {\r\n            const alpha = Clamp((timestamp - appearTime) / 150, 0, 1);\r\n            this.obj.alpha = alpha;\r\n\r\n            const t = Clamp((timestamp - appearTime) / expandTime, 0, 1);\r\n            const scale = easeOutElastic(t);\r\n            this.obj.scale.set(circleBaseScale * Game.SCALE_RATE * (0.5 + scale * 0.5));\r\n            return;\r\n        }\r\n\r\n        this.obj.alpha = 1;\r\n        this.obj.scale.set(circleBaseScale * Game.SCALE_RATE);\r\n\r\n        if (timestamp > this.info.time) this.obj.alpha = 0;\r\n    }\r\n}\r\n","export class Node {\r\n\tx;\r\n\ty;\r\n\tz;\r\n\tangle;\r\n\tconstructor(x, y, z) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t}\r\n\tstatic dist(start, end) {\r\n\t\tconst diffX = end.x - start.x;\r\n\t\tconst diffY = end.y - start.y;\r\n\t\treturn Math.hypot(diffX, diffY);\r\n\t}\r\n\tstatic rotate(center, point, angle) {\r\n\t\tconst x =\r\n\t\t\tcenter.x +\r\n\t\t\t(point.x - center.x) * Math.cos(angle) -\r\n\t\t\t(point.y - center.y) * Math.sin(angle);\r\n\t\tconst y =\r\n\t\t\tcenter.y +\r\n\t\t\t(point.x - center.x) * Math.sin(angle) +\r\n\t\t\t(point.y - center.y) * Math.cos(angle);\r\n\t\treturn new Node(x, y);\r\n\t}\r\n\tstatic lerp(a, b, t) {\r\n\t\tconst x = a.x + (b.x - a.x) * t;\r\n\t\tconst y = a.y + (b.y - a.y) * t;\r\n\t\treturn new Node(x, y);\r\n\t}\r\n\tstatic add(a, b) {\r\n\t\treturn new Node(a.x + b.x, a.y + b.y);\r\n\t}\r\n\tstatic subtract(a, b) {\r\n\t\treturn new Node(a.x - b.x, a.y - b.y);\r\n\t}\r\n}\r\nexport class Point extends Node {\r\n\tt;\r\n\tangle;\r\n\tconstructor(x, y, t, angle) {\r\n\t\tsuper(x, y);\r\n\t\tthis.t = t;\r\n\t\tthis.angle = angle;\r\n\t}\r\n}\r\nexport class Vector {\r\n\tx;\r\n\ty;\r\n\tconstructor(d1, d2) {\r\n\t\tthis.x = d2.x - d1.x;\r\n\t\tthis.y = d2.y - d1.y;\r\n\t}\r\n\tget length() {\r\n\t\treturn Math.hypot(this.x, this.y);\r\n\t}\r\n\tget angle() {\r\n\t\tconst x = this.x / this.length;\r\n\t\tconst y = this.y / this.length;\r\n\t\tconst angle = (Math.atan2(y, x) * 180) / Math.PI;\r\n\t\treturn angle;\r\n\t}\r\n\tstatic dot(v1, v2) {\r\n\t\treturn v1.x * v2.x + v1.y * v2.y;\r\n\t}\r\n\tstatic angle(v1, v2) {\r\n\t\treturn Math.acos(Vector.dot(v1, v2) / (v1.length * v2.length));\r\n\t}\r\n\tstatic cross(v1, v2) {\r\n\t\tconst x = v1.y - v2.y;\r\n\t\tconst y = v2.x - v1.x;\r\n\t\tconst z = v1.x * v2.y - v2.x * v1.y;\r\n\t\treturn new Node(x, y, z);\r\n\t}\r\n\tstatic normalize(v) {\r\n\t\tconst v2 = structuredClone(v);\r\n\t\tv2.x = v.x / v.length;\r\n\t\tv2.y = v.y / v.length;\r\n\t\treturn v2;\r\n\t}\r\n}\r\nfunction binom(n, k) {\r\n\tif (k < 0 || k > n) return 0;\r\n\tif (k == 0 || k == n) return 1;\r\n\tlet coeff = 1;\r\n\tfor (var i = 0; i < k; i++) coeff = (coeff * (n - i)) / (i + 1);\r\n\treturn coeff;\r\n}\r\nfunction bezier(t, points) {\r\n\tlet order = points.length - 1;\r\n\tlet y = 0;\r\n\tlet x = 0;\r\n\tfor (let i = 0; i <= order; i++) {\r\n\t\tx =\r\n\t\t\tx +\r\n\t\t\tbinom(order, i) *\r\n\t\t\t\tMath.pow(1 - t, order - i) *\r\n\t\t\t\tMath.pow(t, i) *\r\n\t\t\t\tpoints[i].x;\r\n\t\ty =\r\n\t\t\ty +\r\n\t\t\tbinom(order, i) *\r\n\t\t\t\tMath.pow(1 - t, order - i) *\r\n\t\t\t\tMath.pow(t, i) *\r\n\t\t\t\tpoints[i].y;\r\n\t}\r\n\treturn {\r\n\t\tx: x,\r\n\t\ty: y,\r\n\t};\r\n}\r\nexport function calculateCenter(a, b, c) {\r\n\tconst m1 = a.x ** 2 - b.x ** 2 + a.y ** 2 - b.y ** 2;\r\n\tconst m2 = a.x ** 2 - c.x ** 2 + a.y ** 2 - c.y ** 2;\r\n\tconst n1 = b.x - a.x;\r\n\tconst n2 = c.x - a.x;\r\n\tconst z1 = b.y - a.y;\r\n\tconst z2 = c.y - a.y;\r\n\tconst r = -z1 / z2;\r\n\tif ((n1 === 0 && n2 === 0) || (z1 === 0 && z2 === 0)) return null;\r\n\tconst centerX =\r\n\t\tz2 === 0 ? -m2 / (2 * n2) : -(m1 + m2 * r) / (2 * (n1 + n2 * r));\r\n\tconst centerY =\r\n\t\tz1 === 0\r\n\t\t\t? -(m2 + 2 * centerX * n2) / (2 * z2)\r\n\t\t\t: -(m1 + 2 * centerX * n1) / (2 * z1);\r\n\treturn new Node(centerX, centerY);\r\n}\r\nexport class SliderCalculator {\r\n\traw;\r\n\tnodes;\r\n\ttype;\r\n\tlength;\r\n\tpoints;\r\n\tconstructor(nodesList, type, length, time) {\r\n\t\t// const start = performance.now();\r\n\t\t// this.raw = raw;\r\n\t\t// const { nodesList, type, length } = this.parse();\r\n\t\tthis.time = time;\r\n\t\tthis.nodes = nodesList;\r\n\t\tthis.type = type;\r\n\t\tthis.length = length;\r\n\t\tthis.points = this.process();\r\n\r\n\t\t// console.log(performance.now() - start);\r\n\t}\r\n\tparse() {\r\n\t\tconst [matched] =\r\n\t\t\tthis.raw.match(\r\n\t\t\t\t/^(-?)[0-9]+,(-?)[0-9]+,(-?)[0-9]+,[0-9]+,[0-9],(L|P|B|C)(\\|(-?)[0-9]+:(-?)[0-9]+)+,[0-9]+,[0-9]+/g,\r\n\t\t\t) ?? [];\r\n\t\tif (!matched)\r\n\t\t\tthrow new Error(`Raw string is not a slider format!\\n${this.raw}`);\r\n\t\tconst [xString, yString, _, __, ___, nodesString, ____, lengthString] =\r\n\t\t\tmatched.split(\",\");\r\n\t\tconst x0 = parseFloat(xString);\r\n\t\tconst y0 = parseFloat(yString);\r\n\t\tconst length = parseFloat(lengthString);\r\n\t\tconst [type, ...nodesRaw] = nodesString.split(\"|\");\r\n\t\tconst nodesList = [\r\n\t\t\tnew Node(x0, y0),\r\n\t\t\t...nodesRaw.map((tuple) => {\r\n\t\t\t\tconst [xString, yString] = tuple.split(\":\");\r\n\t\t\t\treturn new Node(parseFloat(xString), parseFloat(yString));\r\n\t\t\t}),\r\n\t\t];\r\n\t\treturn {\r\n\t\t\tnodesList,\r\n\t\t\ttype: type,\r\n\t\t\tlength,\r\n\t\t};\r\n\t}\r\n\tprocess() {\r\n\t\tswitch (this.type) {\r\n\t\t\tcase \"L\":\r\n\t\t\t\treturn this.processLinear();\r\n\t\t\tcase \"P\":\r\n\t\t\t\treturn this.processPerfect();\r\n\t\t\tcase \"B\":\r\n\t\t\t\treturn this.processBezier();\r\n\t\t\tcase \"C\":\r\n\t\t\t\treturn this.processCatmull();\r\n\t\t}\r\n\t}\r\n\tprocessLinear() {\r\n\t\tconst points = [];\r\n\t\tlet calculatedLength = 0;\r\n\t\tfor (let i = 1; i < this.nodes.length; i++) {\r\n\t\t\tconst end = this.nodes[i];\r\n\t\t\tconst start = this.nodes[i - 1];\r\n\t\t\tconst vec = new Vector(start, end);\r\n\t\t\tconst angle = vec.angle;\r\n\t\t\tconst distance = Math.min(Node.dist(start, end), 512);\r\n\t\t\tfor (let j = 0; j <= distance; j++) {\r\n\t\t\t\tif (calculatedLength + 1 > this.length) break;\r\n\t\t\t\tconst point = new Point(\r\n\t\t\t\t\tstart.x + (end.x - start.x) * (j / distance),\r\n\t\t\t\t\tstart.y + (end.y - start.y) * (j / distance),\r\n\t\t\t\t\t(calculatedLength + 1) / this.length,\r\n\t\t\t\t\tangle,\r\n\t\t\t\t);\r\n\t\t\t\tpoints.push(point);\r\n\t\t\t\tcalculatedLength++;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn points;\r\n\t}\r\n\tprocessPerfect() {\r\n\t\tif (this.nodes.length < 3) return this.processLinear();\r\n\t\tif (this.nodes.length > 3) return this.processBezier();\r\n\t\tconst [a, b, c] = this.nodes;\r\n\t\tconst center = calculateCenter(a, b, c);\r\n\t\tif (\r\n\t\t\tcenter === null ||\r\n\t\t\tMath.abs(center.x) === Infinity ||\r\n\t\t\tMath.abs(center.y) === Infinity\r\n\t\t)\r\n\t\t\treturn this.processLinear();\r\n\t\tconst v1 = new Vector(b, a);\r\n\t\tconst v2 = new Vector(b, c);\r\n\t\tconst o1 = new Vector(center, a);\r\n\t\tconst o2 = new Vector(center, c);\r\n\t\tconst sign = Math.sign(Vector.cross(v1, v2).z ?? 0);\r\n\t\tconst angle = 2 * Math.PI - Vector.angle(o1, o2);\r\n\t\tconst perimeter = (angle / (2 * Math.PI)) * (2 * Math.PI * o1.length);\r\n\t\tconst unit = angle / perimeter;\r\n\t\tconst points = [new Point(a.x, a.y, 0)];\r\n\t\tfor (let i = 1; i <= this.length; i++) {\r\n\t\t\tconst node = Node.rotate(center, a, -sign * unit * i);\r\n\t\t\tconst vec = new Vector(points.at(-1), node);\r\n\t\t\tpoints.push(new Point(node.x, node.y, i / this.length, vec.angle));\r\n\t\t}\r\n\t\tpoints[0].angle = points[1].angle;\r\n\t\treturn points;\r\n\t}\r\n\tprocessSubPathBezier(controlPoints) {\r\n\t\tconst points = [new Node(controlPoints[0].x, controlPoints[0].y)];\r\n\t\tlet i = 1;\r\n\t\twhile (i <= this.length) {\r\n\t\t\tconst point = bezier(i / this.length, controlPoints);\r\n\t\t\tconst dist = Node.dist(points.at(-1), point);\r\n\r\n\t\t\tif (i + 1 > this.length) {\r\n\t\t\t\tconst node = new Node(point.x, point.y);\r\n\t\t\t\tconst vec = new Vector(points.at(-1), node);\r\n\t\t\t\tnode.angle = vec.angle;\r\n\t\t\t\tpoints.push(node);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (dist > 1) {\r\n\t\t\t\tconst node = Node.lerp(points.at(-1), point, 1 / dist);\r\n\t\t\t\tconst vec = new Vector(points.at(-1), node);\r\n\t\t\t\tnode.angle = vec.angle;\r\n\t\t\t\tpoints.push(node);\r\n\t\t\t}\r\n\t\t\tif (dist <= 1) {\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tpoints[0].angle = points[1].angle;\r\n\t\treturn points;\r\n\t}\r\n\tprocessBezier() {\r\n\t\tconst breakPoints = this.nodes\r\n\t\t\t.map((point, idx) => {\r\n\t\t\t\tif (idx === this.nodes.length - 1) return null;\r\n\t\t\t\tif (Node.dist(point, this.nodes[idx + 1]) === 0) return idx;\r\n\t\t\t\treturn null;\r\n\t\t\t})\r\n\t\t\t.filter((element) => element !== null);\r\n\t\tconst subPaths = breakPoints.map((index, idx) => {\r\n\t\t\tif (idx === 0) return this.nodes.slice(0, index + 1);\r\n\t\t\treturn this.nodes.slice(breakPoints[idx - 1] + 1, index + 1);\r\n\t\t});\r\n\t\tsubPaths.push(this.nodes.slice((breakPoints.at(-1) ?? -1) + 1));\r\n\t\tconst points = [];\r\n\t\tfor (const subPath of subPaths) {\r\n\t\t\tconst subPoints = this.processSubPathBezier(subPath);\r\n\t\t\tpoints.push(...subPoints);\r\n\t\t}\r\n\t\tconst reduced = [];\r\n\t\tlet cummulativeLength = 0;\r\n\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\tif (i === 0) {\r\n\t\t\t\treduced.push(points[i]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst dist = Node.dist(points[i - 1], points[i]);\r\n\t\t\tif (cummulativeLength + dist > this.length) break;\r\n\t\t\treduced.push(points[i]);\r\n\t\t\tcummulativeLength += dist;\r\n\t\t}\r\n\t\treturn reduced.map(\r\n\t\t\t(point, idx, arr) =>\r\n\t\t\t\tnew Point(point.x, point.y, idx / arr.length, point.angle),\r\n\t\t);\r\n\t}\r\n\tgetCatmullPoint(p0, p1, p2, p3, alpha) {\r\n\t\tconst t0 = 0;\r\n\t\tconst t1 = t0 + Node.dist(p0, p1) ** alpha;\r\n\t\tconst t2 = t1 + Node.dist(p1, p2) ** alpha;\r\n\t\tconst t3 = t2 + Node.dist(p2, p3) ** alpha;\r\n\t\tconst m1x =\r\n\t\t\t(t2 - t1) *\r\n\t\t\t((p0.x - p1.x) / (t0 - t1) -\r\n\t\t\t\t(p0.x - p2.x) / (t0 - t2) +\r\n\t\t\t\t(p1.x - p2.x) / (t1 - t2));\r\n\t\tconst m1y =\r\n\t\t\t(t2 - t1) *\r\n\t\t\t((p0.y - p1.y) / (t0 - t1) -\r\n\t\t\t\t(p0.y - p2.y) / (t0 - t2) +\r\n\t\t\t\t(p1.y - p2.y) / (t1 - t2));\r\n\t\tconst m2x =\r\n\t\t\t(t2 - t1) *\r\n\t\t\t((p1.x - p2.x) / (t1 - t2) -\r\n\t\t\t\t(p1.x - p3.x) / (t1 - t3) +\r\n\t\t\t\t(p2.x - p3.x) / (t2 - t3));\r\n\t\tconst m2y =\r\n\t\t\t(t2 - t1) *\r\n\t\t\t((p1.y - p2.y) / (t1 - t2) -\r\n\t\t\t\t(p1.y - p3.y) / (t1 - t3) +\r\n\t\t\t\t(p2.y - p3.y) / (t2 - t3));\r\n\t\tconst ax = 2 * p1.x - 2 * p2.x + m1x + m2x;\r\n\t\tconst ay = 2 * p1.y - 2 * p2.y + m1y + m2y;\r\n\t\tconst bx = -3 * p1.x + 3 * p2.x - 2 * m1x - m2x;\r\n\t\tconst by = -3 * p1.y + 3 * p2.y - 2 * m1y - m2y;\r\n\t\tconst cx = m1x;\r\n\t\tconst cy = m1y;\r\n\t\tconst dx = p1.x;\r\n\t\tconst dy = p1.y;\r\n\t\tconst amount = Math.floor(Node.dist(p0, p1));\r\n\t\tconst points = [];\r\n\t\tfor (let j = 1; j <= amount; j++) {\r\n\t\t\tconst t = j / amount;\r\n\t\t\tconst px = ax * t * t * t + bx * t * t + cx * t + dx;\r\n\t\t\tconst py = ay * t * t * t + by * t * t + cy * t + dy;\r\n\t\t\tpoints.push(new Node(px, py));\r\n\t\t}\r\n\t\treturn points;\r\n\t}\r\n\tprocessCatmull() {\r\n\t\tif (this.nodes.length < 3) return this.processLinear();\r\n\t\tconst first = new Node(\r\n\t\t\t2 * this.nodes[0].x - this.nodes[1].x,\r\n\t\t\t2 * this.nodes[0].y - this.nodes[1].y,\r\n\t\t);\r\n\t\tconst last = new Node(\r\n\t\t\t2 * this.nodes.at(-1).x - this.nodes.at(-2).x,\r\n\t\t\t2 * this.nodes.at(-1).y - this.nodes.at(-2).y,\r\n\t\t);\r\n\t\tconst nodes = [first, ...this.nodes, last];\r\n\t\tconst points = [];\r\n\t\tfor (let i = 1; i < nodes.length - 2; i++) {\r\n\t\t\tpoints.push(\r\n\t\t\t\t...this.getCatmullPoint(\r\n\t\t\t\t\tnodes[i - 1],\r\n\t\t\t\t\tnodes[i],\r\n\t\t\t\t\tnodes[i + 1],\r\n\t\t\t\t\tnodes[i + 2],\r\n\t\t\t\t\t0,\r\n\t\t\t\t),\r\n\t\t\t);\r\n\t\t}\r\n\t\tconst reduced = [];\r\n\t\tlet cummulativeLength = 0;\r\n\t\tfor (let i = 0; i < points.length; i++) {\r\n\t\t\tif (i === 0) {\r\n\t\t\t\treduced.push(points[i]);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst dist = Node.dist(points[i - 1], points[i]);\r\n\t\t\tif (cummulativeLength + dist > this.length) break;\r\n\t\t\tconst vec = new Vector(points[i - 1], points[i]);\r\n\t\t\tpoints[i].angle = vec.angle;\r\n\t\t\treduced.push(points[i]);\r\n\t\t\tcummulativeLength += dist;\r\n\t\t}\r\n\t\treduced[0].angle = reduced[1].angle;\r\n\t\treturn reduced.map(\r\n\t\t\t(point, idx, arr) =>\r\n\t\t\t\tnew Point(point.x, point.y, idx / arr.length, point.angle),\r\n\t\t);\r\n\t}\r\n}\r\n","import { Game } from \"../Game.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\n// import { ObjectsController } from \"./ObjectsController.js\";\r\n// import { ProgressBar } from \"../Progress.js\";\r\nimport { SliderEnd } from \"./SliderEnd.js\";\r\nimport { HitCircle } from \"./HitCircle.js\";\r\nimport { SliderGeometryContainers } from \"./SliderMesh.js\";\r\nimport { SliderBall } from \"./SliderBall.js\";\r\nimport { ReverseArrow } from \"./ReverseArrow.js\";\r\nimport { SliderTick } from \"./SliderTick.js\";\r\nimport {\r\n\tFixed,\r\n\tClamp,\r\n\tDist,\r\n\tAdd,\r\n\tFlipHR,\r\n\tLinearEstimation,\r\n\tbinarySearch,\r\n} from \"../Utils.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { ScoreParser } from \"../ScoreParser.js\";\r\nimport * as d3 from \"d3\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { SliderCalculator } from \"./SliderCalculator.js\";\r\n\r\nconst _32_BIT_LIMIT = 2147483647;\r\n\r\nexport class Slider {\r\n\tILLEGAL = false;\r\n\r\n\toriginalArr = [];\r\n\tangleList = [];\r\n\trealTrackPoints;\r\n\tsliderParts;\r\n\tsliderEndEvalPosition;\r\n\tsliderEndVisualPosition;\r\n\r\n\tsliderLength;\r\n\tsvMultiplier;\r\n\tbaseSV;\r\n\r\n\tbeatStep;\r\n\r\n\tstartTime;\r\n\tendTime;\r\n\r\n\trepeat;\r\n\r\n\tsliderType;\r\n\r\n\tstackHeight = 0;\r\n\r\n\ttime;\r\n\thitTime;\r\n\r\n\tSliderMesh;\r\n\tSliderSelectedMesh;\r\n\r\n\tobj;\r\n\tselected;\r\n\tselectedSliderEnd;\r\n\r\n\thitCircle;\r\n\trevArrows = [];\r\n\tticks = [];\r\n\tball;\r\n\tsliderEnd;\r\n\r\n\tangleE;\r\n\tangleS;\r\n\r\n\tcolourIdx = 1;\r\n\tcolourHaxedIdx = 1;\r\n\tcomboIdx = 1;\r\n\r\n\tisHover = false;\r\n\tisVisible = false;\r\n\topacity = 0;\r\n\r\n\thitSounds;\r\n\r\n\tscaleRate = 1;\r\n\r\n\tisHR = false;\r\n\r\n\tjudgementContainer;\r\n\tjudgement;\r\n\r\n\tskinType;\r\n\r\n\tbinom(n, k) {\r\n\t\tif (k < 0 || k > n) return 0;\r\n\t\tif (k == 0 || k == n) return 1;\r\n\r\n\t\tvar coeff = 1;\r\n\t\tfor (var i = 0; i < k; i++) coeff = (coeff * (n - i)) / (i + 1);\r\n\r\n\t\treturn coeff;\r\n\t}\r\n\r\n\tbezier(t, plist) {\r\n\t\tvar order = plist.length - 1;\r\n\r\n\t\tvar y = 0;\r\n\t\tvar x = 0;\r\n\r\n\t\tfor (let i = 0; i <= order; i++) {\r\n\t\t\tx =\r\n\t\t\t\tx +\r\n\t\t\t\tthis.binom(order, i) *\r\n\t\t\t\t\tMath.pow(1 - t, order - i) *\r\n\t\t\t\t\tMath.pow(t, i) *\r\n\t\t\t\t\tplist[i].x;\r\n\t\t\ty =\r\n\t\t\t\ty +\r\n\t\t\t\tthis.binom(order, i) *\r\n\t\t\t\t\tMath.pow(1 - t, order - i) *\r\n\t\t\t\t\tMath.pow(t, i) *\r\n\t\t\t\t\tplist[i].y;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: x,\r\n\t\t\ty: y,\r\n\t\t};\r\n\t}\r\n\r\n\tdrawSelected() {\r\n\t\tif (this.ILLEGAL) return;\r\n\r\n\t\tthis.sliderGeometryContainer.selSliderContainer.alpha = 1;\r\n\t\tthis.sliderGeometryContainer.selSliderContainer.tint = Object.values(\r\n\t\t\td3.rgb(Game.SKINNING.type === \"0\" ? `#edab00` : `#3197ff`),\r\n\t\t).map((val) => val / 255);\r\n\t\tthis.sliderGeometryContainer.selSliderContainer.update();\r\n\r\n\t\tthis.hitCircle.drawSelected();\r\n\r\n\t\tconst circleBaseScale = Beatmap.moddedStats.radius / 54.4;\r\n\t\tconst endPosition = this.sliderEndVisualPosition;\r\n\r\n\t\tconst currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n\t\tconst x = endPosition.x + this.stackHeight * currentStackOffset;\r\n\t\tconst y = !Game.MODS.HR\r\n\t\t\t? endPosition.y + this.stackHeight * currentStackOffset\r\n\t\t\t: 384 - endPosition.y + this.stackHeight * currentStackOffset;\r\n\r\n\t\tthis.selectedSliderEnd.x = x * Game.SCALE_RATE;\r\n\t\tthis.selectedSliderEnd.y = y * Game.SCALE_RATE;\r\n\r\n\t\tthis.selectedSliderEnd.scale.set(\r\n\t\t\tcircleBaseScale *\r\n\t\t\t\tGame.SCALE_RATE *\r\n\t\t\t\t(236 / 256) ** 2 *\r\n\t\t\t\t(Game.SKINNING.type === \"0\" ? 1 : 0.5),\r\n\t\t);\r\n\t}\r\n\r\n\tplayHitsound(timestamp, lastTimestamp) {\r\n\t\tif (!timestamp || !lastTimestamp) return;\r\n\r\n\t\tif (this.hitSounds.defaultSet.hitSoundIdx !== 0)\r\n\t\t\tthis.hitSounds.sliderWhistle.playLoop(\r\n\t\t\t\ttimestamp >= this.hitTime,\r\n\t\t\t\ttimestamp <= this.endTime,\r\n\t\t\t\tthis.endTime - timestamp,\r\n\t\t\t);\r\n\t\tthis.hitSounds.sliderSlide.playLoop(\r\n\t\t\ttimestamp >= this.hitTime,\r\n\t\t\ttimestamp <= this.endTime,\r\n\t\t\tthis.endTime - timestamp,\r\n\t\t);\r\n\r\n\t\tif (!Game.BEATMAP_FILE.audioNode.isPlaying) return;\r\n\r\n\t\tif (timestamp >= this.hitTime && lastTimestamp < this.hitTime) {\r\n\t\t\tif (!ScoreParser.REPLAY_DATA) {\r\n\t\t\t\tthis.hitSounds.sliderHead.play();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Will reimplement later\r\n\t\t\tconst evaluation = binarySearch(\r\n\t\t\t\tScoreParser.EVAL_LIST,\r\n\t\t\t\tthis.time,\r\n\t\t\t\t(evaluation, time) => {\r\n\t\t\t\t\tif (evaluation.time < time) return -1;\r\n\t\t\t\t\tif (evaluation.time > time) return 1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tScoreParser.EVAL_LIST[evaluation]?.checkPointState.findLast(\r\n\t\t\t\t\t(checkPoint) => checkPoint.type === \"Slider Head\",\r\n\t\t\t\t).eval === 1\r\n\t\t\t)\r\n\t\t\t\tthis.hitSounds.sliderHead.play();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (timestamp >= this.endTime && lastTimestamp < this.endTime) {\r\n\t\t\tif (!ScoreParser.REPLAY_DATA) {\r\n\t\t\t\tthis.hitSounds.sliderTail.play();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Will reimplement later\r\n\t\t\tconst evaluation = binarySearch(\r\n\t\t\t\tScoreParser.EVAL_LIST,\r\n\t\t\t\tthis.time,\r\n\t\t\t\t(evaluation, time) => {\r\n\t\t\t\t\tif (evaluation.time < time) return -1;\r\n\t\t\t\t\tif (evaluation.time > time) return 1;\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t},\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tScoreParser.EVAL_LIST[evaluation]?.checkPointState.findLast(\r\n\t\t\t\t\t(checkPoint) => checkPoint.type === \"Slider End\",\r\n\t\t\t\t).eval === 1\r\n\t\t\t) {\r\n\t\t\t\tthis.hitSounds.sliderTail.play();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleSkinChange() {\r\n\t\tif (this.skinType === Game.SKINNING.type) return;\r\n\t\tthis.skinType = Game.SKINNING.type;\r\n\r\n\t\tthis.selectedSliderEnd.texture =\r\n\t\t\tGame.SKINNING.type === \"0\"\r\n\t\t\t\t? Texture.SELECTED_ARGON.texture\r\n\t\t\t\t: Texture.SELECTED.texture;\r\n\t\tthis.hitCircle.handleSkinChange();\r\n\t}\r\n\r\n\tdrawBorder(timestamp) {\r\n\t\tthis.handleSkinChange();\r\n\t\t// console.log(this.time, opacity, percentage);\r\n\r\n\t\t// Calculate object radius on HR / EZ toggle\r\n\t\tconst currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n\t\t// Calculate current timing stats\r\n\t\tconst currentPreempt = Beatmap.moddedStats.preempt;\r\n\t\tconst currentFadeIn = Beatmap.moddedStats.fadeIn;\r\n\t\tconst fadeOutTime = 240;\r\n\r\n\t\t// Calculate object opacity\r\n\t\tlet currentOpacity = 0;\r\n\t\tif (!Game.MODS.HD) {\r\n\t\t\tcurrentOpacity = 1;\r\n\r\n\t\t\tif (timestamp < this.time) {\r\n\t\t\t\tcurrentOpacity =\r\n\t\t\t\t\t(timestamp - (this.time - currentPreempt)) / currentFadeIn;\r\n\t\t\t}\r\n\t\t\tif (timestamp > this.endTime) {\r\n\t\t\t\tcurrentOpacity = 1 - (timestamp - this.endTime) / fadeOutTime;\r\n\t\t\t\tif (Game.SLIDER_APPEARANCE.snaking && this.hitTime <= this.killTime)\r\n\t\t\t\t\tcurrentOpacity = 0;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tcurrentOpacity = 1 - (timestamp - this.time) / (this.endTime - this.time);\r\n\t\t\tif (timestamp < this.time)\r\n\t\t\t\tcurrentOpacity =\r\n\t\t\t\t\t(timestamp - (this.time - currentPreempt)) / currentFadeIn;\r\n\t\t}\r\n\t\tcurrentOpacity = Clamp(currentOpacity, 0, 1);\r\n\t\tthis.opacity = currentOpacity;\r\n\t\tthis.SliderMesh.alpha = currentOpacity;\r\n\r\n\t\t// Calculate object progress percentage\r\n\t\tconst currentPercentage = Clamp(\r\n\t\t\t(timestamp - this.time) / (this.endTime - this.time),\r\n\t\t\t0,\r\n\t\t\t1,\r\n\t\t);\r\n\r\n\t\t// Set object snaking section\r\n\t\tif (Game.SLIDER_APPEARANCE.snaking) {\r\n\t\t\tif (timestamp < this.hitTime) {\r\n\t\t\t\tthis.SliderMesh.startt = 0;\r\n\t\t\t\tthis.SliderMesh.endt = Clamp(currentOpacity * 2, 0, 1);\r\n\t\t\t\tif (this.hitTime > this.endTime) this.SliderMesh.endt = 1;\r\n\t\t\t} else if (timestamp >= this.hitTime) {\r\n\t\t\t\tif (this.repeat % 2 === 0) {\r\n\t\t\t\t\tthis.SliderMesh.startt = 0;\r\n\t\t\t\t\tthis.SliderMesh.endt =\r\n\t\t\t\t\t\t1 - Clamp((currentPercentage - 1) * this.repeat + 1, 0, 1);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.SliderMesh.startt = Clamp(\r\n\t\t\t\t\t\t(currentPercentage - 1) * this.repeat + 1,\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t1,\r\n\t\t\t\t\t);\r\n\t\t\t\t\tthis.SliderMesh.endt = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.SliderMesh.startt = 0;\r\n\t\t\tthis.SliderMesh.endt = 1;\r\n\t\t}\r\n\r\n\t\t// this.sliderBall.tint = colour;\r\n\r\n\t\t// Set slider color\r\n\t\tconst colors = Game.SLIDER_APPEARANCE.ignoreSkin\r\n\t\t\t? Skinning.DEFAULT_COLORS\r\n\t\t\t: Beatmap.COLORS;\r\n\t\tconst idx = Game.SLIDER_APPEARANCE.ignoreSkin\r\n\t\t\t? this.colourIdx\r\n\t\t\t: this.colourHaxedIdx;\r\n\t\t// this.SliderMesh.tintid = 0;\r\n\t\tthis.SliderMesh.tint = Object.values(\r\n\t\t\td3.rgb(`#${colors[idx % colors.length].toString(16).padStart(6, \"0\")}`),\r\n\t\t).map((val) => val / 255);\r\n\t\tthis.SliderMesh.update();\r\n\t\t// console.log(this.SliderMesh.tint);\r\n\r\n\t\t// this.SliderMesh.update();\r\n\r\n\t\tif (this.scaleRate !== Game.SCALE_RATE || this.isHR !== Game.MODS.HR) {\r\n\t\t\tthis.scaleRate = Game.SCALE_RATE;\r\n\t\t\tthis.isHR = Game.MODS.HR;\r\n\r\n\t\t\tthis.nodesLine.clear().setStrokeStyle({ width: 2, color: 0xffffff });\r\n\t\t\tthis.nodesGraphics.forEach((node, idx) => {\r\n\t\t\t\tlet { x, y } = this.nodes[idx].position;\r\n\t\t\t\tif (Game.MODS.HR) y = 384 - y;\r\n\r\n\t\t\t\tx =\r\n\t\t\t\t\t(parseInt(x) + this.stackHeight * currentStackOffset) *\r\n\t\t\t\t\tGame.SCALE_RATE;\r\n\t\t\t\ty =\r\n\t\t\t\t\t(parseInt(y) + this.stackHeight * currentStackOffset) *\r\n\t\t\t\t\tGame.SCALE_RATE;\r\n\r\n\t\t\t\tnode.x = x;\r\n\t\t\t\tnode.y = y;\r\n\r\n\t\t\t\tif (idx === 0) {\r\n\t\t\t\t\tthis.nodesLine.moveTo(x, y);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.nodesLine.lineTo(x, y).stroke();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tif ((this.isHover && this.isVisible) !== this.nodesContainer.visible) {\r\n\t\t\tthis.nodesContainer.visible = this.isHover && this.isVisible;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateJudgement(timestamp) {\r\n\t\tif (!this.judgement) return;\r\n\t\tthis.judgement.draw(timestamp);\r\n\t\tconst endPosition = this.realTrackPoints.at(-1);\r\n\r\n\t\tconst currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n\t\tconst x =\r\n\t\t\t((endPosition.x + this.stackHeight * currentStackOffset) * Game.WIDTH) /\r\n\t\t\t512;\r\n\t\tconst y = !Game.MODS.HR\r\n\t\t\t? ((endPosition.y + this.stackHeight * currentStackOffset) * Game.WIDTH) /\r\n\t\t\t\t512\r\n\t\t\t: ((384 - endPosition.y + this.stackHeight * currentStackOffset) *\r\n\t\t\t\t\tGame.WIDTH) /\r\n\t\t\t\t512;\r\n\r\n\t\tthis.judgement.obj.x = x;\r\n\t\tthis.judgement.obj.y = y;\r\n\t}\r\n\r\n\tdraw(timestamp) {\r\n\t\tif (this.ILLEGAL) return;\r\n\r\n\t\tthis.isVisible = timestamp >= this.startTime && timestamp < this.killTime;\r\n\r\n\t\tthis.drawBorder(timestamp);\r\n\t\tthis.hitCircle.draw(timestamp);\r\n\t\tthis.sliderEnd.draw(timestamp);\r\n\t\tthis.revArrows.forEach((arrow) => arrow.draw(timestamp));\r\n\t\tthis.ticks.forEach((tick) => tick.draw(timestamp));\r\n\t\tthis.ball.draw(timestamp);\r\n\t\tthis.updateJudgement(timestamp);\r\n\t\t// if (!ProgressBar.IS_DRAGGING) this.playHitsound(timestamp);\r\n\t}\r\n\r\n\tDist(p1, p2) {\r\n\t\treturn Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\r\n\t}\r\n\r\n\tgetPointAtTime(time) {\r\n\t\tif (time <= this.time) return this.realTrackPoints.at(0);\r\n\t\tif (time >= this.endTime) return this.realTrackPoints.at(-1);\r\n\r\n\t\tlet _t =\r\n\t\t\t((time - this.time) / (this.endTime - this.time)) *\r\n\t\t\t(this.realTrackPoints.length - 1);\r\n\t\tif (isNaN(_t)) _t = 0;\r\n\r\n\t\tconst startIdx = Math.floor(_t);\r\n\t\tconst endIdx = Math.ceil(_t);\r\n\t\tconst rawIdx = _t;\r\n\r\n\t\tconst lerpValue = (rawIdx - startIdx) / (endIdx - startIdx);\r\n\r\n\t\tconst x =\r\n\t\t\tthis.realTrackPoints[startIdx].x +\r\n\t\t\tlerpValue *\r\n\t\t\t\t(this.realTrackPoints[endIdx].x - this.realTrackPoints[startIdx].x);\r\n\t\tconst y =\r\n\t\t\tthis.realTrackPoints[startIdx].y +\r\n\t\t\tlerpValue *\r\n\t\t\t\t(this.realTrackPoints[endIdx].y - this.realTrackPoints[startIdx].y);\r\n\t\t// const angle = this.realTrackPoints[startIdx].angle + lerpValue * (this.realTrackPoints[endIdx].angle - this.realTrackPoints[startIdx].angle);\r\n\t\tconst angle =\r\n\t\t\tlerpValue >= 0.5\r\n\t\t\t\t? this.realTrackPoints[endIdx].angle\r\n\t\t\t\t: this.realTrackPoints[startIdx].angle;\r\n\t\tconst t = (time - this.time) / (this.endTime - this.time);\r\n\r\n\t\treturn {\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tt,\r\n\t\t\tangle,\r\n\t\t};\r\n\t}\r\n\r\n\tgetSliderPart() {\r\n\t\tconst baseTicksList = [];\r\n\t\tconst endTime = this.endTime;\r\n\r\n\t\tfor (let i = 0; i < this.sliderTicksCount / this.repeat; i++) {\r\n\t\t\tbaseTicksList.push(\r\n\t\t\t\tthis.angleList[\r\n\t\t\t\t\tMath.round(\r\n\t\t\t\t\t\t(((i + 1) * this.beatStep) /\r\n\t\t\t\t\t\t\tthis.sliderTime /\r\n\t\t\t\t\t\t\tBeatmap.stats.sliderTickRate) *\r\n\t\t\t\t\t\t\t(this.angleList.length - 1),\r\n\t\t\t\t\t)\r\n\t\t\t\t],\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst sliderParts = [];\r\n\t\tconst sliderEndEvalPosition = {\r\n\t\t\t...this.realTrackPoints[\r\n\t\t\t\tMath.round(\r\n\t\t\t\t\tClamp(\r\n\t\t\t\t\t\t(this.killTime - this.time - 36) / (endTime - this.time),\r\n\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t1,\r\n\t\t\t\t\t) *\r\n\t\t\t\t\t\t(this.realTrackPoints.length - 1),\r\n\t\t\t\t)\r\n\t\t\t],\r\n\t\t\ttype: \"Slider End\",\r\n\t\t\ttime: endTime - 36 < this.time ? endTime - 15 : endTime - 36,\r\n\t\t};\r\n\r\n\t\t// if (this.time === 9596) console.log(this.sliderTicksCount);\r\n\r\n\t\tfor (let i = 0; i < this.repeat; i++) {\r\n\t\t\t// Time from the last slider tick to the slider end\r\n\t\t\tconst tickEndDelta =\r\n\t\t\t\tthis.sliderTime - (this.sliderTicksCount / this.repeat) * this.beatStep;\r\n\t\t\tconst currentTrackPoint =\r\n\t\t\t\ti % 2 === 0 ? this.angleList.at(-1) : this.angleList[0];\r\n\r\n\t\t\tif (i % 2 === 0) {\r\n\t\t\t\tsliderParts.push(\r\n\t\t\t\t\t...baseTicksList.map((tick, idx) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...tick,\r\n\t\t\t\t\t\t\ttype: \"Slider Tick\",\r\n\t\t\t\t\t\t\ttime:\r\n\t\t\t\t\t\t\t\ti * this.sliderTime +\r\n\t\t\t\t\t\t\t\tMath.floor(\r\n\t\t\t\t\t\t\t\t\tthis.time +\r\n\t\t\t\t\t\t\t\t\t\t((idx + 1) * this.beatStep) / Beatmap.stats.sliderTickRate,\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\tsliderParts.push(\r\n\t\t\t\t\t...baseTicksList.toReversed().map((tick, idx) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t...tick,\r\n\t\t\t\t\t\t\ttype: \"Slider Tick\",\r\n\t\t\t\t\t\t\ttime:\r\n\t\t\t\t\t\t\t\t(i - 1) * this.sliderTime +\r\n\t\t\t\t\t\t\t\tMath.floor(\r\n\t\t\t\t\t\t\t\t\tthis.time +\r\n\t\t\t\t\t\t\t\t\t\tthis.sliderTime +\r\n\t\t\t\t\t\t\t\t\t\t(idx * this.beatStep) / Beatmap.stats.sliderTickRate +\r\n\t\t\t\t\t\t\t\t\t\ttickEndDelta,\r\n\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}),\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (i < this.repeat - 1)\r\n\t\t\t\tsliderParts.push({\r\n\t\t\t\t\t...currentTrackPoint,\r\n\t\t\t\t\ttype: \"Slider Repeat\",\r\n\t\t\t\t\ttime: this.time + Math.round((i + 1) * this.sliderTime),\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.sliderParts = sliderParts;\r\n\t\tthis.sliderEndEvalPosition = sliderEndEvalPosition;\r\n\t}\r\n\r\n\teval(inputIdx) {\r\n\t\tconst endTime = this.endTime;\r\n\r\n\t\tconst radius = 54.4 - 4.48 * Beatmap.stats.circleSize;\r\n\t\tlet currentInput = ScoreParser.CURSOR_DATA[inputIdx];\r\n\r\n\t\tlet internalInputIdx = inputIdx;\r\n\t\tlet val = this.hitCircle.eval(inputIdx);\r\n\r\n\t\twhile (!val) {\r\n\t\t\tval = this.hitCircle.eval(++inputIdx);\r\n\t\t\tif (!ScoreParser.CURSOR_DATA[inputIdx]) return null;\r\n\t\t}\r\n\t\tif (val === null) return null;\r\n\r\n\t\tlet state = val.val === 0 ? \"UNTRACKING\" : \"TRACKING\";\r\n\t\tlet sliderPartIdx = 0;\r\n\r\n\t\tconst sliderParts = this.sliderParts\r\n\t\t\t.concat([this.sliderEndEvalPosition])\r\n\t\t\t.sort((a, b) => (a.time > b.time ? 1 : a.time < b.time ? -1 : 0));\r\n\t\tconst sliderPartsEval = [\r\n\t\t\t{ type: \"Slider Head\", eval: val.val === 0 ? 0 : 1 },\r\n\t\t];\r\n\r\n\t\t// if (this.time === 9596) console.log(sliderParts);\r\n\r\n\t\tconst currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\t\tconst additionalMemory = {\r\n\t\t\tx: this.stackHeight * currentStackOffset,\r\n\t\t\ty: this.stackHeight * currentStackOffset,\r\n\t\t};\r\n\r\n\t\tlet firstTrackingTime = val.inputTime;\r\n\r\n\t\twhile (currentInput.time <= endTime) {\r\n\t\t\tconst pointAtT = this.getPointAtTime(currentInput.time);\r\n\r\n\t\t\tif (!pointAtT) {\r\n\t\t\t\tcurrentInput = ScoreParser.CURSOR_DATA[++internalInputIdx];\r\n\t\t\t\tif (!currentInput) break;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst accountedPointAtT = Game.MODS.HR\r\n\t\t\t\t? Add(FlipHR(pointAtT), additionalMemory)\r\n\t\t\t\t: Add(pointAtT, additionalMemory);\r\n\t\t\t// Untrack slider if release keys / move out of slider follow circle\r\n\t\t\tif (state === \"TRACKING\")\r\n\t\t\t\tif (\r\n\t\t\t\t\tcurrentInput.inputArray.length === 0 ||\r\n\t\t\t\t\tFixed(Dist(currentInput, accountedPointAtT) / (2.4 * radius), 5) > 1\r\n\t\t\t\t) {\r\n\t\t\t\t\tstate = \"UNTRACKING\";\r\n\t\t\t\t\t// if (this.time === 87669) {\r\n\t\t\t\t\t//     if (currentInput.inputArray.length === 0) console.log(\"Untracked due to release key\");\r\n\t\t\t\t\t//     if (Fixed(Dist(currentInput, accountedPointAtT) / (2.4 * radius), 5) > 1) console.log(\"Untracked due to unfollow\");\r\n\t\t\t\t\t// }\r\n\t\t\t\t}\r\n\r\n\t\t\t// Track slider if press keys AND move inside of sliderB\r\n\t\t\tif (state === \"UNTRACKING\") {\r\n\t\t\t\tif (\r\n\t\t\t\t\tcurrentInput.inputArray.length !== 0 &&\r\n\t\t\t\t\tFixed(Dist(currentInput, accountedPointAtT) / radius, 5) < 1\r\n\t\t\t\t) {\r\n\t\t\t\t\tstate = \"TRACKING\";\r\n\t\t\t\t\tif (!firstTrackingTime) firstTrackingTime = currentInput.time;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tsliderParts[sliderPartIdx] &&\r\n\t\t\t\tScoreParser.CURSOR_DATA[internalInputIdx + 1]?.time >\r\n\t\t\t\t\tsliderParts[sliderPartIdx]?.time\r\n\t\t\t) {\r\n\t\t\t\tif (currentInput.time !== sliderParts[sliderPartIdx]?.time) {\r\n\t\t\t\t\tconst nextInput = ScoreParser.CURSOR_DATA[internalInputIdx + 1];\r\n\t\t\t\t\tconst estimatedInput = LinearEstimation(\r\n\t\t\t\t\t\tcurrentInput,\r\n\t\t\t\t\t\tnextInput,\r\n\t\t\t\t\t\t(sliderParts[sliderPartIdx].time - currentInput.time) /\r\n\t\t\t\t\t\t\t(nextInput.time - currentInput.time),\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// Untrack slider if release keys / move out of slider follow circle\r\n\t\t\t\t\tif (state === \"TRACKING\")\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcurrentInput.inputArray.length === 0 ||\r\n\t\t\t\t\t\t\tFixed(\r\n\t\t\t\t\t\t\t\tDist(\r\n\t\t\t\t\t\t\t\t\testimatedInput,\r\n\t\t\t\t\t\t\t\t\t!Game.MODS.HR\r\n\t\t\t\t\t\t\t\t\t\t? sliderParts[sliderPartIdx]\r\n\t\t\t\t\t\t\t\t\t\t: FlipHR(sliderParts[sliderPartIdx]),\r\n\t\t\t\t\t\t\t\t) /\r\n\t\t\t\t\t\t\t\t\t(2.4 * radius),\r\n\t\t\t\t\t\t\t\t5,\r\n\t\t\t\t\t\t\t) > 1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tstate = \"UNTRACKING\";\r\n\t\t\t\t\t\t\t// if (this.time === 87669) {\r\n\t\t\t\t\t\t\t//     if (currentInput.inputArray.length === 0) console.log(\"Untracked due to release key\");\r\n\t\t\t\t\t\t\t//     if (Fixed(Dist(estimatedInput, FlipHR(sliderParts[sliderPartIdx])) / (2.4 * radius), 5) > 1)\r\n\t\t\t\t\t\t\t//         console.log(\"Untracked due to unfollow\", currentInput, estimatedInput, FlipHR(sliderParts[sliderPartIdx]));\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Track slider if press keys AND move inside of sliderB\r\n\t\t\t\t\tif (state === \"UNTRACKING\") {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tcurrentInput.inputArray.length !== 0 &&\r\n\t\t\t\t\t\t\tFixed(\r\n\t\t\t\t\t\t\t\tDist(currentInput, sliderParts[sliderPartIdx]) / radius,\r\n\t\t\t\t\t\t\t\t5,\r\n\t\t\t\t\t\t\t) < 1\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tstate = \"TRACKING\";\r\n\t\t\t\t\t\t\tif (!firstTrackingTime) firstTrackingTime = currentInput.time;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsliderPartsEval.push({\r\n\t\t\t\t\ttype: sliderParts[sliderPartIdx].type,\r\n\t\t\t\t\teval:\r\n\t\t\t\t\t\tstate === \"TRACKING\" &&\r\n\t\t\t\t\t\tcurrentInput.time <= sliderParts[sliderPartIdx].time\r\n\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t: 0,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tsliderPartIdx++;\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\t!sliderParts[sliderPartIdx] ||\r\n\t\t\t\tsliderParts[sliderPartIdx].time >=\r\n\t\t\t\t\tScoreParser.CURSOR_DATA[internalInputIdx + 1]?.time\r\n\t\t\t)\r\n\t\t\t\tinternalInputIdx++;\r\n\r\n\t\t\tcurrentInput = ScoreParser.CURSOR_DATA[internalInputIdx];\r\n\t\t\tif (!currentInput) break;\r\n\t\t\t// if (this.time === 252735) console.log(currentInput.time, state);\r\n\t\t}\r\n\r\n\t\tconst evaluated = sliderPartsEval.every(\r\n\t\t\t(checkPoint) => checkPoint.eval === 1,\r\n\t\t)\r\n\t\t\t? 300\r\n\t\t\t: sliderPartsEval.every((checkPoint) => checkPoint.eval === 0)\r\n\t\t\t\t? 0\r\n\t\t\t\t: sliderPartsEval.filter((checkPoint) => checkPoint.eval === 1).length *\r\n\t\t\t\t\t\t\t2 >=\r\n\t\t\t\t\t\t1 + this.sliderTicksCount * this.repeat + this.repeat\r\n\t\t\t\t\t? 100\r\n\t\t\t\t\t: 50;\r\n\r\n\t\t// if (evaluated !== 300) console.log(this.time, sliderPartsEval, sliderParts, endTime);\r\n\r\n\t\t// this.hitTime = firstTrackingTime;\r\n\t\t// this.hitTime = this.endTime;\r\n\r\n\t\treturn {\r\n\t\t\tval: evaluated,\r\n\t\t\tvalV2: val.val,\r\n\t\t\tcheckPointState: sliderPartsEval,\r\n\t\t\tdelta: val.delta,\r\n\t\t\tinputTime: firstTrackingTime,\r\n\t\t};\r\n\t}\r\n\r\n\tconstructor(\r\n\t\tpointLists,\r\n\t\tsliderType,\r\n\t\tsliderLength,\r\n\t\tsvMultiplier,\r\n\t\tbaseSV,\r\n\t\tbeatStep,\r\n\t\ttime,\r\n\t\trepeat,\r\n\t\thitSounds,\r\n\t\traw,\r\n\t) {\r\n\t\tthis.sliderType = sliderType;\r\n\t\tconst originalArr = pointLists.split(\"|\").map((point) => {\r\n\t\t\treturn {\r\n\t\t\t\tx: point.split(\":\")[0],\r\n\t\t\t\ty: point.split(\":\")[1],\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tthis.startPosition = {\r\n\t\t\tx: parseFloat(originalArr[0].x),\r\n\t\t\ty: parseFloat(originalArr[0].y),\r\n\t\t};\r\n\r\n\t\tconst nodes = [];\r\n\t\tfor (let i = 0; i < originalArr.length; i++) {\r\n\t\t\tif (\r\n\t\t\t\toriginalArr[i + 1] &&\r\n\t\t\t\tthis.Dist(originalArr[i], originalArr[i + 1]) === 0\r\n\t\t\t) {\r\n\t\t\t\tnodes.push({\r\n\t\t\t\t\ttype: \"Red Anchor\",\r\n\t\t\t\t\tposition: originalArr[i],\r\n\t\t\t\t});\r\n\r\n\t\t\t\ti++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tnodes.push({\r\n\t\t\t\ttype: \"White Anchor\",\r\n\t\t\t\tposition: originalArr[i],\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.nodes = nodes;\r\n\r\n\t\tthis.originalArr = originalArr;\r\n\t\tthis.sliderLength = sliderLength;\r\n\t\tthis.svMultiplier = Clamp(svMultiplier, 0.1, 20);\r\n\t\tthis.repeat = repeat;\r\n\r\n\t\tthis.baseSV = baseSV;\r\n\t\tthis.beatStep = parseFloat(beatStep);\r\n\t\tthis.velocity =\r\n\t\t\t(2 * baseSV) /\r\n\t\t\t(this.beatStep *\r\n\t\t\t\t(this.svMultiplier < 0\r\n\t\t\t\t\t? 1\r\n\t\t\t\t\t: Clamp(-(-100 / this.svMultiplier), 10, 1000)));\r\n\r\n\t\tthis.time = time;\r\n\t\tthis.endTime =\r\n\t\t\ttime +\r\n\t\t\t((this.sliderLength * this.repeat) / (this.svMultiplier * this.baseSV)) *\r\n\t\t\t\tbeatStep;\r\n\t\tthis.hitTime = this.time;\r\n\r\n\t\tthis.startTime = time - Beatmap.stats.preempt;\r\n\t\tthis.killTime = this.endTime + 240;\r\n\r\n\t\tthis.sliderTime =\r\n\t\t\tbeatStep *\r\n\t\t\tFixed(this.sliderLength / (this.svMultiplier * this.baseSV), 2);\r\n\t\tthis.sliderTicksCount =\r\n\t\t\t(Math.ceil(\r\n\t\t\t\tFixed(\r\n\t\t\t\t\tthis.sliderLength /\r\n\t\t\t\t\t\tthis.svMultiplier /\r\n\t\t\t\t\t\t(baseSV / Beatmap.stats.sliderTickRate),\r\n\t\t\t\t\t1,\r\n\t\t\t\t),\r\n\t\t\t) -\r\n\t\t\t\t1) *\r\n\t\t\tthis.repeat;\r\n\r\n\t\tthis.hitCircle = new HitCircle(originalArr[0].x, originalArr[0].y, time);\r\n\t\tthis.hitCircle.hitTime = this.hitTime;\r\n\t\t// this.hitCircle.obj.visible = true;\r\n\r\n\t\tthis.hitSounds = hitSounds;\r\n\r\n\t\tconst SliderContainer = new PIXI.Container();\r\n\t\tthis.obj = SliderContainer;\r\n\r\n\t\tif (sliderLength < 0) {\r\n\t\t\tthis.ILLEGAL = true;\r\n\t\t\tBeatmap.hasILLEGAL = true;\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// let start = performance.now();\r\n\t\tconst points = new SliderCalculator(\r\n\t\t\toriginalArr.map((point) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: parseFloat(point.x),\r\n\t\t\t\t\ty: parseFloat(point.y),\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t\tsliderType,\r\n\t\t\tsliderLength,\r\n\t\t\ttime,\r\n\t\t);\r\n\t\tthis.angleList = points.points;\r\n\r\n\t\tthis.sliderEndVisualPosition = structuredClone(this.angleList.at(-1));\r\n\r\n\t\t// console.log(this.time, this.svMultiplier, this.baseSV, this.beatStep, this.angleList);\r\n\t\tif (this.angleList.length === 0 || this.sliderTicksCount > 1_000_000) {\r\n\t\t\tthis.ILLEGAL = true;\r\n\t\t\tBeatmap.hasILLEGAL = true;\r\n\r\n\t\t\tif (this.angleList.length === 0) {\r\n\t\t\t\tthis.angleList.push(this.originalArr[0]);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// console.log(this.time, this.angleList);\r\n\t\t// let took = performance.now() - start;\r\n\t\t// if (took > 20) console.log(`Took: ${took} to create ${this.time} AngleList`);\r\n\r\n\t\tthis.realTrackPoints = [...Array(this.repeat).keys()]\r\n\t\t\t.reduce((prev, curr, idx) => {\r\n\t\t\t\tlet ret = [];\r\n\t\t\t\tif (idx % 2 === 0) ret = prev.concat(this.angleList.slice(0, -1));\r\n\t\t\t\tif (idx % 2 !== 0)\r\n\t\t\t\t\tret = prev.concat(\r\n\t\t\t\t\t\t[...this.angleList]\r\n\t\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t\t.slice(0, -1)\r\n\t\t\t\t\t\t\t.map((p) => {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t...p,\r\n\t\t\t\t\t\t\t\t\tangle: p.angle + 180,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\tif (idx === this.repeat - 1) {\r\n\t\t\t\t\tif (idx % 2 === 0) ret.push(this.angleList.at(-1));\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tret.push({\r\n\t\t\t\t\t\t\t...this.angleList[0],\r\n\t\t\t\t\t\t\tangle: this.angleList[0].angle + 180,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn ret;\r\n\t\t\t}, [])\r\n\t\t\t.map((coord, idx) => {\r\n\t\t\t\tconst ret = {\r\n\t\t\t\t\t...coord,\r\n\t\t\t\t\tt: idx / ((this.angleList.length - 1) * this.repeat + 1),\r\n\t\t\t\t};\r\n\t\t\t\treturn ret;\r\n\t\t\t});\r\n\t\tthis.getSliderPart();\r\n\t\t// this.draw(0.5);\r\n\t\t// console.log(this.repeat % 2);\r\n\r\n\t\tthis.endPosition = this.realTrackPoints.at(-1);\r\n\t\tthis.sliderEnd = new SliderEnd(this);\r\n\r\n\t\t// console.log(time, this.angleList)\r\n\r\n\t\tif (this.repeat > 1 && this.angleList.length < 2) {\r\n\t\t\tBeatmap.hasILLEGAL = true;\r\n\t\t\tthis.ILLEGAL = true;\r\n\t\t}\r\n\r\n\t\tif (this.repeat > 1) {\r\n\t\t\tconst deltaXE =\r\n\t\t\t\tthis.angleList.length === 1\r\n\t\t\t\t\t? 1\r\n\t\t\t\t\t: this.angleList.at(-1).x - this.angleList.at(-2).x;\r\n\t\t\tconst deltaYE =\r\n\t\t\t\tthis.angleList.length === 1\r\n\t\t\t\t\t? 1\r\n\t\t\t\t\t: this.angleList.at(-1).y - this.angleList.at(-2).y;\r\n\t\t\tconst tanE = Math.abs(deltaYE / deltaXE);\r\n\r\n\t\t\tconst deltaXS =\r\n\t\t\t\tthis.angleList.length === 1\r\n\t\t\t\t\t? 1\r\n\t\t\t\t\t: this.angleList[0].x - this.angleList[1].x;\r\n\t\t\tconst deltaYS =\r\n\t\t\t\tthis.angleList.length === 1\r\n\t\t\t\t\t? 1\r\n\t\t\t\t\t: this.angleList[0].y - this.angleList[1].y;\r\n\t\t\tconst tanS = Math.abs(deltaYS / deltaXS);\r\n\r\n\t\t\tlet angleE =\r\n\t\t\t\tdeltaXE >= 0\r\n\t\t\t\t\t? (Math.atan(tanE) * 180) / Math.PI\r\n\t\t\t\t\t: 180 - (Math.atan(tanE) * 180) / Math.PI;\r\n\t\t\tangleE = (((deltaYE >= 0 ? angleE : -angleE) + 180) * Math.PI) / 180;\r\n\r\n\t\t\tlet angleS =\r\n\t\t\t\tdeltaXS >= 0\r\n\t\t\t\t\t? (Math.atan(tanS) * 180) / Math.PI\r\n\t\t\t\t\t: 180 - (Math.atan(tanS) * 180) / Math.PI;\r\n\t\t\tangleS = (((deltaYS >= 0 ? angleS : -angleS) + 180) * Math.PI) / 180;\r\n\r\n\t\t\tthis.angleE = angleE;\r\n\t\t\tthis.angleS = angleS;\r\n\r\n\t\t\tthis.sliderParts\r\n\t\t\t\t.filter((parts) => parts.type === \"Slider Repeat\")\r\n\t\t\t\t.forEach((info, idx) => {\r\n\t\t\t\t\tconst angle = idx % 2 === 0 ? this.angleE : this.angleS;\r\n\t\t\t\t\tconst revSprite = new ReverseArrow(\r\n\t\t\t\t\t\tthis,\r\n\t\t\t\t\t\tinfo.time,\r\n\t\t\t\t\t\tinfo,\r\n\t\t\t\t\t\tangle,\r\n\t\t\t\t\t\tthis.stackHeight,\r\n\t\t\t\t\t\tidx,\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tthis.revArrows.push(revSprite);\r\n\t\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.sliderParts\r\n\t\t\t.filter((parts) => parts.type === \"Slider Tick\")\r\n\t\t\t.forEach((info, spanIdx) => {\r\n\t\t\t\tconst tick = new SliderTick(info, this, spanIdx);\r\n\t\t\t\tthis.ticks.push(tick);\r\n\t\t\t});\r\n\r\n\t\t// console.log(this.time, this.angleList);\r\n\r\n\t\t// start = performance.now();\r\n\t\t// this.sliderGeometryContainer = {};\r\n\t\tthis.sliderGeometryContainer = new SliderGeometryContainers(\r\n\t\t\tthis.angleList,\r\n\t\t\tthis,\r\n\t\t);\r\n\t\t// this.reInitialize();\r\n\t\t// took = performance.now() - start;\r\n\t\t// if (took > 5) console.log(`Took: ${took}ms to create ${this.time} SliderMesh`);\r\n\t\tthis.SliderMesh = this.sliderGeometryContainer.sliderContainer;\r\n\t\tthis.selected = this.sliderGeometryContainer.selSliderContainer.container;\r\n\r\n\t\tthis.SliderMeshContainer = new PIXI.Container();\r\n\t\tthis.SliderMeshContainer.addChild(this.SliderMesh.container);\r\n\r\n\t\tthis.ball = new SliderBall(this);\r\n\r\n\t\tthis.judgementContainer = new PIXI.Container();\r\n\r\n\t\tSliderContainer.addChild(this.SliderMeshContainer);\r\n\t\tSliderContainer.addChild(this.judgementContainer);\r\n\r\n\t\tthis.ticks.forEach((tick) => SliderContainer.addChild(tick.obj));\r\n\t\tSliderContainer.addChild(this.sliderEnd.hitCircle.obj);\r\n\t\tthis.revArrows.forEach((arrow) => SliderContainer.addChild(arrow.obj));\r\n\r\n\t\tthis.nodesContainer = new PIXI.Container();\r\n\r\n\t\tthis.nodesLine = new PIXI.Graphics()\r\n\t\t\t.setStrokeStyle({\r\n\t\t\t\twidth: 2,\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t})\r\n\t\t\t.moveTo(this.nodes[0].position.x, this.nodes[0].position.y);\r\n\t\tthis.nodesContainer.addChild(this.nodesLine);\r\n\r\n\t\tthis.nodesGraphics = this.nodes.map((node) => {\r\n\t\t\tconst fillColor = node.type === \"White Anchor\" ? 0xffffff : 0xff0000;\r\n\t\t\tconst x = node.position.x;\r\n\t\t\tconst y = node.position.y;\r\n\r\n\t\t\tthis.nodesLine.lineTo(x, y);\r\n\r\n\t\t\tconst graphic = new PIXI.Graphics().circle(0, 0, 5).fill(fillColor);\r\n\t\t\tthis.nodesContainer.addChild(graphic);\r\n\r\n\t\t\treturn graphic;\r\n\t\t});\r\n\r\n\t\tthis.nodesLine.stroke();\r\n\r\n\t\tthis.selectedSliderEnd = new PIXI.Sprite(\r\n\t\t\tGame.SKINNING.type === \"0\"\r\n\t\t\t\t? Texture.SELECTED_ARGON.texture\r\n\t\t\t\t: Texture.SELECTED.texture,\r\n\t\t);\r\n\t\tthis.selectedSliderEnd.anchor.set(0.5);\r\n\r\n\t\tSliderContainer.addChild(this.hitCircle.obj);\r\n\t\tSliderContainer.addChild(this.ball.obj);\r\n\t\tSliderContainer.addChild(this.nodesContainer);\r\n\r\n\t\tSliderContainer.label = `${Math.round(this.time)}-SLIDER`;\r\n\r\n\t\t// this.obj.alpha = 0.0;\r\n\r\n\t\t// this.obj.visible = false;\r\n\t}\r\n\r\n\tget approachCircleObj() {\r\n\t\treturn this.hitCircle.approachCircleObj;\r\n\t}\r\n}\r\n","import { Game } from \"../Game.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { ObjectsController } from \"./ObjectsController.js\";\r\nimport { Clamp, ApplyModsToTime, TranslateToZero } from \"../Utils.js\";\r\nimport { ScoreParser } from \"../ScoreParser.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class Spinner {\r\n    time;\r\n    endTime;\r\n    obj;\r\n    approachCircle;\r\n\r\n    hitSounds;\r\n\r\n    comboIdx = 1;\r\n    colourIdx = -1;\r\n    colourHaxedIdx = -1;\r\n\r\n    judgementContainer;\r\n    judgement;\r\n\r\n    playHitsound(timestamp, lastTimestamp) {\r\n        if (!Game.BEATMAP_FILE.audioNode.isPlaying) return;\r\n        if (!timestamp || !lastTimestamp) return;\r\n        if (timestamp < this.endTime || lastTimestamp >= this.endTime) return;\r\n\r\n        if (!ScoreParser.REPLAY_DATA) {\r\n            this.hitSounds.play();\r\n            return;\r\n        }\r\n\r\n        // Will reimplement later for optimization\r\n        const evaluation = ScoreParser.EVAL_LIST.find((evaluation) => evaluation.time === this.time);\r\n        if (evaluation) this.hitSounds.play();\r\n    }\r\n\r\n    draw(timestamp) {\r\n        this.obj.x = 256 * Game.SCALE_RATE;\r\n        this.obj.y = 192 * Game.SCALE_RATE;\r\n        this.playHitsound(timestamp);\r\n\r\n        if (timestamp < this.time) {\r\n            let currentAR = Clamp(Beatmap.stats.approachRate * (Game.MODS.HR ? 1.4 : 1) * (Game.MODS.EZ ? 0.5 : 1), 0, 10);\r\n            const currentFadeIn = currentAR < 5 ? 800 + (400 * (5 - currentAR)) / 5 : currentAR > 5 ? 800 - (500 * (currentAR - 5)) / 5 : 800;\r\n\r\n            this.obj.alpha = 1 - Math.min(1, Math.max(0, (this.time - timestamp) / currentFadeIn));\r\n            this.approachCircle.scale.set(1.0 * Game.SCALE_RATE);\r\n            return;\r\n        }\r\n\r\n        if (this.time <= timestamp && timestamp <= this.hitTime) {\r\n            const scale = 1 - Math.max(0, Math.min(1, (timestamp - this.time) / (this.hitTime - this.time)));\r\n            this.approachCircle.scale.set(scale * Game.SCALE_RATE);\r\n            this.obj.alpha = 1;\r\n            return;\r\n        }\r\n\r\n        if (timestamp > this.hitTime) {\r\n            this.obj.alpha = 1 - Math.min(1, Math.max(0, (timestamp - this.hitTime) / 240));\r\n            this.approachCircle.scale.set(0.0 * Game.SCALE_RATE);\r\n            return;\r\n        }\r\n    }\r\n\r\n    eval(inputIdx) {\r\n        const stat = [];\r\n        const duration = this.hitTime - this.time;\r\n\r\n        let velocityOnPaper = 0; // Don't ask me. I'm trolling.\r\n        let velocityCurrent = 0;\r\n\r\n        let zeroCount = 0;\r\n\r\n        let rotationCount = 0;\r\n        let scoringRotationCount = 0;\r\n        let previousRotationCount = 0;\r\n\r\n        let previousAngle;\r\n\r\n        let bonus = 0;\r\n        let bonusV2 = 0;\r\n        let rpm = 0;\r\n\r\n        const OD = Beatmap.stats.overallDifficulty;\r\n        const RPS = Beatmap.difficultyRange(OD, 3, 5, 7.5);\r\n        const requiredSpins = Math.floor((duration / 1000) * RPS);\r\n        const minSpins = !ScoreParser.IS_OLD_VER ? Math.max(0, requiredSpins / 4) : requiredSpins;\r\n        const fullSpin = !ScoreParser.IS_OLD_VER ? requiredSpins : requiredSpins + 1;\r\n        const maxAccel = 0.00008 + Math.max(0, (5000 - duration) / 1000 / 2000);\r\n\r\n        let totalScoreFrameVariance = 0;\r\n\r\n        let idx = inputIdx;\r\n\r\n        while (ScoreParser.CURSOR_DATA[idx].time < this.hitTime) {\r\n            if (ScoreParser.CURSOR_DATA[idx].time < this.time) {\r\n                idx++;\r\n                continue;\r\n            }\r\n\r\n            const currInput = TranslateToZero(ScoreParser.CURSOR_DATA[idx]);\r\n            const currentAngle = Math.atan2(currInput.y, currInput.x);\r\n\r\n            let timeDiff = currInput.time - ScoreParser.CURSOR_DATA[idx - 1].time;\r\n            if (ScoreParser.CURSOR_DATA[idx - 1].time === 0) timeDiff = 100 / 6;\r\n\r\n            const maxAccelThisFrame = ApplyModsToTime(maxAccel * timeDiff, ScoreParser.MODS);\r\n\r\n            if (velocityOnPaper > velocityCurrent) {\r\n                const accel = maxAccelThisFrame;\r\n                velocityCurrent += Math.min(velocityOnPaper - velocityCurrent, accel);\r\n            } else {\r\n                const accel = -maxAccelThisFrame;\r\n                velocityCurrent += Math.max(velocityOnPaper - velocityCurrent, accel);\r\n            }\r\n\r\n            velocityCurrent = Clamp(velocityCurrent, -0.05, 0.05);\r\n\r\n            const decay1 = 0.9 ** ((timeDiff / 100) * 6);\r\n            rpm = rpm * decay1 + (((1 - decay1) * Math.abs(velocityCurrent) * 1000) / (2 * Math.PI)) * 60;\r\n\r\n            previousAngle = !previousAngle ? (ScoreParser.IS_OLD_VER ? 0 : currentAngle) : previousAngle;\r\n\r\n            let delta = currentAngle - previousAngle;\r\n\r\n            const mPI = -Math.PI;\r\n\r\n            if (delta < mPI) {\r\n                delta = 2 * Math.PI + currentAngle - previousAngle;\r\n            } else if (-delta < mPI) {\r\n                delta = -2 * Math.PI - previousAngle + currentAngle;\r\n            }\r\n\r\n            const decay = 0.9 ** ((timeDiff / 100) * 6);\r\n            totalScoreFrameVariance = decay * totalScoreFrameVariance + (1 - decay) * timeDiff;\r\n\r\n            // I seriously don't know a shit about this\r\n            if (delta === 0) {\r\n                zeroCount++;\r\n\r\n                if (zeroCount < 2) {\r\n                    velocityOnPaper /= 3;\r\n                } else {\r\n                    velocityOnPaper = 0;\r\n                }\r\n            } else {\r\n                zeroCount = 0;\r\n\r\n                if (currInput.inputArray.length === 0 || currInput.time < this.time) delta = 0;\r\n                if (Math.abs(delta) < Math.PI) {\r\n                    // This is too insane up until this point\r\n                    // Alright so this is like the mininum velocity due to the time delta should be at least 16.67ms\r\n                    // velocityOnPaper = (delta / 100) * 6;\r\n                    // velocityOnPaper = delta / timeDiff;\r\n\r\n                    if (ApplyModsToTime(totalScoreFrameVariance, ScoreParser.MODS) > (100 / 6) * 1.04) {\r\n                        if (timeDiff > 0) {\r\n                            velocityOnPaper = delta / ApplyModsToTime(totalScoreFrameVariance, ScoreParser.MODS);\r\n                        } else {\r\n                            velocityOnPaper = 0;\r\n                        }\r\n                    } else {\r\n                        velocityOnPaper = delta / (100 / 6);\r\n                    }\r\n                } else {\r\n                    velocityOnPaper = 0;\r\n                }\r\n            }\r\n\r\n            previousAngle = currentAngle;\r\n\r\n            // console.log(currInput.time, rotationCount, velocityOnPaper, velocityCurrent);\r\n\r\n            const rotated = velocityCurrent * timeDiff;\r\n            const rotatedByRPM = ((rpm * timeDiff) / 60000) * (Math.PI * 2);\r\n            rotationCount += Math.min(1, Math.abs(rotated / Math.PI));\r\n            // rotationCount += Math.min(1, Math.abs(rotatedByRPM / Math.PI));\r\n\r\n            if (Math.floor(rotationCount) == previousRotationCount) {\r\n                // console.log(currInput.time, rotationCount, velocityOnPaper, velocityCurrent, motherFucker);\r\n                stat.push({\r\n                    time: currInput.time,\r\n                    delta: Math.abs((delta * 180) / Math.PI),\r\n                    rotationCount,\r\n                    result: 0,\r\n                    rpm,\r\n                    rotated,\r\n                    rotatedByRPM,\r\n                    diff: Math.abs(rotated) - Math.abs(rotatedByRPM),\r\n                });\r\n                idx++;\r\n                continue;\r\n            }\r\n\r\n            scoringRotationCount++;\r\n\r\n            let currentResult = 0;\r\n            let currentResultV2 = 0;\r\n\r\n            if (scoringRotationCount > requiredSpins + 3 && (scoringRotationCount - (requiredSpins + 3)) % 2 === 0) {\r\n                currentResult += 1100;\r\n                currentResultV2 += 600;\r\n            } else if (scoringRotationCount > 1 && scoringRotationCount % 2 === 0) {\r\n                currentResult += 100;\r\n                currentResultV2 += 100;\r\n            }\r\n\r\n            // console.log(currInput.time, rotationCount, velocityOnPaper, velocityCurrent, motherFucker, currentResult);\r\n            stat.push({\r\n                time: currInput.time,\r\n                delta: Math.abs((delta * 180) / Math.PI),\r\n                rotationCount,\r\n                result: currentResult,\r\n                rpm,\r\n                rotated,\r\n                rotatedByRPM,\r\n                diff: Math.abs(rotated) - Math.abs(rotatedByRPM),\r\n            });\r\n\r\n            previousRotationCount = Math.floor(rotationCount);\r\n\r\n            bonus += currentResult;\r\n            bonusV2 += currentResultV2;\r\n\r\n            idx++;\r\n        }\r\n\r\n        // console.table(stat);\r\n        let val = 0;\r\n\r\n        if (!ScoreParser.IS_OLD_VER) {\r\n            val = scoringRotationCount < minSpins ? 0 : scoringRotationCount > fullSpin ? 300 : scoringRotationCount > fullSpin - 1 ? 100 : 50;\r\n        } else {\r\n            val =\r\n                minSpins === 0\r\n                    ? 300\r\n                    : scoringRotationCount < minSpins\r\n                    ? 0\r\n                    : scoringRotationCount > fullSpin\r\n                    ? 300\r\n                    : scoringRotationCount > fullSpin - 2\r\n                    ? 100\r\n                    : 50;\r\n        }\r\n\r\n        return {\r\n            val,\r\n            valV2: val,\r\n            bonus,\r\n            bonusV2,\r\n            inputTime: -1,\r\n        };\r\n    }\r\n\r\n    constructor(startTime, endTime, hitSounds) {\r\n        this.time = startTime;\r\n        this.hitTime = endTime;\r\n        this.killTime = endTime + 240;\r\n        this.endTime = endTime;\r\n\r\n        const container = new PIXI.Container();\r\n\r\n        const approachCircleContainer = new PIXI.Container();\r\n        const approachCircle = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 2,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 0,\r\n            })\r\n            .circle(0, 0, 192)\r\n            .stroke();\r\n\r\n        approachCircleContainer.addChild(approachCircle);\r\n\r\n        const spinner = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 2,\r\n                color: 0xffffff,\r\n                alpha: 1,\r\n                cap: \"round\",\r\n                alignment: 0,\r\n            })\r\n            .circle(0, 0, 5)\r\n            .stroke();\r\n\r\n        this.judgementContainer = new PIXI.Container();\r\n\r\n        container.addChild(this.judgementContainer);\r\n        container.addChild(approachCircleContainer);\r\n        container.addChild(spinner);\r\n        container.x = (256 * Game.WIDTH) / 512;\r\n        container.y = (192 * Game.WIDTH) / 512;\r\n\r\n        this.obj = container;\r\n\t\tthis.obj.label = `${Math.round(this.time)}-SPINNER`;\r\n\r\n        // this.obj.visible = false;\r\n\r\n        this.approachCircle = approachCircleContainer;\r\n        this.hitSounds = hitSounds\r\n    }\r\n\r\n    get approachCircleObj() {\r\n        return null;\r\n    }\r\n}\r\n","import { Game } from \"./Game.js\";\r\nimport { Beatmap } from \"./Beatmap.js\";\r\nimport { HitCircle } from \"./HitObjects/HitCircle.js\";\r\nimport { Slider } from \"./HitObjects/Slider.js\";\r\nimport { Clamp } from \"./Utils.js\";\r\n\r\nexport const handleCanvasDrag = (e, calledFromDraw) => {\r\n    // console.log(e);\r\n\r\n    const x = Game.CURRENT_X;\r\n    const y = Game.CURRENT_Y;\r\n\r\n    const currentTime = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\r\n    const start_X = Game.START_X;\r\n    const start_Y = Game.START_Y;\r\n\r\n    let currentAR = Clamp(Beatmap.stats.approachRate * (Game.MODS.HR ? 1.4 : 1) * (Game.MODS.EZ ? 0.5 : 1), 0, 10);\r\n    const currentPreempt = Beatmap.difficultyRange(currentAR, 1800, 1200, 450);\r\n\r\n    const selectedObjList = Game.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList\r\n        .filter((o) => {\r\n            const lowerBound = o.obj.time - currentPreempt;\r\n            const upperBound = Game.SLIDER_APPEARANCE.hitAnim ? o.obj.killTime : Math.max(o.obj.time + 800, o.obj.killTime);\r\n\r\n            return (\r\n                (lowerBound <= Math.min(Game.DRAGGING_START, Game.DRAGGING_END) && upperBound >= Math.max(Game.DRAGGING_START, Game.DRAGGING_END)) ||\r\n                (lowerBound >= Math.min(Game.DRAGGING_START, Game.DRAGGING_END) && upperBound <= Math.max(Game.DRAGGING_START, Game.DRAGGING_END)) ||\r\n                (lowerBound >= Math.min(Game.DRAGGING_START, Game.DRAGGING_END) && lowerBound <= Math.max(Game.DRAGGING_START, Game.DRAGGING_END)) ||\r\n                (upperBound >= Math.min(Game.DRAGGING_START, Game.DRAGGING_END) && upperBound <= Math.max(Game.DRAGGING_START, Game.DRAGGING_END))\r\n            );\r\n        })\r\n        .filter((o) => {\r\n            const coordLowerBound = {\r\n                x: Math.min(x, start_X),\r\n                y: Math.min(y, start_Y),\r\n            };\r\n\r\n            const coordUpperBound = {\r\n                x: Math.max(x, start_X),\r\n                y: Math.max(y, start_Y),\r\n            };\r\n\r\n            if (o.obj instanceof HitCircle) {\r\n                const positionX = o.obj.originalX + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n                const positionY = (!Game.MODS.HR ? o.obj.originalY : 384 - o.obj.originalY) + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n\r\n                // console.log(\r\n                //     o.time,\r\n                //     lowerBound <= currentTime,\r\n                //     upperBound >= currentTime,\r\n                //     { x: positionX, y: positionY },\r\n                //     coordLowerBound,\r\n                //     coordUpperBound\r\n                // );\r\n\r\n                return (\r\n                    positionX >= coordLowerBound.x &&\r\n                    positionX <= coordUpperBound.x &&\r\n                    positionY >= coordLowerBound.y &&\r\n                    positionY <= coordUpperBound.y\r\n                );\r\n            }\r\n\r\n            if (o.obj instanceof Slider) {\r\n                const renderableAngleList = o.obj.angleList;\r\n\r\n                const res = renderableAngleList.some((point) => {\r\n                    const positionX = point.x + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n                    const positionY = (!Game.MODS.HR ? point.y : 384 - point.y) + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n\r\n                    return (\r\n                        positionX + Beatmap.moddedStats.stackOffset * o.obj.stackHeight >= coordLowerBound.x &&\r\n                        positionX + Beatmap.moddedStats.stackOffset * o.obj.stackHeight <= coordUpperBound.x &&\r\n                        positionY + Beatmap.moddedStats.stackOffset * o.obj.stackHeight >= coordLowerBound.y &&\r\n                        positionY + Beatmap.moddedStats.stackOffset * o.obj.stackHeight <= coordUpperBound.y\r\n                    );\r\n                });\r\n\r\n                // console.log(o.time, res);\r\n                return res;\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n    if (selectedObjList.length) {\r\n        Game.SELECTED = selectedObjList.map((o) => o.obj.time);\r\n    } else if (e && !e.ctrlKey) {\r\n        Game.SELECTED = [];\r\n    }\r\n};\r\n\r\nexport const checkCollide = (x, y, objMeta) => {\r\n    let currentHitCircleSize = Beatmap.moddedStats.radius * (236 / 256);\r\n    const drawOffset = currentHitCircleSize;\r\n\r\n    const o = Game.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList[objMeta.idx];\r\n\r\n    if (o.obj instanceof HitCircle) {\r\n        const positionX = o.obj.originalX + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n        const positionY = (!Game.MODS.HR ? o.obj.originalY : 384 - o.obj.originalY) + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n\r\n        return (x - positionX) ** 2 + (y - positionY) ** 2 <= drawOffset ** 2;\r\n    }\r\n\r\n    if (o.obj instanceof Slider) {\r\n        const renderableAngleList = o.obj.angleList;\r\n\r\n        const res = renderableAngleList.some((point) => {\r\n            const positionX = point.x + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n            const positionY = (!Game.MODS.HR ? point.y : 384 - point.y) + Beatmap.moddedStats.stackOffset * o.obj.stackHeight;\r\n\r\n            return (x - positionX) ** 2 + (y - positionY) ** 2 <= drawOffset ** 2;\r\n        });\r\n\r\n        // console.log(o.time, res);\r\n        return res;\r\n    }\r\n\r\n    return false;\r\n};\r\n","import * as PIXI from \"pixi.js\";\r\nimport * as TWEEN from \"@tweenjs/tween.js\";\r\nimport { ObjectsController } from \"./HitObjects/ObjectsController\";\r\nimport { Game } from \"./Game\";\r\n\r\nexport const frameData = {\r\n    fps: 0,\r\n    deltaMS: 0,\r\n};\r\n\r\nexport class FPSSystem {\r\n    static extension = {\r\n        type: [PIXI.ExtensionType.WebGLSystem, PIXI.ExtensionType.WebGPUSystem],\r\n        name: \"fps\",\r\n    };\r\n\r\n    _renderer;\r\n\r\n    constructor(renderer) {\r\n        this._renderer = renderer;\r\n    }\r\n\r\n    init() {\r\n        this._renderer.runners.prerender.add(this);\r\n        this._renderer.runners.postrender.add(this);\r\n    }\r\n\r\n    destroy() {\r\n        this._renderer.runners.prerender.remove(this);\r\n        this._renderer.runners.postrender.remove(this);\r\n    }\r\n\r\n    _renderStart = 0;\r\n    _lastFrame = 0;\r\n\r\n    _fpsQueue = [];\r\n    _msQueue = [];\r\n\r\n    prerender() {\r\n        // console.log(\"prerender\");\r\n        this._renderStart = performance.now();\r\n        const fps = 1000 / (this._renderStart - this._lastFrame);\r\n        this._fpsQueue.push(fps);\r\n\r\n        while (this._fpsQueue.length > 100) {\r\n            this._fpsQueue.shift();\r\n        }\r\n\r\n        frameData.fps =\r\n            this._fpsQueue.reduce((accm, curr, idx) => {\r\n                return accm + curr * ((idx + 1) / this._fpsQueue.length);\r\n            }, 0) /\r\n            ((1 / this._fpsQueue.length + 1) * (this._fpsQueue.length / 2));\r\n\r\n        this._lastFrame = this._renderStart;\r\n\r\n        if (!Game.INIT) return;\r\n\r\n        ObjectsController.render();\r\n        TWEEN.update();\r\n        // Game.DEVE_RATIO = devicePixelRatio;\r\n    }\r\n\r\n    postrender() {\r\n        // console.log(\"postrender\");\r\n        const deltaMS = performance.now() - this._renderStart;\r\n        this._msQueue.push(deltaMS);\r\n\r\n        while (this._msQueue.length > 100) {\r\n            this._msQueue.shift();\r\n        }\r\n\r\n        frameData.deltaMS =\r\n            this._msQueue.reduce((accm, curr, idx) => {\r\n                return accm + curr * ((idx + 1) / this._msQueue.length);\r\n            }, 0) /\r\n            ((1 / this._msQueue.length + 1) * (this._msQueue.length / 2));\r\n    }\r\n}\r\n\r\nPIXI.extensions.add(FPSSystem);\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Game } from \"./Game\";\r\nimport { imageToBase64 } from \"./Utils\";\r\nimport { ObjectsController } from \"./HitObjects/ObjectsController\";\r\nimport { Timeline } from \"./Timeline/Timeline\";\r\n\r\nexport class Background {\r\n    container;\r\n    sprite;\r\n    mask;\r\n    filter;\r\n    dim;\r\n\r\n    blob;\r\n    videoHTML;\r\n\r\n    texture;\r\n    videoTexture;\r\n    offset = 0;\r\n\r\n    w = 1;\r\n    h = 1;\r\n\r\n    static init() {\r\n        this.container = new PIXI.Container();\r\n        this.sprite = new PIXI.Sprite();\r\n        this.mask = new PIXI.Graphics();\r\n        this.dim = new PIXI.Graphics();\r\n\r\n        this.filter = new PIXI.BlurFilter({\r\n            kernelSize: 9,\r\n            quality: 10,\r\n            strength: 50,\r\n        });\r\n        this.filter.strength = 0;\r\n\r\n        this.container.filters = [this.filter];\r\n\r\n        // this.mask.rect(0, 0, Game.MASTER_CONTAINER.w, Game.MASTER_CONTAINER.h);\r\n        this.mask.rect(0, 0, Game.MASTER_CONTAINER.w, Game.MASTER_CONTAINER.h).fill(0x000000);\r\n        this.dim.rect(0, 0, Game.MASTER_CONTAINER.w, Game.MASTER_CONTAINER.h).fill(0x000000);\r\n\r\n        this.container.addChild(this.sprite, this.dim, this.mask);\r\n        this.container.y = (innerWidth < innerHeight ? 60 : 60);\r\n        this.container.label = \"Hello\";\r\n        this.container.mask = this.mask;\r\n\r\n        this._src = null;\r\n        return this.container;\r\n    }\r\n\r\n    static reset() {\r\n        this.sprite.texture = undefined;\r\n        this._src = undefined;\r\n        this._videoSrc = undefined;\r\n\r\n        this.texture = undefined;\r\n        this.videoTexture = undefined;\r\n\r\n        this.offset = 0;\r\n    }\r\n\r\n    static get src() {\r\n        return this._src;\r\n    }\r\n\r\n    static set src(val) {\r\n        this._src = val;\r\n        this.setBG();\r\n    }\r\n\r\n    static get videoSrc() {\r\n        return this._videoSrc;\r\n    }\r\n\r\n    static set videoSrc(val) {\r\n        this._videoSrc = val;\r\n        this.setVideoBG();\r\n    }\r\n\r\n    static changeStrength(val) {\r\n        this.filter.strength = (val / 20) * 100;\r\n    }\r\n\r\n    static changeOpacity(val) {\r\n        const wRatio = Game.MASTER_CONTAINER.w / this.w;\r\n        const hRatio = Game.MASTER_CONTAINER.h / this.h;\r\n        const ratio = Math.max(wRatio, hRatio);\r\n\r\n        this.dim\r\n            .clear()\r\n            .rect(0, 0, this.w * ratio, this.h * ratio)\r\n            .fill({\r\n                color: 0x000000,\r\n                alpha: val,\r\n            });\r\n    }\r\n\r\n    static manuallyUpdateSize() {\r\n        this.sprite.scale.set(1.0);\r\n\r\n        if (this.w !== this.sprite.width) {\r\n            this.w = this.sprite.width;\r\n        }\r\n\r\n        if (this.h !== this.sprite.height) {\r\n            this.h = this.sprite.height;\r\n        }\r\n\r\n        const wRatio = Game.MASTER_CONTAINER.w / this.w;\r\n        const hRatio = Game.MASTER_CONTAINER.h / this.h;\r\n        const ratio = Math.max(wRatio, hRatio);\r\n\r\n        this.sprite.scale.set(ratio);\r\n\r\n        this.sprite.x = (Game.MASTER_CONTAINER.w - this.w * ratio) / 2;\r\n        this.sprite.y = (Game.MASTER_CONTAINER.h - this.h * ratio) / 2;\r\n\r\n        this.mask\r\n            .clear()\r\n            .rect(0, 0, this.w * ratio, this.h * ratio)\r\n            .fill({ color: 0x000000, alpha: 1 });\r\n\r\n        this.dim\r\n            .clear()\r\n            .rect(0, 0, this.w * ratio, this.h * ratio)\r\n            .fill({ color: 0x000000, alpha: Game.ALPHA });\r\n\r\n        this.container.y = 60 - Timeline.HEIGHT_REDUCTION;\r\n    }\r\n\r\n    static updateSize() {\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.manuallyUpdateSize();\r\n    }\r\n\r\n    static async setBG() {\r\n        const texture = await PIXI.Assets.load({ src: this.src, loadParser: \"loadTextures\" });\r\n        this.texture = texture;\r\n\r\n        this.sprite.texture = texture;\r\n\r\n        this.manuallyUpdateSize();\r\n\r\n        const currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n        this.changeStrength(currentLocalStorage.background.blur);\r\n    }\r\n\r\n    static playVideo(timestamp) {\r\n        if (!this.videoHTML || !this.videoSrc || !Game.IS_VIDEO) return;\r\n\r\n        const startTime = Math.max(timestamp - Background.offset, 0);\r\n        this.videoHTML.currentTime = startTime / 1000;\r\n        this.videoHTML.playbackRate = Game.PLAYBACK_RATE;\r\n\r\n        this.videoHTML.play();\r\n    }\r\n\r\n    static pauseVideo(timestamp) {\r\n        if (!this.videoHTML || !this.videoSrc || !Game.IS_VIDEO) return;\r\n\r\n        this.videoHTML.pause();\r\n\r\n        const endTime = Math.max(timestamp - Background.offset, 0);\r\n        this.videoHTML.currentTime = endTime / 1000;\r\n    }\r\n\r\n    static seekTo(timestamp) {\r\n        if (!this.videoHTML || !this.videoSrc || !Game.IS_VIDEO) return;\r\n        this.videoHTML.currentTime = Math.max(timestamp - Background.offset, 0) / 1000;\r\n    }\r\n\r\n    static switch(mode) {\r\n        if (!this.videoSrc) return;\r\n\r\n        console.log(mode);\r\n\r\n        if (mode === \"VIDEO\") {\r\n            this.sprite.texture = this.videoTexture;\r\n            this.manuallyUpdateSize();\r\n            return;\r\n        }\r\n\r\n        this.sprite.texture = this.texture;\r\n        this.manuallyUpdateSize();\r\n    }\r\n\r\n    static async setVideoBG() {\r\n        const texture = await PIXI.Assets.load({\r\n            src: this.videoSrc,\r\n            data: {\r\n                autoPlay: false,\r\n            },\r\n            loadParser: \"loadVideo\",\r\n        });\r\n        this.videoTexture = texture;\r\n\r\n        this.videoHTML = texture.source.resource;\r\n\r\n        // console.log(this.videoHTML);\r\n        this.videoHTML.autoplay = false;\r\n        this.videoHTML.currentTime = 0;\r\n        this.videoHTML.pause();\r\n\r\n        if (!Game.IS_VIDEO) return;\r\n        this.sprite.texture = texture;\r\n        this.manuallyUpdateSize();\r\n    }\r\n}\r\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __pow = Math.pow;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b ||= {})\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n\n// src/ebml.ts\nvar EBMLFloat32 = class {\n  constructor(value) {\n    this.value = value;\n  }\n};\nvar EBMLFloat64 = class {\n  constructor(value) {\n    this.value = value;\n  }\n};\nvar measureUnsignedInt = (value) => {\n  if (value < 1 << 8) {\n    return 1;\n  } else if (value < 1 << 16) {\n    return 2;\n  } else if (value < 1 << 24) {\n    return 3;\n  } else if (value < __pow(2, 32)) {\n    return 4;\n  } else if (value < __pow(2, 40)) {\n    return 5;\n  } else {\n    return 6;\n  }\n};\nvar measureEBMLVarInt = (value) => {\n  if (value < (1 << 7) - 1) {\n    return 1;\n  } else if (value < (1 << 14) - 1) {\n    return 2;\n  } else if (value < (1 << 21) - 1) {\n    return 3;\n  } else if (value < (1 << 28) - 1) {\n    return 4;\n  } else if (value < __pow(2, 35) - 1) {\n    return 5;\n  } else if (value < __pow(2, 42) - 1) {\n    return 6;\n  } else {\n    throw new Error(\"EBML VINT size not supported \" + value);\n  }\n};\n\n// src/misc.ts\nvar readBits = (bytes, start, end) => {\n  let result = 0;\n  for (let i = start; i < end; i++) {\n    let byteIndex = Math.floor(i / 8);\n    let byte = bytes[byteIndex];\n    let bitIndex = 7 - (i & 7);\n    let bit = (byte & 1 << bitIndex) >> bitIndex;\n    result <<= 1;\n    result |= bit;\n  }\n  return result;\n};\nvar writeBits = (bytes, start, end, value) => {\n  for (let i = start; i < end; i++) {\n    let byteIndex = Math.floor(i / 8);\n    let byte = bytes[byteIndex];\n    let bitIndex = 7 - (i & 7);\n    byte &= ~(1 << bitIndex);\n    byte |= (value & 1 << end - i - 1) >> end - i - 1 << bitIndex;\n    bytes[byteIndex] = byte;\n  }\n};\n\n// src/target.ts\nvar ArrayBufferTarget = class {\n  constructor() {\n    this.buffer = null;\n  }\n};\nvar StreamTarget = class {\n  constructor(options) {\n    this.options = options;\n  }\n};\nvar FileSystemWritableFileStreamTarget = class {\n  constructor(stream, options) {\n    this.stream = stream;\n    this.options = options;\n  }\n};\n\n// src/writer.ts\nvar _helper, _helperView, _writeByte, writeByte_fn, _writeFloat32, writeFloat32_fn, _writeFloat64, writeFloat64_fn, _writeUnsignedInt, writeUnsignedInt_fn, _writeString, writeString_fn;\nvar Writer = class {\n  constructor() {\n    __privateAdd(this, _writeByte);\n    __privateAdd(this, _writeFloat32);\n    __privateAdd(this, _writeFloat64);\n    __privateAdd(this, _writeUnsignedInt);\n    __privateAdd(this, _writeString);\n    this.pos = 0;\n    __privateAdd(this, _helper, new Uint8Array(8));\n    __privateAdd(this, _helperView, new DataView(__privateGet(this, _helper).buffer));\n    this.offsets = /* @__PURE__ */ new WeakMap();\n    this.dataOffsets = /* @__PURE__ */ new WeakMap();\n  }\n  seek(newPos) {\n    this.pos = newPos;\n  }\n  writeEBMLVarInt(value, width = measureEBMLVarInt(value)) {\n    let pos = 0;\n    switch (width) {\n      case 1:\n        __privateGet(this, _helperView).setUint8(pos++, 1 << 7 | value);\n        break;\n      case 2:\n        __privateGet(this, _helperView).setUint8(pos++, 1 << 6 | value >> 8);\n        __privateGet(this, _helperView).setUint8(pos++, value);\n        break;\n      case 3:\n        __privateGet(this, _helperView).setUint8(pos++, 1 << 5 | value >> 16);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 8);\n        __privateGet(this, _helperView).setUint8(pos++, value);\n        break;\n      case 4:\n        __privateGet(this, _helperView).setUint8(pos++, 1 << 4 | value >> 24);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 16);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 8);\n        __privateGet(this, _helperView).setUint8(pos++, value);\n        break;\n      case 5:\n        __privateGet(this, _helperView).setUint8(pos++, 1 << 3 | value / __pow(2, 32) & 7);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 24);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 16);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 8);\n        __privateGet(this, _helperView).setUint8(pos++, value);\n        break;\n      case 6:\n        __privateGet(this, _helperView).setUint8(pos++, 1 << 2 | value / __pow(2, 40) & 3);\n        __privateGet(this, _helperView).setUint8(pos++, value / __pow(2, 32) | 0);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 24);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 16);\n        __privateGet(this, _helperView).setUint8(pos++, value >> 8);\n        __privateGet(this, _helperView).setUint8(pos++, value);\n        break;\n      default:\n        throw new Error(\"Bad EBML VINT size \" + width);\n    }\n    this.write(__privateGet(this, _helper).subarray(0, pos));\n  }\n  writeEBML(data) {\n    var _a, _b;\n    if (data === null)\n      return;\n    if (data instanceof Uint8Array) {\n      this.write(data);\n    } else if (Array.isArray(data)) {\n      for (let elem of data) {\n        this.writeEBML(elem);\n      }\n    } else {\n      this.offsets.set(data, this.pos);\n      __privateMethod(this, _writeUnsignedInt, writeUnsignedInt_fn).call(this, data.id);\n      if (Array.isArray(data.data)) {\n        let sizePos = this.pos;\n        let sizeSize = data.size === -1 ? 1 : (_a = data.size) != null ? _a : 4;\n        if (data.size === -1) {\n          __privateMethod(this, _writeByte, writeByte_fn).call(this, 255);\n        } else {\n          this.seek(this.pos + sizeSize);\n        }\n        let startPos = this.pos;\n        this.dataOffsets.set(data, startPos);\n        this.writeEBML(data.data);\n        if (data.size !== -1) {\n          let size = this.pos - startPos;\n          let endPos = this.pos;\n          this.seek(sizePos);\n          this.writeEBMLVarInt(size, sizeSize);\n          this.seek(endPos);\n        }\n      } else if (typeof data.data === \"number\") {\n        let size = (_b = data.size) != null ? _b : measureUnsignedInt(data.data);\n        this.writeEBMLVarInt(size);\n        __privateMethod(this, _writeUnsignedInt, writeUnsignedInt_fn).call(this, data.data, size);\n      } else if (typeof data.data === \"string\") {\n        this.writeEBMLVarInt(data.data.length);\n        __privateMethod(this, _writeString, writeString_fn).call(this, data.data);\n      } else if (data.data instanceof Uint8Array) {\n        this.writeEBMLVarInt(data.data.byteLength, data.size);\n        this.write(data.data);\n      } else if (data.data instanceof EBMLFloat32) {\n        this.writeEBMLVarInt(4);\n        __privateMethod(this, _writeFloat32, writeFloat32_fn).call(this, data.data.value);\n      } else if (data.data instanceof EBMLFloat64) {\n        this.writeEBMLVarInt(8);\n        __privateMethod(this, _writeFloat64, writeFloat64_fn).call(this, data.data.value);\n      }\n    }\n  }\n};\n_helper = new WeakMap();\n_helperView = new WeakMap();\n_writeByte = new WeakSet();\nwriteByte_fn = function(value) {\n  __privateGet(this, _helperView).setUint8(0, value);\n  this.write(__privateGet(this, _helper).subarray(0, 1));\n};\n_writeFloat32 = new WeakSet();\nwriteFloat32_fn = function(value) {\n  __privateGet(this, _helperView).setFloat32(0, value, false);\n  this.write(__privateGet(this, _helper).subarray(0, 4));\n};\n_writeFloat64 = new WeakSet();\nwriteFloat64_fn = function(value) {\n  __privateGet(this, _helperView).setFloat64(0, value, false);\n  this.write(__privateGet(this, _helper));\n};\n_writeUnsignedInt = new WeakSet();\nwriteUnsignedInt_fn = function(value, width = measureUnsignedInt(value)) {\n  let pos = 0;\n  switch (width) {\n    case 6:\n      __privateGet(this, _helperView).setUint8(pos++, value / __pow(2, 40) | 0);\n    case 5:\n      __privateGet(this, _helperView).setUint8(pos++, value / __pow(2, 32) | 0);\n    case 4:\n      __privateGet(this, _helperView).setUint8(pos++, value >> 24);\n    case 3:\n      __privateGet(this, _helperView).setUint8(pos++, value >> 16);\n    case 2:\n      __privateGet(this, _helperView).setUint8(pos++, value >> 8);\n    case 1:\n      __privateGet(this, _helperView).setUint8(pos++, value);\n      break;\n    default:\n      throw new Error(\"Bad UINT size \" + width);\n  }\n  this.write(__privateGet(this, _helper).subarray(0, pos));\n};\n_writeString = new WeakSet();\nwriteString_fn = function(str) {\n  this.write(new Uint8Array(str.split(\"\").map((x) => x.charCodeAt(0))));\n};\nvar _target, _buffer, _bytes, _ensureSize, ensureSize_fn;\nvar ArrayBufferTargetWriter = class extends Writer {\n  constructor(target) {\n    super();\n    __privateAdd(this, _ensureSize);\n    __privateAdd(this, _target, void 0);\n    __privateAdd(this, _buffer, new ArrayBuffer(__pow(2, 16)));\n    __privateAdd(this, _bytes, new Uint8Array(__privateGet(this, _buffer)));\n    __privateSet(this, _target, target);\n  }\n  write(data) {\n    __privateMethod(this, _ensureSize, ensureSize_fn).call(this, this.pos + data.byteLength);\n    __privateGet(this, _bytes).set(data, this.pos);\n    this.pos += data.byteLength;\n  }\n  finalize() {\n    __privateMethod(this, _ensureSize, ensureSize_fn).call(this, this.pos);\n    __privateGet(this, _target).buffer = __privateGet(this, _buffer).slice(0, this.pos);\n  }\n};\n_target = new WeakMap();\n_buffer = new WeakMap();\n_bytes = new WeakMap();\n_ensureSize = new WeakSet();\nensureSize_fn = function(size) {\n  let newLength = __privateGet(this, _buffer).byteLength;\n  while (newLength < size)\n    newLength *= 2;\n  if (newLength === __privateGet(this, _buffer).byteLength)\n    return;\n  let newBuffer = new ArrayBuffer(newLength);\n  let newBytes = new Uint8Array(newBuffer);\n  newBytes.set(__privateGet(this, _bytes), 0);\n  __privateSet(this, _buffer, newBuffer);\n  __privateSet(this, _bytes, newBytes);\n};\nvar _trackingWrites, _trackedWrites, _trackedStart, _trackedEnd;\nvar BaseStreamTargetWriter = class extends Writer {\n  constructor(target) {\n    super();\n    this.target = target;\n    __privateAdd(this, _trackingWrites, false);\n    __privateAdd(this, _trackedWrites, void 0);\n    __privateAdd(this, _trackedStart, void 0);\n    __privateAdd(this, _trackedEnd, void 0);\n  }\n  write(data) {\n    if (!__privateGet(this, _trackingWrites))\n      return;\n    let pos = this.pos;\n    if (pos < __privateGet(this, _trackedStart)) {\n      if (pos + data.byteLength <= __privateGet(this, _trackedStart))\n        return;\n      data = data.subarray(__privateGet(this, _trackedStart) - pos);\n      pos = 0;\n    }\n    let neededSize = pos + data.byteLength - __privateGet(this, _trackedStart);\n    let newLength = __privateGet(this, _trackedWrites).byteLength;\n    while (newLength < neededSize)\n      newLength *= 2;\n    if (newLength !== __privateGet(this, _trackedWrites).byteLength) {\n      let copy = new Uint8Array(newLength);\n      copy.set(__privateGet(this, _trackedWrites), 0);\n      __privateSet(this, _trackedWrites, copy);\n    }\n    __privateGet(this, _trackedWrites).set(data, pos - __privateGet(this, _trackedStart));\n    __privateSet(this, _trackedEnd, Math.max(__privateGet(this, _trackedEnd), pos + data.byteLength));\n  }\n  startTrackingWrites() {\n    __privateSet(this, _trackingWrites, true);\n    __privateSet(this, _trackedWrites, new Uint8Array(__pow(2, 10)));\n    __privateSet(this, _trackedStart, this.pos);\n    __privateSet(this, _trackedEnd, this.pos);\n  }\n  getTrackedWrites() {\n    if (!__privateGet(this, _trackingWrites)) {\n      throw new Error(\"Can't get tracked writes since nothing was tracked.\");\n    }\n    let slice = __privateGet(this, _trackedWrites).subarray(0, __privateGet(this, _trackedEnd) - __privateGet(this, _trackedStart));\n    let result = {\n      data: slice,\n      start: __privateGet(this, _trackedStart),\n      end: __privateGet(this, _trackedEnd)\n    };\n    __privateSet(this, _trackedWrites, void 0);\n    __privateSet(this, _trackingWrites, false);\n    return result;\n  }\n};\n_trackingWrites = new WeakMap();\n_trackedWrites = new WeakMap();\n_trackedStart = new WeakMap();\n_trackedEnd = new WeakMap();\nvar _sections, _lastFlushEnd, _ensureMonotonicity;\nvar StreamTargetWriter = class extends BaseStreamTargetWriter {\n  constructor(target, ensureMonotonicity) {\n    super(target);\n    __privateAdd(this, _sections, []);\n    __privateAdd(this, _lastFlushEnd, 0);\n    __privateAdd(this, _ensureMonotonicity, void 0);\n    __privateSet(this, _ensureMonotonicity, ensureMonotonicity);\n  }\n  write(data) {\n    super.write(data);\n    __privateGet(this, _sections).push({\n      data: data.slice(),\n      start: this.pos\n    });\n    this.pos += data.byteLength;\n  }\n  flush() {\n    var _a, _b;\n    if (__privateGet(this, _sections).length === 0)\n      return;\n    let chunks = [];\n    let sorted = [...__privateGet(this, _sections)].sort((a, b) => a.start - b.start);\n    chunks.push({\n      start: sorted[0].start,\n      size: sorted[0].data.byteLength\n    });\n    for (let i = 1; i < sorted.length; i++) {\n      let lastChunk = chunks[chunks.length - 1];\n      let section = sorted[i];\n      if (section.start <= lastChunk.start + lastChunk.size) {\n        lastChunk.size = Math.max(lastChunk.size, section.start + section.data.byteLength - lastChunk.start);\n      } else {\n        chunks.push({\n          start: section.start,\n          size: section.data.byteLength\n        });\n      }\n    }\n    for (let chunk of chunks) {\n      chunk.data = new Uint8Array(chunk.size);\n      for (let section of __privateGet(this, _sections)) {\n        if (chunk.start <= section.start && section.start < chunk.start + chunk.size) {\n          chunk.data.set(section.data, section.start - chunk.start);\n        }\n      }\n      if (__privateGet(this, _ensureMonotonicity) && chunk.start < __privateGet(this, _lastFlushEnd)) {\n        throw new Error(\"Internal error: Monotonicity violation.\");\n      }\n      (_b = (_a = this.target.options).onData) == null ? void 0 : _b.call(_a, chunk.data, chunk.start);\n      __privateSet(this, _lastFlushEnd, chunk.start + chunk.data.byteLength);\n    }\n    __privateGet(this, _sections).length = 0;\n  }\n  finalize() {\n  }\n};\n_sections = new WeakMap();\n_lastFlushEnd = new WeakMap();\n_ensureMonotonicity = new WeakMap();\nvar DEFAULT_CHUNK_SIZE = __pow(2, 24);\nvar MAX_CHUNKS_AT_ONCE = 2;\nvar _chunkSize, _chunks, _lastFlushEnd2, _ensureMonotonicity2, _writeDataIntoChunks, writeDataIntoChunks_fn, _insertSectionIntoChunk, insertSectionIntoChunk_fn, _createChunk, createChunk_fn, _flushChunks, flushChunks_fn;\nvar ChunkedStreamTargetWriter = class extends BaseStreamTargetWriter {\n  constructor(target, ensureMonotonicity) {\n    var _a, _b;\n    super(target);\n    __privateAdd(this, _writeDataIntoChunks);\n    __privateAdd(this, _insertSectionIntoChunk);\n    __privateAdd(this, _createChunk);\n    __privateAdd(this, _flushChunks);\n    __privateAdd(this, _chunkSize, void 0);\n    __privateAdd(this, _chunks, []);\n    __privateAdd(this, _lastFlushEnd2, 0);\n    __privateAdd(this, _ensureMonotonicity2, void 0);\n    __privateSet(this, _chunkSize, (_b = (_a = target.options) == null ? void 0 : _a.chunkSize) != null ? _b : DEFAULT_CHUNK_SIZE);\n    __privateSet(this, _ensureMonotonicity2, ensureMonotonicity);\n    if (!Number.isInteger(__privateGet(this, _chunkSize)) || __privateGet(this, _chunkSize) < __pow(2, 10)) {\n      throw new Error(\"Invalid StreamTarget options: chunkSize must be an integer not smaller than 1024.\");\n    }\n  }\n  write(data) {\n    super.write(data);\n    __privateMethod(this, _writeDataIntoChunks, writeDataIntoChunks_fn).call(this, data, this.pos);\n    __privateMethod(this, _flushChunks, flushChunks_fn).call(this);\n    this.pos += data.byteLength;\n  }\n  finalize() {\n    __privateMethod(this, _flushChunks, flushChunks_fn).call(this, true);\n  }\n};\n_chunkSize = new WeakMap();\n_chunks = new WeakMap();\n_lastFlushEnd2 = new WeakMap();\n_ensureMonotonicity2 = new WeakMap();\n_writeDataIntoChunks = new WeakSet();\nwriteDataIntoChunks_fn = function(data, position) {\n  let chunkIndex = __privateGet(this, _chunks).findIndex((x) => x.start <= position && position < x.start + __privateGet(this, _chunkSize));\n  if (chunkIndex === -1)\n    chunkIndex = __privateMethod(this, _createChunk, createChunk_fn).call(this, position);\n  let chunk = __privateGet(this, _chunks)[chunkIndex];\n  let relativePosition = position - chunk.start;\n  let toWrite = data.subarray(0, Math.min(__privateGet(this, _chunkSize) - relativePosition, data.byteLength));\n  chunk.data.set(toWrite, relativePosition);\n  let section = {\n    start: relativePosition,\n    end: relativePosition + toWrite.byteLength\n  };\n  __privateMethod(this, _insertSectionIntoChunk, insertSectionIntoChunk_fn).call(this, chunk, section);\n  if (chunk.written[0].start === 0 && chunk.written[0].end === __privateGet(this, _chunkSize)) {\n    chunk.shouldFlush = true;\n  }\n  if (__privateGet(this, _chunks).length > MAX_CHUNKS_AT_ONCE) {\n    for (let i = 0; i < __privateGet(this, _chunks).length - 1; i++) {\n      __privateGet(this, _chunks)[i].shouldFlush = true;\n    }\n    __privateMethod(this, _flushChunks, flushChunks_fn).call(this);\n  }\n  if (toWrite.byteLength < data.byteLength) {\n    __privateMethod(this, _writeDataIntoChunks, writeDataIntoChunks_fn).call(this, data.subarray(toWrite.byteLength), position + toWrite.byteLength);\n  }\n};\n_insertSectionIntoChunk = new WeakSet();\ninsertSectionIntoChunk_fn = function(chunk, section) {\n  let low = 0;\n  let high = chunk.written.length - 1;\n  let index = -1;\n  while (low <= high) {\n    let mid = Math.floor(low + (high - low + 1) / 2);\n    if (chunk.written[mid].start <= section.start) {\n      low = mid + 1;\n      index = mid;\n    } else {\n      high = mid - 1;\n    }\n  }\n  chunk.written.splice(index + 1, 0, section);\n  if (index === -1 || chunk.written[index].end < section.start)\n    index++;\n  while (index < chunk.written.length - 1 && chunk.written[index].end >= chunk.written[index + 1].start) {\n    chunk.written[index].end = Math.max(chunk.written[index].end, chunk.written[index + 1].end);\n    chunk.written.splice(index + 1, 1);\n  }\n};\n_createChunk = new WeakSet();\ncreateChunk_fn = function(includesPosition) {\n  let start = Math.floor(includesPosition / __privateGet(this, _chunkSize)) * __privateGet(this, _chunkSize);\n  let chunk = {\n    start,\n    data: new Uint8Array(__privateGet(this, _chunkSize)),\n    written: [],\n    shouldFlush: false\n  };\n  __privateGet(this, _chunks).push(chunk);\n  __privateGet(this, _chunks).sort((a, b) => a.start - b.start);\n  return __privateGet(this, _chunks).indexOf(chunk);\n};\n_flushChunks = new WeakSet();\nflushChunks_fn = function(force = false) {\n  var _a, _b;\n  for (let i = 0; i < __privateGet(this, _chunks).length; i++) {\n    let chunk = __privateGet(this, _chunks)[i];\n    if (!chunk.shouldFlush && !force)\n      continue;\n    for (let section of chunk.written) {\n      if (__privateGet(this, _ensureMonotonicity2) && chunk.start + section.start < __privateGet(this, _lastFlushEnd2)) {\n        throw new Error(\"Internal error: Monotonicity violation.\");\n      }\n      (_b = (_a = this.target.options).onData) == null ? void 0 : _b.call(\n        _a,\n        chunk.data.subarray(section.start, section.end),\n        chunk.start + section.start\n      );\n      __privateSet(this, _lastFlushEnd2, chunk.start + section.end);\n    }\n    __privateGet(this, _chunks).splice(i--, 1);\n  }\n};\nvar FileSystemWritableFileStreamTargetWriter = class extends ChunkedStreamTargetWriter {\n  constructor(target, ensureMonotonicity) {\n    var _a;\n    super(new StreamTarget({\n      onData: (data, position) => target.stream.write({\n        type: \"write\",\n        data,\n        position\n      }),\n      chunked: true,\n      chunkSize: (_a = target.options) == null ? void 0 : _a.chunkSize\n    }), ensureMonotonicity);\n  }\n};\n\n// src/muxer.ts\nvar VIDEO_TRACK_NUMBER = 1;\nvar AUDIO_TRACK_NUMBER = 2;\nvar SUBTITLE_TRACK_NUMBER = 3;\nvar VIDEO_TRACK_TYPE = 1;\nvar AUDIO_TRACK_TYPE = 2;\nvar SUBTITLE_TRACK_TYPE = 17;\nvar MAX_CHUNK_LENGTH_MS = __pow(2, 15);\nvar CODEC_PRIVATE_MAX_SIZE = __pow(2, 12);\nvar APP_NAME = \"https://github.com/Vanilagy/webm-muxer\";\nvar SEGMENT_SIZE_BYTES = 6;\nvar CLUSTER_SIZE_BYTES = 5;\nvar FIRST_TIMESTAMP_BEHAVIORS = [\"strict\", \"offset\", \"permissive\"];\nvar _options, _writer, _segment, _segmentInfo, _seekHead, _tracksElement, _segmentDuration, _colourElement, _videoCodecPrivate, _audioCodecPrivate, _subtitleCodecPrivate, _cues, _currentCluster, _currentClusterTimestamp, _duration, _videoChunkQueue, _audioChunkQueue, _subtitleChunkQueue, _firstVideoTimestamp, _firstAudioTimestamp, _lastVideoTimestamp, _lastAudioTimestamp, _lastSubtitleTimestamp, _colorSpace, _finalized, _validateOptions, validateOptions_fn, _createFileHeader, createFileHeader_fn, _writeEBMLHeader, writeEBMLHeader_fn, _createCodecPrivatePlaceholders, createCodecPrivatePlaceholders_fn, _createColourElement, createColourElement_fn, _createSeekHead, createSeekHead_fn, _createSegmentInfo, createSegmentInfo_fn, _createTracks, createTracks_fn, _createSegment, createSegment_fn, _createCues, createCues_fn, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn, _segmentDataOffset, segmentDataOffset_get, _writeVideoDecoderConfig, writeVideoDecoderConfig_fn, _fixVP9ColorSpace, fixVP9ColorSpace_fn, _writeSubtitleChunks, writeSubtitleChunks_fn, _createInternalChunk, createInternalChunk_fn, _validateTimestamp, validateTimestamp_fn, _writeBlock, writeBlock_fn, _createCodecPrivateElement, createCodecPrivateElement_fn, _writeCodecPrivate, writeCodecPrivate_fn, _createNewCluster, createNewCluster_fn, _finalizeCurrentCluster, finalizeCurrentCluster_fn, _ensureNotFinalized, ensureNotFinalized_fn;\nvar Muxer = class {\n  constructor(options) {\n    __privateAdd(this, _validateOptions);\n    __privateAdd(this, _createFileHeader);\n    __privateAdd(this, _writeEBMLHeader);\n    __privateAdd(this, _createCodecPrivatePlaceholders);\n    __privateAdd(this, _createColourElement);\n    __privateAdd(this, _createSeekHead);\n    __privateAdd(this, _createSegmentInfo);\n    __privateAdd(this, _createTracks);\n    __privateAdd(this, _createSegment);\n    __privateAdd(this, _createCues);\n    __privateAdd(this, _maybeFlushStreamingTargetWriter);\n    __privateAdd(this, _segmentDataOffset);\n    __privateAdd(this, _writeVideoDecoderConfig);\n    __privateAdd(this, _fixVP9ColorSpace);\n    __privateAdd(this, _writeSubtitleChunks);\n    __privateAdd(this, _createInternalChunk);\n    __privateAdd(this, _validateTimestamp);\n    __privateAdd(this, _writeBlock);\n    __privateAdd(this, _createCodecPrivateElement);\n    __privateAdd(this, _writeCodecPrivate);\n    __privateAdd(this, _createNewCluster);\n    __privateAdd(this, _finalizeCurrentCluster);\n    __privateAdd(this, _ensureNotFinalized);\n    __privateAdd(this, _options, void 0);\n    __privateAdd(this, _writer, void 0);\n    __privateAdd(this, _segment, void 0);\n    __privateAdd(this, _segmentInfo, void 0);\n    __privateAdd(this, _seekHead, void 0);\n    __privateAdd(this, _tracksElement, void 0);\n    __privateAdd(this, _segmentDuration, void 0);\n    __privateAdd(this, _colourElement, void 0);\n    __privateAdd(this, _videoCodecPrivate, void 0);\n    __privateAdd(this, _audioCodecPrivate, void 0);\n    __privateAdd(this, _subtitleCodecPrivate, void 0);\n    __privateAdd(this, _cues, void 0);\n    __privateAdd(this, _currentCluster, void 0);\n    __privateAdd(this, _currentClusterTimestamp, void 0);\n    __privateAdd(this, _duration, 0);\n    __privateAdd(this, _videoChunkQueue, []);\n    __privateAdd(this, _audioChunkQueue, []);\n    __privateAdd(this, _subtitleChunkQueue, []);\n    __privateAdd(this, _firstVideoTimestamp, void 0);\n    __privateAdd(this, _firstAudioTimestamp, void 0);\n    __privateAdd(this, _lastVideoTimestamp, -1);\n    __privateAdd(this, _lastAudioTimestamp, -1);\n    __privateAdd(this, _lastSubtitleTimestamp, -1);\n    __privateAdd(this, _colorSpace, void 0);\n    __privateAdd(this, _finalized, false);\n    var _a;\n    __privateMethod(this, _validateOptions, validateOptions_fn).call(this, options);\n    __privateSet(this, _options, __spreadValues({\n      type: \"webm\",\n      firstTimestampBehavior: \"strict\"\n    }, options));\n    this.target = options.target;\n    let ensureMonotonicity = !!__privateGet(this, _options).streaming;\n    if (options.target instanceof ArrayBufferTarget) {\n      __privateSet(this, _writer, new ArrayBufferTargetWriter(options.target));\n    } else if (options.target instanceof StreamTarget) {\n      __privateSet(this, _writer, ((_a = options.target.options) == null ? void 0 : _a.chunked) ? new ChunkedStreamTargetWriter(options.target, ensureMonotonicity) : new StreamTargetWriter(options.target, ensureMonotonicity));\n    } else if (options.target instanceof FileSystemWritableFileStreamTarget) {\n      __privateSet(this, _writer, new FileSystemWritableFileStreamTargetWriter(options.target, ensureMonotonicity));\n    } else {\n      throw new Error(`Invalid target: ${options.target}`);\n    }\n    __privateMethod(this, _createFileHeader, createFileHeader_fn).call(this);\n  }\n  addVideoChunk(chunk, meta, timestamp) {\n    let data = new Uint8Array(chunk.byteLength);\n    chunk.copyTo(data);\n    this.addVideoChunkRaw(data, chunk.type, timestamp != null ? timestamp : chunk.timestamp, meta);\n  }\n  addVideoChunkRaw(data, type, timestamp, meta) {\n    __privateMethod(this, _ensureNotFinalized, ensureNotFinalized_fn).call(this);\n    if (!__privateGet(this, _options).video)\n      throw new Error(\"No video track declared.\");\n    if (__privateGet(this, _firstVideoTimestamp) === void 0)\n      __privateSet(this, _firstVideoTimestamp, timestamp);\n    if (meta)\n      __privateMethod(this, _writeVideoDecoderConfig, writeVideoDecoderConfig_fn).call(this, meta);\n    let videoChunk = __privateMethod(this, _createInternalChunk, createInternalChunk_fn).call(this, data, type, timestamp, VIDEO_TRACK_NUMBER);\n    if (__privateGet(this, _options).video.codec === \"V_VP9\")\n      __privateMethod(this, _fixVP9ColorSpace, fixVP9ColorSpace_fn).call(this, videoChunk);\n    __privateSet(this, _lastVideoTimestamp, videoChunk.timestamp);\n    while (__privateGet(this, _audioChunkQueue).length > 0 && __privateGet(this, _audioChunkQueue)[0].timestamp <= videoChunk.timestamp) {\n      let audioChunk = __privateGet(this, _audioChunkQueue).shift();\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, audioChunk, false);\n    }\n    if (!__privateGet(this, _options).audio || videoChunk.timestamp <= __privateGet(this, _lastAudioTimestamp)) {\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, videoChunk, true);\n    } else {\n      __privateGet(this, _videoChunkQueue).push(videoChunk);\n    }\n    __privateMethod(this, _writeSubtitleChunks, writeSubtitleChunks_fn).call(this);\n    __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n  }\n  addAudioChunk(chunk, meta, timestamp) {\n    let data = new Uint8Array(chunk.byteLength);\n    chunk.copyTo(data);\n    this.addAudioChunkRaw(data, chunk.type, timestamp != null ? timestamp : chunk.timestamp, meta);\n  }\n  addAudioChunkRaw(data, type, timestamp, meta) {\n    __privateMethod(this, _ensureNotFinalized, ensureNotFinalized_fn).call(this);\n    if (!__privateGet(this, _options).audio)\n      throw new Error(\"No audio track declared.\");\n    if (__privateGet(this, _firstAudioTimestamp) === void 0)\n      __privateSet(this, _firstAudioTimestamp, timestamp);\n    if (meta == null ? void 0 : meta.decoderConfig) {\n      if (__privateGet(this, _options).streaming) {\n        __privateSet(this, _audioCodecPrivate, __privateMethod(this, _createCodecPrivateElement, createCodecPrivateElement_fn).call(this, meta.decoderConfig.description));\n      } else {\n        __privateMethod(this, _writeCodecPrivate, writeCodecPrivate_fn).call(this, __privateGet(this, _audioCodecPrivate), meta.decoderConfig.description);\n      }\n    }\n    let audioChunk = __privateMethod(this, _createInternalChunk, createInternalChunk_fn).call(this, data, type, timestamp, AUDIO_TRACK_NUMBER);\n    __privateSet(this, _lastAudioTimestamp, audioChunk.timestamp);\n    while (__privateGet(this, _videoChunkQueue).length > 0 && __privateGet(this, _videoChunkQueue)[0].timestamp <= audioChunk.timestamp) {\n      let videoChunk = __privateGet(this, _videoChunkQueue).shift();\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, videoChunk, true);\n    }\n    if (!__privateGet(this, _options).video || audioChunk.timestamp <= __privateGet(this, _lastVideoTimestamp)) {\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, audioChunk, !__privateGet(this, _options).video);\n    } else {\n      __privateGet(this, _audioChunkQueue).push(audioChunk);\n    }\n    __privateMethod(this, _writeSubtitleChunks, writeSubtitleChunks_fn).call(this);\n    __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n  }\n  addSubtitleChunk(chunk, meta, timestamp) {\n    __privateMethod(this, _ensureNotFinalized, ensureNotFinalized_fn).call(this);\n    if (!__privateGet(this, _options).subtitles)\n      throw new Error(\"No subtitle track declared.\");\n    if (meta == null ? void 0 : meta.decoderConfig) {\n      if (__privateGet(this, _options).streaming) {\n        __privateSet(this, _subtitleCodecPrivate, __privateMethod(this, _createCodecPrivateElement, createCodecPrivateElement_fn).call(this, meta.decoderConfig.description));\n      } else {\n        __privateMethod(this, _writeCodecPrivate, writeCodecPrivate_fn).call(this, __privateGet(this, _subtitleCodecPrivate), meta.decoderConfig.description);\n      }\n    }\n    let subtitleChunk = __privateMethod(this, _createInternalChunk, createInternalChunk_fn).call(this, chunk.body, \"key\", timestamp != null ? timestamp : chunk.timestamp, SUBTITLE_TRACK_NUMBER, chunk.duration, chunk.additions);\n    __privateSet(this, _lastSubtitleTimestamp, subtitleChunk.timestamp);\n    __privateGet(this, _subtitleChunkQueue).push(subtitleChunk);\n    __privateMethod(this, _writeSubtitleChunks, writeSubtitleChunks_fn).call(this);\n    __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n  }\n  finalize() {\n    if (__privateGet(this, _finalized)) {\n      throw new Error(\"Cannot finalize a muxer more than once.\");\n    }\n    while (__privateGet(this, _videoChunkQueue).length > 0)\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, __privateGet(this, _videoChunkQueue).shift(), true);\n    while (__privateGet(this, _audioChunkQueue).length > 0)\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, __privateGet(this, _audioChunkQueue).shift(), true);\n    while (__privateGet(this, _subtitleChunkQueue).length > 0 && __privateGet(this, _subtitleChunkQueue)[0].timestamp <= __privateGet(this, _duration)) {\n      __privateMethod(this, _writeBlock, writeBlock_fn).call(this, __privateGet(this, _subtitleChunkQueue).shift(), false);\n    }\n    if (!__privateGet(this, _options).streaming) {\n      __privateMethod(this, _finalizeCurrentCluster, finalizeCurrentCluster_fn).call(this);\n    }\n    __privateGet(this, _writer).writeEBML(__privateGet(this, _cues));\n    if (!__privateGet(this, _options).streaming) {\n      let endPos = __privateGet(this, _writer).pos;\n      let segmentSize = __privateGet(this, _writer).pos - __privateGet(this, _segmentDataOffset, segmentDataOffset_get);\n      __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(__privateGet(this, _segment)) + 4);\n      __privateGet(this, _writer).writeEBMLVarInt(segmentSize, SEGMENT_SIZE_BYTES);\n      __privateGet(this, _segmentDuration).data = new EBMLFloat64(__privateGet(this, _duration));\n      __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(__privateGet(this, _segmentDuration)));\n      __privateGet(this, _writer).writeEBML(__privateGet(this, _segmentDuration));\n      __privateGet(this, _seekHead).data[0].data[1].data = __privateGet(this, _writer).offsets.get(__privateGet(this, _cues)) - __privateGet(this, _segmentDataOffset, segmentDataOffset_get);\n      __privateGet(this, _seekHead).data[1].data[1].data = __privateGet(this, _writer).offsets.get(__privateGet(this, _segmentInfo)) - __privateGet(this, _segmentDataOffset, segmentDataOffset_get);\n      __privateGet(this, _seekHead).data[2].data[1].data = __privateGet(this, _writer).offsets.get(__privateGet(this, _tracksElement)) - __privateGet(this, _segmentDataOffset, segmentDataOffset_get);\n      __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(__privateGet(this, _seekHead)));\n      __privateGet(this, _writer).writeEBML(__privateGet(this, _seekHead));\n      __privateGet(this, _writer).seek(endPos);\n    }\n    __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n    __privateGet(this, _writer).finalize();\n    __privateSet(this, _finalized, true);\n  }\n};\n_options = new WeakMap();\n_writer = new WeakMap();\n_segment = new WeakMap();\n_segmentInfo = new WeakMap();\n_seekHead = new WeakMap();\n_tracksElement = new WeakMap();\n_segmentDuration = new WeakMap();\n_colourElement = new WeakMap();\n_videoCodecPrivate = new WeakMap();\n_audioCodecPrivate = new WeakMap();\n_subtitleCodecPrivate = new WeakMap();\n_cues = new WeakMap();\n_currentCluster = new WeakMap();\n_currentClusterTimestamp = new WeakMap();\n_duration = new WeakMap();\n_videoChunkQueue = new WeakMap();\n_audioChunkQueue = new WeakMap();\n_subtitleChunkQueue = new WeakMap();\n_firstVideoTimestamp = new WeakMap();\n_firstAudioTimestamp = new WeakMap();\n_lastVideoTimestamp = new WeakMap();\n_lastAudioTimestamp = new WeakMap();\n_lastSubtitleTimestamp = new WeakMap();\n_colorSpace = new WeakMap();\n_finalized = new WeakMap();\n_validateOptions = new WeakSet();\nvalidateOptions_fn = function(options) {\n  if (options.type && options.type !== \"webm\" && options.type !== \"matroska\") {\n    throw new Error(`Invalid type: ${options.type}`);\n  }\n  if (options.firstTimestampBehavior && !FIRST_TIMESTAMP_BEHAVIORS.includes(options.firstTimestampBehavior)) {\n    throw new Error(`Invalid first timestamp behavior: ${options.firstTimestampBehavior}`);\n  }\n};\n_createFileHeader = new WeakSet();\ncreateFileHeader_fn = function() {\n  if (__privateGet(this, _writer) instanceof BaseStreamTargetWriter && __privateGet(this, _writer).target.options.onHeader) {\n    __privateGet(this, _writer).startTrackingWrites();\n  }\n  __privateMethod(this, _writeEBMLHeader, writeEBMLHeader_fn).call(this);\n  if (!__privateGet(this, _options).streaming) {\n    __privateMethod(this, _createSeekHead, createSeekHead_fn).call(this);\n  }\n  __privateMethod(this, _createSegmentInfo, createSegmentInfo_fn).call(this);\n  __privateMethod(this, _createCodecPrivatePlaceholders, createCodecPrivatePlaceholders_fn).call(this);\n  __privateMethod(this, _createColourElement, createColourElement_fn).call(this);\n  if (!__privateGet(this, _options).streaming) {\n    __privateMethod(this, _createTracks, createTracks_fn).call(this);\n    __privateMethod(this, _createSegment, createSegment_fn).call(this);\n  } else {\n  }\n  __privateMethod(this, _createCues, createCues_fn).call(this);\n  __privateMethod(this, _maybeFlushStreamingTargetWriter, maybeFlushStreamingTargetWriter_fn).call(this);\n};\n_writeEBMLHeader = new WeakSet();\nwriteEBMLHeader_fn = function() {\n  var _a;\n  let ebmlHeader = { id: 440786851 /* EBML */, data: [\n    { id: 17030 /* EBMLVersion */, data: 1 },\n    { id: 17143 /* EBMLReadVersion */, data: 1 },\n    { id: 17138 /* EBMLMaxIDLength */, data: 4 },\n    { id: 17139 /* EBMLMaxSizeLength */, data: 8 },\n    { id: 17026 /* DocType */, data: (_a = __privateGet(this, _options).type) != null ? _a : \"webm\" },\n    { id: 17031 /* DocTypeVersion */, data: 2 },\n    { id: 17029 /* DocTypeReadVersion */, data: 2 }\n  ] };\n  __privateGet(this, _writer).writeEBML(ebmlHeader);\n};\n_createCodecPrivatePlaceholders = new WeakSet();\ncreateCodecPrivatePlaceholders_fn = function() {\n  __privateSet(this, _videoCodecPrivate, { id: 236 /* Void */, size: 4, data: new Uint8Array(CODEC_PRIVATE_MAX_SIZE) });\n  __privateSet(this, _audioCodecPrivate, { id: 236 /* Void */, size: 4, data: new Uint8Array(CODEC_PRIVATE_MAX_SIZE) });\n  __privateSet(this, _subtitleCodecPrivate, { id: 236 /* Void */, size: 4, data: new Uint8Array(CODEC_PRIVATE_MAX_SIZE) });\n};\n_createColourElement = new WeakSet();\ncreateColourElement_fn = function() {\n  __privateSet(this, _colourElement, { id: 21936 /* Colour */, data: [\n    { id: 21937 /* MatrixCoefficients */, data: 2 },\n    { id: 21946 /* TransferCharacteristics */, data: 2 },\n    { id: 21947 /* Primaries */, data: 2 },\n    { id: 21945 /* Range */, data: 0 }\n  ] });\n};\n_createSeekHead = new WeakSet();\ncreateSeekHead_fn = function() {\n  const kaxCues = new Uint8Array([28, 83, 187, 107]);\n  const kaxInfo = new Uint8Array([21, 73, 169, 102]);\n  const kaxTracks = new Uint8Array([22, 84, 174, 107]);\n  let seekHead = { id: 290298740 /* SeekHead */, data: [\n    { id: 19899 /* Seek */, data: [\n      { id: 21419 /* SeekID */, data: kaxCues },\n      { id: 21420 /* SeekPosition */, size: 5, data: 0 }\n    ] },\n    { id: 19899 /* Seek */, data: [\n      { id: 21419 /* SeekID */, data: kaxInfo },\n      { id: 21420 /* SeekPosition */, size: 5, data: 0 }\n    ] },\n    { id: 19899 /* Seek */, data: [\n      { id: 21419 /* SeekID */, data: kaxTracks },\n      { id: 21420 /* SeekPosition */, size: 5, data: 0 }\n    ] }\n  ] };\n  __privateSet(this, _seekHead, seekHead);\n};\n_createSegmentInfo = new WeakSet();\ncreateSegmentInfo_fn = function() {\n  let segmentDuration = { id: 17545 /* Duration */, data: new EBMLFloat64(0) };\n  __privateSet(this, _segmentDuration, segmentDuration);\n  let segmentInfo = { id: 357149030 /* Info */, data: [\n    { id: 2807729 /* TimestampScale */, data: 1e6 },\n    { id: 19840 /* MuxingApp */, data: APP_NAME },\n    { id: 22337 /* WritingApp */, data: APP_NAME },\n    !__privateGet(this, _options).streaming ? segmentDuration : null\n  ] };\n  __privateSet(this, _segmentInfo, segmentInfo);\n};\n_createTracks = new WeakSet();\ncreateTracks_fn = function() {\n  let tracksElement = { id: 374648427 /* Tracks */, data: [] };\n  __privateSet(this, _tracksElement, tracksElement);\n  if (__privateGet(this, _options).video) {\n    tracksElement.data.push({ id: 174 /* TrackEntry */, data: [\n      { id: 215 /* TrackNumber */, data: VIDEO_TRACK_NUMBER },\n      { id: 29637 /* TrackUID */, data: VIDEO_TRACK_NUMBER },\n      { id: 131 /* TrackType */, data: VIDEO_TRACK_TYPE },\n      { id: 134 /* CodecID */, data: __privateGet(this, _options).video.codec },\n      __privateGet(this, _videoCodecPrivate),\n      __privateGet(this, _options).video.frameRate ? { id: 2352003 /* DefaultDuration */, data: 1e9 / __privateGet(this, _options).video.frameRate } : null,\n      { id: 224 /* Video */, data: [\n        { id: 176 /* PixelWidth */, data: __privateGet(this, _options).video.width },\n        { id: 186 /* PixelHeight */, data: __privateGet(this, _options).video.height },\n        __privateGet(this, _options).video.alpha ? { id: 21440 /* AlphaMode */, data: 1 } : null,\n        __privateGet(this, _colourElement)\n      ] }\n    ] });\n  }\n  if (__privateGet(this, _options).audio) {\n    __privateSet(this, _audioCodecPrivate, __privateGet(this, _options).streaming ? __privateGet(this, _audioCodecPrivate) || null : { id: 236 /* Void */, size: 4, data: new Uint8Array(CODEC_PRIVATE_MAX_SIZE) });\n    tracksElement.data.push({ id: 174 /* TrackEntry */, data: [\n      { id: 215 /* TrackNumber */, data: AUDIO_TRACK_NUMBER },\n      { id: 29637 /* TrackUID */, data: AUDIO_TRACK_NUMBER },\n      { id: 131 /* TrackType */, data: AUDIO_TRACK_TYPE },\n      { id: 134 /* CodecID */, data: __privateGet(this, _options).audio.codec },\n      __privateGet(this, _audioCodecPrivate),\n      { id: 225 /* Audio */, data: [\n        { id: 181 /* SamplingFrequency */, data: new EBMLFloat32(__privateGet(this, _options).audio.sampleRate) },\n        { id: 159 /* Channels */, data: __privateGet(this, _options).audio.numberOfChannels },\n        __privateGet(this, _options).audio.bitDepth ? { id: 25188 /* BitDepth */, data: __privateGet(this, _options).audio.bitDepth } : null\n      ] }\n    ] });\n  }\n  if (__privateGet(this, _options).subtitles) {\n    tracksElement.data.push({ id: 174 /* TrackEntry */, data: [\n      { id: 215 /* TrackNumber */, data: SUBTITLE_TRACK_NUMBER },\n      { id: 29637 /* TrackUID */, data: SUBTITLE_TRACK_NUMBER },\n      { id: 131 /* TrackType */, data: SUBTITLE_TRACK_TYPE },\n      { id: 134 /* CodecID */, data: __privateGet(this, _options).subtitles.codec },\n      __privateGet(this, _subtitleCodecPrivate)\n    ] });\n  }\n};\n_createSegment = new WeakSet();\ncreateSegment_fn = function() {\n  let segment = {\n    id: 408125543 /* Segment */,\n    size: __privateGet(this, _options).streaming ? -1 : SEGMENT_SIZE_BYTES,\n    data: [\n      !__privateGet(this, _options).streaming ? __privateGet(this, _seekHead) : null,\n      __privateGet(this, _segmentInfo),\n      __privateGet(this, _tracksElement)\n    ]\n  };\n  __privateSet(this, _segment, segment);\n  __privateGet(this, _writer).writeEBML(segment);\n  if (__privateGet(this, _writer) instanceof BaseStreamTargetWriter && __privateGet(this, _writer).target.options.onHeader) {\n    let { data, start } = __privateGet(this, _writer).getTrackedWrites();\n    __privateGet(this, _writer).target.options.onHeader(data, start);\n  }\n};\n_createCues = new WeakSet();\ncreateCues_fn = function() {\n  __privateSet(this, _cues, { id: 475249515 /* Cues */, data: [] });\n};\n_maybeFlushStreamingTargetWriter = new WeakSet();\nmaybeFlushStreamingTargetWriter_fn = function() {\n  if (__privateGet(this, _writer) instanceof StreamTargetWriter) {\n    __privateGet(this, _writer).flush();\n  }\n};\n_segmentDataOffset = new WeakSet();\nsegmentDataOffset_get = function() {\n  return __privateGet(this, _writer).dataOffsets.get(__privateGet(this, _segment));\n};\n_writeVideoDecoderConfig = new WeakSet();\nwriteVideoDecoderConfig_fn = function(meta) {\n  if (!meta.decoderConfig)\n    return;\n  if (meta.decoderConfig.colorSpace) {\n    let colorSpace = meta.decoderConfig.colorSpace;\n    __privateSet(this, _colorSpace, colorSpace);\n    __privateGet(this, _colourElement).data = [\n      { id: 21937 /* MatrixCoefficients */, data: {\n        \"rgb\": 1,\n        \"bt709\": 1,\n        \"bt470bg\": 5,\n        \"smpte170m\": 6\n      }[colorSpace.matrix] },\n      { id: 21946 /* TransferCharacteristics */, data: {\n        \"bt709\": 1,\n        \"smpte170m\": 6,\n        \"iec61966-2-1\": 13\n      }[colorSpace.transfer] },\n      { id: 21947 /* Primaries */, data: {\n        \"bt709\": 1,\n        \"bt470bg\": 5,\n        \"smpte170m\": 6\n      }[colorSpace.primaries] },\n      { id: 21945 /* Range */, data: [1, 2][Number(colorSpace.fullRange)] }\n    ];\n    if (!__privateGet(this, _options).streaming) {\n      let endPos = __privateGet(this, _writer).pos;\n      __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(__privateGet(this, _colourElement)));\n      __privateGet(this, _writer).writeEBML(__privateGet(this, _colourElement));\n      __privateGet(this, _writer).seek(endPos);\n    }\n  }\n  if (meta.decoderConfig.description) {\n    if (__privateGet(this, _options).streaming) {\n      __privateSet(this, _videoCodecPrivate, __privateMethod(this, _createCodecPrivateElement, createCodecPrivateElement_fn).call(this, meta.decoderConfig.description));\n    } else {\n      __privateMethod(this, _writeCodecPrivate, writeCodecPrivate_fn).call(this, __privateGet(this, _videoCodecPrivate), meta.decoderConfig.description);\n    }\n  }\n};\n_fixVP9ColorSpace = new WeakSet();\nfixVP9ColorSpace_fn = function(chunk) {\n  if (chunk.type !== \"key\")\n    return;\n  if (!__privateGet(this, _colorSpace))\n    return;\n  let i = 0;\n  if (readBits(chunk.data, 0, 2) !== 2)\n    return;\n  i += 2;\n  let profile = (readBits(chunk.data, i + 1, i + 2) << 1) + readBits(chunk.data, i + 0, i + 1);\n  i += 2;\n  if (profile === 3)\n    i++;\n  let showExistingFrame = readBits(chunk.data, i + 0, i + 1);\n  i++;\n  if (showExistingFrame)\n    return;\n  let frameType = readBits(chunk.data, i + 0, i + 1);\n  i++;\n  if (frameType !== 0)\n    return;\n  i += 2;\n  let syncCode = readBits(chunk.data, i + 0, i + 24);\n  i += 24;\n  if (syncCode !== 4817730)\n    return;\n  if (profile >= 2)\n    i++;\n  let colorSpaceID = {\n    \"rgb\": 7,\n    \"bt709\": 2,\n    \"bt470bg\": 1,\n    \"smpte170m\": 3\n  }[__privateGet(this, _colorSpace).matrix];\n  writeBits(chunk.data, i + 0, i + 3, colorSpaceID);\n};\n_writeSubtitleChunks = new WeakSet();\nwriteSubtitleChunks_fn = function() {\n  let lastWrittenMediaTimestamp = Math.min(\n    __privateGet(this, _options).video ? __privateGet(this, _lastVideoTimestamp) : Infinity,\n    __privateGet(this, _options).audio ? __privateGet(this, _lastAudioTimestamp) : Infinity\n  );\n  let queue = __privateGet(this, _subtitleChunkQueue);\n  while (queue.length > 0 && queue[0].timestamp <= lastWrittenMediaTimestamp) {\n    __privateMethod(this, _writeBlock, writeBlock_fn).call(this, queue.shift(), !__privateGet(this, _options).video && !__privateGet(this, _options).audio);\n  }\n};\n_createInternalChunk = new WeakSet();\ncreateInternalChunk_fn = function(data, type, timestamp, trackNumber, duration, additions) {\n  let adjustedTimestamp = __privateMethod(this, _validateTimestamp, validateTimestamp_fn).call(this, timestamp, trackNumber);\n  let internalChunk = {\n    data,\n    additions,\n    type,\n    timestamp: adjustedTimestamp,\n    duration,\n    trackNumber\n  };\n  return internalChunk;\n};\n_validateTimestamp = new WeakSet();\nvalidateTimestamp_fn = function(timestamp, trackNumber) {\n  let lastTimestamp = trackNumber === VIDEO_TRACK_NUMBER ? __privateGet(this, _lastVideoTimestamp) : trackNumber === AUDIO_TRACK_NUMBER ? __privateGet(this, _lastAudioTimestamp) : __privateGet(this, _lastSubtitleTimestamp);\n  if (trackNumber !== SUBTITLE_TRACK_NUMBER) {\n    let firstTimestamp = trackNumber === VIDEO_TRACK_NUMBER ? __privateGet(this, _firstVideoTimestamp) : __privateGet(this, _firstAudioTimestamp);\n    if (__privateGet(this, _options).firstTimestampBehavior === \"strict\" && lastTimestamp === -1 && timestamp !== 0) {\n      throw new Error(\n        `The first chunk for your media track must have a timestamp of 0 (received ${timestamp}). Non-zero first timestamps are often caused by directly piping frames or audio data from a MediaStreamTrack into the encoder. Their timestamps are typically relative to the age of the document, which is probably what you want.\n\nIf you want to offset all timestamps of a track such that the first one is zero, set firstTimestampBehavior: 'offset' in the options.\nIf you want to allow non-zero first timestamps, set firstTimestampBehavior: 'permissive'.\n`\n      );\n    } else if (__privateGet(this, _options).firstTimestampBehavior === \"offset\") {\n      timestamp -= firstTimestamp;\n    }\n  }\n  if (timestamp < lastTimestamp) {\n    throw new Error(\n      `Timestamps must be monotonically increasing (went from ${lastTimestamp} to ${timestamp}).`\n    );\n  }\n  if (timestamp < 0) {\n    throw new Error(`Timestamps must be non-negative (received ${timestamp}).`);\n  }\n  return timestamp;\n};\n_writeBlock = new WeakSet();\nwriteBlock_fn = function(chunk, canCreateNewCluster) {\n  if (__privateGet(this, _options).streaming && !__privateGet(this, _tracksElement)) {\n    __privateMethod(this, _createTracks, createTracks_fn).call(this);\n    __privateMethod(this, _createSegment, createSegment_fn).call(this);\n  }\n  let msTimestamp = Math.floor(chunk.timestamp / 1e3);\n  let shouldCreateNewClusterFromKeyFrame = canCreateNewCluster && chunk.type === \"key\" && msTimestamp - __privateGet(this, _currentClusterTimestamp) >= 1e3;\n  if (!__privateGet(this, _currentCluster) || shouldCreateNewClusterFromKeyFrame) {\n    __privateMethod(this, _createNewCluster, createNewCluster_fn).call(this, msTimestamp);\n  }\n  let relativeTimestamp = msTimestamp - __privateGet(this, _currentClusterTimestamp);\n  if (relativeTimestamp < 0) {\n    return;\n  }\n  let clusterIsTooLong = relativeTimestamp >= MAX_CHUNK_LENGTH_MS;\n  if (clusterIsTooLong) {\n    throw new Error(\n      `Current Matroska cluster exceeded its maximum allowed length of ${MAX_CHUNK_LENGTH_MS} milliseconds. In order to produce a correct WebM file, you must pass in a key frame at least every ${MAX_CHUNK_LENGTH_MS} milliseconds.`\n    );\n  }\n  let prelude = new Uint8Array(4);\n  let view = new DataView(prelude.buffer);\n  view.setUint8(0, 128 | chunk.trackNumber);\n  view.setInt16(1, relativeTimestamp, false);\n  if (chunk.duration === void 0 && !chunk.additions) {\n    view.setUint8(3, Number(chunk.type === \"key\") << 7);\n    let simpleBlock = { id: 163 /* SimpleBlock */, data: [\n      prelude,\n      chunk.data\n    ] };\n    __privateGet(this, _writer).writeEBML(simpleBlock);\n  } else {\n    let msDuration = Math.floor(chunk.duration / 1e3);\n    let blockGroup = { id: 160 /* BlockGroup */, data: [\n      { id: 161 /* Block */, data: [\n        prelude,\n        chunk.data\n      ] },\n      chunk.duration !== void 0 ? { id: 155 /* BlockDuration */, data: msDuration } : null,\n      chunk.additions ? { id: 30113 /* BlockAdditions */, data: chunk.additions } : null\n    ] };\n    __privateGet(this, _writer).writeEBML(blockGroup);\n  }\n  __privateSet(this, _duration, Math.max(__privateGet(this, _duration), msTimestamp));\n};\n_createCodecPrivateElement = new WeakSet();\ncreateCodecPrivateElement_fn = function(data) {\n  return { id: 25506 /* CodecPrivate */, size: 4, data: new Uint8Array(data) };\n};\n_writeCodecPrivate = new WeakSet();\nwriteCodecPrivate_fn = function(element, data) {\n  let endPos = __privateGet(this, _writer).pos;\n  __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(element));\n  let codecPrivateElementSize = 2 + 4 + data.byteLength;\n  let voidDataSize = CODEC_PRIVATE_MAX_SIZE - codecPrivateElementSize;\n  if (voidDataSize < 0) {\n    let newByteLength = data.byteLength + voidDataSize;\n    if (data instanceof ArrayBuffer) {\n      data = data.slice(0, newByteLength);\n    } else {\n      data = data.buffer.slice(0, newByteLength);\n    }\n    voidDataSize = 0;\n  }\n  element = [\n    __privateMethod(this, _createCodecPrivateElement, createCodecPrivateElement_fn).call(this, data),\n    { id: 236 /* Void */, size: 4, data: new Uint8Array(voidDataSize) }\n  ];\n  __privateGet(this, _writer).writeEBML(element);\n  __privateGet(this, _writer).seek(endPos);\n};\n_createNewCluster = new WeakSet();\ncreateNewCluster_fn = function(timestamp) {\n  if (__privateGet(this, _currentCluster) && !__privateGet(this, _options).streaming) {\n    __privateMethod(this, _finalizeCurrentCluster, finalizeCurrentCluster_fn).call(this);\n  }\n  if (__privateGet(this, _writer) instanceof BaseStreamTargetWriter && __privateGet(this, _writer).target.options.onCluster) {\n    __privateGet(this, _writer).startTrackingWrites();\n  }\n  __privateSet(this, _currentCluster, {\n    id: 524531317 /* Cluster */,\n    size: __privateGet(this, _options).streaming ? -1 : CLUSTER_SIZE_BYTES,\n    data: [\n      { id: 231 /* Timestamp */, data: timestamp }\n    ]\n  });\n  __privateGet(this, _writer).writeEBML(__privateGet(this, _currentCluster));\n  __privateSet(this, _currentClusterTimestamp, timestamp);\n  let clusterOffsetFromSegment = __privateGet(this, _writer).offsets.get(__privateGet(this, _currentCluster)) - __privateGet(this, _segmentDataOffset, segmentDataOffset_get);\n  __privateGet(this, _cues).data.push({ id: 187 /* CuePoint */, data: [\n    { id: 179 /* CueTime */, data: timestamp },\n    __privateGet(this, _options).video ? { id: 183 /* CueTrackPositions */, data: [\n      { id: 247 /* CueTrack */, data: VIDEO_TRACK_NUMBER },\n      { id: 241 /* CueClusterPosition */, data: clusterOffsetFromSegment }\n    ] } : null,\n    __privateGet(this, _options).audio ? { id: 183 /* CueTrackPositions */, data: [\n      { id: 247 /* CueTrack */, data: AUDIO_TRACK_NUMBER },\n      { id: 241 /* CueClusterPosition */, data: clusterOffsetFromSegment }\n    ] } : null\n  ] });\n};\n_finalizeCurrentCluster = new WeakSet();\nfinalizeCurrentCluster_fn = function() {\n  let clusterSize = __privateGet(this, _writer).pos - __privateGet(this, _writer).dataOffsets.get(__privateGet(this, _currentCluster));\n  let endPos = __privateGet(this, _writer).pos;\n  __privateGet(this, _writer).seek(__privateGet(this, _writer).offsets.get(__privateGet(this, _currentCluster)) + 4);\n  __privateGet(this, _writer).writeEBMLVarInt(clusterSize, CLUSTER_SIZE_BYTES);\n  __privateGet(this, _writer).seek(endPos);\n  if (__privateGet(this, _writer) instanceof BaseStreamTargetWriter && __privateGet(this, _writer).target.options.onCluster) {\n    let { data, start } = __privateGet(this, _writer).getTrackedWrites();\n    __privateGet(this, _writer).target.options.onCluster(data, start, __privateGet(this, _currentClusterTimestamp));\n  }\n};\n_ensureNotFinalized = new WeakSet();\nensureNotFinalized_fn = function() {\n  if (__privateGet(this, _finalized)) {\n    throw new Error(\"Cannot add new video or audio chunks after the file has been finalized.\");\n  }\n};\n\n// src/subtitles.ts\nvar cueBlockHeaderRegex = /(?:(.+?)\\n)?((?:\\d{2}:)?\\d{2}:\\d{2}.\\d{3})\\s+-->\\s+((?:\\d{2}:)?\\d{2}:\\d{2}.\\d{3})/g;\nvar preambleStartRegex = /^WEBVTT.*?\\n{2}/;\nvar timestampRegex = /(?:(\\d{2}):)?(\\d{2}):(\\d{2}).(\\d{3})/;\nvar inlineTimestampRegex = /<(?:(\\d{2}):)?(\\d{2}):(\\d{2}).(\\d{3})>/g;\nvar textEncoder = new TextEncoder();\nvar _options2, _config, _preambleSeen, _preambleBytes, _preambleEmitted, _parseTimestamp, parseTimestamp_fn, _formatTimestamp, formatTimestamp_fn;\nvar SubtitleEncoder = class {\n  constructor(options) {\n    __privateAdd(this, _parseTimestamp);\n    __privateAdd(this, _formatTimestamp);\n    __privateAdd(this, _options2, void 0);\n    __privateAdd(this, _config, void 0);\n    __privateAdd(this, _preambleSeen, false);\n    __privateAdd(this, _preambleBytes, void 0);\n    __privateAdd(this, _preambleEmitted, false);\n    __privateSet(this, _options2, options);\n  }\n  configure(config) {\n    if (config.codec !== \"webvtt\") {\n      throw new Error(\"Codec must be 'webvtt'.\");\n    }\n    __privateSet(this, _config, config);\n  }\n  encode(text) {\n    var _a;\n    if (!__privateGet(this, _config)) {\n      throw new Error(\"Encoder not configured.\");\n    }\n    text = text.replace(\"\\r\\n\", \"\\n\").replace(\"\\r\", \"\\n\");\n    cueBlockHeaderRegex.lastIndex = 0;\n    let match;\n    if (!__privateGet(this, _preambleSeen)) {\n      if (!preambleStartRegex.test(text)) {\n        let error = new Error(\"WebVTT preamble incorrect.\");\n        __privateGet(this, _options2).error(error);\n        throw error;\n      }\n      match = cueBlockHeaderRegex.exec(text);\n      let preamble = text.slice(0, (_a = match == null ? void 0 : match.index) != null ? _a : text.length).trimEnd();\n      if (!preamble) {\n        let error = new Error(\"No WebVTT preamble provided.\");\n        __privateGet(this, _options2).error(error);\n        throw error;\n      }\n      __privateSet(this, _preambleBytes, textEncoder.encode(preamble));\n      __privateSet(this, _preambleSeen, true);\n      if (match) {\n        text = text.slice(match.index);\n        cueBlockHeaderRegex.lastIndex = 0;\n      }\n    }\n    while (match = cueBlockHeaderRegex.exec(text)) {\n      let notes = text.slice(0, match.index);\n      let cueIdentifier = match[1] || \"\";\n      let matchEnd = match.index + match[0].length;\n      let bodyStart = text.indexOf(\"\\n\", matchEnd) + 1;\n      let cueSettings = text.slice(matchEnd, bodyStart).trim();\n      let bodyEnd = text.indexOf(\"\\n\\n\", matchEnd);\n      if (bodyEnd === -1)\n        bodyEnd = text.length;\n      let startTime = __privateMethod(this, _parseTimestamp, parseTimestamp_fn).call(this, match[2]);\n      let endTime = __privateMethod(this, _parseTimestamp, parseTimestamp_fn).call(this, match[3]);\n      let duration = endTime - startTime;\n      let body = text.slice(bodyStart, bodyEnd);\n      let additions = `${cueSettings}\n${cueIdentifier}\n${notes}`;\n      inlineTimestampRegex.lastIndex = 0;\n      body = body.replace(inlineTimestampRegex, (match2) => {\n        let time = __privateMethod(this, _parseTimestamp, parseTimestamp_fn).call(this, match2.slice(1, -1));\n        let offsetTime = time - startTime;\n        return `<${__privateMethod(this, _formatTimestamp, formatTimestamp_fn).call(this, offsetTime)}>`;\n      });\n      text = text.slice(bodyEnd).trimStart();\n      cueBlockHeaderRegex.lastIndex = 0;\n      let chunk = {\n        body: textEncoder.encode(body),\n        additions: additions.trim() === \"\" ? void 0 : textEncoder.encode(additions),\n        timestamp: startTime * 1e3,\n        duration: duration * 1e3\n      };\n      let meta = {};\n      if (!__privateGet(this, _preambleEmitted)) {\n        meta.decoderConfig = {\n          description: __privateGet(this, _preambleBytes)\n        };\n        __privateSet(this, _preambleEmitted, true);\n      }\n      __privateGet(this, _options2).output(chunk, meta);\n    }\n  }\n};\n_options2 = new WeakMap();\n_config = new WeakMap();\n_preambleSeen = new WeakMap();\n_preambleBytes = new WeakMap();\n_preambleEmitted = new WeakMap();\n_parseTimestamp = new WeakSet();\nparseTimestamp_fn = function(string) {\n  let match = timestampRegex.exec(string);\n  if (!match)\n    throw new Error(\"Expected match.\");\n  return 60 * 60 * 1e3 * Number(match[1] || \"0\") + 60 * 1e3 * Number(match[2]) + 1e3 * Number(match[3]) + Number(match[4]);\n};\n_formatTimestamp = new WeakSet();\nformatTimestamp_fn = function(timestamp) {\n  let hours = Math.floor(timestamp / (60 * 60 * 1e3));\n  let minutes = Math.floor(timestamp % (60 * 60 * 1e3) / (60 * 1e3));\n  let seconds = Math.floor(timestamp % (60 * 1e3) / 1e3);\n  let milliseconds = timestamp % 1e3;\n  return hours.toString().padStart(2, \"0\") + \":\" + minutes.toString().padStart(2, \"0\") + \":\" + seconds.toString().padStart(2, \"0\") + \".\" + milliseconds.toString().padStart(3, \"0\");\n};\nexport {\n  ArrayBufferTarget,\n  FileSystemWritableFileStreamTarget,\n  Muxer,\n  StreamTarget,\n  SubtitleEncoder\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.linear = linear;\nexports.easeInSine = easeInSine;\nexports.easeOutSine = easeOutSine;\nexports.easeInOutSine = easeInOutSine;\nexports.easeInQuad = easeInQuad;\nexports.easeOutQuad = easeOutQuad;\nexports.easeInOutQuad = easeInOutQuad;\nexports.easeInCubic = easeInCubic;\nexports.easeOutCubic = easeOutCubic;\nexports.easeInOutCubic = easeInOutCubic;\nexports.easeInQuart = easeInQuart;\nexports.easeOutQuart = easeOutQuart;\nexports.easeInOutQuart = easeInOutQuart;\nexports.easeInQuint = easeInQuint;\nexports.easeOutQuint = easeOutQuint;\nexports.easeInOutQuint = easeInOutQuint;\nexports.easeInExpo = easeInExpo;\nexports.easeOutExpo = easeOutExpo;\nexports.easeInOutExpo = easeInOutExpo;\nexports.easeInCirc = easeInCirc;\nexports.easeOutCirc = easeOutCirc;\nexports.easeInOutCirc = easeInOutCirc;\nexports.easeInBack = easeInBack;\nexports.easeOutBack = easeOutBack;\nexports.easeInOutBack = easeInOutBack;\nexports.easeInElastic = easeInElastic;\nexports.easeOutElastic = easeOutElastic;\nexports.easeInOutElastic = easeInOutElastic;\nexports.easeOutBounce = easeOutBounce;\nexports.easeInBounce = easeInBounce;\nexports.easeInOutBounce = easeInOutBounce;\n// Based on https://gist.github.com/gre/1650294\n\n// No easing, no acceleration\nfunction linear(t) {\n    return t;\n}\n\n// Slight acceleration from zero to full speed\nfunction easeInSine(t) {\n    return -1 * Math.cos(t * (Math.PI / 2)) + 1;\n}\n\n// Slight deceleration at the end\nfunction easeOutSine(t) {\n    return Math.sin(t * (Math.PI / 2));\n}\n\n// Slight acceleration at beginning and slight deceleration at end\nfunction easeInOutSine(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\n\n// Accelerating from zero velocity\nfunction easeInQuad(t) {\n    return t * t;\n}\n\n// Decelerating to zero velocity\nfunction easeOutQuad(t) {\n    return t * (2 - t);\n}\n\n// Acceleration until halfway, then deceleration\nfunction easeInOutQuad(t) {\n    return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n}\n\n// Accelerating from zero velocity\nfunction easeInCubic(t) {\n    return t * t * t;\n}\n\n// Decelerating to zero velocity\nfunction easeOutCubic(t) {\n    var t1 = t - 1;\n    return t1 * t1 * t1 + 1;\n}\n\n// Acceleration until halfway, then deceleration\nfunction easeInOutCubic(t) {\n    return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n}\n\n// Accelerating from zero velocity\nfunction easeInQuart(t) {\n    return t * t * t * t;\n}\n\n// Decelerating to zero velocity\nfunction easeOutQuart(t) {\n    var t1 = t - 1;\n    return 1 - t1 * t1 * t1 * t1;\n}\n\n// Acceleration until halfway, then deceleration\nfunction easeInOutQuart(t) {\n    var t1 = t - 1;\n    return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1;\n}\n\n// Accelerating from zero velocity\nfunction easeInQuint(t) {\n    return t * t * t * t * t;\n}\n\n// Decelerating to zero velocity\nfunction easeOutQuint(t) {\n    var t1 = t - 1;\n    return 1 + t1 * t1 * t1 * t1 * t1;\n}\n\n// Acceleration until halfway, then deceleration\nfunction easeInOutQuint(t) {\n    var t1 = t - 1;\n    return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1;\n}\n\n// Accelerate exponentially until finish\nfunction easeInExpo(t) {\n\n    if (t === 0) {\n        return 0;\n    }\n\n    return Math.pow(2, 10 * (t - 1));\n}\n\n// Initial exponential acceleration slowing to stop\nfunction easeOutExpo(t) {\n\n    if (t === 1) {\n        return 1;\n    }\n\n    return -Math.pow(2, -10 * t) + 1;\n}\n\n// Exponential acceleration and deceleration\nfunction easeInOutExpo(t) {\n\n    if (t === 0 || t === 1) {\n        return t;\n    }\n\n    var scaledTime = t * 2;\n    var scaledTime1 = scaledTime - 1;\n\n    if (scaledTime < 1) {\n        return 0.5 * Math.pow(2, 10 * scaledTime1);\n    }\n\n    return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2);\n}\n\n// Increasing velocity until stop\nfunction easeInCirc(t) {\n\n    var scaledTime = t / 1;\n    return -1 * (Math.sqrt(1 - scaledTime * t) - 1);\n}\n\n// Start fast, decreasing velocity until stop\nfunction easeOutCirc(t) {\n\n    var t1 = t - 1;\n    return Math.sqrt(1 - t1 * t1);\n}\n\n// Fast increase in velocity, fast decrease in velocity\nfunction easeInOutCirc(t) {\n\n    var scaledTime = t * 2;\n    var scaledTime1 = scaledTime - 2;\n\n    if (scaledTime < 1) {\n        return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1);\n    }\n\n    return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\n}\n\n// Slow movement backwards then fast snap to finish\nfunction easeInBack(t) {\n    var magnitude = arguments.length <= 1 || arguments[1] === undefined ? 1.70158 : arguments[1];\n\n\n    var scaledTime = t / 1;\n    return scaledTime * scaledTime * ((magnitude + 1) * scaledTime - magnitude);\n}\n\n// Fast snap to backwards point then slow resolve to finish\nfunction easeOutBack(t) {\n    var magnitude = arguments.length <= 1 || arguments[1] === undefined ? 1.70158 : arguments[1];\n\n\n    var scaledTime = t / 1 - 1;\n\n    return scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude) + 1;\n}\n\n// Slow movement backwards, fast snap to past finish, slow resolve to finish\nfunction easeInOutBack(t) {\n    var magnitude = arguments.length <= 1 || arguments[1] === undefined ? 1.70158 : arguments[1];\n\n\n    var scaledTime = t * 2;\n    var scaledTime2 = scaledTime - 2;\n\n    var s = magnitude * 1.525;\n\n    if (scaledTime < 1) {\n\n        return 0.5 * scaledTime * scaledTime * ((s + 1) * scaledTime - s);\n    }\n\n    return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\n}\n// Bounces slowly then quickly to finish\nfunction easeInElastic(t) {\n    var magnitude = arguments.length <= 1 || arguments[1] === undefined ? 0.7 : arguments[1];\n\n\n    if (t === 0 || t === 1) {\n        return t;\n    }\n\n    var scaledTime = t / 1;\n    var scaledTime1 = scaledTime - 1;\n\n    var p = 1 - magnitude;\n    var s = p / (2 * Math.PI) * Math.asin(1);\n\n    return -(Math.pow(2, 10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p));\n}\n\n// Fast acceleration, bounces to zero\nfunction easeOutElastic(t) {\n    var magnitude = arguments.length <= 1 || arguments[1] === undefined ? 0.7 : arguments[1];\n\n\n    var p = 1 - magnitude;\n    var scaledTime = t * 2;\n\n    if (t === 0 || t === 1) {\n        return t;\n    }\n\n    var s = p / (2 * Math.PI) * Math.asin(1);\n    return Math.pow(2, -10 * scaledTime) * Math.sin((scaledTime - s) * (2 * Math.PI) / p) + 1;\n}\n\n// Slow start and end, two bounces sandwich a fast motion\nfunction easeInOutElastic(t) {\n    var magnitude = arguments.length <= 1 || arguments[1] === undefined ? 0.65 : arguments[1];\n\n\n    var p = 1 - magnitude;\n\n    if (t === 0 || t === 1) {\n        return t;\n    }\n\n    var scaledTime = t * 2;\n    var scaledTime1 = scaledTime - 1;\n\n    var s = p / (2 * Math.PI) * Math.asin(1);\n\n    if (scaledTime < 1) {\n        return -0.5 * (Math.pow(2, 10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p));\n    }\n\n    return Math.pow(2, -10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\n}\n\n// Bounce to completion\nfunction easeOutBounce(t) {\n\n    var scaledTime = t / 1;\n\n    if (scaledTime < 1 / 2.75) {\n\n        return 7.5625 * scaledTime * scaledTime;\n    } else if (scaledTime < 2 / 2.75) {\n\n        var scaledTime2 = scaledTime - 1.5 / 2.75;\n        return 7.5625 * scaledTime2 * scaledTime2 + 0.75;\n    } else if (scaledTime < 2.5 / 2.75) {\n\n        var _scaledTime = scaledTime - 2.25 / 2.75;\n        return 7.5625 * _scaledTime * _scaledTime + 0.9375;\n    } else {\n\n        var _scaledTime2 = scaledTime - 2.625 / 2.75;\n        return 7.5625 * _scaledTime2 * _scaledTime2 + 0.984375;\n    }\n}\n\n// Bounce increasing in velocity until completion\nfunction easeInBounce(t) {\n    return 1 - easeOutBounce(1 - t);\n}\n\n// Bounce in and bounce out\nfunction easeInOutBounce(t) {\n\n    if (t < 0.5) {\n\n        return easeInBounce(t * 2) * 0.5;\n    }\n\n    return easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n}\n","import { Clamp, easeOutElasticHalf, easeOutElasticQuart } from \"../Utils\";\r\nimport { EASINGS } from \"./Storyboard\";\r\nimport * as Easing from \"easing-utils\";\r\n\r\nexport class FadeCommand {\r\n    easing;\r\n    startTime;\r\n    endTime;\r\n    params;\r\n\r\n    constructor({ easing, startTime, endTime, params }) {\r\n        this.easing = easing;\r\n        this.startTime = startTime;\r\n        this.endTime = endTime;\r\n        this.params = params;\r\n\r\n        this.duration = Math.max(params.length - 1, 1) * (endTime - startTime);\r\n    }\r\n\r\n    execute(object, timestamp) {\r\n        try {\r\n            const { sprite } = object;\r\n            if (timestamp < this.startTime) {\r\n                // sprite.alpha = this.params.at(0);\r\n                object.props.alpha = this.params.at(0);\r\n                return;\r\n            }\r\n\r\n            if (this.duration === 0 || timestamp > this.startTime + this.duration) {\r\n                // sprite.alpha = this.params.at(-1);\r\n                object.props.alpha = this.params.at(-1);\r\n                return;\r\n            }\r\n\r\n            if (this.params.length === 1) {\r\n                // sprite.alpha = this.params.at(0);\r\n                object.props.alpha = this.params.at(0);\r\n                return;\r\n            }\r\n\r\n            const step = Math.floor(((timestamp - this.startTime) / this.duration) * (this.params.length - 1));\r\n            const percentage = Clamp(((timestamp - this.startTime) % this.duration) / this.duration, 0, 1);\r\n            const easeFunction =\r\n                EASINGS[this.easing] === \"easeOutElasticHalf\"\r\n                    ? easeOutElasticHalf\r\n                    : EASINGS[this.easing] === \"easeOutElasticQuart\"\r\n                    ? easeOutElasticQuart\r\n                    : Easing[EASINGS[this.easing]];\r\n\r\n            if (!easeFunction) {\r\n                throw new Error(this.easing);\r\n            }\r\n\r\n            const alpha = this.params[step] + (this.params[step + 1] - this.params[step]) * easeFunction(percentage);\r\n            // sprite.alpha = alpha;\r\n            object.props.alpha = alpha;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n}","import { EASINGS } from \"./Storyboard\";\r\nimport * as Easing from \"easing-utils\";\r\nimport { Clamp, easeOutElasticHalf, easeOutElasticQuart } from \"../Utils\";\r\n\r\nexport class MoveCommand {\r\n\tstartTime;\r\n\tendTime;\r\n\tparamsX;\r\n\tparamsY;\r\n\r\n\tconstructor({ easing, startTime, endTime, paramsX, paramsY }) {\r\n\t\tthis.easing = easing;\r\n\t\tthis.startTime = startTime;\r\n\t\tthis.endTime = endTime;\r\n\t\tthis.paramsX = paramsX;\r\n\t\tthis.paramsY = paramsY;\r\n\r\n\t\tthis.duration =\r\n\t\t\tMath.max(Math.max(paramsX.length - 1, paramsY.length - 1), 1) *\r\n\t\t\t(endTime - startTime);\r\n\t}\r\n\r\n\texecute(object, timestamp) {\r\n\t\tconst { sprite } = object;\r\n\t\tif (timestamp < this.startTime) {\r\n\t\t\tif (this.paramsX.length > 0) {\r\n\t\t\t\t// sprite.x = this.paramsX.at(0) * Game.SB_SCALE_RATE;\r\n\t\t\t\tobject.props.posX = this.paramsX.at(0);\r\n\t\t\t}\r\n\t\t\tif (this.paramsY.length > 0) {\r\n\t\t\t\t// sprite.y = this.paramsY.at(0) * Game.SB_SCALE_RATE;\r\n\t\t\t\tobject.props.posY = this.paramsY.at(0);\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.duration === 0 || timestamp > this.startTime + this.duration) {\r\n\t\t\tif (this.paramsX.length > 0) {\r\n\t\t\t\t// sprite.x = this.paramsX.at(-1) * Game.SB_SCALE_RATE;\r\n\t\t\t\tobject.props.posX = this.paramsX.at(-1);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.paramsY.length > 0) {\r\n\t\t\t\t// sprite.y = this.paramsY.at(-1) * Game.SB_SCALE_RATE;\r\n\t\t\t\tobject.props.posY = this.paramsY.at(-1);\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// console.log(object.texturepath, timestamp, this.startTime, this.startTime + this.duration, this.paramsX, this.paramsY);\r\n\r\n\t\tif (this.paramsX.length === 1) {\r\n\t\t\t// sprite.x = this.paramsX.at(0) * Game.SB_SCALE_RATE;\r\n\t\t\tobject.props.posX = this.paramsX.at(0);\r\n\r\n\t\t\tif (this.paramsY.length === 0) return;\r\n\t\t}\r\n\r\n\t\tif (this.paramsY.length === 1) {\r\n\t\t\t// sprite.y = this.paramsY.at(0) * Game.SB_SCALE_RATE;\r\n\t\t\tobject.props.posY = this.paramsY.at(0);\r\n\r\n\t\t\tif (this.paramsX.length === 0) return;\r\n\t\t}\r\n\r\n\t\tif (this.paramsX.length === 1 || this.paramsY.length === 1) return;\r\n\r\n\t\tconst step = Math.floor(\r\n\t\t\t((timestamp - this.startTime) / this.duration) *\r\n\t\t\t\tMath.max(this.paramsX.length - 1, this.paramsY.length - 1),\r\n\t\t);\r\n\t\tconst percentage = Clamp(\r\n\t\t\t((timestamp - this.startTime) % this.duration) / this.duration,\r\n\t\t\t0,\r\n\t\t\t1,\r\n\t\t);\r\n\t\tconst easeFunction =\r\n\t\t\tEASINGS[this.easing] === \"easeOutElasticHalf\"\r\n\t\t\t\t? easeOutElasticHalf\r\n\t\t\t\t: EASINGS[this.easing] === \"easeOutElasticQuart\"\r\n\t\t\t\t\t? easeOutElasticQuart\r\n\t\t\t\t\t: Easing[EASINGS[this.easing]] ?? Easing[EASINGS[0]];\r\n\r\n\t\tif (this.paramsX.length > 0) {\r\n\t\t\tconst start = this.paramsX[step];\r\n\t\t\tconst end = this.paramsX[step + 1];\r\n            \r\n\t\t\tconst x = start + (end - start) * easeFunction(percentage);\r\n\r\n\t\t\t// sprite.x = x;\r\n\t\t\tobject.props.posX = x;\r\n\t\t}\r\n\r\n\t\tif (this.paramsY.length > 0) {\r\n\t\t\tconst start = this.paramsY[step];\r\n\t\t\tconst end = this.paramsY[step + 1];\r\n\r\n\t\t\tconst y = start + (end - start) * easeFunction(percentage);\r\n\t\t\t// sprite.y = y;\r\n\t\t\tobject.props.posY = y;\r\n\t\t}\r\n\t}\r\n}\r\n","import { EASINGS } from \"./Storyboard\";\r\nimport * as Easing from \"easing-utils\";\r\nimport { Clamp, easeOutElasticHalf, easeOutElasticQuart } from \"../Utils\";\r\n\r\nexport class ScaleCommand {\r\n    easing;\r\n    startTime;\r\n    endTime;\r\n    paramsX;\r\n    paramsY;\r\n\r\n    constructor({ easing, startTime, endTime, paramsX, paramsY }) {\r\n        this.easing = easing;\r\n        this.startTime = startTime;\r\n        this.endTime = endTime;\r\n        this.paramsX = paramsX;\r\n        this.paramsY = paramsY;\r\n\r\n        this.duration = Math.max(paramsX.length - 1, 1) * (endTime - startTime);\r\n    }\r\n\r\n    execute(object, timestamp) {\r\n        const { sprite } = object;\r\n\r\n        if (timestamp < this.startTime) {\r\n            // sprite.scale.set(this.paramsX.at(0) * Game.SB_SCALE_RATE * 0.8, this.paramsY.at(0) * Game.SB_SCALE_RATE * 0.8);\r\n            object.props.scaleX = this.paramsX.at(0);\r\n            object.props.scaleY = this.paramsY.at(0);\r\n\r\n            return;\r\n        }\r\n\r\n        if (timestamp > this.startTime + this.duration) {\r\n            if (this.paramsX.length > 0) {\r\n                // sprite.scale.set(this.paramsX.at(-1) * Game.SB_SCALE_RATE * 0.8, this.paramsY.at(-1) * Game.SB_SCALE_RATE * 0.8);\r\n                object.props.scaleX = this.paramsX.at(-1);\r\n                object.props.scaleY = this.paramsY.at(-1);\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // console.log(object.texturepath, timestamp, this.startTime, this.startTime + this.duration, this.paramsX, this.paramsY);\r\n\r\n        if (this.paramsX.length === 1) {\r\n            // sprite.scale.set(this.paramsX.at(0) * Game.SB_SCALE_RATE * 0.8, this.paramsY.at(0) * Game.SB_SCALE_RATE * 0.8);\r\n            object.props.scaleX = this.paramsX.at(0);\r\n            object.props.scaleY = this.paramsY.at(0);\r\n            return;\r\n        }\r\n\r\n        const step = Math.floor(((timestamp - this.startTime) / this.duration) * (this.paramsX.length - 1));\r\n        const percentage = Clamp(((timestamp - this.startTime) % this.duration) / this.duration, 0, 1);\r\n        const easeFunction =\r\n            EASINGS[this.easing] === \"easeOutElasticHalf\"\r\n                ? easeOutElasticHalf\r\n                : EASINGS[this.easing] === \"easeOutElasticQuart\"\r\n                ? easeOutElasticQuart\r\n                : Easing[EASINGS[this.easing]];\r\n\r\n        if (this.paramsX.length > 0) {\r\n            const startX = this.paramsX[step];\r\n            const endX = this.paramsX[step + 1];\r\n\r\n            const startY = this.paramsY[step];\r\n            const endY = this.paramsY[step + 1];\r\n\r\n            const x = startX + (endX - startX) * easeFunction(percentage);\r\n            const y = startY + (endY - startY) * easeFunction(percentage);\r\n            // sprite.scale.set(x, y);\r\n            object.props.scaleX = x;\r\n            object.props.scaleY = y;\r\n        }\r\n    }\r\n}","import { EASINGS } from \"./Storyboard\";\r\nimport * as Easing from \"easing-utils\";\r\nimport { Clamp, easeOutElasticHalf, easeOutElasticQuart } from \"../Utils\";\r\n\r\nexport class RotateCommand {\r\n    easing;\r\n    startTime;\r\n    endTime;\r\n    params;\r\n\r\n    constructor({ easing, startTime, endTime, params }) {\r\n        this.easing = easing;\r\n        this.startTime = startTime;\r\n        this.endTime = endTime;\r\n        this.params = params;\r\n\r\n        this.duration = Math.max(params.length - 1, 1) * (endTime - startTime);\r\n    }\r\n\r\n    execute(object, timestamp) {\r\n        try {\r\n            const { sprite } = object;\r\n            if (timestamp < this.startTime) {\r\n                // sprite.rotation = this.params.at(0);\r\n                object.props.rotation = this.params.at(0);\r\n                return;\r\n            }\r\n\r\n            if (this.duration === 0 || timestamp > this.startTime + this.duration) {\r\n                // sprite.rotation = this.params.at(-1);\r\n                object.props.rotation = this.params.at(-1);\r\n                return;\r\n            }\r\n\r\n            if (this.params.length === 1) {\r\n                // sprite.rotation = this.params.at(0);\r\n                object.props.rotation = this.params.at(0);\r\n                return;\r\n            }\r\n\r\n            const step = Math.floor(((timestamp - this.startTime) / this.duration) * (this.params.length - 1));\r\n            const percentage = Clamp(((timestamp - this.startTime) % this.duration) / this.duration, 0, 1);\r\n            const easeFunction =\r\n                EASINGS[this.easing] === \"easeOutElasticHalf\"\r\n                    ? easeOutElasticHalf\r\n                    : EASINGS[this.easing] === \"easeOutElasticQuart\"\r\n                    ? easeOutElasticQuart\r\n                    : Easing[EASINGS[this.easing]];\r\n\r\n            if (!easeFunction) {\r\n                throw new Error(this.easing);\r\n            }\r\n\r\n            const rotation = this.params[step] + (this.params[step + 1] - this.params[step]) * easeFunction(percentage);\r\n            // sprite.rotation = rotation;\r\n            object.props.rotation = rotation;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n}","import { EASINGS } from \"./Storyboard\";\r\nimport { Clamp, easeOutElasticHalf, easeOutElasticQuart } from \"../Utils\";\r\nimport * as Easing from \"easing-utils\";\r\n\r\nexport class ColourCommand {\r\n    startTime;\r\n    endTime;\r\n    paramsR;\r\n    paramsG;\r\n    paramsB;\r\n\r\n    constructor({ easing, startTime, endTime, paramsR, paramsG, paramsB }) {\r\n        this.easing = easing;\r\n        this.startTime = startTime;\r\n        this.endTime = endTime;\r\n        this.paramsR = paramsR;\r\n        this.paramsG = paramsG;\r\n        this.paramsB = paramsB;\r\n\r\n        this.duration = Math.max(paramsR.length - 1, 1) * (endTime - startTime);\r\n    }\r\n\r\n    execute(object, timestamp) {\r\n        const { sprite } = object;\r\n        if (timestamp < this.startTime) {\r\n            // sprite.tint = (this.paramsR.at(0) << 16) | (this.paramsG.at(0) << 8) | this.paramsB.at(0);\r\n            object.props.tint = (this.paramsR.at(0) << 16) | (this.paramsG.at(0) << 8) | this.paramsB.at(0);\r\n\r\n            return;\r\n        }\r\n\r\n        if (this.duration === 0 || timestamp > this.startTime + this.duration) {\r\n            if (this.paramsR.length > 0) {\r\n                // sprite.tint = (this.paramsR.at(-1) << 16) | (this.paramsG.at(-1) << 8) | this.paramsB.at(-1);\r\n                object.props.tint = (this.paramsR.at(-1) << 16) | (this.paramsG.at(-1) << 8) | this.paramsB.at(-1);\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // console.log(object.texturepath, timestamp, this.startTime, this.startTime + this.duration, this.paramsX, this.paramsY);\r\n\r\n        if (this.paramsR.length === 1) {\r\n            // sprite.tint = (this.paramsR.at(0) << 16) | (this.paramsG.at(0) << 8) | this.paramsB.at(0);\r\n            object.props.tint = (this.paramsR.at(0) << 16) | (this.paramsG.at(0) << 8) | this.paramsB.at(0);\r\n            return;\r\n        }\r\n\r\n        const step = Math.floor(((timestamp - this.startTime) / this.duration) * (this.paramsR.length - 1));\r\n        const percentage = Clamp(((timestamp - this.startTime) % this.duration) / this.duration, 0, 1);\r\n        const easeFunction =\r\n            EASINGS[this.easing] === \"easeOutElasticHalf\"\r\n                ? easeOutElasticHalf\r\n                : EASINGS[this.easing] === \"easeOutElasticQuart\"\r\n                ? easeOutElasticQuart\r\n                : Easing[EASINGS[this.easing]];\r\n\r\n        if (this.paramsR.length > 0) {\r\n            const r = this.paramsR[step] + (this.paramsR[step + 1] - this.paramsR[step]) * easeFunction(percentage);\r\n            const g = this.paramsG[step] + (this.paramsG[step + 1] - this.paramsG[step]) * easeFunction(percentage);\r\n            const b = this.paramsB[step] + (this.paramsB[step + 1] - this.paramsB[step]) * easeFunction(percentage);\r\n\r\n            // sprite.tint = (r << 16) | (g << 8) | b;\r\n            object.props.tint = (r << 16) | (g << 8) | b;\r\n        }\r\n    }\r\n}\r\n","export class ParameterCommand {\r\n    easing;\r\n    startTime;\r\n    endTime;\r\n    params;\r\n\r\n    constructor({ easing, startTime, endTime, params }) {\r\n        this.easing = easing;\r\n        this.startTime = startTime;\r\n        this.endTime = endTime;\r\n        this.params = params;\r\n\r\n        this.duration = Math.max(params.length - 1, 1) * (endTime - startTime);\r\n    }\r\n\r\n    execute(object, timestamp) {\r\n        const { sprite } = object;\r\n        if (timestamp < this.startTime) {\r\n            const param = this.params.at(0);\r\n\r\n            switch (param) {\r\n                case \"A\": {\r\n                    // sprite.blendMode = \"add\";\r\n                    object.props.blendMode = \"add\";\r\n                    break;\r\n                }\r\n                case \"H\": {\r\n                    object.props.flipW = true;\r\n                    break;\r\n                }\r\n                case \"V\": {\r\n                    object.props.flipH = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        // sprite.blendMode = \"normal\";\r\n        object.props.blendMode = \"normal\";\r\n\r\n        if (this.duration === 0 || timestamp > this.startTime + this.duration) {\r\n            const param = this.params.at(-1);\r\n\r\n            switch (param) {\r\n                case \"A\": {\r\n                    // sprite.blendMode = \"add\";\r\n                    object.props.blendMode = \"add\";\r\n                    break;\r\n                }\r\n                case \"H\": {\r\n                    object.props.flipW = true;\r\n                    break;\r\n                }\r\n                case \"V\": {\r\n                    object.props.flipH = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (this.params.length === 1) {\r\n            const param = this.params.at(0);\r\n\r\n            switch (param) {\r\n                case \"A\": {\r\n                    // sprite.blendMode = \"add\";\r\n                    object.props.blendMode = \"add\";\r\n                    break;\r\n                }\r\n                case \"H\": {\r\n                    object.props.flipW = true;\r\n                    break;\r\n                }\r\n                case \"V\": {\r\n                    object.props.flipH = true;\r\n                    break;\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        const step = Math.floor(((timestamp - this.startTime) / this.duration) * (this.params.length - 1));\r\n        const param = this.params.at(step);\r\n\r\n        switch (param) {\r\n            case \"A\": {\r\n                // sprite.blendMode = \"add\";\r\n                object.props.blendMode = \"add\";\r\n                break;\r\n            }\r\n            case \"H\": {\r\n                object.props.flipW = true;\r\n                break;\r\n            }\r\n            case \"V\": {\r\n                object.props.flipH = true;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { Storyboard, StoryboardSprite } from \"./Storyboard\";\r\n\r\nexport class LoopCommand {\r\n    startTime;\r\n    loopCount;\r\n    commands;\r\n\r\n    constructor({ startTime, loopCount, rawCommands }) {\r\n        this.startTime = startTime;\r\n        this.loopCount = loopCount;\r\n        this.commands = this.parse(rawCommands);\r\n\r\n        this.oneIterationStart = Math.min(\r\n            ...Object.values(this.commands)\r\n                .reduce((accm, curr) => [...accm, ...curr], [])\r\n                .map((command) => command.startTime)\r\n        );\r\n\r\n        this.oneIterationEnd = Math.max(\r\n            ...Object.values(this.commands)\r\n                .reduce((accm, curr) => [...accm, ...curr], [])\r\n                .map((command) => command.startTime + command.duration)\r\n        );\r\n\r\n        // console.log(this.commands, rawCommands, this.oneIterationStart, this.oneIterationEnd)\r\n\r\n        this.duration = (this.oneIterationEnd - this.oneIterationStart) * this.loopCount;\r\n        this.endTime = this.startTime + this.duration;\r\n    }\r\n\r\n    parse(raw) {\r\n        const fade = (raw.match(new RegExp(`${Storyboard.REGEX.FADE.source}`, \"gm\")) ?? []).map((command) => StoryboardSprite.fadeParse(command));\r\n        const move = (raw.match(new RegExp(`${Storyboard.REGEX.MOVE.source}`, \"gm\")) ?? []).map((command) => StoryboardSprite.moveParse(command));\r\n        const moveX = (raw.match(new RegExp(`${Storyboard.REGEX.MOVE_X.source}`, \"gm\")) ?? []).map((command) =>\r\n            StoryboardSprite.moveXParse(command)\r\n        );\r\n        const moveY = (raw.match(new RegExp(`${Storyboard.REGEX.MOVE_Y.source}`, \"gm\")) ?? []).map((command) =>\r\n            StoryboardSprite.moveYParse(command)\r\n        );\r\n        const scale = (raw.match(new RegExp(`${Storyboard.REGEX.SCALE.source}`, \"gm\")) ?? []).map((command) => StoryboardSprite.scaleParse(command));\r\n        const vector = (raw.match(new RegExp(`${Storyboard.REGEX.VECTOR.source}`, \"gm\")) ?? []).map((command) =>\r\n            StoryboardSprite.vectorParse(command)\r\n        );\r\n        const rotate = (raw.match(new RegExp(`${Storyboard.REGEX.ROTATE.source}`, \"gm\")) ?? []).map((command) =>\r\n            StoryboardSprite.rotateParse(command)\r\n        );\r\n        const colour = (raw.match(new RegExp(`${Storyboard.REGEX.COLOUR.source}`, \"gm\")) ?? []).map((command) =>\r\n            StoryboardSprite.colourParse(command)\r\n        );\r\n        const parameter = (raw.match(new RegExp(`${Storyboard.REGEX.PARAMETER.source}`, \"gm\")) ?? []).map((command) =>\r\n            StoryboardSprite.parameterParse(command)\r\n        );\r\n\r\n        return {\r\n            fade,\r\n            move,\r\n            moveX,\r\n            moveY,\r\n            scale,\r\n            vector,\r\n            rotate,\r\n            colour,\r\n            parameter,\r\n        };\r\n    }\r\n\r\n    execute(object, timestamp) {\r\n        if (timestamp < this.startTime || timestamp > this.endTime) return;\r\n\r\n        const loopTimestamp = (timestamp - this.startTime) % (this.oneIterationEnd - this.oneIterationStart);\r\n\r\n        Object.values(this.commands).forEach((commandGroup) => {\r\n            commandGroup.forEach((command, idx, arr) => {\r\n                if (loopTimestamp < command.startTime && idx !== 0) return;\r\n                if (idx !== 0 && arr[idx - 1].startTime === command.startTime && arr[idx - 1].duration === command.duration) return;\r\n                command.execute(object, loopTimestamp);\r\n            });\r\n        });\r\n    }\r\n}","import * as PIXI from \"pixi.js\";\r\nimport { Game } from \"../Game\";\r\nimport { Background } from \"../Background\";\r\nimport { FadeCommand } from \"./FadeCommand\";\r\nimport { MoveCommand } from \"./MoveCommand\";\r\nimport { ScaleCommand } from \"./ScaleCommand\";\r\nimport { RotateCommand } from \"./RotateCommand\";\r\nimport { ColourCommand } from \"./ColourCommand\";\r\nimport { ParameterCommand } from \"./ParameterCommand\";\r\nimport { LoopCommand } from \"./LoopCommand\";\r\nimport MyWorker from \"../Workers/StoryboardWorker.js?worker\";\r\n\r\nexport const EASINGS = {\r\n\t0: \"linear\",\r\n\t1: \"easeOutSine\" /* EaseOut */,\r\n\t2: \"easeInSine\" /* EaseIn */,\r\n\t3: \"easeInQuad\",\r\n\t4: \"easeOutQuad\",\r\n\t5: \"easeInOutQuad\",\r\n\t6: \"easeInCubic\",\r\n\t7: \"easeOutCubic\",\r\n\t8: \"easeInOutCubic\",\r\n\t9: \"easeInQuart\",\r\n\t10: \"easeOutQuart\",\r\n\t11: \"easeInOutQuart\",\r\n\t12: \"easeInQuint\",\r\n\t13: \"easeOutQuint\",\r\n\t14: \"easeInOutQuint\",\r\n\t15: \"easeInSine\",\r\n\t16: \"easeOutSine\",\r\n\t17: \"easeInOutSine\",\r\n\t18: \"easeInExpo\",\r\n\t19: \"easeOutExpo\",\r\n\t20: \"easeInOutExpo\",\r\n\t21: \"easeInCirc\",\r\n\t22: \"easeOutCirc\",\r\n\t23: \"easeInOutCirc\",\r\n\t24: \"easeInElastic\",\r\n\t25: \"easeOutElastic\",\r\n\t26: \"easeOutElasticHalf\" /* ElasticHalf */,\r\n\t27: \"easeOutElasticQuart\" /* ElasticQuarter */,\r\n\t28: \"easeInOutElastic\",\r\n\t29: \"easeInBack\",\r\n\t30: \"easeOutBack\",\r\n\t31: \"easeInOutBack\",\r\n\t32: \"easeInBounce\",\r\n\t33: \"easeOutBounce\",\r\n\t34: \"easeInOutBounce\",\r\n};\r\n\r\nconst ANCHOR = {\r\n\tTopLeft: [0, 0],\r\n\tTopCentre: [0.5, 0],\r\n\tTopRight: [1, 0],\r\n\tCentreLeft: [0, 0.5],\r\n\tCentre: [0.5, 0.5],\r\n\tCentreRight: [1, 0.5],\r\n\tBottomLeft: [0, 1],\r\n\tBottomCentre: [0.5, 1],\r\n\tBottomRight: [1, 1],\r\n};\r\n\r\nconst LAYER = {\r\n\tBackground: 0,\r\n\tFail: 1,\r\n\tPass: 2,\r\n\tForeground: 3,\r\n};\r\n\r\nexport class StoryboardSprite {\r\n\traw;\r\n\tcommands = [];\r\n\tisInRender = false;\r\n\tisOsu = false;\r\n\r\n\tprops = {\r\n\t\tposX: 0,\r\n\t\tposY: 0,\r\n\t\tscaleX: 1,\r\n\t\tscaleY: 1,\r\n\t\talpha: 1,\r\n\t\ttint: 0xffffff,\r\n\t\trotation: 0,\r\n\t\tblendMode: \"normal\",\r\n\t\tflipH: false,\r\n\t\tflipW: false,\r\n\t};\r\n\r\n\tconstructor(raw, isOsu) {\r\n\t\tthis.raw = raw;\r\n\t\tthis.isOsu = isOsu;\r\n\t\tthis.sprite = new PIXI.Sprite();\r\n\t\tthis.sprite.visible = false;\r\n\r\n\t\tthis.getSpriteInfo();\r\n\r\n\t\tthis.commands = this.parse(raw);\r\n\t\t// if (this.texturepath === \"sb/bg/b2.jpg\") {\r\n\t\t// \tconsole.log(this.commands);\r\n\t\t// }\r\n\r\n\t\tthis.startTime = Math.min(\r\n\t\t\t...Object.values(this.commands)\r\n\t\t\t\t.reduce((accm, curr) => [...accm, ...curr], [])\r\n\t\t\t\t.map((command) => command.startTime),\r\n\t\t);\r\n\t\tthis.endTime = Math.max(\r\n\t\t\t...Object.values(this.commands)\r\n\t\t\t\t.reduce((accm, curr) => [...accm, ...curr], [])\r\n\t\t\t\t.map((command) => command.startTime + command.duration),\r\n\t\t);\r\n\r\n\t\t// console.log(this.texturepath, this.startTime, this.endTime);\r\n\t}\r\n\r\n\tstatic fadeParse(line, object) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\tif (\r\n\t\t\tobject?.texturepath === Storyboard.backgroundFilename &&\r\n\t\t\tparams.at(0) === \"0\"\r\n\t\t) {\r\n\t\t\tStoryboard.BLACK_BG = true;\r\n\r\n\t\t\tif (Game.IS_STORYBOARD) Background.sprite.tint = 0x000000;\r\n\t\t}\r\n\r\n\t\treturn new FadeCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparams: params.map((param) => parseFloat(param)),\r\n\t\t});\r\n\t}\r\n\r\n\tstatic moveParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\tconst paramsX = params.filter((_, idx) => idx % 2 === 0);\r\n\t\tconst paramsY = params.filter((_, idx) => idx % 2 !== 0);\r\n\r\n\t\treturn new MoveCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparamsX: paramsX.map((param) => parseFloat(param)),\r\n\t\t\tparamsY: paramsY.map((param) => parseFloat(param)),\r\n\t\t});\r\n\t\t// console.log(\"MOVE\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic moveXParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\treturn new MoveCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparamsX: params.map((param) => parseFloat(param)),\r\n\t\t\tparamsY: [],\r\n\t\t});\r\n\t\t// console.log(\"MOVE_X\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic moveYParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\treturn new MoveCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparamsX: [],\r\n\t\t\tparamsY: params.map((param) => parseFloat(param)),\r\n\t\t});\r\n\t\t// console.log(\"MOVE_Y\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic scaleParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\treturn new ScaleCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparamsX: params.map((param) => parseFloat(param)),\r\n\t\t\tparamsY: params.map((param) => parseFloat(param)),\r\n\t\t});\r\n\r\n\t\t// console.log(\"SCALE\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic vectorParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\tconst paramsX = params.filter((_, idx) => idx % 2 === 0);\r\n\t\tconst paramsY = params.filter((_, idx) => idx % 2 !== 0);\r\n\r\n\t\treturn new ScaleCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparamsX: paramsX.map((param) => parseFloat(param)),\r\n\t\t\tparamsY: paramsY.map((param) => parseFloat(param)),\r\n\t\t});\r\n\r\n\t\t// console.log(\"SCALE\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic rotateParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\treturn new RotateCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparams: params.map((param) => parseFloat(param)),\r\n\t\t});\r\n\t\t// console.log(\"ROTATE\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic colourParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\tconst paramsR = params.filter((_, idx) => idx % 3 === 0);\r\n\t\tconst paramsG = params.filter((_, idx) => idx % 3 === 1);\r\n\t\tconst paramsB = params.filter((_, idx) => idx % 3 === 2);\r\n\r\n\t\treturn new ColourCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparamsR: paramsR.map((param) => parseFloat(param)),\r\n\t\t\tparamsG: paramsG.map((param) => parseFloat(param)),\r\n\t\t\tparamsB: paramsB.map((param) => parseFloat(param)),\r\n\t\t});\r\n\t\t// console.log(\"COLOUR\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic parameterParse(line) {\r\n\t\tlet [, easing, startTime, endTime, ...params] = line.split(\",\");\r\n\t\tif (endTime === \"\") endTime = startTime;\r\n\r\n\t\treturn new ParameterCommand({\r\n\t\t\teasing,\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tendTime: parseFloat(endTime),\r\n\t\t\tparams,\r\n\t\t});\r\n\t\t// console.log(\"PARAMETER\", easing, startTime, endTime, params);\r\n\t}\r\n\r\n\tstatic loopParse(block) {\r\n\t\tconst [line, ...rest] = block.split(\"\\n\");\r\n\t\tconst [, startTime, loopCount] = line.split(\",\");\r\n\t\tconst rawCommands = rest.join(\"\\n\");\r\n\r\n\t\treturn new LoopCommand({\r\n\t\t\tstartTime: parseFloat(startTime),\r\n\t\t\tloopCount: parseInt(loopCount),\r\n\t\t\trawCommands,\r\n\t\t});\r\n\t}\r\n\r\n\tgetSpriteInfo() {\r\n\t\tconst [infoLine] = this.raw.split(\"\\n\");\r\n\t\tconst [, layer, origin, texturepath, x, y] = infoLine.split(\",\");\r\n\r\n\t\tthis.layer = layer;\r\n\t\tthis.origin = origin;\r\n\t\tthis.texturepath = texturepath.slice(1, -1).replaceAll(\"\\\\\", \"/\");\r\n\t\tthis.base_x = parseFloat(x);\r\n\t\tthis.base_y = parseFloat(y);\r\n\r\n\t\tthis.props.posX = this.base_x;\r\n\t\tthis.props.posY = this.base_y;\r\n\t\tthis.sprite.anchor.set(...ANCHOR[this.origin]);\r\n\t\tthis.sprite.label = `${this.texturepath} ${this.layer}`;\r\n\t\tthis.sprite.zIndex = LAYER[this.layer];\r\n\t}\r\n\r\n\tloadTexture() {\r\n\t\tthis.texture = Storyboard.TEXTURES[this.texturepath];\r\n\t\tthis.sprite.texture = this.texture;\r\n\t}\r\n\r\n\tparse(raw) {\r\n\t\tconst fade = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.FADE.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.fadeParse(command, this));\r\n\t\tconst move = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.MOVE.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.moveParse(command));\r\n\t\tconst moveX = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.MOVE_X.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.moveXParse(command));\r\n\t\tconst moveY = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.MOVE_Y.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.moveYParse(command));\r\n\t\tconst scale = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.SCALE.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.scaleParse(command));\r\n\t\tconst vector = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.VECTOR.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.vectorParse(command));\r\n\t\tconst rotate = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.ROTATE.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.rotateParse(command));\r\n\t\tconst colour = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.COLOUR.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.colourParse(command));\r\n\t\tconst parameter = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.PARAMETER.source}`, \"gm\")) ?? []\r\n\t\t).map((command) => StoryboardSprite.parameterParse(command));\r\n\t\tconst loop = (\r\n\t\t\traw.match(new RegExp(`^${Storyboard.REGEX.LOOP_BLOCK.source}`, \"gm\")) ??\r\n\t\t\t[]\r\n\t\t).map((command) => StoryboardSprite.loopParse(command));\r\n\r\n\t\treturn {\r\n\t\t\tfade,\r\n\t\t\tmove,\r\n\t\t\tmoveX,\r\n\t\t\tmoveY,\r\n\t\t\tscale,\r\n\t\t\tvector,\r\n\t\t\trotate,\r\n\t\t\tcolour,\r\n\t\t\tparameter,\r\n\t\t\tloop,\r\n\t\t};\r\n\t}\r\n\r\n\tdraw(timestamp) {\r\n\t\tif (timestamp < this.startTime || timestamp > this.endTime) {\r\n\t\t\tif (this.isInRender) {\r\n\t\t\t\tthis.isInRender = false;\r\n\t\t\t\tthis.sprite.visible = false;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!this.isInRender) {\r\n\t\t\tthis.isInRender = true;\r\n\t\t\tthis.sprite.visible = true;\r\n\r\n\t\t\t// this.sprite.scale.set(Game.SCALE_RATE);\r\n\t\t\t// this.sprite.x = Game.NON_SCALE_OFFSET_X + this.base_x.x * Game.SCALE_RATE;\r\n\t\t\t// this.sprite.y = Game.NON_SCALE_OFFSET_Y + this.base_y.y * Game.SCALE_RATE;\r\n\t\t\t// this.sprite.alpha = 1;\r\n\t\t\t// this.sprite.tint = 0xFFFFFF;\r\n\t\t}\r\n\r\n\t\tObject.values(this.commands).forEach((commandGroup) => {\r\n\t\t\tcommandGroup.forEach((command, idx, arr) => {\r\n\t\t\t\tif (timestamp < command.startTime && idx !== 0) return;\r\n\t\t\t\tif (\r\n\t\t\t\t\tidx !== 0 &&\r\n\t\t\t\t\tarr[idx - 1].startTime === command.startTime &&\r\n\t\t\t\t\tarr[idx - 1].duration === command.duration &&\r\n\t\t\t\t\t!(command instanceof LoopCommand)\r\n\t\t\t\t)\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\tcommand.execute(this, timestamp);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tthis.sprite.x = this.props.posX * Game.SB_SCALE_RATE;\r\n\t\tthis.sprite.y = this.props.posY * Game.SB_SCALE_RATE;\r\n\t\tthis.sprite.alpha = this.props.alpha;\r\n\t\tthis.sprite.scale.set(\r\n\t\t\tthis.props.scaleX * Game.SB_SCALE_RATE * (this.props.flipW ? -1 : 1),\r\n\t\t\tthis.props.scaleY * Game.SB_SCALE_RATE * (this.props.flipH ? -1 : 1),\r\n\t\t);\r\n\t\tthis.sprite.rotation = this.props.rotation;\r\n\t\tthis.sprite.tint = this.props.tint;\r\n\t\tthis.sprite.blendMode = this.props.blendMode;\r\n\t}\r\n}\r\n\r\nexport class StoryboardAnimatedSprite extends StoryboardSprite {\r\n\tcurrentFrame = 0;\r\n\r\n\tconstructor(raw, isOsu) {\r\n\t\tsuper(raw, isOsu);\r\n\t}\r\n\r\n\tgetSpriteInfo() {\r\n\t\tconst [infoLine] = this.raw.split(\"\\n\");\r\n\t\tconst [\r\n\t\t\t,\r\n\t\t\tlayer,\r\n\t\t\torigin,\r\n\t\t\ttexturepath,\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\tframeCount,\r\n\t\t\tframeDelay,\r\n\t\t\tloopType,\r\n\t\t] = infoLine.split(\",\");\r\n\r\n\t\tthis.layer = layer;\r\n\t\tthis.origin = origin;\r\n\t\tthis.texturepath = texturepath.slice(1, -1).replaceAll(\"\\\\\", \"/\");\r\n\t\tthis.base_x = parseFloat(x);\r\n\t\tthis.base_y = parseFloat(y);\r\n\t\tthis.frameCount = parseInt(frameCount);\r\n\t\tthis.frameDelay = parseFloat(frameDelay);\r\n\t\tthis.loopType = loopType;\r\n\r\n\t\tthis.props.posX = this.base_x;\r\n\t\tthis.props.posY = this.base_y;\r\n\t\tthis.sprite.anchor.set(...ANCHOR[this.origin]);\r\n\t\tthis.sprite.label = `${this.texturepath} ${this.layer}`;\r\n\t\tthis.sprite.zIndex = LAYER[this.layer];\r\n\t}\r\n\r\n\tloadTexture() {\r\n\t\tthis.texture =\r\n\t\t\tStoryboard.TEXTURES[\r\n\t\t\t\t`${this.texturepath.split(\".\").slice(0, -1).join(\".\")}0.${this.texturepath.split(\".\").at(-1)}`\r\n\t\t\t];\r\n\t\tthis.sprite.texture = this.texture;\r\n\t}\r\n\r\n\tdraw(timestamp) {\r\n\t\tsuper.draw(timestamp);\r\n\t\tif (timestamp < this.startTime) return;\r\n\r\n\t\tconst step = Math.floor((timestamp - this.startTime) / this.frameDelay);\r\n\t\tif (\r\n\t\t\tthis.loopType === \"LoopOnce\" &&\r\n\t\t\tthis.currentFrame >= this.frameCount - 1\r\n\t\t)\r\n\t\t\treturn;\r\n\r\n\t\tconst frame = step % this.frameCount;\r\n\t\t// console.log(`${this.texturepath.split(\".\").slice(0, -1).join(\".\")}${frame}.png`, frame, step);\r\n\t\tif (frame !== this.currentFrame) {\r\n\t\t\tthis.currentFrame = frame;\r\n\t\t\tthis.sprite.texture =\r\n\t\t\t\tStoryboard.TEXTURES[\r\n\t\t\t\t\t`${this.texturepath.split(\".\").slice(0, -1).join(\".\")}${frame}.${this.texturepath.split(\".\").at(-1)}`\r\n\t\t\t\t];\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class Storyboard {\r\n\tstatic rawOsb;\r\n\tstatic sprites = [];\r\n\tstatic backgroundFilename = \"\";\r\n\tstatic BLACK_BG = false;\r\n\tstatic TEXTURES = {};\r\n\r\n\tstatic WORKER = new MyWorker();\r\n\r\n\tstatic filtered = [];\r\n\r\n\tstatic REGEX = {\r\n\t\tFADE: /(_| )F,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tMOVE: /(_| )M,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tMOVE_X:\r\n\t\t\t/(_| )MX,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tMOVE_Y:\r\n\t\t\t/(_| )MY,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tSCALE:\r\n\t\t\t/(_| )S,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tVECTOR:\r\n\t\t\t/(_| )V,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tROTATE:\r\n\t\t\t/(_| )R,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tCOLOUR:\r\n\t\t\t/(_| )C,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,-?[0-9]+(\\.[0-9]+)?(E(\\+|-)[0-9]+)?)+/g,\r\n\t\tPARAMETER:\r\n\t\t\t/(_| )P,[0-9]{1,2},-?[0-9]+(\\.[0-9]+)?,(-?[0-9]+(\\.[0-9]+)?)?(,(H|V|A))+/g,\r\n\t\tLOOP: /(_| )L,-?[0-9]+(\\.[0-9]+)?,[0-9]+/g,\r\n\t\tSPRITE:\r\n\t\t\t/Sprite,(0|1|2|3|Background|Foreground|Pass|Fail),([0-9]|Top(Left|Right|Centre)|Centre(Left|Right)?|Bottom(Left|Right|Centre)|Custom),\"((?:\\w+\\\\?)*\\\\)?[;\\+\\/\\\\\\!\\(\\)\\[\\]\\{\\}\\&\\%\\#a-zA-Z0-9\\s\\._\\-\\~\\@']+\\.[a-zA-Z0-9]+\",-?[0-9]+(\\.[0-9]+)?,-?[0-9]+(\\.[0-9]+)?/g,\r\n\t\tANIMATION:\r\n\t\t\t/Animation,(0|1|2|3|Background|Foreground|Pass|Fail),([0-9]|Top(Left|Right|Centre)|Centre(Left|Right)?|Bottom(Left|Right|Centre)|Custom),\"((?:\\w+\\\\?)*\\\\)?[;\\+\\/\\\\\\!\\(\\)\\[\\]\\{\\}\\&\\%\\#a-zA-Z0-9\\s\\._\\-\\~\\@']+\\.[a-zA-Z0-9]+\",-?[0-9]+(\\.[0-9]+)?,-?[0-9]+(\\.[0-9]+)?,-?[0-9]+(\\.[0-9]+)?,-?[0-9]+(\\.[0-9]+)?,(LoopOnce|LoopForever)/g,\r\n\t\tVARIABLE: /^\\$[0-9A-Za-z]+=.+/gm,\r\n\t};\r\n\r\n\tstatic init() {\r\n\t\tthis.container = new PIXI.Container();\r\n\t\tthis.container.label = \"Storyboard\";\r\n\t\tthis.container.eventMode = \"none\";\r\n\r\n\t\tthis.mask = new PIXI.Graphics();\r\n\t\tthis.mask.label = \"MASK\";\r\n\t\tthis.mask\r\n\t\t\t.clear()\r\n\t\t\t.rect(\r\n\t\t\t\t(Game.MASTER_CONTAINER.h * (4 / 3 - 16 / 9)) / 2,\r\n\t\t\t\t0,\r\n\t\t\t\t(Game.MASTER_CONTAINER.h * 16) / 9,\r\n\t\t\t\tGame.MASTER_CONTAINER.h,\r\n\t\t\t)\r\n\t\t\t.fill(0xffffff);\r\n\r\n\t\tthis.container.mask = this.mask;\r\n\r\n\t\tthis.container.addChild(this.mask);\r\n\r\n\t\tthis.REGEX.COMMAND_REGEX = new RegExp(\r\n\t\t\t`${Storyboard.REGEX.FADE.source}|${Storyboard.REGEX.MOVE.source}|${Storyboard.REGEX.MOVE_X.source}|${Storyboard.REGEX.MOVE_Y.source}|${Storyboard.REGEX.SCALE.source}|${Storyboard.REGEX.VECTOR.source}|${Storyboard.REGEX.ROTATE.source}|${Storyboard.REGEX.COLOUR.source}|${Storyboard.REGEX.PARAMETER.source}`,\r\n\t\t);\r\n\t\tthis.REGEX.LOOP_BLOCK = new RegExp(\r\n\t\t\t`${Storyboard.REGEX.LOOP.source}((\\\\r)?\\\\n(_| )(${Storyboard.REGEX.COMMAND_REGEX.source}))+`,\r\n\t\t\t\"gm\",\r\n\t\t);\r\n\t\tthis.REGEX.SPRITE_BLOCK = new RegExp(\r\n\t\t\t`(${Storyboard.REGEX.SPRITE.source}|${Storyboard.REGEX.ANIMATION.source})((\\\\r)?\\\\n(${Storyboard.REGEX.COMMAND_REGEX.source}|${this.REGEX.LOOP_BLOCK.source}))+`,\r\n\t\t\t\"gm\",\r\n\t\t);\r\n\t\tthis.REGEX.FORBIDDEN = new RegExp(\r\n\t\t\t`((Sprite|Animation),.*?)(?=(\\r)?\\n((Sprite|Animation),.*?))`,\r\n\t\t\t\"gm\",\r\n\t\t);\r\n\r\n\t\t// this.WORKER.onmessage = (event) => {\r\n\t\t//     const { type } = event.data;\r\n\t\t//     switch (type) {\r\n\t\t//         case \"updateOrder\": {\r\n\t\t//             const { filtered, add, removed } = event.data.objects;\r\n\t\t//             this.filtered = filtered;\r\n\r\n\t\t//             removed.forEach((object) => Storyboard.sprites[object.idx].sprite.visible = false);\r\n\t\t//             // addTop.forEach((object) => Storyboard.container.addChild(Storyboard.sprites[object.idx].sprite));\r\n\t\t//             // addBack.reverse().forEach((object) => Storyboard.container.addChildAt(Storyboard.sprites[object.idx].sprite, 0));\r\n\t\t//             // this.filtered.forEach((object) => Storyboard.container.addChild(Storyboard.sprites[object.idx].sprite));\r\n\t\t//             // add.forEach((object) => Storyboard.sprites[object.idx].sprite.visible = true);\r\n\r\n\t\t//             break;\r\n\t\t//         }\r\n\t\t//     }\r\n\t\t// };\r\n\r\n\t\t// this.REGEX.SPRITE_BLOCK = new RegExp(`${Storyboard.REGEX.SPRITE.source}((\\\\r)?\\\\n(${Storyboard.REGEX.FADE.source}))+`, \"gm\");\r\n\t}\r\n\r\n\tstatic load(content, isOsu) {\r\n\t\tconst variablesRaw = content.match(this.REGEX.VARIABLE) ?? [];\r\n\t\tconst variables = variablesRaw.map((variable) => {\r\n\t\t\tconst [key, ...rest] = variable.split(\"=\");\r\n\t\t\treturn {\r\n\t\t\t\tkey,\r\n\t\t\t\tvalue: rest.join(\"\"),\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tconst parsed = variables.reduce(\r\n\t\t\t(accm, curr) => accm.replaceAll(curr.key, curr.value),\r\n\t\t\tcontent,\r\n\t\t);\r\n\r\n\t\tconst illegals = parsed.match(this.REGEX.FORBIDDEN) ?? [];\r\n\t\tif (illegals.length > 0) {\r\n\t\t\tStoryboard.BLACK_BG = true;\r\n\t\t\tif (Game.IS_STORYBOARD) Background.sprite.tint = 0x000000;\r\n\t\t}\r\n\t\tconst clean = illegals.reduce(\r\n\t\t\t(accm, curr) => accm.replaceAll(curr, \"\"),\r\n\t\t\tparsed,\r\n\t\t);\r\n\r\n\t\tconst blocks = clean.match(this.REGEX.SPRITE_BLOCK) ?? [];\r\n\t\treturn blocks.map((line) => {\r\n\t\t\tconst test = line.split(\",\").at(0) === \"Sprite\";\r\n\t\t\tif (test) return new StoryboardSprite(line, isOsu ?? false);\r\n\t\t\treturn new StoryboardAnimatedSprite(line, isOsu ?? false);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async parse(\r\n\t\tosbContent,\r\n\t\tosuOsbContent,\r\n\t\tallEntries,\r\n\t\tbackgroundFilename,\r\n\t) {\r\n\t\tStoryboard.backgroundFilename = backgroundFilename;\r\n\r\n\t\tconst osbSprites = Storyboard.load(osbContent.replaceAll(\"\\r\", \"\"));\r\n\t\tconst osuSprites = Storyboard.load(osuOsbContent.replaceAll(\"\\r\", \"\"), true);\r\n\t\tStoryboard.sprites = [...osuSprites, ...osbSprites];\r\n\r\n\t\t// Storyboard.sprites = Storyboard.sprites.toSorted((a, b) => {\r\n\t\t//     if (a.startTime === b.startTime) {\r\n\t\t//         if (a.isOsu && !b.isOsu) return 1;\r\n\t\t//         if (!a.isOsu && b.isOsu) return -1;\r\n\t\t//         return 0;\r\n\t\t//     }\r\n\r\n\t\t//     return a.startTime - b.startTime;\r\n\t\t// });\r\n\r\n\t\t// console.log(Storyboard.sprites);\r\n\r\n\t\tconst texturePaths = Storyboard.sprites.reduce(\r\n\t\t\t(accm, curr) =>\r\n\t\t\t\tcurr instanceof StoryboardAnimatedSprite\r\n\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t...accm,\r\n\t\t\t\t\t\t\t...Array(curr.frameCount)\r\n\t\t\t\t\t\t\t\t.fill(true)\r\n\t\t\t\t\t\t\t\t.map((_, idx) => {\r\n\t\t\t\t\t\t\t\t\treturn `${curr.texturepath.split(\".\").slice(0, -1).join(\".\")}${idx}.${curr.texturepath.split(\".\").at(-1)}`;\r\n\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t: [...accm, curr.texturepath],\r\n\t\t\t[],\r\n\t\t);\r\n\t\t// console.log(texturePaths.join(\"\\n\"));\r\n\r\n\t\tfor (const texturepath of texturePaths) {\r\n\t\t\tif (Storyboard.TEXTURES[texturepath]) continue;\r\n\r\n\t\t\tconst file = allEntries.find(\r\n\t\t\t\t(entry) => entry.filename.toLowerCase() === texturepath.toLowerCase(),\r\n\t\t\t);\r\n\r\n\t\t\tif (!file) {\r\n\t\t\t\tStoryboard.TEXTURES[texturepath] = new PIXI.Texture();\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst data = await file.getData(\r\n\t\t\t\tnew zip.BlobWriter(`image/${texturepath.split(\".\").at(-1)}`),\r\n\t\t\t);\r\n\t\t\tconst url = URL.createObjectURL(data);\r\n\r\n\t\t\tconst texture = await PIXI.Assets.load({\r\n\t\t\t\tsrc: url,\r\n\t\t\t\tloadParser: \"loadTextures\",\r\n\t\t\t});\r\n\r\n\t\t\tStoryboard.TEXTURES[texturepath] = texture;\r\n\t\t}\r\n\r\n\t\tfor (const sprite of Storyboard.sprites) {\r\n\t\t\tsprite.loadTexture();\r\n\t\t\tStoryboard.container.addChild(sprite.sprite);\r\n\r\n\t\t\t// if (sprite.texturepath === \"sb/our_boy/whale.png\") console.log(sprite);\r\n\t\t}\r\n\r\n\t\t// this.WORKER.postMessage({\r\n\t\t//     type: \"objects\",\r\n\t\t//     objects: Storyboard.sprites.map((sprite, idx) => {\r\n\t\t//         return {\r\n\t\t//             startTime: sprite.startTime,\r\n\t\t//             endTime: sprite.endTime,\r\n\t\t//             texturepath: sprite.texturepath,\r\n\t\t//             idx,\r\n\t\t//             isOsu: sprite.isOsu,\r\n\t\t//         };\r\n\t\t//     }),\r\n\t\t// });\r\n\r\n\t\t// console.log(Storyboard.sprites);\r\n\t}\r\n\r\n\tstatic reset() {\r\n\t\tStoryboard.rawOsb;\r\n\t\tStoryboard.sprites = [];\r\n\t\tStoryboard.backgroundFilename = \"\";\r\n\t\tStoryboard.BLACK_BG = false;\r\n\t\tStoryboard.TEXTURES = {};\r\n\t\tStoryboard.WORKER.postMessage({\r\n\t\t\ttype: \"clear\",\r\n\t\t});\r\n\t}\r\n\r\n\tstatic draw(timestamp) {\r\n\t\tif (Game.EMIT_STACK.length > 0) {\r\n\t\t\tthis.container.x = Game.SB_OFFSET_X;\r\n\t\t\tthis.container.y = Game.SB_OFFSET_Y;\r\n\r\n\t\t\tthis.mask\r\n\t\t\t\t.clear()\r\n\t\t\t\t.rect(\r\n\t\t\t\t\t(Game.MASTER_CONTAINER.h * (4 / 3 - 16 / 9)) / 2,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t(Game.MASTER_CONTAINER.h * 16) / 9,\r\n\t\t\t\t\tGame.MASTER_CONTAINER.h,\r\n\t\t\t\t)\r\n\t\t\t\t.fill(0xffffff);\r\n\t\t}\r\n\r\n\t\tif (!Game.IS_STORYBOARD) return;\r\n\r\n\t\tStoryboard.sprites.forEach((sprite) => sprite.draw(timestamp));\r\n\t\t// Storyboard.filtered.forEach((spriteInfo) => Storyboard.sprites[spriteInfo.idx].draw(timestamp));\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Game } from \"./Game\";\r\nimport {loadParallel} from \"./Utils.js\";\r\n\r\nexport class User {\r\n    static container = new PIXI.Container();\r\n    static graphics = new PIXI.Graphics();\r\n    static username = new PIXI.Text({\r\n        style: {\r\n            fontFamily: \"Torus\",\r\n            fontWeight: 500,\r\n            fontSize: 16 ,\r\n            fill: 0xffffff,\r\n            wordWrap: true,\r\n        },\r\n    });\r\n    static mods = [];\r\n    static modsContainer = new PIXI.Container();\r\n    static textures = {};\r\n\r\n    static async init() {\r\n        const metrics = PIXI.CanvasTextMetrics.measureText(\"a\", this.username.style);\r\n        this.username.x = 10 ;\r\n        this.username.y = (40  - metrics.height) / 2;\r\n\r\n        this.container.label = \"User\";\r\n        this.container.x = 10 ;\r\n        this.container.y = Game.WRAPPER.h - 20 ;\r\n        this.container.addChild(this.graphics, this.username, this.modsContainer);\r\n        this.container.visible = false;\r\n\r\n        await loadParallel((loadAsync) => {\r\n            for (const mod of [\r\n                \"DoubleTime\",\r\n                \"Easy\",\r\n                \"Flashlight\",\r\n                \"HalfTime\",\r\n                \"HardRock\",\r\n                \"Hidden\",\r\n                \"Nightcore\",\r\n                \"NoFail\",\r\n                \"Perfect\",\r\n                \"ScoreV2\",\r\n                \"SpunOut\",\r\n                \"SuddenDeath\",\r\n            ]) {\r\n                loadAsync(async () => this.textures[mod] = await PIXI.Assets.load({ src: `/static/mods/${mod}.png`, loadParser: \"loadTextures\" }));\r\n            }\r\n        })\r\n    }\r\n\r\n    static forceResize() {\r\n        let userHeight = 60 ;\r\n        if (innerWidth / innerHeight < 1) {\r\n            userHeight = 40 ;\r\n            this.container.x = 10 ;\r\n            this.container.y = Game.MASTER_CONTAINER.h + (50 - 10)  - userHeight;\r\n        } else {\r\n            this.container.x = 10 ;\r\n            this.container.y = Game.APP.renderer.height - (60 + 60 + 10) ;\r\n        }\r\n\r\n        this.username.style = {\r\n            fontFamily: \"Torus\",\r\n            fontWeight: 500,\r\n            fontSize: innerWidth / innerHeight < 1 ? 12  : 16 ,\r\n            fill: 0xffffff,\r\n            wordWrap: true,\r\n        };\r\n        const metrics = PIXI.CanvasTextMetrics.measureText(this.username.text, this.username.style);\r\n        this.username.x = 20 ;\r\n        this.username.y = (userHeight - metrics.height) / 2;\r\n\r\n        this.mods.forEach((sprite, idx) => {\r\n            sprite.width = (innerWidth / innerHeight < 1 ? 21.25 : 42.5) ;\r\n            sprite.height = (innerWidth / innerHeight < 1 ? 20 : 40) ;\r\n            sprite.x = idx * (innerWidth / innerHeight < 1 ? 10 : 20) ;\r\n            // sprite.y = 40  / 2;\r\n        });\r\n        this.modsContainer.x = 30  + metrics.width;\r\n        this.modsContainer.y = (userHeight - (innerWidth / innerHeight < 1 ? 20 : 40) ) / 2;\r\n\r\n        this.graphics\r\n            .clear()\r\n            .roundRect(0, 0, 40  + metrics.width + this.modsContainer.width, userHeight, 5 )\r\n            .fill({ color: 0x000000, alpha: 0.5 });\r\n    }\r\n\r\n    static resize() {\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.forceResize();\r\n    }\r\n\r\n    static async updateInfo(userInfo) {\r\n        console.log(userInfo);\r\n        if (!userInfo) {\r\n            this.container.visible = false;\r\n            return;\r\n        }\r\n\r\n        this.container.visible = true;\r\n\r\n        this.username.text = userInfo.username;\r\n\r\n        this.modsContainer.removeChildren();\r\n        this.mods = userInfo.mods.map((mod) => {\r\n            const sprite = new PIXI.Sprite();\r\n            sprite.texture = this.textures[mod];\r\n            this.modsContainer.addChild(sprite);\r\n\r\n            return sprite;\r\n        });\r\n\r\n        this.forceResize();\r\n    }\r\n}\r\n","import { Game } from \"../Game.js\";\r\nimport { Timestamp } from \"../Timestamp.js\";\r\nimport { Timeline } from \"../Timeline/Timeline.js\";\r\nimport { ProgressBar } from \"../Progress.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { HitCircle } from \"./HitCircle.js\";\r\nimport { Slider } from \"./Slider.js\";\r\nimport { Spinner } from \"./Spinner.js\";\r\nimport { handleCanvasDrag } from \"../DragWindow.js\";\r\nimport { Fixed, Clamp, binarySearch, binarySearchNearest } from \"../Utils.js\";\r\nimport { ScoreParser } from \"../ScoreParser.js\";\r\nimport { TimingPanel } from \"../TimingPanel.js\";\r\nimport { HitSample } from \"../Audio.js\";\r\nimport { MetadataPanel } from \"../SidePanel.js\";\r\nimport { FullscreenButton, PlayContainer } from \"../PlayButtons.js\";\r\nimport { BPM } from \"../BPM.js\";\r\nimport { frameData } from \"../FPSSystem.js\";\r\nimport * as TWEEN from \"@tweenjs/tween.js\";\r\nimport { Background } from \"../Background.js\";\r\nimport { Recorder } from \"../Record.js\";\r\nimport { Storyboard } from \"../Storyboard/Storyboard.js\";\r\nimport { User } from \"../User.js\";\r\n\r\nexport class ObjectsController {\r\n    hitCirclesList;\r\n    slidersList;\r\n    objectsList;\r\n    judgementList = [];\r\n    drawTime;\r\n    coloursList;\r\n    breakPeriods;\r\n    currentColor;\r\n    coloursObject;\r\n    lastTimestamp = 0;\r\n    lastTime = 0;\r\n    tempW = Game.WIDTH;\r\n    tempH = Game.HEIGHT;\r\n\r\n    filtered = [];\r\n    selected = [];\r\n\r\n    addTop = [];\r\n    addBack = [];\r\n    removed = [];\r\n    addedFp = [];\r\n    fpBoundary = [];\r\n    removedFp = [];\r\n\r\n    _in = [];\r\n\r\n    static CURRENT_BPM;\r\n    static CURRENT_SV;\r\n\r\n    static requestID = null;\r\n    static lastTimestamp = 0;\r\n    static lastRenderTime = 0;\r\n\r\n    static sumMS = 0;\r\n\r\n    // static preempt = 0;\r\n\r\n    compare(a, b) {\r\n        if (a.obj.time < b.obj.time) {\r\n            return -1;\r\n        }\r\n        if (a.obj.time > b.obj.time) {\r\n            return 1;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n    constructor(objectsList, coloursList, breakPeriods) {\r\n        this.objectsList = objectsList.sort(this.compare);\r\n        this.hitCirclesList = objectsList.filter((o) => o.obj instanceof HitCircle || o.obj instanceof Spinner);\r\n        this.slidersList = objectsList.filter((o) => o.obj instanceof Slider);\r\n\r\n        this.breakPeriods = breakPeriods;\r\n    }\r\n\r\n    updateOrder() {\r\n        this.removed.forEach((object) => {\r\n            // this.objectsList[object.idx].obj.obj.visible = false;\r\n            Game.CONTAINER.removeChild(this.objectsList[object.idx].obj.obj);\r\n\r\n            if (this.objectsList[object.idx].obj.approachCircleObj) {\r\n                Game.CONTAINER.removeChild(this.objectsList[object.idx].obj.approachCircleObj.obj);\r\n                // this.objectsList[object.idx].obj.approachCircleObj.obj.visible = false;\r\n            }\r\n        });\r\n\r\n        this.addBack.forEach((object) => {\r\n            // this.objectsList[object.idx].obj.obj.visible = true;\r\n            Game.CONTAINER.addChildAt(this.objectsList[object.idx].obj.obj, 0);\r\n            if (this.objectsList[object.idx].obj.approachCircleObj) {\r\n                Game.CONTAINER.addChild(this.objectsList[object.idx].obj.approachCircleObj.obj);\r\n                // this.objectsList[object.idx].obj.approachCircleObj.obj.visible = true;\r\n            }\r\n        });\r\n\r\n        this.addTop.forEach((object) => {\r\n            // this.objectsList[object.idx].obj.obj.visible = true;\r\n            Game.CONTAINER.addChild(this.objectsList[object.idx].obj.obj);\r\n            if (this.objectsList[object.idx].obj.approachCircleObj) {\r\n                Game.CONTAINER.addChild(this.objectsList[object.idx].obj.approachCircleObj.obj);\r\n                // this.objectsList[object.idx].obj.approachCircleObj.obj.visible = true;\r\n            }\r\n        });\r\n\r\n        this.addedFp.forEach((object) => {\r\n            if (this.objectsList[object.idx].obj.followPoint) {\r\n                Game.CONTAINER.addChild(this.objectsList[object.idx].obj.followPoint.container);\r\n            }\r\n        });\r\n\r\n        this.removedFp.forEach((object) => {\r\n            if (this.objectsList[object.idx].obj.followPoint) {\r\n                Game.CONTAINER.removeChild(this.objectsList[object.idx].obj.followPoint.container);\r\n            }\r\n        });\r\n    }\r\n\r\n    playHitsounds(timestamp, lastTimestamp) {\r\n        if (ProgressBar.IS_DRAGGING) return;\r\n        this.filtered.forEach((object) => {\r\n            this.objectsList[object.idx].obj.playHitsound(timestamp, lastTimestamp);\r\n            if (this.objectsList[object.idx].obj instanceof Slider) {\r\n                this.objectsList[object.idx].obj.ticks.forEach((tick) => tick.playHitsound(timestamp, lastTimestamp));\r\n                this.objectsList[object.idx].obj.revArrows.forEach((arrow) => arrow.playHitsound(timestamp, lastTimestamp));\r\n            }\r\n        });\r\n    }\r\n\r\n    draw(timestamp, staticDraw) {\r\n        if (timestamp > Game.BEATMAP_FILE.audioNode.duration) {\r\n            Game.BEATMAP_FILE.audioNode.pause();\r\n        }\r\n\r\n        if (Game.DID_MOVE && Game.CURRENT_X !== -1 && Game.CURRENT_Y !== -1) {\r\n            Game.DRAGGING_END = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n            handleCanvasDrag(false, true);\r\n        }\r\n\r\n        const currentSV = Beatmap.findNearestTimingPoint(timestamp, \"timingPointsList\", true);\r\n        const currentBPM = Beatmap.findNearestTimingPoint(timestamp, \"beatStepsList\", true);\r\n        const currentPoint = Beatmap.findNearestTimingPoint(timestamp, \"mergedPoints\", true);\r\n\r\n        if (currentPoint.isKiai !== BPM.IS_KIAI) {\r\n            BPM.IS_KIAI = currentPoint.isKiai;\r\n        }\r\n\r\n        if (JSON.stringify(ObjectsController.CURRENT_BPM) !== JSON.stringify(currentBPM)) {\r\n            BPM.BPM_TEXT.text = `${Fixed(60000 / currentBPM.beatstep, 2)}BPM`;\r\n            ObjectsController.CURRENT_BPM = currentBPM;\r\n\r\n            BPM.IS_KIAI = currentPoint.isKiai;\r\n        }\r\n\r\n        if (JSON.stringify(currentSV) !== JSON.stringify(ObjectsController.CURRENT_SV)) {\r\n            if (ObjectsController.CURRENT_SV?.svMultiplier !== currentSV?.svMultiplier) BPM.SV_TEXT.text = `${currentSV.svMultiplier.toFixed(2)}x`;\r\n            ObjectsController.CURRENT_SV = currentSV;\r\n            TimingPanel.scrollTo(timestamp);\r\n        }\r\n\r\n        const selected = [];\r\n        Game.SELECTED.forEach((time) => {\r\n            const objIndex = binarySearch(this.objectsList, time, (element, value) => {\r\n                if (element.obj.time === value) return 0;\r\n                if (element.obj.time < value) return -1;\r\n                if (element.obj.time > value) return 1;\r\n            });\r\n\r\n            if (objIndex === -1) return;\r\n\r\n            const o = this.objectsList[objIndex];\r\n            selected.push(o);\r\n        });\r\n\r\n        this.selected.forEach((object) => {\r\n            if (selected.includes(object) || object.obj instanceof Spinner) return;\r\n            Game.CONTAINER.removeChild(object.obj.selected);\r\n\r\n            if (object.obj instanceof Slider) {\r\n                Game.CONTAINER.removeChild(object.obj.hitCircle.selected);\r\n                Game.CONTAINER.removeChild(object.obj.selectedSliderEnd);\r\n            }\r\n        });\r\n\r\n        selected.forEach((object) => {\r\n            if (this.selected.includes(object) || object.obj instanceof Spinner) return;\r\n            Game.CONTAINER.addChild(object.obj.selected);\r\n\r\n            if (object.obj instanceof Slider) {\r\n                Game.CONTAINER.addChild(object.obj.hitCircle.selected);\r\n                Game.CONTAINER.addChild(object.obj.selectedSliderEnd);\r\n            }\r\n        });\r\n\r\n        this.selected = selected;\r\n        this.selected.forEach((object) => {\r\n            if (object.obj instanceof Spinner) return;\r\n            object.obj.handleSkinChange();\r\n        });\r\n\r\n        if (\r\n            this.breakPeriods.some(\r\n                (period) =>\r\n                    period[0] < timestamp &&\r\n                    period[1] > timestamp &&\r\n                    (period[1] < ObjectsController.lastTimestamp || period[0] > ObjectsController.lastTimestamp)\r\n            )\r\n        ) {\r\n            const alpha = Game.ALPHA;\r\n\r\n            new TWEEN.Tween({\r\n                alpha,\r\n            })\r\n                .to({ alpha: alpha * 0.7 }, 1000)\r\n                .easing(TWEEN.Easing.Cubic.Out)\r\n                .onUpdate((object) => {\r\n                    Background.changeOpacity(object.alpha);\r\n                })\r\n                .start();\r\n        } else if (\r\n            this.breakPeriods.some(\r\n                (period) =>\r\n                    period[0] < ObjectsController.lastTimestamp &&\r\n                    period[1] > ObjectsController.lastTimestamp &&\r\n                    (period[1] < timestamp || period[0] > timestamp)\r\n            )\r\n        ) {\r\n            const alpha = Game.ALPHA;\r\n\r\n            new TWEEN.Tween({\r\n                alpha: alpha * 0.7,\r\n            })\r\n                .to({ alpha }, 1000)\r\n                .easing(TWEEN.Easing.Cubic.Out)\r\n                .onUpdate((object) => {\r\n                    Background.changeOpacity(object.alpha);\r\n                })\r\n                .start();\r\n        }\r\n\r\n        // judgements.forEach((object) => {\r\n        //     object.draw(timestamp);\r\n        // });\r\n\r\n        this.filtered.forEach((object) => {\r\n            // selected.forEach((o) => o.obj.drawSelected());\r\n            this.objectsList[object.idx].obj.draw(Math.max(timestamp, 0));\r\n            this.objectsList[object.idx].obj.followPoint?.draw(timestamp);\r\n        });\r\n\r\n        this.fpBoundary.forEach((object) => {\r\n            // selected.forEach((o) => o.obj.drawSelected());\r\n            this.objectsList[object.idx].obj.followPoint?.draw(timestamp);\r\n        });\r\n\r\n        this.selected.forEach((object) => {\r\n            if (object.obj instanceof Spinner) return;\r\n            object.obj.drawSelected();\r\n        });\r\n\r\n        if (ScoreParser.CURSOR_DATA) {\r\n            let posInfoIndex = binarySearchNearest(ScoreParser.CURSOR_DATA.slice(0, -1), timestamp, (cursorData, timestamp) => {\r\n                if (cursorData.time < timestamp) return -1;\r\n                if (cursorData.time > timestamp) return 1;\r\n                return 0;\r\n            });\r\n\r\n            while (posInfoIndex > 0 && ScoreParser.CURSOR_DATA[posInfoIndex].time > timestamp) posInfoIndex--;\r\n\r\n            const current = ScoreParser.CURSOR_DATA[posInfoIndex];\r\n            const next = ScoreParser.CURSOR_DATA[posInfoIndex + 1] ?? ScoreParser.CURSOR_DATA[posInfoIndex];\r\n\r\n            const lerp_x = current.x + Clamp((timestamp - current.time) / (next.time - current.time), 0, 1) * (next.x - current.x);\r\n            const lerp_y = current.y + Clamp((timestamp - current.time) / (next.time - current.time), 0, 1) * (next.y - current.y);\r\n\r\n            if (posInfoIndex !== -1) {\r\n                // Game.CURSOR.x = Game.OFFSET_X + lerp_x * (Game.WIDTH / 512);\r\n                // Game.CURSOR.y = Game.OFFSET_Y + lerp_y * (Game.WIDTH / 512);\r\n\r\n                Game.CURSOR.update(posInfoIndex, lerp_x, lerp_y);\r\n            }\r\n        }\r\n\r\n        ObjectsController.lastTimestamp = timestamp;\r\n    }\r\n\r\n    reinitializeAllSliders() {\r\n        const start = performance.now();\r\n        this.objectsList.forEach((o) => {\r\n            if (o.obj instanceof Slider) o.obj.reInitialize();\r\n        });\r\n        console.log(`ReInitialize all sliders took: ${performance.now() - start}ms`);\r\n    }\r\n\r\n    static render() {\r\n        Game.appResize();\r\n        Timeline.resize();\r\n\r\n        const deltaMS = performance.now() - this.lastRenderTime;\r\n        this.lastRenderTime = performance.now();\r\n\r\n        const currentAudioTime = Game.BEATMAP_FILE?.audioNode?.getCurrentTime();\r\n\r\n        Timestamp.update(currentAudioTime ?? 0);\r\n\r\n        if (currentAudioTime && Game.BEATMAP_FILE?.beatmapRenderData?.objectsController) {\r\n            Game.BEATMAP_FILE.beatmapRenderData.objectsController.draw(currentAudioTime);\r\n\r\n            if (!Beatmap.hasILLEGAL) Timeline.draw(currentAudioTime);\r\n        }\r\n\r\n        BPM.update(currentAudioTime ?? 0);\r\n        PlayContainer.update(currentAudioTime ?? 0);\r\n        ProgressBar.update(currentAudioTime ?? 0);\r\n        FullscreenButton.redraw();\r\n        TimingPanel.update(currentAudioTime ?? 0);\r\n        MetadataPanel.update(currentAudioTime ?? 0);\r\n        Storyboard.draw(currentAudioTime ?? 0);\r\n        User.resize();\r\n\r\n        Game.EMIT_STACK.pop();\r\n\r\n        // ObjectsController.sumMS += frameData.deltaMS;\r\n        // if (ObjectsController.sumMS < 4) return;\r\n\r\n        // ObjectsController.sumMS = 0;\r\n        Game.FPS.text = `${Math.round(frameData.fps)}fps\\n${frameData.deltaMS.toFixed(2)}ms`;\r\n\r\n        // if (Recorder.IS_RECORDING && Recorder.VIDEO_STREAM) {\r\n        //     Recorder.VIDEO_STREAM.getVideoTracks()[0].requestFrame();\r\n        // }\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Game } from \"./Game\";\r\nimport { Component } from \"./WindowManager\";\r\nimport * as TWEEN from \"@tweenjs/tween.js\";\r\nimport * as d3 from \"d3\";\r\nimport bezier from \"bezier-easing\";\r\nimport { TimingPanel } from \"./TimingPanel\";\r\nimport { Timeline } from \"./Timeline/Timeline\";\r\nimport { MetadataPanel } from \"./SidePanel\";\r\nimport { ObjectsController } from \"./HitObjects/ObjectsController\";\r\n\r\nexport function toggleTimingPanel() {\r\n    TimingPanel.ON_ANIM = true;\r\n\r\n    let result = {\r\n        game: 0,\r\n        timing: 0,\r\n        metadata: 0,\r\n    };\r\n\r\n    if (!Game.SHOW_TIMING_PANEL) {\r\n        result = {\r\n            game: innerWidth < innerHeight ? 0 : 400,\r\n            timing: innerWidth < innerHeight ? Game.WRAPPER.h * 0.75 : 400,\r\n            metadata: 0,\r\n        };\r\n\r\n        document.querySelector(\".mapBG\").style.width = `calc(100% - 410px)`;\r\n    }\r\n\r\n    if (Game.SHOW_TIMING_PANEL) {\r\n        result = {\r\n            game: 0,\r\n            timing: 0,\r\n            metadata: 0,\r\n        };\r\n\r\n        document.querySelector(\".mapBG\").style.width = ``;\r\n    }\r\n\r\n    Game.SHOW_METADATA = false;\r\n    Game.SHOW_TIMING_PANEL = !Game.SHOW_TIMING_PANEL;\r\n\r\n    const easing = bezier(0, 0.4, 0, 1.0);\r\n\r\n    const tween = new TWEEN.Tween({\r\n        reduction: {\r\n            game: Game.REDUCTION,\r\n            timing: TimingPanel.SIZE_X,\r\n            metadata: MetadataPanel.SIZE_X,\r\n        },\r\n    })\r\n        .easing((t) => {\r\n            return easing(t);\r\n        })\r\n        .to({ reduction: result }, 200)\r\n        .onUpdate((obj) => {\r\n            Game.REDUCTION = obj.reduction.game;\r\n            MetadataPanel.SIZE_X = obj.reduction.metadata;\r\n            TimingPanel.SIZE_X = obj.reduction.timing;\r\n            TimingPanel.ON_ANIM = true;\r\n\r\n            Game.EMIT_STACK.push(true);\r\n        })\r\n        .onComplete(() => {\r\n            TimingPanel.ON_ANIM = false;\r\n        })\r\n        .start();\r\n}\r\n\r\nexport class BPM {\r\n    static BPM_TEXT;\r\n    static SV_TEXT;\r\n\r\n    static _IS_KIAI = false;\r\n\r\n    static get IS_KIAI() {\r\n        return this._IS_KIAI;\r\n    }\r\n\r\n    static set IS_KIAI(val) {\r\n        this._IS_KIAI = val;\r\n\r\n        if (val) {\r\n            const [r3, g3, b3] =\r\n                typeof Game.COLOR_PALETTES.primary3 === \"number\"\r\n                    ? [...Object.values(d3.rgb(`#${Game.COLOR_PALETTES.primary3.toString(16).padStart(6, \"0\")}`)).map((val) => val / 1.0)]\r\n                    : Game.COLOR_PALETTES.primary3\r\n                          .slice(1)\r\n                          .match(/.{2}/g)\r\n                          .map((val) => parseInt(val, 16));\r\n\r\n            const [r4, g4, b4] =\r\n                typeof Game.COLOR_PALETTES.primary4 === \"number\"\r\n                    ? [...Object.values(d3.rgb(`#${Game.COLOR_PALETTES.primary5.toString(16).padStart(6, \"0\")}`)).map((val) => val / 1.0)]\r\n                    : Game.COLOR_PALETTES.primary4\r\n                          .slice(1)\r\n                          .match(/.{2}/g)\r\n                          .map((val) => parseInt(val, 16));\r\n\r\n            // console.log(r3, g3, b3);\r\n            // console.log(r4, g4, b4);\r\n            // console.log(ObjectsController.CURRENT_BPM.beatstep);\r\n\r\n            this.TWEEN = new TWEEN.Tween({\r\n                r: r4,\r\n                g: g4,\r\n                b: b4,\r\n            })\r\n                .to(\r\n                    {\r\n                        r: r3,\r\n                        g: g3,\r\n                        b: b3,\r\n                    },\r\n                    ObjectsController.CURRENT_BPM.beatstep\r\n                )\r\n                .onUpdate(({ r, g, b }) => {\r\n                    const color = (r << 16) | (g << 8) | b;\r\n                    this.MASTER_CONTAINER.color = color;\r\n                })\r\n                .easing(TWEEN.Easing.Sinusoidal.InOut)\r\n                .repeat(Infinity)\r\n                .start();\r\n\r\n            return;\r\n        }\r\n\r\n        if (!this.TWEEN) return;\r\n\r\n        this.TWEEN.stop();\r\n        this.TWEEN = null;\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n    }\r\n\r\n    static TWEEN = null;\r\n\r\n    static init() {\r\n        this.MASTER_CONTAINER = new Component(110, Game.WRAPPER.h - 60, 180, 60);\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n        this.MASTER_CONTAINER.alpha = 1;\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"click\", () => {\r\n            toggleTimingPanel();\r\n        });\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"tap\", () => toggleTimingPanel());\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"mouseenter\", () => {\r\n            this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary4;\r\n        });\r\n\r\n        this.MASTER_CONTAINER.masterContainer.on(\"mouseleave\", () => {\r\n            this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n        });\r\n\r\n        this.BPM_TEXT = new PIXI.Text({\r\n            text: \"0BPM\",\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontSize: 16,\r\n                fontWeight: 500,\r\n                fill: 0xffffff,\r\n            },\r\n        });\r\n\r\n        this.BPM_TEXT.anchor.set(1, 0.5);\r\n        this.BPM_TEXT.x = this.MASTER_CONTAINER.w / 2 - 5;\r\n        this.BPM_TEXT.y = this.MASTER_CONTAINER.h / 2;\r\n\r\n        this.FLAIR = new PIXI.Graphics().roundRect(this.MASTER_CONTAINER.w / 2 + 5, this.MASTER_CONTAINER.h / 2 - 10, 50, 20).fill(0x9beea7);\r\n\r\n        this.SV_TEXT = new PIXI.Text({\r\n            text: \"0.00x\",\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontSize: 12,\r\n                fontWeight: 500,\r\n                fill: 0x202020,\r\n            },\r\n        });\r\n\r\n        this.SV_TEXT.anchor.set(0.5, 0.5);\r\n        this.SV_TEXT.x = this.MASTER_CONTAINER.w / 2 + 5 + 25;\r\n        this.SV_TEXT.y = this.MASTER_CONTAINER.h / 2;\r\n\r\n        this.MASTER_CONTAINER.container.addChild(this.BPM_TEXT);\r\n        this.MASTER_CONTAINER.container.addChild(this.FLAIR);\r\n        this.MASTER_CONTAINER.container.addChild(this.SV_TEXT);\r\n    }\r\n\r\n    static forceUpdate() {\r\n        if (!this.MASTER_CONTAINER) return;\r\n\r\n        if (innerWidth / innerHeight < 1) {\r\n            this.MASTER_CONTAINER.x = Game.WRAPPER.w / 2;\r\n            this.MASTER_CONTAINER.y = Game.STATS.container.y + Game.STATS.container.height + 60 - Timeline.HEIGHT_REDUCTION;\r\n            this.MASTER_CONTAINER.w = Game.WRAPPER.w / 2;\r\n        } else {\r\n            this.MASTER_CONTAINER.x = 110;\r\n            this.MASTER_CONTAINER.y = Game.WRAPPER.h - 60;\r\n            this.MASTER_CONTAINER.w = 180;\r\n        }\r\n        this.MASTER_CONTAINER.h = 60;\r\n\r\n        this.BPM_TEXT.x = this.MASTER_CONTAINER.w / 2 - 5;\r\n        this.BPM_TEXT.y = this.MASTER_CONTAINER.h / 2;\r\n        this.BPM_TEXT.style.fontSize = 16;\r\n        // this.BPM_TEXT.resolution = devicePixelRatio;\r\n\r\n        this.FLAIR.clear()\r\n            .roundRect(this.MASTER_CONTAINER.w / 2 + 5, this.MASTER_CONTAINER.h / 2 - 10, 50, 20)\r\n            .fill(0x9beea7);\r\n\r\n        this.SV_TEXT.x = this.MASTER_CONTAINER.w / 2 + 5 + 25;\r\n        this.SV_TEXT.y = this.MASTER_CONTAINER.h / 2;\r\n        this.SV_TEXT.style.fontSize = 12;\r\n        // this.SV_TEXT.resolution = devicePixelRatio;\r\n    }\r\n\r\n    static update() {\r\n        if (Game.IS_FULLSCREEN) {\r\n            this.MASTER_CONTAINER.masterContainer.visible = Game.IS_HOVERING_PROGRESS;\r\n        } else {\r\n            this.MASTER_CONTAINER.masterContainer.visible = true;\r\n        }\r\n\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.forceUpdate();\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Component } from \"./WindowManager\";\r\nimport { Game } from \"./Game\";\r\nimport { fullscreenToggle, go, playToggle } from \"./ProgressBar\";\r\nimport { toggleMetadataPanel } from \"./SidePanel\";\r\nimport { Container } from \"./UI/Container\";\r\nimport { FlexBox } from \"./UI/FlexBox\";\r\nimport { BPM } from \"./BPM\";\r\nimport {loadParallel} from \"./Utils.js\";\r\n\r\nexport class Button {\r\n    isAlt = false;\r\n    container;\r\n\r\n    async init(x, y, imgURL, altImgURL) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this._color = Game.COLOR_PALETTES.primary2;\r\n        this.imgURL = imgURL;\r\n        this.altImgURL = altImgURL ?? imgURL;\r\n\r\n        const [texture, altTexture] = await Promise.all([\r\n            PIXI.Assets.load(this.imgURL),\r\n            altImgURL ? PIXI.Assets.load(this.altImgURL) : Promise.resolve(undefined)\r\n        ])\r\n\r\n        this.texture = texture;\r\n        this.altTexture = altTexture ?? texture;\r\n\r\n        this.sprite = new PIXI.Sprite(this.texture);\r\n        this.sprite.scale.set(this.imgURL === \"static/info.png\" ? 1 : 0.75);\r\n        this.sprite.anchor.set(0.5);\r\n        this.sprite.x = 30;\r\n        this.sprite.y = 30;\r\n\r\n        this._onclick = () => {};\r\n\r\n        this.container = new PIXI.Container();\r\n        this.graphics = new PIXI.Graphics();\r\n        // this.graphics.x = this.x;\r\n        // this.graphics.y = this.y;\r\n\r\n        this.redraw();\r\n\r\n        this.container.eventMode = \"dynamic\";\r\n        this.container.on(\"mouseenter\", () => (this.color = Game.COLOR_PALETTES.primary3));\r\n        this.container.on(\"mouseleave\", () => (this.color = Game.COLOR_PALETTES.primary2));\r\n\r\n        this.container.addChild(this.graphics, this.sprite);\r\n    }\r\n\r\n    constructor() {}\r\n\r\n    get color() {\r\n        return this._color;\r\n    }\r\n\r\n    set color(val) {\r\n        this._color = val;\r\n        this.redraw();\r\n    }\r\n\r\n    get onclick() {\r\n        return this._onclick;\r\n    }\r\n\r\n    get width() {\r\n        return 60;\r\n    }\r\n\r\n    get height() {\r\n        return 60;\r\n    }\r\n\r\n    set onclick(fn) {\r\n        this.container.on(\"click\", (e) => {\r\n            fn(e);\r\n            this.redraw();\r\n        });\r\n        this.container.on(\"tap\", (e) => {\r\n            fn(e);\r\n            this.redraw();\r\n        });\r\n        this._onclick = fn;\r\n    }\r\n\r\n    redraw() {\r\n        this.graphics.clear().rect(0, 0, 60, 60).fill(this.color);\r\n\r\n        this.container.x = this.x;\r\n        this.container.y = this.y;\r\n\r\n        this.sprite.scale.set(this.imgURL === \"static/info.png\" ? 1 : 0.75);\r\n        this.sprite.x = 30;\r\n        this.sprite.y = 30;\r\n    }\r\n}\r\n\r\nexport class PlayContainer {\r\n    static async init() {\r\n        this.MASTER_CONTAINER = new Container();\r\n        this.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary2;\r\n        this.MASTER_CONTAINER.alpha = 1;\r\n        this.MASTER_CONTAINER.placeItemsCenter = true;\r\n\r\n        await loadParallel((loadAsync) => {\r\n            this.flex = new FlexBox();\r\n\r\n            this.playButton = new Button();\r\n            loadAsync(async () => {\r\n                await this.playButton.init(120, 0, \"static/play.svg\", \"static/pause.svg\");\r\n                this.playButton.onclick = () => playToggle();\r\n            })\r\n\r\n            this.prevButton = new Button();\r\n            loadAsync(async () => {\r\n                await this.prevButton.init(60, 0, \"static/step-back.svg\");\r\n                this.prevButton.onclick = () => go(null, false);\r\n            })\r\n\r\n            this.nextButton = new Button();\r\n            loadAsync(async () => {\r\n                await this.nextButton.init(180, 0, \"static/step-forward.svg\");\r\n                this.nextButton.onclick = () => go(null, true);\r\n            })\r\n\r\n            this.infoButton = new Button();\r\n            loadAsync(async () => {\r\n                await this.infoButton.init(0, 0, \"static/info.svg\");\r\n                this.infoButton.onclick = () => toggleMetadataPanel();\r\n            })\r\n        });\r\n\r\n        this.flex.addChild(this.infoButton.container);\r\n        this.flex.addChild(this.prevButton.container);\r\n        this.flex.addChild(this.playButton.container);\r\n        this.flex.addChild(this.nextButton.container);\r\n\r\n        this.MASTER_CONTAINER.addChild(this.flex.container);\r\n\r\n        this.forceUpdate();\r\n    }\r\n\r\n    static forceUpdate() {\r\n        if (!this.MASTER_CONTAINER) return;\r\n\r\n        if (innerWidth / innerHeight < 1) {\r\n            this.MASTER_CONTAINER.x = 0;\r\n            this.MASTER_CONTAINER.y = BPM.MASTER_CONTAINER.y + BPM.MASTER_CONTAINER.h;\r\n            this.MASTER_CONTAINER.width = Game.WRAPPER.w;\r\n        } else {\r\n            this.MASTER_CONTAINER.x = 290;\r\n            this.MASTER_CONTAINER.y = Game.WRAPPER.h - 60;\r\n            this.MASTER_CONTAINER.width = 240;\r\n        }\r\n\r\n        this.MASTER_CONTAINER.container.h = 60;\r\n\r\n        this.playButton.redraw();\r\n        this.prevButton.redraw();\r\n        this.nextButton.redraw();\r\n        this.infoButton.redraw();\r\n\r\n        this.MASTER_CONTAINER.update();\r\n    }\r\n\r\n    static update() {\r\n        if (Game.IS_FULLSCREEN) {\r\n            this.MASTER_CONTAINER.container.visible = Game.IS_HOVERING_PROGRESS;\r\n        } else {\r\n            this.MASTER_CONTAINER.container.visible = true;\r\n        }\r\n\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        this.forceUpdate();\r\n    }\r\n}\r\n\r\nexport class FullscreenButton {\r\n    static async init() {\r\n        this.obj = new Button();\r\n        await this.obj.init(Game.WRAPPER.w - 60, Game.WRAPPER.h - 60, \"static/maximize.svg\", \"static/minimize.svg\");\r\n        this.obj.onclick = () => fullscreenToggle();\r\n        this.obj.container.label = \"Fullscreen Button\";\r\n        this.obj.color = Game.COLOR_PALETTES.primary2;\r\n    }\r\n\r\n    static redraw() {\r\n        if (Game.IS_FULLSCREEN) {\r\n            this.obj.container.visible = Game.IS_HOVERING_PROGRESS;\r\n        } else {\r\n            this.obj.container.visible = true;\r\n        }\r\n\r\n        if (Game.EMIT_STACK.length === 0) return;\r\n        if (!this.obj) return;\r\n\r\n        this.obj.x = Game.WRAPPER.w - 60;\r\n\r\n        if (innerWidth / innerHeight < 1) {\r\n            this.obj.y = PlayContainer.MASTER_CONTAINER.y;\r\n        } else {\r\n            this.obj.y = Game.WRAPPER.h - 60;\r\n        }\r\n\r\n        this.obj.redraw();\r\n    }\r\n}\r\n","import { Beatmap } from \"./Beatmap.js\";\r\nimport { Clamp } from \"./Utils.js\";\r\nimport { Notification } from \"./Notification.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport TWEEN, { Tween } from \"@tweenjs/tween.js\";\r\nimport { FullscreenButton, PlayContainer } from \"./PlayButtons.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\n\r\nexport function fullscreenToggle() {\r\n    let result = 0;\r\n    let old = 0;\r\n\r\n    if (!Game.IS_FULLSCREEN) {\r\n        FullscreenButton.obj.sprite.texture = FullscreenButton.obj.altTexture;\r\n        document.body.style.padding = 0;\r\n        document.querySelector(\"#inputContainer\").style.maxHeight = 0;\r\n        document.querySelector(\"#inputContainer\").style.padding = 0;\r\n        document.querySelector(\"#inputContainer\").style.margin = 0;\r\n\r\n        result = 60;\r\n        old = 0 + (Timeline.SHOW_GREENLINE ? -30 : 0);\r\n    } else {\r\n        FullscreenButton.obj.sprite.texture = FullscreenButton.obj.texture;\r\n        document.body.style.padding = \"\";\r\n        document.querySelector(\"#inputContainer\").style.maxHeight = \"400px\";\r\n        document.querySelector(\"#inputContainer\").style.padding = \"\";\r\n        document.querySelector(\"#inputContainer\").style.margin = \"\";\r\n\r\n        result = 0 + (Timeline.SHOW_GREENLINE ? -30 : 0);\r\n        old = 60 ;\r\n    }\r\n\r\n    new TWEEN.Tween({\r\n        height: old,\r\n    })\r\n        .to(\r\n            {\r\n                height: result,\r\n            },\r\n            200\r\n        )\r\n        .easing(TWEEN.Easing.Quadratic.InOut)\r\n        .onUpdate(({ height }) => {\r\n            Timeline.HEIGHT_REDUCTION = height;\r\n        })\r\n        .start();\r\n\r\n    Game.IS_FULLSCREEN = !Game.IS_FULLSCREEN;\r\n    Game.EMIT_STACK.push(true);\r\n\r\n    const url = new URL(window.location.href);\r\n    url.searchParams.set(\"fullscreen\", Game.IS_FULLSCREEN.toString());\r\n    history.replaceState({ fullscreen: Game.IS_FULLSCREEN }, document.title, `${url.pathname}${url.search}${window.location.hash}`);\r\n}\r\n\r\nexport function playToggle(ele) {\r\n    ele?.blur();\r\n    if (!Game.BEATMAP_FILE?.audioNode?.gainNode || !Game.BEATMAP_FILE?.audioNode?.buf) return;\r\n\r\n    if (!Game.BEATMAP_FILE.audioNode.isPlaying) {\r\n        // document.querySelector(\"#playButton\").style.backgroundImage = \"\";\r\n        PlayContainer.playButton.sprite.texture = PlayContainer.playButton.altTexture;\r\n        Game.BEATMAP_FILE.audioNode.play();\r\n        return;\r\n    }\r\n\r\n    // document.querySelector(\"#playButton\").style.backgroundImage = \"url(/static/pause.png)\";\r\n    PlayContainer.playButton.sprite.texture = PlayContainer.playButton.texture;\r\n    Game.BEATMAP_FILE.audioNode.pause();\r\n}\r\n\r\nexport function parseTime(timestamp) {\r\n    const miliseconds = Math.floor(timestamp % 1000);\r\n    const seconds = Math.floor((timestamp / 1000) % 60);\r\n    const minutes = Math.floor(timestamp / 1000 / 60);\r\n\r\n    const milisecondDigits = miliseconds.toString().padStart(3, \"0\").split(\"\");\r\n    const secondDigits = seconds.toString().padStart(2, \"0\").split(\"\");\r\n    const minuteDigits = minutes.toString().padStart(2, \"0\").split(\"\");\r\n\r\n    return {\r\n        minutes: minuteDigits,\r\n        seconds: secondDigits,\r\n        miliseconds: milisecondDigits,\r\n    };\r\n}\r\n\r\nlet timeTween;\r\nlet expectedDestination = null;\r\n\r\nexport function setAudioTime(value) {\r\n    if (!Game.BEATMAP_FILE?.audioNode) return;\r\n\r\n    if (timeTween) timeTween.stop();\r\n    expectedDestination = value * Game.BEATMAP_FILE.audioNode.raw_buf.duration * 1000;\r\n\r\n    timeTween = new Tween({ time: Game.BEATMAP_FILE.audioNode.getCurrentTime() })\r\n        .easing(TWEEN.Easing.Sinusoidal.Out)\r\n        .to({ time: expectedDestination }, 100)\r\n        .onUpdate((obj) => {\r\n            Game.SHOULD_PLAY_HITSOUND = false;\r\n            Game.BEATMAP_FILE.audioNode.seekTo(obj.time);\r\n        })\r\n        .onComplete(() => {\r\n            expectedDestination = null;\r\n            Game.SHOULD_PLAY_HITSOUND = true;\r\n        })\r\n        .start();\r\n\r\n    // Game.BEATMAP_FILE.audioNode.seekTo(value * Game.BEATMAP_FILE.audioNode.buf.duration * 1000)\r\n}\r\n\r\nexport function go(precise, isForward) {\r\n    if (!Game.BEATMAP_FILE || !Game.BEATMAP_FILE.audioNode.isLoaded) return;\r\n    if (timeTween) timeTween.stop();\r\n    // expectedDestination = null;\r\n\r\n    let step = 1;\r\n    let side = isForward ? 1 : -1;\r\n    let currentBeatstep;\r\n    const current = expectedDestination ?? Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n    const isPlaying = Game.BEATMAP_FILE.audioNode.isPlaying;\r\n\r\n    if (Beatmap.beatStepsList.length) {\r\n        currentBeatstep = Beatmap.beatStepsList.findLast((timingPoint) => timingPoint.time <= current) ?? Beatmap.beatStepsList[0];\r\n        step = precise ? 1 : (currentBeatstep.beatstep / parseInt(Game.MAPPING.beatsnap)) * (!isForward && isPlaying ? 2 : 1);\r\n    }\r\n\r\n    const relativePosition = current - currentBeatstep.time;\r\n    const relativeTickPassed = Math.round(relativePosition / step);\r\n\r\n    const goTo = Clamp(Math.floor(currentBeatstep.time + (relativeTickPassed + side) * step), 0, Game.BEATMAP_FILE.audioNode.raw_buf.duration * 1000);\r\n    expectedDestination = goTo;\r\n\r\n    if (Game.BEATMAP_FILE.audioNode.isPlaying) {\r\n        Game.BEATMAP_FILE.audioNode.seekTo(goTo);\r\n        expectedDestination = null;\r\n\r\n        return;\r\n    }\r\n\r\n    timeTween = new Tween({ time: Game.BEATMAP_FILE.audioNode.getCurrentTime() })\r\n        .easing(TWEEN.Easing.Sinusoidal.Out)\r\n        .to({ time: goTo }, 100)\r\n        .onUpdate((obj) => {\r\n            Game.SHOULD_PLAY_HITSOUND = false;\r\n            Game.BEATMAP_FILE.audioNode.seekTo(obj.time);\r\n        })\r\n        .onComplete(() => {\r\n            expectedDestination = null;\r\n            Game.SHOULD_PLAY_HITSOUND = true;\r\n        })\r\n        .start();\r\n\r\n    // Game.BEATMAP_FILE.audioNode.seekTo(goTo);\r\n}\r\n// document.querySelector(\"#prevButton\").onclick = () => go(null, false);\r\n// document.querySelector(\"#playButton\").onclick = () => playToggle(document.querySelector(\"#playButton\"));\r\n// document.querySelector(\"#nextButton\").onclick = () => go(null, true);\r\n\r\nexport function copyUrlToClipboard() {\r\n    const origin = window.location.origin;\r\n    const currentTimestamp = Game.BEATMAP_FILE !== undefined ? parseInt(Game.BEATMAP_FILE.audioNode.getCurrentTime()) : 0;\r\n    const mapId = Beatmap.CURRENT_MAPID || \"\";\r\n    navigator.clipboard.writeText(`${origin}${!origin.includes(\"github.io\") ? \"\" : \"/beatmap-viewer-how\"}?b=${mapId}&t=${currentTimestamp}`);\r\n\r\n    new Notification({\r\n        message: \"Current preview timestamp copied\",\r\n    }).notify();\r\n}\r\ndocument.querySelector(\"#previewURL\").onclick = copyUrlToClipboard;\r\n\r\n// document.querySelector(\"#timeContainer\").onclick = showPopup;\r\n\r\nexport function updateTimestamp(value) {\r\n    if (!Game.BEATMAP_FILE?.audioNode || (!/^[0-9]+:[0-9]+:[0-9]+.*/g.test(value) && !/^[0-9]+$/g.test(value))) {\r\n        document.querySelector(\"#jumpToTime\").value = \"\";\r\n        return;\r\n    }\r\n\r\n    let time = value;\r\n    if (/^[0-9]+:[0-9]+:[0-9]+.*/g.test(value)) {\r\n        const extracted = value.match(/[0-9]+:[0-9]+:[0-9]+/g)[0];\r\n\r\n        const minute = parseInt(extracted.split(\":\")[0]);\r\n        const second = parseInt(extracted.split(\":\")[1]);\r\n        const mili = parseInt(extracted.split(\":\")[2]);\r\n\r\n        time = minute * 60000 + second * 1000 + mili;\r\n    }\r\n\r\n    Game.BEATMAP_FILE.audioNode.seekTo(time);\r\n}\r\n\r\ndocument.querySelector(\"#jumpToTime\").addEventListener(\"keydown\", (e) => {\r\n    if (e.key === \"Enter\") {\r\n        updateTimestamp(document.querySelector(\"#jumpToTime\").value);\r\n        closePopup();\r\n    }\r\n});\r\n","var osuPerformance;\r\n/******/ (() => { // webpackBootstrap\r\n/******/ \t\"use strict\";\r\n/******/ \tvar __webpack_modules__ = ({\r\n\r\n/***/ \"./src/core/audio/HitSampleInfo.ts\":\r\n/*!*****************************************!*\\\r\n  !*** ./src/core/audio/HitSampleInfo.ts ***!\r\n  \\*****************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.HitSampleInfo = void 0;\r\nclass HitSampleInfo {\r\n    constructor(name, bank = null, suffix = null, volume = 0) {\r\n        this.volume = 0;\r\n        // name could be one of those HIT_WHISTLE, ...\r\n        this.name = \"\";\r\n        this.name = name;\r\n        this.bank = bank;\r\n        this.suffix = suffix;\r\n        this.volume = volume;\r\n    }\r\n}\r\nexports.HitSampleInfo = HitSampleInfo;\r\nHitSampleInfo.HIT_WHISTLE = \"hitwhistle\";\r\nHitSampleInfo.HIT_FINISH = \"hitfinish\";\r\nHitSampleInfo.HIT_NORMAL = \"hitnormal\";\r\nHitSampleInfo.HIT_CLAP = \"hitclap\";\r\nHitSampleInfo.ALL_ADDITIONS = [HitSampleInfo.HIT_WHISTLE, HitSampleInfo.HIT_CLAP, HitSampleInfo.HIT_FINISH];\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/audio/LegacySampleBank.ts\":\r\n/*!********************************************!*\\\r\n  !*** ./src/core/audio/LegacySampleBank.ts ***!\r\n  \\********************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.LegacySampleBank = void 0;\r\nvar LegacySampleBank;\r\n(function (LegacySampleBank) {\r\n    LegacySampleBank[LegacySampleBank[\"None\"] = 0] = \"None\";\r\n    LegacySampleBank[LegacySampleBank[\"Normal\"] = 1] = \"Normal\";\r\n    LegacySampleBank[LegacySampleBank[\"Soft\"] = 2] = \"Soft\";\r\n    LegacySampleBank[LegacySampleBank[\"Drum\"] = 3] = \"Drum\";\r\n})(LegacySampleBank = exports.LegacySampleBank || (exports.LegacySampleBank = {}));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/Beatmap.ts\":\r\n/*!*************************************!*\\\r\n  !*** ./src/core/beatmap/Beatmap.ts ***!\r\n  \\*************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.mostCommonBeatLength = exports.Beatmap = void 0;\r\nconst BeatmapDifficulty_1 = __webpack_require__(/*! ./BeatmapDifficulty */ \"./src/core/beatmap/BeatmapDifficulty.ts\");\r\nconst index_1 = __webpack_require__(/*! ../utils/index */ \"./src/core/utils/index.ts\");\r\nconst Types_1 = __webpack_require__(/*! ../hitobjects/Types */ \"./src/core/hitobjects/Types.ts\");\r\nconst ControlPointInfo_1 = __webpack_require__(/*! ./ControlPoints/ControlPointInfo */ \"./src/core/beatmap/ControlPoints/ControlPointInfo.ts\");\r\n/**\r\n * A built beatmap that is not supposed to be modified.\r\n */\r\nclass Beatmap {\r\n    constructor(hitObjects, difficulty, appliedMods, controlPointInfo) {\r\n        this.hitObjects = hitObjects;\r\n        this.difficulty = difficulty;\r\n        this.appliedMods = appliedMods;\r\n        this.controlPointInfo = controlPointInfo;\r\n        this.hitObjectDict = (0, index_1.normalizeHitObjects)(hitObjects);\r\n        this.gameClockRate = (0, index_1.determineDefaultPlaybackSpeed)(appliedMods);\r\n    }\r\n    getHitObject(id) {\r\n        return this.hitObjectDict[id];\r\n    }\r\n    // TODO: Perform some .type checks otherwise these don't make sense\r\n    getSliderCheckPoint(id) {\r\n        return this.hitObjectDict[id];\r\n    }\r\n    getSlider(id) {\r\n        return this.hitObjectDict[id];\r\n    }\r\n    getHitCircle(id) {\r\n        return this.hitObjectDict[id];\r\n    }\r\n    getSpinner(id) {\r\n        return this.hitObjectDict[id];\r\n    }\r\n}\r\nexports.Beatmap = Beatmap;\r\nBeatmap.EMPTY_BEATMAP = new Beatmap([], BeatmapDifficulty_1.DEFAULT_BEATMAP_DIFFICULTY, [], new ControlPointInfo_1.ControlPointInfo());\r\n// Utility?\r\nconst endTime = (o) => ((0, Types_1.isHitCircle)(o) ? o.hitTime : o.endTime);\r\nfunction mostCommonBeatLength({ hitObjects, timingPoints, }) {\r\n    // The last playable time in the beatmap - the last timing point extends to this time.\r\n    // Note: This is more accurate and may present different results because osu-stable didn't have the ability to\r\n    // calculate slider durations in this context.\r\n    let lastTime = 0;\r\n    if (hitObjects.length > 0)\r\n        lastTime = endTime(hitObjects[hitObjects.length - 1]);\r\n    else if (timingPoints.length > 0)\r\n        lastTime = timingPoints[timingPoints.length - 1].time;\r\n    // 1. Group the beat lengths and aggregate the durations\r\n    const durations = new Map();\r\n    function add(d, x) {\r\n        d = Math.round(d * 1000) / 1000;\r\n        const a = durations.get(d);\r\n        if (a === undefined)\r\n            durations.set(d, x);\r\n        else\r\n            durations.set(d, a + x);\r\n    }\r\n    for (let i = 0; i < timingPoints.length; i++) {\r\n        const t = timingPoints[i];\r\n        if (t.time > lastTime) {\r\n            add(t.beatLength, 0);\r\n        }\r\n        else {\r\n            // osu-stable forced the first control point to start at 0.\r\n            // This is reproduced here to maintain compatibility around osu!mania scroll speed and song select display.\r\n            const currentTime = i === 0 ? 0 : t.time;\r\n            const nextTime = i + 1 === timingPoints.length ? lastTime : timingPoints[i + 1].time;\r\n            add(t.beatLength, nextTime - currentTime);\r\n        }\r\n    }\r\n    // 2. Sort by duration descendingly\r\n    const list = [];\r\n    for (const beatLength of durations.keys()) {\r\n        list.push({ beatLength: beatLength, duration: durations.get(beatLength) });\r\n    }\r\n    list.sort((a, b) => b.duration - a.duration);\r\n    if (list.length === 0) {\r\n        return undefined;\r\n    }\r\n    else {\r\n        return list[0].beatLength;\r\n    }\r\n}\r\nexports.mostCommonBeatLength = mostCommonBeatLength;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/BeatmapBuilder.ts\":\r\n/*!********************************************!*\\\r\n  !*** ./src/core/beatmap/BeatmapBuilder.ts ***!\r\n  \\********************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.buildBeatmap = void 0;\r\nconst HitCircle_1 = __webpack_require__(/*! ../hitobjects/HitCircle */ \"./src/core/hitobjects/HitCircle.ts\");\r\nconst Mods_1 = __webpack_require__(/*! ../mods/Mods */ \"./src/core/mods/Mods.ts\");\r\nconst StackingMod_1 = __webpack_require__(/*! ../mods/StackingMod */ \"./src/core/mods/StackingMod.ts\");\r\nconst SliderCheckPointGenerator_1 = __webpack_require__(/*! ../hitobjects/slider/SliderCheckPointGenerator */ \"./src/core/hitobjects/slider/SliderCheckPointGenerator.ts\");\r\nconst SliderPath_1 = __webpack_require__(/*! ../hitobjects/slider/SliderPath */ \"./src/core/hitobjects/slider/SliderPath.ts\");\r\nconst Slider_1 = __webpack_require__(/*! ../hitobjects/Slider */ \"./src/core/hitobjects/Slider.ts\");\r\nconst SliderCheckPoint_1 = __webpack_require__(/*! ../hitobjects/SliderCheckPoint */ \"./src/core/hitobjects/SliderCheckPoint.ts\");\r\nconst Beatmap_1 = __webpack_require__(/*! ./Beatmap */ \"./src/core/beatmap/Beatmap.ts\");\r\nconst Spinner_1 = __webpack_require__(/*! ../hitobjects/Spinner */ \"./src/core/hitobjects/Spinner.ts\");\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst HardRockMod_1 = __webpack_require__(/*! ../mods/HardRockMod */ \"./src/core/mods/HardRockMod.ts\");\r\nfunction copyPosition({ x, y }) {\r\n    return { x, y };\r\n}\r\nfunction createHitCircle(id, hitCircleSettings, controlPointInfo, beatmapDifficulty) {\r\n    const hitCircle = new HitCircle_1.HitCircle();\r\n    hitCircle.id = id;\r\n    hitCircle.position = copyPosition(hitCircleSettings.position);\r\n    hitCircle.unstackedPosition = copyPosition(hitCircleSettings.position);\r\n    hitCircle.hitTime = hitCircleSettings.time;\r\n    hitCircle.scale = (0, index_1.circleSizeToScale)(beatmapDifficulty.circleSize);\r\n    hitCircle.approachDuration = (0, index_1.approachRateToApproachDuration)(beatmapDifficulty.approachRate);\r\n    hitCircle.fadeInDuration = (0, index_1.getFadeInDuration)(beatmapDifficulty.approachRate);\r\n    return hitCircle;\r\n}\r\nfunction createSliderCheckPoint(slider, id, descriptor) {\r\n    const checkPoint = new SliderCheckPoint_1.SliderCheckPoint(slider);\r\n    const { time, spanStartTime, spanIndex, spanProgress } = descriptor;\r\n    checkPoint.id = id;\r\n    checkPoint.offset = slider.path.positionAt(spanProgress);\r\n    checkPoint.type = descriptor.type;\r\n    checkPoint.hitTime = time;\r\n    checkPoint.spanIndex = spanIndex;\r\n    checkPoint.spanStartTime = spanStartTime;\r\n    checkPoint.spanProgress = spanProgress;\r\n    return checkPoint;\r\n}\r\nfunction createSliderCheckPoints(slider) {\r\n    const checkPoints = [];\r\n    let checkpointIndex = 0;\r\n    for (const e of (0, SliderCheckPointGenerator_1.generateSliderCheckpoints)(slider.startTime, slider.spanDuration, slider.velocity, slider.tickDistance, slider.path.distance, slider.spanCount, slider.legacyLastTickOffset)) {\r\n        const id = `${slider.id}/${checkpointIndex++}`;\r\n        checkPoints.push(createSliderCheckPoint(slider, id, e));\r\n    }\r\n    return checkPoints;\r\n}\r\nfunction copyPathPoints(pathPoints) {\r\n    return pathPoints.map(({ type, offset }) => ({\r\n        type,\r\n        offset: copyPosition(offset),\r\n    }));\r\n}\r\nfunction createSlider(index, sliderSettings, controlPointInfo, difficulty) {\r\n    const approachDuration = (0, index_1.approachRateToApproachDuration)(difficulty.approachRate);\r\n    const fadeInDuration = (0, index_1.getFadeInDuration)(difficulty.approachRate);\r\n    const scale = (0, index_1.circleSizeToScale)(difficulty.circleSize);\r\n    const hitTime = sliderSettings.time;\r\n    const timingPoint = controlPointInfo.timingPointAt(hitTime);\r\n    const difficultyPoint = controlPointInfo.difficultyPointAt(hitTime);\r\n    const scoringDistance = Slider_1.Slider.BASE_SCORING_DISTANCE * difficulty.sliderMultiplier * difficultyPoint.speedMultiplier;\r\n    const sliderId = index.toString();\r\n    const head = new HitCircle_1.HitCircle();\r\n    head.id = `${index.toString()}/HEAD`;\r\n    head.unstackedPosition = copyPosition(sliderSettings.position);\r\n    head.position = copyPosition(sliderSettings.position);\r\n    head.hitTime = sliderSettings.time;\r\n    head.approachDuration = approachDuration;\r\n    head.scale = scale;\r\n    head.sliderId = sliderId;\r\n    const slider = new Slider_1.Slider(head);\r\n    slider.id = sliderId;\r\n    slider.repeatCount = sliderSettings.repeatCount;\r\n    slider.legacyLastTickOffset = sliderSettings.legacyLastTickOffset;\r\n    slider.velocity = scoringDistance / timingPoint.beatLength;\r\n    slider.tickDistance = (scoringDistance / difficulty.sliderTickRate) * sliderSettings.tickDistanceMultiplier;\r\n    slider.path = new SliderPath_1.SliderPath(copyPathPoints(sliderSettings.pathPoints), sliderSettings.length);\r\n    slider.checkPoints = createSliderCheckPoints(slider);\r\n    return slider;\r\n}\r\nfunction createSpinner(id, settings, controlPointInfo, difficulty) {\r\n    const spinner = new Spinner_1.Spinner();\r\n    spinner.id = id;\r\n    spinner.startTime = settings.time;\r\n    spinner.duration = settings.duration;\r\n    return spinner;\r\n}\r\nfunction createStaticHitObject(index, hitObjectSetting, controlPointInfo, beatmapDifficulty) {\r\n    switch (hitObjectSetting.type) {\r\n        case \"HIT_CIRCLE\":\r\n            return createHitCircle(index.toString(), hitObjectSetting, controlPointInfo, beatmapDifficulty);\r\n        case \"SLIDER\":\r\n            return createSlider(index, hitObjectSetting, controlPointInfo, beatmapDifficulty);\r\n        case \"SPINNER\":\r\n            return createSpinner(index.toString(), hitObjectSetting, controlPointInfo, beatmapDifficulty);\r\n    }\r\n    throw new Error(\"Type not recognized...\");\r\n}\r\n// Mutates the hitObject combo index values\r\nfunction assignComboIndex(bluePrintSettings, hitObjects) {\r\n    let comboSetIndex = -1, withinSetIndex = 0;\r\n    for (let i = 0; i < hitObjects.length; i++) {\r\n        const { newCombo, comboSkip, type } = bluePrintSettings[i];\r\n        const hitObject = hitObjects[i]; // change 'const' -> 'let' for better readability\r\n        if (i === 0 || newCombo || type === \"SPINNER\") {\r\n            comboSetIndex += comboSkip + 1;\r\n            withinSetIndex = 0;\r\n        }\r\n        // Spinners do not have comboSetIndex or withinComboSetIndex\r\n        if (hitObject instanceof HitCircle_1.HitCircle) {\r\n            hitObject.comboSetIndex = comboSetIndex;\r\n            hitObject.withinComboSetIndex = withinSetIndex++;\r\n        }\r\n        else if (hitObject instanceof Slider_1.Slider) {\r\n            hitObject.head.comboSetIndex = comboSetIndex;\r\n            hitObject.head.withinComboSetIndex = withinSetIndex++;\r\n        }\r\n    }\r\n}\r\n// There should only be one, otherwise ...\r\nfunction findDifficultyApplier(mods) {\r\n    for (const m of mods) {\r\n        const adjuster = Mods_1.ModSettings[m].difficultyAdjuster;\r\n        if (adjuster !== undefined) {\r\n            return adjuster;\r\n        }\r\n    }\r\n    return (d) => d; // The identity function\r\n}\r\nconst defaultBeatmapBuilderOptions = {\r\n    addStacking: true,\r\n    mods: [],\r\n};\r\n/**\r\n * Builds the beatmap from the given blueprint and options.\r\n *\r\n * It DOES not perform a check on the given subset of mods. So if you enter half-time and double time at the same time,\r\n * then this might return bad results.\r\n *\r\n * @param {Blueprint} bluePrint\r\n * @param {Object} options\r\n * @param {boolean} options.addStacking whether to apply setting or not (by default true)\r\n */\r\nfunction buildBeatmap(bluePrint, options) {\r\n    const { beatmapVersion, stackLeniency } = bluePrint.blueprintInfo;\r\n    const { mods, addStacking } = Object.assign(Object.assign({}, defaultBeatmapBuilderOptions), options);\r\n    const finalDifficulty = findDifficultyApplier(mods)(bluePrint.defaultDifficulty);\r\n    const hitObjects = bluePrint.hitObjectSettings.map((setting, index) => createStaticHitObject(index, setting, bluePrint.controlPointInfo, finalDifficulty));\r\n    assignComboIndex(bluePrint.hitObjectSettings, hitObjects);\r\n    if (mods.includes(\"HARD_ROCK\")) {\r\n        HardRockMod_1.HardRockMod.flipVertically(hitObjects);\r\n    }\r\n    if (addStacking) {\r\n        (0, StackingMod_1.modifyStackingPosition)(hitObjects, stackLeniency, beatmapVersion);\r\n    }\r\n    return new Beatmap_1.Beatmap(hitObjects, finalDifficulty, mods, bluePrint.controlPointInfo);\r\n}\r\nexports.buildBeatmap = buildBeatmap;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/BeatmapDifficulty.ts\":\r\n/*!***********************************************!*\\\r\n  !*** ./src/core/beatmap/BeatmapDifficulty.ts ***!\r\n  \\***********************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.DEFAULT_BEATMAP_DIFFICULTY = void 0;\r\nexports.DEFAULT_BEATMAP_DIFFICULTY = Object.freeze({\r\n    drainRate: 5,\r\n    circleSize: 5,\r\n    overallDifficulty: 5,\r\n    // Technically speaking default value of AR is 5 because OD is 5\r\n    // https://github.com/ppy/osu/blob/b1fcb840a9ff4d866aac262ace7f54fa88b5e0ce/osu.Game/Beatmaps/BeatmapDifficulty.cs#L35\r\n    approachRate: 5,\r\n    sliderMultiplier: 1,\r\n    sliderTickRate: 1,\r\n});\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/ControlPoint.ts\":\r\n/*!********************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/ControlPoint.ts ***!\r\n  \\********************************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ControlPoint = void 0;\r\nclass ControlPoint {\r\n    get time() {\r\n        var _a, _b;\r\n        return (_b = (_a = this.controlPointGroup) === null || _a === void 0 ? void 0 : _a.time) !== null && _b !== void 0 ? _b : 0;\r\n    }\r\n    compareTo(other) {\r\n        return this.time - other.time;\r\n    }\r\n    attachGroup(pointGroup) {\r\n        this.controlPointGroup = pointGroup;\r\n    }\r\n}\r\nexports.ControlPoint = ControlPoint;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/ControlPointGroup.ts\":\r\n/*!*************************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/ControlPointGroup.ts ***!\r\n  \\*************************************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ControlPointGroup = void 0;\r\nclass ControlPointGroup {\r\n    // itemRemoved: any;\r\n    // itemAdded: any;\r\n    constructor(time) {\r\n        this.time = 0;\r\n        this.controlPoints = [];\r\n        this.time = time;\r\n    }\r\n    add(point) {\r\n        var _a, _b;\r\n        const i = this.controlPoints.findIndex((value) => value.type === point.type);\r\n        if (i > -1) {\r\n            const p = this.controlPoints[i];\r\n            this.controlPoints.splice(i, 1);\r\n            (_a = this.controlPointInfo) === null || _a === void 0 ? void 0 : _a.groupItemRemoved(p);\r\n        }\r\n        point.attachGroup(this);\r\n        this.controlPoints.push(point);\r\n        (_b = this.controlPointInfo) === null || _b === void 0 ? void 0 : _b.groupItemAdded(point);\r\n    }\r\n}\r\nexports.ControlPointGroup = ControlPointGroup;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/ControlPointInfo.ts\":\r\n/*!************************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/ControlPointInfo.ts ***!\r\n  \\************************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ControlPointInfo = void 0;\r\nconst DifficultyControlPoint_1 = __webpack_require__(/*! ./DifficultyControlPoint */ \"./src/core/beatmap/ControlPoints/DifficultyControlPoint.ts\");\r\nconst TimingControlPoint_1 = __webpack_require__(/*! ./TimingControlPoint */ \"./src/core/beatmap/ControlPoints/TimingControlPoint.ts\");\r\nconst EffectControlPoint_1 = __webpack_require__(/*! ./EffectControlPoint */ \"./src/core/beatmap/ControlPoints/EffectControlPoint.ts\");\r\nconst SampleControlPoint_1 = __webpack_require__(/*! ./SampleControlPoint */ \"./src/core/beatmap/ControlPoints/SampleControlPoint.ts\");\r\nconst ControlPointGroup_1 = __webpack_require__(/*! ./ControlPointGroup */ \"./src/core/beatmap/ControlPoints/ControlPointGroup.ts\");\r\nconst index_1 = __webpack_require__(/*! ../../../math/index */ \"./src/math/index.ts\");\r\nconst SortedList_1 = __webpack_require__(/*! ../../utils/SortedList */ \"./src/core/utils/SortedList.ts\");\r\nclass ControlPointInfo {\r\n    constructor() {\r\n        this.difficultyPoints = new SortedList_1.SortedList();\r\n        this.timingPoints = new SortedList_1.SortedList();\r\n        this.effectPoints = new SortedList_1.SortedList();\r\n        this.samplePoints = new SortedList_1.SortedList();\r\n        // Why not use SortedList here ?\r\n        this.groups = [];\r\n    }\r\n    difficultyPointAt(time) {\r\n        return this.binarySearchWithFallback(this.difficultyPoints.list, time, DifficultyControlPoint_1.DifficultyControlPoint.DEFAULT);\r\n    }\r\n    samplePointAt(time) {\r\n        return this.binarySearchWithFallback(this.samplePoints.list, time, this.samplePoints.length > 0 ? this.samplePoints.list[0] : SampleControlPoint_1.SampleControlPoint.DEFAULT);\r\n    }\r\n    add(time, controlPoint) {\r\n        if (this.checkAlreadyExisting(time, controlPoint))\r\n            return false;\r\n        const g = this.groupAt(time, true);\r\n        g.add(controlPoint);\r\n        return true;\r\n    }\r\n    groupAt(time, addIfNotExisting = false) {\r\n        const newGroup = new ControlPointGroup_1.ControlPointGroup(time);\r\n        const found = this.groups.find((o) => (0, index_1.floatEqual)(o.time, time));\r\n        if (found)\r\n            return found;\r\n        if (addIfNotExisting) {\r\n            // this is a workaround for the following two uncommented lines\r\n            newGroup.controlPointInfo = this;\r\n            // newGroup.itemAdded = this.groupItemAdded;\r\n            // newGroup.itemRemoved = this.groupItemRemoved;\r\n            this.groups.push(newGroup);\r\n            // osu!lazer they use .insert(~i) to maintain it sorted ... -> isn't this O(n^2)?\r\n            // we sort cause lazy rn (optimize later)\r\n            this.groups.sort((a, b) => a.time - b.time);\r\n            return newGroup;\r\n        }\r\n        return null;\r\n    }\r\n    groupItemAdded(controlPoint) {\r\n        switch (controlPoint.type) {\r\n            case TimingControlPoint_1.TimingControlPoint.TYPE:\r\n                this.timingPoints.add(controlPoint);\r\n                break;\r\n            case EffectControlPoint_1.EffectControlPoint.TYPE:\r\n                this.effectPoints.add(controlPoint);\r\n                break;\r\n            case SampleControlPoint_1.SampleControlPoint.TYPE:\r\n                this.samplePoints.add(controlPoint);\r\n                break;\r\n            case DifficultyControlPoint_1.DifficultyControlPoint.TYPE:\r\n                this.difficultyPoints.add(controlPoint);\r\n                break;\r\n        }\r\n    }\r\n    groupItemRemoved(controlPoint) {\r\n        switch (controlPoint.type) {\r\n            case TimingControlPoint_1.TimingControlPoint.TYPE:\r\n                this.timingPoints.remove(controlPoint);\r\n                break;\r\n            case EffectControlPoint_1.EffectControlPoint.TYPE:\r\n                this.effectPoints.remove(controlPoint);\r\n                break;\r\n            case SampleControlPoint_1.SampleControlPoint.TYPE:\r\n                this.samplePoints.remove(controlPoint);\r\n                break;\r\n            case DifficultyControlPoint_1.DifficultyControlPoint.TYPE:\r\n                this.difficultyPoints.remove(controlPoint);\r\n                break;\r\n        }\r\n    }\r\n    timingPointAt(time) {\r\n        return this.binarySearchWithFallback(this.timingPoints.list, time, this.timingPoints.length > 0 ? this.timingPoints.get(0) : TimingControlPoint_1.TimingControlPoint.DEFAULT);\r\n    }\r\n    effectPointAt(time) {\r\n        return this.binarySearchWithFallback(this.effectPoints.list, time, EffectControlPoint_1.EffectControlPoint.DEFAULT);\r\n    }\r\n    binarySearchWithFallback(list, time, fallback) {\r\n        const obj = this.binarySearch(list, time);\r\n        return obj !== null && obj !== void 0 ? obj : fallback;\r\n    }\r\n    // Find the first element that has a time not less than the given time.\r\n    binarySearch(list, time) {\r\n        if (list === null)\r\n            throw new Error(\"Argument null\");\r\n        if (list.length === 0 || time < list[0].time)\r\n            return null;\r\n        let lo = 0;\r\n        let hi = list.length;\r\n        // Find the first index that has a time greater than current one.\r\n        // The previous one will then be the answer.\r\n        while (lo < hi) {\r\n            const mid = lo + ((hi - lo) >> 1);\r\n            if (list[mid].time <= time)\r\n                lo = mid + 1;\r\n            else\r\n                hi = mid;\r\n        }\r\n        return list[lo - 1];\r\n    }\r\n    checkAlreadyExisting(time, newPoint) {\r\n        let existing = null;\r\n        switch (newPoint.type) {\r\n            case TimingControlPoint_1.TimingControlPoint.TYPE:\r\n                existing = this.binarySearch(this.timingPoints.list, time);\r\n                break;\r\n            case EffectControlPoint_1.EffectControlPoint.TYPE:\r\n                existing = this.effectPointAt(time);\r\n                break;\r\n            case SampleControlPoint_1.SampleControlPoint.TYPE:\r\n                existing = this.binarySearch(this.samplePoints.list, time);\r\n                break;\r\n            case DifficultyControlPoint_1.DifficultyControlPoint.TYPE:\r\n                existing = this.difficultyPointAt(time);\r\n                break;\r\n        }\r\n        // TODO: in osu!lazer it's written with newPoint?.isRedundant\r\n        return existing ? newPoint.isRedundant(existing) : false;\r\n    }\r\n}\r\nexports.ControlPointInfo = ControlPointInfo;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/DifficultyControlPoint.ts\":\r\n/*!******************************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/DifficultyControlPoint.ts ***!\r\n  \\******************************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.DifficultyControlPoint = void 0;\r\nconst ControlPoint_1 = __webpack_require__(/*! ./ControlPoint */ \"./src/core/beatmap/ControlPoints/ControlPoint.ts\");\r\nclass DifficultyControlPoint extends ControlPoint_1.ControlPoint {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.speedMultiplier = 1;\r\n    }\r\n    get type() {\r\n        return DifficultyControlPoint.TYPE;\r\n    }\r\n    isRedundant(existing) {\r\n        return false;\r\n    }\r\n}\r\nexports.DifficultyControlPoint = DifficultyControlPoint;\r\nDifficultyControlPoint.DEFAULT = new DifficultyControlPoint();\r\nDifficultyControlPoint.TYPE = \"DifficultyControlPoint\";\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/EffectControlPoint.ts\":\r\n/*!**************************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/EffectControlPoint.ts ***!\r\n  \\**************************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.EffectControlPoint = void 0;\r\nconst ControlPoint_1 = __webpack_require__(/*! ./ControlPoint */ \"./src/core/beatmap/ControlPoints/ControlPoint.ts\");\r\nclass EffectControlPoint extends ControlPoint_1.ControlPoint {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.kiaiMode = false;\r\n        this.omitFirstBarLine = true;\r\n    }\r\n    isRedundant(existing) {\r\n        if (this.omitFirstBarLine || existing.type !== EffectControlPoint.TYPE)\r\n            return false;\r\n        const e = existing;\r\n        return this.kiaiMode === e.kiaiMode && this.omitFirstBarLine === e.omitFirstBarLine;\r\n    }\r\n    get type() {\r\n        return EffectControlPoint.TYPE;\r\n    }\r\n}\r\nexports.EffectControlPoint = EffectControlPoint;\r\nEffectControlPoint.TYPE = \"EffectControlPoint\";\r\nEffectControlPoint.DEFAULT = new EffectControlPoint();\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/SampleControlPoint.ts\":\r\n/*!**************************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/SampleControlPoint.ts ***!\r\n  \\**************************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.SampleControlPoint = void 0;\r\nconst ControlPoint_1 = __webpack_require__(/*! ./ControlPoint */ \"./src/core/beatmap/ControlPoints/ControlPoint.ts\");\r\nclass SampleControlPoint extends ControlPoint_1.ControlPoint {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.sampleBank = SampleControlPoint.DEFAULT_BANK;\r\n        this.sampleVolume = 100;\r\n    }\r\n    isRedundant(existing) {\r\n        if (existing.type !== SampleControlPoint.TYPE)\r\n            return false;\r\n        const e = existing;\r\n        return this.sampleBank === e.sampleBank && this.sampleVolume === e.sampleVolume;\r\n    }\r\n    get type() {\r\n        return SampleControlPoint.TYPE;\r\n    }\r\n}\r\nexports.SampleControlPoint = SampleControlPoint;\r\nSampleControlPoint.TYPE = \"SampleControlPoint\";\r\nSampleControlPoint.DEFAULT_BANK = \"normal\";\r\nSampleControlPoint.DEFAULT = new SampleControlPoint();\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/ControlPoints/TimingControlPoint.ts\":\r\n/*!**************************************************************!*\\\r\n  !*** ./src/core/beatmap/ControlPoints/TimingControlPoint.ts ***!\r\n  \\**************************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.TimingControlPoint = void 0;\r\nconst ControlPoint_1 = __webpack_require__(/*! ./ControlPoint */ \"./src/core/beatmap/ControlPoints/ControlPoint.ts\");\r\nconst TimeSignatures_1 = __webpack_require__(/*! ../TimeSignatures */ \"./src/core/beatmap/TimeSignatures.ts\");\r\nclass TimingControlPoint extends ControlPoint_1.ControlPoint {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.beatLength = 1000;\r\n        // TODO: Is this the default value?\r\n        this.timeSignature = TimeSignatures_1.TimeSignatures.SimpleQuadruple;\r\n    }\r\n    // The BPM at this control point\r\n    get BPM() {\r\n        return 60000 / this.beatLength;\r\n    }\r\n    get type() {\r\n        return TimingControlPoint.TYPE;\r\n    }\r\n    isRedundant(existing) {\r\n        return false;\r\n    }\r\n}\r\nexports.TimingControlPoint = TimingControlPoint;\r\nTimingControlPoint.TYPE = \"TimingControlPoint\";\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/LegacyEffectFlag.ts\":\r\n/*!**********************************************!*\\\r\n  !*** ./src/core/beatmap/LegacyEffectFlag.ts ***!\r\n  \\**********************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.LegacyEffectFlags = void 0;\r\nvar LegacyEffectFlags;\r\n(function (LegacyEffectFlags) {\r\n    LegacyEffectFlags[LegacyEffectFlags[\"None\"] = 0] = \"None\";\r\n    LegacyEffectFlags[LegacyEffectFlags[\"Kiai\"] = 1] = \"Kiai\";\r\n    LegacyEffectFlags[LegacyEffectFlags[\"OmitFirstBarLine\"] = 8] = \"OmitFirstBarLine\";\r\n})(LegacyEffectFlags = exports.LegacyEffectFlags || (exports.LegacyEffectFlags = {}));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/beatmap/TimeSignatures.ts\":\r\n/*!********************************************!*\\\r\n  !*** ./src/core/beatmap/TimeSignatures.ts ***!\r\n  \\********************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.TimeSignatures = void 0;\r\nvar TimeSignatures;\r\n(function (TimeSignatures) {\r\n    TimeSignatures[TimeSignatures[\"SimpleQuadruple\"] = 4] = \"SimpleQuadruple\";\r\n    TimeSignatures[TimeSignatures[\"SimpleTriple\"] = 3] = \"SimpleTriple\";\r\n})(TimeSignatures = exports.TimeSignatures || (exports.TimeSignatures = {}));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/blueprint/Blueprint.ts\":\r\n/*!*****************************************!*\\\r\n  !*** ./src/core/blueprint/Blueprint.ts ***!\r\n  \\*****************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/blueprint/BlueprintParser.ts\":\r\n/*!***********************************************!*\\\r\n  !*** ./src/core/blueprint/BlueprintParser.ts ***!\r\n  \\***********************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.parseBlueprint = exports.BlueprintSections = exports.parseOsuHitObjectSetting = exports.LegacyHitSampleInfo = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst PathType_1 = __webpack_require__(/*! ../hitobjects/slider/PathType */ \"./src/core/hitobjects/slider/PathType.ts\");\r\nconst TimeSignatures_1 = __webpack_require__(/*! ../beatmap/TimeSignatures */ \"./src/core/beatmap/TimeSignatures.ts\");\r\nconst LegacyEffectFlag_1 = __webpack_require__(/*! ../beatmap/LegacyEffectFlag */ \"./src/core/beatmap/LegacyEffectFlag.ts\");\r\nconst TimingControlPoint_1 = __webpack_require__(/*! ../beatmap/ControlPoints/TimingControlPoint */ \"./src/core/beatmap/ControlPoints/TimingControlPoint.ts\");\r\nconst DifficultyControlPoint_1 = __webpack_require__(/*! ../beatmap/ControlPoints/DifficultyControlPoint */ \"./src/core/beatmap/ControlPoints/DifficultyControlPoint.ts\");\r\nconst EffectControlPoint_1 = __webpack_require__(/*! ../beatmap/ControlPoints/EffectControlPoint */ \"./src/core/beatmap/ControlPoints/EffectControlPoint.ts\");\r\nconst SampleControlPoint_1 = __webpack_require__(/*! ../beatmap/ControlPoints/SampleControlPoint */ \"./src/core/beatmap/ControlPoints/SampleControlPoint.ts\");\r\nconst HitSampleInfo_1 = __webpack_require__(/*! ../audio/HitSampleInfo */ \"./src/core/audio/HitSampleInfo.ts\");\r\nconst LegacySampleBank_1 = __webpack_require__(/*! ../audio/LegacySampleBank */ \"./src/core/audio/LegacySampleBank.ts\");\r\nconst ControlPointInfo_1 = __webpack_require__(/*! ../beatmap/ControlPoints/ControlPointInfo */ \"./src/core/beatmap/ControlPoints/ControlPointInfo.ts\");\r\nconst SECTION_REGEX = /^\\s*\\[(.+?)]\\s*$/;\r\nconst DEFAULT_LEGACY_TICK_OFFSET = 36;\r\n/**\r\n *  Will make sure that the comment at the end of line is removed\r\n *  Given \"0, 1, 2 // <- Test\"\r\n *  Returns \"0, 1, 2\"\r\n */\r\nfunction stripComments(line) {\r\n    const index = line.indexOf(\"//\");\r\n    if (index >= 0) {\r\n        return line.substr(0, index);\r\n    }\r\n    else {\r\n        return line;\r\n    }\r\n}\r\nvar LegacyHitObjectType;\r\n(function (LegacyHitObjectType) {\r\n    LegacyHitObjectType[LegacyHitObjectType[\"Circle\"] = 1] = \"Circle\";\r\n    LegacyHitObjectType[LegacyHitObjectType[\"Slider\"] = 2] = \"Slider\";\r\n    LegacyHitObjectType[LegacyHitObjectType[\"NewCombo\"] = 4] = \"NewCombo\";\r\n    LegacyHitObjectType[LegacyHitObjectType[\"Spinner\"] = 8] = \"Spinner\";\r\n    LegacyHitObjectType[LegacyHitObjectType[\"ComboSkip\"] = 112] = \"ComboSkip\";\r\n    LegacyHitObjectType[LegacyHitObjectType[\"Hold\"] = 128] = \"Hold\";\r\n})(LegacyHitObjectType || (LegacyHitObjectType = {}));\r\nvar LegacyHitSoundType;\r\n(function (LegacyHitSoundType) {\r\n    LegacyHitSoundType[LegacyHitSoundType[\"None\"] = 0] = \"None\";\r\n    LegacyHitSoundType[LegacyHitSoundType[\"Normal\"] = 1] = \"Normal\";\r\n    LegacyHitSoundType[LegacyHitSoundType[\"Whistle\"] = 2] = \"Whistle\";\r\n    LegacyHitSoundType[LegacyHitSoundType[\"Finish\"] = 4] = \"Finish\";\r\n    LegacyHitSoundType[LegacyHitSoundType[\"Clap\"] = 8] = \"Clap\";\r\n})(LegacyHitSoundType || (LegacyHitSoundType = {}));\r\nclass LegacyHitSampleInfo extends HitSampleInfo_1.HitSampleInfo {\r\n    constructor(name, bank = null, volume = 0, customSampleBank = 0, isLayered = false) {\r\n        super(name, bank, customSampleBank >= 2 ? customSampleBank.toString() : null, volume);\r\n        this.isLayered = isLayered;\r\n        this.customSampleBank = customSampleBank;\r\n    }\r\n}\r\nexports.LegacyHitSampleInfo = LegacyHitSampleInfo;\r\nfunction hasFlag(bitmask, flag) {\r\n    return (bitmask & flag) !== 0;\r\n}\r\nfunction splitKeyVal(line, separator = \":\") {\r\n    var _a, _b;\r\n    const split = line.split(separator, 2);\r\n    return [split[0].trim(), (_b = (_a = split[1]) === null || _a === void 0 ? void 0 : _a.trim()) !== null && _b !== void 0 ? _b : \"\"];\r\n}\r\nfunction convertPathType(value) {\r\n    switch (value[0]) {\r\n        // TODO: ???\r\n        default:\r\n        case \"C\":\r\n            return PathType_1.PathType.Catmull;\r\n        case \"B\":\r\n            return PathType_1.PathType.Bezier;\r\n        case \"L\":\r\n            return PathType_1.PathType.Linear;\r\n        case \"P\":\r\n            return PathType_1.PathType.PerfectCurve;\r\n    }\r\n}\r\n// ???\r\nclass LegacyDifficultyControlPoint extends DifficultyControlPoint_1.DifficultyControlPoint {\r\n    constructor(beatLength) {\r\n        super();\r\n        // Note: In stable, the division occurs on floats, but with compiler optimisations turned on actually seems to\r\n        // occur on doubles via some .NET black magic (possibly inlining?).\r\n        this.bpmMultiplier = beatLength < 0 ? (0, index_1.clamp)(-beatLength, 10, 10000) / 100.0 : 1;\r\n    }\r\n}\r\nfunction convertPathString(pointString, offset) {\r\n    const pointSplit = pointString.split(\"|\");\r\n    const controlPoints = [];\r\n    let startIndex = 0;\r\n    let endIndex = 0;\r\n    let first = true;\r\n    while (++endIndex < pointSplit.length) {\r\n        // Keep incrementing endIndex while it's not the start of a new segment (indicated by having a type descriptor of\r\n        // length 1).\r\n        if (pointSplit[endIndex].length > 1)\r\n            continue;\r\n        // Multi-segmented sliders DON'T contain the end point as part of the current segment as it's assumed to be the\r\n        // start of the next segment. The start of the next segment is the index after the type descriptor.\r\n        const endPoint = endIndex < pointSplit.length - 1 ? pointSplit[endIndex + 1] : null;\r\n        const points = convertPoints(pointSplit.slice(startIndex, endIndex), endPoint, first, offset);\r\n        controlPoints.push(...points);\r\n        startIndex = endIndex;\r\n        first = false;\r\n    }\r\n    if (endIndex > startIndex) {\r\n        controlPoints.push(...convertPoints(pointSplit.slice(startIndex, endIndex), null, first, offset));\r\n    }\r\n    return controlPoints;\r\n}\r\n// reads the relative position from the given `startPos`\r\nfunction readPoint(value, startPos, points, index) {\r\n    const [x, y] = value.split(\":\").map(parseFloat);\r\n    const position = index_1.Vec2.sub({ x, y }, startPos);\r\n    points[index] = { offset: position };\r\n}\r\nfunction isLinear(p) {\r\n    return (0, index_1.floatEqual)(0, (p[1].y - p[0].y) * (p[2].x - p[0].x) - (p[1].x - p[0].x) * (p[2].y - p[0].y));\r\n}\r\nfunction convertPoints(points, endPoint, first, offset) {\r\n    let type = convertPathType(points[0]);\r\n    const readOffset = first ? 1 : 0;\r\n    const readablePoints = points.length - 1;\r\n    const endPointLength = endPoint !== null ? 1 : 0;\r\n    const vertices = new Array(readOffset + readablePoints + endPointLength);\r\n    // Fill any non-read points\r\n    for (let i = 0; i < readOffset; i++)\r\n        vertices[i] = { offset: index_1.Vec2.Zero };\r\n    // Parse into control points.\r\n    for (let i = 1; i < points.length; i++)\r\n        readPoint(points[i], offset, vertices, readOffset + i - 1);\r\n    if (endPoint !== null)\r\n        readPoint(endPoint, offset, vertices, vertices.length - 1);\r\n    if (type === PathType_1.PathType.PerfectCurve) {\r\n        if (vertices.length !== 3)\r\n            type = PathType_1.PathType.Bezier;\r\n        else if (isLinear(vertices.map((v) => v.offset)))\r\n            type = PathType_1.PathType.Linear;\r\n    }\r\n    vertices[0].type = type;\r\n    let startIndex = 0;\r\n    let endIndex = 0;\r\n    const result = [];\r\n    // this is just some logic to not have duplicated positions at the end\r\n    while (++endIndex < vertices.length - endPointLength) {\r\n        if (!index_1.Vec2.equal(vertices[endIndex].offset, vertices[endIndex - 1].offset)) {\r\n            continue;\r\n        }\r\n        // The last control point of each segment is not allowed to start a new implicit segment.\r\n        if (endIndex === vertices.length - endPointLength - 1) {\r\n            continue;\r\n        }\r\n        vertices[endIndex - 1].type = type;\r\n        result.push(...vertices.slice(startIndex, endIndex));\r\n        startIndex = endIndex + 1;\r\n    }\r\n    if (endIndex > startIndex) {\r\n        result.push(...vertices.slice(startIndex, endIndex));\r\n    }\r\n    return result;\r\n}\r\nfunction parseOsuHitObjectSetting(line) {\r\n    const split = line.split(\",\");\r\n    // TODO: This has MAX_COORDINATE_VALUE for sanity check\r\n    const position = { x: parseFloat(split[0]), y: parseFloat(split[1]) };\r\n    // TODO: This has +offset (24ms) for beatmapVersion <= 4 (include in BeatmapBuilder)\r\n    const offset = 0; //\r\n    const time = parseFloat(split[2]) + offset;\r\n    const _type = parseInt(split[3]); // also has combo information\r\n    const comboSkip = (_type & LegacyHitObjectType.ComboSkip) >> 4;\r\n    const newCombo = hasFlag(_type, LegacyHitObjectType.NewCombo);\r\n    const typeBitmask = _type & ~LegacyHitObjectType.ComboSkip & ~LegacyHitObjectType.NewCombo;\r\n    // TODO: samples\r\n    const soundType = parseInt(split[4]);\r\n    const bankInfo = {\r\n        add: \"\",\r\n        customSampleBank: 0,\r\n        fileName: \"\",\r\n        normal: \"\",\r\n        volume: 0,\r\n    };\r\n    if (hasFlag(typeBitmask, LegacyHitObjectType.Circle)) {\r\n        // TODO: CustomSampleBanks not supported yet\r\n        // if (split.length > 5) readCustomSampleBanks(split[5], bankInfo);\r\n        return {\r\n            type: \"HIT_CIRCLE\",\r\n            time,\r\n            position,\r\n            newCombo,\r\n            comboSkip,\r\n        };\r\n    }\r\n    if (hasFlag(typeBitmask, LegacyHitObjectType.Slider)) {\r\n        let length;\r\n        const slides = parseInt(split[6]);\r\n        if (slides > 9000)\r\n            throw new Error(\"Slides count is way too high\");\r\n        const repeatCount = Math.max(0, slides - 1);\r\n        const pathPoints = convertPathString(split[5], position);\r\n        if (split.length > 7) {\r\n            length = Math.max(0, parseFloat(split[7]));\r\n            if (length === 0)\r\n                length = undefined;\r\n        }\r\n        return {\r\n            type: \"SLIDER\",\r\n            time,\r\n            position,\r\n            repeatCount,\r\n            comboSkip,\r\n            newCombo,\r\n            pathPoints,\r\n            length,\r\n            legacyLastTickOffset: DEFAULT_LEGACY_TICK_OFFSET,\r\n            tickDistanceMultiplier: 1,\r\n        };\r\n    }\r\n    if (hasFlag(typeBitmask, LegacyHitObjectType.Spinner)) {\r\n        const duration = Math.max(0, parseFloat(split[5]) + offset - time);\r\n        return {\r\n            type: \"SPINNER\",\r\n            comboSkip,\r\n            newCombo,\r\n            time,\r\n            position,\r\n            duration,\r\n        };\r\n    }\r\n    throw Error(\"Unknown type\");\r\n}\r\nexports.parseOsuHitObjectSetting = parseOsuHitObjectSetting;\r\nconst defaultBlueprintInfo = () => ({\r\n    audioLeadIn: 0,\r\n    beatmapVersion: 0,\r\n    stackLeniency: 0.7,\r\n    onlineBeatmapId: undefined,\r\n    metadata: {\r\n        artist: \"\",\r\n        title: \"\",\r\n        titleUnicode: \"\",\r\n        audioFile: \"\",\r\n        artistUnicode: \"\",\r\n        source: \"\",\r\n        tags: \"\",\r\n        previewTime: 0,\r\n        backgroundFile: \"\",\r\n        backgroundOffset: { x: 0, y: 0 },\r\n    },\r\n});\r\nconst defaultBlueprintDifficulty = () => ({\r\n    circleSize: 5,\r\n    drainRate: 5,\r\n    overallDifficulty: 5,\r\n    // approachRate omitted because it depends on OD\r\n    sliderMultiplier: 1,\r\n    sliderTickRate: 1,\r\n});\r\nclass BlueprintParser {\r\n    constructor(data, options = defaultOptions) {\r\n        // Disable for testing purposes\r\n        this.applyOffsets = true;\r\n        this.defaultSampleVolume = 100;\r\n        this.hitObjectSettings = [];\r\n        this.controlPointInfo = new ControlPointInfo_1.ControlPointInfo();\r\n        this.defaultSampleBank = LegacySampleBank_1.LegacySampleBank.None;\r\n        this.pendingControlPoints = [];\r\n        this.pendingControlPointTypes = {};\r\n        this.pendingControlPointsTime = 0;\r\n        this.data = data;\r\n        // this.blueprint = new Blueprint();\r\n        this.currentSection = null;\r\n        this.formatVersion = options.formatVersion;\r\n        this.sectionsToRead = options.sectionsToRead;\r\n        this.blueprintInfo = defaultBlueprintInfo();\r\n        this.blueprintDifficulty = defaultBlueprintDifficulty();\r\n        this.sectionsFinishedReading = [];\r\n        // BeatmapVersion 4 and lower had an incorrect offset (stable has this set as 24ms off)\r\n        this.offset = this.formatVersion <= 4 ? 24 : 0;\r\n        // this.hitObjectParser = new OsuHitObjectParser(this.offset, this.formatVersion);\r\n    }\r\n    isFinishedReading() {\r\n        return this.sectionsToRead <= this.sectionsFinishedReading;\r\n    }\r\n    parseLine(line) {\r\n        const strippedLine = stripComments(line);\r\n        // strippedLine can be empty\r\n        if (!strippedLine)\r\n            return;\r\n        // Parse the file format\r\n        if (!this.currentSection && strippedLine.includes(\"osu file format v\")) {\r\n            this.blueprintInfo.beatmapVersion = parseInt(strippedLine.split(\"osu file format v\")[1], 10);\r\n            return;\r\n        }\r\n        if (SECTION_REGEX.test(strippedLine)) {\r\n            // We only add sections we want to read to the list\r\n            if (this.currentSection !== null && this.sectionsToRead.includes(this.currentSection)) {\r\n                this.sectionsFinishedReading.push(this.currentSection);\r\n            }\r\n            this.currentSection = SECTION_REGEX.exec(strippedLine)[1];\r\n            // It will stop when we are done with reading all required sections\r\n            return;\r\n        }\r\n        // We skip reading sections we don't want to read for optimization\r\n        if (this.currentSection === null || this.sectionsToRead.indexOf(this.currentSection) === -1) {\r\n            return;\r\n        }\r\n        switch (this.currentSection) {\r\n            case \"General\":\r\n                this.handleGeneral(strippedLine);\r\n                break;\r\n            case \"Metadata\":\r\n                this.handleMetadata(strippedLine);\r\n                break;\r\n            case \"Difficulty\":\r\n                this.handleDifficulty(strippedLine);\r\n                break;\r\n            case \"HitObjects\":\r\n                this.handleHitObjects(strippedLine);\r\n                break;\r\n            case \"TimingPoints\":\r\n                this.handleTimingPoints(strippedLine);\r\n                break;\r\n            // Below are low priority sections\r\n            case \"Events\":\r\n                this.handleEvents(strippedLine);\r\n                break;\r\n            case \"Editor\":\r\n                this.handleEditor(strippedLine);\r\n                break;\r\n            case \"Colours\":\r\n                break;\r\n        }\r\n    }\r\n    handleEvents(line) {\r\n        const [eventType, _startTime, ...eventParams] = line.split(\",\");\r\n        switch (eventType) {\r\n            case \"0\": {\r\n                const [filename, xOffset, yOffset] = eventParams;\r\n                // The quotes can optionally be given ...\r\n                this.blueprintInfo.metadata.backgroundFile = filename.replace(/\"/g, \"\");\r\n                this.blueprintInfo.metadata.backgroundOffset = {\r\n                    // In case they weren't provided: 0,0 should be used according to docs.\r\n                    x: parseInt(xOffset !== null && xOffset !== void 0 ? xOffset : \"0\"),\r\n                    y: parseInt(yOffset !== null && yOffset !== void 0 ? yOffset : \"0\"),\r\n                };\r\n            }\r\n            // Videos and Storyboard ignored for first...\r\n        }\r\n    }\r\n    handleGeneral(line) {\r\n        const [key, value] = splitKeyVal(line);\r\n        const blueprintInfo = this.blueprintInfo;\r\n        const metadata = blueprintInfo.metadata;\r\n        switch (key) {\r\n            case \"AudioFilename\":\r\n                metadata.audioFile = value; // TODO: toStandardisedPath()\r\n                break;\r\n            case \"AudioLeadIn\":\r\n                blueprintInfo.audioLeadIn = parseInt(value);\r\n                break;\r\n            case \"PreviewTime\":\r\n                break;\r\n            case \"Countdown\":\r\n                break;\r\n            case \"SampleSet\":\r\n                this.defaultSampleBank = parseInt(value); // hopefully it is one of those 4\r\n                break;\r\n            case \"SampleVolume\":\r\n                break;\r\n            case \"StackLeniency\":\r\n                blueprintInfo.stackLeniency = Math.fround(parseFloat(value));\r\n                break;\r\n            case \"Mode\":\r\n                break;\r\n            case \"LetterboxInBreaks\":\r\n                break;\r\n            case \"SpecialStyle\":\r\n                break;\r\n            case \"WidescreenStoryboard\":\r\n                break;\r\n            case \"EpilepsyWarning\":\r\n                break;\r\n        }\r\n    }\r\n    handleEditor(line) {\r\n        const [key, value] = splitKeyVal(line);\r\n        switch (key) {\r\n            case \"Bookmarks\":\r\n                break;\r\n            case \"DistanceSpacing\":\r\n                break;\r\n            case \"BeatDivisor\":\r\n                break;\r\n            case \"GridSize\":\r\n                break;\r\n            case \"TimelineZoom\":\r\n                break;\r\n        }\r\n    }\r\n    handleMetadata(line) {\r\n        const [key, value] = splitKeyVal(line);\r\n        const blueprintInfo = this.blueprintInfo;\r\n        const metaData = blueprintInfo.metadata;\r\n        switch (key) {\r\n            case \"Title\":\r\n                metaData.title = value;\r\n                break;\r\n            case \"TitleUnicode\":\r\n                metaData.titleUnicode = value;\r\n                break;\r\n            case \"Artist\":\r\n                metaData.artist = value;\r\n                break;\r\n            case \"ArtistUnicode\":\r\n                metaData.artistUnicode = value;\r\n                break;\r\n            case \"Creator\":\r\n                // metaData.authorString = value;\r\n                break;\r\n            case \"Version\":\r\n                // beatmapInfo.beatmapVersion = value;\r\n                break;\r\n            case \"Source\":\r\n                break;\r\n            case \"Tags\":\r\n                metaData.tags = value;\r\n                break;\r\n            case \"BeatmapId\":\r\n                break;\r\n            case \"BeatmapSetID\":\r\n                break;\r\n        }\r\n    }\r\n    handleDifficulty(line) {\r\n        const [key, value] = splitKeyVal(line);\r\n        const difficulty = this.blueprintDifficulty;\r\n        switch (key) {\r\n            case \"HPDrainRate\":\r\n                difficulty.drainRate = parseFloat(value);\r\n                break;\r\n            case \"CircleSize\":\r\n                difficulty.circleSize = parseFloat(value);\r\n                break;\r\n            case \"OverallDifficulty\":\r\n                difficulty.overallDifficulty = parseFloat(value);\r\n                break;\r\n            case \"ApproachRate\":\r\n                difficulty.approachRate = parseFloat(value);\r\n                break;\r\n            case \"SliderMultiplier\":\r\n                difficulty.sliderMultiplier = parseFloat(value);\r\n                break;\r\n            case \"SliderTickRate\":\r\n                difficulty.sliderTickRate = parseFloat(value);\r\n                break;\r\n        }\r\n    }\r\n    handleHitObjects(line) {\r\n        const obj = parseOsuHitObjectSetting(line);\r\n        if (obj) {\r\n            this.hitObjectSettings.push(obj);\r\n        }\r\n    }\r\n    handleTimingPoints(line) {\r\n        const split = line.split(\",\");\r\n        const time = this.getOffsetTime(parseFloat(split[0].trim()));\r\n        const beatLength = parseFloat(split[1].trim());\r\n        const speedMultiplier = beatLength < 0 ? 100.0 / -beatLength : 1;\r\n        let timeSignature = TimeSignatures_1.TimeSignatures.SimpleQuadruple;\r\n        if (split.length >= 3)\r\n            timeSignature = split[2][0] === \"0\" ? TimeSignatures_1.TimeSignatures.SimpleQuadruple : parseInt(split[2]);\r\n        // TODO: sampleSet default\r\n        let sampleSet = this.defaultSampleBank;\r\n        if (split.length >= 4)\r\n            sampleSet = parseInt(split[3]);\r\n        let customSampleBank = 0;\r\n        if (split.length >= 5)\r\n            customSampleBank = parseInt(split[4]);\r\n        let sampleVolume = this.defaultSampleVolume;\r\n        if (split.length >= 6)\r\n            sampleVolume = parseInt(split[5]);\r\n        let timingChange = true;\r\n        if (split.length >= 7)\r\n            timingChange = split[6][0] === \"1\";\r\n        let kiaiMode = false;\r\n        let omitFirstBarSignature = false;\r\n        if (split.length >= 8) {\r\n            const effectFlags = parseInt(split[7]);\r\n            kiaiMode = hasFlag(effectFlags, LegacyEffectFlag_1.LegacyEffectFlags.Kiai);\r\n            omitFirstBarSignature = hasFlag(effectFlags, LegacyEffectFlag_1.LegacyEffectFlags.OmitFirstBarLine);\r\n        }\r\n        // This will receive the string value from the enum\r\n        let stringSampleSet = LegacySampleBank_1.LegacySampleBank[sampleSet].toLowerCase();\r\n        if (stringSampleSet === \"none\")\r\n            stringSampleSet = \"normal\";\r\n        if (timingChange) {\r\n            const controlPoint = this.createTimingControlPoint();\r\n            if (Number.isNaN(beatLength))\r\n                throw Error(\"NaN\");\r\n            else\r\n                controlPoint.beatLength = (0, index_1.clamp)(beatLength, MIN_BEAT_LENGTH, MAX_BEAT_LENGTH);\r\n            controlPoint.timeSignature = timeSignature;\r\n            this.addControlPoint(time, controlPoint, true);\r\n        }\r\n        {\r\n            const p = new LegacyDifficultyControlPoint(beatLength);\r\n            p.speedMultiplier = bindableNumberNew(speedMultiplier, { min: 0.1, max: 10, precision: 0.01 });\r\n            this.addControlPoint(time, p, timingChange);\r\n        }\r\n        {\r\n            const p = new EffectControlPoint_1.EffectControlPoint();\r\n            p.kiaiMode = kiaiMode;\r\n            p.omitFirstBarLine = omitFirstBarSignature;\r\n            this.addControlPoint(time, p, timingChange);\r\n        }\r\n        {\r\n            const p = new SampleControlPoint_1.SampleControlPoint();\r\n            p.sampleBank = stringSampleSet;\r\n            p.sampleVolume = sampleVolume;\r\n            // TODO:  Need LegacySampleControlPoint, but this is something we support later on\r\n            // p.customSampleBank = customSampleBank;\r\n            this.addControlPoint(time, p, timingChange);\r\n        }\r\n    }\r\n    createTimingControlPoint() {\r\n        return new TimingControlPoint_1.TimingControlPoint();\r\n    }\r\n    addControlPoint(time, point, timingChange) {\r\n        if (!(0, index_1.floatEqual)(time, this.pendingControlPointsTime)) {\r\n            this.flushPendingPoints();\r\n        }\r\n        if (timingChange) {\r\n            this.pendingControlPoints.splice(0, 0, point);\r\n        }\r\n        else {\r\n            this.pendingControlPoints.push(point);\r\n        }\r\n        this.pendingControlPointsTime = time;\r\n    }\r\n    flushPendingPoints() {\r\n        // Changes from non-timing-points are added to the end of the list (see addControlPoint()) and should override any\r\n        // changes from timing-points (added to the start of the list).\r\n        for (let i = this.pendingControlPoints.length - 1; i >= 0; i--) {\r\n            const type = this.pendingControlPoints[i].type;\r\n            if (this.pendingControlPointTypes[type])\r\n                continue;\r\n            this.pendingControlPointTypes[type] = true;\r\n            this.controlPointInfo.add(this.pendingControlPointsTime, this.pendingControlPoints[i]);\r\n        }\r\n        this.pendingControlPoints = [];\r\n        this.pendingControlPointTypes = {};\r\n    }\r\n    getOffsetTime(time) {\r\n        return time + (this.applyOffsets ? this.offset : 0);\r\n    }\r\n    parse() {\r\n        var _a;\r\n        if (!this.data)\r\n            throw new Error(\"No data given\");\r\n        const lines = this.data.split(\"\\n\").map((v) => v.trim());\r\n        for (const line of lines) {\r\n            try {\r\n                this.parseLine(line);\r\n            }\r\n            catch (err) {\r\n                console.error(`Failed to parse line ${line} due to: `, err);\r\n            }\r\n            if (this.isFinishedReading()) {\r\n                break;\r\n            }\r\n        }\r\n        this.flushPendingPoints();\r\n        return {\r\n            blueprintInfo: this.blueprintInfo,\r\n            defaultDifficulty: Object.assign(Object.assign({}, this.blueprintDifficulty), { \r\n                // Reasoning:\r\n                // https://github.com/ppy/osu/blob/b1fcb840a9ff4d866aac262ace7f54fa88b5e0ce/osu.Game/Beatmaps/BeatmapDifficulty.cs#L35\r\n                approachRate: (_a = this.blueprintDifficulty.approachRate) !== null && _a !== void 0 ? _a : this.blueprintDifficulty.overallDifficulty }),\r\n            hitObjectSettings: this.hitObjectSettings,\r\n            controlPointInfo: this.controlPointInfo,\r\n        };\r\n    }\r\n}\r\nBlueprintParser.LATEST_VERSION = 14;\r\nconst MIN_BEAT_LENGTH = 6;\r\nconst MAX_BEAT_LENGTH = 60000;\r\nconst DEFAULT_BEAT_LENGTH = 1000;\r\n// So precision is only used when not initializing?\r\n// The BindableNumber has a precision value but is not used when initialized\r\nfunction bindableNumberNew(val, { min, max, precision }) {\r\n    return (0, index_1.clamp)(val, min, max);\r\n    // return Math.round(val / precision) * precision;\r\n}\r\nexports.BlueprintSections = [\r\n    \"General\",\r\n    \"Metadata\",\r\n    \"Difficulty\",\r\n    \"HitObjects\",\r\n    \"TimingPoints\",\r\n    \"Events\",\r\n    \"Editor\",\r\n    \"Colours\",\r\n];\r\nconst defaultOptions = {\r\n    // TODO: Format version should actually be parsed\r\n    formatVersion: BlueprintParser.LATEST_VERSION,\r\n    sectionsToRead: exports.BlueprintSections,\r\n};\r\n/**\r\n * Parses the blueprint that is given in the legacy `.osu` format.\r\n * @param data the .osu file string\r\n * @param {BlueprintParseOptions} options config options\r\n * @param {BlueprintParseOptions} options.sectionsToRead list of sections that should be read\r\n */\r\nfunction parseBlueprint(data, options) {\r\n    const allOptions = Object.assign(Object.assign({}, defaultOptions), options);\r\n    const parser = new BlueprintParser(data, allOptions);\r\n    return parser.parse();\r\n}\r\nexports.parseBlueprint = parseBlueprint;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/blueprint/HitObjectSettings.ts\":\r\n/*!*************************************************!*\\\r\n  !*** ./src/core/blueprint/HitObjectSettings.ts ***!\r\n  \\*************************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/gameplay/GameState.ts\":\r\n/*!****************************************!*\\\r\n  !*** ./src/core/gameplay/GameState.ts ***!\r\n  \\****************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.cloneGameState = exports.defaultGameState = exports.NOT_PRESSING = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nexports.NOT_PRESSING = +727727727;\r\nconst HitCircleMissReasons = [\r\n    // When the time has expired and the circle got force killed.\r\n    \"TIME_EXPIRED\",\r\n    // There is no HIT_TOO_LATE because TIME_EXPIRED would occur earlier.\r\n    \"HIT_TOO_EARLY\",\r\n    // This is only possible in osu!lazer where clicking a later circle can cause this circle to be force missed.\r\n    \"FORCE_MISS_NOTELOCK\",\r\n    // If the user had time to press the hitCircle until time 300, but the slider is so short that it ends at 200,\r\n    // then the user actually has a reduced hit window for hitting it.\r\n    \"SLIDER_FINISHED_FASTER\",\r\n];\r\nconst defaultGameState = () => ({\r\n    eventIndex: 0,\r\n    currentTime: 0,\r\n    cursorPosition: index_1.Vec2.Zero,\r\n    hitCircleVerdict: {},\r\n    sliderBodyState: new Map(),\r\n    checkPointVerdict: {},\r\n    spinnerState: new Map(),\r\n    sliderVerdict: {},\r\n    clickWasUseful: false,\r\n    // Rest are used for optimizations\r\n    latestHitObjectIndex: 0,\r\n    aliveHitCircleIds: new Set(),\r\n    aliveSliderIds: new Set(),\r\n    aliveSpinnerIds: new Set(),\r\n    // Also used as an optimization\r\n    judgedObjects: [],\r\n    pressingSince: [exports.NOT_PRESSING, exports.NOT_PRESSING],\r\n});\r\nexports.defaultGameState = defaultGameState;\r\nfunction cloneGameState(replayState) {\r\n    const { aliveHitCircleIds, aliveSliderIds, aliveSpinnerIds, spinnerState, sliderBodyState, checkPointVerdict, hitCircleVerdict, sliderVerdict, eventIndex, clickWasUseful, currentTime, cursorPosition, latestHitObjectIndex, pressingSince, judgedObjects, } = replayState;\r\n    return {\r\n        eventIndex: eventIndex,\r\n        aliveHitCircleIds: new Set(aliveHitCircleIds),\r\n        aliveSliderIds: new Set(aliveSliderIds),\r\n        aliveSpinnerIds: new Set(aliveSpinnerIds),\r\n        hitCircleVerdict: Object.assign({}, hitCircleVerdict),\r\n        sliderVerdict: Object.assign({}, sliderVerdict),\r\n        checkPointVerdict: Object.assign({}, checkPointVerdict),\r\n        currentTime: currentTime,\r\n        cursorPosition: cursorPosition,\r\n        latestHitObjectIndex: latestHitObjectIndex,\r\n        judgedObjects: [...judgedObjects],\r\n        clickWasUseful: clickWasUseful,\r\n        sliderBodyState: new Map(sliderBodyState),\r\n        spinnerState: new Map(spinnerState),\r\n        pressingSince: pressingSince.slice(),\r\n    };\r\n}\r\nexports.cloneGameState = cloneGameState;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/gameplay/GameStateEvaluator.ts\":\r\n/*!*************************************************!*\\\r\n  !*** ./src/core/gameplay/GameStateEvaluator.ts ***!\r\n  \\*************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.newPressingSince = exports.GameStateEvaluator = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst GameState_1 = __webpack_require__(/*! ./GameState */ \"./src/core/gameplay/GameState.ts\");\r\nconst Types_1 = __webpack_require__(/*! ../hitobjects/Types */ \"./src/core/hitobjects/Types.ts\");\r\nconst Replay_1 = __webpack_require__(/*! ../replays/Replay */ \"./src/core/replays/Replay.ts\");\r\nconst Mods_1 = __webpack_require__(/*! ../mods/Mods */ \"./src/core/mods/Mods.ts\");\r\nfunction generateEvents(beatmap, hitWindows) {\r\n    const events = [];\r\n    const mehHitWindow = hitWindows[2];\r\n    const pushHitCircleEvents = (h) => {\r\n        events.push({ time: h.hitTime - h.approachDuration, hitObjectId: h.id, type: \"HIT_CIRCLE_SPAWN\" });\r\n        // TODO: In case you are allowed to press late -> +1 additional\r\n        events.push({ time: h.hitTime + mehHitWindow + 1, hitObjectId: h.id, type: \"HIT_CIRCLE_FORCE_KILL\" });\r\n    };\r\n    for (const h of beatmap.hitObjects) {\r\n        if ((0, Types_1.isHitCircle)(h)) {\r\n            pushHitCircleEvents(h);\r\n        }\r\n        else if ((0, Types_1.isSlider)(h)) {\r\n            pushHitCircleEvents(h.head);\r\n            events.push({ time: h.startTime, hitObjectId: h.id, type: \"SLIDER_START\" });\r\n            events.push({ time: h.endTime, hitObjectId: h.id, type: \"SLIDER_END\" });\r\n            h.checkPoints.forEach((c) => {\r\n                events.push({ time: c.hitTime, hitObjectId: c.id, type: \"SLIDER_CHECK_POINT\" });\r\n            });\r\n        }\r\n        else if ((0, Types_1.isSpinner)(h)) {\r\n            events.push({ time: h.startTime, hitObjectId: h.id, type: \"SPINNER_START\" });\r\n            events.push({ time: h.endTime, hitObjectId: h.id, type: \"SPINNER_END\" });\r\n        }\r\n    }\r\n    // TODO: What if 2B maps?\r\n    events.sort((a, b) => a.time - b.time);\r\n    return events;\r\n}\r\nconst defaultOptions = {\r\n    noteLockStyle: \"STABLE\",\r\n    hitWindowStyle: \"OSU_STABLE\",\r\n};\r\nconst HitObjectVerdicts = {\r\n    GREAT: 0,\r\n    OK: 1,\r\n    MEH: 2,\r\n    MISS: 3,\r\n};\r\nfunction isWithinHitWindow(hitWindow, delta, verdict) {\r\n    return Math.abs(delta) <= hitWindow[HitObjectVerdicts[verdict]];\r\n}\r\nclass GameStateEvaluator {\r\n    constructor(beatmap, options) {\r\n        this.beatmap = beatmap;\r\n        this.gameState = (0, GameState_1.defaultGameState)();\r\n        this.frame = { time: 0, position: { x: 0, y: 0 }, actions: [] };\r\n        this.options = Object.assign(Object.assign({}, defaultOptions), options);\r\n        this.hitWindows = (0, index_1.hitWindowsForOD)(beatmap.difficulty.overallDifficulty, this.options.hitWindowStyle === \"OSU_LAZER\");\r\n        this.events = generateEvents(beatmap, this.hitWindows);\r\n    }\r\n    judgeHitCircle(id, verdict) {\r\n        this.gameState.hitCircleVerdict[id] = verdict;\r\n        this.gameState.aliveHitCircleIds.delete(id);\r\n        this.gameState.judgedObjects.push(id);\r\n    }\r\n    handleHitCircleSpawn(time, hitCircleId) {\r\n        this.gameState.aliveHitCircleIds.add(hitCircleId);\r\n    }\r\n    handleHitCircleForceKill(time, hitCircleId) {\r\n        // Already dead? The shinigami will just leave...\r\n        if (!this.gameState.aliveHitCircleIds.has(hitCircleId)) {\r\n            return;\r\n        }\r\n        // Otherwise we force kill for not being hit by the player ...\r\n        const verdict = { judgementTime: time, type: \"MISS\", missReason: \"TIME_EXPIRED\" };\r\n        this.judgeHitCircle(hitCircleId, verdict);\r\n    }\r\n    handleSliderStart(time, sliderId) {\r\n        this.gameState.aliveSliderIds.add(sliderId);\r\n    }\r\n    handleSliderEnding(time, sliderId) {\r\n        var _a;\r\n        const slider = this.beatmap.getSlider(sliderId);\r\n        const headVerdict = this.gameState.hitCircleVerdict[slider.head.id];\r\n        // Clean up the head if it hasn't been interacted with the player in any way.\r\n        if (headVerdict === undefined) {\r\n            this.judgeHitCircle(slider.head.id, {\r\n                judgementTime: slider.endTime,\r\n                type: \"MISS\",\r\n                missReason: \"SLIDER_FINISHED_FASTER\",\r\n            });\r\n        }\r\n        // Now count the hit checkpoints and get the verdict\r\n        const totalCheckpoints = slider.checkPoints.length + 1;\r\n        let hitCheckpoints = 0;\r\n        if (!(headVerdict === undefined || headVerdict.type === \"MISS\"))\r\n            hitCheckpoints++;\r\n        for (const c of slider.checkPoints) {\r\n            hitCheckpoints += ((_a = this.gameState.checkPointVerdict[c.id]) === null || _a === void 0 ? void 0 : _a.hit) ? 1 : 0;\r\n        }\r\n        this.gameState.sliderVerdict[slider.id] = sliderVerdictBasedOnCheckpoints(totalCheckpoints, hitCheckpoints);\r\n        this.gameState.judgedObjects.push(slider.id);\r\n        // The head should not be alive\r\n        this.gameState.aliveSliderIds.delete(sliderId);\r\n        this.gameState.sliderBodyState.delete(sliderId);\r\n    }\r\n    predictedCursorPositionAt(time) {\r\n        const previousTime = this.gameState.currentTime;\r\n        const nextTime = this.frame.time;\r\n        const previousPosition = this.gameState.cursorPosition;\r\n        const nextPosition = this.frame.position;\r\n        if (previousTime === nextTime)\r\n            return previousPosition;\r\n        const f = (time - previousTime) / (nextTime - previousTime);\r\n        return index_1.Vec2.interpolate(previousPosition, nextPosition, f);\r\n    }\r\n    handleSliderCheckPoint(time, id) {\r\n        const cursorPosition = this.predictedCursorPositionAt(time);\r\n        const checkPoint = this.beatmap.getSliderCheckPoint(id);\r\n        this.updateSliderBodyTracking(time, cursorPosition, this.gameState.pressingSince);\r\n        const sliderId = checkPoint.slider.id;\r\n        const state = this.gameState.sliderBodyState.get(sliderId);\r\n        if (state === undefined) {\r\n            throw Error(\"Somehow the slider body has no state while there is a checkpoint alive.\");\r\n        }\r\n        this.gameState.checkPointVerdict[id] = { hit: state.isTracking };\r\n        this.gameState.judgedObjects.push(id);\r\n    }\r\n    handleSpinnerStart(id) {\r\n        this.gameState.aliveSpinnerIds.add(id);\r\n    }\r\n    handleSpinnerEnd(id) {\r\n        this.gameState.aliveSpinnerIds.delete(id);\r\n        this.gameState.judgedObjects.push(id);\r\n    }\r\n    handleEvent(event) {\r\n        const { hitObjectId, time, type } = event;\r\n        switch (type) {\r\n            case \"HIT_CIRCLE_SPAWN\":\r\n                this.handleHitCircleSpawn(time, hitObjectId);\r\n                break;\r\n            case \"HIT_CIRCLE_FORCE_KILL\":\r\n                this.handleHitCircleForceKill(time, hitObjectId);\r\n                break;\r\n            case \"SLIDER_START\":\r\n                this.handleSliderStart(time, hitObjectId);\r\n                break;\r\n            case \"SLIDER_END\":\r\n                this.handleSliderEnding(time, hitObjectId);\r\n                break;\r\n            case \"SLIDER_CHECK_POINT\":\r\n                this.handleSliderCheckPoint(time, hitObjectId);\r\n                break;\r\n            case \"SPINNER_START\":\r\n                this.handleSpinnerStart(hitObjectId);\r\n                break;\r\n            case \"SPINNER_END\":\r\n                this.handleSpinnerEnd(hitObjectId);\r\n                break;\r\n        }\r\n    }\r\n    handleAliveHitCircles() {\r\n        // There is only action if there is also a click in this frame ...\r\n        const hasRelax = this.beatmap.appliedMods.includes(\"RELAX\");\r\n        if (!this.hasFreshClickThisFrame && !hasRelax) {\r\n            return;\r\n        }\r\n        const { noteLockStyle } = this.options;\r\n        const currentTime = this.gameState.currentTime;\r\n        let noteLocked = false;\r\n        // JavaScript `Set` maintains its elements in insertion order so the early ones\r\n        // we iterate on are also the ones that are supposed to be hit first ...\r\n        // We copy because the values into an array because we might delete them ...\r\n        const hitCircleIds = Array.from(this.gameState.aliveHitCircleIds.values());\r\n        for (let i = 0; i < hitCircleIds.length; i++) {\r\n            const id = hitCircleIds[i];\r\n            const hitCircle = this.beatmap.getHitCircle(id);\r\n            const cursorInside = index_1.Vec2.withinDistance(hitCircle.position, this.gameState.cursorPosition, Math.fround(hitCircle.radius));\r\n            if (!cursorInside) {\r\n                // We put a lock on the other circles because the first alive HitCircle is the only circle we can interact with.\r\n                if (noteLockStyle === \"STABLE\") {\r\n                    noteLocked = true;\r\n                }\r\n                // It's a bit fairer because this allows us to force miss notes that are in the past.\r\n                if (noteLockStyle === \"LAZER\" && currentTime <= hitCircle.hitTime) {\r\n                    noteLocked = true;\r\n                }\r\n                continue;\r\n            }\r\n            // If we got note locked, we want to set an animation then ignore the other hit circles\r\n            if (noteLocked) {\r\n                // TODO: Set state of `id` to be noteLocked at the current time (this allows us to show an \"shaking\" animation)\r\n                break;\r\n            }\r\n            // If this hitobject is too early for relax, then the other ones will be as well, so break.\r\n            const delta = currentTime - hitCircle.hitTime;\r\n            if (hasRelax && delta < -Mods_1.RELAX_LENIENCY)\r\n                break;\r\n            let judged = false;\r\n            for (const verdict of [\"GREAT\", \"OK\", \"MEH\"]) {\r\n                if (isWithinHitWindow(this.hitWindows, delta, verdict)) {\r\n                    this.judgeHitCircle(hitCircle.id, { judgementTime: currentTime, type: verdict });\r\n                    judged = true;\r\n                    break;\r\n                }\r\n            }\r\n            // TODO: Force miss other notes less than i for lazer style\r\n            if (judged)\r\n                break;\r\n            if (isWithinHitWindow(this.hitWindows, delta, \"MISS\")) {\r\n                // TODO: Add a \"HIT_TOO_LATE\" (even though it's kinda unfair, but this is osu!stable behavior)\r\n                // For some reason in osu!stable the HitCircle that has a MEH time of let's say +-109.5ms is still alive at\r\n                // t+110ms and can be \"clicked\" by the user at time t+110ms, but it will just result in a miss. The problem is\r\n                // that the underlying note will then be ignored because the click is \"wasted\" for the already expired hit\r\n                // circle. => This might be a stable bug or feature?\r\n                this.judgeHitCircle(hitCircle.id, { judgementTime: currentTime, type: \"MISS\", missReason: \"HIT_TOO_EARLY\" });\r\n                judged = true;\r\n            }\r\n            // TODO: Do we force miss other notes as well? for lazer style\r\n            if (judged)\r\n                break;\r\n        }\r\n    }\r\n    get hasFreshClickThisFrame() {\r\n        return this.gameState.pressingSince.includes(this.gameState.currentTime);\r\n    }\r\n    headHitTime(headId) {\r\n        const verdict = this.gameState.hitCircleVerdict[headId];\r\n        if (!verdict || verdict.type === \"MISS\")\r\n            return undefined;\r\n        return verdict.judgementTime;\r\n    }\r\n    updateSliderBodyTracking(time, cursorPosition, pressingSince) {\r\n        var _a, _b;\r\n        for (const id of this.gameState.aliveSliderIds) {\r\n            const slider = this.beatmap.getSlider(id);\r\n            const headHitTime = this.headHitTime(slider.head.id);\r\n            const wasTracking = (_b = (_a = this.gameState.sliderBodyState.get(id)) === null || _a === void 0 ? void 0 : _a.isTracking) !== null && _b !== void 0 ? _b : false;\r\n            const hasRelax = this.beatmap.appliedMods.includes(\"RELAX\");\r\n            const isTracking = determineTracking(wasTracking, slider, cursorPosition, time, pressingSince, headHitTime, hasRelax);\r\n            this.gameState.sliderBodyState.set(id, { isTracking });\r\n        }\r\n    }\r\n    // Process the events until event[i].time <= maxTimeInclusive is no longer valid.\r\n    handleEventsUntilTime(maxTimeInclusive) {\r\n        const { gameState, events } = this;\r\n        while (gameState.eventIndex < events.length) {\r\n            const event = events[gameState.eventIndex];\r\n            if (event.time > maxTimeInclusive) {\r\n                break;\r\n            }\r\n            gameState.eventIndex += 1;\r\n            this.handleEvent(event);\r\n        }\r\n    }\r\n    evaluate(gameState, frame) {\r\n        this.gameState = gameState;\r\n        this.frame = frame;\r\n        // 1. Deal with hit objects that are only affected with movement (sliders, spinners)\r\n        // Tbh in my first version I have this.handleEventsUntilTime(frame.time) right now, which makes more sense.\r\n        this.handleEventsUntilTime(frame.time - 1);\r\n        // 2. Now consider things that get affected by releasing / clicking at this particular time.\r\n        this.gameState.cursorPosition = frame.position;\r\n        this.gameState.currentTime = frame.time;\r\n        this.gameState.pressingSince = (0, exports.newPressingSince)(this.gameState.pressingSince, frame.actions, frame.time);\r\n        this.gameState.clickWasUseful = false;\r\n        this.handleAliveHitCircles();\r\n        this.updateSliderBodyTracking(frame.time, frame.position, this.gameState.pressingSince);\r\n        // 3. Deal with events after the click such as force killing a HitCircle\r\n        this.handleEventsUntilTime(frame.time);\r\n    }\r\n}\r\nexports.GameStateEvaluator = GameStateEvaluator;\r\nconst sliderProgress = (slider, time) => (time - slider.startTime) / slider.duration;\r\n/**\r\n * SliderTracking is described in a complicated way in osu!lazer, but it can be boiled down to:\r\n *\r\n * * A key must be pressed (?)\r\n * * Slider tracking is only done between slider.startTime (inclusively) and slider.endTime\r\n * (exclusively).\r\n * * The follow circle is scaled up to 2.4 if tracking, and down to 1.0 if not tracking, the cursor should be\r\n * in the follow circle.\r\n * * Additionally there are two states of a slider:\r\n *  - Either the header was not hit, then we can accept any key for slider tracking.\r\n *\r\n *  - If the head was hit at `t`, then we can only restrict the keys to \"fresh\" clicks, which means clicks not\r\n * before t.\r\n *\r\n * Note that the state can be 1. at first and then transition to 2.\r\n *\r\n * In osu!lazer the tracking follows the visual tracking:\r\n * https://discord.com/channels/188630481301012481/188630652340404224/865648740810883112\r\n * https://github.com/ppy/osu/blob/6cec1145e3510eb27c6fbeb0f93967d2d872e600/osu.Game.Rulesets.Osu/Mods/OsuModClassic.cs#L61\r\n * The slider ball actually gradually scales to 2.4 (duration: 300ms, method: Easing.OutQuint) which means that at the\r\n * beginning the cursor has less leeway than after 300ms, while in osu!stable you instantly have the maximum leeway. In\r\n * osu!lazer it's actually a little bit harder than osu!stable.\r\n */\r\nfunction determineTracking(previouslyTracking, slider, cursorPosition, time, pressingSince, headHitTime, hasRelax) {\r\n    const keyIsBeingPressed = pressingSince.findIndex((x) => x !== GameState_1.NOT_PRESSING) >= 0;\r\n    // Zeroth condition\r\n    if (!keyIsBeingPressed && !hasRelax)\r\n        return false;\r\n    // First condition\r\n    if (time < slider.startTime || slider.endTime <= time)\r\n        return false;\r\n    // Second condition\r\n    const progress = sliderProgress(slider, time);\r\n    const followCircleRadius = (previouslyTracking ? 2.4 : 1.0) * slider.radius;\r\n    const distanceCursorToBall = index_1.Vec2.distance(slider.ballPositionAt(progress), cursorPosition);\r\n    if (distanceCursorToBall > followCircleRadius)\r\n        return false;\r\n    // Now last condition\r\n    // State 1\r\n    if (headHitTime === undefined)\r\n        return true; // Since any key is ok\r\n    // For the click that was done at t=headHitTime: t >= headHitTime is true.\r\n    // In the other case, we require a fresh click\r\n    // State 2 (requiring a fresh click)\r\n    return pressingSince.findIndex((x) => x >= headHitTime) >= 0;\r\n}\r\nfunction sliderVerdictBasedOnCheckpoints(totalCheckpoints, hitCheckpoints) {\r\n    if (hitCheckpoints === totalCheckpoints)\r\n        return \"GREAT\";\r\n    if (hitCheckpoints === 0)\r\n        return \"MISS\";\r\n    if (hitCheckpoints * 2 >= totalCheckpoints)\r\n        return \"OK\";\r\n    return \"MEH\";\r\n}\r\n// Maybe hitObjects should be flattened out (nested pulled out)\r\n// The mods should be applied to those them ...\r\nconst actionsToBooleans = (osuActions) => [\r\n    osuActions.includes(Replay_1.OsuAction.leftButton),\r\n    osuActions.includes(Replay_1.OsuAction.rightButton),\r\n];\r\nconst newPressingSince = (pressingSince, osuActions, time) => {\r\n    const pressed = actionsToBooleans(osuActions);\r\n    const newPressingSince = [...pressingSince];\r\n    for (let i = 0; i < newPressingSince.length; i++) {\r\n        if (pressed[i]) {\r\n            newPressingSince[i] = Math.min(newPressingSince[i], time);\r\n        }\r\n        else {\r\n            newPressingSince[i] = GameState_1.NOT_PRESSING;\r\n        }\r\n    }\r\n    return newPressingSince;\r\n};\r\nexports.newPressingSince = newPressingSince;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/gameplay/GameStateTimeMachine.ts\":\r\n/*!***************************************************!*\\\r\n  !*** ./src/core/gameplay/GameStateTimeMachine.ts ***!\r\n  \\***************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.BucketedGameStateTimeMachine = void 0;\r\nconst GameState_1 = __webpack_require__(/*! ./GameState */ \"./src/core/gameplay/GameState.ts\");\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst GameStateEvaluator_1 = __webpack_require__(/*! ./GameStateEvaluator */ \"./src/core/gameplay/GameStateEvaluator.ts\");\r\n/**\r\n * By default O(R sqrt n) memory and O(sqrt n) time, where R is the size of a replay state.\r\n * Stores replays at the indices [0, sqrt n, 2 *sqrt n, ..., sqrt n * sqrt n] and the others are inferred.\r\n *\r\n * TODO: We could do caching like described in method 4 of\r\n * https://gamedev.stackexchange.com/questions/6080/how-to-design-a-replay-system/8372#8372 TODO: Should we\r\n * Object.freeze(...) the cached ones in order to prevent accidental mutations?\r\n */\r\nclass BucketedGameStateTimeMachine {\r\n    constructor(initialKnownFrames, beatmap, \r\n    // private readonly hitObjects: OsuHitObject[],\r\n    settings, bucketSize) {\r\n        this.beatmap = beatmap;\r\n        this.settings = settings;\r\n        // 0 stands for initial state\r\n        // and i means that i frames have been processed\r\n        this.currentIndex = 0;\r\n        this.storedGameState = [];\r\n        // Add a dummy replay frame at the beginning.\r\n        this.frames = [{ time: -727727, position: new index_1.Vec2(0, 0), actions: [] }, ...initialKnownFrames];\r\n        this.bucketSize = bucketSize !== null && bucketSize !== void 0 ? bucketSize : Math.ceil(Math.sqrt(this.frames.length));\r\n        this.storedGameState[0] = (0, GameState_1.defaultGameState)();\r\n        this.currentGameState = (0, GameState_1.cloneGameState)(this.storedGameState[0]);\r\n        this.evaluator = new GameStateEvaluator_1.GameStateEvaluator(beatmap, settings);\r\n    }\r\n    getHighestCachedIndex(time) {\r\n        for (let i = 0; i < this.frames.length; i += this.bucketSize) {\r\n            // The second condition should not happen in our version of implementation where we travel forward.\r\n            if (time < this.frames[i].time || !this.storedGameState[i]) {\r\n                return i - this.bucketSize;\r\n            }\r\n        }\r\n        return 0;\r\n    }\r\n    gameStateAt(time) {\r\n        const highestCachedIndex = this.getHighestCachedIndex(time);\r\n        // TODO: Just check if we had normal forward behavior or not, this can drastically improve performance\r\n        // If not, we need to reset something such as the derived data.\r\n        // Either we have to travel back anyways or there is a future index available for that time.\r\n        if (this.currentIndex < highestCachedIndex || time < this.frames[this.currentIndex].time) {\r\n            this.currentIndex = highestCachedIndex;\r\n            this.currentGameState = (0, GameState_1.cloneGameState)(this.storedGameState[this.currentIndex]);\r\n        }\r\n        // Check if we need to move forward in time\r\n        while (this.currentIndex + 1 < this.frames.length) {\r\n            const nextFrame = this.frames[this.currentIndex + 1];\r\n            if (time < nextFrame.time) {\r\n                break;\r\n            }\r\n            this.evaluator.evaluate(this.currentGameState, nextFrame);\r\n            this.currentIndex += 1;\r\n            // Caching the state at a multiple of bucketSize\r\n            if (this.currentIndex % this.bucketSize === 0) {\r\n                this.storedGameState[this.currentIndex] = (0, GameState_1.cloneGameState)(this.currentGameState);\r\n            }\r\n        }\r\n        return this.currentGameState;\r\n    }\r\n}\r\nexports.BucketedGameStateTimeMachine = BucketedGameStateTimeMachine;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/gameplay/GameplayAnalysisEvent.ts\":\r\n/*!****************************************************!*\\\r\n  !*** ./src/core/gameplay/GameplayAnalysisEvent.ts ***!\r\n  \\****************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.retrieveEvents = exports.isHitObjectJudgement = void 0;\r\nconst index_1 = __webpack_require__(/*! ../utils/index */ \"./src/core/utils/index.ts\");\r\n// Type predicates\r\nconst isHitObjectJudgement = (h) => h.type === \"HitObjectJudgement\";\r\nexports.isHitObjectJudgement = isHitObjectJudgement;\r\n// This is osu!stable style and is also only recommended for offline processing.\r\n// In the future, where something like online replay streaming is implemented, this implementation will ofc be too slow.\r\nfunction retrieveEvents(gameState, hitObjects) {\r\n    var _a;\r\n    const events = [];\r\n    const dict = (0, index_1.normalizeHitObjects)(hitObjects);\r\n    // HitCircle judgements (SliderHeads included and indicated)\r\n    for (const id in gameState.hitCircleVerdict) {\r\n        const state = gameState.hitCircleVerdict[id];\r\n        const hitCircle = dict[id];\r\n        const isSliderHead = hitCircle.sliderId !== undefined;\r\n        const verdict = state.type;\r\n        events.push({\r\n            type: \"HitObjectJudgement\",\r\n            time: state.judgementTime,\r\n            hitObjectId: id,\r\n            position: hitCircle.position,\r\n            verdict,\r\n            isSliderHead,\r\n        });\r\n    }\r\n    for (const id in gameState.sliderVerdict) {\r\n        const verdict = gameState.sliderVerdict[id];\r\n        // Slider judgement events\r\n        const slider = dict[id];\r\n        const position = slider.endPosition;\r\n        events.push({ time: slider.endTime, hitObjectId: id, position, verdict, type: \"HitObjectJudgement\" });\r\n        // CheckpointEvents\r\n        for (const point of slider.checkPoints) {\r\n            const checkPointState = gameState.checkPointVerdict[point.id];\r\n            const hit = (_a = checkPointState === null || checkPointState === void 0 ? void 0 : checkPointState.hit) !== null && _a !== void 0 ? _a : false;\r\n            const isLastTick = point.type === \"LAST_LEGACY_TICK\";\r\n            events.push({ time: slider.endTime, position: point.position, type: \"CheckpointJudgement\", hit, isLastTick });\r\n        }\r\n    }\r\n    // TODO: Spinner nested ticks events\r\n    return events;\r\n}\r\nexports.retrieveEvents = retrieveEvents;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/gameplay/GameplayInfo.ts\":\r\n/*!*******************************************!*\\\r\n  !*** ./src/core/gameplay/GameplayInfo.ts ***!\r\n  \\*******************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\n/**\r\n * Shows the statistics\r\n */\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.GameplayInfoEvaluator = exports.defaultGameplayInfo = exports.osuStableAccuracy = void 0;\r\nconst HitCircle_1 = __webpack_require__(/*! ../hitobjects/HitCircle */ \"./src/core/hitobjects/HitCircle.ts\");\r\nconst Slider_1 = __webpack_require__(/*! ../hitobjects/Slider */ \"./src/core/hitobjects/Slider.ts\");\r\nconst SliderCheckPoint_1 = __webpack_require__(/*! ../hitobjects/SliderCheckPoint */ \"./src/core/hitobjects/SliderCheckPoint.ts\");\r\nfunction updateComboInfo(combo, type, hit) {\r\n    let currentCombo = combo.currentCombo;\r\n    switch (type) {\r\n        case \"HIT_CIRCLE\":\r\n        case \"TICK\":\r\n        case \"REPEAT\":\r\n        case \"SPINNER\":\r\n            currentCombo = hit ? currentCombo + 1 : 0;\r\n            break;\r\n        case \"LAST_LEGACY_TICK\":\r\n            // Slider ends do not break the combo, but they can increase them\r\n            currentCombo += hit ? 1 : 0;\r\n            break;\r\n        case \"SLIDER\":\r\n            // For sliders there is no combo update\r\n            break;\r\n    }\r\n    return { currentCombo, maxComboSoFar: Math.max(combo.maxComboSoFar, currentCombo) };\r\n}\r\n/** ACC **/\r\n/**\r\n * Returns a number between 0 and 1 using osu!stable accuracy logic.\r\n * Also returns undefined if there is no count\r\n *\r\n * @param count counts of 300, 100, 50, 0 (in this order)\r\n */\r\nfunction osuStableAccuracy(count) {\r\n    if (count.length !== 4) {\r\n        return undefined;\r\n    }\r\n    const JudgementScores = [300, 100, 50, 0];\r\n    let perfect = 0, actual = 0;\r\n    for (let i = 0; i < count.length; i++) {\r\n        actual += JudgementScores[i] * count[i];\r\n        perfect += JudgementScores[0] * count[i];\r\n    }\r\n    if (perfect === 0) {\r\n        return undefined;\r\n    }\r\n    return actual / perfect;\r\n}\r\nexports.osuStableAccuracy = osuStableAccuracy;\r\n//https://osu.ppy.sh/wiki/en/Score/ScoreV1\r\nconst defaultEvaluationOptions = {\r\n    scoringSystem: \"ScoreV1\",\r\n};\r\nexports.defaultGameplayInfo = Object.freeze({\r\n    currentCombo: 0,\r\n    maxComboSoFar: 0,\r\n    verdictCounts: [0, 0, 0, 0],\r\n    accuracy: 0,\r\n    score: 0,\r\n});\r\n/**\r\n * Calculating: Count, Accuracy, Combo, MaxCombo\r\n * The one who is calling this has to make sure that slider heads are not considered in case they are using osu!stable\r\n * calculation.\r\n */\r\nclass GameplayInfoEvaluator {\r\n    constructor(beatmap, options) {\r\n        this.beatmap = beatmap;\r\n        this.options = Object.assign(Object.assign({}, defaultEvaluationOptions), options);\r\n        this.comboInfo = { maxComboSoFar: 0, currentCombo: 0 };\r\n        this.verdictCount = { MISS: 0, MEH: 0, GREAT: 0, OK: 0 };\r\n        this.judgedObjectsIndex = 0;\r\n        // TODO: Do some initialization for calculating ScoreV2 (like max score)\r\n    }\r\n    evaluateHitObject(hitObjectType, verdict, isSliderHead) {\r\n        this.comboInfo = updateComboInfo(this.comboInfo, hitObjectType, verdict !== \"MISS\");\r\n        if (!isSliderHead) {\r\n            this.verdictCount[verdict] += 1;\r\n        }\r\n    }\r\n    evaluateSliderCheckpoint(hitObjectType, hit) {\r\n        this.comboInfo = updateComboInfo(this.comboInfo, hitObjectType, hit);\r\n    }\r\n    countAsArray() {\r\n        return [\"GREAT\", \"OK\", \"MEH\", \"MISS\"].map((v) => this.verdictCount[v]);\r\n    }\r\n    evaluateReplayState(replayState) {\r\n        var _a;\r\n        // Assume something like seeking backwards happened at reevaluate\r\n        if (this.judgedObjectsIndex >= replayState.judgedObjects.length + 1) {\r\n            this.comboInfo = { maxComboSoFar: 0, currentCombo: 0 };\r\n            this.verdictCount = { MISS: 0, MEH: 0, GREAT: 0, OK: 0 };\r\n            this.judgedObjectsIndex = 0;\r\n        }\r\n        while (this.judgedObjectsIndex < replayState.judgedObjects.length) {\r\n            const id = replayState.judgedObjects[this.judgedObjectsIndex++];\r\n            const hitObject = this.beatmap.getHitObject(id);\r\n            if (hitObject instanceof SliderCheckPoint_1.SliderCheckPoint) {\r\n                const hit = replayState.checkPointVerdict[hitObject.id].hit;\r\n                this.evaluateSliderCheckpoint(hitObject.type, hit);\r\n            }\r\n            else if (hitObject instanceof HitCircle_1.HitCircle) {\r\n                const verdict = replayState.hitCircleVerdict[id].type;\r\n                const isSliderHead = hitObject.sliderId !== undefined;\r\n                this.evaluateHitObject(hitObject.type, verdict, isSliderHead);\r\n            }\r\n            else if (hitObject instanceof Slider_1.Slider) {\r\n                const verdict = replayState.sliderVerdict[hitObject.id];\r\n                this.evaluateHitObject(hitObject.type, verdict);\r\n            }\r\n            else {\r\n                // Spinner\r\n                // TODO: We just going to assume that they hit it\r\n                this.evaluateHitObject(\"SPINNER\", \"GREAT\");\r\n            }\r\n        }\r\n        const counts = this.countAsArray();\r\n        return {\r\n            score: 0,\r\n            verdictCounts: counts,\r\n            accuracy: (_a = osuStableAccuracy(counts)) !== null && _a !== void 0 ? _a : 1.0,\r\n            currentCombo: this.comboInfo.currentCombo,\r\n            maxComboSoFar: this.comboInfo.maxComboSoFar,\r\n        };\r\n    }\r\n}\r\nexports.GameplayInfoEvaluator = GameplayInfoEvaluator;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/gameplay/Verdicts.ts\":\r\n/*!***************************************!*\\\r\n  !*** ./src/core/gameplay/Verdicts.ts ***!\r\n  \\***************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/HitCircle.ts\":\r\n/*!******************************************!*\\\r\n  !*** ./src/core/hitobjects/HitCircle.ts ***!\r\n  \\******************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.HitCircle = void 0;\r\nclass HitCircle {\r\n    constructor() {\r\n        this.id = \"\";\r\n        this.hitTime = 0;\r\n        this.approachDuration = 0;\r\n        this.fadeInDuration = 0;\r\n        this.comboSetIndex = 0;\r\n        this.withinComboSetIndex = 0;\r\n        this.scale = 1;\r\n        this.position = { x: 0, y: 0 };\r\n        // Only used because there's a bug in the Flashlight difficulty processing\r\n        this.unstackedPosition = { x: 0, y: 0 };\r\n    }\r\n    get type() {\r\n        return \"HIT_CIRCLE\";\r\n    }\r\n    get radius() {\r\n        return HitCircle.OBJECT_RADIUS * this.scale;\r\n    }\r\n    get spawnTime() {\r\n        return this.hitTime - this.approachDuration;\r\n    }\r\n    get timeFadeIn() {\r\n        return this.fadeInDuration;\r\n    }\r\n    opacityAt(time, hidden) {\r\n        if (time > this.hitTime) {\r\n            return 0.0;\r\n        }\r\n        let fadeInStartTime = this.spawnTime;\r\n        let fadeInDuration = this.timeFadeIn;\r\n        if (hidden) {\r\n            let fadeOutStartTime = fadeInStartTime + fadeInDuration;\r\n            let fadeOutDuration = this.approachDuration * 0.3;\r\n            return Math.min(Math.min(Math.max((time - fadeInStartTime) / fadeInDuration, 0), 1), 1.0 - Math.min(Math.max((time - fadeOutStartTime) / fadeOutDuration, 0), 1));\r\n        }\r\n        return Math.min(Math.max((time - fadeInStartTime) / fadeInDuration, 0), 1);\r\n    }\r\n}\r\nexports.HitCircle = HitCircle;\r\nHitCircle.OBJECT_RADIUS = 64;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/Slider.ts\":\r\n/*!***************************************!*\\\r\n  !*** ./src/core/hitobjects/Slider.ts ***!\r\n  \\***************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Slider = void 0;\r\nconst SliderPath_1 = __webpack_require__(/*! ./slider/SliderPath */ \"./src/core/hitobjects/slider/SliderPath.ts\");\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nclass Slider {\r\n    constructor(hitCircle) {\r\n        this.id = \"\";\r\n        this.path = new SliderPath_1.SliderPath([]);\r\n        this.checkPoints = [];\r\n        this.velocity = 1;\r\n        this.tickDistance = 0;\r\n        this.tickDistanceMultiplier = 1;\r\n        this.repeatCount = 0;\r\n        this.head = hitCircle;\r\n    }\r\n    get type() {\r\n        return \"SLIDER\";\r\n    }\r\n    get spawnTime() {\r\n        return this.head.spawnTime;\r\n    }\r\n    // Number of times the slider spans over the screen.\r\n    get spanCount() {\r\n        return this.repeatCount + 1;\r\n    }\r\n    get scale() {\r\n        return this.head.scale;\r\n    }\r\n    get radius() {\r\n        return this.head.radius;\r\n    }\r\n    get spanDuration() {\r\n        return this.duration / this.spanCount;\r\n    }\r\n    get duration() {\r\n        return this.endTime - this.startTime;\r\n    }\r\n    get startTime() {\r\n        return this.head.hitTime;\r\n    }\r\n    get endTime() {\r\n        return this.startTime + (this.spanCount * this.path.distance) / this.velocity;\r\n    }\r\n    get startPosition() {\r\n        return this.head.position;\r\n    }\r\n    get endPosition() {\r\n        // TODO: Caching like in osu!lazer since this takes a lot of time\r\n        return index_1.Vec2.add(this.head.position, this.ballOffsetAt(1.0));\r\n    }\r\n    get unstackedEndPosition() {\r\n        return index_1.Vec2.add(this.head.unstackedPosition, this.ballOffsetAt(1.0));\r\n    }\r\n    /**\r\n     * Returns the absolute position of the ball given the progress p, where p is the percentage of time passed\r\n     * between startTime and endTime.\r\n     * @param progress\r\n     */\r\n    ballPositionAt(progress) {\r\n        return index_1.Vec2.add(this.head.position, this.ballOffsetAt(progress));\r\n    }\r\n    /**\r\n     * Returns the position given the (time) progress. Basically it just tells you where the slider ball should be after\r\n     * p% of time has passed.\r\n     *\r\n     * @param progress number between 0 and 1 determining the time progress\r\n     */\r\n    ballOffsetAt(progress) {\r\n        const spanProgress = progress * this.spanCount;\r\n        let progressInSpan = spanProgress % 1.0;\r\n        // When it's \"returning\" we should consider the progress in an inverted way.\r\n        if (Math.floor(spanProgress) % 2 === 1) {\r\n            progressInSpan = 1.0 - progressInSpan;\r\n        }\r\n        return this.path.positionAt(progressInSpan);\r\n    }\r\n}\r\nexports.Slider = Slider;\r\n// scoring distance with a speed-adjusted beat length of 1 second (i.e. the speed slider balls\r\n// move through their track).\r\nSlider.BASE_SCORING_DISTANCE = 100;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/SliderCheckPoint.ts\":\r\n/*!*************************************************!*\\\r\n  !*** ./src/core/hitobjects/SliderCheckPoint.ts ***!\r\n  \\*************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.SliderCheckPoint = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\n// Important points on the slider. Depending on if they were \"hit\" or not, we will have a different judgement on the\r\n// slider.\r\nclass SliderCheckPoint {\r\n    constructor(slider) {\r\n        this.slider = slider;\r\n        this.id = \"\";\r\n        this.type = \"TICK\";\r\n        this.spanIndex = 0;\r\n        // The `spanProgress` is a number between 0 and 1 that determines the position on the slider path.\r\n        this.spanProgress = 0;\r\n        this.spanStartTime = 0;\r\n        this.offset = { x: 0, y: 0 };\r\n        this.hitTime = 0;\r\n    }\r\n    get position() {\r\n        return index_1.Vec2.add(this.slider.startPosition, this.offset);\r\n    }\r\n    get scale() {\r\n        return this.slider.scale;\r\n    }\r\n}\r\nexports.SliderCheckPoint = SliderCheckPoint;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/Spinner.ts\":\r\n/*!****************************************!*\\\r\n  !*** ./src/core/hitobjects/Spinner.ts ***!\r\n  \\****************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Spinner = void 0;\r\n/**\r\n * Logic:\r\n *\r\n * * Assumption is that the user can't spin more than 8 times per second `max_rotations_per_second=8`.\r\n * * \"MaxSpinsPossible\" \"MinSpinsNeeded\"\r\n *\r\n *\r\n * Then there are like \"MaxSpinsPossible\" spinner ticks generated (???) which have a start time of [0, d, 2d, ...,\r\n * maxSpinsPossible * d] where d is the duration of one spin.\r\n *\r\n * 100% min spinned -> GREAT\r\n * > 90%-> OK\r\n * > 75% -> MEH\r\n * otherwise miss\r\n * requires gameClock playRate\r\n *\r\n *\r\n *                 if (HitObject.SpinsRequired == 0)\r\n // some spinners are so short they can't require an integer spin count.\r\n // these become implicitly hit.\r\n return 1;\r\n * SPM count is calculated as follows:\r\n *\r\n * First define a time window spm_count_duration = 595ms for example then find out how much you have spinned at t\r\n * compared to t - spm_count_duration.\r\n *\r\n * This is done by keeping track with a queue of (t, total_rotation) by most people\r\n *\r\n */\r\n// Sources: https://github.com/itdelatrisu/opsu/blob/master/src/itdelatrisu/opsu/objects/Spinner.java\r\n// https://github.com/McKay42/McOsu/blob/master/src/App/Osu/OsuSpinner.cpp\r\n// https://github.com/ppy/osu/blob/master/osu.Game.Rulesets.Osu/Objects/Drawables/DrawableSpinner.cs\r\nfunction diffRange(difficulty, min, mid, max) {\r\n    if (difficulty > 5)\r\n        return mid + ((max - mid) * (difficulty - 5)) / 5;\r\n    if (difficulty < 5)\r\n        return mid - ((mid - min) * (5 - difficulty)) / 5;\r\n    return mid;\r\n}\r\nclass Spinner {\r\n    constructor() {\r\n        this.id = \"\";\r\n        this.startTime = 0;\r\n        this.duration = 0;\r\n        this.spinsRequired = 1;\r\n        this.maximumBonusSpins = 1;\r\n    }\r\n    // The spinner is visible way earlier, but can only be interacted with at [startTime, endTime]\r\n    get spawnTime() {\r\n        return this.startTime;\r\n    }\r\n    get endTime() {\r\n        return this.startTime + this.duration;\r\n    }\r\n    get type() {\r\n        return \"SPINNER\";\r\n    }\r\n}\r\nexports.Spinner = Spinner;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/Types.ts\":\r\n/*!**************************************!*\\\r\n  !*** ./src/core/hitobjects/Types.ts ***!\r\n  \\**************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.isSpinner = exports.isSlider = exports.isHitCircle = void 0;\r\nconst isHitCircle = (o) => o.type === \"HIT_CIRCLE\";\r\nexports.isHitCircle = isHitCircle;\r\nconst isSlider = (o) => o.type === \"SLIDER\";\r\nexports.isSlider = isSlider;\r\nconst isSpinner = (o) => o.type === \"SPINNER\";\r\nexports.isSpinner = isSpinner;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/slider/PathApproximator.ts\":\r\n/*!********************************************************!*\\\r\n  !*** ./src/core/hitobjects/slider/PathApproximator.ts ***!\r\n  \\********************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.PathApproximator = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../../math/index */ \"./src/math/index.ts\");\r\n// TODO: Move to osu-math\r\n// https://github.com/ppy/osu-framework/blob/f9d44b1414e30ad507894ef7eaaf5d1b0118be82/osu.Framework/Utils/PathApproximator.cs\r\nconst bezierTolerance = Math.fround(0.25);\r\nconst circularArcTolerance = Math.fround(0.1);\r\n// The amount of pieces to calculate for each control point quadruplet.\r\nconst catmullDetail = 50;\r\nconst toFloat = (x) => Math.fround(x);\r\n/**\r\n * Helper methods to approximate a path by interpolating a sequence of control points.\r\n */\r\nclass PathApproximator {\r\n    /**\r\n     * Creates a piecewise-linear approximation of a bezier curve, by adaptively repeatedly subdividing\r\n     * the control points until their approximation error vanishes below a given threshold.\r\n     * @returns A list of vectors representing the piecewise-linear approximation.\r\n     */\r\n    static approximateBezier(controlPoints, p = 0) {\r\n        var _a;\r\n        const output = [];\r\n        const n = controlPoints.length - 1;\r\n        if (n < 0) {\r\n            return output;\r\n        }\r\n        // Both Stacks<>\r\n        const toFlatten = [];\r\n        const freeBuffers = [];\r\n        // Creates a copy of controlPoints\r\n        const points = [...controlPoints];\r\n        if (p > 0 && p < n) {\r\n            for (let i = 0; i < n - p; i++) {\r\n                const subBezier = new Array(p + 1);\r\n                subBezier[0] = points[i];\r\n                for (let j = 0; j < p - 1; j++) {\r\n                    subBezier[j + 1] = points[i + 1];\r\n                    for (let k = 1; k < p - j; k++) {\r\n                        const l = Math.min(k, n - p - i);\r\n                        points[i + k] = points[i + k]\r\n                            .scale(l)\r\n                            .add(points[i + k + 1])\r\n                            .scale(1 / (l + 1));\r\n                    }\r\n                }\r\n                subBezier[p] = points[i + 1];\r\n                toFlatten.push(subBezier);\r\n            }\r\n            // TODO: Is this same as  points[(n-p)..]) as in C# ?\r\n            toFlatten.push(points.slice(n - p, points.length));\r\n            // TODO: Is this as in the osu!lazer code?\r\n            // Reverse the stack so elements can be accessed in order\r\n            toFlatten.reverse();\r\n        }\r\n        else {\r\n            // B-spline subdivisions unnecessary, degenerate to single bezier\r\n            p = n;\r\n            toFlatten.push(points);\r\n        }\r\n        const subdivisionBuffer1 = new Array(p + 1);\r\n        const subdivisionBuffer2 = new Array(p * 2 + 1);\r\n        const leftChild = subdivisionBuffer2;\r\n        // let leftChild = subdivisionBuffer2;\r\n        while (toFlatten.length > 0) {\r\n            // Can't be undefined dude\r\n            const parent = toFlatten.pop();\r\n            if (PathApproximator._bezierIsFlatEnough(parent)) {\r\n                // If the control points we currently operate on are sufficiently \"flat\", we use\r\n                // an extension to De Casteljau's algorithm to obtain a piecewise-linear approximation\r\n                // of the bezier curve represented by our control points, consisting of the same amount\r\n                // of points as there are control points.\r\n                PathApproximator._bezierApproximate(parent, output, subdivisionBuffer1, subdivisionBuffer2, p + 1);\r\n                freeBuffers.push(parent);\r\n                continue;\r\n            }\r\n            // If we do not yet have a sufficiently \"flat\" (in other words, detailed) approximation we keep\r\n            // subdividing the curve we are currently operating on.\r\n            const rightChild = (_a = freeBuffers.pop()) !== null && _a !== void 0 ? _a : new Array(p + 1);\r\n            PathApproximator._bezierSubdivide(parent, leftChild, rightChild, subdivisionBuffer1, p + 1);\r\n            // We re-use the buffer of the parent for one of the children, so that we save one allocation per iteration.\r\n            for (let i = 0; i < p + 1; ++i) {\r\n                parent[i] = leftChild[i];\r\n            }\r\n            toFlatten.push(rightChild);\r\n            toFlatten.push(parent);\r\n        }\r\n        output.push(controlPoints[n]);\r\n        return output;\r\n    }\r\n    /**\r\n     * Creates a piecewise-linear approximation of a Catmull-Rom spline.\r\n     * @returns A list of vectors representing the piecewise-linear approximation.\r\n     */\r\n    static approximateCatmull(controlPoints) {\r\n        const result = [];\r\n        const controlPointsLength = controlPoints.length;\r\n        for (let i = 0; i < controlPointsLength - 1; i++) {\r\n            const v1 = i > 0 ? controlPoints[i - 1] : controlPoints[i];\r\n            const v2 = controlPoints[i];\r\n            const v3 = i < controlPointsLength - 1 ? controlPoints[i + 1] : v2.add(v2).sub(v1);\r\n            const v4 = i < controlPointsLength - 2 ? controlPoints[i + 2] : v3.add(v3).sub(v2);\r\n            for (let c = 0; c < catmullDetail; c++) {\r\n                result.push(PathApproximator._catmullFindPoint(v1, v2, v3, v4, Math.fround(c / catmullDetail)));\r\n                result.push(PathApproximator._catmullFindPoint(v1, v2, v3, v4, Math.fround((c + 1) / catmullDetail)));\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    // TODO: Use Math.fround maybe\r\n    static circularArcProperties(controlPoints) {\r\n        const a = controlPoints[0];\r\n        const b = controlPoints[1];\r\n        const c = controlPoints[2];\r\n        if ((0, index_1.floatEqual)(0, (0, index_1.float32)((0, index_1.float32_mul)(b.y - a.y, c.x - a.x) - (0, index_1.float32_mul)(b.x - a.x, c.y - a.y))))\r\n            return undefined; // = invalid\r\n        const d = (0, index_1.float32_mul)(2, (0, index_1.float32_add)((0, index_1.float32_add)((0, index_1.float32_mul)(a.x, b.sub(c).y), (0, index_1.float32_mul)(b.x, c.sub(a).y)), (0, index_1.float32_mul)(c.x, a.sub(b).y)));\r\n        const aSq = toFloat(a.lengthSquared());\r\n        const bSq = toFloat(b.lengthSquared());\r\n        const cSq = toFloat(c.lengthSquared());\r\n        // Not really exact\r\n        const centerX = toFloat((0, index_1.float32_add)((0, index_1.float32_add)((0, index_1.float32_mul)(aSq, b.sub(c).y), (0, index_1.float32_mul)(bSq, c.sub(a).y)), (0, index_1.float32_mul)(cSq, a.sub(b).y)));\r\n        const centerY = toFloat((0, index_1.float32_add)((0, index_1.float32_add)((0, index_1.float32_mul)(aSq, c.sub(b).x), (0, index_1.float32_mul)(bSq, a.sub(c).x)), (0, index_1.float32_mul)(cSq, b.sub(a).x)));\r\n        const center = new index_1.Vec2(centerX, centerY).divide(d);\r\n        const dA = a.sub(center);\r\n        const dC = c.sub(center);\r\n        // Also not exact\r\n        const r = toFloat(dA.length());\r\n        const thetaStart = Math.atan2(dA.y, dA.x);\r\n        let thetaEnd = Math.atan2(dC.y, dC.x);\r\n        while (thetaEnd < thetaStart)\r\n            thetaEnd += 2 * Math.PI;\r\n        let dir = 1;\r\n        let thetaRange = thetaEnd - thetaStart;\r\n        let orthoAtoC = c.sub(a);\r\n        orthoAtoC = new index_1.Vec2(orthoAtoC.y, -orthoAtoC.x);\r\n        if (index_1.Vec2.dot(orthoAtoC, b.sub(a)) < 0) {\r\n            dir = -dir;\r\n            thetaRange = 2 * Math.PI - thetaRange;\r\n        }\r\n        return { thetaStart, thetaRange, direction: dir, radius: r, center };\r\n    }\r\n    /**\r\n     * Creates a piecewise-linear approximation of a circular arc curve.\r\n     * @returns A list of vectors representing the piecewise-linear approximation.\r\n     */\r\n    static approximateCircularArc(controlPoints) {\r\n        const properties = PathApproximator.circularArcProperties(controlPoints);\r\n        if (!properties) {\r\n            return PathApproximator.approximateBezier(controlPoints);\r\n        }\r\n        const { radius, center, thetaRange, thetaStart, direction } = properties;\r\n        const amountPoints = 2 * radius <= circularArcTolerance\r\n            ? 2\r\n            : Math.max(2, Math.ceil(thetaRange / (2 * Math.acos(1 - (0, index_1.float32_div)(circularArcTolerance, radius)))));\r\n        // We select the amount of points for the approximation by requiring the discrete curvature\r\n        // to be smaller than the provided tolerance. The exact angle required to meet the tolerance\r\n        // is: 2 * Math.Acos(1 - TOLERANCE / r)\r\n        // The special case is required for extremely short sliders where the radius is smaller than\r\n        // the tolerance. This is a pathological rather than a realistic case.\r\n        const output = [];\r\n        for (let i = 0; i < amountPoints; ++i) {\r\n            const fract = i / (amountPoints - 1);\r\n            const theta = thetaStart + direction * fract * thetaRange;\r\n            const o = new index_1.Vec2(toFloat(Math.cos(theta)), toFloat(Math.sin(theta))).scale(radius);\r\n            output.push(center.add(o));\r\n        }\r\n        return output;\r\n    }\r\n    /**\r\n     * Creates a piecewise-linear approximation of a linear curve.\r\n     * Basically, returns the input.\r\n     * @returns A list of vectors representing the piecewise-linear approximation.\r\n     */\r\n    static approximateLinear(controlPoints) {\r\n        return [...controlPoints];\r\n    }\r\n    /**\r\n     * Creates a piecewise-linear approximation of a lagrange polynomial.\r\n     * @returns A list of vectors representing the piecewise-linear approximation.\r\n     */\r\n    static approximateLagrangePolynomial(controlPoints) {\r\n        // TODO: add some smarter logic here, chebyshev nodes?\r\n        const numSteps = 51;\r\n        const result = [];\r\n        const weights = PathApproximator._barycentricWeights(controlPoints);\r\n        let minX = controlPoints[0].x;\r\n        let maxX = controlPoints[0].x;\r\n        for (let i = 1; i < controlPoints.length; i++) {\r\n            minX = Math.min(minX, controlPoints[i].x);\r\n            maxX = Math.max(maxX, controlPoints[i].x);\r\n        }\r\n        const dx = maxX - minX;\r\n        for (let i = 0; i < numSteps; i++) {\r\n            const x = minX + (dx / (numSteps - 1)) * i;\r\n            const y = Math.fround(PathApproximator._barycentricLagrange(controlPoints, weights, x));\r\n            result.push(new index_1.Vec2(x, y));\r\n        }\r\n        return result;\r\n    }\r\n    /**\r\n     * Calculates the Barycentric weights for a Lagrange polynomial for a given set of coordinates.\r\n     * Can be used as a helper function to compute a Lagrange polynomial repeatedly.\r\n     * @param points An array of coordinates. No two x should be the same.\r\n     */\r\n    static _barycentricWeights(points) {\r\n        const n = points.length;\r\n        const w = [];\r\n        for (let i = 0; i < n; i++) {\r\n            // TODO: w[i].push() -> unholey\r\n            w[i] = 1;\r\n            for (let j = 0; j < n; j++) {\r\n                if (i !== j) {\r\n                    w[i] *= points[i].x - points[j].x;\r\n                }\r\n            }\r\n            w[i] = 1.0 / w[i];\r\n        }\r\n        return w;\r\n    }\r\n    /**\r\n     * Calculates the Lagrange basis polynomial for a given set of x coordinates based on previously computed barycentric\r\n     * weights.\r\n     * @param points An array of coordinates. No two x should be the same.\r\n     * @param weights An array of precomputed barycentric weights.\r\n     * @param time The x coordinate to calculate the basis polynomial for.\r\n     */\r\n    static _barycentricLagrange(points, weights, time) {\r\n        if (points === null || points.length === 0) {\r\n            throw new Error(\"points must contain at least one point\");\r\n        }\r\n        if (points.length !== weights.length) {\r\n            throw new Error(\"points must contain exactly as many items as {nameof(weights)}\");\r\n        }\r\n        let numerator = 0;\r\n        let denominator = 0;\r\n        for (let i = 0, len = points.length; i < len; i++) {\r\n            // while this is not great with branch prediction, it prevents NaN at control point X coordinates\r\n            if (time === points[i].x) {\r\n                return points[i].y;\r\n            }\r\n            const li = weights[i] / (time - points[i].x);\r\n            numerator += li * points[i].y;\r\n            denominator += li;\r\n        }\r\n        return numerator / denominator;\r\n    }\r\n    /**\r\n     * Make sure the 2nd order derivative (approximated using finite elements) is within tolerable bounds.\r\n     * NOTE: The 2nd order derivative of a 2d curve represents its curvature, so intuitively this function\r\n     *       checks (as the name suggests) whether our approximation is _locally_ \"flat\". More curvy parts\r\n     *       need to have a denser approximation to be more \"flat\".\r\n     * @param controlPoints The control points to check for flatness.\r\n     * @returns Whether the control points are flat enough.\r\n     */\r\n    static _bezierIsFlatEnough(controlPoints) {\r\n        for (let i = 1; i < controlPoints.length - 1; i++) {\r\n            const tmp = controlPoints[i - 1].sub(controlPoints[i].scale(2)).add(controlPoints[i + 1]);\r\n            if (tmp.lengthSquared() > bezierTolerance ** 2 * 4) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Subdivides n control points representing a bezier curve into 2 sets of n control points, each\r\n     * describing a bezier curve equivalent to a half of the original curve. Effectively this splits\r\n     * the original curve into 2 curves which result in the original curve when pieced back together.\r\n     * @param controlPoints The control points to split.\r\n     * @param l Output: The control points corresponding to the left half of the curve.\r\n     * @param r Output: The control points corresponding to the right half of the curve.\r\n     * @param subdivisionBuffer The first buffer containing the current subdivision state.\r\n     * @param count The number of control points in the original list.\r\n     */\r\n    static _bezierSubdivide(controlPoints, l, r, subdivisionBuffer, count) {\r\n        const midpoints = subdivisionBuffer;\r\n        for (let i = 0; i < count; ++i) {\r\n            midpoints[i] = controlPoints[i];\r\n        }\r\n        for (let i = 0; i < count; ++i) {\r\n            l[i] = midpoints[0];\r\n            r[count - i - 1] = midpoints[count - i - 1];\r\n            for (let j = 0; j < count - i - 1; j++) {\r\n                midpoints[j] = midpoints[j].add(midpoints[j + 1]);\r\n                midpoints[j] = midpoints[j].divide(2);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * This uses <a href=\"https://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm De Casteljau's algorithm</a> to obtain\r\n     * an optimal piecewise-linear approximation of the bezier curve with the same amount of points as there are control\r\n     * points.\r\n     * @param controlPoints The control points describing the bezier curve to be approximated.\r\n     * @param output The points representing the resulting piecewise-linear approximation.\r\n     * @param count The number of control points in the original list.\r\n     * @param subdivisionBuffer1 The first buffer containing the current subdivision state.\r\n     * @param subdivisionBuffer2 The second buffer containing the current subdivision state.\r\n     */\r\n    static _bezierApproximate(controlPoints, output, subdivisionBuffer1, subdivisionBuffer2, count) {\r\n        const l = subdivisionBuffer2;\r\n        const r = subdivisionBuffer1;\r\n        PathApproximator._bezierSubdivide(controlPoints, l, r, subdivisionBuffer1, count);\r\n        for (let i = 0; i < count - 1; ++i) {\r\n            l[count + i] = r[i + 1];\r\n        }\r\n        output.push(controlPoints[0]);\r\n        for (let i = 1; i < count - 1; ++i) {\r\n            const index = 2 * i;\r\n            let p = l[index - 1].add(l[index].scale(2)).add(l[index + 1]);\r\n            p = p.scale(Math.fround(0.25));\r\n            output.push(p);\r\n        }\r\n    }\r\n    /**\r\n     * Finds a point on the spline at the position of a parameter.\r\n     * @param vec1 The first vector.\r\n     * @param vec2 The second vector.\r\n     * @param vec3 The third vector.\r\n     * @param vec4 The fourth vector.\r\n     * @param t The parameter at which to find the point on the spline, in the range [0, 1].\r\n     * @returns The point on the spline at t.\r\n     */\r\n    static _catmullFindPoint(vec1, vec2, vec3, vec4, t) {\r\n        const t2 = Math.fround(t * t);\r\n        const t3 = Math.fround(t * t2);\r\n        return new index_1.Vec2(Math.fround(0.5 *\r\n            (2 * vec2.x +\r\n                (-vec1.x + vec3.x) * t +\r\n                (2 * vec1.x - 5 * vec2.x + 4 * vec3.x - vec4.x) * t2 +\r\n                (-vec1.x + 3 * vec2.x - 3 * vec3.x + vec4.x) * t3)), Math.fround(0.5 *\r\n            (2 * vec2.y +\r\n                (-vec1.y + vec3.y) * t +\r\n                (2 * vec1.y - 5 * vec2.y + 4 * vec3.y - vec4.y) * t2 +\r\n                (-vec1.y + 3 * vec2.y - 3 * vec3.y + vec4.y) * t3)));\r\n    }\r\n}\r\nexports.PathApproximator = PathApproximator;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/slider/PathControlPoint.ts\":\r\n/*!********************************************************!*\\\r\n  !*** ./src/core/hitobjects/slider/PathControlPoint.ts ***!\r\n  \\********************************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/slider/PathType.ts\":\r\n/*!************************************************!*\\\r\n  !*** ./src/core/hitobjects/slider/PathType.ts ***!\r\n  \\************************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.PathType = void 0;\r\nvar PathType;\r\n(function (PathType) {\r\n    PathType[PathType[\"Catmull\"] = 0] = \"Catmull\";\r\n    PathType[PathType[\"Bezier\"] = 1] = \"Bezier\";\r\n    PathType[PathType[\"Linear\"] = 2] = \"Linear\";\r\n    PathType[PathType[\"PerfectCurve\"] = 3] = \"PerfectCurve\";\r\n})(PathType = exports.PathType || (exports.PathType = {}));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/slider/SliderCheckPointGenerator.ts\":\r\n/*!*****************************************************************!*\\\r\n  !*** ./src/core/hitobjects/slider/SliderCheckPointGenerator.ts ***!\r\n  \\*****************************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.generateSliderCheckpoints = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../../math/index */ \"./src/math/index.ts\");\r\nfunction* generateTicks(spanIndex, spanStartTime, spanDuration, reversed, length, tickDistance, minDistanceFromEnd) {\r\n    for (let d = tickDistance; d <= length; d += tickDistance) {\r\n        if (d >= length - minDistanceFromEnd) {\r\n            break;\r\n        }\r\n        const spanProgress = d / length;\r\n        const timeProgress = reversed ? 1.0 - spanProgress : spanProgress;\r\n        yield {\r\n            type: \"TICK\",\r\n            spanIndex,\r\n            spanStartTime,\r\n            time: spanStartTime + timeProgress * spanDuration,\r\n            spanProgress,\r\n        };\r\n    }\r\n}\r\nfunction* generateSliderCheckpoints(startTime, spanDuration, velocity, tickDistance, totalDistance, spanCount, legacyLastTickOffset) {\r\n    const length = Math.min(100000.0, totalDistance);\r\n    tickDistance = (0, index_1.clamp)(tickDistance, 0.0, length);\r\n    const minDistanceFromEnd = velocity * 10;\r\n    // Generating ticks, repeats\r\n    // Using `floatEqual` was my suggestion, but osu!lazer uses tickDistance != 0\r\n    if (tickDistance !== 0) {\r\n        for (let span = 0; span < spanCount; span++) {\r\n            const spanStartTime = startTime + span * spanDuration;\r\n            const reversed = span % 2 === 1;\r\n            const it = generateTicks(span, spanStartTime, spanDuration, reversed, length, tickDistance, minDistanceFromEnd);\r\n            // Don't flame me for this\r\n            const ticks = [];\r\n            for (const t of it)\r\n                ticks.push(t);\r\n            if (reversed)\r\n                ticks.reverse();\r\n            for (const t of ticks)\r\n                yield t;\r\n            if (span < spanCount - 1) {\r\n                yield {\r\n                    type: \"REPEAT\",\r\n                    spanIndex: span,\r\n                    spanStartTime,\r\n                    time: spanStartTime + spanDuration,\r\n                    spanProgress: (span + 1) % 2,\r\n                };\r\n            }\r\n        }\r\n    }\r\n    const totalDuration = spanCount * spanDuration;\r\n    const finalSpanIndex = spanCount - 1;\r\n    const finalSpanStartTime = startTime + finalSpanIndex * spanDuration;\r\n    const finalSpanEndTime = Math.max(startTime + totalDuration / 2.0, finalSpanStartTime + spanDuration - (legacyLastTickOffset !== null && legacyLastTickOffset !== void 0 ? legacyLastTickOffset : 0));\r\n    let finalProgress = (finalSpanEndTime - finalSpanStartTime) / spanDuration;\r\n    if (spanCount % 2 === 0)\r\n        finalProgress = 1.0 - finalProgress;\r\n    yield {\r\n        type: \"LAST_LEGACY_TICK\",\r\n        spanIndex: finalSpanIndex,\r\n        spanStartTime: finalSpanStartTime,\r\n        time: finalSpanEndTime,\r\n        spanProgress: finalProgress,\r\n    };\r\n    // Technically speaking the tail has no real relevancy for gameplay, it is just a visual element.\r\n    // In Slider.cs it is even ignored...\r\n    // yield {\r\n    //   type: SliderCheckPointType.TAIL,\r\n    //   spanIndex: finalSpanIndex,\r\n    //   spanStartTime: startTime + (spanCount - 1) * spanDuration,\r\n    //   time: startTime + totalDuration,\r\n    //   pathProgress: spanCount % 2\r\n    // };\r\n}\r\nexports.generateSliderCheckpoints = generateSliderCheckpoints;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/hitobjects/slider/SliderPath.ts\":\r\n/*!**************************************************!*\\\r\n  !*** ./src/core/hitobjects/slider/SliderPath.ts ***!\r\n  \\**************************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.SliderPath = void 0;\r\nconst PathType_1 = __webpack_require__(/*! ./PathType */ \"./src/core/hitobjects/slider/PathType.ts\");\r\nconst index_1 = __webpack_require__(/*! ../../../math/index */ \"./src/math/index.ts\");\r\nconst PathApproximator_1 = __webpack_require__(/*! ./PathApproximator */ \"./src/core/hitobjects/slider/PathApproximator.ts\");\r\nfunction mapToVector2(p) {\r\n    return p.map((p) => new index_1.Vec2(p.x, p.y));\r\n}\r\nclass SliderPath {\r\n    constructor(controlPoints, length) {\r\n        this._min = { x: 0, y: 0 };\r\n        this._max = { x: 0, y: 0 };\r\n        this.controlPoints = controlPoints;\r\n        this._invalid = true;\r\n        this._cumulativeLength = [];\r\n        this._calculatedPath = [];\r\n        this._expectedDistance = length;\r\n    }\r\n    get cumulativeLengths() {\r\n        this.ensureValid();\r\n        return this._cumulativeLength;\r\n    }\r\n    get calculatedPath() {\r\n        this.ensureValid();\r\n        return this._calculatedPath;\r\n    }\r\n    makeInvalid() {\r\n        this._invalid = true;\r\n    }\r\n    // Recalculates the helper data if needed\r\n    ensureValid() {\r\n        if (this._invalid) {\r\n            this.calculatePath();\r\n            this.calculateLength();\r\n            this.calculateBoundaryBox();\r\n            this._invalid = false;\r\n        }\r\n    }\r\n    calculateSubPath(subControlPoints, type) {\r\n        switch (type) {\r\n            case PathType_1.PathType.Catmull:\r\n                return PathApproximator_1.PathApproximator.approximateCatmull(mapToVector2(subControlPoints));\r\n            case PathType_1.PathType.Linear:\r\n                return PathApproximator_1.PathApproximator.approximateLinear(mapToVector2(subControlPoints));\r\n            case PathType_1.PathType.PerfectCurve:\r\n                if (subControlPoints.length !== 3)\r\n                    break;\r\n                // eslint-disable-next-line no-case-declarations\r\n                const subpath = PathApproximator_1.PathApproximator.approximateCircularArc(mapToVector2(subControlPoints));\r\n                // If for some reason a circular arc could not be fit to the 3 given points, fall back to a numerically stable\r\n                // bezier approximation.\r\n                if (subpath.length === 0)\r\n                    break;\r\n                return subpath;\r\n        }\r\n        return PathApproximator_1.PathApproximator.approximateBezier(mapToVector2(subControlPoints));\r\n    }\r\n    get boundaryBox() {\r\n        this.ensureValid();\r\n        return [this._min, this._max];\r\n    }\r\n    calculateBoundaryBox() {\r\n        // Since it is osu!px , it should be no problem\r\n        let minX = 3000, maxX = -3000, minY = 3000, maxY = -3000;\r\n        this._calculatedPath.forEach((p) => {\r\n            minX = Math.min(minX, p.x);\r\n            maxX = Math.max(maxX, p.x);\r\n            minY = Math.min(minY, p.y);\r\n            maxY = Math.max(maxY, p.y);\r\n        });\r\n        this._min = new index_1.Vec2(minX, minY);\r\n        this._max = new index_1.Vec2(maxX, maxY);\r\n        return [this._min, this._max];\r\n    }\r\n    calculatePath() {\r\n        var _a;\r\n        this._calculatedPath = [];\r\n        const numberOfPoints = this.controlPoints.length;\r\n        if (numberOfPoints === 0)\r\n            return;\r\n        const vertices = this.controlPoints.map((p) => p.offset);\r\n        let start = 0;\r\n        for (let i = 0; i < numberOfPoints; i++) {\r\n            // Need to calculate previous segment\r\n            if (this.controlPoints[i].type === undefined && i < numberOfPoints - 1) {\r\n                continue;\r\n            }\r\n            // Current vertex ends the segment\r\n            const segmentVertices = vertices.slice(start, i + 1);\r\n            const segmentType = (_a = this.controlPoints[start].type) !== null && _a !== void 0 ? _a : PathType_1.PathType.Linear;\r\n            for (const t of this.calculateSubPath(segmentVertices, segmentType)) {\r\n                const n = this._calculatedPath.length;\r\n                if (n === 0 || !index_1.Vec2.equal(this._calculatedPath[n - 1], t)) {\r\n                    this._calculatedPath.push(t);\r\n                }\r\n            }\r\n            start = i;\r\n        }\r\n    }\r\n    calculateLength() {\r\n        this._cumulativeLength = new Array(this._calculatedPath.length);\r\n        this._cumulativeLength[0] = 0.0;\r\n        for (let i = 1; i < this._calculatedPath.length; i++) {\r\n            this._cumulativeLength[i] =\r\n                this._cumulativeLength[i - 1] + Math.fround(index_1.Vec2.distance(this._calculatedPath[i - 1], this._calculatedPath[i]));\r\n        }\r\n        const calculatedLength = this._cumulativeLength[this._cumulativeLength.length - 1];\r\n        // TODO: In lazer the != operator is used, but shouldn't the approximate equal be used?\r\n        if (this._expectedDistance !== undefined && calculatedLength !== this._expectedDistance) {\r\n            // In osu-stable, if the last two control points of a slider are equal, extension is not performed.\r\n            if (this.controlPoints.length >= 2 && index_1.Vec2.equal(this.controlPoints[this.controlPoints.length - 1].offset, this.controlPoints[this.controlPoints.length - 2].offset)\r\n                && this._expectedDistance > calculatedLength) {\r\n                this._cumulativeLength.push(calculatedLength);\r\n                return;\r\n            }\r\n            // The last length is always incorrect\r\n            this._cumulativeLength.splice(this._cumulativeLength.length - 1);\r\n            let pathEndIndex = this._calculatedPath.length - 1;\r\n            if (calculatedLength > this._expectedDistance) {\r\n                while (this._cumulativeLength.length > 0 &&\r\n                    this._cumulativeLength[this._cumulativeLength.length - 1] >= this._expectedDistance) {\r\n                    this._cumulativeLength.splice(this._cumulativeLength.length - 1);\r\n                    this._calculatedPath.splice(pathEndIndex--, 1);\r\n                }\r\n            }\r\n            if (pathEndIndex <= 0) {\r\n                // TODO: Perhaps negative path lengths should be disallowed together\r\n                this._cumulativeLength.push(0);\r\n                return;\r\n            }\r\n            // the direction of the segment to shorten or lengthen\r\n            const dir = index_1.Vec2.sub(this._calculatedPath[pathEndIndex], this._calculatedPath[pathEndIndex - 1]).normalized();\r\n            const f = this._expectedDistance - this._cumulativeLength[this._cumulativeLength.length - 1];\r\n            this._calculatedPath[pathEndIndex] = index_1.Vec2.add(this._calculatedPath[pathEndIndex - 1], dir.scale(Math.fround(f)));\r\n            this._cumulativeLength.push(this._expectedDistance);\r\n        }\r\n    }\r\n    get distance() {\r\n        const cumulativeLengths = this.cumulativeLengths;\r\n        const count = cumulativeLengths.length;\r\n        return count > 0 ? cumulativeLengths[count - 1] : 0.0;\r\n    }\r\n    indexOfDistance(distance) {\r\n        // TODO: Binary search the first value that is not less than partialDistance\r\n        const idx = this.cumulativeLengths.findIndex((value) => value >= distance);\r\n        if (idx === undefined) {\r\n            // Should not be possible\r\n            throw new Error(\"Cumulative lengths or distance wrongly programmed\");\r\n        }\r\n        else {\r\n            return idx;\r\n        }\r\n    }\r\n    /**\r\n     * Calculates the position of the slider at the given progress.\r\n     * @param progress a number between 0 (head) and 1 (tail/repeat)\r\n     */\r\n    positionAt(progress) {\r\n        const partialDistance = this.distance * (0, index_1.clamp)(progress, 0, 1);\r\n        return this.interpolateVertices(this.indexOfDistance(partialDistance), partialDistance);\r\n    }\r\n    // d: double\r\n    interpolateVertices(i, d) {\r\n        const calculatedPath = this.calculatedPath;\r\n        if (calculatedPath.length === 0)\r\n            return index_1.Vec2.Zero;\r\n        if (i <= 0)\r\n            return calculatedPath[0];\r\n        if (i >= calculatedPath.length)\r\n            return calculatedPath[calculatedPath.length - 1];\r\n        const p1 = calculatedPath[i - 1];\r\n        const p2 = calculatedPath[i];\r\n        const d1 = this.cumulativeLengths[i - 1];\r\n        const d2 = this.cumulativeLengths[i];\r\n        if ((0, index_1.doubleEqual)(d1, d2)) {\r\n            return p1;\r\n        }\r\n        // Number between 0 and 1\r\n        const z = (d - d1) / (d2 - d1);\r\n        return index_1.Vec2.interpolate(p1, p2, z);\r\n    }\r\n}\r\nexports.SliderPath = SliderPath;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/index.ts\":\r\n/*!***************************!*\\\r\n  !*** ./src/core/index.ts ***!\r\n  \\***************************/\r\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\r\n\r\n\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.parseReplayFramesFromRaw = exports.parseBlueprint = void 0;\r\n// audio\r\n__exportStar(__webpack_require__(/*! ./audio/HitSampleInfo */ \"./src/core/audio/HitSampleInfo.ts\"), exports);\r\n// beatmap\r\n__exportStar(__webpack_require__(/*! ./beatmap/ControlPoints/ControlPoint */ \"./src/core/beatmap/ControlPoints/ControlPoint.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./beatmap/ControlPoints/ControlPointGroup */ \"./src/core/beatmap/ControlPoints/ControlPointGroup.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./beatmap/ControlPoints/DifficultyControlPoint */ \"./src/core/beatmap/ControlPoints/DifficultyControlPoint.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./beatmap/ControlPoints/TimingControlPoint */ \"./src/core/beatmap/ControlPoints/TimingControlPoint.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./mods/HardRockMod */ \"./src/core/mods/HardRockMod.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./mods/Mods */ \"./src/core/mods/Mods.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./mods/StackingMod */ \"./src/core/mods/StackingMod.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./beatmap/BeatmapBuilder */ \"./src/core/beatmap/BeatmapBuilder.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./beatmap/BeatmapDifficulty */ \"./src/core/beatmap/BeatmapDifficulty.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./beatmap/Beatmap */ \"./src/core/beatmap/Beatmap.ts\"), exports);\r\n// blueprints\r\n__exportStar(__webpack_require__(/*! ./blueprint/Blueprint */ \"./src/core/blueprint/Blueprint.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./blueprint/HitObjectSettings */ \"./src/core/blueprint/HitObjectSettings.ts\"), exports);\r\nvar BlueprintParser_1 = __webpack_require__(/*! ./blueprint/BlueprintParser */ \"./src/core/blueprint/BlueprintParser.ts\");\r\nObject.defineProperty(exports, \"parseBlueprint\", ({ enumerable: true, get: function () { return BlueprintParser_1.parseBlueprint; } }));\r\n// hitobjects\r\n__exportStar(__webpack_require__(/*! ./hitobjects/slider/PathApproximator */ \"./src/core/hitobjects/slider/PathApproximator.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/slider/PathControlPoint */ \"./src/core/hitobjects/slider/PathControlPoint.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/slider/PathType */ \"./src/core/hitobjects/slider/PathType.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/slider/SliderPath */ \"./src/core/hitobjects/slider/SliderPath.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/HitCircle */ \"./src/core/hitobjects/HitCircle.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/Types */ \"./src/core/hitobjects/Types.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/Slider */ \"./src/core/hitobjects/Slider.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/SliderCheckPoint */ \"./src/core/hitobjects/SliderCheckPoint.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./hitobjects/Spinner */ \"./src/core/hitobjects/Spinner.ts\"), exports);\r\n// gameplay\r\n__exportStar(__webpack_require__(/*! ./gameplay/GameplayAnalysisEvent */ \"./src/core/gameplay/GameplayAnalysisEvent.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./gameplay/GameplayInfo */ \"./src/core/gameplay/GameplayInfo.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./gameplay/GameState */ \"./src/core/gameplay/GameState.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./gameplay/GameStateEvaluator */ \"./src/core/gameplay/GameStateEvaluator.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./gameplay/GameStateTimeMachine */ \"./src/core/gameplay/GameStateTimeMachine.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./gameplay/Verdicts */ \"./src/core/gameplay/Verdicts.ts\"), exports);\r\n// replays\r\n__exportStar(__webpack_require__(/*! ./replays/RawReplayData */ \"./src/core/replays/RawReplayData.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./replays/Replay */ \"./src/core/replays/Replay.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./replays/ReplayClicks */ \"./src/core/replays/ReplayClicks.ts\"), exports);\r\nvar ReplayParser_1 = __webpack_require__(/*! ./replays/ReplayParser */ \"./src/core/replays/ReplayParser.ts\");\r\nObject.defineProperty(exports, \"parseReplayFramesFromRaw\", ({ enumerable: true, get: function () { return ReplayParser_1.parseReplayFramesFromRaw; } }));\r\n__exportStar(__webpack_require__(/*! ./playfield */ \"./src/core/playfield.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./utils/index */ \"./src/core/utils/index.ts\"), exports);\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/mods/EasyMod.ts\":\r\n/*!**********************************!*\\\r\n  !*** ./src/core/mods/EasyMod.ts ***!\r\n  \\**********************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.EasyMod = void 0;\r\nconst ratio = 0.5;\r\nclass EasyMod {\r\n}\r\nexports.EasyMod = EasyMod;\r\nEasyMod.difficultyAdjuster = (base) => (Object.assign(Object.assign({}, base), { overallDifficulty: base.overallDifficulty * ratio, approachRate: base.approachRate * ratio, drainRate: base.drainRate * ratio, circleSize: base.circleSize * ratio }));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/mods/HardRockMod.ts\":\r\n/*!**************************************!*\\\r\n  !*** ./src/core/mods/HardRockMod.ts ***!\r\n  \\**************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.HardRockMod = void 0;\r\nconst Types_1 = __webpack_require__(/*! ../hitobjects/Types */ \"./src/core/hitobjects/Types.ts\");\r\nconst playfield_1 = __webpack_require__(/*! ../playfield */ \"./src/core/playfield.ts\");\r\nfunction flipY(position) {\r\n    const { x, y } = position;\r\n    return { x, y: playfield_1.OSU_PLAYFIELD_HEIGHT - y };\r\n}\r\nclass HardRockMod {\r\n}\r\nexports.HardRockMod = HardRockMod;\r\nHardRockMod.difficultyAdjuster = (base) => (Object.assign(Object.assign({}, base), { overallDifficulty: Math.min(10, base.overallDifficulty * 1.4), approachRate: Math.min(10, base.approachRate * 1.4), drainRate: Math.min(10, base.drainRate * 1.4), circleSize: Math.min(10, base.circleSize * 1.3) }));\r\nHardRockMod.flipVertically = (hitObjects) => {\r\n    hitObjects.forEach((h) => {\r\n        if ((0, Types_1.isHitCircle)(h)) {\r\n            h.position = flipY(h.position);\r\n            h.unstackedPosition = flipY(h.unstackedPosition);\r\n        }\r\n        else if ((0, Types_1.isSlider)(h)) {\r\n            // TODO: Need to set invalid as well or just recreate the checkpoints from control points\r\n            h.head.position = flipY(h.head.position);\r\n            h.head.unstackedPosition = flipY(h.head.unstackedPosition);\r\n            h.path.controlPoints.forEach((p) => {\r\n                p.offset.y *= -1;\r\n            });\r\n            h.path.makeInvalid();\r\n            h.checkPoints.forEach((p) => {\r\n                p.offset.y *= -1;\r\n            });\r\n        }\r\n    });\r\n};\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/mods/Mods.ts\":\r\n/*!*******************************!*\\\r\n  !*** ./src/core/mods/Mods.ts ***!\r\n  \\*******************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.RELAX_LENIENCY = exports.ModSettings = exports.OsuClassicMods = void 0;\r\nconst HardRockMod_1 = __webpack_require__(/*! ./HardRockMod */ \"./src/core/mods/HardRockMod.ts\");\r\nconst EasyMod_1 = __webpack_require__(/*! ./EasyMod */ \"./src/core/mods/EasyMod.ts\");\r\n// https://osu.ppy.sh/wiki/en/Game_modifier\r\nexports.OsuClassicMods = [\r\n    \"EASY\",\r\n    \"HALF_TIME\",\r\n    \"NO_FAIL\",\r\n    \"HARD_ROCK\",\r\n    \"SUDDEN_DEATH\",\r\n    \"PERFECT\",\r\n    \"DOUBLE_TIME\",\r\n    \"NIGHT_CORE\",\r\n    \"HIDDEN\",\r\n    \"FLASH_LIGHT\",\r\n    \"AUTO_PLAY\",\r\n    \"AUTO_PILOT\",\r\n    \"RELAX\",\r\n    \"SPUN_OUT\",\r\n    \"SCORE_V2\",\r\n];\r\nexports.ModSettings = {\r\n    EASY: {\r\n        name: \"Easy\",\r\n        difficultyAdjuster: EasyMod_1.EasyMod.difficultyAdjuster,\r\n        scoreMultiplier: 0.5,\r\n    },\r\n    HARD_ROCK: {\r\n        name: \"Hard Rock\",\r\n        scoreMultiplier: 1.06,\r\n        difficultyAdjuster: HardRockMod_1.HardRockMod.difficultyAdjuster,\r\n    },\r\n    DOUBLE_TIME: { name: \"Double Time\", scoreMultiplier: 1.12 },\r\n    FLASH_LIGHT: { name: \"Flash Light\", scoreMultiplier: 1.12 },\r\n    HALF_TIME: { name: \"Half Time\", scoreMultiplier: 0.3 },\r\n    HIDDEN: { name: \"Hidden\", scoreMultiplier: 1.06 },\r\n    NIGHT_CORE: { name: \"Night Core\", scoreMultiplier: 1.12 },\r\n    NO_FAIL: { name: \"No Fail\", scoreMultiplier: 0.5 },\r\n    AUTO_PLAY: { name: \"Auto Play\" },\r\n    AUTO_PILOT: { name: \"Auto Pilot\" },\r\n    PERFECT: { name: \"Perfect\" },\r\n    RELAX: { name: \"Relax\" },\r\n    SCORE_V2: { name: \"Score V2\" },\r\n    SPUN_OUT: { name: \"Spun Out\" },\r\n    SUDDEN_DEATH: { name: \"Sudden Death\" },\r\n};\r\n// How early before a hitobject's time Relax can hit. (in ms)\r\nexports.RELAX_LENIENCY = 12;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/mods/StackingMod.ts\":\r\n/*!**************************************!*\\\r\n  !*** ./src/core/mods/StackingMod.ts ***!\r\n  \\**************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.modifyStackingPosition = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst Types_1 = __webpack_require__(/*! ../hitobjects/Types */ \"./src/core/hitobjects/Types.ts\");\r\nfunction stackOffset(stackHeight, scale) {\r\n    const value = (0, index_1.float32_mul)(stackHeight, (0, index_1.float32_mul)(scale, -6.4));\r\n    return { x: value, y: value };\r\n}\r\nfunction stackedPosition(initialPosition, stackHeight, scale) {\r\n    const offset = stackOffset(stackHeight, scale);\r\n    return index_1.Vec2.add(initialPosition, offset);\r\n}\r\nconst STACK_DISTANCE = 3;\r\n// I refuse to put an endPosition and endTime into HitCircle just because it's then easier to code it here\r\n// How does it even make sense that an HitCircle has an \"endPosition\" or \"endTime\".\r\n// Or how does it make sense that a Spinner has a stacking position, when it even doesn't have a position?\r\nconst hitCircle = (o) => ((0, Types_1.isSlider)(o) ? o.head : o);\r\nconst approachDuration = (o) => hitCircle(o).approachDuration;\r\nconst hitTime = (o) => hitCircle(o).hitTime;\r\nconst position = (o) => hitCircle(o).position;\r\nconst endPosition = (o) => ((0, Types_1.isSlider)(o) ? o.endPosition : o.position);\r\nconst endTime = (o) => ((0, Types_1.isSlider)(o) ? o.endTime : o.hitTime);\r\nfunction createStackingHeights(hitObjects) {\r\n    const stackingHeights = new Map();\r\n    function setH(o, val) {\r\n        stackingHeights.set(hitCircle(o).id, val);\r\n    }\r\n    function H(o) {\r\n        var _a;\r\n        return (_a = stackingHeights.get(hitCircle(o).id)) !== null && _a !== void 0 ? _a : 0;\r\n    }\r\n    // They all have 0 as stack heights\r\n    for (const ho of hitObjects) {\r\n        if (!(0, Types_1.isSpinner)(ho)) {\r\n            setH(ho, 0);\r\n        }\r\n    }\r\n    return { stackingHeights, setH, H };\r\n}\r\nfunction newStackingHeights(hitObjects, stackLeniency) {\r\n    const startIndex = 0;\r\n    const endIndex = hitObjects.length - 1;\r\n    const extendedEndIndex = endIndex;\r\n    const { stackingHeights, setH, H } = createStackingHeights(hitObjects);\r\n    // Reverse pass for stack calculation\r\n    let extendedStartIndex = startIndex;\r\n    for (let i = extendedEndIndex; i > startIndex; i--) {\r\n        let n = i;\r\n        let objectI = hitObjects[i];\r\n        if ((0, Types_1.isSpinner)(objectI) || H(objectI) !== 0)\r\n            continue;\r\n        const stackThreshold = approachDuration(objectI) * stackLeniency;\r\n        if ((0, Types_1.isHitCircle)(objectI)) {\r\n            while (--n >= 0) {\r\n                const objectN = hitObjects[n];\r\n                if ((0, Types_1.isSpinner)(objectN))\r\n                    break;\r\n                if (hitTime(objectI) - endTime(objectN) > stackThreshold)\r\n                    break;\r\n                if (n < extendedStartIndex) {\r\n                    setH(objectN, 0);\r\n                    extendedStartIndex = n;\r\n                }\r\n                if ((0, Types_1.isSlider)(objectN) && index_1.Vec2.distance(endPosition(objectN), position(objectI)) < STACK_DISTANCE) {\r\n                    const offset = H(objectI) - H(objectN) + 1;\r\n                    for (let j = n + 1; j <= i; j++) {\r\n                        const objectJ = hitObjects[j];\r\n                        if ((0, Types_1.isSpinner)(objectJ))\r\n                            continue; // TODO: Inserted, but not sure\r\n                        if (index_1.Vec2.distance(endPosition(objectN), position(objectJ)) < STACK_DISTANCE) {\r\n                            setH(objectJ, H(objectJ) - offset);\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n                if (index_1.Vec2.distance(position(objectN), position(objectI)) < STACK_DISTANCE) {\r\n                    setH(objectN, H(objectI) + 1);\r\n                    objectI = objectN;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            while (--n >= startIndex) {\r\n                const objectN = hitObjects[n];\r\n                if ((0, Types_1.isSpinner)(objectN))\r\n                    continue;\r\n                if (hitTime(objectI) - hitTime(objectN) > stackThreshold)\r\n                    break;\r\n                if (index_1.Vec2.distance(endPosition(objectN), position(objectI)) < STACK_DISTANCE) {\r\n                    setH(objectN, H(objectI) + 1);\r\n                    objectI = objectN;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return stackingHeights;\r\n}\r\nfunction oldStackingHeights(hitObjects, stackLeniency) {\r\n    const { stackingHeights, H, setH } = createStackingHeights(hitObjects);\r\n    for (let i = 0; i < hitObjects.length; i++) {\r\n        const currHitObject = hitObjects[i];\r\n        if ((0, Types_1.isSpinner)(currHitObject))\r\n            continue;\r\n        if (H(currHitObject) !== 0 && !(0, Types_1.isSlider)(currHitObject)) {\r\n            continue;\r\n        }\r\n        let startTime = endTime(currHitObject);\r\n        let sliderStack = 0;\r\n        for (let j = i + 1; j < hitObjects.length; j++) {\r\n            const stackThreshold = approachDuration(currHitObject) * stackLeniency;\r\n            const nextHitObject = hitObjects[j];\r\n            if ((0, Types_1.isSpinner)(nextHitObject))\r\n                continue;\r\n            if (hitTime(nextHitObject) - stackThreshold > startTime) {\r\n                break;\r\n            }\r\n            const position2 = (0, Types_1.isSlider)(currHitObject) ? currHitObject.endPosition : currHitObject.position;\r\n            if (index_1.Vec2.withinDistance(position(nextHitObject), position(currHitObject), STACK_DISTANCE)) {\r\n                setH(currHitObject, H(currHitObject) + 1);\r\n                startTime = endTime(nextHitObject);\r\n            }\r\n            else if (index_1.Vec2.withinDistance(position(nextHitObject), position2, STACK_DISTANCE)) {\r\n                sliderStack++;\r\n                setH(nextHitObject, H(nextHitObject) - sliderStack);\r\n                startTime = endTime(nextHitObject);\r\n            }\r\n        }\r\n    }\r\n    return stackingHeights;\r\n}\r\n// Modifies the hitObjects according to the stacking algorithm.\r\nfunction modifyStackingPosition(hitObjects, stackLeniency, beatmapVersion) {\r\n    const heights = (() => {\r\n        if (beatmapVersion >= 6) {\r\n            return newStackingHeights(hitObjects, stackLeniency);\r\n        }\r\n        else {\r\n            return oldStackingHeights(hitObjects, stackLeniency);\r\n        }\r\n    })();\r\n    hitObjects.forEach((hitObject) => {\r\n        if ((0, Types_1.isSpinner)(hitObject))\r\n            return;\r\n        const h = hitCircle(hitObject);\r\n        const height = heights.get(h.id);\r\n        if (height === undefined) {\r\n            throw Error(\"Stack height can't be undefined\");\r\n        }\r\n        h.position = stackedPosition(h.position, height, h.scale);\r\n    });\r\n}\r\nexports.modifyStackingPosition = modifyStackingPosition;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/playfield.ts\":\r\n/*!*******************************!*\\\r\n  !*** ./src/core/playfield.ts ***!\r\n  \\*******************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.OSU_PLAYFIELD_WIDTH = exports.OSU_PLAYFIELD_HEIGHT = void 0;\r\nexports.OSU_PLAYFIELD_HEIGHT = 384;\r\nexports.OSU_PLAYFIELD_WIDTH = 512;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/replays/RawReplayData.ts\":\r\n/*!*******************************************!*\\\r\n  !*** ./src/core/replays/RawReplayData.ts ***!\r\n  \\*******************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.modsToBitmask = exports.modsFromBitmask = exports.ReplayModBit = exports.RawReplayData = void 0;\r\n/**\r\n * The one that gets parsed from an .osr file\r\n * This is exactly like the one you would get from osr-node\r\n */\r\nconst Mods_1 = __webpack_require__(/*! ../mods/Mods */ \"./src/core/mods/Mods.ts\");\r\nclass RawReplayData {\r\n    constructor() {\r\n        this.gameMode = 0;\r\n        this.gameVersion = 0;\r\n        this.beatmapMD5 = \"\";\r\n        this.playerName = \"\";\r\n        this.replayMD5 = \"\";\r\n        this.number_300s = 0;\r\n        this.number_100s = 0;\r\n        this.number_50s = 0;\r\n        this.gekis = 0;\r\n        this.katus = 0;\r\n        this.misses = 0;\r\n        this.score = 0;\r\n        this.max_combo = 0;\r\n        this.perfect_combo = 0;\r\n        this.mods = 0;\r\n        this.life_bar = \"\";\r\n        this.timestamp = 0;\r\n        this.replay_length = 0;\r\n        this.replay_data = \"\";\r\n        this.unknown = 0;\r\n    }\r\n}\r\nexports.RawReplayData = RawReplayData;\r\n// https://github.com/ppy/osu/blob/7654df94f6f37b8382be7dfcb4f674e03bd35427/osu.Game/Beatmaps/Legacy/LegacyMods.cs\r\nexports.ReplayModBit = {\r\n    NO_FAIL: 1 << 0,\r\n    EASY: 1 << 1,\r\n    // \"TOUCH_DEVICE\": 1 << 2,\r\n    HIDDEN: 1 << 3,\r\n    HARD_ROCK: 1 << 4,\r\n    SUDDEN_DEATH: 1 << 5,\r\n    DOUBLE_TIME: 1 << 6,\r\n    RELAX: 1 << 7,\r\n    HALF_TIME: 1 << 8,\r\n    NIGHT_CORE: 1 << 9,\r\n    FLASH_LIGHT: 1 << 10,\r\n    AUTO_PLAY: 1 << 11,\r\n    SPUN_OUT: 1 << 12,\r\n    AUTO_PILOT: 1 << 13,\r\n    PERFECT: 1 << 14,\r\n    SCORE_V2: 1 << 29,\r\n};\r\nfunction modsFromBitmask(modMask) {\r\n    const list = [];\r\n    for (const mod of Mods_1.OsuClassicMods) {\r\n        const bit = exports.ReplayModBit[mod];\r\n        if ((modMask & bit) > 0) {\r\n            list.push(mod);\r\n        }\r\n    }\r\n    return list;\r\n}\r\nexports.modsFromBitmask = modsFromBitmask;\r\nfunction modsToBitmask(mods) {\r\n    let mask = 0;\r\n    for (const mod of mods) {\r\n        mask |= 1 << exports.ReplayModBit[mod];\r\n    }\r\n    return mask;\r\n}\r\nexports.modsToBitmask = modsToBitmask;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/replays/Replay.ts\":\r\n/*!************************************!*\\\r\n  !*** ./src/core/replays/Replay.ts ***!\r\n  \\************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ReplayButtonState = exports.OsuAction = void 0;\r\nvar OsuAction;\r\n(function (OsuAction) {\r\n    OsuAction[OsuAction[\"leftButton\"] = 0] = \"leftButton\";\r\n    OsuAction[OsuAction[\"rightButton\"] = 1] = \"rightButton\";\r\n})(OsuAction = exports.OsuAction || (exports.OsuAction = {}));\r\nvar ReplayButtonState;\r\n(function (ReplayButtonState) {\r\n    ReplayButtonState[ReplayButtonState[\"None\"] = 0] = \"None\";\r\n    ReplayButtonState[ReplayButtonState[\"Left1\"] = 1] = \"Left1\";\r\n    ReplayButtonState[ReplayButtonState[\"Right1\"] = 2] = \"Right1\";\r\n    ReplayButtonState[ReplayButtonState[\"Left2\"] = 4] = \"Left2\";\r\n    ReplayButtonState[ReplayButtonState[\"Right2\"] = 8] = \"Right2\";\r\n    ReplayButtonState[ReplayButtonState[\"Smoke\"] = 16] = \"Smoke\";\r\n})(ReplayButtonState = exports.ReplayButtonState || (exports.ReplayButtonState = {}));\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/replays/ReplayClicks.ts\":\r\n/*!******************************************!*\\\r\n  !*** ./src/core/replays/ReplayClicks.ts ***!\r\n  \\******************************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculateReplayClicks = void 0;\r\nfunction calculateReplayClicks(frames) {\r\n    const clicks = [[], []];\r\n    const startTime = [null, null];\r\n    for (const frame of frames) {\r\n        for (let i = 0; i < 2; i++) {\r\n            // Enums are so bad in terms of type safety\r\n            const isPressing = frame.actions.includes(i);\r\n            if (!isPressing && startTime[i]) {\r\n                clicks[i].push([startTime[i], frame.time]);\r\n                startTime[i] = null;\r\n            }\r\n            else if (isPressing && startTime[i] === null) {\r\n                startTime[i] = frame.time;\r\n            }\r\n        }\r\n    }\r\n    for (let i = 0; i < 2; i++) {\r\n        if (startTime[i] !== null) {\r\n            clicks[i].push([startTime[i], 1e9]);\r\n        }\r\n    }\r\n    return clicks;\r\n}\r\nexports.calculateReplayClicks = calculateReplayClicks;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/replays/ReplayParser.ts\":\r\n/*!******************************************!*\\\r\n  !*** ./src/core/replays/ReplayParser.ts ***!\r\n  \\******************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.parseReplayFramesFromRaw = void 0;\r\nconst Replay_1 = __webpack_require__(/*! ./Replay */ \"./src/core/replays/Replay.ts\");\r\nconst MAX_COORDINATE_VALUE = 131072;\r\n// LegacyScoreDecoder.cs\r\n// PowerOfTwo bit\r\nconst bitmaskCheck = (mask, bit) => (mask & bit) !== 0;\r\nconst parseReplayFramesFromRaw = (rawString) => {\r\n    const frameStrings = rawString.split(\",\");\r\n    let lastTime = 0;\r\n    const frames = [];\r\n    for (let i = 0; i < frameStrings.length; i++) {\r\n        const split = frameStrings[i].split(\"|\");\r\n        if (split.length < 4)\r\n            continue;\r\n        if (split[0] === \"-12345\") {\r\n            // osu-lazer-comment: The seed is provided in split[3], which we'll need to use at some point\r\n            continue;\r\n        }\r\n        const diff = parseFloat(split[0]);\r\n        const mouseX = parseFloat(split[1]);\r\n        const mouseY = parseFloat(split[2]);\r\n        if (Math.abs(mouseX) > MAX_COORDINATE_VALUE || Math.abs(mouseY) > MAX_COORDINATE_VALUE) {\r\n            throw Error(\"Value overflow while parsing mouse coordinates\");\r\n        }\r\n        lastTime += diff;\r\n        if (i < 2 && mouseX === 256 && mouseY === -500)\r\n            // at the start of the replay, stable places two replay frames, at time 0 and SkipBoundary - 1, respectively.\r\n            // both frames use a position of (256, -500).\r\n            // ignore these frames as they serve no real purpose (and can even mislead ruleset-specific handlers - see mania)\r\n            continue;\r\n        // osu-lazer-comment: At some point we probably want to rewind and play back the negative-time frames\r\n        // but for now we'll achieve equal playback to stable by skipping negative frames\r\n        if (diff < 0)\r\n            continue;\r\n        const actions = [];\r\n        const b = parseInt(split[3]);\r\n        if (bitmaskCheck(b, Replay_1.ReplayButtonState.Left1) || bitmaskCheck(b, Replay_1.ReplayButtonState.Left2))\r\n            actions.push(Replay_1.OsuAction.leftButton);\r\n        if (bitmaskCheck(b, Replay_1.ReplayButtonState.Right1) || bitmaskCheck(b, Replay_1.ReplayButtonState.Right2))\r\n            actions.push(Replay_1.OsuAction.rightButton);\r\n        frames.push({ actions, position: { x: mouseX, y: mouseY }, time: lastTime });\r\n    }\r\n    // We do the following merging because some frames have the same time, but the actions have to be merged together.\r\n    const mergedFrames = [];\r\n    let last;\r\n    for (let i = 0; i < frames.length; i++) {\r\n        if (last === undefined || frames[i].time !== last.time) {\r\n            mergedFrames.push(frames[i]);\r\n            last = frames[i];\r\n        }\r\n        else {\r\n            for (let j = 0; j < frames[i].actions.length; j++) {\r\n                const a = frames[i].actions[j];\r\n                if (!last.actions.includes(a)) {\r\n                    last.actions.push(a);\r\n                }\r\n            }\r\n            last.actions.sort();\r\n        }\r\n    }\r\n    return mergedFrames;\r\n};\r\nexports.parseReplayFramesFromRaw = parseReplayFramesFromRaw;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/utils/SortedList.ts\":\r\n/*!**************************************!*\\\r\n  !*** ./src/core/utils/SortedList.ts ***!\r\n  \\**************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.SortedList = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nclass SortedList {\r\n    constructor() {\r\n        this.list = [];\r\n    }\r\n    // binary search or not -> the insert/remove is also O(n) ....\r\n    indexOf(t) {\r\n        return this.list.findIndex((value) => (0, index_1.floatEqual)(t.compareTo(value), 0));\r\n    }\r\n    // This will also maintain insertion order, which means that adding a 2' to [1, 2, 3] will result to [1, 2, 2', 3].\r\n    add(t) {\r\n        const i = this.list.findIndex((value) => t.compareTo(value) < 0);\r\n        if (i === -1) {\r\n            // This means that there is no element that is larger than the given value\r\n            this.list.splice(this.list.length, 0, t);\r\n        }\r\n        else {\r\n            this.list.splice(i, 0, t);\r\n        }\r\n    }\r\n    remove(t) {\r\n        const i = this.indexOf(t);\r\n        if (i > -1) {\r\n            this.list.splice(i, 1);\r\n        }\r\n    }\r\n    get(i) {\r\n        return this.list[i];\r\n    }\r\n    get length() {\r\n        return this.list.length;\r\n    }\r\n}\r\nexports.SortedList = SortedList;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/core/utils/index.ts\":\r\n/*!*********************************!*\\\r\n  !*** ./src/core/utils/index.ts ***!\r\n  \\*********************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.determineDefaultPlaybackSpeed = exports.normalizeHitObjects = void 0;\r\nconst Slider_1 = __webpack_require__(/*! ../hitobjects/Slider */ \"./src/core/hitobjects/Slider.ts\");\r\nfunction normalizeHitObjects(hitObjects) {\r\n    const hitObjectById = {};\r\n    hitObjects.forEach((h) => {\r\n        hitObjectById[h.id] = h;\r\n        if (h instanceof Slider_1.Slider) {\r\n            hitObjectById[h.head.id] = h.head;\r\n            for (const c of h.checkPoints) {\r\n                hitObjectById[c.id] = c;\r\n            }\r\n        }\r\n    });\r\n    return hitObjectById;\r\n}\r\nexports.normalizeHitObjects = normalizeHitObjects;\r\nfunction determineDefaultPlaybackSpeed(mods) {\r\n    for (let i = 0; i < mods.length; i++) {\r\n        if (mods[i] === \"DOUBLE_TIME\" || mods[i] === \"NIGHT_CORE\")\r\n            return 1.5;\r\n        if (mods[i] === \"HALF_TIME\")\r\n            return 0.75;\r\n    }\r\n    return 1.0;\r\n}\r\nexports.determineDefaultPlaybackSpeed = determineDefaultPlaybackSpeed;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/index.ts\":\r\n/*!**********************!*\\\r\n  !*** ./src/index.ts ***!\r\n  \\**********************/\r\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\r\n\r\n\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.buildBeatmap = exports.parseBlueprint = void 0;\r\nvar index_1 = __webpack_require__(/*! ./core/index */ \"./src/core/index.ts\");\r\nObject.defineProperty(exports, \"parseBlueprint\", ({ enumerable: true, get: function () { return index_1.parseBlueprint; } }));\r\nObject.defineProperty(exports, \"buildBeatmap\", ({ enumerable: true, get: function () { return index_1.buildBeatmap; } }));\r\n__exportStar(__webpack_require__(/*! ./lib/pp */ \"./src/lib/pp.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./lib/diff */ \"./src/lib/diff.ts\"), exports);\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/lib/diff.ts\":\r\n/*!*************************!*\\\r\n  !*** ./src/lib/diff.ts ***!\r\n  \\*************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculateDifficultyAttributes = void 0;\r\n// Strain\r\nconst index_1 = __webpack_require__(/*! ../core/index */ \"./src/core/index.ts\");\r\nconst index_2 = __webpack_require__(/*! ../math/index */ \"./src/math/index.ts\");\r\nconst aim_1 = __webpack_require__(/*! ./skills/aim */ \"./src/lib/skills/aim.ts\");\r\nconst speed_1 = __webpack_require__(/*! ./skills/speed */ \"./src/lib/skills/speed.ts\");\r\nconst flashlight_1 = __webpack_require__(/*! ./skills/flashlight */ \"./src/lib/skills/flashlight.ts\");\r\n// TODO: Utilitiy functions?\r\nconst startTime = (o) => ((0, index_1.isHitCircle)(o) ? o.hitTime : o.startTime);\r\nconst endTime = (o) => ((0, index_1.isHitCircle)(o) ? o.hitTime : o.endTime);\r\nconst position = (o) => ((0, index_1.isHitCircle)(o) ? o.position : o.head.position);\r\nconst normalised_radius = 50.0;\r\nconst maximum_slider_radius = normalised_radius * 2.4;\r\nconst assumed_slider_radius = normalised_radius * 1.8;\r\nfunction computeSliderCursorPosition(slider) {\r\n    const lazyTravelTime = slider.checkPoints[slider.checkPoints.length - 1].hitTime - slider.startTime;\r\n    // float\r\n    let lazyTravelDistance = 0;\r\n    let endTimeMin = lazyTravelTime / slider.spanDuration;\r\n    // TODO: Control this code again\r\n    if (endTimeMin % 2 >= 1)\r\n        endTimeMin = 1 - (endTimeMin % 1);\r\n    else\r\n        endTimeMin %= 1;\r\n    // temporary lazy end position until a real result can be derived.\r\n    let lazyEndPosition = index_2.Vec2.add(slider.startPosition, slider.path.positionAt(endTimeMin));\r\n    let currCursorPosition = slider.startPosition;\r\n    const scalingFactor = normalised_radius / slider.radius; // lazySliderDistance is coded to be sensitive to scaling,\r\n    // this makes the maths easier with the thresholds being\r\n    // used.\r\n    const numCheckPoints = slider.checkPoints.length;\r\n    // We start from 0 because the head is NOT a slider checkpoint here\r\n    for (let i = 0; i < numCheckPoints; i++) {\r\n        const currMovementObj = slider.checkPoints[i];\r\n        // This is where we have to be very careful due to osu!lazer using their VISUAL RENDERING POSITION instead of\r\n        // JUDGEMENT POSITION for their last tick. bruh\r\n        const currMovementObjPosition = currMovementObj.type === \"LAST_LEGACY_TICK\" ? slider.endPosition : currMovementObj.position;\r\n        let currMovement = index_2.Vec2.sub(currMovementObjPosition, currCursorPosition);\r\n        let currMovementLength = scalingFactor * currMovement.length();\r\n        // Amount of movement required so that the cursor position needs to be updated.\r\n        let requiredMovement = assumed_slider_radius;\r\n        if (i === numCheckPoints - 1) {\r\n            // The end of a slider has special aim rules due to the relaxed time constraint on position.\r\n            // There is both a lazy end position as well as the actual end slider position. We assume the player takes the\r\n            // simpler movement. For sliders that are circular, the lazy end position may actually be farther away than the\r\n            // sliders true end. This code is designed to prevent buffing situations where lazy end is actually a less\r\n            // efficient movement.\r\n            const lazyMovement = index_2.Vec2.sub(lazyEndPosition, currCursorPosition);\r\n            if (lazyMovement.length() < currMovement.length())\r\n                currMovement = lazyMovement;\r\n            currMovementLength = scalingFactor * currMovement.length();\r\n        }\r\n        else if (currMovementObj.type === \"REPEAT\") {\r\n            // For a slider repeat, assume a tighter movement threshold to better assess repeat sliders.\r\n            requiredMovement = normalised_radius;\r\n        }\r\n        if (currMovementLength > requiredMovement) {\r\n            // this finds the positional delta from the required radius and the current position, and updates the\r\n            // currCursorPosition accordingly, as well as rewarding distance.\r\n            currCursorPosition = index_2.Vec2.add(currCursorPosition, index_2.Vec2.scale(currMovement, (0, index_2.float32_div)(currMovementLength - requiredMovement, currMovementLength)));\r\n            currMovementLength *= (currMovementLength - requiredMovement) / currMovementLength;\r\n            lazyTravelDistance = (0, index_2.float32_add)(lazyTravelDistance, currMovementLength);\r\n        }\r\n        if (i === numCheckPoints - 1)\r\n            lazyEndPosition = currCursorPosition;\r\n    }\r\n    lazyTravelDistance = (0, index_2.float32_mul)(lazyTravelDistance, Math.pow(1 + slider.repeatCount / 2.5, 1.0 / 2.5)); // Bonus for\r\n    // repeat\r\n    // sliders\r\n    // until a\r\n    // better\r\n    // per nested object strain system can be\r\n    // achieved.\r\n    return { lazyTravelTime, lazyTravelDistance, lazyEndPosition };\r\n}\r\nconst defaultOsuDifficultyHitObject = () => ({\r\n    deltaTime: 0,\r\n    travelTime: 0,\r\n    travelDistance: 0,\r\n    jumpDistance: 0,\r\n    movementDistance: 0,\r\n    movementTime: 0,\r\n    strainTime: 0,\r\n    endTime: 0,\r\n    startTime: 0,\r\n    angle: null,\r\n});\r\n/**\r\n * Returns n OsuDifficultyHitObjects where the first one is a dummy value\r\n */\r\nfunction preprocessDifficultyHitObject(hitObjects, clockRate) {\r\n    const difficultyHitObjects = [defaultOsuDifficultyHitObject()];\r\n    const min_delta_time = 25;\r\n    const clockAdjusted = (x) => x / clockRate;\r\n    // Caching for the sliders\r\n    const sliderCursorPosition = {};\r\n    function computeSliderCursorPositionIfNeeded(s) {\r\n        if (sliderCursorPosition[s.id] === undefined) {\r\n            sliderCursorPosition[s.id] = computeSliderCursorPosition(s);\r\n        }\r\n        return sliderCursorPosition[s.id];\r\n    }\r\n    for (let i = 1; i < hitObjects.length; i++) {\r\n        const lastLast = hitObjects[i - 2];\r\n        const last = hitObjects[i - 1];\r\n        const current = hitObjects[i];\r\n        const difficultyHitObject = (function calculateDifficultyHitObject() {\r\n            const result = defaultOsuDifficultyHitObject();\r\n            result.startTime = clockAdjusted(startTime(current));\r\n            result.endTime = clockAdjusted(endTime(current));\r\n            result.deltaTime = clockAdjusted(startTime(current) - startTime(last));\r\n            const strainTime = Math.max(result.deltaTime, min_delta_time);\r\n            result.strainTime = strainTime;\r\n            if ((0, index_1.isSpinner)(current) || (0, index_1.isSpinner)(last))\r\n                return result;\r\n            // float\r\n            let scalingFactor = (0, index_2.float32_div)(normalised_radius, current.radius);\r\n            // Now current is either HitCircle or Slider\r\n            if (current.radius < 30) {\r\n                const smallCircleBonus = (0, index_2.float32_div)(Math.min(30 - current.radius, 5), 50);\r\n                scalingFactor *= 1 + smallCircleBonus;\r\n            }\r\n            function getEndCursorPosition(o) {\r\n                if ((0, index_1.isHitCircle)(o))\r\n                    return o.position;\r\n                const { lazyEndPosition } = computeSliderCursorPositionIfNeeded(o);\r\n                return lazyEndPosition !== null && lazyEndPosition !== void 0 ? lazyEndPosition : o.startPosition; // TODO: How can it be nullable?\r\n            }\r\n            const lastCursorPosition = getEndCursorPosition(last);\r\n            // sqrt((x1*c-x2*c)^2+(y1*c-y2*c)^2) = sqrt(c^2 (x1-x2)^2 + c^2 (y1-y2)^2) = c * dist((x1,y1),(x2,y2))\r\n            result.jumpDistance = index_2.Vec2.distance(index_2.Vec2.scale(position(current), scalingFactor), index_2.Vec2.scale(lastCursorPosition, scalingFactor));\r\n            if ((0, index_1.isSlider)(last)) {\r\n                // No need to store into the Slider object!\r\n                const { lazyTravelTime: lastSliderLazyTravelTime, lazyTravelDistance: lastSliderLazyTravelDistance } = computeSliderCursorPositionIfNeeded(last);\r\n                result.travelDistance = lastSliderLazyTravelDistance;\r\n                result.travelTime = Math.max(lastSliderLazyTravelTime / clockRate, min_delta_time);\r\n                result.movementTime = Math.max(strainTime - result.travelTime, min_delta_time);\r\n                // tailCircle.StackedPosition\r\n                const tailJumpDistance = (0, index_2.float32)(index_2.Vec2.distance(last.endPosition, position(current)) * scalingFactor);\r\n                result.movementDistance = Math.max(0, Math.min(result.jumpDistance - (maximum_slider_radius - assumed_slider_radius), tailJumpDistance - maximum_slider_radius));\r\n            }\r\n            else {\r\n                result.movementTime = strainTime;\r\n                result.movementDistance = result.jumpDistance;\r\n            }\r\n            if (lastLast !== undefined && !(0, index_1.isSpinner)(lastLast)) {\r\n                const lastLastCursorPosition = getEndCursorPosition(lastLast);\r\n                const v1 = index_2.Vec2.sub(lastLastCursorPosition, position(last));\r\n                const v2 = index_2.Vec2.sub(position(current), lastCursorPosition);\r\n                const dot = (0, index_2.float32)(index_2.Vec2.dot(v1, v2));\r\n                const det = (0, index_2.float32_add)((0, index_2.float32_mul)(v1.x, v2.y), -(0, index_2.float32_mul)(v1.y, v2.x));\r\n                result.angle = Math.abs(Math.atan2(det, dot));\r\n            }\r\n            return result;\r\n        })();\r\n        difficultyHitObjects.push(difficultyHitObject);\r\n    }\r\n    return difficultyHitObjects;\r\n}\r\nfunction determineMaxCombo(hitObjects) {\r\n    let maxCombo = 0;\r\n    let hitCircleCount = 0, sliderCount = 0, spinnerCount = 0;\r\n    for (const o of hitObjects) {\r\n        maxCombo++;\r\n        if ((0, index_1.isHitCircle)(o))\r\n            hitCircleCount++;\r\n        if ((0, index_1.isSpinner)(o))\r\n            spinnerCount++;\r\n        if ((0, index_1.isSlider)(o)) {\r\n            sliderCount++;\r\n            maxCombo += o.checkPoints.length;\r\n        }\r\n    }\r\n    return { maxCombo, hitCircleCount, sliderCount, spinnerCount };\r\n}\r\nconst DIFFICULTY_MULTIPLIER = 0.0675;\r\nconst speedAdjustedAR = (AR, clockRate) => (0, index_2.approachDurationToApproachRate)((0, index_2.approachRateToApproachDuration)(AR) / clockRate);\r\nconst speedAdjustedOD = (OD, clockRate) => (0, index_2.hitWindowGreatToOD)((0, index_2.overallDifficultyToHitWindowGreat)(OD) / clockRate);\r\n// Calculates the different star ratings after every hit object i\r\nfunction calculateDifficultyAttributes({ appliedMods: mods, difficulty, hitObjects, controlPointInfo }, onlyFinalValue) {\r\n    const clockRate = (0, index_1.determineDefaultPlaybackSpeed)(mods);\r\n    const diffs = preprocessDifficultyHitObject(hitObjects, clockRate);\r\n    const hitWindowGreat = (0, index_2.hitWindowsForOD)(difficulty.overallDifficulty, true)[0] / clockRate;\r\n    const aimValues = (0, aim_1.calculateAim)(hitObjects, diffs, true, onlyFinalValue);\r\n    const aimValuesNoSliders = (0, aim_1.calculateAim)(hitObjects, diffs, false, onlyFinalValue);\r\n    const speedValues = (0, speed_1.calculateSpeed)(hitObjects, diffs, hitWindowGreat, onlyFinalValue);\r\n    const flashlightValues = (0, flashlight_1.calculateFlashlight)(hitObjects, diffs, onlyFinalValue, mods.includes(\"HIDDEN\"));\r\n    const speedNotes = (0, speed_1.calculateRelevantNotes)(hitObjects, diffs, hitWindowGreat, onlyFinalValue);\r\n    // Static values\r\n    const { hitCircleCount, sliderCount, spinnerCount, maxCombo } = determineMaxCombo(hitObjects);\r\n    const overallDifficulty = speedAdjustedOD(difficulty.overallDifficulty, clockRate);\r\n    const approachRate = speedAdjustedAR(difficulty.approachRate, clockRate);\r\n    const beatLength = (0, index_1.mostCommonBeatLength)({\r\n        hitObjects,\r\n        timingPoints: controlPointInfo.timingPoints.list,\r\n    });\r\n    const mostCommonBPM = (beatLength === undefined ? 0 : (0, index_2.beatLengthToBPM)(beatLength)) * clockRate;\r\n    const attributes = [];\r\n    for (let i = 0; i < aimValues.length; i++) {\r\n        let aimRating = Math.sqrt(aimValues[i]) * DIFFICULTY_MULTIPLIER;\r\n        const aimRatingNoSliders = Math.sqrt(aimValuesNoSliders[i]) * DIFFICULTY_MULTIPLIER;\r\n        let speedRating = Math.sqrt(speedValues[i]) * DIFFICULTY_MULTIPLIER;\r\n        let flashlightRating = Math.sqrt(flashlightValues[i]) * DIFFICULTY_MULTIPLIER;\r\n        const sliderFactor = aimRating > 0 ? aimRatingNoSliders / aimRating : 1;\r\n        if (mods.includes(\"RELAX\")) {\r\n            aimRating *= 0.9;\r\n            speedRating = 0;\r\n            flashlightRating *= 0.7;\r\n        }\r\n        const baseAimPerformance = Math.pow(5 * Math.max(1, aimRating / 0.0675) - 4, 3) / 100000;\r\n        const baseSpeedPerformance = Math.pow(5 * Math.max(1, speedRating / 0.0675) - 4, 3) / 100000;\r\n        let baseFlashlightPerformance = 0.0;\r\n        if (mods.includes(\"FLASH_LIGHT\"))\r\n            baseFlashlightPerformance = Math.pow(flashlightRating, 2.0) * 25.0;\r\n        const basePerformance = Math.pow(Math.pow(baseAimPerformance, 1.1) +\r\n            Math.pow(baseSpeedPerformance, 1.1) +\r\n            Math.pow(baseFlashlightPerformance, 1.1), 1.0 / 1.1);\r\n        const starRating = basePerformance > 0.00001\r\n            ? Math.cbrt(1.14) * 0.027 * (Math.cbrt((100000 / Math.pow(2, 1 / 1.1)) * basePerformance) + 4)\r\n            : 0;\r\n        attributes.push({\r\n            aimDifficulty: aimRating,\r\n            speedDifficulty: speedRating,\r\n            flashlightDifficulty: flashlightRating,\r\n            sliderFactor,\r\n            speedNotes,\r\n            starRating,\r\n            // These are actually redundant but idc\r\n            hitCircleCount,\r\n            sliderCount,\r\n            spinnerCount,\r\n            maxCombo,\r\n            overallDifficulty,\r\n            approachRate,\r\n            mostCommonBPM,\r\n            drainRate: difficulty.drainRate,\r\n        });\r\n    }\r\n    return attributes;\r\n}\r\nexports.calculateDifficultyAttributes = calculateDifficultyAttributes;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/lib/pp.ts\":\r\n/*!***********************!*\\\r\n  !*** ./src/lib/pp.ts ***!\r\n  \\***********************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculatePerformanceAttributes = void 0;\r\nconst index_1 = __webpack_require__(/*! ../core/index */ \"./src/core/index.ts\");\r\nconst index_2 = __webpack_require__(/*! ../math/index */ \"./src/math/index.ts\");\r\nfunction calculatePerformanceAttributes(beatmapParams, scoreParams) {\r\n    var _a;\r\n    const { hitCircleCount, sliderCount, spinnerCount, aimDifficulty, speedDifficulty, flashlightDifficulty, approachRate, drainRate, overallDifficulty, sliderFactor, maxCombo: beatmapMaxCombo, speedNotes } = beatmapParams;\r\n    const { mods, countMeh, countGreat, countMiss, countOk, maxCombo: scoreMaxCombo } = scoreParams;\r\n    const accuracy = (_a = (0, index_1.osuStableAccuracy)([countGreat, countOk, countMeh, countMiss])) !== null && _a !== void 0 ? _a : 0;\r\n    const totalHits = countGreat + countOk + countMeh + countMiss;\r\n    let effectiveMissCount = (function calculateEffectiveMissCount() {\r\n        // Guess the number of misses + slider breaks from combo\r\n        let comboBasedMissCount = 0.0;\r\n        if (sliderCount > 0) {\r\n            const fullComboThreshold = beatmapMaxCombo - 0.1 * sliderCount;\r\n            if (scoreMaxCombo < fullComboThreshold)\r\n                comboBasedMissCount = fullComboThreshold / Math.max(1.0, scoreMaxCombo);\r\n        }\r\n        // Clamp misscount since it's derived from combo and can be higher than total hits and that breaks some calculations\r\n        comboBasedMissCount = Math.min(comboBasedMissCount, totalHits);\r\n        return Math.max(countMiss, comboBasedMissCount);\r\n    })();\r\n    let multiplier = 1.14;\r\n    if (mods.includes(\"NO_FAIL\"))\r\n        multiplier *= Math.max(0.9, 1 - 0.02 * effectiveMissCount);\r\n    if (mods.includes(\"SPUN_OUT\"))\r\n        multiplier *= 1.0 - Math.pow(spinnerCount / totalHits, 0.85);\r\n    if (mods.includes(\"RELAX\")) {\r\n        const okMultiplier = Math.max(0.0, overallDifficulty > 0.0 ? 1 - Math.pow(overallDifficulty / 13.33, 1.8) : 1.0);\r\n        const mehMultiplier = Math.max(0.0, overallDifficulty > 0.0 ? 1 - Math.pow(overallDifficulty / 13.33, 5) : 1.0);\r\n        effectiveMissCount = Math.min(effectiveMissCount + countOk * okMultiplier + countMeh * mehMultiplier, totalHits);\r\n        multiplier *= 0.6;\r\n    }\r\n    const comboScalingFactor = beatmapMaxCombo <= 0 ? 1.0 : Math.min(Math.pow(scoreMaxCombo, 0.8) / Math.pow(beatmapMaxCombo, 0.8), 1.0);\r\n    const aimValue = (function computeAimValue() {\r\n        let rawAim = aimDifficulty;\r\n        if (mods.includes(\"TOUCH_DEVICE\"))\r\n            rawAim = Math.pow(rawAim, 0.8);\r\n        let aimValue = Math.pow(5.0 * Math.max(1.0, rawAim / 0.0675) - 4.0, 3.0) / 100000.0;\r\n        const lengthBonus = 0.95 + 0.4 * Math.min(1.0, totalHits / 2000.0) + (totalHits > 2000 ? Math.log10(totalHits / 2000.0) * 0.5 : 0.0);\r\n        aimValue *= lengthBonus;\r\n        if (effectiveMissCount > 0)\r\n            aimValue *= 0.97 * Math.pow(1 - Math.pow(effectiveMissCount / totalHits, 0.775), effectiveMissCount);\r\n        aimValue *= comboScalingFactor;\r\n        let approachRateFactor = 0.0;\r\n        if (approachRate > 10.33)\r\n            approachRateFactor = 0.3 * (approachRate - 10.33);\r\n        else if (approachRate < 8)\r\n            approachRateFactor = 0.05 * (8.0 - approachRate);\r\n        if (mods.includes(\"RELAX\"))\r\n            approachRateFactor = 0.0;\r\n        aimValue *= 1.0 + approachRateFactor * lengthBonus; // Buff for long maps with high AR\r\n        if (mods.includes(\"BLINDS\")) {\r\n            aimValue *=\r\n                1.3 +\r\n                    totalHits *\r\n                        (0.0016 / (1 + 2 * effectiveMissCount)) *\r\n                        Math.pow(accuracy, 16) *\r\n                        (1 - 0.003 * drainRate * drainRate);\r\n        }\r\n        else if (mods.includes(\"HIDDEN\")) {\r\n            // Rewarding low AR when there is HD -> this nerfs high AR and buffs low AR\r\n            aimValue *= 1.0 + 0.04 * (12.0 - approachRate);\r\n        }\r\n        // We assume 15% of sliders in a map are difficult since there's no way to tell from the performance calculator.\r\n        const estimateDifficultSliders = sliderCount * 0.15;\r\n        if (sliderCount > 0) {\r\n            const estimateSliderEndsDropped = (0, index_2.clamp)(Math.min(countOk + countMeh + countMiss, beatmapMaxCombo - scoreMaxCombo), 0, estimateDifficultSliders);\r\n            const sliderNerfFactor = (1 - sliderFactor) * Math.pow(1 - estimateSliderEndsDropped / estimateDifficultSliders, 3) + sliderFactor;\r\n            aimValue *= sliderNerfFactor;\r\n        }\r\n        aimValue *= accuracy;\r\n        aimValue *= 0.98 + Math.pow(overallDifficulty, 2) / 2500;\r\n        return aimValue;\r\n    })();\r\n    const speedValue = (function computeSpeedValue() {\r\n        const relevantTotalDiff = totalHits - speedNotes;\r\n        const relevantCountGreat = Math.max(0, countGreat - relevantTotalDiff);\r\n        const relevantCountOk = Math.max(0, countOk - Math.max(0, relevantTotalDiff - countGreat));\r\n        const relevantCountMeh = Math.max(0, countMeh - Math.max(0, relevantTotalDiff - countGreat - countOk));\r\n        const relevantAccuracy = speedNotes == 0 ? 0 : (relevantCountGreat * 6.0 + relevantCountOk * 2.0 + relevantCountMeh) / (speedNotes * 6.0);\r\n        let speedValue = Math.pow(5.0 * Math.max(1.0, speedDifficulty / 0.0675) - 4.0, 3.0) / 100000.0;\r\n        const lengthBonus = 0.95 + 0.4 * Math.min(1.0, totalHits / 2000.0) + (totalHits > 2000 ? Math.log10(totalHits / 2000.0) * 0.5 : 0.0);\r\n        speedValue *= lengthBonus;\r\n        // Penalize misses by assessing # of misses relative to the total # of objects. Default a 3% reduction for any # of\r\n        // misses.\r\n        if (effectiveMissCount > 0)\r\n            speedValue *=\r\n                0.97 * Math.pow(1 - Math.pow(effectiveMissCount / totalHits, 0.775), Math.pow(effectiveMissCount, 0.875));\r\n        speedValue *= comboScalingFactor;\r\n        let approachRateFactor = 0.0;\r\n        if (approachRate > 10.33)\r\n            approachRateFactor = 0.3 * (approachRate - 10.33);\r\n        speedValue *= 1.0 + approachRateFactor * lengthBonus; // Buff for longer maps with high AR.\r\n        if (mods.includes(\"BLINDS\")) {\r\n            // Increasing the speed value by object count for Blinds isn't ideal, so the minimum buff is given.\r\n            speedValue *= 1.12;\r\n        }\r\n        else if (mods.includes(\"HIDDEN\")) {\r\n            // We want to give more reward for lower AR when it comes to aim and HD. This nerfs high AR and buffs lower AR.\r\n            speedValue *= 1.0 + 0.04 * (12.0 - approachRate);\r\n        }\r\n        // Scale the speed value with accuracy and OD.\r\n        speedValue *=\r\n            (0.95 + Math.pow(overallDifficulty, 2) / 750) * Math.pow((accuracy + relevantAccuracy) / 2.0, (14.5 - Math.max(overallDifficulty, 8)) / 2);\r\n        // Scale the speed value with # of 50s to punish double-tapping.\r\n        speedValue *= Math.pow(0.99, countMeh < totalHits / 500.0 ? 0 : countMeh - totalHits / 500.0);\r\n        return speedValue;\r\n    })();\r\n    const accuracyValue = (function computeAccuracyValue() {\r\n        if (mods.includes(\"RELAX\"))\r\n            return 0.0;\r\n        // This percentage only considers HitCircles of any value - in this part of the calculation we focus on hitting the\r\n        // timing hit window.\r\n        let betterAccuracyPercentage;\r\n        const amountHitObjectsWithAccuracy = hitCircleCount;\r\n        if (amountHitObjectsWithAccuracy > 0)\r\n            betterAccuracyPercentage =\r\n                ((countGreat - (totalHits - amountHitObjectsWithAccuracy)) * 6 + countOk * 2 + countMeh) /\r\n                    (amountHitObjectsWithAccuracy * 6.0);\r\n        else\r\n            betterAccuracyPercentage = 0;\r\n        // It is possible to reach a negative accuracy with this formula. Cap it at zero - zero points.\r\n        if (betterAccuracyPercentage < 0)\r\n            betterAccuracyPercentage = 0;\r\n        // Lots of arbitrary values from testing.\r\n        // Considering to use derivation from perfect accuracy in a probabilistic manner - assume normal distribution.\r\n        let accuracyValue = Math.pow(1.52163, overallDifficulty) * Math.pow(betterAccuracyPercentage, 24) * 2.83;\r\n        // Bonus for many hitcircles - it's harder to keep good accuracy up for longer.\r\n        accuracyValue *= Math.min(1.15, Math.pow(amountHitObjectsWithAccuracy / 1000.0, 0.3));\r\n        // Increasing the accuracy value by object count for Blinds isn't ideal, so the minimum buff is given.\r\n        if (mods.includes(\"BLINDS\"))\r\n            accuracyValue *= 1.14;\r\n        else if (mods.includes(\"HIDDEN\"))\r\n            accuracyValue *= 1.08;\r\n        if (mods.includes(\"FLASH_LIGHT\"))\r\n            accuracyValue *= 1.02;\r\n        return accuracyValue;\r\n    })();\r\n    const flashlightValue = (function computeFlashLightValue() {\r\n        if (!mods.includes(\"FLASH_LIGHT\"))\r\n            return 0.0;\r\n        let rawFlashlight = flashlightDifficulty;\r\n        if (mods.includes(\"TOUCH_DEVICE\"))\r\n            rawFlashlight = Math.pow(rawFlashlight, 0.8);\r\n        let flashlightValue = Math.pow(rawFlashlight, 2.0) * 25.0;\r\n        // if (mods.includes(\"HIDDEN\")) flashlightValue *= 1.3;\r\n        // Penalize misses by assessing # of misses relative to the total # of objects. Default a 3% reduction for any # of\r\n        // misses.\r\n        if (effectiveMissCount > 0)\r\n            flashlightValue *=\r\n                0.97 * Math.pow(1 - Math.pow(effectiveMissCount / totalHits, 0.775), Math.pow(effectiveMissCount, 0.875));\r\n        flashlightValue *= comboScalingFactor;\r\n        // Account for shorter maps having a higher ratio of 0 combo/100 combo flashlight radius.\r\n        flashlightValue *=\r\n            0.7 +\r\n                0.1 * Math.min(1.0, totalHits / 200.0) +\r\n                (totalHits > 200 ? 0.2 * Math.min(1.0, (totalHits - 200) / 200.0) : 0.0);\r\n        // Scale the flashlight value with accuracy _slightly_.\r\n        flashlightValue *= 0.5 + accuracy / 2.0;\r\n        // It is important to also consider accuracy difficulty when doing that.\r\n        flashlightValue *= 0.98 + Math.pow(overallDifficulty, 2) / 2500;\r\n        return flashlightValue;\r\n    })();\r\n    const totalValue = Math.pow(Math.pow(aimValue, 1.1) +\r\n        Math.pow(speedValue, 1.1) +\r\n        Math.pow(accuracyValue, 1.1) +\r\n        Math.pow(flashlightValue, 1.1), 1.0 / 1.1) * multiplier;\r\n    return {\r\n        aim: aimValue,\r\n        speed: speedValue,\r\n        accuracy: accuracyValue,\r\n        flashlight: flashlightValue,\r\n        effectiveMissCount,\r\n        total: totalValue,\r\n    };\r\n}\r\nexports.calculatePerformanceAttributes = calculatePerformanceAttributes;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/lib/skills/aim.ts\":\r\n/*!*******************************!*\\\r\n  !*** ./src/lib/skills/aim.ts ***!\r\n  \\*******************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculateAim = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../core/index */ \"./src/core/index.ts\");\r\nconst index_2 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst strain_1 = __webpack_require__(/*! ./strain */ \"./src/lib/skills/strain.ts\");\r\nconst wide_angle_multiplier = 1.5;\r\nconst acute_angle_multiplier = 1.95;\r\nconst slider_multiplier = 1.35;\r\nconst velocity_change_multiplier = 0.75;\r\nconst skillMultiplier = 23.55;\r\nconst strainDecayBase = 0.15;\r\nconst strainDecay = (ms) => Math.pow(strainDecayBase, ms / 1000);\r\nconst calcWideAngleBonus = (angle) => Math.pow(Math.sin((3.0 / 4) * (Math.min((5.0 / 6) * Math.PI, Math.max(Math.PI / 6, angle)) - Math.PI / 6)), 2);\r\nconst calcAcuteAngleBonus = (angle) => 1 - calcWideAngleBonus(angle);\r\n/**\r\n * @returns `strains[i]` = strain value after the `i`th hitObject\r\n */\r\nfunction calculateAimStrains(hitObjects, diffs, withSliders) {\r\n    if (hitObjects.length === 0)\r\n        return [];\r\n    const strains = [0];\r\n    let currentStrain = 0;\r\n    // Index 0 is a dummy difficultyHitObject\r\n    for (let i = 1; i < diffs.length; i++) {\r\n        const lastLast = hitObjects[i - 2];\r\n        const last = hitObjects[i - 1];\r\n        const current = hitObjects[i];\r\n        const diffLastLast = diffs[i - 2];\r\n        const diffLast = diffs[i - 1];\r\n        const diffCurrent = diffs[i];\r\n        const strainValueOf = (function () {\r\n            // We need at least three non-dummy elements for this calculation\r\n            if (i <= 2 || (0, index_1.isSpinner)(current) || (0, index_1.isSpinner)(last))\r\n                return 0;\r\n            let currVelocity = diffCurrent.jumpDistance / diffCurrent.strainTime;\r\n            if ((0, index_1.isSlider)(last) && withSliders) {\r\n                const movementVelocity = diffCurrent.movementDistance / diffCurrent.movementTime;\r\n                const travelVelocity = diffCurrent.travelDistance / diffCurrent.travelTime;\r\n                currVelocity = Math.max(currVelocity, movementVelocity + travelVelocity);\r\n            }\r\n            let prevVelocity = diffLast.jumpDistance / diffLast.strainTime;\r\n            if ((0, index_1.isSlider)(lastLast) && withSliders) {\r\n                const movementVelocity = diffLast.movementDistance / diffLast.movementTime;\r\n                const travelVelocity = diffLast.travelDistance / diffLast.travelTime;\r\n                prevVelocity = Math.max(prevVelocity, movementVelocity + travelVelocity);\r\n            }\r\n            let wideAngleBonus = 0;\r\n            let acuteAngleBonus = 0;\r\n            let sliderBonus = 0;\r\n            let velocityChangeBonus = 0;\r\n            let aimStrain = currVelocity; // Start strain with regular velocity.\r\n            if (\r\n            // If rhythms are the same.\r\n            Math.max(diffCurrent.strainTime, diffLast.strainTime) <\r\n                1.25 * Math.min(diffCurrent.strainTime, diffLast.strainTime)) {\r\n                if (diffCurrent.angle !== null && diffLast.angle !== null && diffLastLast.angle !== null) {\r\n                    const currAngle = diffCurrent.angle;\r\n                    const lastAngle = diffLast.angle;\r\n                    const lastLastAngle = diffLastLast.angle;\r\n                    // Rewarding angles, take the smaller velocity as base.\r\n                    const angleBonus = Math.min(currVelocity, prevVelocity);\r\n                    wideAngleBonus = calcWideAngleBonus(currAngle);\r\n                    acuteAngleBonus = calcAcuteAngleBonus(currAngle);\r\n                    if (diffCurrent.strainTime > 100)\r\n                        // Only buff deltaTime exceeding 300 bpm 1/2.\r\n                        acuteAngleBonus = 0;\r\n                    else {\r\n                        acuteAngleBonus *=\r\n                            calcAcuteAngleBonus(lastAngle) *\r\n                                Math.min(angleBonus, 125 / diffCurrent.strainTime) *\r\n                                Math.pow(Math.sin((Math.PI / 2) * Math.min(1, (100 - diffCurrent.strainTime) / 25)), 2) *\r\n                                Math.pow(Math.sin(((Math.PI / 2) * ((0, index_2.clamp)(diffCurrent.jumpDistance, 50, 100) - 50)) / 50), 2);\r\n                    }\r\n                    // Penalize wide angles if they're repeated, reducing the penalty as the lastAngle gets more acute.\r\n                    wideAngleBonus *= angleBonus * (1 - Math.min(wideAngleBonus, Math.pow(calcWideAngleBonus(lastAngle), 3)));\r\n                    // Penalize acute angles if they're repeated, reducing the penalty as the lastLastAngle gets more obtuse.\r\n                    acuteAngleBonus *=\r\n                        0.5 + 0.5 * (1 - Math.min(acuteAngleBonus, Math.pow(calcAcuteAngleBonus(lastLastAngle), 3)));\r\n                }\r\n            }\r\n            // TODO: floatEqual?\r\n            if (Math.max(prevVelocity, currVelocity) !== 0) {\r\n                // We want to use the average velocity over the whole object when awarding differences, not the individual jump\r\n                // and slider path velocities.\r\n                prevVelocity = (diffLast.jumpDistance + diffLast.travelDistance) / diffLast.strainTime;\r\n                currVelocity = (diffCurrent.jumpDistance + diffCurrent.travelDistance) / diffCurrent.strainTime;\r\n                // Scale with ratio of difference compared to 0.5 * max dist.\r\n                const distRatio = Math.pow(Math.sin(((Math.PI / 2) * Math.abs(prevVelocity - currVelocity)) / Math.max(prevVelocity, currVelocity)), 2);\r\n                // Reward for % distance up to 125 / strainTime for overlaps where velocity is still changing.\r\n                const overlapVelocityBuff = Math.min(125 / Math.min(diffCurrent.strainTime, diffLast.strainTime), Math.abs(prevVelocity - currVelocity));\r\n                // Reward for % distance slowed down compared to previous, paying attention to not award overlap\r\n                const nonOverlapVelocityBuff = Math.abs(prevVelocity - currVelocity) *\r\n                    // do not award overlap\r\n                    Math.pow(Math.sin((Math.PI / 2) * Math.min(1, Math.min(diffCurrent.jumpDistance, diffLast.jumpDistance) / 100)), 2);\r\n                // Choose the largest bonus, multiplied by ratio.\r\n                // velocityChangeBonus = Math.max(overlapVelocityBuff, nonOverlapVelocityBuff) * distRatio;\r\n                velocityChangeBonus = overlapVelocityBuff * distRatio;\r\n                // Penalize for rhythm changes.\r\n                velocityChangeBonus *= Math.pow(Math.min(diffCurrent.strainTime, diffLast.strainTime) / Math.max(diffCurrent.strainTime, diffLast.strainTime), 2);\r\n            }\r\n            if (diffCurrent.travelTime !== 0) {\r\n                // Reward sliders based on velocity.\r\n                sliderBonus = diffCurrent.travelDistance / diffCurrent.travelTime;\r\n            }\r\n            // Add in acute angle bonus or wide angle bonus + velocity change bonus, whichever is larger.\r\n            aimStrain += Math.max(acuteAngleBonus * acute_angle_multiplier, wideAngleBonus * wide_angle_multiplier + velocityChangeBonus * velocity_change_multiplier);\r\n            // Add in additional slider velocity bonus.\r\n            if (withSliders)\r\n                aimStrain += sliderBonus * slider_multiplier;\r\n            return aimStrain;\r\n        })();\r\n        currentStrain *= strainDecay(diffCurrent.deltaTime);\r\n        currentStrain += strainValueOf * skillMultiplier;\r\n        strains.push(currentStrain);\r\n    }\r\n    return strains;\r\n}\r\nfunction calculateAim(hitObjects, diffs, withSliders, onlyFinalValue) {\r\n    const strains = calculateAimStrains(hitObjects, diffs, withSliders);\r\n    return (0, strain_1.calculateDifficultyValues)(diffs, strains, {\r\n        decayWeight: 0.9,\r\n        difficultyMultiplier: 1.06,\r\n        sectionDuration: 400,\r\n        reducedSectionCount: 10,\r\n        strainDecay,\r\n    }, onlyFinalValue);\r\n}\r\nexports.calculateAim = calculateAim;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/lib/skills/flashlight.ts\":\r\n/*!**************************************!*\\\r\n  !*** ./src/lib/skills/flashlight.ts ***!\r\n  \\**************************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculateFlashlight = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../core/index */ \"./src/core/index.ts\");\r\nconst index_2 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst strain_1 = __webpack_require__(/*! ./strain */ \"./src/lib/skills/strain.ts\");\r\nconst skillMultiplier = 0.05;\r\nconst strainDecayBase = 0.15;\r\nconst historyLength = 10; // Look back for 10 notes is added for the sake of flashlight calculations.\r\nconst strainDecay = (ms) => Math.pow(strainDecayBase, ms / 1000);\r\nconst position = (o) => ((0, index_1.isHitCircle)(o) ? o.position : o.head.position);\r\n// In Flashlight it's not using StackedEndPosition so we have to adjust\r\nconst unstackedEndPosition = (o) => ((0, index_1.isHitCircle)(o) ? o.unstackedPosition : o.unstackedEndPosition);\r\n// const blueprintEndPosition = (o: HitCircle | Slider) => (isHitCircle(o) ? o.position : o.endPosition);\r\nfunction calculateFlashlightStrains(hitObjects, diffs, hidden) {\r\n    if (hitObjects.length === 0)\r\n        return [];\r\n    let currentStrain = 0;\r\n    const strains = [currentStrain];\r\n    const max_opacity_bonus = 0.4;\r\n    const hidden_bonus = 0.2;\r\n    for (let i = 1; i < diffs.length; i++) {\r\n        const current = hitObjects[i];\r\n        const diffCurrent = diffs[i];\r\n        const strainValueOf = (function () {\r\n            if ((0, index_1.isSpinner)(current))\r\n                return 0;\r\n            const scalingFactor = 52.0 / current.radius;\r\n            let smallDistNerf = 1.0;\r\n            let cumulativeStrainTime = 0.0;\r\n            let result = 0.0;\r\n            const previousCount = Math.min(i - 1, historyLength);\r\n            for (let j = 0; j < previousCount; j++) {\r\n                const previous = hitObjects[i - j - 1];\r\n                const diffPrevious = diffs[i - j - 1];\r\n                if ((0, index_1.isSpinner)(previous))\r\n                    continue;\r\n                // #LAZERBUG: Lazer doesn't use StackedEndPosition\r\n                const jumpDistance = index_2.Vec2.distance(position(current), unstackedEndPosition(previous));\r\n                // cumulativeStrainTime += diffPrevious.strainTime;\r\n                cumulativeStrainTime += diffs[i].strainTime;\r\n                if (j === 0)\r\n                    smallDistNerf = Math.min(1.0, jumpDistance / 75.0);\r\n                const stackNerf = Math.min(1.0, (diffPrevious.jumpDistance / scalingFactor) / 25.0);\r\n                const opacityBonus = 1.0 + max_opacity_bonus * (1.0 - (!(0, index_1.isSpinner)(current) ? ((0, index_1.isHitCircle)(current) ? current.opacityAt(current.hitTime, hidden) : current.head.opacityAt(current.head.hitTime, hidden)) : 1));\r\n                result += stackNerf * opacityBonus * scalingFactor * jumpDistance / cumulativeStrainTime;\r\n            }\r\n            result = Math.pow(smallDistNerf * result, 2.0);\r\n            if (hidden)\r\n                result *= 1.0 + hidden_bonus;\r\n            return result;\r\n        })();\r\n        currentStrain *= strainDecay(diffCurrent.deltaTime);\r\n        currentStrain += strainValueOf * skillMultiplier;\r\n        strains.push(currentStrain);\r\n    }\r\n    return strains;\r\n}\r\nfunction calculateFlashlight(hitObjects, diffs, onlyFinalValue, hidden) {\r\n    const strains = calculateFlashlightStrains(hitObjects, diffs, hidden);\r\n    return (0, strain_1.calculateDifficultyValues)(diffs, strains, {\r\n        decayWeight: 0.9,\r\n        difficultyMultiplier: 1.06,\r\n        sectionDuration: 400,\r\n        reducedSectionCount: 10,\r\n        strainDecay,\r\n    }, onlyFinalValue);\r\n}\r\nexports.calculateFlashlight = calculateFlashlight;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/lib/skills/speed.ts\":\r\n/*!*********************************!*\\\r\n  !*** ./src/lib/skills/speed.ts ***!\r\n  \\*********************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculateRelevantNotes = exports.calculateSpeed = exports.calculateSpeedStrains = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../core/index */ \"./src/core/index.ts\");\r\nconst index_2 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst strain_1 = __webpack_require__(/*! ./strain */ \"./src/lib/skills/strain.ts\");\r\nconst single_spacing_threshold = 125;\r\nconst rhythm_multiplier = 0.75;\r\nconst history_time_max = 5000; // 5 seconds of calculatingRhythmBonus max.\r\nconst min_speed_bonus = 75; // ~200BPM\r\nconst speed_balancing_factor = 40;\r\nconst skillMultiplier = 1375;\r\nconst strainDecayBase = 0.3;\r\nconst history_length = 32;\r\nconst strainDecay = (ms) => Math.pow(strainDecayBase, ms / 1000);\r\n/**\r\n * @param hitObjects\r\n * @param diffs\r\n * @param greatWindow the clock rate adjusted hit window\r\n * @returns `strains[i]` = speed strain value after the `i`th hitObject\r\n */\r\nfunction calculateSpeedStrains(hitObjects, diffs, greatWindow) {\r\n    let currentStrain = 0;\r\n    const strains = [0];\r\n    for (let i = 1; i < hitObjects.length; i++) {\r\n        const current = hitObjects[i];\r\n        const diffCurrent = diffs[i];\r\n        const diffPrev = diffs[i - 1];\r\n        const diffNext = diffs[i + 1];\r\n        // console.log(diffCurrent, diffNext)\r\n        // Helper function so that we don't have to use the ReversedQueue `Previous`\r\n        const previousCount = Math.min(history_length, i - 1);\r\n        const previous = (j) => diffs[i - 1 - j];\r\n        const previousHitObject = (j) => hitObjects[i - 1 - j];\r\n        const strainValueOf = (function () {\r\n            if ((0, index_1.isSpinner)(current))\r\n                return 0;\r\n            // Note: osuPrevObj != null is equivalent to i > 1 since it wants to look at one non-dummy diff object\r\n            const prevIsNonDummy = previousCount > 0;\r\n            // derive strainTime for calculation\r\n            let strainTime = diffCurrent.strainTime;\r\n            const greatWindowFull = greatWindow * 2;\r\n            // const speedWindowRatio = strainTime / greatWindowFull;\r\n            let tryz_vn = 1;\r\n            if (diffNext !== undefined) {\r\n                const currDeltaTime = Math.max(1, diffCurrent.deltaTime);\r\n                const nextDeltaTime = Math.max(1, diffNext.deltaTime);\r\n                const deltaDifference = Math.abs(nextDeltaTime - currDeltaTime);\r\n                const speedRatio = currDeltaTime / Math.max(currDeltaTime, deltaDifference);\r\n                const windowRatio = Math.pow(Math.min(1, currDeltaTime / greatWindowFull), 2);\r\n                tryz_vn = Math.pow(speedRatio, 1 - windowRatio);\r\n            }\r\n            // Aim to nerf cheesy rhythms (Very fast consecutive doubles with large delta-times between)\r\n            // if (prevIsNonDummy && strainTime < greatWindowFull && diffPrev.strainTime > strainTime)\r\n            //   strainTime = lerp(diffPrev.strainTime, strainTime, speedWindowRatio);\r\n            // Cap deltatime to the OD 300 hitwindow.\r\n            // 0.93 is derived from making sure 260bpm OD8 streams aren't nerfed harshly, whilst 0.92 limits the effect of\r\n            // the cap.\r\n            strainTime /= (0, index_2.clamp)(strainTime / greatWindowFull / 0.93, 0.92, 1);\r\n            // derive speedBonus for calculation\r\n            let speedBonus = 1.0;\r\n            if (strainTime < min_speed_bonus)\r\n                speedBonus = 1 + 0.75 * Math.pow((min_speed_bonus - strainTime) / speed_balancing_factor, 2);\r\n            const distance = Math.min(single_spacing_threshold, diffCurrent.travelDistance + diffCurrent.movementDistance);\r\n            return (speedBonus + speedBonus * Math.pow(distance / single_spacing_threshold, 3.5)) * tryz_vn / strainTime;\r\n        })();\r\n        const currentRhythm = (function () {\r\n            if ((0, index_1.isSpinner)(current))\r\n                return 0;\r\n            let previousIslandSize = 0;\r\n            let rhythmComplexitySum = 0;\r\n            let islandSize = 1;\r\n            let startRatio = 0; // store the ratio of the current start of an island to buff for tighter rhythms\r\n            let firstDeltaSwitch = false;\r\n            let rhythmStart = 0;\r\n            // Optimization from a \"future\" commit\r\n            // https://github.com/ppy/osu/commit/c87ff82c1cde3af45c173fcb264de999340b743c#diff-4ed7064eeb60b6f0a19dc16729cd6fc3c3ba9794962a7bcfc830bddbea781000\r\n            while (rhythmStart < previousCount - 2 &&\r\n                diffCurrent.startTime - previous(rhythmStart).startTime < history_time_max)\r\n                rhythmStart++;\r\n            for (let j = rhythmStart; j > 0; j--) {\r\n                const currObj = previous(j - 1);\r\n                const prevObj = previous(j);\r\n                const lastObj = previous(j + 1);\r\n                let currHistoricalDecay = (history_time_max - (diffCurrent.startTime - currObj.startTime)) / history_time_max;\r\n                currHistoricalDecay = Math.min((previousCount - j) / previousCount, currHistoricalDecay);\r\n                const currDelta = currObj.strainTime;\r\n                const prevDelta = prevObj.strainTime;\r\n                const lastDelta = lastObj.strainTime;\r\n                const currRatio = 1.0 +\r\n                    6.0 *\r\n                        Math.min(0.5, Math.pow(Math.sin(Math.PI / (Math.min(prevDelta, currDelta) / Math.max(prevDelta, currDelta))), 2)); // fancy function to calculate rhythmbonuses.\r\n                let windowPenalty = Math.min(1, Math.max(0, Math.abs(prevDelta - currDelta) - greatWindow * 0.6) / (greatWindow * 0.6));\r\n                windowPenalty = Math.min(1, windowPenalty);\r\n                let effectiveRatio = windowPenalty * currRatio;\r\n                if (firstDeltaSwitch) {\r\n                    if (!(prevDelta > 1.25 * currDelta || prevDelta * 1.25 < currDelta)) {\r\n                        if (islandSize < 7)\r\n                            islandSize++; // island is still progressing, count size.\r\n                    }\r\n                    else {\r\n                        if ((0, index_1.isSlider)(previousHitObject(j - 1)))\r\n                            // bpm change is into slider, this is easy acc window\r\n                            effectiveRatio *= 0.125;\r\n                        if ((0, index_1.isSlider)(previousHitObject(j)))\r\n                            // bpm change was from a slider, this is easier typically than circle -> circle\r\n                            effectiveRatio *= 0.25;\r\n                        if (previousIslandSize == islandSize)\r\n                            // repeated island size (ex: triplet -> triplet)\r\n                            effectiveRatio *= 0.25;\r\n                        if (previousIslandSize % 2 == islandSize % 2)\r\n                            // repeated island polartiy (2 -> 4, 3 -> 5)\r\n                            effectiveRatio *= 0.5;\r\n                        if (lastDelta > prevDelta + 10 && prevDelta > currDelta + 10)\r\n                            // previous increase happened a note ago, 1/1->1/2-1/4, dont want to buff this.\r\n                            effectiveRatio *= 0.125;\r\n                        rhythmComplexitySum +=\r\n                            (((Math.sqrt(effectiveRatio * startRatio) * currHistoricalDecay * Math.sqrt(4 + islandSize)) / 2) *\r\n                                Math.sqrt(4 + previousIslandSize)) /\r\n                                2;\r\n                        startRatio = effectiveRatio;\r\n                        previousIslandSize = islandSize; // log the last island size.\r\n                        if (prevDelta * 1.25 < currDelta)\r\n                            // we're slowing down, stop counting\r\n                            firstDeltaSwitch = false; // if we're speeding up, this stays true and  we keep counting island size.\r\n                        islandSize = 1;\r\n                    }\r\n                }\r\n                else if (prevDelta > 1.25 * currDelta) {\r\n                    // we want to be speeding up.\r\n                    // Begin counting island until we change speed again.\r\n                    firstDeltaSwitch = true;\r\n                    startRatio = effectiveRatio;\r\n                    islandSize = 1;\r\n                }\r\n            }\r\n            return Math.sqrt(4 + rhythmComplexitySum * rhythm_multiplier) / 2; //produces multiplier that can be applied to\r\n            // strain. range [1, infinity) (not really\r\n            // though)\r\n        })();\r\n        currentStrain *= strainDecay(diffCurrent.strainTime);\r\n        currentStrain += strainValueOf * skillMultiplier;\r\n        strains.push(currentStrain * currentRhythm);\r\n    }\r\n    return strains;\r\n}\r\nexports.calculateSpeedStrains = calculateSpeedStrains;\r\nfunction calculateSpeed(hitObjects, diffs, hitWindowGreat, onlyFinalValue) {\r\n    const strains = calculateSpeedStrains(hitObjects, diffs, hitWindowGreat);\r\n    return (0, strain_1.calculateDifficultyValues)(diffs, strains, {\r\n        decayWeight: 0.9,\r\n        difficultyMultiplier: 1.04,\r\n        sectionDuration: 400,\r\n        reducedSectionCount: 5,\r\n        strainDecay,\r\n    }, onlyFinalValue);\r\n}\r\nexports.calculateSpeed = calculateSpeed;\r\nfunction calculateRelevantNotes(hitObjects, diffs, hitWindowGreat, onlyFinalValue) {\r\n    const strains = calculateSpeedStrains(hitObjects, diffs, hitWindowGreat);\r\n    if (strains.length === 0)\r\n        return 0;\r\n    const maxStrain = Math.max(...strains);\r\n    if (maxStrain === 0)\r\n        return 0;\r\n    let total = 0;\r\n    strains.forEach(next => {\r\n        total += 1.0 / (1.0 + Math.exp(-(next / maxStrain * 12 - 6)));\r\n    });\r\n    return total;\r\n}\r\nexports.calculateRelevantNotes = calculateRelevantNotes;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/lib/skills/strain.ts\":\r\n/*!**********************************!*\\\r\n  !*** ./src/lib/skills/strain.ts ***!\r\n  \\**********************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.calculateDifficultyValues = void 0;\r\nconst index_1 = __webpack_require__(/*! ../../math/index */ \"./src/math/index.ts\");\r\nconst index_2 = __webpack_require__(/*! ../../core/index */ \"./src/core/index.ts\");\r\nconst startTime = (o) => ((0, index_2.isHitCircle)(o) ? o.hitTime : o.startTime);\r\n// Not overridden ... yet?\r\nconst REDUCED_STRAIN_BASELINE = 0.75;\r\n/**\r\n * Summary of how the strain skill works:\r\n * - Strain is a value that decays exponentially over time if there is no hit object present\r\n * - Let strain at time t be S(t)\r\n *\r\n * - First the whole beatmap is partitioned into multiple sections each of duration D (D=400ms in osu!std) e.g. [0,\r\n * 400], [400, 800], ...\r\n * - Now we only consider the highest strain of each section aka \"section peak\" i.e. P(i) = max(S(t)) where i*D <= t <=\r\n * i*(D+1)\r\n * Note: This can be easily calculated since we know that the peak can only happen after each hit object or at the\r\n * beginning of a section\r\n *\r\n * - Finally the difficulty value of a strain skill considers the largest K strain peaks (K=10 in osu!std) and\r\n * nerfs them so that the extremly unique difficulty spikes get nerfed.\r\n *\r\n * - Then it uses the weighted sum to calculate the difficultyValue.\r\n *\r\n * Performance notes:\r\n * 1. O(n + D + D * log D) if only calculating the last value\r\n * 2. If we want to calculate for every value:\r\n *   This is O(n * D * log D) but can be optimized to O(n) by having a precision breakpoint\r\n *   -> For example, if we now want to push a peak that'd be the 150th highest value, then best it could get in\r\n *    is to become the 140th highest value -> its value multiplied with the weight 0.9^140 should be\r\n *    greater than some precision (let's say 10^-6), otherwise we just don't push it to the peaks. In theory, we should\r\n *    just be maintaining about ~100-150 peak values depending on the required precision which is O(1) compared to O(D).\r\n */\r\nfunction calculateDifficultyValues(diffs, // -> only startTime is used here\r\nstrains, { sectionDuration, reducedSectionCount, difficultyMultiplier, strainDecay, decayWeight }, onlyFinalValue) {\r\n    if (diffs.length === 0)\r\n        return [];\r\n    // osu!lazer note: sectionBegin = sectionDuration if t is dividable by sectionDuration (bug?)\r\n    const calcSectionBegin = (sectionDuration, t) => Math.floor(t / sectionDuration) * sectionDuration;\r\n    const peaks = [];\r\n    const difficultyValues = [];\r\n    let currentSectionBegin = calcSectionBegin(sectionDuration, diffs[0].startTime);\r\n    let currentSectionPeak = 0;\r\n    if (!onlyFinalValue) {\r\n        // For the first hitobject it is always 0\r\n        difficultyValues.push(0);\r\n    }\r\n    for (let i = 1; i < diffs.length; i++) {\r\n        const prevStartTime = diffs[i - 1].startTime;\r\n        const currStartTime = diffs[i].startTime;\r\n        // Let's see if we can close off the other sections\r\n        while (currentSectionBegin + sectionDuration < currStartTime) {\r\n            peaks.push(currentSectionPeak);\r\n            currentSectionBegin += sectionDuration;\r\n            currentSectionPeak = strains[i - 1] * strainDecay(currentSectionBegin - prevStartTime);\r\n        }\r\n        // Now check if the currentSectionPeak can be improved with the current hit object i\r\n        currentSectionPeak = Math.max(currentSectionPeak, strains[i]);\r\n        if (onlyFinalValue && i + 1 < diffs.length) {\r\n            continue;\r\n        }\r\n        // We do not push the currentSectionPeak to the peaks yet because currentSectionPeak is still in a jelly state and\r\n        // can be improved by the future hit objects in the same section.\r\n        const peaksWithCurrent = [...peaks, currentSectionPeak];\r\n        const descending = (a, b) => b - a;\r\n        peaksWithCurrent.sort(descending);\r\n        // This is now part of DifficultyValue()\r\n        for (let i = 0; i < Math.min(peaksWithCurrent.length, reducedSectionCount); i++) {\r\n            // Scale might be precalculated since it uses some expensive operation (log10)\r\n            const scale = Math.log10((0, index_1.lerp)(1, 10, (0, index_1.clamp)(i / reducedSectionCount, 0, 1)));\r\n            peaksWithCurrent[i] *= (0, index_1.lerp)(REDUCED_STRAIN_BASELINE, 1.0, scale);\r\n        }\r\n        let weight = 1;\r\n        // Decreasingly\r\n        peaksWithCurrent.sort(descending);\r\n        let difficultyValue = 0;\r\n        for (const peak of peaksWithCurrent) {\r\n            difficultyValue += peak * weight;\r\n            weight *= decayWeight;\r\n        }\r\n        difficultyValues.push(difficultyValue * difficultyMultiplier);\r\n    }\r\n    return difficultyValues;\r\n}\r\nexports.calculateDifficultyValues = calculateDifficultyValues;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/Vec2.ts\":\r\n/*!**************************!*\\\r\n  !*** ./src/math/Vec2.ts ***!\r\n  \\**************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Vec2 = void 0;\r\nconst float32_1 = __webpack_require__(/*! ./float32 */ \"./src/math/float32.ts\");\r\n// TODO: Using 32-bit float as return result everywhere?\r\n// For example Vector2.Length is returned as float\r\nclass Vec2 {\r\n    constructor(x, y) {\r\n        this.x = (0, float32_1.float32)(x);\r\n        this.y = (0, float32_1.float32)(y);\r\n    }\r\n    // This should be preferred since it avoids using sqrt\r\n    // TODO: however this might be TOO precise that we will have matching issue with osu!lazer\r\n    static withinDistance(a, b, d) {\r\n        return (a.x - b.x) ** 2 + (a.y - b.y) ** 2 <= d ** 2;\r\n    }\r\n    // returns float\r\n    static distance(a, b) {\r\n        return Math.fround(Math.sqrt(Vec2.distanceSquared(a, b)));\r\n    }\r\n    static distanceSquared(a, b) {\r\n        const dx = a.x - b.x, dy = a.y - b.y;\r\n        return dx ** 2 + dy ** 2;\r\n    }\r\n    static equal(a, b) {\r\n        // I commented out my original solution and replaced it with osu!framework variant (which is very strict)\r\n        // return floatEqual(a.x, b.x) && floatEqual(a.y, b.y);\r\n        return a.x === b.x && a.y === b.y;\r\n    }\r\n    static add(a, b) {\r\n        return new Vec2((0, float32_1.float32)(a.x) + (0, float32_1.float32)(b.x), (0, float32_1.float32)(a.y) + (0, float32_1.float32)(b.y));\r\n    }\r\n    static dot(a, b) {\r\n        return Math.fround(a.x * b.x + a.y * b.y);\r\n    }\r\n    static sub(a, b) {\r\n        return new Vec2((0, float32_1.float32)(a.x) - (0, float32_1.float32)(b.x), (0, float32_1.float32)(a.y) - (0, float32_1.float32)(b.y));\r\n    }\r\n    // c: float\r\n    static scale(a, c) {\r\n        return new Vec2((0, float32_1.float32_mul)(a.x, c), (0, float32_1.float32_mul)(a.y, c));\r\n    }\r\n    // c: float\r\n    static divide(a, c) {\r\n        return new Vec2((0, float32_1.float32_div)(a.x, c), (0, float32_1.float32_div)(a.y, c));\r\n    }\r\n    // Order is important\r\n    static interpolate(a, b, p) {\r\n        return Vec2.add(a, Vec2.sub(b, a).scale(p));\r\n    }\r\n    add(b) {\r\n        return Vec2.add(this, b);\r\n    }\r\n    sub(b) {\r\n        return Vec2.sub(this, b);\r\n    }\r\n    divide(c) {\r\n        return Vec2.divide(this, c);\r\n    }\r\n    scale(c) {\r\n        return Vec2.scale(this, c);\r\n    }\r\n    lengthSquared() {\r\n        return this.x * this.x + this.y * this.y;\r\n    }\r\n    length() {\r\n        return (0, float32_1.float32)(Math.sqrt(this.x ** 2 + this.y ** 2));\r\n    }\r\n    equals(b) {\r\n        return Vec2.equal(this, b);\r\n    }\r\n    normalized() {\r\n        const num = this.length();\r\n        this.x = (0, float32_1.float32_div)(this.x, num);\r\n        this.y = (0, float32_1.float32_div)(this.y, num);\r\n        return this;\r\n    }\r\n}\r\nexports.Vec2 = Vec2;\r\nVec2.Zero = new Vec2(0, 0);\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/colors.ts\":\r\n/*!****************************!*\\\r\n  !*** ./src/math/colors.ts ***!\r\n  \\****************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.rgbToInt = void 0;\r\nfunction rgbToInt(rgb) {\r\n    if (rgb.length < 3) {\r\n        throw Error(\"Not at least three values provided\");\r\n    }\r\n    let val = 0;\r\n    for (let i = 0; i < 3; i++) {\r\n        val = val * 256 + rgb[i];\r\n    }\r\n    return val;\r\n}\r\nexports.rgbToInt = rgbToInt;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/difficulty.ts\":\r\n/*!********************************!*\\\r\n  !*** ./src/math/difficulty.ts ***!\r\n  \\********************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.overallDifficultyToHitWindowGreat = exports.hitWindowsForOD = exports.hitWindowGreatToOD = exports.difficultyRangeForOd = exports.getFadeInDuration = exports.approachDurationToApproachRate = exports.approachRateToApproachDuration = exports.difficultyRange = exports.circleSizeToScale = void 0;\r\n/**\r\n * Converts the circle size to a normalized scaling value.\r\n * @param CS the circle size value\r\n */\r\nconst float32_1 = __webpack_require__(/*! ./float32 */ \"./src/math/float32.ts\");\r\nfunction circleSizeToScale(CS) {\r\n    return (0, float32_1.float32)((1.0 - (0.7 * (CS - 5)) / 5) / 2);\r\n}\r\nexports.circleSizeToScale = circleSizeToScale;\r\n// Just a helper function that is commonly used for OD, AR calculation\r\nfunction difficultyRange(difficulty, min, mid, max) {\r\n    if (difficulty > 5.0)\r\n        return mid + ((max - mid) * (difficulty - 5.0)) / 5.0;\r\n    return difficulty < 5.0 ? mid - ((mid - min) * (5.0 - difficulty)) / 5.0 : mid;\r\n}\r\nexports.difficultyRange = difficultyRange;\r\n// Minimum preempt time at AR=10\r\nconst PREEMPT_MIN = 450;\r\n/**\r\n * Returns the approach duration depending on the abstract AR value.\r\n * @param AR the approach rate value\r\n */\r\nfunction approachRateToApproachDuration(AR) {\r\n    return difficultyRange(AR, 1800, 1200, PREEMPT_MIN);\r\n}\r\nexports.approachRateToApproachDuration = approachRateToApproachDuration;\r\nfunction approachDurationToApproachRate(approachDurationInMs) {\r\n    return approachDurationInMs > 1200 ? (1800 - approachDurationInMs) / 120 : (1200 - approachDurationInMs) / 150 + 5;\r\n}\r\nexports.approachDurationToApproachRate = approachDurationToApproachRate;\r\nfunction getFadeInDuration(AR) {\r\n    const TimePreempt = approachRateToApproachDuration(AR);\r\n    return 400 * Math.min(1, TimePreempt / PREEMPT_MIN);\r\n}\r\nexports.getFadeInDuration = getFadeInDuration;\r\nfunction difficultyRangeForOd(difficulty, range) {\r\n    return difficultyRange(difficulty, range.od0, range.od5, range.od10);\r\n}\r\nexports.difficultyRangeForOd = difficultyRangeForOd;\r\nfunction hitWindowGreatToOD(hitWindowGreat) {\r\n    return (80 - hitWindowGreat) / 6;\r\n}\r\nexports.hitWindowGreatToOD = hitWindowGreatToOD;\r\nconst OSU_STD_HIT_WINDOW_RANGES = [\r\n    [80, 50, 20],\r\n    [140, 100, 60],\r\n    [200, 150, 100],\r\n    [400, 400, 400], // Miss\r\n];\r\n/**\r\n * Returns the hit windows in the following order:\r\n * [Hit300, Hit100, Hit50, HitMiss]\r\n * @param overallDifficulty\r\n * @param lazerStyle\r\n */\r\nfunction hitWindowsForOD(overallDifficulty, lazerStyle) {\r\n    function lazerHitWindowsForOD(od) {\r\n        return OSU_STD_HIT_WINDOW_RANGES.map(([od0, od5, od10]) => difficultyRange(od, od0, od5, od10));\r\n    }\r\n    // Short explanation: currently in lazer the hit windows are actually +1ms bigger due to them using the LTE <=\r\n    // operator instead of LT <  <= instead of < check.\r\n    if (lazerStyle) {\r\n        return lazerHitWindowsForOD(overallDifficulty);\r\n    }\r\n    // https://github.com/ppy/osu/issues/11311\r\n    return lazerHitWindowsForOD(overallDifficulty).map((w) => w - 1);\r\n}\r\nexports.hitWindowsForOD = hitWindowsForOD;\r\n// Lazer style\r\nfunction overallDifficultyToHitWindowGreat(od) {\r\n    const [od0, od5, od10] = OSU_STD_HIT_WINDOW_RANGES[0];\r\n    return difficultyRange(od, od0, od5, od10);\r\n}\r\nexports.overallDifficultyToHitWindowGreat = overallDifficultyToHitWindowGreat;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/easing.ts\":\r\n/*!****************************!*\\\r\n  !*** ./src/math/easing.ts ***!\r\n  \\****************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.lerp = exports.applyInterpolation = exports.applyEasing = exports.Easing = void 0;\r\n// https://github.com/ppy/osu-framework/blob/master/osu.Framework/Graphics/Transforms/DefaultEasingFunction.cs\r\nvar Easing;\r\n(function (Easing) {\r\n    Easing[Easing[\"LINEAR\"] = 0] = \"LINEAR\";\r\n    Easing[Easing[\"OUT\"] = 1] = \"OUT\";\r\n    Easing[Easing[\"OUT_QUINT\"] = 2] = \"OUT_QUINT\";\r\n    Easing[Easing[\"OUT_ELASTIC\"] = 3] = \"OUT_ELASTIC\";\r\n    Easing[Easing[\"IN_CUBIC\"] = 4] = \"IN_CUBIC\";\r\n})(Easing = exports.Easing || (exports.Easing = {}));\r\nconst elastic_const = (2 * Math.PI) / 0.3;\r\nconst elastic_const2 = 0.3 / 4;\r\nconst back_const = 1.70158;\r\nconst back_const2 = back_const * 1.525;\r\nconst bounce_const = 1 / 2.75;\r\n// constants used to fix expo and elastic curves to start/end at 0/1\r\nconst expo_offset = Math.pow(2, -10);\r\nconst elastic_offset_full = Math.pow(2, -11);\r\nconst elastic_offset_half = Math.pow(2, -10) * Math.sin((0.5 - elastic_const2) * elastic_const);\r\nconst elastic_offset_quarter = Math.pow(2, -10) * Math.sin((0.25 - elastic_const2) * elastic_const);\r\nconst in_out_elastic_offset = Math.pow(2, -10) * Math.sin(((1 - elastic_const2 * 1.5) * elastic_const) / 1.5);\r\nfunction applyEasing(t, easing) {\r\n    switch (easing) {\r\n        case Easing.LINEAR:\r\n            return t;\r\n        case Easing.OUT:\r\n            return t * (2 - t);\r\n        case Easing.OUT_QUINT:\r\n            return --t * t * t * t * t + 1;\r\n        case Easing.OUT_ELASTIC:\r\n            return Math.pow(2, -10 * t) * Math.sin((t - elastic_const2) * elastic_const) + 1 - elastic_offset_full * t;\r\n        case Easing.IN_CUBIC:\r\n            return t * t * t;\r\n    }\r\n    return t;\r\n}\r\nexports.applyEasing = applyEasing;\r\nfunction applyInterpolation(time, startTime, endTime, valA, valB, easing = Easing.LINEAR) {\r\n    // Or floatEqual ...\r\n    if (startTime >= endTime) {\r\n        console.error(\"startTime should be less than endTime\");\r\n        return valA; // or throw Error?\r\n    }\r\n    const p = applyEasing((time - startTime) / (endTime - startTime), easing);\r\n    return (valB - valA) * p + valA;\r\n}\r\nexports.applyInterpolation = applyInterpolation;\r\n/**\r\n * Linear interpolation\r\n * @param start start value\r\n * @param final final value\r\n * @param amount number between 0 and 1\r\n */\r\nfunction lerp(start, final, amount) {\r\n    return start + (final - start) * amount;\r\n}\r\nexports.lerp = lerp;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/float32.ts\":\r\n/*!*****************************!*\\\r\n  !*** ./src/math/float32.ts ***!\r\n  \\*****************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.float32_sqrt = exports.float32_div = exports.float32_mul = exports.float32_add = exports.float32 = void 0;\r\nfunction float32(a) {\r\n    return Math.fround(a);\r\n}\r\nexports.float32 = float32;\r\nfunction float32_add(a, b) {\r\n    return float32(float32(a) + float32(b));\r\n}\r\nexports.float32_add = float32_add;\r\nfunction float32_mul(a, b) {\r\n    return float32(float32(a) * float32(b));\r\n}\r\nexports.float32_mul = float32_mul;\r\nfunction float32_div(a, b) {\r\n    return float32(float32(a) / float32(b));\r\n}\r\nexports.float32_div = float32_div;\r\nfunction float32_sqrt(a) {\r\n    return float32(Math.sqrt(float32(a)));\r\n}\r\nexports.float32_sqrt = float32_sqrt;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/index.ts\":\r\n/*!***************************!*\\\r\n  !*** ./src/math/index.ts ***!\r\n  \\***************************/\r\n/***/ (function(__unused_webpack_module, exports, __webpack_require__) {\r\n\r\n\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n__exportStar(__webpack_require__(/*! ./colors */ \"./src/math/colors.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./difficulty */ \"./src/math/difficulty.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./easing */ \"./src/math/easing.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./time */ \"./src/math/time.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./utils */ \"./src/math/utils.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./sliders */ \"./src/math/sliders.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./Vec2 */ \"./src/math/Vec2.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./float32 */ \"./src/math/float32.ts\"), exports);\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/sliders.ts\":\r\n/*!*****************************!*\\\r\n  !*** ./src/math/sliders.ts ***!\r\n  \\*****************************/\r\n/***/ ((__unused_webpack_module, exports, __webpack_require__) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.sliderRepeatAngle = void 0;\r\nconst Vec2_1 = __webpack_require__(/*! ./Vec2 */ \"./src/math/Vec2.ts\");\r\n// TODO: Maybe move this to osu/Math\r\n// Maybe this is slow because of atan2() calculation\r\nfunction sliderRepeatAngle(curve, isRepeatAtEnd) {\r\n    if (curve.length < 2) {\r\n        return 0.0;\r\n    }\r\n    const searchStart = isRepeatAtEnd ? curve.length - 1 : 0;\r\n    const searchDir = isRepeatAtEnd ? -1 : +1;\r\n    // I think the special case happening in DrawableRepeatSlider only occurs at snaking (which we don't have right\r\n    // now).\r\n    // So TODO: implement searching for two unique points when we do snaking\r\n    const p1 = curve[searchStart];\r\n    const p2 = curve[searchStart + searchDir];\r\n    const direction = Vec2_1.Vec2.sub(p2, p1);\r\n    return Math.atan2(direction.y, direction.x);\r\n}\r\nexports.sliderRepeatAngle = sliderRepeatAngle;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/time.ts\":\r\n/*!**************************!*\\\r\n  !*** ./src/math/time.ts ***!\r\n  \\**************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.beatLengthToBPM = exports.formatGameTime = exports.parseMs = exports.addZero = void 0;\r\nfunction addZero(value, digits = 2) {\r\n    const isNegative = Number(value) < 0;\r\n    let buffer = value.toString();\r\n    let size = 0;\r\n    // Strip minus sign if number is negative\r\n    if (isNegative) {\r\n        buffer = buffer.slice(1);\r\n    }\r\n    size = digits - buffer.length + 1;\r\n    buffer = new Array(size).join(\"0\").concat(buffer);\r\n    // Adds back minus sign if needed\r\n    return (isNegative ? \"-\" : \"\") + buffer;\r\n}\r\nexports.addZero = addZero;\r\n// courtesy to parse-ms\r\nfunction parseMs(milliseconds) {\r\n    const roundTowardsZero = milliseconds > 0 ? Math.floor : Math.ceil;\r\n    return {\r\n        days: roundTowardsZero(milliseconds / 86400000),\r\n        hours: roundTowardsZero(milliseconds / 3600000) % 24,\r\n        minutes: roundTowardsZero(milliseconds / 60000) % 60,\r\n        seconds: roundTowardsZero(milliseconds / 1000) % 60,\r\n        milliseconds: roundTowardsZero(milliseconds) % 1000,\r\n        microseconds: roundTowardsZero(milliseconds * 1000) % 1000,\r\n        nanoseconds: roundTowardsZero(milliseconds * 1e6) % 1000,\r\n    };\r\n}\r\nexports.parseMs = parseMs;\r\nfunction formatGameTime(timeInMs, withMs) {\r\n    // new Date(timeInMs) actually considers timezone\r\n    const { hours, seconds, minutes, milliseconds } = parseMs(timeInMs);\r\n    let s = hours > 0 ? `${hours}:` : \"\";\r\n    s = s + (hours > 0 ? addZero(minutes) : minutes) + \":\";\r\n    s = s + addZero(seconds);\r\n    return withMs ? s + \".\" + addZero(milliseconds, 3) : s;\r\n}\r\nexports.formatGameTime = formatGameTime;\r\nfunction beatLengthToBPM(beatLength) {\r\n    return 60 * 1000 / beatLength;\r\n}\r\nexports.beatLengthToBPM = beatLengthToBPM;\r\n\r\n\r\n/***/ }),\r\n\r\n/***/ \"./src/math/utils.ts\":\r\n/*!***************************!*\\\r\n  !*** ./src/math/utils.ts ***!\r\n  \\***************************/\r\n/***/ ((__unused_webpack_module, exports) => {\r\n\r\n\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.clamp = exports.doubleEqual = exports.floatEqual = exports.approximatelyEqual = void 0;\r\nfunction approximatelyEqual(x, y, delta) {\r\n    return Math.abs(x - y) < delta;\r\n}\r\nexports.approximatelyEqual = approximatelyEqual;\r\n// https://github.com/ppy/osu-framework/blob/105a17bc99cad251fa730b54c615d2b0d9a409d3/osu.Framework/Utils/Precision.cs\r\nconst FLOAT_EPS = 1e-3;\r\nfunction floatEqual(value1, value2) {\r\n    return approximatelyEqual(value1, value2, FLOAT_EPS);\r\n}\r\nexports.floatEqual = floatEqual;\r\nconst DOUBLE_EPS = 1e-7;\r\n// Used in certain cases when x and y are `double`s\r\nfunction doubleEqual(x, y) {\r\n    return approximatelyEqual(x, y, DOUBLE_EPS);\r\n}\r\nexports.doubleEqual = doubleEqual;\r\nfunction clamp(value, min, max) {\r\n    return Math.max(min, Math.min(value, max));\r\n}\r\nexports.clamp = clamp;\r\n\r\n\r\n/***/ })\r\n\r\n/******/ \t});\r\n/************************************************************************/\r\n/******/ \t// The module cache\r\n/******/ \tvar __webpack_module_cache__ = {};\r\n/******/ \t\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\r\n/******/ \t\tif (cachedModule !== undefined) {\r\n/******/ \t\t\treturn cachedModule.exports;\r\n/******/ \t\t}\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\r\n/******/ \t\t\t// no module.id needed\r\n/******/ \t\t\t// no module.loaded needed\r\n/******/ \t\t\texports: {}\r\n/******/ \t\t};\r\n/******/ \t\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/ \t\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/ \t\r\n/************************************************************************/\r\n/******/ \t\r\n/******/ \t// startup\r\n/******/ \t// Load entry module and return exports\r\n/******/ \t// This entry module is referenced by other modules so it can't be inlined\r\n/******/ \tvar __webpack_exports__ = __webpack_require__(\"./src/index.ts\");\r\n/******/ \tosuPerformance = __webpack_exports__;\r\n/******/ \t\r\n/******/ })()\r\n;\r\n\r\nexport default osuPerformance;\r\n\r\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsWUFBWTtBQUN4QyxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsb0NBQW9DO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQsUUFBUTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxNQUFNO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFD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QUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7VUV0QkE7VUFDQTtVQUNBO1VBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2F1ZGlvL0hpdFNhbXBsZUluZm8udHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9hdWRpby9MZWdhY3lTYW1wbGVCYW5rLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvYmVhdG1hcC9CZWF0bWFwLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvYmVhdG1hcC9CZWF0bWFwQnVpbGRlci50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2JlYXRtYXAvQmVhdG1hcERpZmZpY3VsdHkudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9iZWF0bWFwL0NvbnRyb2xQb2ludHMvQ29udHJvbFBvaW50LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvYmVhdG1hcC9Db250cm9sUG9pbnRzL0NvbnRyb2xQb2ludEdyb3VwLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvYmVhdG1hcC9Db250cm9sUG9pbnRzL0NvbnRyb2xQb2ludEluZm8udHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9iZWF0bWFwL0NvbnRyb2xQb2ludHMvRGlmZmljdWx0eUNvbnRyb2xQb2ludC50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2JlYXRtYXAvQ29udHJvbFBvaW50cy9FZmZlY3RDb250cm9sUG9pbnQudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9iZWF0bWFwL0NvbnRyb2xQb2ludHMvU2FtcGxlQ29udHJvbFBvaW50LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvYmVhdG1hcC9Db250cm9sUG9pbnRzL1RpbWluZ0NvbnRyb2xQb2ludC50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2JlYXRtYXAvTGVnYWN5RWZmZWN0RmxhZy50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2JlYXRtYXAvVGltZVNpZ25hdHVyZXMudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9ibHVlcHJpbnQvQmx1ZXByaW50LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvYmx1ZXByaW50L0JsdWVwcmludFBhcnNlci50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2JsdWVwcmludC9IaXRPYmplY3RTZXR0aW5ncy50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2dhbWVwbGF5L0dhbWVTdGF0ZS50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2dhbWVwbGF5L0dhbWVTdGF0ZUV2YWx1YXRvci50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2dhbWVwbGF5L0dhbWVTdGF0ZVRpbWVNYWNoaW5lLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvZ2FtZXBsYXkvR2FtZXBsYXlBbmFseXNpc0V2ZW50LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvZ2FtZXBsYXkvR2FtZXBsYXlJbmZvLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvZ2FtZXBsYXkvVmVyZGljdHMudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9oaXRvYmplY3RzL0hpdENpcmNsZS50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2hpdG9iamVjdHMvU2xpZGVyLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvaGl0b2JqZWN0cy9TbGlkZXJDaGVja1BvaW50LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvaGl0b2JqZWN0cy9TcGlubmVyLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvaGl0b2JqZWN0cy9UeXBlcy50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2hpdG9iamVjdHMvc2xpZGVyL1BhdGhBcHByb3hpbWF0b3IudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9oaXRvYmplY3RzL3NsaWRlci9QYXRoQ29udHJvbFBvaW50LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvaGl0b2JqZWN0cy9zbGlkZXIvUGF0aFR5cGUudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9oaXRvYmplY3RzL3NsaWRlci9TbGlkZXJDaGVja1BvaW50R2VuZXJhdG9yLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvaGl0b2JqZWN0cy9zbGlkZXIvU2xpZGVyUGF0aC50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL2luZGV4LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvbW9kcy9FYXN5TW9kLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvbW9kcy9IYXJkUm9ja01vZC50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL21vZHMvTW9kcy50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL21vZHMvU3RhY2tpbmdNb2QudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9wbGF5ZmllbGQudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9yZXBsYXlzL1Jhd1JlcGxheURhdGEudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS9yZXBsYXlzL1JlcGxheS50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9jb3JlL3JlcGxheXMvUmVwbGF5Q2xpY2tzLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvcmVwbGF5cy9SZXBsYXlQYXJzZXIudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvY29yZS91dGlscy9Tb3J0ZWRMaXN0LnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2NvcmUvdXRpbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvbGliL2RpZmYudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvbGliL3BwLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2xpYi9za2lsbHMvYWltLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2xpYi9za2lsbHMvZmxhc2hsaWdodC50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9saWIvc2tpbGxzL3NwZWVkLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL2xpYi9za2lsbHMvc3RyYWluLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL21hdGgvVmVjMi50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9tYXRoL2NvbG9ycy50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9tYXRoL2RpZmZpY3VsdHkudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvbWF0aC9lYXNpbmcudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvbWF0aC9mbG9hdDMyLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL21hdGgvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2UvLi9zcmMvbWF0aC9zbGlkZXJzLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlLy4vc3JjL21hdGgvdGltZS50cyIsIndlYnBhY2s6Ly9vc3VQZXJmb3JtYW5jZS8uL3NyYy9tYXRoL3V0aWxzLnRzIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vb3N1UGVyZm9ybWFuY2Uvd2VicGFjay9zdGFydHVwIiwid2VicGFjazovL29zdVBlcmZvcm1hbmNlL3dlYnBhY2svYWZ0ZXItc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkhpdFNhbXBsZUluZm8gPSB2b2lkIDA7XHJcbmNsYXNzIEhpdFNhbXBsZUluZm8ge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgYmFuayA9IG51bGwsIHN1ZmZpeCA9IG51bGwsIHZvbHVtZSA9IDApIHtcclxuICAgICAgICB0aGlzLnZvbHVtZSA9IDA7XHJcbiAgICAgICAgLy8gbmFtZSBjb3VsZCBiZSBvbmUgb2YgdGhvc2UgSElUX1dISVNUTEUsIC4uLlxyXG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmJhbmsgPSBiYW5rO1xyXG4gICAgICAgIHRoaXMuc3VmZml4ID0gc3VmZml4O1xyXG4gICAgICAgIHRoaXMudm9sdW1lID0gdm9sdW1lO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuSGl0U2FtcGxlSW5mbyA9IEhpdFNhbXBsZUluZm87XHJcbkhpdFNhbXBsZUluZm8uSElUX1dISVNUTEUgPSBcImhpdHdoaXN0bGVcIjtcclxuSGl0U2FtcGxlSW5mby5ISVRfRklOSVNIID0gXCJoaXRmaW5pc2hcIjtcclxuSGl0U2FtcGxlSW5mby5ISVRfTk9STUFMID0gXCJoaXRub3JtYWxcIjtcclxuSGl0U2FtcGxlSW5mby5ISVRfQ0xBUCA9IFwiaGl0Y2xhcFwiO1xyXG5IaXRTYW1wbGVJbmZvLkFMTF9BRERJVElPTlMgPSBbSGl0U2FtcGxlSW5mby5ISVRfV0hJU1RMRSwgSGl0U2FtcGxlSW5mby5ISVRfQ0xBUCwgSGl0U2FtcGxlSW5mby5ISVRfRklOSVNIXTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5MZWdhY3lTYW1wbGVCYW5rID0gdm9pZCAwO1xyXG52YXIgTGVnYWN5U2FtcGxlQmFuaztcclxuKGZ1bmN0aW9uIChMZWdhY3lTYW1wbGVCYW5rKSB7XHJcbiAgICBMZWdhY3lTYW1wbGVCYW5rW0xlZ2FjeVNhbXBsZUJhbmtbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcclxuICAgIExlZ2FjeVNhbXBsZUJhbmtbTGVnYWN5U2FtcGxlQmFua1tcIk5vcm1hbFwiXSA9IDFdID0gXCJOb3JtYWxcIjtcclxuICAgIExlZ2FjeVNhbXBsZUJhbmtbTGVnYWN5U2FtcGxlQmFua1tcIlNvZnRcIl0gPSAyXSA9IFwiU29mdFwiO1xyXG4gICAgTGVnYWN5U2FtcGxlQmFua1tMZWdhY3lTYW1wbGVCYW5rW1wiRHJ1bVwiXSA9IDNdID0gXCJEcnVtXCI7XHJcbn0pKExlZ2FjeVNhbXBsZUJhbmsgPSBleHBvcnRzLkxlZ2FjeVNhbXBsZUJhbmsgfHwgKGV4cG9ydHMuTGVnYWN5U2FtcGxlQmFuayA9IHt9KSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMubW9zdENvbW1vbkJlYXRMZW5ndGggPSBleHBvcnRzLkJlYXRtYXAgPSB2b2lkIDA7XHJcbmNvbnN0IEJlYXRtYXBEaWZmaWN1bHR5XzEgPSByZXF1aXJlKFwiLi9CZWF0bWFwRGlmZmljdWx0eVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi91dGlscy9pbmRleFwiKTtcclxuY29uc3QgVHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9oaXRvYmplY3RzL1R5cGVzXCIpO1xyXG5jb25zdCBDb250cm9sUG9pbnRJbmZvXzEgPSByZXF1aXJlKFwiLi9Db250cm9sUG9pbnRzL0NvbnRyb2xQb2ludEluZm9cIik7XHJcbi8qKlxyXG4gKiBBIGJ1aWx0IGJlYXRtYXAgdGhhdCBpcyBub3Qgc3VwcG9zZWQgdG8gYmUgbW9kaWZpZWQuXHJcbiAqL1xyXG5jbGFzcyBCZWF0bWFwIHtcclxuICAgIGNvbnN0cnVjdG9yKGhpdE9iamVjdHMsIGRpZmZpY3VsdHksIGFwcGxpZWRNb2RzLCBjb250cm9sUG9pbnRJbmZvKSB7XHJcbiAgICAgICAgdGhpcy5oaXRPYmplY3RzID0gaGl0T2JqZWN0cztcclxuICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5O1xyXG4gICAgICAgIHRoaXMuYXBwbGllZE1vZHMgPSBhcHBsaWVkTW9kcztcclxuICAgICAgICB0aGlzLmNvbnRyb2xQb2ludEluZm8gPSBjb250cm9sUG9pbnRJbmZvO1xyXG4gICAgICAgIHRoaXMuaGl0T2JqZWN0RGljdCA9ICgwLCBpbmRleF8xLm5vcm1hbGl6ZUhpdE9iamVjdHMpKGhpdE9iamVjdHMpO1xyXG4gICAgICAgIHRoaXMuZ2FtZUNsb2NrUmF0ZSA9ICgwLCBpbmRleF8xLmRldGVybWluZURlZmF1bHRQbGF5YmFja1NwZWVkKShhcHBsaWVkTW9kcyk7XHJcbiAgICB9XHJcbiAgICBnZXRIaXRPYmplY3QoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXRPYmplY3REaWN0W2lkXTtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IFBlcmZvcm0gc29tZSAudHlwZSBjaGVja3Mgb3RoZXJ3aXNlIHRoZXNlIGRvbid0IG1ha2Ugc2Vuc2VcclxuICAgIGdldFNsaWRlckNoZWNrUG9pbnQoaWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXRPYmplY3REaWN0W2lkXTtcclxuICAgIH1cclxuICAgIGdldFNsaWRlcihpZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhpdE9iamVjdERpY3RbaWRdO1xyXG4gICAgfVxyXG4gICAgZ2V0SGl0Q2lyY2xlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0T2JqZWN0RGljdFtpZF07XHJcbiAgICB9XHJcbiAgICBnZXRTcGlubmVyKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGl0T2JqZWN0RGljdFtpZF07XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5CZWF0bWFwID0gQmVhdG1hcDtcclxuQmVhdG1hcC5FTVBUWV9CRUFUTUFQID0gbmV3IEJlYXRtYXAoW10sIEJlYXRtYXBEaWZmaWN1bHR5XzEuREVGQVVMVF9CRUFUTUFQX0RJRkZJQ1VMVFksIFtdLCBuZXcgQ29udHJvbFBvaW50SW5mb18xLkNvbnRyb2xQb2ludEluZm8oKSk7XHJcbi8vIFV0aWxpdHk/XHJcbmNvbnN0IGVuZFRpbWUgPSAobykgPT4gKCgwLCBUeXBlc18xLmlzSGl0Q2lyY2xlKShvKSA/IG8uaGl0VGltZSA6IG8uZW5kVGltZSk7XHJcbmZ1bmN0aW9uIG1vc3RDb21tb25CZWF0TGVuZ3RoKHsgaGl0T2JqZWN0cywgdGltaW5nUG9pbnRzLCB9KSB7XHJcbiAgICAvLyBUaGUgbGFzdCBwbGF5YWJsZSB0aW1lIGluIHRoZSBiZWF0bWFwIC0gdGhlIGxhc3QgdGltaW5nIHBvaW50IGV4dGVuZHMgdG8gdGhpcyB0aW1lLlxyXG4gICAgLy8gTm90ZTogVGhpcyBpcyBtb3JlIGFjY3VyYXRlIGFuZCBtYXkgcHJlc2VudCBkaWZmZXJlbnQgcmVzdWx0cyBiZWNhdXNlIG9zdS1zdGFibGUgZGlkbid0IGhhdmUgdGhlIGFiaWxpdHkgdG9cclxuICAgIC8vIGNhbGN1bGF0ZSBzbGlkZXIgZHVyYXRpb25zIGluIHRoaXMgY29udGV4dC5cclxuICAgIGxldCBsYXN0VGltZSA9IDA7XHJcbiAgICBpZiAoaGl0T2JqZWN0cy5sZW5ndGggPiAwKVxyXG4gICAgICAgIGxhc3RUaW1lID0gZW5kVGltZShoaXRPYmplY3RzW2hpdE9iamVjdHMubGVuZ3RoIC0gMV0pO1xyXG4gICAgZWxzZSBpZiAodGltaW5nUG9pbnRzLmxlbmd0aCA+IDApXHJcbiAgICAgICAgbGFzdFRpbWUgPSB0aW1pbmdQb2ludHNbdGltaW5nUG9pbnRzLmxlbmd0aCAtIDFdLnRpbWU7XHJcbiAgICAvLyAxLiBHcm91cCB0aGUgYmVhdCBsZW5ndGhzIGFuZCBhZ2dyZWdhdGUgdGhlIGR1cmF0aW9uc1xyXG4gICAgY29uc3QgZHVyYXRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgZnVuY3Rpb24gYWRkKGQsIHgpIHtcclxuICAgICAgICBkID0gTWF0aC5yb3VuZChkICogMTAwMCkgLyAxMDAwO1xyXG4gICAgICAgIGNvbnN0IGEgPSBkdXJhdGlvbnMuZ2V0KGQpO1xyXG4gICAgICAgIGlmIChhID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIGR1cmF0aW9ucy5zZXQoZCwgeCk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBkdXJhdGlvbnMuc2V0KGQsIGEgKyB4KTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGltaW5nUG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgdCA9IHRpbWluZ1BvaW50c1tpXTtcclxuICAgICAgICBpZiAodC50aW1lID4gbGFzdFRpbWUpIHtcclxuICAgICAgICAgICAgYWRkKHQuYmVhdExlbmd0aCwgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBvc3Utc3RhYmxlIGZvcmNlZCB0aGUgZmlyc3QgY29udHJvbCBwb2ludCB0byBzdGFydCBhdCAwLlxyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIHJlcHJvZHVjZWQgaGVyZSB0byBtYWludGFpbiBjb21wYXRpYmlsaXR5IGFyb3VuZCBvc3UhbWFuaWEgc2Nyb2xsIHNwZWVkIGFuZCBzb25nIHNlbGVjdCBkaXNwbGF5LlxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IGkgPT09IDAgPyAwIDogdC50aW1lO1xyXG4gICAgICAgICAgICBjb25zdCBuZXh0VGltZSA9IGkgKyAxID09PSB0aW1pbmdQb2ludHMubGVuZ3RoID8gbGFzdFRpbWUgOiB0aW1pbmdQb2ludHNbaSArIDFdLnRpbWU7XHJcbiAgICAgICAgICAgIGFkZCh0LmJlYXRMZW5ndGgsIG5leHRUaW1lIC0gY3VycmVudFRpbWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIDIuIFNvcnQgYnkgZHVyYXRpb24gZGVzY2VuZGluZ2x5XHJcbiAgICBjb25zdCBsaXN0ID0gW107XHJcbiAgICBmb3IgKGNvbnN0IGJlYXRMZW5ndGggb2YgZHVyYXRpb25zLmtleXMoKSkge1xyXG4gICAgICAgIGxpc3QucHVzaCh7IGJlYXRMZW5ndGg6IGJlYXRMZW5ndGgsIGR1cmF0aW9uOiBkdXJhdGlvbnMuZ2V0KGJlYXRMZW5ndGgpIH0pO1xyXG4gICAgfVxyXG4gICAgbGlzdC5zb3J0KChhLCBiKSA9PiBiLmR1cmF0aW9uIC0gYS5kdXJhdGlvbik7XHJcbiAgICBpZiAobGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGxpc3RbMF0uYmVhdExlbmd0aDtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLm1vc3RDb21tb25CZWF0TGVuZ3RoID0gbW9zdENvbW1vbkJlYXRMZW5ndGg7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuYnVpbGRCZWF0bWFwID0gdm9pZCAwO1xyXG5jb25zdCBIaXRDaXJjbGVfMSA9IHJlcXVpcmUoXCIuLi9oaXRvYmplY3RzL0hpdENpcmNsZVwiKTtcclxuY29uc3QgTW9kc18xID0gcmVxdWlyZShcIi4uL21vZHMvTW9kc1wiKTtcclxuY29uc3QgU3RhY2tpbmdNb2RfMSA9IHJlcXVpcmUoXCIuLi9tb2RzL1N0YWNraW5nTW9kXCIpO1xyXG5jb25zdCBTbGlkZXJDaGVja1BvaW50R2VuZXJhdG9yXzEgPSByZXF1aXJlKFwiLi4vaGl0b2JqZWN0cy9zbGlkZXIvU2xpZGVyQ2hlY2tQb2ludEdlbmVyYXRvclwiKTtcclxuY29uc3QgU2xpZGVyUGF0aF8xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvc2xpZGVyL1NsaWRlclBhdGhcIik7XHJcbmNvbnN0IFNsaWRlcl8xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvU2xpZGVyXCIpO1xyXG5jb25zdCBTbGlkZXJDaGVja1BvaW50XzEgPSByZXF1aXJlKFwiLi4vaGl0b2JqZWN0cy9TbGlkZXJDaGVja1BvaW50XCIpO1xyXG5jb25zdCBCZWF0bWFwXzEgPSByZXF1aXJlKFwiLi9CZWF0bWFwXCIpO1xyXG5jb25zdCBTcGlubmVyXzEgPSByZXF1aXJlKFwiLi4vaGl0b2JqZWN0cy9TcGlubmVyXCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL21hdGgvaW5kZXhcIik7XHJcbmNvbnN0IEhhcmRSb2NrTW9kXzEgPSByZXF1aXJlKFwiLi4vbW9kcy9IYXJkUm9ja01vZFwiKTtcclxuZnVuY3Rpb24gY29weVBvc2l0aW9uKHsgeCwgeSB9KSB7XHJcbiAgICByZXR1cm4geyB4LCB5IH07XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlSGl0Q2lyY2xlKGlkLCBoaXRDaXJjbGVTZXR0aW5ncywgY29udHJvbFBvaW50SW5mbywgYmVhdG1hcERpZmZpY3VsdHkpIHtcclxuICAgIGNvbnN0IGhpdENpcmNsZSA9IG5ldyBIaXRDaXJjbGVfMS5IaXRDaXJjbGUoKTtcclxuICAgIGhpdENpcmNsZS5pZCA9IGlkO1xyXG4gICAgaGl0Q2lyY2xlLnBvc2l0aW9uID0gY29weVBvc2l0aW9uKGhpdENpcmNsZVNldHRpbmdzLnBvc2l0aW9uKTtcclxuICAgIGhpdENpcmNsZS51bnN0YWNrZWRQb3NpdGlvbiA9IGNvcHlQb3NpdGlvbihoaXRDaXJjbGVTZXR0aW5ncy5wb3NpdGlvbik7XHJcbiAgICBoaXRDaXJjbGUuaGl0VGltZSA9IGhpdENpcmNsZVNldHRpbmdzLnRpbWU7XHJcbiAgICBoaXRDaXJjbGUuc2NhbGUgPSAoMCwgaW5kZXhfMS5jaXJjbGVTaXplVG9TY2FsZSkoYmVhdG1hcERpZmZpY3VsdHkuY2lyY2xlU2l6ZSk7XHJcbiAgICBoaXRDaXJjbGUuYXBwcm9hY2hEdXJhdGlvbiA9ICgwLCBpbmRleF8xLmFwcHJvYWNoUmF0ZVRvQXBwcm9hY2hEdXJhdGlvbikoYmVhdG1hcERpZmZpY3VsdHkuYXBwcm9hY2hSYXRlKTtcclxuICAgIGhpdENpcmNsZS5mYWRlSW5EdXJhdGlvbiA9ICgwLCBpbmRleF8xLmdldEZhZGVJbkR1cmF0aW9uKShiZWF0bWFwRGlmZmljdWx0eS5hcHByb2FjaFJhdGUpO1xyXG4gICAgcmV0dXJuIGhpdENpcmNsZTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVTbGlkZXJDaGVja1BvaW50KHNsaWRlciwgaWQsIGRlc2NyaXB0b3IpIHtcclxuICAgIGNvbnN0IGNoZWNrUG9pbnQgPSBuZXcgU2xpZGVyQ2hlY2tQb2ludF8xLlNsaWRlckNoZWNrUG9pbnQoc2xpZGVyKTtcclxuICAgIGNvbnN0IHsgdGltZSwgc3BhblN0YXJ0VGltZSwgc3BhbkluZGV4LCBzcGFuUHJvZ3Jlc3MgfSA9IGRlc2NyaXB0b3I7XHJcbiAgICBjaGVja1BvaW50LmlkID0gaWQ7XHJcbiAgICBjaGVja1BvaW50Lm9mZnNldCA9IHNsaWRlci5wYXRoLnBvc2l0aW9uQXQoc3BhblByb2dyZXNzKTtcclxuICAgIGNoZWNrUG9pbnQudHlwZSA9IGRlc2NyaXB0b3IudHlwZTtcclxuICAgIGNoZWNrUG9pbnQuaGl0VGltZSA9IHRpbWU7XHJcbiAgICBjaGVja1BvaW50LnNwYW5JbmRleCA9IHNwYW5JbmRleDtcclxuICAgIGNoZWNrUG9pbnQuc3BhblN0YXJ0VGltZSA9IHNwYW5TdGFydFRpbWU7XHJcbiAgICBjaGVja1BvaW50LnNwYW5Qcm9ncmVzcyA9IHNwYW5Qcm9ncmVzcztcclxuICAgIHJldHVybiBjaGVja1BvaW50O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNsaWRlckNoZWNrUG9pbnRzKHNsaWRlcikge1xyXG4gICAgY29uc3QgY2hlY2tQb2ludHMgPSBbXTtcclxuICAgIGxldCBjaGVja3BvaW50SW5kZXggPSAwO1xyXG4gICAgZm9yIChjb25zdCBlIG9mICgwLCBTbGlkZXJDaGVja1BvaW50R2VuZXJhdG9yXzEuZ2VuZXJhdGVTbGlkZXJDaGVja3BvaW50cykoc2xpZGVyLnN0YXJ0VGltZSwgc2xpZGVyLnNwYW5EdXJhdGlvbiwgc2xpZGVyLnZlbG9jaXR5LCBzbGlkZXIudGlja0Rpc3RhbmNlLCBzbGlkZXIucGF0aC5kaXN0YW5jZSwgc2xpZGVyLnNwYW5Db3VudCwgc2xpZGVyLmxlZ2FjeUxhc3RUaWNrT2Zmc2V0KSkge1xyXG4gICAgICAgIGNvbnN0IGlkID0gYCR7c2xpZGVyLmlkfS8ke2NoZWNrcG9pbnRJbmRleCsrfWA7XHJcbiAgICAgICAgY2hlY2tQb2ludHMucHVzaChjcmVhdGVTbGlkZXJDaGVja1BvaW50KHNsaWRlciwgaWQsIGUpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGVja1BvaW50cztcclxufVxyXG5mdW5jdGlvbiBjb3B5UGF0aFBvaW50cyhwYXRoUG9pbnRzKSB7XHJcbiAgICByZXR1cm4gcGF0aFBvaW50cy5tYXAoKHsgdHlwZSwgb2Zmc2V0IH0pID0+ICh7XHJcbiAgICAgICAgdHlwZSxcclxuICAgICAgICBvZmZzZXQ6IGNvcHlQb3NpdGlvbihvZmZzZXQpLFxyXG4gICAgfSkpO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNsaWRlcihpbmRleCwgc2xpZGVyU2V0dGluZ3MsIGNvbnRyb2xQb2ludEluZm8sIGRpZmZpY3VsdHkpIHtcclxuICAgIGNvbnN0IGFwcHJvYWNoRHVyYXRpb24gPSAoMCwgaW5kZXhfMS5hcHByb2FjaFJhdGVUb0FwcHJvYWNoRHVyYXRpb24pKGRpZmZpY3VsdHkuYXBwcm9hY2hSYXRlKTtcclxuICAgIGNvbnN0IGZhZGVJbkR1cmF0aW9uID0gKDAsIGluZGV4XzEuZ2V0RmFkZUluRHVyYXRpb24pKGRpZmZpY3VsdHkuYXBwcm9hY2hSYXRlKTtcclxuICAgIGNvbnN0IHNjYWxlID0gKDAsIGluZGV4XzEuY2lyY2xlU2l6ZVRvU2NhbGUpKGRpZmZpY3VsdHkuY2lyY2xlU2l6ZSk7XHJcbiAgICBjb25zdCBoaXRUaW1lID0gc2xpZGVyU2V0dGluZ3MudGltZTtcclxuICAgIGNvbnN0IHRpbWluZ1BvaW50ID0gY29udHJvbFBvaW50SW5mby50aW1pbmdQb2ludEF0KGhpdFRpbWUpO1xyXG4gICAgY29uc3QgZGlmZmljdWx0eVBvaW50ID0gY29udHJvbFBvaW50SW5mby5kaWZmaWN1bHR5UG9pbnRBdChoaXRUaW1lKTtcclxuICAgIGNvbnN0IHNjb3JpbmdEaXN0YW5jZSA9IFNsaWRlcl8xLlNsaWRlci5CQVNFX1NDT1JJTkdfRElTVEFOQ0UgKiBkaWZmaWN1bHR5LnNsaWRlck11bHRpcGxpZXIgKiBkaWZmaWN1bHR5UG9pbnQuc3BlZWRNdWx0aXBsaWVyO1xyXG4gICAgY29uc3Qgc2xpZGVySWQgPSBpbmRleC50b1N0cmluZygpO1xyXG4gICAgY29uc3QgaGVhZCA9IG5ldyBIaXRDaXJjbGVfMS5IaXRDaXJjbGUoKTtcclxuICAgIGhlYWQuaWQgPSBgJHtpbmRleC50b1N0cmluZygpfS9IRUFEYDtcclxuICAgIGhlYWQudW5zdGFja2VkUG9zaXRpb24gPSBjb3B5UG9zaXRpb24oc2xpZGVyU2V0dGluZ3MucG9zaXRpb24pO1xyXG4gICAgaGVhZC5wb3NpdGlvbiA9IGNvcHlQb3NpdGlvbihzbGlkZXJTZXR0aW5ncy5wb3NpdGlvbik7XHJcbiAgICBoZWFkLmhpdFRpbWUgPSBzbGlkZXJTZXR0aW5ncy50aW1lO1xyXG4gICAgaGVhZC5hcHByb2FjaER1cmF0aW9uID0gYXBwcm9hY2hEdXJhdGlvbjtcclxuICAgIGhlYWQuc2NhbGUgPSBzY2FsZTtcclxuICAgIGhlYWQuc2xpZGVySWQgPSBzbGlkZXJJZDtcclxuICAgIGNvbnN0IHNsaWRlciA9IG5ldyBTbGlkZXJfMS5TbGlkZXIoaGVhZCk7XHJcbiAgICBzbGlkZXIuaWQgPSBzbGlkZXJJZDtcclxuICAgIHNsaWRlci5yZXBlYXRDb3VudCA9IHNsaWRlclNldHRpbmdzLnJlcGVhdENvdW50O1xyXG4gICAgc2xpZGVyLmxlZ2FjeUxhc3RUaWNrT2Zmc2V0ID0gc2xpZGVyU2V0dGluZ3MubGVnYWN5TGFzdFRpY2tPZmZzZXQ7XHJcbiAgICBzbGlkZXIudmVsb2NpdHkgPSBzY29yaW5nRGlzdGFuY2UgLyB0aW1pbmdQb2ludC5iZWF0TGVuZ3RoO1xyXG4gICAgc2xpZGVyLnRpY2tEaXN0YW5jZSA9IChzY29yaW5nRGlzdGFuY2UgLyBkaWZmaWN1bHR5LnNsaWRlclRpY2tSYXRlKSAqIHNsaWRlclNldHRpbmdzLnRpY2tEaXN0YW5jZU11bHRpcGxpZXI7XHJcbiAgICBzbGlkZXIucGF0aCA9IG5ldyBTbGlkZXJQYXRoXzEuU2xpZGVyUGF0aChjb3B5UGF0aFBvaW50cyhzbGlkZXJTZXR0aW5ncy5wYXRoUG9pbnRzKSwgc2xpZGVyU2V0dGluZ3MubGVuZ3RoKTtcclxuICAgIHNsaWRlci5jaGVja1BvaW50cyA9IGNyZWF0ZVNsaWRlckNoZWNrUG9pbnRzKHNsaWRlcik7XHJcbiAgICByZXR1cm4gc2xpZGVyO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVNwaW5uZXIoaWQsIHNldHRpbmdzLCBjb250cm9sUG9pbnRJbmZvLCBkaWZmaWN1bHR5KSB7XHJcbiAgICBjb25zdCBzcGlubmVyID0gbmV3IFNwaW5uZXJfMS5TcGlubmVyKCk7XHJcbiAgICBzcGlubmVyLmlkID0gaWQ7XHJcbiAgICBzcGlubmVyLnN0YXJ0VGltZSA9IHNldHRpbmdzLnRpbWU7XHJcbiAgICBzcGlubmVyLmR1cmF0aW9uID0gc2V0dGluZ3MuZHVyYXRpb247XHJcbiAgICByZXR1cm4gc3Bpbm5lcjtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVTdGF0aWNIaXRPYmplY3QoaW5kZXgsIGhpdE9iamVjdFNldHRpbmcsIGNvbnRyb2xQb2ludEluZm8sIGJlYXRtYXBEaWZmaWN1bHR5KSB7XHJcbiAgICBzd2l0Y2ggKGhpdE9iamVjdFNldHRpbmcudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJISVRfQ0lSQ0xFXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVIaXRDaXJjbGUoaW5kZXgudG9TdHJpbmcoKSwgaGl0T2JqZWN0U2V0dGluZywgY29udHJvbFBvaW50SW5mbywgYmVhdG1hcERpZmZpY3VsdHkpO1xyXG4gICAgICAgIGNhc2UgXCJTTElERVJcIjpcclxuICAgICAgICAgICAgcmV0dXJuIGNyZWF0ZVNsaWRlcihpbmRleCwgaGl0T2JqZWN0U2V0dGluZywgY29udHJvbFBvaW50SW5mbywgYmVhdG1hcERpZmZpY3VsdHkpO1xyXG4gICAgICAgIGNhc2UgXCJTUElOTkVSXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVTcGlubmVyKGluZGV4LnRvU3RyaW5nKCksIGhpdE9iamVjdFNldHRpbmcsIGNvbnRyb2xQb2ludEluZm8sIGJlYXRtYXBEaWZmaWN1bHR5KTtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcihcIlR5cGUgbm90IHJlY29nbml6ZWQuLi5cIik7XHJcbn1cclxuLy8gTXV0YXRlcyB0aGUgaGl0T2JqZWN0IGNvbWJvIGluZGV4IHZhbHVlc1xyXG5mdW5jdGlvbiBhc3NpZ25Db21ib0luZGV4KGJsdWVQcmludFNldHRpbmdzLCBoaXRPYmplY3RzKSB7XHJcbiAgICBsZXQgY29tYm9TZXRJbmRleCA9IC0xLCB3aXRoaW5TZXRJbmRleCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCB7IG5ld0NvbWJvLCBjb21ib1NraXAsIHR5cGUgfSA9IGJsdWVQcmludFNldHRpbmdzW2ldO1xyXG4gICAgICAgIGNvbnN0IGhpdE9iamVjdCA9IGhpdE9iamVjdHNbaV07IC8vIGNoYW5nZSAnY29uc3QnIC0+ICdsZXQnIGZvciBiZXR0ZXIgcmVhZGFiaWxpdHlcclxuICAgICAgICBpZiAoaSA9PT0gMCB8fCBuZXdDb21ibyB8fCB0eXBlID09PSBcIlNQSU5ORVJcIikge1xyXG4gICAgICAgICAgICBjb21ib1NldEluZGV4ICs9IGNvbWJvU2tpcCArIDE7XHJcbiAgICAgICAgICAgIHdpdGhpblNldEluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU3Bpbm5lcnMgZG8gbm90IGhhdmUgY29tYm9TZXRJbmRleCBvciB3aXRoaW5Db21ib1NldEluZGV4XHJcbiAgICAgICAgaWYgKGhpdE9iamVjdCBpbnN0YW5jZW9mIEhpdENpcmNsZV8xLkhpdENpcmNsZSkge1xyXG4gICAgICAgICAgICBoaXRPYmplY3QuY29tYm9TZXRJbmRleCA9IGNvbWJvU2V0SW5kZXg7XHJcbiAgICAgICAgICAgIGhpdE9iamVjdC53aXRoaW5Db21ib1NldEluZGV4ID0gd2l0aGluU2V0SW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaGl0T2JqZWN0IGluc3RhbmNlb2YgU2xpZGVyXzEuU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIGhpdE9iamVjdC5oZWFkLmNvbWJvU2V0SW5kZXggPSBjb21ib1NldEluZGV4O1xyXG4gICAgICAgICAgICBoaXRPYmplY3QuaGVhZC53aXRoaW5Db21ib1NldEluZGV4ID0gd2l0aGluU2V0SW5kZXgrKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLy8gVGhlcmUgc2hvdWxkIG9ubHkgYmUgb25lLCBvdGhlcndpc2UgLi4uXHJcbmZ1bmN0aW9uIGZpbmREaWZmaWN1bHR5QXBwbGllcihtb2RzKSB7XHJcbiAgICBmb3IgKGNvbnN0IG0gb2YgbW9kcykge1xyXG4gICAgICAgIGNvbnN0IGFkanVzdGVyID0gTW9kc18xLk1vZFNldHRpbmdzW21dLmRpZmZpY3VsdHlBZGp1c3RlcjtcclxuICAgICAgICBpZiAoYWRqdXN0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gYWRqdXN0ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIChkKSA9PiBkOyAvLyBUaGUgaWRlbnRpdHkgZnVuY3Rpb25cclxufVxyXG5jb25zdCBkZWZhdWx0QmVhdG1hcEJ1aWxkZXJPcHRpb25zID0ge1xyXG4gICAgYWRkU3RhY2tpbmc6IHRydWUsXHJcbiAgICBtb2RzOiBbXSxcclxufTtcclxuLyoqXHJcbiAqIEJ1aWxkcyB0aGUgYmVhdG1hcCBmcm9tIHRoZSBnaXZlbiBibHVlcHJpbnQgYW5kIG9wdGlvbnMuXHJcbiAqXHJcbiAqIEl0IERPRVMgbm90IHBlcmZvcm0gYSBjaGVjayBvbiB0aGUgZ2l2ZW4gc3Vic2V0IG9mIG1vZHMuIFNvIGlmIHlvdSBlbnRlciBoYWxmLXRpbWUgYW5kIGRvdWJsZSB0aW1lIGF0IHRoZSBzYW1lIHRpbWUsXHJcbiAqIHRoZW4gdGhpcyBtaWdodCByZXR1cm4gYmFkIHJlc3VsdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB7Qmx1ZXByaW50fSBibHVlUHJpbnRcclxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcclxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmFkZFN0YWNraW5nIHdoZXRoZXIgdG8gYXBwbHkgc2V0dGluZyBvciBub3QgKGJ5IGRlZmF1bHQgdHJ1ZSlcclxuICovXHJcbmZ1bmN0aW9uIGJ1aWxkQmVhdG1hcChibHVlUHJpbnQsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IHsgYmVhdG1hcFZlcnNpb24sIHN0YWNrTGVuaWVuY3kgfSA9IGJsdWVQcmludC5ibHVlcHJpbnRJbmZvO1xyXG4gICAgY29uc3QgeyBtb2RzLCBhZGRTdGFja2luZyB9ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QmVhdG1hcEJ1aWxkZXJPcHRpb25zKSwgb3B0aW9ucyk7XHJcbiAgICBjb25zdCBmaW5hbERpZmZpY3VsdHkgPSBmaW5kRGlmZmljdWx0eUFwcGxpZXIobW9kcykoYmx1ZVByaW50LmRlZmF1bHREaWZmaWN1bHR5KTtcclxuICAgIGNvbnN0IGhpdE9iamVjdHMgPSBibHVlUHJpbnQuaGl0T2JqZWN0U2V0dGluZ3MubWFwKChzZXR0aW5nLCBpbmRleCkgPT4gY3JlYXRlU3RhdGljSGl0T2JqZWN0KGluZGV4LCBzZXR0aW5nLCBibHVlUHJpbnQuY29udHJvbFBvaW50SW5mbywgZmluYWxEaWZmaWN1bHR5KSk7XHJcbiAgICBhc3NpZ25Db21ib0luZGV4KGJsdWVQcmludC5oaXRPYmplY3RTZXR0aW5ncywgaGl0T2JqZWN0cyk7XHJcbiAgICBpZiAobW9kcy5pbmNsdWRlcyhcIkhBUkRfUk9DS1wiKSkge1xyXG4gICAgICAgIEhhcmRSb2NrTW9kXzEuSGFyZFJvY2tNb2QuZmxpcFZlcnRpY2FsbHkoaGl0T2JqZWN0cyk7XHJcbiAgICB9XHJcbiAgICBpZiAoYWRkU3RhY2tpbmcpIHtcclxuICAgICAgICAoMCwgU3RhY2tpbmdNb2RfMS5tb2RpZnlTdGFja2luZ1Bvc2l0aW9uKShoaXRPYmplY3RzLCBzdGFja0xlbmllbmN5LCBiZWF0bWFwVmVyc2lvbik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEJlYXRtYXBfMS5CZWF0bWFwKGhpdE9iamVjdHMsIGZpbmFsRGlmZmljdWx0eSwgbW9kcywgYmx1ZVByaW50LmNvbnRyb2xQb2ludEluZm8pO1xyXG59XHJcbmV4cG9ydHMuYnVpbGRCZWF0bWFwID0gYnVpbGRCZWF0bWFwO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkRFRkFVTFRfQkVBVE1BUF9ESUZGSUNVTFRZID0gdm9pZCAwO1xyXG5leHBvcnRzLkRFRkFVTFRfQkVBVE1BUF9ESUZGSUNVTFRZID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBkcmFpblJhdGU6IDUsXHJcbiAgICBjaXJjbGVTaXplOiA1LFxyXG4gICAgb3ZlcmFsbERpZmZpY3VsdHk6IDUsXHJcbiAgICAvLyBUZWNobmljYWxseSBzcGVha2luZyBkZWZhdWx0IHZhbHVlIG9mIEFSIGlzIDUgYmVjYXVzZSBPRCBpcyA1XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcHB5L29zdS9ibG9iL2IxZmNiODQwYTlmZjRkODY2YWFjMjYyYWNlN2Y1NGZhODhiNWUwY2Uvb3N1LkdhbWUvQmVhdG1hcHMvQmVhdG1hcERpZmZpY3VsdHkuY3MjTDM1XHJcbiAgICBhcHByb2FjaFJhdGU6IDUsXHJcbiAgICBzbGlkZXJNdWx0aXBsaWVyOiAxLFxyXG4gICAgc2xpZGVyVGlja1JhdGU6IDEsXHJcbn0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkNvbnRyb2xQb2ludCA9IHZvaWQgMDtcclxuY2xhc3MgQ29udHJvbFBvaW50IHtcclxuICAgIGdldCB0aW1lKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgcmV0dXJuIChfYiA9IChfYSA9IHRoaXMuY29udHJvbFBvaW50R3JvdXApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50aW1lKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xyXG4gICAgfVxyXG4gICAgY29tcGFyZVRvKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZSAtIG90aGVyLnRpbWU7XHJcbiAgICB9XHJcbiAgICBhdHRhY2hHcm91cChwb2ludEdyb3VwKSB7XHJcbiAgICAgICAgdGhpcy5jb250cm9sUG9pbnRHcm91cCA9IHBvaW50R3JvdXA7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5Db250cm9sUG9pbnQgPSBDb250cm9sUG9pbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQ29udHJvbFBvaW50R3JvdXAgPSB2b2lkIDA7XHJcbmNsYXNzIENvbnRyb2xQb2ludEdyb3VwIHtcclxuICAgIC8vIGl0ZW1SZW1vdmVkOiBhbnk7XHJcbiAgICAvLyBpdGVtQWRkZWQ6IGFueTtcclxuICAgIGNvbnN0cnVjdG9yKHRpbWUpIHtcclxuICAgICAgICB0aGlzLnRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuY29udHJvbFBvaW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMudGltZSA9IHRpbWU7XHJcbiAgICB9XHJcbiAgICBhZGQocG9pbnQpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmNvbnRyb2xQb2ludHMuZmluZEluZGV4KCh2YWx1ZSkgPT4gdmFsdWUudHlwZSA9PT0gcG9pbnQudHlwZSk7XHJcbiAgICAgICAgaWYgKGkgPiAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gdGhpcy5jb250cm9sUG9pbnRzW2ldO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRyb2xQb2ludHMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAoX2EgPSB0aGlzLmNvbnRyb2xQb2ludEluZm8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ncm91cEl0ZW1SZW1vdmVkKHApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwb2ludC5hdHRhY2hHcm91cCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xQb2ludHMucHVzaChwb2ludCk7XHJcbiAgICAgICAgKF9iID0gdGhpcy5jb250cm9sUG9pbnRJbmZvKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ3JvdXBJdGVtQWRkZWQocG9pbnQpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuQ29udHJvbFBvaW50R3JvdXAgPSBDb250cm9sUG9pbnRHcm91cDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Db250cm9sUG9pbnRJbmZvID0gdm9pZCAwO1xyXG5jb25zdCBEaWZmaWN1bHR5Q29udHJvbFBvaW50XzEgPSByZXF1aXJlKFwiLi9EaWZmaWN1bHR5Q29udHJvbFBvaW50XCIpO1xyXG5jb25zdCBUaW1pbmdDb250cm9sUG9pbnRfMSA9IHJlcXVpcmUoXCIuL1RpbWluZ0NvbnRyb2xQb2ludFwiKTtcclxuY29uc3QgRWZmZWN0Q29udHJvbFBvaW50XzEgPSByZXF1aXJlKFwiLi9FZmZlY3RDb250cm9sUG9pbnRcIik7XHJcbmNvbnN0IFNhbXBsZUNvbnRyb2xQb2ludF8xID0gcmVxdWlyZShcIi4vU2FtcGxlQ29udHJvbFBvaW50XCIpO1xyXG5jb25zdCBDb250cm9sUG9pbnRHcm91cF8xID0gcmVxdWlyZShcIi4vQ29udHJvbFBvaW50R3JvdXBcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vLi4vLi4vbWF0aC9pbmRleFwiKTtcclxuY29uc3QgU29ydGVkTGlzdF8xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL1NvcnRlZExpc3RcIik7XHJcbmNsYXNzIENvbnRyb2xQb2ludEluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kaWZmaWN1bHR5UG9pbnRzID0gbmV3IFNvcnRlZExpc3RfMS5Tb3J0ZWRMaXN0KCk7XHJcbiAgICAgICAgdGhpcy50aW1pbmdQb2ludHMgPSBuZXcgU29ydGVkTGlzdF8xLlNvcnRlZExpc3QoKTtcclxuICAgICAgICB0aGlzLmVmZmVjdFBvaW50cyA9IG5ldyBTb3J0ZWRMaXN0XzEuU29ydGVkTGlzdCgpO1xyXG4gICAgICAgIHRoaXMuc2FtcGxlUG9pbnRzID0gbmV3IFNvcnRlZExpc3RfMS5Tb3J0ZWRMaXN0KCk7XHJcbiAgICAgICAgLy8gV2h5IG5vdCB1c2UgU29ydGVkTGlzdCBoZXJlID9cclxuICAgICAgICB0aGlzLmdyb3VwcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgZGlmZmljdWx0eVBvaW50QXQodGltZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVNlYXJjaFdpdGhGYWxsYmFjayh0aGlzLmRpZmZpY3VsdHlQb2ludHMubGlzdCwgdGltZSwgRGlmZmljdWx0eUNvbnRyb2xQb2ludF8xLkRpZmZpY3VsdHlDb250cm9sUG9pbnQuREVGQVVMVCk7XHJcbiAgICB9XHJcbiAgICBzYW1wbGVQb2ludEF0KHRpbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTZWFyY2hXaXRoRmFsbGJhY2sodGhpcy5zYW1wbGVQb2ludHMubGlzdCwgdGltZSwgdGhpcy5zYW1wbGVQb2ludHMubGVuZ3RoID4gMCA/IHRoaXMuc2FtcGxlUG9pbnRzLmxpc3RbMF0gOiBTYW1wbGVDb250cm9sUG9pbnRfMS5TYW1wbGVDb250cm9sUG9pbnQuREVGQVVMVCk7XHJcbiAgICB9XHJcbiAgICBhZGQodGltZSwgY29udHJvbFBvaW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tBbHJlYWR5RXhpc3RpbmcodGltZSwgY29udHJvbFBvaW50KSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGcgPSB0aGlzLmdyb3VwQXQodGltZSwgdHJ1ZSk7XHJcbiAgICAgICAgZy5hZGQoY29udHJvbFBvaW50KTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGdyb3VwQXQodGltZSwgYWRkSWZOb3RFeGlzdGluZyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgbmV3R3JvdXAgPSBuZXcgQ29udHJvbFBvaW50R3JvdXBfMS5Db250cm9sUG9pbnRHcm91cCh0aW1lKTtcclxuICAgICAgICBjb25zdCBmb3VuZCA9IHRoaXMuZ3JvdXBzLmZpbmQoKG8pID0+ICgwLCBpbmRleF8xLmZsb2F0RXF1YWwpKG8udGltZSwgdGltZSkpO1xyXG4gICAgICAgIGlmIChmb3VuZClcclxuICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xyXG4gICAgICAgIGlmIChhZGRJZk5vdEV4aXN0aW5nKSB7XHJcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgYSB3b3JrYXJvdW5kIGZvciB0aGUgZm9sbG93aW5nIHR3byB1bmNvbW1lbnRlZCBsaW5lc1xyXG4gICAgICAgICAgICBuZXdHcm91cC5jb250cm9sUG9pbnRJbmZvID0gdGhpcztcclxuICAgICAgICAgICAgLy8gbmV3R3JvdXAuaXRlbUFkZGVkID0gdGhpcy5ncm91cEl0ZW1BZGRlZDtcclxuICAgICAgICAgICAgLy8gbmV3R3JvdXAuaXRlbVJlbW92ZWQgPSB0aGlzLmdyb3VwSXRlbVJlbW92ZWQ7XHJcbiAgICAgICAgICAgIHRoaXMuZ3JvdXBzLnB1c2gobmV3R3JvdXApO1xyXG4gICAgICAgICAgICAvLyBvc3UhbGF6ZXIgdGhleSB1c2UgLmluc2VydCh+aSkgdG8gbWFpbnRhaW4gaXQgc29ydGVkIC4uLiAtPiBpc24ndCB0aGlzIE8obl4yKT9cclxuICAgICAgICAgICAgLy8gd2Ugc29ydCBjYXVzZSBsYXp5IHJuIChvcHRpbWl6ZSBsYXRlcilcclxuICAgICAgICAgICAgdGhpcy5ncm91cHMuc29ydCgoYSwgYikgPT4gYS50aW1lIC0gYi50aW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0dyb3VwO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGdyb3VwSXRlbUFkZGVkKGNvbnRyb2xQb2ludCkge1xyXG4gICAgICAgIHN3aXRjaCAoY29udHJvbFBvaW50LnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBUaW1pbmdDb250cm9sUG9pbnRfMS5UaW1pbmdDb250cm9sUG9pbnQuVFlQRTpcclxuICAgICAgICAgICAgICAgIHRoaXMudGltaW5nUG9pbnRzLmFkZChjb250cm9sUG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRWZmZWN0Q29udHJvbFBvaW50XzEuRWZmZWN0Q29udHJvbFBvaW50LlRZUEU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVmZmVjdFBvaW50cy5hZGQoY29udHJvbFBvaW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFNhbXBsZUNvbnRyb2xQb2ludF8xLlNhbXBsZUNvbnRyb2xQb2ludC5UWVBFOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zYW1wbGVQb2ludHMuYWRkKGNvbnRyb2xQb2ludCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBEaWZmaWN1bHR5Q29udHJvbFBvaW50XzEuRGlmZmljdWx0eUNvbnRyb2xQb2ludC5UWVBFOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5UG9pbnRzLmFkZChjb250cm9sUG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ3JvdXBJdGVtUmVtb3ZlZChjb250cm9sUG9pbnQpIHtcclxuICAgICAgICBzd2l0Y2ggKGNvbnRyb2xQb2ludC50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgVGltaW5nQ29udHJvbFBvaW50XzEuVGltaW5nQ29udHJvbFBvaW50LlRZUEU6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWluZ1BvaW50cy5yZW1vdmUoY29udHJvbFBvaW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIEVmZmVjdENvbnRyb2xQb2ludF8xLkVmZmVjdENvbnRyb2xQb2ludC5UWVBFOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5lZmZlY3RQb2ludHMucmVtb3ZlKGNvbnRyb2xQb2ludCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTYW1wbGVDb250cm9sUG9pbnRfMS5TYW1wbGVDb250cm9sUG9pbnQuVFlQRTpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2FtcGxlUG9pbnRzLnJlbW92ZShjb250cm9sUG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGlmZmljdWx0eUNvbnRyb2xQb2ludF8xLkRpZmZpY3VsdHlDb250cm9sUG9pbnQuVFlQRTpcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eVBvaW50cy5yZW1vdmUoY29udHJvbFBvaW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHRpbWluZ1BvaW50QXQodGltZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJpbmFyeVNlYXJjaFdpdGhGYWxsYmFjayh0aGlzLnRpbWluZ1BvaW50cy5saXN0LCB0aW1lLCB0aGlzLnRpbWluZ1BvaW50cy5sZW5ndGggPiAwID8gdGhpcy50aW1pbmdQb2ludHMuZ2V0KDApIDogVGltaW5nQ29udHJvbFBvaW50XzEuVGltaW5nQ29udHJvbFBvaW50LkRFRkFVTFQpO1xyXG4gICAgfVxyXG4gICAgZWZmZWN0UG9pbnRBdCh0aW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U2VhcmNoV2l0aEZhbGxiYWNrKHRoaXMuZWZmZWN0UG9pbnRzLmxpc3QsIHRpbWUsIEVmZmVjdENvbnRyb2xQb2ludF8xLkVmZmVjdENvbnRyb2xQb2ludC5ERUZBVUxUKTtcclxuICAgIH1cclxuICAgIGJpbmFyeVNlYXJjaFdpdGhGYWxsYmFjayhsaXN0LCB0aW1lLCBmYWxsYmFjaykge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuYmluYXJ5U2VhcmNoKGxpc3QsIHRpbWUpO1xyXG4gICAgICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgb2JqICE9PSB2b2lkIDAgPyBvYmogOiBmYWxsYmFjaztcclxuICAgIH1cclxuICAgIC8vIEZpbmQgdGhlIGZpcnN0IGVsZW1lbnQgdGhhdCBoYXMgYSB0aW1lIG5vdCBsZXNzIHRoYW4gdGhlIGdpdmVuIHRpbWUuXHJcbiAgICBiaW5hcnlTZWFyY2gobGlzdCwgdGltZSkge1xyXG4gICAgICAgIGlmIChsaXN0ID09PSBudWxsKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBcmd1bWVudCBudWxsXCIpO1xyXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMCB8fCB0aW1lIDwgbGlzdFswXS50aW1lKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICBsZXQgbG8gPSAwO1xyXG4gICAgICAgIGxldCBoaSA9IGxpc3QubGVuZ3RoO1xyXG4gICAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IGluZGV4IHRoYXQgaGFzIGEgdGltZSBncmVhdGVyIHRoYW4gY3VycmVudCBvbmUuXHJcbiAgICAgICAgLy8gVGhlIHByZXZpb3VzIG9uZSB3aWxsIHRoZW4gYmUgdGhlIGFuc3dlci5cclxuICAgICAgICB3aGlsZSAobG8gPCBoaSkge1xyXG4gICAgICAgICAgICBjb25zdCBtaWQgPSBsbyArICgoaGkgLSBsbykgPj4gMSk7XHJcbiAgICAgICAgICAgIGlmIChsaXN0W21pZF0udGltZSA8PSB0aW1lKVxyXG4gICAgICAgICAgICAgICAgbG8gPSBtaWQgKyAxO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICBoaSA9IG1pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxpc3RbbG8gLSAxXTtcclxuICAgIH1cclxuICAgIGNoZWNrQWxyZWFkeUV4aXN0aW5nKHRpbWUsIG5ld1BvaW50KSB7XHJcbiAgICAgICAgbGV0IGV4aXN0aW5nID0gbnVsbDtcclxuICAgICAgICBzd2l0Y2ggKG5ld1BvaW50LnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBUaW1pbmdDb250cm9sUG9pbnRfMS5UaW1pbmdDb250cm9sUG9pbnQuVFlQRTpcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gdGhpcy5iaW5hcnlTZWFyY2godGhpcy50aW1pbmdQb2ludHMubGlzdCwgdGltZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBFZmZlY3RDb250cm9sUG9pbnRfMS5FZmZlY3RDb250cm9sUG9pbnQuVFlQRTpcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gdGhpcy5lZmZlY3RQb2ludEF0KHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2FtcGxlQ29udHJvbFBvaW50XzEuU2FtcGxlQ29udHJvbFBvaW50LlRZUEU6XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZyA9IHRoaXMuYmluYXJ5U2VhcmNoKHRoaXMuc2FtcGxlUG9pbnRzLmxpc3QsIHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgRGlmZmljdWx0eUNvbnRyb2xQb2ludF8xLkRpZmZpY3VsdHlDb250cm9sUG9pbnQuVFlQRTpcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nID0gdGhpcy5kaWZmaWN1bHR5UG9pbnRBdCh0aW1lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBpbiBvc3UhbGF6ZXIgaXQncyB3cml0dGVuIHdpdGggbmV3UG9pbnQ/LmlzUmVkdW5kYW50XHJcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nID8gbmV3UG9pbnQuaXNSZWR1bmRhbnQoZXhpc3RpbmcpIDogZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5Db250cm9sUG9pbnRJbmZvID0gQ29udHJvbFBvaW50SW5mbztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5EaWZmaWN1bHR5Q29udHJvbFBvaW50ID0gdm9pZCAwO1xyXG5jb25zdCBDb250cm9sUG9pbnRfMSA9IHJlcXVpcmUoXCIuL0NvbnRyb2xQb2ludFwiKTtcclxuY2xhc3MgRGlmZmljdWx0eUNvbnRyb2xQb2ludCBleHRlbmRzIENvbnRyb2xQb2ludF8xLkNvbnRyb2xQb2ludCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMuc3BlZWRNdWx0aXBsaWVyID0gMTtcclxuICAgIH1cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiBEaWZmaWN1bHR5Q29udHJvbFBvaW50LlRZUEU7XHJcbiAgICB9XHJcbiAgICBpc1JlZHVuZGFudChleGlzdGluZykge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkRpZmZpY3VsdHlDb250cm9sUG9pbnQgPSBEaWZmaWN1bHR5Q29udHJvbFBvaW50O1xyXG5EaWZmaWN1bHR5Q29udHJvbFBvaW50LkRFRkFVTFQgPSBuZXcgRGlmZmljdWx0eUNvbnRyb2xQb2ludCgpO1xyXG5EaWZmaWN1bHR5Q29udHJvbFBvaW50LlRZUEUgPSBcIkRpZmZpY3VsdHlDb250cm9sUG9pbnRcIjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5FZmZlY3RDb250cm9sUG9pbnQgPSB2b2lkIDA7XHJcbmNvbnN0IENvbnRyb2xQb2ludF8xID0gcmVxdWlyZShcIi4vQ29udHJvbFBvaW50XCIpO1xyXG5jbGFzcyBFZmZlY3RDb250cm9sUG9pbnQgZXh0ZW5kcyBDb250cm9sUG9pbnRfMS5Db250cm9sUG9pbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLmtpYWlNb2RlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbWl0Rmlyc3RCYXJMaW5lID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlzUmVkdW5kYW50KGV4aXN0aW5nKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub21pdEZpcnN0QmFyTGluZSB8fCBleGlzdGluZy50eXBlICE9PSBFZmZlY3RDb250cm9sUG9pbnQuVFlQRSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGNvbnN0IGUgPSBleGlzdGluZztcclxuICAgICAgICByZXR1cm4gdGhpcy5raWFpTW9kZSA9PT0gZS5raWFpTW9kZSAmJiB0aGlzLm9taXRGaXJzdEJhckxpbmUgPT09IGUub21pdEZpcnN0QmFyTGluZTtcclxuICAgIH1cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiBFZmZlY3RDb250cm9sUG9pbnQuVFlQRTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkVmZmVjdENvbnRyb2xQb2ludCA9IEVmZmVjdENvbnRyb2xQb2ludDtcclxuRWZmZWN0Q29udHJvbFBvaW50LlRZUEUgPSBcIkVmZmVjdENvbnRyb2xQb2ludFwiO1xyXG5FZmZlY3RDb250cm9sUG9pbnQuREVGQVVMVCA9IG5ldyBFZmZlY3RDb250cm9sUG9pbnQoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5TYW1wbGVDb250cm9sUG9pbnQgPSB2b2lkIDA7XHJcbmNvbnN0IENvbnRyb2xQb2ludF8xID0gcmVxdWlyZShcIi4vQ29udHJvbFBvaW50XCIpO1xyXG5jbGFzcyBTYW1wbGVDb250cm9sUG9pbnQgZXh0ZW5kcyBDb250cm9sUG9pbnRfMS5Db250cm9sUG9pbnQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnNhbXBsZUJhbmsgPSBTYW1wbGVDb250cm9sUG9pbnQuREVGQVVMVF9CQU5LO1xyXG4gICAgICAgIHRoaXMuc2FtcGxlVm9sdW1lID0gMTAwO1xyXG4gICAgfVxyXG4gICAgaXNSZWR1bmRhbnQoZXhpc3RpbmcpIHtcclxuICAgICAgICBpZiAoZXhpc3RpbmcudHlwZSAhPT0gU2FtcGxlQ29udHJvbFBvaW50LlRZUEUpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBjb25zdCBlID0gZXhpc3Rpbmc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2FtcGxlQmFuayA9PT0gZS5zYW1wbGVCYW5rICYmIHRoaXMuc2FtcGxlVm9sdW1lID09PSBlLnNhbXBsZVZvbHVtZTtcclxuICAgIH1cclxuICAgIGdldCB0eXBlKCkge1xyXG4gICAgICAgIHJldHVybiBTYW1wbGVDb250cm9sUG9pbnQuVFlQRTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLlNhbXBsZUNvbnRyb2xQb2ludCA9IFNhbXBsZUNvbnRyb2xQb2ludDtcclxuU2FtcGxlQ29udHJvbFBvaW50LlRZUEUgPSBcIlNhbXBsZUNvbnRyb2xQb2ludFwiO1xyXG5TYW1wbGVDb250cm9sUG9pbnQuREVGQVVMVF9CQU5LID0gXCJub3JtYWxcIjtcclxuU2FtcGxlQ29udHJvbFBvaW50LkRFRkFVTFQgPSBuZXcgU2FtcGxlQ29udHJvbFBvaW50KCk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVGltaW5nQ29udHJvbFBvaW50ID0gdm9pZCAwO1xyXG5jb25zdCBDb250cm9sUG9pbnRfMSA9IHJlcXVpcmUoXCIuL0NvbnRyb2xQb2ludFwiKTtcclxuY29uc3QgVGltZVNpZ25hdHVyZXNfMSA9IHJlcXVpcmUoXCIuLi9UaW1lU2lnbmF0dXJlc1wiKTtcclxuY2xhc3MgVGltaW5nQ29udHJvbFBvaW50IGV4dGVuZHMgQ29udHJvbFBvaW50XzEuQ29udHJvbFBvaW50IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5iZWF0TGVuZ3RoID0gMTAwMDtcclxuICAgICAgICAvLyBUT0RPOiBJcyB0aGlzIHRoZSBkZWZhdWx0IHZhbHVlP1xyXG4gICAgICAgIHRoaXMudGltZVNpZ25hdHVyZSA9IFRpbWVTaWduYXR1cmVzXzEuVGltZVNpZ25hdHVyZXMuU2ltcGxlUXVhZHJ1cGxlO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIEJQTSBhdCB0aGlzIGNvbnRyb2wgcG9pbnRcclxuICAgIGdldCBCUE0oKSB7XHJcbiAgICAgICAgcmV0dXJuIDYwMDAwIC8gdGhpcy5iZWF0TGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFRpbWluZ0NvbnRyb2xQb2ludC5UWVBFO1xyXG4gICAgfVxyXG4gICAgaXNSZWR1bmRhbnQoZXhpc3RpbmcpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5UaW1pbmdDb250cm9sUG9pbnQgPSBUaW1pbmdDb250cm9sUG9pbnQ7XHJcblRpbWluZ0NvbnRyb2xQb2ludC5UWVBFID0gXCJUaW1pbmdDb250cm9sUG9pbnRcIjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5MZWdhY3lFZmZlY3RGbGFncyA9IHZvaWQgMDtcclxudmFyIExlZ2FjeUVmZmVjdEZsYWdzO1xyXG4oZnVuY3Rpb24gKExlZ2FjeUVmZmVjdEZsYWdzKSB7XHJcbiAgICBMZWdhY3lFZmZlY3RGbGFnc1tMZWdhY3lFZmZlY3RGbGFnc1tcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xyXG4gICAgTGVnYWN5RWZmZWN0RmxhZ3NbTGVnYWN5RWZmZWN0RmxhZ3NbXCJLaWFpXCJdID0gMV0gPSBcIktpYWlcIjtcclxuICAgIExlZ2FjeUVmZmVjdEZsYWdzW0xlZ2FjeUVmZmVjdEZsYWdzW1wiT21pdEZpcnN0QmFyTGluZVwiXSA9IDhdID0gXCJPbWl0Rmlyc3RCYXJMaW5lXCI7XHJcbn0pKExlZ2FjeUVmZmVjdEZsYWdzID0gZXhwb3J0cy5MZWdhY3lFZmZlY3RGbGFncyB8fCAoZXhwb3J0cy5MZWdhY3lFZmZlY3RGbGFncyA9IHt9KSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuVGltZVNpZ25hdHVyZXMgPSB2b2lkIDA7XHJcbnZhciBUaW1lU2lnbmF0dXJlcztcclxuKGZ1bmN0aW9uIChUaW1lU2lnbmF0dXJlcykge1xyXG4gICAgVGltZVNpZ25hdHVyZXNbVGltZVNpZ25hdHVyZXNbXCJTaW1wbGVRdWFkcnVwbGVcIl0gPSA0XSA9IFwiU2ltcGxlUXVhZHJ1cGxlXCI7XHJcbiAgICBUaW1lU2lnbmF0dXJlc1tUaW1lU2lnbmF0dXJlc1tcIlNpbXBsZVRyaXBsZVwiXSA9IDNdID0gXCJTaW1wbGVUcmlwbGVcIjtcclxufSkoVGltZVNpZ25hdHVyZXMgPSBleHBvcnRzLlRpbWVTaWduYXR1cmVzIHx8IChleHBvcnRzLlRpbWVTaWduYXR1cmVzID0ge30pKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5wYXJzZUJsdWVwcmludCA9IGV4cG9ydHMuQmx1ZXByaW50U2VjdGlvbnMgPSBleHBvcnRzLnBhcnNlT3N1SGl0T2JqZWN0U2V0dGluZyA9IGV4cG9ydHMuTGVnYWN5SGl0U2FtcGxlSW5mbyA9IHZvaWQgMDtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi8uLi9tYXRoL2luZGV4XCIpO1xyXG5jb25zdCBQYXRoVHlwZV8xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvc2xpZGVyL1BhdGhUeXBlXCIpO1xyXG5jb25zdCBUaW1lU2lnbmF0dXJlc18xID0gcmVxdWlyZShcIi4uL2JlYXRtYXAvVGltZVNpZ25hdHVyZXNcIik7XHJcbmNvbnN0IExlZ2FjeUVmZmVjdEZsYWdfMSA9IHJlcXVpcmUoXCIuLi9iZWF0bWFwL0xlZ2FjeUVmZmVjdEZsYWdcIik7XHJcbmNvbnN0IFRpbWluZ0NvbnRyb2xQb2ludF8xID0gcmVxdWlyZShcIi4uL2JlYXRtYXAvQ29udHJvbFBvaW50cy9UaW1pbmdDb250cm9sUG9pbnRcIik7XHJcbmNvbnN0IERpZmZpY3VsdHlDb250cm9sUG9pbnRfMSA9IHJlcXVpcmUoXCIuLi9iZWF0bWFwL0NvbnRyb2xQb2ludHMvRGlmZmljdWx0eUNvbnRyb2xQb2ludFwiKTtcclxuY29uc3QgRWZmZWN0Q29udHJvbFBvaW50XzEgPSByZXF1aXJlKFwiLi4vYmVhdG1hcC9Db250cm9sUG9pbnRzL0VmZmVjdENvbnRyb2xQb2ludFwiKTtcclxuY29uc3QgU2FtcGxlQ29udHJvbFBvaW50XzEgPSByZXF1aXJlKFwiLi4vYmVhdG1hcC9Db250cm9sUG9pbnRzL1NhbXBsZUNvbnRyb2xQb2ludFwiKTtcclxuY29uc3QgSGl0U2FtcGxlSW5mb18xID0gcmVxdWlyZShcIi4uL2F1ZGlvL0hpdFNhbXBsZUluZm9cIik7XHJcbmNvbnN0IExlZ2FjeVNhbXBsZUJhbmtfMSA9IHJlcXVpcmUoXCIuLi9hdWRpby9MZWdhY3lTYW1wbGVCYW5rXCIpO1xyXG5jb25zdCBDb250cm9sUG9pbnRJbmZvXzEgPSByZXF1aXJlKFwiLi4vYmVhdG1hcC9Db250cm9sUG9pbnRzL0NvbnRyb2xQb2ludEluZm9cIik7XHJcbmNvbnN0IFNFQ1RJT05fUkVHRVggPSAvXlxccypcXFsoLis/KV1cXHMqJC87XHJcbmNvbnN0IERFRkFVTFRfTEVHQUNZX1RJQ0tfT0ZGU0VUID0gMzY7XHJcbi8qKlxyXG4gKiAgV2lsbCBtYWtlIHN1cmUgdGhhdCB0aGUgY29tbWVudCBhdCB0aGUgZW5kIG9mIGxpbmUgaXMgcmVtb3ZlZFxyXG4gKiAgR2l2ZW4gXCIwLCAxLCAyIC8vIDwtIFRlc3RcIlxyXG4gKiAgUmV0dXJucyBcIjAsIDEsIDJcIlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyaXBDb21tZW50cyhsaW5lKSB7XHJcbiAgICBjb25zdCBpbmRleCA9IGxpbmUuaW5kZXhPZihcIi8vXCIpO1xyXG4gICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICByZXR1cm4gbGluZS5zdWJzdHIoMCwgaW5kZXgpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmU7XHJcbiAgICB9XHJcbn1cclxudmFyIExlZ2FjeUhpdE9iamVjdFR5cGU7XHJcbihmdW5jdGlvbiAoTGVnYWN5SGl0T2JqZWN0VHlwZSkge1xyXG4gICAgTGVnYWN5SGl0T2JqZWN0VHlwZVtMZWdhY3lIaXRPYmplY3RUeXBlW1wiQ2lyY2xlXCJdID0gMV0gPSBcIkNpcmNsZVwiO1xyXG4gICAgTGVnYWN5SGl0T2JqZWN0VHlwZVtMZWdhY3lIaXRPYmplY3RUeXBlW1wiU2xpZGVyXCJdID0gMl0gPSBcIlNsaWRlclwiO1xyXG4gICAgTGVnYWN5SGl0T2JqZWN0VHlwZVtMZWdhY3lIaXRPYmplY3RUeXBlW1wiTmV3Q29tYm9cIl0gPSA0XSA9IFwiTmV3Q29tYm9cIjtcclxuICAgIExlZ2FjeUhpdE9iamVjdFR5cGVbTGVnYWN5SGl0T2JqZWN0VHlwZVtcIlNwaW5uZXJcIl0gPSA4XSA9IFwiU3Bpbm5lclwiO1xyXG4gICAgTGVnYWN5SGl0T2JqZWN0VHlwZVtMZWdhY3lIaXRPYmplY3RUeXBlW1wiQ29tYm9Ta2lwXCJdID0gMTEyXSA9IFwiQ29tYm9Ta2lwXCI7XHJcbiAgICBMZWdhY3lIaXRPYmplY3RUeXBlW0xlZ2FjeUhpdE9iamVjdFR5cGVbXCJIb2xkXCJdID0gMTI4XSA9IFwiSG9sZFwiO1xyXG59KShMZWdhY3lIaXRPYmplY3RUeXBlIHx8IChMZWdhY3lIaXRPYmplY3RUeXBlID0ge30pKTtcclxudmFyIExlZ2FjeUhpdFNvdW5kVHlwZTtcclxuKGZ1bmN0aW9uIChMZWdhY3lIaXRTb3VuZFR5cGUpIHtcclxuICAgIExlZ2FjeUhpdFNvdW5kVHlwZVtMZWdhY3lIaXRTb3VuZFR5cGVbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcclxuICAgIExlZ2FjeUhpdFNvdW5kVHlwZVtMZWdhY3lIaXRTb3VuZFR5cGVbXCJOb3JtYWxcIl0gPSAxXSA9IFwiTm9ybWFsXCI7XHJcbiAgICBMZWdhY3lIaXRTb3VuZFR5cGVbTGVnYWN5SGl0U291bmRUeXBlW1wiV2hpc3RsZVwiXSA9IDJdID0gXCJXaGlzdGxlXCI7XHJcbiAgICBMZWdhY3lIaXRTb3VuZFR5cGVbTGVnYWN5SGl0U291bmRUeXBlW1wiRmluaXNoXCJdID0gNF0gPSBcIkZpbmlzaFwiO1xyXG4gICAgTGVnYWN5SGl0U291bmRUeXBlW0xlZ2FjeUhpdFNvdW5kVHlwZVtcIkNsYXBcIl0gPSA4XSA9IFwiQ2xhcFwiO1xyXG59KShMZWdhY3lIaXRTb3VuZFR5cGUgfHwgKExlZ2FjeUhpdFNvdW5kVHlwZSA9IHt9KSk7XHJcbmNsYXNzIExlZ2FjeUhpdFNhbXBsZUluZm8gZXh0ZW5kcyBIaXRTYW1wbGVJbmZvXzEuSGl0U2FtcGxlSW5mbyB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBiYW5rID0gbnVsbCwgdm9sdW1lID0gMCwgY3VzdG9tU2FtcGxlQmFuayA9IDAsIGlzTGF5ZXJlZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIobmFtZSwgYmFuaywgY3VzdG9tU2FtcGxlQmFuayA+PSAyID8gY3VzdG9tU2FtcGxlQmFuay50b1N0cmluZygpIDogbnVsbCwgdm9sdW1lKTtcclxuICAgICAgICB0aGlzLmlzTGF5ZXJlZCA9IGlzTGF5ZXJlZDtcclxuICAgICAgICB0aGlzLmN1c3RvbVNhbXBsZUJhbmsgPSBjdXN0b21TYW1wbGVCYW5rO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuTGVnYWN5SGl0U2FtcGxlSW5mbyA9IExlZ2FjeUhpdFNhbXBsZUluZm87XHJcbmZ1bmN0aW9uIGhhc0ZsYWcoYml0bWFzaywgZmxhZykge1xyXG4gICAgcmV0dXJuIChiaXRtYXNrICYgZmxhZykgIT09IDA7XHJcbn1cclxuZnVuY3Rpb24gc3BsaXRLZXlWYWwobGluZSwgc2VwYXJhdG9yID0gXCI6XCIpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICBjb25zdCBzcGxpdCA9IGxpbmUuc3BsaXQoc2VwYXJhdG9yLCAyKTtcclxuICAgIHJldHVybiBbc3BsaXRbMF0udHJpbSgpLCAoX2IgPSAoX2EgPSBzcGxpdFsxXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRyaW0oKSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogXCJcIl07XHJcbn1cclxuZnVuY3Rpb24gY29udmVydFBhdGhUeXBlKHZhbHVlKSB7XHJcbiAgICBzd2l0Y2ggKHZhbHVlWzBdKSB7XHJcbiAgICAgICAgLy8gVE9ETzogPz8/XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICBjYXNlIFwiQ1wiOlxyXG4gICAgICAgICAgICByZXR1cm4gUGF0aFR5cGVfMS5QYXRoVHlwZS5DYXRtdWxsO1xyXG4gICAgICAgIGNhc2UgXCJCXCI6XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRoVHlwZV8xLlBhdGhUeXBlLkJlemllcjtcclxuICAgICAgICBjYXNlIFwiTFwiOlxyXG4gICAgICAgICAgICByZXR1cm4gUGF0aFR5cGVfMS5QYXRoVHlwZS5MaW5lYXI7XHJcbiAgICAgICAgY2FzZSBcIlBcIjpcclxuICAgICAgICAgICAgcmV0dXJuIFBhdGhUeXBlXzEuUGF0aFR5cGUuUGVyZmVjdEN1cnZlO1xyXG4gICAgfVxyXG59XHJcbi8vID8/P1xyXG5jbGFzcyBMZWdhY3lEaWZmaWN1bHR5Q29udHJvbFBvaW50IGV4dGVuZHMgRGlmZmljdWx0eUNvbnRyb2xQb2ludF8xLkRpZmZpY3VsdHlDb250cm9sUG9pbnQge1xyXG4gICAgY29uc3RydWN0b3IoYmVhdExlbmd0aCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgLy8gTm90ZTogSW4gc3RhYmxlLCB0aGUgZGl2aXNpb24gb2NjdXJzIG9uIGZsb2F0cywgYnV0IHdpdGggY29tcGlsZXIgb3B0aW1pc2F0aW9ucyB0dXJuZWQgb24gYWN0dWFsbHkgc2VlbXMgdG9cclxuICAgICAgICAvLyBvY2N1ciBvbiBkb3VibGVzIHZpYSBzb21lIC5ORVQgYmxhY2sgbWFnaWMgKHBvc3NpYmx5IGlubGluaW5nPykuXHJcbiAgICAgICAgdGhpcy5icG1NdWx0aXBsaWVyID0gYmVhdExlbmd0aCA8IDAgPyAoMCwgaW5kZXhfMS5jbGFtcCkoLWJlYXRMZW5ndGgsIDEwLCAxMDAwMCkgLyAxMDAuMCA6IDE7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY29udmVydFBhdGhTdHJpbmcocG9pbnRTdHJpbmcsIG9mZnNldCkge1xyXG4gICAgY29uc3QgcG9pbnRTcGxpdCA9IHBvaW50U3RyaW5nLnNwbGl0KFwifFwiKTtcclxuICAgIGNvbnN0IGNvbnRyb2xQb2ludHMgPSBbXTtcclxuICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgIGxldCBlbmRJbmRleCA9IDA7XHJcbiAgICBsZXQgZmlyc3QgPSB0cnVlO1xyXG4gICAgd2hpbGUgKCsrZW5kSW5kZXggPCBwb2ludFNwbGl0Lmxlbmd0aCkge1xyXG4gICAgICAgIC8vIEtlZXAgaW5jcmVtZW50aW5nIGVuZEluZGV4IHdoaWxlIGl0J3Mgbm90IHRoZSBzdGFydCBvZiBhIG5ldyBzZWdtZW50IChpbmRpY2F0ZWQgYnkgaGF2aW5nIGEgdHlwZSBkZXNjcmlwdG9yIG9mXHJcbiAgICAgICAgLy8gbGVuZ3RoIDEpLlxyXG4gICAgICAgIGlmIChwb2ludFNwbGl0W2VuZEluZGV4XS5sZW5ndGggPiAxKVxyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAvLyBNdWx0aS1zZWdtZW50ZWQgc2xpZGVycyBET04nVCBjb250YWluIHRoZSBlbmQgcG9pbnQgYXMgcGFydCBvZiB0aGUgY3VycmVudCBzZWdtZW50IGFzIGl0J3MgYXNzdW1lZCB0byBiZSB0aGVcclxuICAgICAgICAvLyBzdGFydCBvZiB0aGUgbmV4dCBzZWdtZW50LiBUaGUgc3RhcnQgb2YgdGhlIG5leHQgc2VnbWVudCBpcyB0aGUgaW5kZXggYWZ0ZXIgdGhlIHR5cGUgZGVzY3JpcHRvci5cclxuICAgICAgICBjb25zdCBlbmRQb2ludCA9IGVuZEluZGV4IDwgcG9pbnRTcGxpdC5sZW5ndGggLSAxID8gcG9pbnRTcGxpdFtlbmRJbmRleCArIDFdIDogbnVsbDtcclxuICAgICAgICBjb25zdCBwb2ludHMgPSBjb252ZXJ0UG9pbnRzKHBvaW50U3BsaXQuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpLCBlbmRQb2ludCwgZmlyc3QsIG9mZnNldCk7XHJcbiAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKC4uLnBvaW50cyk7XHJcbiAgICAgICAgc3RhcnRJbmRleCA9IGVuZEluZGV4O1xyXG4gICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoZW5kSW5kZXggPiBzdGFydEluZGV4KSB7XHJcbiAgICAgICAgY29udHJvbFBvaW50cy5wdXNoKC4uLmNvbnZlcnRQb2ludHMocG9pbnRTcGxpdC5zbGljZShzdGFydEluZGV4LCBlbmRJbmRleCksIG51bGwsIGZpcnN0LCBvZmZzZXQpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjb250cm9sUG9pbnRzO1xyXG59XHJcbi8vIHJlYWRzIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBmcm9tIHRoZSBnaXZlbiBgc3RhcnRQb3NgXHJcbmZ1bmN0aW9uIHJlYWRQb2ludCh2YWx1ZSwgc3RhcnRQb3MsIHBvaW50cywgaW5kZXgpIHtcclxuICAgIGNvbnN0IFt4LCB5XSA9IHZhbHVlLnNwbGl0KFwiOlwiKS5tYXAocGFyc2VGbG9hdCk7XHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IGluZGV4XzEuVmVjMi5zdWIoeyB4LCB5IH0sIHN0YXJ0UG9zKTtcclxuICAgIHBvaW50c1tpbmRleF0gPSB7IG9mZnNldDogcG9zaXRpb24gfTtcclxufVxyXG5mdW5jdGlvbiBpc0xpbmVhcihwKSB7XHJcbiAgICByZXR1cm4gKDAsIGluZGV4XzEuZmxvYXRFcXVhbCkoMCwgKHBbMV0ueSAtIHBbMF0ueSkgKiAocFsyXS54IC0gcFswXS54KSAtIChwWzFdLnggLSBwWzBdLngpICogKHBbMl0ueSAtIHBbMF0ueSkpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbnZlcnRQb2ludHMocG9pbnRzLCBlbmRQb2ludCwgZmlyc3QsIG9mZnNldCkge1xyXG4gICAgbGV0IHR5cGUgPSBjb252ZXJ0UGF0aFR5cGUocG9pbnRzWzBdKTtcclxuICAgIGNvbnN0IHJlYWRPZmZzZXQgPSBmaXJzdCA/IDEgOiAwO1xyXG4gICAgY29uc3QgcmVhZGFibGVQb2ludHMgPSBwb2ludHMubGVuZ3RoIC0gMTtcclxuICAgIGNvbnN0IGVuZFBvaW50TGVuZ3RoID0gZW5kUG9pbnQgIT09IG51bGwgPyAxIDogMDtcclxuICAgIGNvbnN0IHZlcnRpY2VzID0gbmV3IEFycmF5KHJlYWRPZmZzZXQgKyByZWFkYWJsZVBvaW50cyArIGVuZFBvaW50TGVuZ3RoKTtcclxuICAgIC8vIEZpbGwgYW55IG5vbi1yZWFkIHBvaW50c1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWFkT2Zmc2V0OyBpKyspXHJcbiAgICAgICAgdmVydGljZXNbaV0gPSB7IG9mZnNldDogaW5kZXhfMS5WZWMyLlplcm8gfTtcclxuICAgIC8vIFBhcnNlIGludG8gY29udHJvbCBwb2ludHMuXHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHBvaW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICByZWFkUG9pbnQocG9pbnRzW2ldLCBvZmZzZXQsIHZlcnRpY2VzLCByZWFkT2Zmc2V0ICsgaSAtIDEpO1xyXG4gICAgaWYgKGVuZFBvaW50ICE9PSBudWxsKVxyXG4gICAgICAgIHJlYWRQb2ludChlbmRQb2ludCwgb2Zmc2V0LCB2ZXJ0aWNlcywgdmVydGljZXMubGVuZ3RoIC0gMSk7XHJcbiAgICBpZiAodHlwZSA9PT0gUGF0aFR5cGVfMS5QYXRoVHlwZS5QZXJmZWN0Q3VydmUpIHtcclxuICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoICE9PSAzKVxyXG4gICAgICAgICAgICB0eXBlID0gUGF0aFR5cGVfMS5QYXRoVHlwZS5CZXppZXI7XHJcbiAgICAgICAgZWxzZSBpZiAoaXNMaW5lYXIodmVydGljZXMubWFwKCh2KSA9PiB2Lm9mZnNldCkpKVxyXG4gICAgICAgICAgICB0eXBlID0gUGF0aFR5cGVfMS5QYXRoVHlwZS5MaW5lYXI7XHJcbiAgICB9XHJcbiAgICB2ZXJ0aWNlc1swXS50eXBlID0gdHlwZTtcclxuICAgIGxldCBzdGFydEluZGV4ID0gMDtcclxuICAgIGxldCBlbmRJbmRleCA9IDA7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgIC8vIHRoaXMgaXMganVzdCBzb21lIGxvZ2ljIHRvIG5vdCBoYXZlIGR1cGxpY2F0ZWQgcG9zaXRpb25zIGF0IHRoZSBlbmRcclxuICAgIHdoaWxlICgrK2VuZEluZGV4IDwgdmVydGljZXMubGVuZ3RoIC0gZW5kUG9pbnRMZW5ndGgpIHtcclxuICAgICAgICBpZiAoIWluZGV4XzEuVmVjMi5lcXVhbCh2ZXJ0aWNlc1tlbmRJbmRleF0ub2Zmc2V0LCB2ZXJ0aWNlc1tlbmRJbmRleCAtIDFdLm9mZnNldCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoZSBsYXN0IGNvbnRyb2wgcG9pbnQgb2YgZWFjaCBzZWdtZW50IGlzIG5vdCBhbGxvd2VkIHRvIHN0YXJ0IGEgbmV3IGltcGxpY2l0IHNlZ21lbnQuXHJcbiAgICAgICAgaWYgKGVuZEluZGV4ID09PSB2ZXJ0aWNlcy5sZW5ndGggLSBlbmRQb2ludExlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZlcnRpY2VzW2VuZEluZGV4IC0gMV0udHlwZSA9IHR5cGU7XHJcbiAgICAgICAgcmVzdWx0LnB1c2goLi4udmVydGljZXMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpKTtcclxuICAgICAgICBzdGFydEluZGV4ID0gZW5kSW5kZXggKyAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGVuZEluZGV4ID4gc3RhcnRJbmRleCkge1xyXG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLnZlcnRpY2VzLnNsaWNlKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIHBhcnNlT3N1SGl0T2JqZWN0U2V0dGluZyhsaW5lKSB7XHJcbiAgICBjb25zdCBzcGxpdCA9IGxpbmUuc3BsaXQoXCIsXCIpO1xyXG4gICAgLy8gVE9ETzogVGhpcyBoYXMgTUFYX0NPT1JESU5BVEVfVkFMVUUgZm9yIHNhbml0eSBjaGVja1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSB7IHg6IHBhcnNlRmxvYXQoc3BsaXRbMF0pLCB5OiBwYXJzZUZsb2F0KHNwbGl0WzFdKSB9O1xyXG4gICAgLy8gVE9ETzogVGhpcyBoYXMgK29mZnNldCAoMjRtcykgZm9yIGJlYXRtYXBWZXJzaW9uIDw9IDQgKGluY2x1ZGUgaW4gQmVhdG1hcEJ1aWxkZXIpXHJcbiAgICBjb25zdCBvZmZzZXQgPSAwOyAvL1xyXG4gICAgY29uc3QgdGltZSA9IHBhcnNlRmxvYXQoc3BsaXRbMl0pICsgb2Zmc2V0O1xyXG4gICAgY29uc3QgX3R5cGUgPSBwYXJzZUludChzcGxpdFszXSk7IC8vIGFsc28gaGFzIGNvbWJvIGluZm9ybWF0aW9uXHJcbiAgICBjb25zdCBjb21ib1NraXAgPSAoX3R5cGUgJiBMZWdhY3lIaXRPYmplY3RUeXBlLkNvbWJvU2tpcCkgPj4gNDtcclxuICAgIGNvbnN0IG5ld0NvbWJvID0gaGFzRmxhZyhfdHlwZSwgTGVnYWN5SGl0T2JqZWN0VHlwZS5OZXdDb21ibyk7XHJcbiAgICBjb25zdCB0eXBlQml0bWFzayA9IF90eXBlICYgfkxlZ2FjeUhpdE9iamVjdFR5cGUuQ29tYm9Ta2lwICYgfkxlZ2FjeUhpdE9iamVjdFR5cGUuTmV3Q29tYm87XHJcbiAgICAvLyBUT0RPOiBzYW1wbGVzXHJcbiAgICBjb25zdCBzb3VuZFR5cGUgPSBwYXJzZUludChzcGxpdFs0XSk7XHJcbiAgICBjb25zdCBiYW5rSW5mbyA9IHtcclxuICAgICAgICBhZGQ6IFwiXCIsXHJcbiAgICAgICAgY3VzdG9tU2FtcGxlQmFuazogMCxcclxuICAgICAgICBmaWxlTmFtZTogXCJcIixcclxuICAgICAgICBub3JtYWw6IFwiXCIsXHJcbiAgICAgICAgdm9sdW1lOiAwLFxyXG4gICAgfTtcclxuICAgIGlmIChoYXNGbGFnKHR5cGVCaXRtYXNrLCBMZWdhY3lIaXRPYmplY3RUeXBlLkNpcmNsZSkpIHtcclxuICAgICAgICAvLyBUT0RPOiBDdXN0b21TYW1wbGVCYW5rcyBub3Qgc3VwcG9ydGVkIHlldFxyXG4gICAgICAgIC8vIGlmIChzcGxpdC5sZW5ndGggPiA1KSByZWFkQ3VzdG9tU2FtcGxlQmFua3Moc3BsaXRbNV0sIGJhbmtJbmZvKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0eXBlOiBcIkhJVF9DSVJDTEVcIixcclxuICAgICAgICAgICAgdGltZSxcclxuICAgICAgICAgICAgcG9zaXRpb24sXHJcbiAgICAgICAgICAgIG5ld0NvbWJvLFxyXG4gICAgICAgICAgICBjb21ib1NraXAsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGlmIChoYXNGbGFnKHR5cGVCaXRtYXNrLCBMZWdhY3lIaXRPYmplY3RUeXBlLlNsaWRlcikpIHtcclxuICAgICAgICBsZXQgbGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHNsaWRlcyA9IHBhcnNlSW50KHNwbGl0WzZdKTtcclxuICAgICAgICBpZiAoc2xpZGVzID4gOTAwMClcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2xpZGVzIGNvdW50IGlzIHdheSB0b28gaGlnaFwiKTtcclxuICAgICAgICBjb25zdCByZXBlYXRDb3VudCA9IE1hdGgubWF4KDAsIHNsaWRlcyAtIDEpO1xyXG4gICAgICAgIGNvbnN0IHBhdGhQb2ludHMgPSBjb252ZXJ0UGF0aFN0cmluZyhzcGxpdFs1XSwgcG9zaXRpb24pO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPiA3KSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IE1hdGgubWF4KDAsIHBhcnNlRmxvYXQoc3BsaXRbN10pKTtcclxuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdHlwZTogXCJTTElERVJcIixcclxuICAgICAgICAgICAgdGltZSxcclxuICAgICAgICAgICAgcG9zaXRpb24sXHJcbiAgICAgICAgICAgIHJlcGVhdENvdW50LFxyXG4gICAgICAgICAgICBjb21ib1NraXAsXHJcbiAgICAgICAgICAgIG5ld0NvbWJvLFxyXG4gICAgICAgICAgICBwYXRoUG9pbnRzLFxyXG4gICAgICAgICAgICBsZW5ndGgsXHJcbiAgICAgICAgICAgIGxlZ2FjeUxhc3RUaWNrT2Zmc2V0OiBERUZBVUxUX0xFR0FDWV9USUNLX09GRlNFVCxcclxuICAgICAgICAgICAgdGlja0Rpc3RhbmNlTXVsdGlwbGllcjogMSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKGhhc0ZsYWcodHlwZUJpdG1hc2ssIExlZ2FjeUhpdE9iamVjdFR5cGUuU3Bpbm5lcikpIHtcclxuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE1hdGgubWF4KDAsIHBhcnNlRmxvYXQoc3BsaXRbNV0pICsgb2Zmc2V0IC0gdGltZSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdHlwZTogXCJTUElOTkVSXCIsXHJcbiAgICAgICAgICAgIGNvbWJvU2tpcCxcclxuICAgICAgICAgICAgbmV3Q29tYm8sXHJcbiAgICAgICAgICAgIHRpbWUsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uLFxyXG4gICAgICAgICAgICBkdXJhdGlvbixcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgdGhyb3cgRXJyb3IoXCJVbmtub3duIHR5cGVcIik7XHJcbn1cclxuZXhwb3J0cy5wYXJzZU9zdUhpdE9iamVjdFNldHRpbmcgPSBwYXJzZU9zdUhpdE9iamVjdFNldHRpbmc7XHJcbmNvbnN0IGRlZmF1bHRCbHVlcHJpbnRJbmZvID0gKCkgPT4gKHtcclxuICAgIGF1ZGlvTGVhZEluOiAwLFxyXG4gICAgYmVhdG1hcFZlcnNpb246IDAsXHJcbiAgICBzdGFja0xlbmllbmN5OiAwLjcsXHJcbiAgICBvbmxpbmVCZWF0bWFwSWQ6IHVuZGVmaW5lZCxcclxuICAgIG1ldGFkYXRhOiB7XHJcbiAgICAgICAgYXJ0aXN0OiBcIlwiLFxyXG4gICAgICAgIHRpdGxlOiBcIlwiLFxyXG4gICAgICAgIHRpdGxlVW5pY29kZTogXCJcIixcclxuICAgICAgICBhdWRpb0ZpbGU6IFwiXCIsXHJcbiAgICAgICAgYXJ0aXN0VW5pY29kZTogXCJcIixcclxuICAgICAgICBzb3VyY2U6IFwiXCIsXHJcbiAgICAgICAgdGFnczogXCJcIixcclxuICAgICAgICBwcmV2aWV3VGltZTogMCxcclxuICAgICAgICBiYWNrZ3JvdW5kRmlsZTogXCJcIixcclxuICAgICAgICBiYWNrZ3JvdW5kT2Zmc2V0OiB7IHg6IDAsIHk6IDAgfSxcclxuICAgIH0sXHJcbn0pO1xyXG5jb25zdCBkZWZhdWx0Qmx1ZXByaW50RGlmZmljdWx0eSA9ICgpID0+ICh7XHJcbiAgICBjaXJjbGVTaXplOiA1LFxyXG4gICAgZHJhaW5SYXRlOiA1LFxyXG4gICAgb3ZlcmFsbERpZmZpY3VsdHk6IDUsXHJcbiAgICAvLyBhcHByb2FjaFJhdGUgb21pdHRlZCBiZWNhdXNlIGl0IGRlcGVuZHMgb24gT0RcclxuICAgIHNsaWRlck11bHRpcGxpZXI6IDEsXHJcbiAgICBzbGlkZXJUaWNrUmF0ZTogMSxcclxufSk7XHJcbmNsYXNzIEJsdWVwcmludFBhcnNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhLCBvcHRpb25zID0gZGVmYXVsdE9wdGlvbnMpIHtcclxuICAgICAgICAvLyBEaXNhYmxlIGZvciB0ZXN0aW5nIHB1cnBvc2VzXHJcbiAgICAgICAgdGhpcy5hcHBseU9mZnNldHMgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFNhbXBsZVZvbHVtZSA9IDEwMDtcclxuICAgICAgICB0aGlzLmhpdE9iamVjdFNldHRpbmdzID0gW107XHJcbiAgICAgICAgdGhpcy5jb250cm9sUG9pbnRJbmZvID0gbmV3IENvbnRyb2xQb2ludEluZm9fMS5Db250cm9sUG9pbnRJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0U2FtcGxlQmFuayA9IExlZ2FjeVNhbXBsZUJhbmtfMS5MZWdhY3lTYW1wbGVCYW5rLk5vbmU7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ0NvbnRyb2xQb2ludFR5cGVzID0ge307XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50c1RpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgLy8gdGhpcy5ibHVlcHJpbnQgPSBuZXcgQmx1ZXByaW50KCk7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U2VjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5mb3JtYXRWZXJzaW9uID0gb3B0aW9ucy5mb3JtYXRWZXJzaW9uO1xyXG4gICAgICAgIHRoaXMuc2VjdGlvbnNUb1JlYWQgPSBvcHRpb25zLnNlY3Rpb25zVG9SZWFkO1xyXG4gICAgICAgIHRoaXMuYmx1ZXByaW50SW5mbyA9IGRlZmF1bHRCbHVlcHJpbnRJbmZvKCk7XHJcbiAgICAgICAgdGhpcy5ibHVlcHJpbnREaWZmaWN1bHR5ID0gZGVmYXVsdEJsdWVwcmludERpZmZpY3VsdHkoKTtcclxuICAgICAgICB0aGlzLnNlY3Rpb25zRmluaXNoZWRSZWFkaW5nID0gW107XHJcbiAgICAgICAgLy8gQmVhdG1hcFZlcnNpb24gNCBhbmQgbG93ZXIgaGFkIGFuIGluY29ycmVjdCBvZmZzZXQgKHN0YWJsZSBoYXMgdGhpcyBzZXQgYXMgMjRtcyBvZmYpXHJcbiAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmZvcm1hdFZlcnNpb24gPD0gNCA/IDI0IDogMDtcclxuICAgICAgICAvLyB0aGlzLmhpdE9iamVjdFBhcnNlciA9IG5ldyBPc3VIaXRPYmplY3RQYXJzZXIodGhpcy5vZmZzZXQsIHRoaXMuZm9ybWF0VmVyc2lvbik7XHJcbiAgICB9XHJcbiAgICBpc0ZpbmlzaGVkUmVhZGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZWN0aW9uc1RvUmVhZCA8PSB0aGlzLnNlY3Rpb25zRmluaXNoZWRSZWFkaW5nO1xyXG4gICAgfVxyXG4gICAgcGFyc2VMaW5lKGxpbmUpIHtcclxuICAgICAgICBjb25zdCBzdHJpcHBlZExpbmUgPSBzdHJpcENvbW1lbnRzKGxpbmUpO1xyXG4gICAgICAgIC8vIHN0cmlwcGVkTGluZSBjYW4gYmUgZW1wdHlcclxuICAgICAgICBpZiAoIXN0cmlwcGVkTGluZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vIFBhcnNlIHRoZSBmaWxlIGZvcm1hdFxyXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50U2VjdGlvbiAmJiBzdHJpcHBlZExpbmUuaW5jbHVkZXMoXCJvc3UgZmlsZSBmb3JtYXQgdlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLmJsdWVwcmludEluZm8uYmVhdG1hcFZlcnNpb24gPSBwYXJzZUludChzdHJpcHBlZExpbmUuc3BsaXQoXCJvc3UgZmlsZSBmb3JtYXQgdlwiKVsxXSwgMTApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChTRUNUSU9OX1JFR0VYLnRlc3Qoc3RyaXBwZWRMaW5lKSkge1xyXG4gICAgICAgICAgICAvLyBXZSBvbmx5IGFkZCBzZWN0aW9ucyB3ZSB3YW50IHRvIHJlYWQgdG8gdGhlIGxpc3RcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlY3Rpb24gIT09IG51bGwgJiYgdGhpcy5zZWN0aW9uc1RvUmVhZC5pbmNsdWRlcyh0aGlzLmN1cnJlbnRTZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uc0ZpbmlzaGVkUmVhZGluZy5wdXNoKHRoaXMuY3VycmVudFNlY3Rpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb24gPSBTRUNUSU9OX1JFR0VYLmV4ZWMoc3RyaXBwZWRMaW5lKVsxXTtcclxuICAgICAgICAgICAgLy8gSXQgd2lsbCBzdG9wIHdoZW4gd2UgYXJlIGRvbmUgd2l0aCByZWFkaW5nIGFsbCByZXF1aXJlZCBzZWN0aW9uc1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFdlIHNraXAgcmVhZGluZyBzZWN0aW9ucyB3ZSBkb24ndCB3YW50IHRvIHJlYWQgZm9yIG9wdGltaXphdGlvblxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTZWN0aW9uID09PSBudWxsIHx8IHRoaXMuc2VjdGlvbnNUb1JlYWQuaW5kZXhPZih0aGlzLmN1cnJlbnRTZWN0aW9uKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFNlY3Rpb24pIHtcclxuICAgICAgICAgICAgY2FzZSBcIkdlbmVyYWxcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlR2VuZXJhbChzdHJpcHBlZExpbmUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJNZXRhZGF0YVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVNZXRhZGF0YShzdHJpcHBlZExpbmUpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJEaWZmaWN1bHR5XCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZURpZmZpY3VsdHkoc3RyaXBwZWRMaW5lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiSGl0T2JqZWN0c1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVIaXRPYmplY3RzKHN0cmlwcGVkTGluZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlRpbWluZ1BvaW50c1wiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUaW1pbmdQb2ludHMoc3RyaXBwZWRMaW5lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAvLyBCZWxvdyBhcmUgbG93IHByaW9yaXR5IHNlY3Rpb25zXHJcbiAgICAgICAgICAgIGNhc2UgXCJFdmVudHNcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRXZlbnRzKHN0cmlwcGVkTGluZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkVkaXRvclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFZGl0b3Ioc3RyaXBwZWRMaW5lKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQ29sb3Vyc1wiOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGFuZGxlRXZlbnRzKGxpbmUpIHtcclxuICAgICAgICBjb25zdCBbZXZlbnRUeXBlLCBfc3RhcnRUaW1lLCAuLi5ldmVudFBhcmFtc10gPSBsaW5lLnNwbGl0KFwiLFwiKTtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50VHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiMFwiOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBbZmlsZW5hbWUsIHhPZmZzZXQsIHlPZmZzZXRdID0gZXZlbnRQYXJhbXM7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgcXVvdGVzIGNhbiBvcHRpb25hbGx5IGJlIGdpdmVuIC4uLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5ibHVlcHJpbnRJbmZvLm1ldGFkYXRhLmJhY2tncm91bmRGaWxlID0gZmlsZW5hbWUucmVwbGFjZSgvXCIvZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJsdWVwcmludEluZm8ubWV0YWRhdGEuYmFja2dyb3VuZE9mZnNldCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbiBjYXNlIHRoZXkgd2VyZW4ndCBwcm92aWRlZDogMCwwIHNob3VsZCBiZSB1c2VkIGFjY29yZGluZyB0byBkb2NzLlxyXG4gICAgICAgICAgICAgICAgICAgIHg6IHBhcnNlSW50KHhPZmZzZXQgIT09IG51bGwgJiYgeE9mZnNldCAhPT0gdm9pZCAwID8geE9mZnNldCA6IFwiMFwiKSxcclxuICAgICAgICAgICAgICAgICAgICB5OiBwYXJzZUludCh5T2Zmc2V0ICE9PSBudWxsICYmIHlPZmZzZXQgIT09IHZvaWQgMCA/IHlPZmZzZXQgOiBcIjBcIiksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFZpZGVvcyBhbmQgU3Rvcnlib2FyZCBpZ25vcmVkIGZvciBmaXJzdC4uLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGhhbmRsZUdlbmVyYWwobGluZSkge1xyXG4gICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHNwbGl0S2V5VmFsKGxpbmUpO1xyXG4gICAgICAgIGNvbnN0IGJsdWVwcmludEluZm8gPSB0aGlzLmJsdWVwcmludEluZm87XHJcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSBibHVlcHJpbnRJbmZvLm1ldGFkYXRhO1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBdWRpb0ZpbGVuYW1lXCI6XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5hdWRpb0ZpbGUgPSB2YWx1ZTsgLy8gVE9ETzogdG9TdGFuZGFyZGlzZWRQYXRoKClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQXVkaW9MZWFkSW5cIjpcclxuICAgICAgICAgICAgICAgIGJsdWVwcmludEluZm8uYXVkaW9MZWFkSW4gPSBwYXJzZUludCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlByZXZpZXdUaW1lXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkNvdW50ZG93blwiOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJTYW1wbGVTZXRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdFNhbXBsZUJhbmsgPSBwYXJzZUludCh2YWx1ZSk7IC8vIGhvcGVmdWxseSBpdCBpcyBvbmUgb2YgdGhvc2UgNFxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJTYW1wbGVWb2x1bWVcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiU3RhY2tMZW5pZW5jeVwiOlxyXG4gICAgICAgICAgICAgICAgYmx1ZXByaW50SW5mby5zdGFja0xlbmllbmN5ID0gTWF0aC5mcm91bmQocGFyc2VGbG9hdCh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJNb2RlXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkxldHRlcmJveEluQnJlYWtzXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlNwZWNpYWxTdHlsZVwiOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJXaWRlc2NyZWVuU3Rvcnlib2FyZFwiOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJFcGlsZXBzeVdhcm5pbmdcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGhhbmRsZUVkaXRvcihsaW5lKSB7XHJcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gc3BsaXRLZXlWYWwobGluZSk7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBcIkJvb2ttYXJrc1wiOlxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJEaXN0YW5jZVNwYWNpbmdcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQmVhdERpdmlzb3JcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiR3JpZFNpemVcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiVGltZWxpbmVab29tXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoYW5kbGVNZXRhZGF0YShsaW5lKSB7XHJcbiAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gc3BsaXRLZXlWYWwobGluZSk7XHJcbiAgICAgICAgY29uc3QgYmx1ZXByaW50SW5mbyA9IHRoaXMuYmx1ZXByaW50SW5mbztcclxuICAgICAgICBjb25zdCBtZXRhRGF0YSA9IGJsdWVwcmludEluZm8ubWV0YWRhdGE7XHJcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcclxuICAgICAgICAgICAgY2FzZSBcIlRpdGxlXCI6XHJcbiAgICAgICAgICAgICAgICBtZXRhRGF0YS50aXRsZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJUaXRsZVVuaWNvZGVcIjpcclxuICAgICAgICAgICAgICAgIG1ldGFEYXRhLnRpdGxlVW5pY29kZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnRpc3RcIjpcclxuICAgICAgICAgICAgICAgIG1ldGFEYXRhLmFydGlzdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJBcnRpc3RVbmljb2RlXCI6XHJcbiAgICAgICAgICAgICAgICBtZXRhRGF0YS5hcnRpc3RVbmljb2RlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkNyZWF0b3JcIjpcclxuICAgICAgICAgICAgICAgIC8vIG1ldGFEYXRhLmF1dGhvclN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJWZXJzaW9uXCI6XHJcbiAgICAgICAgICAgICAgICAvLyBiZWF0bWFwSW5mby5iZWF0bWFwVmVyc2lvbiA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJTb3VyY2VcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiVGFnc1wiOlxyXG4gICAgICAgICAgICAgICAgbWV0YURhdGEudGFncyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJCZWF0bWFwSWRcIjpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQmVhdG1hcFNldElEXCI6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoYW5kbGVEaWZmaWN1bHR5KGxpbmUpIHtcclxuICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBzcGxpdEtleVZhbChsaW5lKTtcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5ID0gdGhpcy5ibHVlcHJpbnREaWZmaWN1bHR5O1xyXG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJIUERyYWluUmF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eS5kcmFpblJhdGUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiQ2lyY2xlU2l6ZVwiOlxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eS5jaXJjbGVTaXplID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIk92ZXJhbGxEaWZmaWN1bHR5XCI6XHJcbiAgICAgICAgICAgICAgICBkaWZmaWN1bHR5Lm92ZXJhbGxEaWZmaWN1bHR5ID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIkFwcHJvYWNoUmF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eS5hcHByb2FjaFJhdGUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiU2xpZGVyTXVsdGlwbGllclwiOlxyXG4gICAgICAgICAgICAgICAgZGlmZmljdWx0eS5zbGlkZXJNdWx0aXBsaWVyID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlNsaWRlclRpY2tSYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBkaWZmaWN1bHR5LnNsaWRlclRpY2tSYXRlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoYW5kbGVIaXRPYmplY3RzKGxpbmUpIHtcclxuICAgICAgICBjb25zdCBvYmogPSBwYXJzZU9zdUhpdE9iamVjdFNldHRpbmcobGluZSk7XHJcbiAgICAgICAgaWYgKG9iaikge1xyXG4gICAgICAgICAgICB0aGlzLmhpdE9iamVjdFNldHRpbmdzLnB1c2gob2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoYW5kbGVUaW1pbmdQb2ludHMobGluZSkge1xyXG4gICAgICAgIGNvbnN0IHNwbGl0ID0gbGluZS5zcGxpdChcIixcIik7XHJcbiAgICAgICAgY29uc3QgdGltZSA9IHRoaXMuZ2V0T2Zmc2V0VGltZShwYXJzZUZsb2F0KHNwbGl0WzBdLnRyaW0oKSkpO1xyXG4gICAgICAgIGNvbnN0IGJlYXRMZW5ndGggPSBwYXJzZUZsb2F0KHNwbGl0WzFdLnRyaW0oKSk7XHJcbiAgICAgICAgY29uc3Qgc3BlZWRNdWx0aXBsaWVyID0gYmVhdExlbmd0aCA8IDAgPyAxMDAuMCAvIC1iZWF0TGVuZ3RoIDogMTtcclxuICAgICAgICBsZXQgdGltZVNpZ25hdHVyZSA9IFRpbWVTaWduYXR1cmVzXzEuVGltZVNpZ25hdHVyZXMuU2ltcGxlUXVhZHJ1cGxlO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPj0gMylcclxuICAgICAgICAgICAgdGltZVNpZ25hdHVyZSA9IHNwbGl0WzJdWzBdID09PSBcIjBcIiA/IFRpbWVTaWduYXR1cmVzXzEuVGltZVNpZ25hdHVyZXMuU2ltcGxlUXVhZHJ1cGxlIDogcGFyc2VJbnQoc3BsaXRbMl0pO1xyXG4gICAgICAgIC8vIFRPRE86IHNhbXBsZVNldCBkZWZhdWx0XHJcbiAgICAgICAgbGV0IHNhbXBsZVNldCA9IHRoaXMuZGVmYXVsdFNhbXBsZUJhbms7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA+PSA0KVxyXG4gICAgICAgICAgICBzYW1wbGVTZXQgPSBwYXJzZUludChzcGxpdFszXSk7XHJcbiAgICAgICAgbGV0IGN1c3RvbVNhbXBsZUJhbmsgPSAwO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPj0gNSlcclxuICAgICAgICAgICAgY3VzdG9tU2FtcGxlQmFuayA9IHBhcnNlSW50KHNwbGl0WzRdKTtcclxuICAgICAgICBsZXQgc2FtcGxlVm9sdW1lID0gdGhpcy5kZWZhdWx0U2FtcGxlVm9sdW1lO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPj0gNilcclxuICAgICAgICAgICAgc2FtcGxlVm9sdW1lID0gcGFyc2VJbnQoc3BsaXRbNV0pO1xyXG4gICAgICAgIGxldCB0aW1pbmdDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIGlmIChzcGxpdC5sZW5ndGggPj0gNylcclxuICAgICAgICAgICAgdGltaW5nQ2hhbmdlID0gc3BsaXRbNl1bMF0gPT09IFwiMVwiO1xyXG4gICAgICAgIGxldCBraWFpTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBvbWl0Rmlyc3RCYXJTaWduYXR1cmUgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc3BsaXQubGVuZ3RoID49IDgpIHtcclxuICAgICAgICAgICAgY29uc3QgZWZmZWN0RmxhZ3MgPSBwYXJzZUludChzcGxpdFs3XSk7XHJcbiAgICAgICAgICAgIGtpYWlNb2RlID0gaGFzRmxhZyhlZmZlY3RGbGFncywgTGVnYWN5RWZmZWN0RmxhZ18xLkxlZ2FjeUVmZmVjdEZsYWdzLktpYWkpO1xyXG4gICAgICAgICAgICBvbWl0Rmlyc3RCYXJTaWduYXR1cmUgPSBoYXNGbGFnKGVmZmVjdEZsYWdzLCBMZWdhY3lFZmZlY3RGbGFnXzEuTGVnYWN5RWZmZWN0RmxhZ3MuT21pdEZpcnN0QmFyTGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgd2lsbCByZWNlaXZlIHRoZSBzdHJpbmcgdmFsdWUgZnJvbSB0aGUgZW51bVxyXG4gICAgICAgIGxldCBzdHJpbmdTYW1wbGVTZXQgPSBMZWdhY3lTYW1wbGVCYW5rXzEuTGVnYWN5U2FtcGxlQmFua1tzYW1wbGVTZXRdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKHN0cmluZ1NhbXBsZVNldCA9PT0gXCJub25lXCIpXHJcbiAgICAgICAgICAgIHN0cmluZ1NhbXBsZVNldCA9IFwibm9ybWFsXCI7XHJcbiAgICAgICAgaWYgKHRpbWluZ0NoYW5nZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250cm9sUG9pbnQgPSB0aGlzLmNyZWF0ZVRpbWluZ0NvbnRyb2xQb2ludCgpO1xyXG4gICAgICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGJlYXRMZW5ndGgpKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJOYU5cIik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xQb2ludC5iZWF0TGVuZ3RoID0gKDAsIGluZGV4XzEuY2xhbXApKGJlYXRMZW5ndGgsIE1JTl9CRUFUX0xFTkdUSCwgTUFYX0JFQVRfTEVOR1RIKTtcclxuICAgICAgICAgICAgY29udHJvbFBvaW50LnRpbWVTaWduYXR1cmUgPSB0aW1lU2lnbmF0dXJlO1xyXG4gICAgICAgICAgICB0aGlzLmFkZENvbnRyb2xQb2ludCh0aW1lLCBjb250cm9sUG9pbnQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnN0IHAgPSBuZXcgTGVnYWN5RGlmZmljdWx0eUNvbnRyb2xQb2ludChiZWF0TGVuZ3RoKTtcclxuICAgICAgICAgICAgcC5zcGVlZE11bHRpcGxpZXIgPSBiaW5kYWJsZU51bWJlck5ldyhzcGVlZE11bHRpcGxpZXIsIHsgbWluOiAwLjEsIG1heDogMTAsIHByZWNpc2lvbjogMC4wMSB9KTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDb250cm9sUG9pbnQodGltZSwgcCwgdGltaW5nQ2hhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gbmV3IEVmZmVjdENvbnRyb2xQb2ludF8xLkVmZmVjdENvbnRyb2xQb2ludCgpO1xyXG4gICAgICAgICAgICBwLmtpYWlNb2RlID0ga2lhaU1vZGU7XHJcbiAgICAgICAgICAgIHAub21pdEZpcnN0QmFyTGluZSA9IG9taXRGaXJzdEJhclNpZ25hdHVyZTtcclxuICAgICAgICAgICAgdGhpcy5hZGRDb250cm9sUG9pbnQodGltZSwgcCwgdGltaW5nQ2hhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zdCBwID0gbmV3IFNhbXBsZUNvbnRyb2xQb2ludF8xLlNhbXBsZUNvbnRyb2xQb2ludCgpO1xyXG4gICAgICAgICAgICBwLnNhbXBsZUJhbmsgPSBzdHJpbmdTYW1wbGVTZXQ7XHJcbiAgICAgICAgICAgIHAuc2FtcGxlVm9sdW1lID0gc2FtcGxlVm9sdW1lO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiAgTmVlZCBMZWdhY3lTYW1wbGVDb250cm9sUG9pbnQsIGJ1dCB0aGlzIGlzIHNvbWV0aGluZyB3ZSBzdXBwb3J0IGxhdGVyIG9uXHJcbiAgICAgICAgICAgIC8vIHAuY3VzdG9tU2FtcGxlQmFuayA9IGN1c3RvbVNhbXBsZUJhbms7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkQ29udHJvbFBvaW50KHRpbWUsIHAsIHRpbWluZ0NoYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY3JlYXRlVGltaW5nQ29udHJvbFBvaW50KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGltaW5nQ29udHJvbFBvaW50XzEuVGltaW5nQ29udHJvbFBvaW50KCk7XHJcbiAgICB9XHJcbiAgICBhZGRDb250cm9sUG9pbnQodGltZSwgcG9pbnQsIHRpbWluZ0NoYW5nZSkge1xyXG4gICAgICAgIGlmICghKDAsIGluZGV4XzEuZmxvYXRFcXVhbCkodGltZSwgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50c1RpbWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmx1c2hQZW5kaW5nUG9pbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aW1pbmdDaGFuZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50cy5zcGxpY2UoMCwgMCwgcG9pbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50cy5wdXNoKHBvaW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50c1RpbWUgPSB0aW1lO1xyXG4gICAgfVxyXG4gICAgZmx1c2hQZW5kaW5nUG9pbnRzKCkge1xyXG4gICAgICAgIC8vIENoYW5nZXMgZnJvbSBub24tdGltaW5nLXBvaW50cyBhcmUgYWRkZWQgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCAoc2VlIGFkZENvbnRyb2xQb2ludCgpKSBhbmQgc2hvdWxkIG92ZXJyaWRlIGFueVxyXG4gICAgICAgIC8vIGNoYW5nZXMgZnJvbSB0aW1pbmctcG9pbnRzIChhZGRlZCB0byB0aGUgc3RhcnQgb2YgdGhlIGxpc3QpLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnBlbmRpbmdDb250cm9sUG9pbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnBlbmRpbmdDb250cm9sUG9pbnRzW2ldLnR5cGU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBlbmRpbmdDb250cm9sUG9pbnRUeXBlc1t0eXBlXSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdDb250cm9sUG9pbnRUeXBlc1t0eXBlXSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY29udHJvbFBvaW50SW5mby5hZGQodGhpcy5wZW5kaW5nQ29udHJvbFBvaW50c1RpbWUsIHRoaXMucGVuZGluZ0NvbnRyb2xQb2ludHNbaV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdDb250cm9sUG9pbnRzID0gW107XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nQ29udHJvbFBvaW50VHlwZXMgPSB7fTtcclxuICAgIH1cclxuICAgIGdldE9mZnNldFRpbWUodGltZSkge1xyXG4gICAgICAgIHJldHVybiB0aW1lICsgKHRoaXMuYXBwbHlPZmZzZXRzID8gdGhpcy5vZmZzZXQgOiAwKTtcclxuICAgIH1cclxuICAgIHBhcnNlKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0YSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZGF0YSBnaXZlblwiKTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IHRoaXMuZGF0YS5zcGxpdChcIlxcblwiKS5tYXAoKHYpID0+IHYudHJpbSgpKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VMaW5lKGxpbmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwYXJzZSBsaW5lICR7bGluZX0gZHVlIHRvOiBgLCBlcnIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRmluaXNoZWRSZWFkaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmx1c2hQZW5kaW5nUG9pbnRzKCk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgYmx1ZXByaW50SW5mbzogdGhpcy5ibHVlcHJpbnRJbmZvLFxyXG4gICAgICAgICAgICBkZWZhdWx0RGlmZmljdWx0eTogT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmJsdWVwcmludERpZmZpY3VsdHkpLCB7IFxyXG4gICAgICAgICAgICAgICAgLy8gUmVhc29uaW5nOlxyXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BweS9vc3UvYmxvYi9iMWZjYjg0MGE5ZmY0ZDg2NmFhYzI2MmFjZTdmNTRmYTg4YjVlMGNlL29zdS5HYW1lL0JlYXRtYXBzL0JlYXRtYXBEaWZmaWN1bHR5LmNzI0wzNVxyXG4gICAgICAgICAgICAgICAgYXBwcm9hY2hSYXRlOiAoX2EgPSB0aGlzLmJsdWVwcmludERpZmZpY3VsdHkuYXBwcm9hY2hSYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB0aGlzLmJsdWVwcmludERpZmZpY3VsdHkub3ZlcmFsbERpZmZpY3VsdHkgfSksXHJcbiAgICAgICAgICAgIGhpdE9iamVjdFNldHRpbmdzOiB0aGlzLmhpdE9iamVjdFNldHRpbmdzLFxyXG4gICAgICAgICAgICBjb250cm9sUG9pbnRJbmZvOiB0aGlzLmNvbnRyb2xQb2ludEluZm8sXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5CbHVlcHJpbnRQYXJzZXIuTEFURVNUX1ZFUlNJT04gPSAxNDtcclxuY29uc3QgTUlOX0JFQVRfTEVOR1RIID0gNjtcclxuY29uc3QgTUFYX0JFQVRfTEVOR1RIID0gNjAwMDA7XHJcbmNvbnN0IERFRkFVTFRfQkVBVF9MRU5HVEggPSAxMDAwO1xyXG4vLyBTbyBwcmVjaXNpb24gaXMgb25seSB1c2VkIHdoZW4gbm90IGluaXRpYWxpemluZz9cclxuLy8gVGhlIEJpbmRhYmxlTnVtYmVyIGhhcyBhIHByZWNpc2lvbiB2YWx1ZSBidXQgaXMgbm90IHVzZWQgd2hlbiBpbml0aWFsaXplZFxyXG5mdW5jdGlvbiBiaW5kYWJsZU51bWJlck5ldyh2YWwsIHsgbWluLCBtYXgsIHByZWNpc2lvbiB9KSB7XHJcbiAgICByZXR1cm4gKDAsIGluZGV4XzEuY2xhbXApKHZhbCwgbWluLCBtYXgpO1xyXG4gICAgLy8gcmV0dXJuIE1hdGgucm91bmQodmFsIC8gcHJlY2lzaW9uKSAqIHByZWNpc2lvbjtcclxufVxyXG5leHBvcnRzLkJsdWVwcmludFNlY3Rpb25zID0gW1xyXG4gICAgXCJHZW5lcmFsXCIsXHJcbiAgICBcIk1ldGFkYXRhXCIsXHJcbiAgICBcIkRpZmZpY3VsdHlcIixcclxuICAgIFwiSGl0T2JqZWN0c1wiLFxyXG4gICAgXCJUaW1pbmdQb2ludHNcIixcclxuICAgIFwiRXZlbnRzXCIsXHJcbiAgICBcIkVkaXRvclwiLFxyXG4gICAgXCJDb2xvdXJzXCIsXHJcbl07XHJcbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgLy8gVE9ETzogRm9ybWF0IHZlcnNpb24gc2hvdWxkIGFjdHVhbGx5IGJlIHBhcnNlZFxyXG4gICAgZm9ybWF0VmVyc2lvbjogQmx1ZXByaW50UGFyc2VyLkxBVEVTVF9WRVJTSU9OLFxyXG4gICAgc2VjdGlvbnNUb1JlYWQ6IGV4cG9ydHMuQmx1ZXByaW50U2VjdGlvbnMsXHJcbn07XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGJsdWVwcmludCB0aGF0IGlzIGdpdmVuIGluIHRoZSBsZWdhY3kgYC5vc3VgIGZvcm1hdC5cclxuICogQHBhcmFtIGRhdGEgdGhlIC5vc3UgZmlsZSBzdHJpbmdcclxuICogQHBhcmFtIHtCbHVlcHJpbnRQYXJzZU9wdGlvbnN9IG9wdGlvbnMgY29uZmlnIG9wdGlvbnNcclxuICogQHBhcmFtIHtCbHVlcHJpbnRQYXJzZU9wdGlvbnN9IG9wdGlvbnMuc2VjdGlvbnNUb1JlYWQgbGlzdCBvZiBzZWN0aW9ucyB0aGF0IHNob3VsZCBiZSByZWFkXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZUJsdWVwcmludChkYXRhLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBhbGxPcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpO1xyXG4gICAgY29uc3QgcGFyc2VyID0gbmV3IEJsdWVwcmludFBhcnNlcihkYXRhLCBhbGxPcHRpb25zKTtcclxuICAgIHJldHVybiBwYXJzZXIucGFyc2UoKTtcclxufVxyXG5leHBvcnRzLnBhcnNlQmx1ZXByaW50ID0gcGFyc2VCbHVlcHJpbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY2xvbmVHYW1lU3RhdGUgPSBleHBvcnRzLmRlZmF1bHRHYW1lU3RhdGUgPSBleHBvcnRzLk5PVF9QUkVTU0lORyA9IHZvaWQgMDtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi8uLi9tYXRoL2luZGV4XCIpO1xyXG5leHBvcnRzLk5PVF9QUkVTU0lORyA9ICs3Mjc3Mjc3Mjc7XHJcbmNvbnN0IEhpdENpcmNsZU1pc3NSZWFzb25zID0gW1xyXG4gICAgLy8gV2hlbiB0aGUgdGltZSBoYXMgZXhwaXJlZCBhbmQgdGhlIGNpcmNsZSBnb3QgZm9yY2Uga2lsbGVkLlxyXG4gICAgXCJUSU1FX0VYUElSRURcIixcclxuICAgIC8vIFRoZXJlIGlzIG5vIEhJVF9UT09fTEFURSBiZWNhdXNlIFRJTUVfRVhQSVJFRCB3b3VsZCBvY2N1ciBlYXJsaWVyLlxyXG4gICAgXCJISVRfVE9PX0VBUkxZXCIsXHJcbiAgICAvLyBUaGlzIGlzIG9ubHkgcG9zc2libGUgaW4gb3N1IWxhemVyIHdoZXJlIGNsaWNraW5nIGEgbGF0ZXIgY2lyY2xlIGNhbiBjYXVzZSB0aGlzIGNpcmNsZSB0byBiZSBmb3JjZSBtaXNzZWQuXHJcbiAgICBcIkZPUkNFX01JU1NfTk9URUxPQ0tcIixcclxuICAgIC8vIElmIHRoZSB1c2VyIGhhZCB0aW1lIHRvIHByZXNzIHRoZSBoaXRDaXJjbGUgdW50aWwgdGltZSAzMDAsIGJ1dCB0aGUgc2xpZGVyIGlzIHNvIHNob3J0IHRoYXQgaXQgZW5kcyBhdCAyMDAsXHJcbiAgICAvLyB0aGVuIHRoZSB1c2VyIGFjdHVhbGx5IGhhcyBhIHJlZHVjZWQgaGl0IHdpbmRvdyBmb3IgaGl0dGluZyBpdC5cclxuICAgIFwiU0xJREVSX0ZJTklTSEVEX0ZBU1RFUlwiLFxyXG5dO1xyXG5jb25zdCBkZWZhdWx0R2FtZVN0YXRlID0gKCkgPT4gKHtcclxuICAgIGV2ZW50SW5kZXg6IDAsXHJcbiAgICBjdXJyZW50VGltZTogMCxcclxuICAgIGN1cnNvclBvc2l0aW9uOiBpbmRleF8xLlZlYzIuWmVybyxcclxuICAgIGhpdENpcmNsZVZlcmRpY3Q6IHt9LFxyXG4gICAgc2xpZGVyQm9keVN0YXRlOiBuZXcgTWFwKCksXHJcbiAgICBjaGVja1BvaW50VmVyZGljdDoge30sXHJcbiAgICBzcGlubmVyU3RhdGU6IG5ldyBNYXAoKSxcclxuICAgIHNsaWRlclZlcmRpY3Q6IHt9LFxyXG4gICAgY2xpY2tXYXNVc2VmdWw6IGZhbHNlLFxyXG4gICAgLy8gUmVzdCBhcmUgdXNlZCBmb3Igb3B0aW1pemF0aW9uc1xyXG4gICAgbGF0ZXN0SGl0T2JqZWN0SW5kZXg6IDAsXHJcbiAgICBhbGl2ZUhpdENpcmNsZUlkczogbmV3IFNldCgpLFxyXG4gICAgYWxpdmVTbGlkZXJJZHM6IG5ldyBTZXQoKSxcclxuICAgIGFsaXZlU3Bpbm5lcklkczogbmV3IFNldCgpLFxyXG4gICAgLy8gQWxzbyB1c2VkIGFzIGFuIG9wdGltaXphdGlvblxyXG4gICAganVkZ2VkT2JqZWN0czogW10sXHJcbiAgICBwcmVzc2luZ1NpbmNlOiBbZXhwb3J0cy5OT1RfUFJFU1NJTkcsIGV4cG9ydHMuTk9UX1BSRVNTSU5HXSxcclxufSk7XHJcbmV4cG9ydHMuZGVmYXVsdEdhbWVTdGF0ZSA9IGRlZmF1bHRHYW1lU3RhdGU7XHJcbmZ1bmN0aW9uIGNsb25lR2FtZVN0YXRlKHJlcGxheVN0YXRlKSB7XHJcbiAgICBjb25zdCB7IGFsaXZlSGl0Q2lyY2xlSWRzLCBhbGl2ZVNsaWRlcklkcywgYWxpdmVTcGlubmVySWRzLCBzcGlubmVyU3RhdGUsIHNsaWRlckJvZHlTdGF0ZSwgY2hlY2tQb2ludFZlcmRpY3QsIGhpdENpcmNsZVZlcmRpY3QsIHNsaWRlclZlcmRpY3QsIGV2ZW50SW5kZXgsIGNsaWNrV2FzVXNlZnVsLCBjdXJyZW50VGltZSwgY3Vyc29yUG9zaXRpb24sIGxhdGVzdEhpdE9iamVjdEluZGV4LCBwcmVzc2luZ1NpbmNlLCBqdWRnZWRPYmplY3RzLCB9ID0gcmVwbGF5U3RhdGU7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGV2ZW50SW5kZXg6IGV2ZW50SW5kZXgsXHJcbiAgICAgICAgYWxpdmVIaXRDaXJjbGVJZHM6IG5ldyBTZXQoYWxpdmVIaXRDaXJjbGVJZHMpLFxyXG4gICAgICAgIGFsaXZlU2xpZGVySWRzOiBuZXcgU2V0KGFsaXZlU2xpZGVySWRzKSxcclxuICAgICAgICBhbGl2ZVNwaW5uZXJJZHM6IG5ldyBTZXQoYWxpdmVTcGlubmVySWRzKSxcclxuICAgICAgICBoaXRDaXJjbGVWZXJkaWN0OiBPYmplY3QuYXNzaWduKHt9LCBoaXRDaXJjbGVWZXJkaWN0KSxcclxuICAgICAgICBzbGlkZXJWZXJkaWN0OiBPYmplY3QuYXNzaWduKHt9LCBzbGlkZXJWZXJkaWN0KSxcclxuICAgICAgICBjaGVja1BvaW50VmVyZGljdDogT2JqZWN0LmFzc2lnbih7fSwgY2hlY2tQb2ludFZlcmRpY3QpLFxyXG4gICAgICAgIGN1cnJlbnRUaW1lOiBjdXJyZW50VGltZSxcclxuICAgICAgICBjdXJzb3JQb3NpdGlvbjogY3Vyc29yUG9zaXRpb24sXHJcbiAgICAgICAgbGF0ZXN0SGl0T2JqZWN0SW5kZXg6IGxhdGVzdEhpdE9iamVjdEluZGV4LFxyXG4gICAgICAgIGp1ZGdlZE9iamVjdHM6IFsuLi5qdWRnZWRPYmplY3RzXSxcclxuICAgICAgICBjbGlja1dhc1VzZWZ1bDogY2xpY2tXYXNVc2VmdWwsXHJcbiAgICAgICAgc2xpZGVyQm9keVN0YXRlOiBuZXcgTWFwKHNsaWRlckJvZHlTdGF0ZSksXHJcbiAgICAgICAgc3Bpbm5lclN0YXRlOiBuZXcgTWFwKHNwaW5uZXJTdGF0ZSksXHJcbiAgICAgICAgcHJlc3NpbmdTaW5jZTogcHJlc3NpbmdTaW5jZS5zbGljZSgpLFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmNsb25lR2FtZVN0YXRlID0gY2xvbmVHYW1lU3RhdGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMubmV3UHJlc3NpbmdTaW5jZSA9IGV4cG9ydHMuR2FtZVN0YXRlRXZhbHVhdG9yID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL21hdGgvaW5kZXhcIik7XHJcbmNvbnN0IEdhbWVTdGF0ZV8xID0gcmVxdWlyZShcIi4vR2FtZVN0YXRlXCIpO1xyXG5jb25zdCBUeXBlc18xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvVHlwZXNcIik7XHJcbmNvbnN0IFJlcGxheV8xID0gcmVxdWlyZShcIi4uL3JlcGxheXMvUmVwbGF5XCIpO1xyXG5jb25zdCBNb2RzXzEgPSByZXF1aXJlKFwiLi4vbW9kcy9Nb2RzXCIpO1xyXG5mdW5jdGlvbiBnZW5lcmF0ZUV2ZW50cyhiZWF0bWFwLCBoaXRXaW5kb3dzKSB7XHJcbiAgICBjb25zdCBldmVudHMgPSBbXTtcclxuICAgIGNvbnN0IG1laEhpdFdpbmRvdyA9IGhpdFdpbmRvd3NbMl07XHJcbiAgICBjb25zdCBwdXNoSGl0Q2lyY2xlRXZlbnRzID0gKGgpID0+IHtcclxuICAgICAgICBldmVudHMucHVzaCh7IHRpbWU6IGguaGl0VGltZSAtIGguYXBwcm9hY2hEdXJhdGlvbiwgaGl0T2JqZWN0SWQ6IGguaWQsIHR5cGU6IFwiSElUX0NJUkNMRV9TUEFXTlwiIH0pO1xyXG4gICAgICAgIC8vIFRPRE86IEluIGNhc2UgeW91IGFyZSBhbGxvd2VkIHRvIHByZXNzIGxhdGUgLT4gKzEgYWRkaXRpb25hbFxyXG4gICAgICAgIGV2ZW50cy5wdXNoKHsgdGltZTogaC5oaXRUaW1lICsgbWVoSGl0V2luZG93ICsgMSwgaGl0T2JqZWN0SWQ6IGguaWQsIHR5cGU6IFwiSElUX0NJUkNMRV9GT1JDRV9LSUxMXCIgfSk7XHJcbiAgICB9O1xyXG4gICAgZm9yIChjb25zdCBoIG9mIGJlYXRtYXAuaGl0T2JqZWN0cykge1xyXG4gICAgICAgIGlmICgoMCwgVHlwZXNfMS5pc0hpdENpcmNsZSkoaCkpIHtcclxuICAgICAgICAgICAgcHVzaEhpdENpcmNsZUV2ZW50cyhoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKDAsIFR5cGVzXzEuaXNTbGlkZXIpKGgpKSB7XHJcbiAgICAgICAgICAgIHB1c2hIaXRDaXJjbGVFdmVudHMoaC5oZWFkKTtcclxuICAgICAgICAgICAgZXZlbnRzLnB1c2goeyB0aW1lOiBoLnN0YXJ0VGltZSwgaGl0T2JqZWN0SWQ6IGguaWQsIHR5cGU6IFwiU0xJREVSX1NUQVJUXCIgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50cy5wdXNoKHsgdGltZTogaC5lbmRUaW1lLCBoaXRPYmplY3RJZDogaC5pZCwgdHlwZTogXCJTTElERVJfRU5EXCIgfSk7XHJcbiAgICAgICAgICAgIGguY2hlY2tQb2ludHMuZm9yRWFjaCgoYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRzLnB1c2goeyB0aW1lOiBjLmhpdFRpbWUsIGhpdE9iamVjdElkOiBjLmlkLCB0eXBlOiBcIlNMSURFUl9DSEVDS19QT0lOVFwiIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKDAsIFR5cGVzXzEuaXNTcGlubmVyKShoKSkge1xyXG4gICAgICAgICAgICBldmVudHMucHVzaCh7IHRpbWU6IGguc3RhcnRUaW1lLCBoaXRPYmplY3RJZDogaC5pZCwgdHlwZTogXCJTUElOTkVSX1NUQVJUXCIgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50cy5wdXNoKHsgdGltZTogaC5lbmRUaW1lLCBoaXRPYmplY3RJZDogaC5pZCwgdHlwZTogXCJTUElOTkVSX0VORFwiIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFRPRE86IFdoYXQgaWYgMkIgbWFwcz9cclxuICAgIGV2ZW50cy5zb3J0KChhLCBiKSA9PiBhLnRpbWUgLSBiLnRpbWUpO1xyXG4gICAgcmV0dXJuIGV2ZW50cztcclxufVxyXG5jb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgIG5vdGVMb2NrU3R5bGU6IFwiU1RBQkxFXCIsXHJcbiAgICBoaXRXaW5kb3dTdHlsZTogXCJPU1VfU1RBQkxFXCIsXHJcbn07XHJcbmNvbnN0IEhpdE9iamVjdFZlcmRpY3RzID0ge1xyXG4gICAgR1JFQVQ6IDAsXHJcbiAgICBPSzogMSxcclxuICAgIE1FSDogMixcclxuICAgIE1JU1M6IDMsXHJcbn07XHJcbmZ1bmN0aW9uIGlzV2l0aGluSGl0V2luZG93KGhpdFdpbmRvdywgZGVsdGEsIHZlcmRpY3QpIHtcclxuICAgIHJldHVybiBNYXRoLmFicyhkZWx0YSkgPD0gaGl0V2luZG93W0hpdE9iamVjdFZlcmRpY3RzW3ZlcmRpY3RdXTtcclxufVxyXG5jbGFzcyBHYW1lU3RhdGVFdmFsdWF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoYmVhdG1hcCwgb3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuYmVhdG1hcCA9IGJlYXRtYXA7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSAoMCwgR2FtZVN0YXRlXzEuZGVmYXVsdEdhbWVTdGF0ZSkoKTtcclxuICAgICAgICB0aGlzLmZyYW1lID0geyB0aW1lOiAwLCBwb3NpdGlvbjogeyB4OiAwLCB5OiAwIH0sIGFjdGlvbnM6IFtdIH07XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucyksIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuaGl0V2luZG93cyA9ICgwLCBpbmRleF8xLmhpdFdpbmRvd3NGb3JPRCkoYmVhdG1hcC5kaWZmaWN1bHR5Lm92ZXJhbGxEaWZmaWN1bHR5LCB0aGlzLm9wdGlvbnMuaGl0V2luZG93U3R5bGUgPT09IFwiT1NVX0xBWkVSXCIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gZ2VuZXJhdGVFdmVudHMoYmVhdG1hcCwgdGhpcy5oaXRXaW5kb3dzKTtcclxuICAgIH1cclxuICAgIGp1ZGdlSGl0Q2lyY2xlKGlkLCB2ZXJkaWN0KSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuaGl0Q2lyY2xlVmVyZGljdFtpZF0gPSB2ZXJkaWN0O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmFsaXZlSGl0Q2lyY2xlSWRzLmRlbGV0ZShpZCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuanVkZ2VkT2JqZWN0cy5wdXNoKGlkKTtcclxuICAgIH1cclxuICAgIGhhbmRsZUhpdENpcmNsZVNwYXduKHRpbWUsIGhpdENpcmNsZUlkKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuYWxpdmVIaXRDaXJjbGVJZHMuYWRkKGhpdENpcmNsZUlkKTtcclxuICAgIH1cclxuICAgIGhhbmRsZUhpdENpcmNsZUZvcmNlS2lsbCh0aW1lLCBoaXRDaXJjbGVJZCkge1xyXG4gICAgICAgIC8vIEFscmVhZHkgZGVhZD8gVGhlIHNoaW5pZ2FtaSB3aWxsIGp1c3QgbGVhdmUuLi5cclxuICAgICAgICBpZiAoIXRoaXMuZ2FtZVN0YXRlLmFsaXZlSGl0Q2lyY2xlSWRzLmhhcyhoaXRDaXJjbGVJZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBPdGhlcndpc2Ugd2UgZm9yY2Uga2lsbCBmb3Igbm90IGJlaW5nIGhpdCBieSB0aGUgcGxheWVyIC4uLlxyXG4gICAgICAgIGNvbnN0IHZlcmRpY3QgPSB7IGp1ZGdlbWVudFRpbWU6IHRpbWUsIHR5cGU6IFwiTUlTU1wiLCBtaXNzUmVhc29uOiBcIlRJTUVfRVhQSVJFRFwiIH07XHJcbiAgICAgICAgdGhpcy5qdWRnZUhpdENpcmNsZShoaXRDaXJjbGVJZCwgdmVyZGljdCk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVTbGlkZXJTdGFydCh0aW1lLCBzbGlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmFsaXZlU2xpZGVySWRzLmFkZChzbGlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVTbGlkZXJFbmRpbmcodGltZSwgc2xpZGVySWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3Qgc2xpZGVyID0gdGhpcy5iZWF0bWFwLmdldFNsaWRlcihzbGlkZXJJZCk7XHJcbiAgICAgICAgY29uc3QgaGVhZFZlcmRpY3QgPSB0aGlzLmdhbWVTdGF0ZS5oaXRDaXJjbGVWZXJkaWN0W3NsaWRlci5oZWFkLmlkXTtcclxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgaGVhZCBpZiBpdCBoYXNuJ3QgYmVlbiBpbnRlcmFjdGVkIHdpdGggdGhlIHBsYXllciBpbiBhbnkgd2F5LlxyXG4gICAgICAgIGlmIChoZWFkVmVyZGljdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuanVkZ2VIaXRDaXJjbGUoc2xpZGVyLmhlYWQuaWQsIHtcclxuICAgICAgICAgICAgICAgIGp1ZGdlbWVudFRpbWU6IHNsaWRlci5lbmRUaW1lLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJNSVNTXCIsXHJcbiAgICAgICAgICAgICAgICBtaXNzUmVhc29uOiBcIlNMSURFUl9GSU5JU0hFRF9GQVNURVJcIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vdyBjb3VudCB0aGUgaGl0IGNoZWNrcG9pbnRzIGFuZCBnZXQgdGhlIHZlcmRpY3RcclxuICAgICAgICBjb25zdCB0b3RhbENoZWNrcG9pbnRzID0gc2xpZGVyLmNoZWNrUG9pbnRzLmxlbmd0aCArIDE7XHJcbiAgICAgICAgbGV0IGhpdENoZWNrcG9pbnRzID0gMDtcclxuICAgICAgICBpZiAoIShoZWFkVmVyZGljdCA9PT0gdW5kZWZpbmVkIHx8IGhlYWRWZXJkaWN0LnR5cGUgPT09IFwiTUlTU1wiKSlcclxuICAgICAgICAgICAgaGl0Q2hlY2twb2ludHMrKztcclxuICAgICAgICBmb3IgKGNvbnN0IGMgb2Ygc2xpZGVyLmNoZWNrUG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGhpdENoZWNrcG9pbnRzICs9ICgoX2EgPSB0aGlzLmdhbWVTdGF0ZS5jaGVja1BvaW50VmVyZGljdFtjLmlkXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhpdCkgPyAxIDogMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuc2xpZGVyVmVyZGljdFtzbGlkZXIuaWRdID0gc2xpZGVyVmVyZGljdEJhc2VkT25DaGVja3BvaW50cyh0b3RhbENoZWNrcG9pbnRzLCBoaXRDaGVja3BvaW50cyk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuanVkZ2VkT2JqZWN0cy5wdXNoKHNsaWRlci5pZCk7XHJcbiAgICAgICAgLy8gVGhlIGhlYWQgc2hvdWxkIG5vdCBiZSBhbGl2ZVxyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmFsaXZlU2xpZGVySWRzLmRlbGV0ZShzbGlkZXJJZCk7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuc2xpZGVyQm9keVN0YXRlLmRlbGV0ZShzbGlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICBwcmVkaWN0ZWRDdXJzb3JQb3NpdGlvbkF0KHRpbWUpIHtcclxuICAgICAgICBjb25zdCBwcmV2aW91c1RpbWUgPSB0aGlzLmdhbWVTdGF0ZS5jdXJyZW50VGltZTtcclxuICAgICAgICBjb25zdCBuZXh0VGltZSA9IHRoaXMuZnJhbWUudGltZTtcclxuICAgICAgICBjb25zdCBwcmV2aW91c1Bvc2l0aW9uID0gdGhpcy5nYW1lU3RhdGUuY3Vyc29yUG9zaXRpb247XHJcbiAgICAgICAgY29uc3QgbmV4dFBvc2l0aW9uID0gdGhpcy5mcmFtZS5wb3NpdGlvbjtcclxuICAgICAgICBpZiAocHJldmlvdXNUaW1lID09PSBuZXh0VGltZSlcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZpb3VzUG9zaXRpb247XHJcbiAgICAgICAgY29uc3QgZiA9ICh0aW1lIC0gcHJldmlvdXNUaW1lKSAvIChuZXh0VGltZSAtIHByZXZpb3VzVGltZSk7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4XzEuVmVjMi5pbnRlcnBvbGF0ZShwcmV2aW91c1Bvc2l0aW9uLCBuZXh0UG9zaXRpb24sIGYpO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlU2xpZGVyQ2hlY2tQb2ludCh0aW1lLCBpZCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnNvclBvc2l0aW9uID0gdGhpcy5wcmVkaWN0ZWRDdXJzb3JQb3NpdGlvbkF0KHRpbWUpO1xyXG4gICAgICAgIGNvbnN0IGNoZWNrUG9pbnQgPSB0aGlzLmJlYXRtYXAuZ2V0U2xpZGVyQ2hlY2tQb2ludChpZCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTbGlkZXJCb2R5VHJhY2tpbmcodGltZSwgY3Vyc29yUG9zaXRpb24sIHRoaXMuZ2FtZVN0YXRlLnByZXNzaW5nU2luY2UpO1xyXG4gICAgICAgIGNvbnN0IHNsaWRlcklkID0gY2hlY2tQb2ludC5zbGlkZXIuaWQ7XHJcbiAgICAgICAgY29uc3Qgc3RhdGUgPSB0aGlzLmdhbWVTdGF0ZS5zbGlkZXJCb2R5U3RhdGUuZ2V0KHNsaWRlcklkKTtcclxuICAgICAgICBpZiAoc3RhdGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlNvbWVob3cgdGhlIHNsaWRlciBib2R5IGhhcyBubyBzdGF0ZSB3aGlsZSB0aGVyZSBpcyBhIGNoZWNrcG9pbnQgYWxpdmUuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jaGVja1BvaW50VmVyZGljdFtpZF0gPSB7IGhpdDogc3RhdGUuaXNUcmFja2luZyB9O1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmp1ZGdlZE9iamVjdHMucHVzaChpZCk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVTcGlubmVyU3RhcnQoaWQpIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5hbGl2ZVNwaW5uZXJJZHMuYWRkKGlkKTtcclxuICAgIH1cclxuICAgIGhhbmRsZVNwaW5uZXJFbmQoaWQpIHtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5hbGl2ZVNwaW5uZXJJZHMuZGVsZXRlKGlkKTtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5qdWRnZWRPYmplY3RzLnB1c2goaWQpO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCB7IGhpdE9iamVjdElkLCB0aW1lLCB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIkhJVF9DSVJDTEVfU1BBV05cIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSGl0Q2lyY2xlU3Bhd24odGltZSwgaGl0T2JqZWN0SWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJISVRfQ0lSQ0xFX0ZPUkNFX0tJTExcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlSGl0Q2lyY2xlRm9yY2VLaWxsKHRpbWUsIGhpdE9iamVjdElkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiU0xJREVSX1NUQVJUXCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNsaWRlclN0YXJ0KHRpbWUsIGhpdE9iamVjdElkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiU0xJREVSX0VORFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVTbGlkZXJFbmRpbmcodGltZSwgaGl0T2JqZWN0SWQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJTTElERVJfQ0hFQ0tfUE9JTlRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU2xpZGVyQ2hlY2tQb2ludCh0aW1lLCBoaXRPYmplY3RJZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIlNQSU5ORVJfU1RBUlRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3Bpbm5lclN0YXJ0KGhpdE9iamVjdElkKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiU1BJTk5FUl9FTkRcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3Bpbm5lckVuZChoaXRPYmplY3RJZCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBoYW5kbGVBbGl2ZUhpdENpcmNsZXMoKSB7XHJcbiAgICAgICAgLy8gVGhlcmUgaXMgb25seSBhY3Rpb24gaWYgdGhlcmUgaXMgYWxzbyBhIGNsaWNrIGluIHRoaXMgZnJhbWUgLi4uXHJcbiAgICAgICAgY29uc3QgaGFzUmVsYXggPSB0aGlzLmJlYXRtYXAuYXBwbGllZE1vZHMuaW5jbHVkZXMoXCJSRUxBWFwiKTtcclxuICAgICAgICBpZiAoIXRoaXMuaGFzRnJlc2hDbGlja1RoaXNGcmFtZSAmJiAhaGFzUmVsYXgpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG5vdGVMb2NrU3R5bGUgfSA9IHRoaXMub3B0aW9ucztcclxuICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IHRoaXMuZ2FtZVN0YXRlLmN1cnJlbnRUaW1lO1xyXG4gICAgICAgIGxldCBub3RlTG9ja2VkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gSmF2YVNjcmlwdCBgU2V0YCBtYWludGFpbnMgaXRzIGVsZW1lbnRzIGluIGluc2VydGlvbiBvcmRlciBzbyB0aGUgZWFybHkgb25lc1xyXG4gICAgICAgIC8vIHdlIGl0ZXJhdGUgb24gYXJlIGFsc28gdGhlIG9uZXMgdGhhdCBhcmUgc3VwcG9zZWQgdG8gYmUgaGl0IGZpcnN0IC4uLlxyXG4gICAgICAgIC8vIFdlIGNvcHkgYmVjYXVzZSB0aGUgdmFsdWVzIGludG8gYW4gYXJyYXkgYmVjYXVzZSB3ZSBtaWdodCBkZWxldGUgdGhlbSAuLi5cclxuICAgICAgICBjb25zdCBoaXRDaXJjbGVJZHMgPSBBcnJheS5mcm9tKHRoaXMuZ2FtZVN0YXRlLmFsaXZlSGl0Q2lyY2xlSWRzLnZhbHVlcygpKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdENpcmNsZUlkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IGhpdENpcmNsZUlkc1tpXTtcclxuICAgICAgICAgICAgY29uc3QgaGl0Q2lyY2xlID0gdGhpcy5iZWF0bWFwLmdldEhpdENpcmNsZShpZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnNvckluc2lkZSA9IGluZGV4XzEuVmVjMi53aXRoaW5EaXN0YW5jZShoaXRDaXJjbGUucG9zaXRpb24sIHRoaXMuZ2FtZVN0YXRlLmN1cnNvclBvc2l0aW9uLCBNYXRoLmZyb3VuZChoaXRDaXJjbGUucmFkaXVzKSk7XHJcbiAgICAgICAgICAgIGlmICghY3Vyc29ySW5zaWRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBwdXQgYSBsb2NrIG9uIHRoZSBvdGhlciBjaXJjbGVzIGJlY2F1c2UgdGhlIGZpcnN0IGFsaXZlIEhpdENpcmNsZSBpcyB0aGUgb25seSBjaXJjbGUgd2UgY2FuIGludGVyYWN0IHdpdGguXHJcbiAgICAgICAgICAgICAgICBpZiAobm90ZUxvY2tTdHlsZSA9PT0gXCJTVEFCTEVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVMb2NrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gSXQncyBhIGJpdCBmYWlyZXIgYmVjYXVzZSB0aGlzIGFsbG93cyB1cyB0byBmb3JjZSBtaXNzIG5vdGVzIHRoYXQgYXJlIGluIHRoZSBwYXN0LlxyXG4gICAgICAgICAgICAgICAgaWYgKG5vdGVMb2NrU3R5bGUgPT09IFwiTEFaRVJcIiAmJiBjdXJyZW50VGltZSA8PSBoaXRDaXJjbGUuaGl0VGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVMb2NrZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgd2UgZ290IG5vdGUgbG9ja2VkLCB3ZSB3YW50IHRvIHNldCBhbiBhbmltYXRpb24gdGhlbiBpZ25vcmUgdGhlIG90aGVyIGhpdCBjaXJjbGVzXHJcbiAgICAgICAgICAgIGlmIChub3RlTG9ja2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBTZXQgc3RhdGUgb2YgYGlkYCB0byBiZSBub3RlTG9ja2VkIGF0IHRoZSBjdXJyZW50IHRpbWUgKHRoaXMgYWxsb3dzIHVzIHRvIHNob3cgYW4gXCJzaGFraW5nXCIgYW5pbWF0aW9uKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgdGhpcyBoaXRvYmplY3QgaXMgdG9vIGVhcmx5IGZvciByZWxheCwgdGhlbiB0aGUgb3RoZXIgb25lcyB3aWxsIGJlIGFzIHdlbGwsIHNvIGJyZWFrLlxyXG4gICAgICAgICAgICBjb25zdCBkZWx0YSA9IGN1cnJlbnRUaW1lIC0gaGl0Q2lyY2xlLmhpdFRpbWU7XHJcbiAgICAgICAgICAgIGlmIChoYXNSZWxheCAmJiBkZWx0YSA8IC1Nb2RzXzEuUkVMQVhfTEVOSUVOQ1kpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgbGV0IGp1ZGdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZlcmRpY3Qgb2YgW1wiR1JFQVRcIiwgXCJPS1wiLCBcIk1FSFwiXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzV2l0aGluSGl0V2luZG93KHRoaXMuaGl0V2luZG93cywgZGVsdGEsIHZlcmRpY3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5qdWRnZUhpdENpcmNsZShoaXRDaXJjbGUuaWQsIHsganVkZ2VtZW50VGltZTogY3VycmVudFRpbWUsIHR5cGU6IHZlcmRpY3QgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAganVkZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBGb3JjZSBtaXNzIG90aGVyIG5vdGVzIGxlc3MgdGhhbiBpIGZvciBsYXplciBzdHlsZVxyXG4gICAgICAgICAgICBpZiAoanVkZ2VkKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGlmIChpc1dpdGhpbkhpdFdpbmRvdyh0aGlzLmhpdFdpbmRvd3MsIGRlbHRhLCBcIk1JU1NcIikpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEFkZCBhIFwiSElUX1RPT19MQVRFXCIgKGV2ZW4gdGhvdWdoIGl0J3Mga2luZGEgdW5mYWlyLCBidXQgdGhpcyBpcyBvc3Uhc3RhYmxlIGJlaGF2aW9yKVxyXG4gICAgICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIGluIG9zdSFzdGFibGUgdGhlIEhpdENpcmNsZSB0aGF0IGhhcyBhIE1FSCB0aW1lIG9mIGxldCdzIHNheSArLTEwOS41bXMgaXMgc3RpbGwgYWxpdmUgYXRcclxuICAgICAgICAgICAgICAgIC8vIHQrMTEwbXMgYW5kIGNhbiBiZSBcImNsaWNrZWRcIiBieSB0aGUgdXNlciBhdCB0aW1lIHQrMTEwbXMsIGJ1dCBpdCB3aWxsIGp1c3QgcmVzdWx0IGluIGEgbWlzcy4gVGhlIHByb2JsZW0gaXNcclxuICAgICAgICAgICAgICAgIC8vIHRoYXQgdGhlIHVuZGVybHlpbmcgbm90ZSB3aWxsIHRoZW4gYmUgaWdub3JlZCBiZWNhdXNlIHRoZSBjbGljayBpcyBcIndhc3RlZFwiIGZvciB0aGUgYWxyZWFkeSBleHBpcmVkIGhpdFxyXG4gICAgICAgICAgICAgICAgLy8gY2lyY2xlLiA9PiBUaGlzIG1pZ2h0IGJlIGEgc3RhYmxlIGJ1ZyBvciBmZWF0dXJlP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5qdWRnZUhpdENpcmNsZShoaXRDaXJjbGUuaWQsIHsganVkZ2VtZW50VGltZTogY3VycmVudFRpbWUsIHR5cGU6IFwiTUlTU1wiLCBtaXNzUmVhc29uOiBcIkhJVF9UT09fRUFSTFlcIiB9KTtcclxuICAgICAgICAgICAgICAgIGp1ZGdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogRG8gd2UgZm9yY2UgbWlzcyBvdGhlciBub3RlcyBhcyB3ZWxsPyBmb3IgbGF6ZXIgc3R5bGVcclxuICAgICAgICAgICAgaWYgKGp1ZGdlZClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldCBoYXNGcmVzaENsaWNrVGhpc0ZyYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVTdGF0ZS5wcmVzc2luZ1NpbmNlLmluY2x1ZGVzKHRoaXMuZ2FtZVN0YXRlLmN1cnJlbnRUaW1lKTtcclxuICAgIH1cclxuICAgIGhlYWRIaXRUaW1lKGhlYWRJZCkge1xyXG4gICAgICAgIGNvbnN0IHZlcmRpY3QgPSB0aGlzLmdhbWVTdGF0ZS5oaXRDaXJjbGVWZXJkaWN0W2hlYWRJZF07XHJcbiAgICAgICAgaWYgKCF2ZXJkaWN0IHx8IHZlcmRpY3QudHlwZSA9PT0gXCJNSVNTXCIpXHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgcmV0dXJuIHZlcmRpY3QuanVkZ2VtZW50VGltZTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVNsaWRlckJvZHlUcmFja2luZyh0aW1lLCBjdXJzb3JQb3NpdGlvbiwgcHJlc3NpbmdTaW5jZSkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgZm9yIChjb25zdCBpZCBvZiB0aGlzLmdhbWVTdGF0ZS5hbGl2ZVNsaWRlcklkcykge1xyXG4gICAgICAgICAgICBjb25zdCBzbGlkZXIgPSB0aGlzLmJlYXRtYXAuZ2V0U2xpZGVyKGlkKTtcclxuICAgICAgICAgICAgY29uc3QgaGVhZEhpdFRpbWUgPSB0aGlzLmhlYWRIaXRUaW1lKHNsaWRlci5oZWFkLmlkKTtcclxuICAgICAgICAgICAgY29uc3Qgd2FzVHJhY2tpbmcgPSAoX2IgPSAoX2EgPSB0aGlzLmdhbWVTdGF0ZS5zbGlkZXJCb2R5U3RhdGUuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzVHJhY2tpbmcpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBoYXNSZWxheCA9IHRoaXMuYmVhdG1hcC5hcHBsaWVkTW9kcy5pbmNsdWRlcyhcIlJFTEFYXCIpO1xyXG4gICAgICAgICAgICBjb25zdCBpc1RyYWNraW5nID0gZGV0ZXJtaW5lVHJhY2tpbmcod2FzVHJhY2tpbmcsIHNsaWRlciwgY3Vyc29yUG9zaXRpb24sIHRpbWUsIHByZXNzaW5nU2luY2UsIGhlYWRIaXRUaW1lLCBoYXNSZWxheCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZVN0YXRlLnNsaWRlckJvZHlTdGF0ZS5zZXQoaWQsIHsgaXNUcmFja2luZyB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBQcm9jZXNzIHRoZSBldmVudHMgdW50aWwgZXZlbnRbaV0udGltZSA8PSBtYXhUaW1lSW5jbHVzaXZlIGlzIG5vIGxvbmdlciB2YWxpZC5cclxuICAgIGhhbmRsZUV2ZW50c1VudGlsVGltZShtYXhUaW1lSW5jbHVzaXZlKSB7XHJcbiAgICAgICAgY29uc3QgeyBnYW1lU3RhdGUsIGV2ZW50cyB9ID0gdGhpcztcclxuICAgICAgICB3aGlsZSAoZ2FtZVN0YXRlLmV2ZW50SW5kZXggPCBldmVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gZXZlbnRzW2dhbWVTdGF0ZS5ldmVudEluZGV4XTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRpbWUgPiBtYXhUaW1lSW5jbHVzaXZlKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBnYW1lU3RhdGUuZXZlbnRJbmRleCArPSAxO1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBldmFsdWF0ZShnYW1lU3RhdGUsIGZyYW1lKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUgPSBnYW1lU3RhdGU7XHJcbiAgICAgICAgdGhpcy5mcmFtZSA9IGZyYW1lO1xyXG4gICAgICAgIC8vIDEuIERlYWwgd2l0aCBoaXQgb2JqZWN0cyB0aGF0IGFyZSBvbmx5IGFmZmVjdGVkIHdpdGggbW92ZW1lbnQgKHNsaWRlcnMsIHNwaW5uZXJzKVxyXG4gICAgICAgIC8vIFRiaCBpbiBteSBmaXJzdCB2ZXJzaW9uIEkgaGF2ZSB0aGlzLmhhbmRsZUV2ZW50c1VudGlsVGltZShmcmFtZS50aW1lKSByaWdodCBub3csIHdoaWNoIG1ha2VzIG1vcmUgc2Vuc2UuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudHNVbnRpbFRpbWUoZnJhbWUudGltZSAtIDEpO1xyXG4gICAgICAgIC8vIDIuIE5vdyBjb25zaWRlciB0aGluZ3MgdGhhdCBnZXQgYWZmZWN0ZWQgYnkgcmVsZWFzaW5nIC8gY2xpY2tpbmcgYXQgdGhpcyBwYXJ0aWN1bGFyIHRpbWUuXHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUuY3Vyc29yUG9zaXRpb24gPSBmcmFtZS5wb3NpdGlvbjtcclxuICAgICAgICB0aGlzLmdhbWVTdGF0ZS5jdXJyZW50VGltZSA9IGZyYW1lLnRpbWU7XHJcbiAgICAgICAgdGhpcy5nYW1lU3RhdGUucHJlc3NpbmdTaW5jZSA9ICgwLCBleHBvcnRzLm5ld1ByZXNzaW5nU2luY2UpKHRoaXMuZ2FtZVN0YXRlLnByZXNzaW5nU2luY2UsIGZyYW1lLmFjdGlvbnMsIGZyYW1lLnRpbWUpO1xyXG4gICAgICAgIHRoaXMuZ2FtZVN0YXRlLmNsaWNrV2FzVXNlZnVsID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVBbGl2ZUhpdENpcmNsZXMoKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNsaWRlckJvZHlUcmFja2luZyhmcmFtZS50aW1lLCBmcmFtZS5wb3NpdGlvbiwgdGhpcy5nYW1lU3RhdGUucHJlc3NpbmdTaW5jZSk7XHJcbiAgICAgICAgLy8gMy4gRGVhbCB3aXRoIGV2ZW50cyBhZnRlciB0aGUgY2xpY2sgc3VjaCBhcyBmb3JjZSBraWxsaW5nIGEgSGl0Q2lyY2xlXHJcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudHNVbnRpbFRpbWUoZnJhbWUudGltZSk7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5HYW1lU3RhdGVFdmFsdWF0b3IgPSBHYW1lU3RhdGVFdmFsdWF0b3I7XHJcbmNvbnN0IHNsaWRlclByb2dyZXNzID0gKHNsaWRlciwgdGltZSkgPT4gKHRpbWUgLSBzbGlkZXIuc3RhcnRUaW1lKSAvIHNsaWRlci5kdXJhdGlvbjtcclxuLyoqXHJcbiAqIFNsaWRlclRyYWNraW5nIGlzIGRlc2NyaWJlZCBpbiBhIGNvbXBsaWNhdGVkIHdheSBpbiBvc3UhbGF6ZXIsIGJ1dCBpdCBjYW4gYmUgYm9pbGVkIGRvd24gdG86XHJcbiAqXHJcbiAqICogQSBrZXkgbXVzdCBiZSBwcmVzc2VkICg/KVxyXG4gKiAqIFNsaWRlciB0cmFja2luZyBpcyBvbmx5IGRvbmUgYmV0d2VlbiBzbGlkZXIuc3RhcnRUaW1lIChpbmNsdXNpdmVseSkgYW5kIHNsaWRlci5lbmRUaW1lXHJcbiAqIChleGNsdXNpdmVseSkuXHJcbiAqICogVGhlIGZvbGxvdyBjaXJjbGUgaXMgc2NhbGVkIHVwIHRvIDIuNCBpZiB0cmFja2luZywgYW5kIGRvd24gdG8gMS4wIGlmIG5vdCB0cmFja2luZywgdGhlIGN1cnNvciBzaG91bGQgYmVcclxuICogaW4gdGhlIGZvbGxvdyBjaXJjbGUuXHJcbiAqICogQWRkaXRpb25hbGx5IHRoZXJlIGFyZSB0d28gc3RhdGVzIG9mIGEgc2xpZGVyOlxyXG4gKiAgLSBFaXRoZXIgdGhlIGhlYWRlciB3YXMgbm90IGhpdCwgdGhlbiB3ZSBjYW4gYWNjZXB0IGFueSBrZXkgZm9yIHNsaWRlciB0cmFja2luZy5cclxuICpcclxuICogIC0gSWYgdGhlIGhlYWQgd2FzIGhpdCBhdCBgdGAsIHRoZW4gd2UgY2FuIG9ubHkgcmVzdHJpY3QgdGhlIGtleXMgdG8gXCJmcmVzaFwiIGNsaWNrcywgd2hpY2ggbWVhbnMgY2xpY2tzIG5vdFxyXG4gKiBiZWZvcmUgdC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSBzdGF0ZSBjYW4gYmUgMS4gYXQgZmlyc3QgYW5kIHRoZW4gdHJhbnNpdGlvbiB0byAyLlxyXG4gKlxyXG4gKiBJbiBvc3UhbGF6ZXIgdGhlIHRyYWNraW5nIGZvbGxvd3MgdGhlIHZpc3VhbCB0cmFja2luZzpcclxuICogaHR0cHM6Ly9kaXNjb3JkLmNvbS9jaGFubmVscy8xODg2MzA0ODEzMDEwMTI0ODEvMTg4NjMwNjUyMzQwNDA0MjI0Lzg2NTY0ODc0MDgxMDg4MzExMlxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vcHB5L29zdS9ibG9iLzZjZWMxMTQ1ZTM1MTBlYjI3YzZmYmViMGY5Mzk2N2QyZDg3MmU2MDAvb3N1LkdhbWUuUnVsZXNldHMuT3N1L01vZHMvT3N1TW9kQ2xhc3NpYy5jcyNMNjFcclxuICogVGhlIHNsaWRlciBiYWxsIGFjdHVhbGx5IGdyYWR1YWxseSBzY2FsZXMgdG8gMi40IChkdXJhdGlvbjogMzAwbXMsIG1ldGhvZDogRWFzaW5nLk91dFF1aW50KSB3aGljaCBtZWFucyB0aGF0IGF0IHRoZVxyXG4gKiBiZWdpbm5pbmcgdGhlIGN1cnNvciBoYXMgbGVzcyBsZWV3YXkgdGhhbiBhZnRlciAzMDBtcywgd2hpbGUgaW4gb3N1IXN0YWJsZSB5b3UgaW5zdGFudGx5IGhhdmUgdGhlIG1heGltdW0gbGVld2F5LiBJblxyXG4gKiBvc3UhbGF6ZXIgaXQncyBhY3R1YWxseSBhIGxpdHRsZSBiaXQgaGFyZGVyIHRoYW4gb3N1IXN0YWJsZS5cclxuICovXHJcbmZ1bmN0aW9uIGRldGVybWluZVRyYWNraW5nKHByZXZpb3VzbHlUcmFja2luZywgc2xpZGVyLCBjdXJzb3JQb3NpdGlvbiwgdGltZSwgcHJlc3NpbmdTaW5jZSwgaGVhZEhpdFRpbWUsIGhhc1JlbGF4KSB7XHJcbiAgICBjb25zdCBrZXlJc0JlaW5nUHJlc3NlZCA9IHByZXNzaW5nU2luY2UuZmluZEluZGV4KCh4KSA9PiB4ICE9PSBHYW1lU3RhdGVfMS5OT1RfUFJFU1NJTkcpID49IDA7XHJcbiAgICAvLyBaZXJvdGggY29uZGl0aW9uXHJcbiAgICBpZiAoIWtleUlzQmVpbmdQcmVzc2VkICYmICFoYXNSZWxheClcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyBGaXJzdCBjb25kaXRpb25cclxuICAgIGlmICh0aW1lIDwgc2xpZGVyLnN0YXJ0VGltZSB8fCBzbGlkZXIuZW5kVGltZSA8PSB0aW1lKVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIC8vIFNlY29uZCBjb25kaXRpb25cclxuICAgIGNvbnN0IHByb2dyZXNzID0gc2xpZGVyUHJvZ3Jlc3Moc2xpZGVyLCB0aW1lKTtcclxuICAgIGNvbnN0IGZvbGxvd0NpcmNsZVJhZGl1cyA9IChwcmV2aW91c2x5VHJhY2tpbmcgPyAyLjQgOiAxLjApICogc2xpZGVyLnJhZGl1cztcclxuICAgIGNvbnN0IGRpc3RhbmNlQ3Vyc29yVG9CYWxsID0gaW5kZXhfMS5WZWMyLmRpc3RhbmNlKHNsaWRlci5iYWxsUG9zaXRpb25BdChwcm9ncmVzcyksIGN1cnNvclBvc2l0aW9uKTtcclxuICAgIGlmIChkaXN0YW5jZUN1cnNvclRvQmFsbCA+IGZvbGxvd0NpcmNsZVJhZGl1cylcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAvLyBOb3cgbGFzdCBjb25kaXRpb25cclxuICAgIC8vIFN0YXRlIDFcclxuICAgIGlmIChoZWFkSGl0VGltZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBTaW5jZSBhbnkga2V5IGlzIG9rXHJcbiAgICAvLyBGb3IgdGhlIGNsaWNrIHRoYXQgd2FzIGRvbmUgYXQgdD1oZWFkSGl0VGltZTogdCA+PSBoZWFkSGl0VGltZSBpcyB0cnVlLlxyXG4gICAgLy8gSW4gdGhlIG90aGVyIGNhc2UsIHdlIHJlcXVpcmUgYSBmcmVzaCBjbGlja1xyXG4gICAgLy8gU3RhdGUgMiAocmVxdWlyaW5nIGEgZnJlc2ggY2xpY2spXHJcbiAgICByZXR1cm4gcHJlc3NpbmdTaW5jZS5maW5kSW5kZXgoKHgpID0+IHggPj0gaGVhZEhpdFRpbWUpID49IDA7XHJcbn1cclxuZnVuY3Rpb24gc2xpZGVyVmVyZGljdEJhc2VkT25DaGVja3BvaW50cyh0b3RhbENoZWNrcG9pbnRzLCBoaXRDaGVja3BvaW50cykge1xyXG4gICAgaWYgKGhpdENoZWNrcG9pbnRzID09PSB0b3RhbENoZWNrcG9pbnRzKVxyXG4gICAgICAgIHJldHVybiBcIkdSRUFUXCI7XHJcbiAgICBpZiAoaGl0Q2hlY2twb2ludHMgPT09IDApXHJcbiAgICAgICAgcmV0dXJuIFwiTUlTU1wiO1xyXG4gICAgaWYgKGhpdENoZWNrcG9pbnRzICogMiA+PSB0b3RhbENoZWNrcG9pbnRzKVxyXG4gICAgICAgIHJldHVybiBcIk9LXCI7XHJcbiAgICByZXR1cm4gXCJNRUhcIjtcclxufVxyXG4vLyBNYXliZSBoaXRPYmplY3RzIHNob3VsZCBiZSBmbGF0dGVuZWQgb3V0IChuZXN0ZWQgcHVsbGVkIG91dClcclxuLy8gVGhlIG1vZHMgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhvc2UgdGhlbSAuLi5cclxuY29uc3QgYWN0aW9uc1RvQm9vbGVhbnMgPSAob3N1QWN0aW9ucykgPT4gW1xyXG4gICAgb3N1QWN0aW9ucy5pbmNsdWRlcyhSZXBsYXlfMS5Pc3VBY3Rpb24ubGVmdEJ1dHRvbiksXHJcbiAgICBvc3VBY3Rpb25zLmluY2x1ZGVzKFJlcGxheV8xLk9zdUFjdGlvbi5yaWdodEJ1dHRvbiksXHJcbl07XHJcbmNvbnN0IG5ld1ByZXNzaW5nU2luY2UgPSAocHJlc3NpbmdTaW5jZSwgb3N1QWN0aW9ucywgdGltZSkgPT4ge1xyXG4gICAgY29uc3QgcHJlc3NlZCA9IGFjdGlvbnNUb0Jvb2xlYW5zKG9zdUFjdGlvbnMpO1xyXG4gICAgY29uc3QgbmV3UHJlc3NpbmdTaW5jZSA9IFsuLi5wcmVzc2luZ1NpbmNlXTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3UHJlc3NpbmdTaW5jZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChwcmVzc2VkW2ldKSB7XHJcbiAgICAgICAgICAgIG5ld1ByZXNzaW5nU2luY2VbaV0gPSBNYXRoLm1pbihuZXdQcmVzc2luZ1NpbmNlW2ldLCB0aW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5ld1ByZXNzaW5nU2luY2VbaV0gPSBHYW1lU3RhdGVfMS5OT1RfUFJFU1NJTkc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ld1ByZXNzaW5nU2luY2U7XHJcbn07XHJcbmV4cG9ydHMubmV3UHJlc3NpbmdTaW5jZSA9IG5ld1ByZXNzaW5nU2luY2U7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuQnVja2V0ZWRHYW1lU3RhdGVUaW1lTWFjaGluZSA9IHZvaWQgMDtcclxuY29uc3QgR2FtZVN0YXRlXzEgPSByZXF1aXJlKFwiLi9HYW1lU3RhdGVcIik7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vLi4vbWF0aC9pbmRleFwiKTtcclxuY29uc3QgR2FtZVN0YXRlRXZhbHVhdG9yXzEgPSByZXF1aXJlKFwiLi9HYW1lU3RhdGVFdmFsdWF0b3JcIik7XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0IE8oUiBzcXJ0IG4pIG1lbW9yeSBhbmQgTyhzcXJ0IG4pIHRpbWUsIHdoZXJlIFIgaXMgdGhlIHNpemUgb2YgYSByZXBsYXkgc3RhdGUuXHJcbiAqIFN0b3JlcyByZXBsYXlzIGF0IHRoZSBpbmRpY2VzIFswLCBzcXJ0IG4sIDIgKnNxcnQgbiwgLi4uLCBzcXJ0IG4gKiBzcXJ0IG5dIGFuZCB0aGUgb3RoZXJzIGFyZSBpbmZlcnJlZC5cclxuICpcclxuICogVE9ETzogV2UgY291bGQgZG8gY2FjaGluZyBsaWtlIGRlc2NyaWJlZCBpbiBtZXRob2QgNCBvZlxyXG4gKiBodHRwczovL2dhbWVkZXYuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzYwODAvaG93LXRvLWRlc2lnbi1hLXJlcGxheS1zeXN0ZW0vODM3MiM4MzcyIFRPRE86IFNob3VsZCB3ZVxyXG4gKiBPYmplY3QuZnJlZXplKC4uLikgdGhlIGNhY2hlZCBvbmVzIGluIG9yZGVyIHRvIHByZXZlbnQgYWNjaWRlbnRhbCBtdXRhdGlvbnM/XHJcbiAqL1xyXG5jbGFzcyBCdWNrZXRlZEdhbWVTdGF0ZVRpbWVNYWNoaW5lIHtcclxuICAgIGNvbnN0cnVjdG9yKGluaXRpYWxLbm93bkZyYW1lcywgYmVhdG1hcCwgXHJcbiAgICAvLyBwcml2YXRlIHJlYWRvbmx5IGhpdE9iamVjdHM6IE9zdUhpdE9iamVjdFtdLFxyXG4gICAgc2V0dGluZ3MsIGJ1Y2tldFNpemUpIHtcclxuICAgICAgICB0aGlzLmJlYXRtYXAgPSBiZWF0bWFwO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICAvLyAwIHN0YW5kcyBmb3IgaW5pdGlhbCBzdGF0ZVxyXG4gICAgICAgIC8vIGFuZCBpIG1lYW5zIHRoYXQgaSBmcmFtZXMgaGF2ZSBiZWVuIHByb2Nlc3NlZFxyXG4gICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gMDtcclxuICAgICAgICB0aGlzLnN0b3JlZEdhbWVTdGF0ZSA9IFtdO1xyXG4gICAgICAgIC8vIEFkZCBhIGR1bW15IHJlcGxheSBmcmFtZSBhdCB0aGUgYmVnaW5uaW5nLlxyXG4gICAgICAgIHRoaXMuZnJhbWVzID0gW3sgdGltZTogLTcyNzcyNywgcG9zaXRpb246IG5ldyBpbmRleF8xLlZlYzIoMCwgMCksIGFjdGlvbnM6IFtdIH0sIC4uLmluaXRpYWxLbm93bkZyYW1lc107XHJcbiAgICAgICAgdGhpcy5idWNrZXRTaXplID0gYnVja2V0U2l6ZSAhPT0gbnVsbCAmJiBidWNrZXRTaXplICE9PSB2b2lkIDAgPyBidWNrZXRTaXplIDogTWF0aC5jZWlsKE1hdGguc3FydCh0aGlzLmZyYW1lcy5sZW5ndGgpKTtcclxuICAgICAgICB0aGlzLnN0b3JlZEdhbWVTdGF0ZVswXSA9ICgwLCBHYW1lU3RhdGVfMS5kZWZhdWx0R2FtZVN0YXRlKSgpO1xyXG4gICAgICAgIHRoaXMuY3VycmVudEdhbWVTdGF0ZSA9ICgwLCBHYW1lU3RhdGVfMS5jbG9uZUdhbWVTdGF0ZSkodGhpcy5zdG9yZWRHYW1lU3RhdGVbMF0pO1xyXG4gICAgICAgIHRoaXMuZXZhbHVhdG9yID0gbmV3IEdhbWVTdGF0ZUV2YWx1YXRvcl8xLkdhbWVTdGF0ZUV2YWx1YXRvcihiZWF0bWFwLCBzZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBnZXRIaWdoZXN0Q2FjaGVkSW5kZXgodGltZSkge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mcmFtZXMubGVuZ3RoOyBpICs9IHRoaXMuYnVja2V0U2l6ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGUgc2Vjb25kIGNvbmRpdGlvbiBzaG91bGQgbm90IGhhcHBlbiBpbiBvdXIgdmVyc2lvbiBvZiBpbXBsZW1lbnRhdGlvbiB3aGVyZSB3ZSB0cmF2ZWwgZm9yd2FyZC5cclxuICAgICAgICAgICAgaWYgKHRpbWUgPCB0aGlzLmZyYW1lc1tpXS50aW1lIHx8ICF0aGlzLnN0b3JlZEdhbWVTdGF0ZVtpXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgLSB0aGlzLmJ1Y2tldFNpemU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBnYW1lU3RhdGVBdCh0aW1lKSB7XHJcbiAgICAgICAgY29uc3QgaGlnaGVzdENhY2hlZEluZGV4ID0gdGhpcy5nZXRIaWdoZXN0Q2FjaGVkSW5kZXgodGltZSk7XHJcbiAgICAgICAgLy8gVE9ETzogSnVzdCBjaGVjayBpZiB3ZSBoYWQgbm9ybWFsIGZvcndhcmQgYmVoYXZpb3Igb3Igbm90LCB0aGlzIGNhbiBkcmFzdGljYWxseSBpbXByb3ZlIHBlcmZvcm1hbmNlXHJcbiAgICAgICAgLy8gSWYgbm90LCB3ZSBuZWVkIHRvIHJlc2V0IHNvbWV0aGluZyBzdWNoIGFzIHRoZSBkZXJpdmVkIGRhdGEuXHJcbiAgICAgICAgLy8gRWl0aGVyIHdlIGhhdmUgdG8gdHJhdmVsIGJhY2sgYW55d2F5cyBvciB0aGVyZSBpcyBhIGZ1dHVyZSBpbmRleCBhdmFpbGFibGUgZm9yIHRoYXQgdGltZS5cclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5kZXggPCBoaWdoZXN0Q2FjaGVkSW5kZXggfHwgdGltZSA8IHRoaXMuZnJhbWVzW3RoaXMuY3VycmVudEluZGV4XS50aW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEluZGV4ID0gaGlnaGVzdENhY2hlZEluZGV4O1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRHYW1lU3RhdGUgPSAoMCwgR2FtZVN0YXRlXzEuY2xvbmVHYW1lU3RhdGUpKHRoaXMuc3RvcmVkR2FtZVN0YXRlW3RoaXMuY3VycmVudEluZGV4XSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gbW92ZSBmb3J3YXJkIGluIHRpbWVcclxuICAgICAgICB3aGlsZSAodGhpcy5jdXJyZW50SW5kZXggKyAxIDwgdGhpcy5mcmFtZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRGcmFtZSA9IHRoaXMuZnJhbWVzW3RoaXMuY3VycmVudEluZGV4ICsgMV07XHJcbiAgICAgICAgICAgIGlmICh0aW1lIDwgbmV4dEZyYW1lLnRpbWUpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZXZhbHVhdG9yLmV2YWx1YXRlKHRoaXMuY3VycmVudEdhbWVTdGF0ZSwgbmV4dEZyYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW5kZXggKz0gMTtcclxuICAgICAgICAgICAgLy8gQ2FjaGluZyB0aGUgc3RhdGUgYXQgYSBtdWx0aXBsZSBvZiBidWNrZXRTaXplXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbmRleCAlIHRoaXMuYnVja2V0U2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZWRHYW1lU3RhdGVbdGhpcy5jdXJyZW50SW5kZXhdID0gKDAsIEdhbWVTdGF0ZV8xLmNsb25lR2FtZVN0YXRlKSh0aGlzLmN1cnJlbnRHYW1lU3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRHYW1lU3RhdGU7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5CdWNrZXRlZEdhbWVTdGF0ZVRpbWVNYWNoaW5lID0gQnVja2V0ZWRHYW1lU3RhdGVUaW1lTWFjaGluZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5yZXRyaWV2ZUV2ZW50cyA9IGV4cG9ydHMuaXNIaXRPYmplY3RKdWRnZW1lbnQgPSB2b2lkIDA7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vdXRpbHMvaW5kZXhcIik7XHJcbi8vIFR5cGUgcHJlZGljYXRlc1xyXG5jb25zdCBpc0hpdE9iamVjdEp1ZGdlbWVudCA9IChoKSA9PiBoLnR5cGUgPT09IFwiSGl0T2JqZWN0SnVkZ2VtZW50XCI7XHJcbmV4cG9ydHMuaXNIaXRPYmplY3RKdWRnZW1lbnQgPSBpc0hpdE9iamVjdEp1ZGdlbWVudDtcclxuLy8gVGhpcyBpcyBvc3Uhc3RhYmxlIHN0eWxlIGFuZCBpcyBhbHNvIG9ubHkgcmVjb21tZW5kZWQgZm9yIG9mZmxpbmUgcHJvY2Vzc2luZy5cclxuLy8gSW4gdGhlIGZ1dHVyZSwgd2hlcmUgc29tZXRoaW5nIGxpa2Ugb25saW5lIHJlcGxheSBzdHJlYW1pbmcgaXMgaW1wbGVtZW50ZWQsIHRoaXMgaW1wbGVtZW50YXRpb24gd2lsbCBvZmMgYmUgdG9vIHNsb3cuXHJcbmZ1bmN0aW9uIHJldHJpZXZlRXZlbnRzKGdhbWVTdGF0ZSwgaGl0T2JqZWN0cykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZXZlbnRzID0gW107XHJcbiAgICBjb25zdCBkaWN0ID0gKDAsIGluZGV4XzEubm9ybWFsaXplSGl0T2JqZWN0cykoaGl0T2JqZWN0cyk7XHJcbiAgICAvLyBIaXRDaXJjbGUganVkZ2VtZW50cyAoU2xpZGVySGVhZHMgaW5jbHVkZWQgYW5kIGluZGljYXRlZClcclxuICAgIGZvciAoY29uc3QgaWQgaW4gZ2FtZVN0YXRlLmhpdENpcmNsZVZlcmRpY3QpIHtcclxuICAgICAgICBjb25zdCBzdGF0ZSA9IGdhbWVTdGF0ZS5oaXRDaXJjbGVWZXJkaWN0W2lkXTtcclxuICAgICAgICBjb25zdCBoaXRDaXJjbGUgPSBkaWN0W2lkXTtcclxuICAgICAgICBjb25zdCBpc1NsaWRlckhlYWQgPSBoaXRDaXJjbGUuc2xpZGVySWQgIT09IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB2ZXJkaWN0ID0gc3RhdGUudHlwZTtcclxuICAgICAgICBldmVudHMucHVzaCh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiSGl0T2JqZWN0SnVkZ2VtZW50XCIsXHJcbiAgICAgICAgICAgIHRpbWU6IHN0YXRlLmp1ZGdlbWVudFRpbWUsXHJcbiAgICAgICAgICAgIGhpdE9iamVjdElkOiBpZCxcclxuICAgICAgICAgICAgcG9zaXRpb246IGhpdENpcmNsZS5wb3NpdGlvbixcclxuICAgICAgICAgICAgdmVyZGljdCxcclxuICAgICAgICAgICAgaXNTbGlkZXJIZWFkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBpZCBpbiBnYW1lU3RhdGUuc2xpZGVyVmVyZGljdCkge1xyXG4gICAgICAgIGNvbnN0IHZlcmRpY3QgPSBnYW1lU3RhdGUuc2xpZGVyVmVyZGljdFtpZF07XHJcbiAgICAgICAgLy8gU2xpZGVyIGp1ZGdlbWVudCBldmVudHNcclxuICAgICAgICBjb25zdCBzbGlkZXIgPSBkaWN0W2lkXTtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IHNsaWRlci5lbmRQb3NpdGlvbjtcclxuICAgICAgICBldmVudHMucHVzaCh7IHRpbWU6IHNsaWRlci5lbmRUaW1lLCBoaXRPYmplY3RJZDogaWQsIHBvc2l0aW9uLCB2ZXJkaWN0LCB0eXBlOiBcIkhpdE9iamVjdEp1ZGdlbWVudFwiIH0pO1xyXG4gICAgICAgIC8vIENoZWNrcG9pbnRFdmVudHNcclxuICAgICAgICBmb3IgKGNvbnN0IHBvaW50IG9mIHNsaWRlci5jaGVja1BvaW50cykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGVja1BvaW50U3RhdGUgPSBnYW1lU3RhdGUuY2hlY2tQb2ludFZlcmRpY3RbcG9pbnQuaWRdO1xyXG4gICAgICAgICAgICBjb25zdCBoaXQgPSAoX2EgPSBjaGVja1BvaW50U3RhdGUgPT09IG51bGwgfHwgY2hlY2tQb2ludFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjaGVja1BvaW50U3RhdGUuaGl0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgaXNMYXN0VGljayA9IHBvaW50LnR5cGUgPT09IFwiTEFTVF9MRUdBQ1lfVElDS1wiO1xyXG4gICAgICAgICAgICBldmVudHMucHVzaCh7IHRpbWU6IHNsaWRlci5lbmRUaW1lLCBwb3NpdGlvbjogcG9pbnQucG9zaXRpb24sIHR5cGU6IFwiQ2hlY2twb2ludEp1ZGdlbWVudFwiLCBoaXQsIGlzTGFzdFRpY2sgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogU3Bpbm5lciBuZXN0ZWQgdGlja3MgZXZlbnRzXHJcbiAgICByZXR1cm4gZXZlbnRzO1xyXG59XHJcbmV4cG9ydHMucmV0cmlldmVFdmVudHMgPSByZXRyaWV2ZUV2ZW50cztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbi8qKlxyXG4gKiBTaG93cyB0aGUgc3RhdGlzdGljc1xyXG4gKi9cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkdhbWVwbGF5SW5mb0V2YWx1YXRvciA9IGV4cG9ydHMuZGVmYXVsdEdhbWVwbGF5SW5mbyA9IGV4cG9ydHMub3N1U3RhYmxlQWNjdXJhY3kgPSB2b2lkIDA7XHJcbmNvbnN0IEhpdENpcmNsZV8xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvSGl0Q2lyY2xlXCIpO1xyXG5jb25zdCBTbGlkZXJfMSA9IHJlcXVpcmUoXCIuLi9oaXRvYmplY3RzL1NsaWRlclwiKTtcclxuY29uc3QgU2xpZGVyQ2hlY2tQb2ludF8xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvU2xpZGVyQ2hlY2tQb2ludFwiKTtcclxuZnVuY3Rpb24gdXBkYXRlQ29tYm9JbmZvKGNvbWJvLCB0eXBlLCBoaXQpIHtcclxuICAgIGxldCBjdXJyZW50Q29tYm8gPSBjb21iby5jdXJyZW50Q29tYm87XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIFwiSElUX0NJUkNMRVwiOlxyXG4gICAgICAgIGNhc2UgXCJUSUNLXCI6XHJcbiAgICAgICAgY2FzZSBcIlJFUEVBVFwiOlxyXG4gICAgICAgIGNhc2UgXCJTUElOTkVSXCI6XHJcbiAgICAgICAgICAgIGN1cnJlbnRDb21ibyA9IGhpdCA/IGN1cnJlbnRDb21ibyArIDEgOiAwO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiTEFTVF9MRUdBQ1lfVElDS1wiOlxyXG4gICAgICAgICAgICAvLyBTbGlkZXIgZW5kcyBkbyBub3QgYnJlYWsgdGhlIGNvbWJvLCBidXQgdGhleSBjYW4gaW5jcmVhc2UgdGhlbVxyXG4gICAgICAgICAgICBjdXJyZW50Q29tYm8gKz0gaGl0ID8gMSA6IDA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJTTElERVJcIjpcclxuICAgICAgICAgICAgLy8gRm9yIHNsaWRlcnMgdGhlcmUgaXMgbm8gY29tYm8gdXBkYXRlXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgY3VycmVudENvbWJvLCBtYXhDb21ib1NvRmFyOiBNYXRoLm1heChjb21iby5tYXhDb21ib1NvRmFyLCBjdXJyZW50Q29tYm8pIH07XHJcbn1cclxuLyoqIEFDQyAqKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIHVzaW5nIG9zdSFzdGFibGUgYWNjdXJhY3kgbG9naWMuXHJcbiAqIEFsc28gcmV0dXJucyB1bmRlZmluZWQgaWYgdGhlcmUgaXMgbm8gY291bnRcclxuICpcclxuICogQHBhcmFtIGNvdW50IGNvdW50cyBvZiAzMDAsIDEwMCwgNTAsIDAgKGluIHRoaXMgb3JkZXIpXHJcbiAqL1xyXG5mdW5jdGlvbiBvc3VTdGFibGVBY2N1cmFjeShjb3VudCkge1xyXG4gICAgaWYgKGNvdW50Lmxlbmd0aCAhPT0gNCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBKdWRnZW1lbnRTY29yZXMgPSBbMzAwLCAxMDAsIDUwLCAwXTtcclxuICAgIGxldCBwZXJmZWN0ID0gMCwgYWN0dWFsID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBhY3R1YWwgKz0gSnVkZ2VtZW50U2NvcmVzW2ldICogY291bnRbaV07XHJcbiAgICAgICAgcGVyZmVjdCArPSBKdWRnZW1lbnRTY29yZXNbMF0gKiBjb3VudFtpXTtcclxuICAgIH1cclxuICAgIGlmIChwZXJmZWN0ID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHJldHVybiBhY3R1YWwgLyBwZXJmZWN0O1xyXG59XHJcbmV4cG9ydHMub3N1U3RhYmxlQWNjdXJhY3kgPSBvc3VTdGFibGVBY2N1cmFjeTtcclxuLy9odHRwczovL29zdS5wcHkuc2gvd2lraS9lbi9TY29yZS9TY29yZVYxXHJcbmNvbnN0IGRlZmF1bHRFdmFsdWF0aW9uT3B0aW9ucyA9IHtcclxuICAgIHNjb3JpbmdTeXN0ZW06IFwiU2NvcmVWMVwiLFxyXG59O1xyXG5leHBvcnRzLmRlZmF1bHRHYW1lcGxheUluZm8gPSBPYmplY3QuZnJlZXplKHtcclxuICAgIGN1cnJlbnRDb21ibzogMCxcclxuICAgIG1heENvbWJvU29GYXI6IDAsXHJcbiAgICB2ZXJkaWN0Q291bnRzOiBbMCwgMCwgMCwgMF0sXHJcbiAgICBhY2N1cmFjeTogMCxcclxuICAgIHNjb3JlOiAwLFxyXG59KTtcclxuLyoqXHJcbiAqIENhbGN1bGF0aW5nOiBDb3VudCwgQWNjdXJhY3ksIENvbWJvLCBNYXhDb21ib1xyXG4gKiBUaGUgb25lIHdobyBpcyBjYWxsaW5nIHRoaXMgaGFzIHRvIG1ha2Ugc3VyZSB0aGF0IHNsaWRlciBoZWFkcyBhcmUgbm90IGNvbnNpZGVyZWQgaW4gY2FzZSB0aGV5IGFyZSB1c2luZyBvc3Uhc3RhYmxlXHJcbiAqIGNhbGN1bGF0aW9uLlxyXG4gKi9cclxuY2xhc3MgR2FtZXBsYXlJbmZvRXZhbHVhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKGJlYXRtYXAsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmJlYXRtYXAgPSBiZWF0bWFwO1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEV2YWx1YXRpb25PcHRpb25zKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5jb21ib0luZm8gPSB7IG1heENvbWJvU29GYXI6IDAsIGN1cnJlbnRDb21ibzogMCB9O1xyXG4gICAgICAgIHRoaXMudmVyZGljdENvdW50ID0geyBNSVNTOiAwLCBNRUg6IDAsIEdSRUFUOiAwLCBPSzogMCB9O1xyXG4gICAgICAgIHRoaXMuanVkZ2VkT2JqZWN0c0luZGV4ID0gMDtcclxuICAgICAgICAvLyBUT0RPOiBEbyBzb21lIGluaXRpYWxpemF0aW9uIGZvciBjYWxjdWxhdGluZyBTY29yZVYyIChsaWtlIG1heCBzY29yZSlcclxuICAgIH1cclxuICAgIGV2YWx1YXRlSGl0T2JqZWN0KGhpdE9iamVjdFR5cGUsIHZlcmRpY3QsIGlzU2xpZGVySGVhZCkge1xyXG4gICAgICAgIHRoaXMuY29tYm9JbmZvID0gdXBkYXRlQ29tYm9JbmZvKHRoaXMuY29tYm9JbmZvLCBoaXRPYmplY3RUeXBlLCB2ZXJkaWN0ICE9PSBcIk1JU1NcIik7XHJcbiAgICAgICAgaWYgKCFpc1NsaWRlckhlYWQpIHtcclxuICAgICAgICAgICAgdGhpcy52ZXJkaWN0Q291bnRbdmVyZGljdF0gKz0gMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBldmFsdWF0ZVNsaWRlckNoZWNrcG9pbnQoaGl0T2JqZWN0VHlwZSwgaGl0KSB7XHJcbiAgICAgICAgdGhpcy5jb21ib0luZm8gPSB1cGRhdGVDb21ib0luZm8odGhpcy5jb21ib0luZm8sIGhpdE9iamVjdFR5cGUsIGhpdCk7XHJcbiAgICB9XHJcbiAgICBjb3VudEFzQXJyYXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIFtcIkdSRUFUXCIsIFwiT0tcIiwgXCJNRUhcIiwgXCJNSVNTXCJdLm1hcCgodikgPT4gdGhpcy52ZXJkaWN0Q291bnRbdl0pO1xyXG4gICAgfVxyXG4gICAgZXZhbHVhdGVSZXBsYXlTdGF0ZShyZXBsYXlTdGF0ZSkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBBc3N1bWUgc29tZXRoaW5nIGxpa2Ugc2Vla2luZyBiYWNrd2FyZHMgaGFwcGVuZWQgYXQgcmVldmFsdWF0ZVxyXG4gICAgICAgIGlmICh0aGlzLmp1ZGdlZE9iamVjdHNJbmRleCA+PSByZXBsYXlTdGF0ZS5qdWRnZWRPYmplY3RzLmxlbmd0aCArIDEpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21ib0luZm8gPSB7IG1heENvbWJvU29GYXI6IDAsIGN1cnJlbnRDb21ibzogMCB9O1xyXG4gICAgICAgICAgICB0aGlzLnZlcmRpY3RDb3VudCA9IHsgTUlTUzogMCwgTUVIOiAwLCBHUkVBVDogMCwgT0s6IDAgfTtcclxuICAgICAgICAgICAgdGhpcy5qdWRnZWRPYmplY3RzSW5kZXggPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB3aGlsZSAodGhpcy5qdWRnZWRPYmplY3RzSW5kZXggPCByZXBsYXlTdGF0ZS5qdWRnZWRPYmplY3RzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCBpZCA9IHJlcGxheVN0YXRlLmp1ZGdlZE9iamVjdHNbdGhpcy5qdWRnZWRPYmplY3RzSW5kZXgrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGhpdE9iamVjdCA9IHRoaXMuYmVhdG1hcC5nZXRIaXRPYmplY3QoaWQpO1xyXG4gICAgICAgICAgICBpZiAoaGl0T2JqZWN0IGluc3RhbmNlb2YgU2xpZGVyQ2hlY2tQb2ludF8xLlNsaWRlckNoZWNrUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhpdCA9IHJlcGxheVN0YXRlLmNoZWNrUG9pbnRWZXJkaWN0W2hpdE9iamVjdC5pZF0uaGl0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmFsdWF0ZVNsaWRlckNoZWNrcG9pbnQoaGl0T2JqZWN0LnR5cGUsIGhpdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoaGl0T2JqZWN0IGluc3RhbmNlb2YgSGl0Q2lyY2xlXzEuSGl0Q2lyY2xlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2ZXJkaWN0ID0gcmVwbGF5U3RhdGUuaGl0Q2lyY2xlVmVyZGljdFtpZF0udHlwZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlzU2xpZGVySGVhZCA9IGhpdE9iamVjdC5zbGlkZXJJZCAhPT0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmFsdWF0ZUhpdE9iamVjdChoaXRPYmplY3QudHlwZSwgdmVyZGljdCwgaXNTbGlkZXJIZWFkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChoaXRPYmplY3QgaW5zdGFuY2VvZiBTbGlkZXJfMS5TbGlkZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHZlcmRpY3QgPSByZXBsYXlTdGF0ZS5zbGlkZXJWZXJkaWN0W2hpdE9iamVjdC5pZF07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2YWx1YXRlSGl0T2JqZWN0KGhpdE9iamVjdC50eXBlLCB2ZXJkaWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFNwaW5uZXJcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFdlIGp1c3QgZ29pbmcgdG8gYXNzdW1lIHRoYXQgdGhleSBoaXQgaXRcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZhbHVhdGVIaXRPYmplY3QoXCJTUElOTkVSXCIsIFwiR1JFQVRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY291bnRzID0gdGhpcy5jb3VudEFzQXJyYXkoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzY29yZTogMCxcclxuICAgICAgICAgICAgdmVyZGljdENvdW50czogY291bnRzLFxyXG4gICAgICAgICAgICBhY2N1cmFjeTogKF9hID0gb3N1U3RhYmxlQWNjdXJhY3koY291bnRzKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMS4wLFxyXG4gICAgICAgICAgICBjdXJyZW50Q29tYm86IHRoaXMuY29tYm9JbmZvLmN1cnJlbnRDb21ibyxcclxuICAgICAgICAgICAgbWF4Q29tYm9Tb0ZhcjogdGhpcy5jb21ib0luZm8ubWF4Q29tYm9Tb0ZhcixcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuR2FtZXBsYXlJbmZvRXZhbHVhdG9yID0gR2FtZXBsYXlJbmZvRXZhbHVhdG9yO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLkhpdENpcmNsZSA9IHZvaWQgMDtcclxuY2xhc3MgSGl0Q2lyY2xlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuaGl0VGltZSA9IDA7XHJcbiAgICAgICAgdGhpcy5hcHByb2FjaER1cmF0aW9uID0gMDtcclxuICAgICAgICB0aGlzLmZhZGVJbkR1cmF0aW9uID0gMDtcclxuICAgICAgICB0aGlzLmNvbWJvU2V0SW5kZXggPSAwO1xyXG4gICAgICAgIHRoaXMud2l0aGluQ29tYm9TZXRJbmRleCA9IDA7XHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IDE7XHJcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgICAgIC8vIE9ubHkgdXNlZCBiZWNhdXNlIHRoZXJlJ3MgYSBidWcgaW4gdGhlIEZsYXNobGlnaHQgZGlmZmljdWx0eSBwcm9jZXNzaW5nXHJcbiAgICAgICAgdGhpcy51bnN0YWNrZWRQb3NpdGlvbiA9IHsgeDogMCwgeTogMCB9O1xyXG4gICAgfVxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiSElUX0NJUkNMRVwiO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJhZGl1cygpIHtcclxuICAgICAgICByZXR1cm4gSGl0Q2lyY2xlLk9CSkVDVF9SQURJVVMgKiB0aGlzLnNjYWxlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNwYXduVGltZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oaXRUaW1lIC0gdGhpcy5hcHByb2FjaER1cmF0aW9uO1xyXG4gICAgfVxyXG4gICAgZ2V0IHRpbWVGYWRlSW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmFkZUluRHVyYXRpb247XHJcbiAgICB9XHJcbiAgICBvcGFjaXR5QXQodGltZSwgaGlkZGVuKSB7XHJcbiAgICAgICAgaWYgKHRpbWUgPiB0aGlzLmhpdFRpbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDAuMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZhZGVJblN0YXJ0VGltZSA9IHRoaXMuc3Bhd25UaW1lO1xyXG4gICAgICAgIGxldCBmYWRlSW5EdXJhdGlvbiA9IHRoaXMudGltZUZhZGVJbjtcclxuICAgICAgICBpZiAoaGlkZGVuKSB7XHJcbiAgICAgICAgICAgIGxldCBmYWRlT3V0U3RhcnRUaW1lID0gZmFkZUluU3RhcnRUaW1lICsgZmFkZUluRHVyYXRpb247XHJcbiAgICAgICAgICAgIGxldCBmYWRlT3V0RHVyYXRpb24gPSB0aGlzLmFwcHJvYWNoRHVyYXRpb24gKiAwLjM7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihNYXRoLm1pbihNYXRoLm1heCgodGltZSAtIGZhZGVJblN0YXJ0VGltZSkgLyBmYWRlSW5EdXJhdGlvbiwgMCksIDEpLCAxLjAgLSBNYXRoLm1pbihNYXRoLm1heCgodGltZSAtIGZhZGVPdXRTdGFydFRpbWUpIC8gZmFkZU91dER1cmF0aW9uLCAwKSwgMSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoKHRpbWUgLSBmYWRlSW5TdGFydFRpbWUpIC8gZmFkZUluRHVyYXRpb24sIDApLCAxKTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLkhpdENpcmNsZSA9IEhpdENpcmNsZTtcclxuSGl0Q2lyY2xlLk9CSkVDVF9SQURJVVMgPSA2NDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5TbGlkZXIgPSB2b2lkIDA7XHJcbmNvbnN0IFNsaWRlclBhdGhfMSA9IHJlcXVpcmUoXCIuL3NsaWRlci9TbGlkZXJQYXRoXCIpO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL21hdGgvaW5kZXhcIik7XHJcbmNsYXNzIFNsaWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihoaXRDaXJjbGUpIHtcclxuICAgICAgICB0aGlzLmlkID0gXCJcIjtcclxuICAgICAgICB0aGlzLnBhdGggPSBuZXcgU2xpZGVyUGF0aF8xLlNsaWRlclBhdGgoW10pO1xyXG4gICAgICAgIHRoaXMuY2hlY2tQb2ludHMgPSBbXTtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMTtcclxuICAgICAgICB0aGlzLnRpY2tEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgdGhpcy50aWNrRGlzdGFuY2VNdWx0aXBsaWVyID0gMTtcclxuICAgICAgICB0aGlzLnJlcGVhdENvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmhlYWQgPSBoaXRDaXJjbGU7XHJcbiAgICB9XHJcbiAgICBnZXQgdHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJTTElERVJcIjtcclxuICAgIH1cclxuICAgIGdldCBzcGF3blRpbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZC5zcGF3blRpbWU7XHJcbiAgICB9XHJcbiAgICAvLyBOdW1iZXIgb2YgdGltZXMgdGhlIHNsaWRlciBzcGFucyBvdmVyIHRoZSBzY3JlZW4uXHJcbiAgICBnZXQgc3BhbkNvdW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlcGVhdENvdW50ICsgMTtcclxuICAgIH1cclxuICAgIGdldCBzY2FsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWFkLnNjYWxlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJhZGl1cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWFkLnJhZGl1cztcclxuICAgIH1cclxuICAgIGdldCBzcGFuRHVyYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZHVyYXRpb24gLyB0aGlzLnNwYW5Db3VudDtcclxuICAgIH1cclxuICAgIGdldCBkdXJhdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbmRUaW1lIC0gdGhpcy5zdGFydFRpbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgc3RhcnRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhlYWQuaGl0VGltZTtcclxuICAgIH1cclxuICAgIGdldCBlbmRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0VGltZSArICh0aGlzLnNwYW5Db3VudCAqIHRoaXMucGF0aC5kaXN0YW5jZSkgLyB0aGlzLnZlbG9jaXR5O1xyXG4gICAgfVxyXG4gICAgZ2V0IHN0YXJ0UG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaGVhZC5wb3NpdGlvbjtcclxuICAgIH1cclxuICAgIGdldCBlbmRQb3NpdGlvbigpIHtcclxuICAgICAgICAvLyBUT0RPOiBDYWNoaW5nIGxpa2UgaW4gb3N1IWxhemVyIHNpbmNlIHRoaXMgdGFrZXMgYSBsb3Qgb2YgdGltZVxyXG4gICAgICAgIHJldHVybiBpbmRleF8xLlZlYzIuYWRkKHRoaXMuaGVhZC5wb3NpdGlvbiwgdGhpcy5iYWxsT2Zmc2V0QXQoMS4wKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgdW5zdGFja2VkRW5kUG9zaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4XzEuVmVjMi5hZGQodGhpcy5oZWFkLnVuc3RhY2tlZFBvc2l0aW9uLCB0aGlzLmJhbGxPZmZzZXRBdCgxLjApKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgYWJzb2x1dGUgcG9zaXRpb24gb2YgdGhlIGJhbGwgZ2l2ZW4gdGhlIHByb2dyZXNzIHAsIHdoZXJlIHAgaXMgdGhlIHBlcmNlbnRhZ2Ugb2YgdGltZSBwYXNzZWRcclxuICAgICAqIGJldHdlZW4gc3RhcnRUaW1lIGFuZCBlbmRUaW1lLlxyXG4gICAgICogQHBhcmFtIHByb2dyZXNzXHJcbiAgICAgKi9cclxuICAgIGJhbGxQb3NpdGlvbkF0KHByb2dyZXNzKSB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4XzEuVmVjMi5hZGQodGhpcy5oZWFkLnBvc2l0aW9uLCB0aGlzLmJhbGxPZmZzZXRBdChwcm9ncmVzcykpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBnaXZlbiB0aGUgKHRpbWUpIHByb2dyZXNzLiBCYXNpY2FsbHkgaXQganVzdCB0ZWxscyB5b3Ugd2hlcmUgdGhlIHNsaWRlciBiYWxsIHNob3VsZCBiZSBhZnRlclxyXG4gICAgICogcCUgb2YgdGltZSBoYXMgcGFzc2VkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIGRldGVybWluaW5nIHRoZSB0aW1lIHByb2dyZXNzXHJcbiAgICAgKi9cclxuICAgIGJhbGxPZmZzZXRBdChwcm9ncmVzcykge1xyXG4gICAgICAgIGNvbnN0IHNwYW5Qcm9ncmVzcyA9IHByb2dyZXNzICogdGhpcy5zcGFuQ291bnQ7XHJcbiAgICAgICAgbGV0IHByb2dyZXNzSW5TcGFuID0gc3BhblByb2dyZXNzICUgMS4wO1xyXG4gICAgICAgIC8vIFdoZW4gaXQncyBcInJldHVybmluZ1wiIHdlIHNob3VsZCBjb25zaWRlciB0aGUgcHJvZ3Jlc3MgaW4gYW4gaW52ZXJ0ZWQgd2F5LlxyXG4gICAgICAgIGlmIChNYXRoLmZsb29yKHNwYW5Qcm9ncmVzcykgJSAyID09PSAxKSB7XHJcbiAgICAgICAgICAgIHByb2dyZXNzSW5TcGFuID0gMS4wIC0gcHJvZ3Jlc3NJblNwYW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9zaXRpb25BdChwcm9ncmVzc0luU3Bhbik7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5TbGlkZXIgPSBTbGlkZXI7XHJcbi8vIHNjb3JpbmcgZGlzdGFuY2Ugd2l0aCBhIHNwZWVkLWFkanVzdGVkIGJlYXQgbGVuZ3RoIG9mIDEgc2Vjb25kIChpLmUuIHRoZSBzcGVlZCBzbGlkZXIgYmFsbHNcclxuLy8gbW92ZSB0aHJvdWdoIHRoZWlyIHRyYWNrKS5cclxuU2xpZGVyLkJBU0VfU0NPUklOR19ESVNUQU5DRSA9IDEwMDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5TbGlkZXJDaGVja1BvaW50ID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL21hdGgvaW5kZXhcIik7XHJcbi8vIEltcG9ydGFudCBwb2ludHMgb24gdGhlIHNsaWRlci4gRGVwZW5kaW5nIG9uIGlmIHRoZXkgd2VyZSBcImhpdFwiIG9yIG5vdCwgd2Ugd2lsbCBoYXZlIGEgZGlmZmVyZW50IGp1ZGdlbWVudCBvbiB0aGVcclxuLy8gc2xpZGVyLlxyXG5jbGFzcyBTbGlkZXJDaGVja1BvaW50IHtcclxuICAgIGNvbnN0cnVjdG9yKHNsaWRlcikge1xyXG4gICAgICAgIHRoaXMuc2xpZGVyID0gc2xpZGVyO1xyXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFwiVElDS1wiO1xyXG4gICAgICAgIHRoaXMuc3BhbkluZGV4ID0gMDtcclxuICAgICAgICAvLyBUaGUgYHNwYW5Qcm9ncmVzc2AgaXMgYSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxIHRoYXQgZGV0ZXJtaW5lcyB0aGUgcG9zaXRpb24gb24gdGhlIHNsaWRlciBwYXRoLlxyXG4gICAgICAgIHRoaXMuc3BhblByb2dyZXNzID0gMDtcclxuICAgICAgICB0aGlzLnNwYW5TdGFydFRpbWUgPSAwO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0ID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgdGhpcy5oaXRUaW1lID0gMDtcclxuICAgIH1cclxuICAgIGdldCBwb3NpdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gaW5kZXhfMS5WZWMyLmFkZCh0aGlzLnNsaWRlci5zdGFydFBvc2l0aW9uLCB0aGlzLm9mZnNldCk7XHJcbiAgICB9XHJcbiAgICBnZXQgc2NhbGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2xpZGVyLnNjYWxlO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuU2xpZGVyQ2hlY2tQb2ludCA9IFNsaWRlckNoZWNrUG9pbnQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuU3Bpbm5lciA9IHZvaWQgMDtcclxuLyoqXHJcbiAqIExvZ2ljOlxyXG4gKlxyXG4gKiAqIEFzc3VtcHRpb24gaXMgdGhhdCB0aGUgdXNlciBjYW4ndCBzcGluIG1vcmUgdGhhbiA4IHRpbWVzIHBlciBzZWNvbmQgYG1heF9yb3RhdGlvbnNfcGVyX3NlY29uZD04YC5cclxuICogKiBcIk1heFNwaW5zUG9zc2libGVcIiBcIk1pblNwaW5zTmVlZGVkXCJcclxuICpcclxuICpcclxuICogVGhlbiB0aGVyZSBhcmUgbGlrZSBcIk1heFNwaW5zUG9zc2libGVcIiBzcGlubmVyIHRpY2tzIGdlbmVyYXRlZCAoPz8/KSB3aGljaCBoYXZlIGEgc3RhcnQgdGltZSBvZiBbMCwgZCwgMmQsIC4uLixcclxuICogbWF4U3BpbnNQb3NzaWJsZSAqIGRdIHdoZXJlIGQgaXMgdGhlIGR1cmF0aW9uIG9mIG9uZSBzcGluLlxyXG4gKlxyXG4gKiAxMDAlIG1pbiBzcGlubmVkIC0+IEdSRUFUXHJcbiAqID4gOTAlLT4gT0tcclxuICogPiA3NSUgLT4gTUVIXHJcbiAqIG90aGVyd2lzZSBtaXNzXHJcbiAqIHJlcXVpcmVzIGdhbWVDbG9jayBwbGF5UmF0ZVxyXG4gKlxyXG4gKlxyXG4gKiAgICAgICAgICAgICAgICAgaWYgKEhpdE9iamVjdC5TcGluc1JlcXVpcmVkID09IDApXHJcbiAvLyBzb21lIHNwaW5uZXJzIGFyZSBzbyBzaG9ydCB0aGV5IGNhbid0IHJlcXVpcmUgYW4gaW50ZWdlciBzcGluIGNvdW50LlxyXG4gLy8gdGhlc2UgYmVjb21lIGltcGxpY2l0bHkgaGl0LlxyXG4gcmV0dXJuIDE7XHJcbiAqIFNQTSBjb3VudCBpcyBjYWxjdWxhdGVkIGFzIGZvbGxvd3M6XHJcbiAqXHJcbiAqIEZpcnN0IGRlZmluZSBhIHRpbWUgd2luZG93IHNwbV9jb3VudF9kdXJhdGlvbiA9IDU5NW1zIGZvciBleGFtcGxlIHRoZW4gZmluZCBvdXQgaG93IG11Y2ggeW91IGhhdmUgc3Bpbm5lZCBhdCB0XHJcbiAqIGNvbXBhcmVkIHRvIHQgLSBzcG1fY291bnRfZHVyYXRpb24uXHJcbiAqXHJcbiAqIFRoaXMgaXMgZG9uZSBieSBrZWVwaW5nIHRyYWNrIHdpdGggYSBxdWV1ZSBvZiAodCwgdG90YWxfcm90YXRpb24pIGJ5IG1vc3QgcGVvcGxlXHJcbiAqXHJcbiAqL1xyXG4vLyBTb3VyY2VzOiBodHRwczovL2dpdGh1Yi5jb20vaXRkZWxhdHJpc3Uvb3BzdS9ibG9iL21hc3Rlci9zcmMvaXRkZWxhdHJpc3Uvb3BzdS9vYmplY3RzL1NwaW5uZXIuamF2YVxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vTWNLYXk0Mi9NY09zdS9ibG9iL21hc3Rlci9zcmMvQXBwL09zdS9Pc3VTcGlubmVyLmNwcFxyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcHB5L29zdS9ibG9iL21hc3Rlci9vc3UuR2FtZS5SdWxlc2V0cy5Pc3UvT2JqZWN0cy9EcmF3YWJsZXMvRHJhd2FibGVTcGlubmVyLmNzXHJcbmZ1bmN0aW9uIGRpZmZSYW5nZShkaWZmaWN1bHR5LCBtaW4sIG1pZCwgbWF4KSB7XHJcbiAgICBpZiAoZGlmZmljdWx0eSA+IDUpXHJcbiAgICAgICAgcmV0dXJuIG1pZCArICgobWF4IC0gbWlkKSAqIChkaWZmaWN1bHR5IC0gNSkpIC8gNTtcclxuICAgIGlmIChkaWZmaWN1bHR5IDwgNSlcclxuICAgICAgICByZXR1cm4gbWlkIC0gKChtaWQgLSBtaW4pICogKDUgLSBkaWZmaWN1bHR5KSkgLyA1O1xyXG4gICAgcmV0dXJuIG1pZDtcclxufVxyXG5jbGFzcyBTcGlubmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaWQgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gMDtcclxuICAgICAgICB0aGlzLmR1cmF0aW9uID0gMDtcclxuICAgICAgICB0aGlzLnNwaW5zUmVxdWlyZWQgPSAxO1xyXG4gICAgICAgIHRoaXMubWF4aW11bUJvbnVzU3BpbnMgPSAxO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIHNwaW5uZXIgaXMgdmlzaWJsZSB3YXkgZWFybGllciwgYnV0IGNhbiBvbmx5IGJlIGludGVyYWN0ZWQgd2l0aCBhdCBbc3RhcnRUaW1lLCBlbmRUaW1lXVxyXG4gICAgZ2V0IHNwYXduVGltZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFRpbWU7XHJcbiAgICB9XHJcbiAgICBnZXQgZW5kVGltZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGFydFRpbWUgKyB0aGlzLmR1cmF0aW9uO1xyXG4gICAgfVxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU1BJTk5FUlwiO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuU3Bpbm5lciA9IFNwaW5uZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuaXNTcGlubmVyID0gZXhwb3J0cy5pc1NsaWRlciA9IGV4cG9ydHMuaXNIaXRDaXJjbGUgPSB2b2lkIDA7XHJcbmNvbnN0IGlzSGl0Q2lyY2xlID0gKG8pID0+IG8udHlwZSA9PT0gXCJISVRfQ0lSQ0xFXCI7XHJcbmV4cG9ydHMuaXNIaXRDaXJjbGUgPSBpc0hpdENpcmNsZTtcclxuY29uc3QgaXNTbGlkZXIgPSAobykgPT4gby50eXBlID09PSBcIlNMSURFUlwiO1xyXG5leHBvcnRzLmlzU2xpZGVyID0gaXNTbGlkZXI7XHJcbmNvbnN0IGlzU3Bpbm5lciA9IChvKSA9PiBvLnR5cGUgPT09IFwiU1BJTk5FUlwiO1xyXG5leHBvcnRzLmlzU3Bpbm5lciA9IGlzU3Bpbm5lcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5QYXRoQXBwcm94aW1hdG9yID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uLy4uL21hdGgvaW5kZXhcIik7XHJcbi8vIFRPRE86IE1vdmUgdG8gb3N1LW1hdGhcclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3BweS9vc3UtZnJhbWV3b3JrL2Jsb2IvZjlkNDRiMTQxNGUzMGFkNTA3ODk0ZWY3ZWFhZjVkMWIwMTE4YmU4Mi9vc3UuRnJhbWV3b3JrL1V0aWxzL1BhdGhBcHByb3hpbWF0b3IuY3NcclxuY29uc3QgYmV6aWVyVG9sZXJhbmNlID0gTWF0aC5mcm91bmQoMC4yNSk7XHJcbmNvbnN0IGNpcmN1bGFyQXJjVG9sZXJhbmNlID0gTWF0aC5mcm91bmQoMC4xKTtcclxuLy8gVGhlIGFtb3VudCBvZiBwaWVjZXMgdG8gY2FsY3VsYXRlIGZvciBlYWNoIGNvbnRyb2wgcG9pbnQgcXVhZHJ1cGxldC5cclxuY29uc3QgY2F0bXVsbERldGFpbCA9IDUwO1xyXG5jb25zdCB0b0Zsb2F0ID0gKHgpID0+IE1hdGguZnJvdW5kKHgpO1xyXG4vKipcclxuICogSGVscGVyIG1ldGhvZHMgdG8gYXBwcm94aW1hdGUgYSBwYXRoIGJ5IGludGVycG9sYXRpbmcgYSBzZXF1ZW5jZSBvZiBjb250cm9sIHBvaW50cy5cclxuICovXHJcbmNsYXNzIFBhdGhBcHByb3hpbWF0b3Ige1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcGllY2V3aXNlLWxpbmVhciBhcHByb3hpbWF0aW9uIG9mIGEgYmV6aWVyIGN1cnZlLCBieSBhZGFwdGl2ZWx5IHJlcGVhdGVkbHkgc3ViZGl2aWRpbmdcclxuICAgICAqIHRoZSBjb250cm9sIHBvaW50cyB1bnRpbCB0aGVpciBhcHByb3hpbWF0aW9uIGVycm9yIHZhbmlzaGVzIGJlbG93IGEgZ2l2ZW4gdGhyZXNob2xkLlxyXG4gICAgICogQHJldHVybnMgQSBsaXN0IG9mIHZlY3RvcnMgcmVwcmVzZW50aW5nIHRoZSBwaWVjZXdpc2UtbGluZWFyIGFwcHJveGltYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhcHByb3hpbWF0ZUJlemllcihjb250cm9sUG9pbnRzLCBwID0gMCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBjb25zdCBuID0gY29udHJvbFBvaW50cy5sZW5ndGggLSAxO1xyXG4gICAgICAgIGlmIChuIDwgMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBCb3RoIFN0YWNrczw+XHJcbiAgICAgICAgY29uc3QgdG9GbGF0dGVuID0gW107XHJcbiAgICAgICAgY29uc3QgZnJlZUJ1ZmZlcnMgPSBbXTtcclxuICAgICAgICAvLyBDcmVhdGVzIGEgY29weSBvZiBjb250cm9sUG9pbnRzXHJcbiAgICAgICAgY29uc3QgcG9pbnRzID0gWy4uLmNvbnRyb2xQb2ludHNdO1xyXG4gICAgICAgIGlmIChwID4gMCAmJiBwIDwgbikge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4gLSBwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YkJlemllciA9IG5ldyBBcnJheShwICsgMSk7XHJcbiAgICAgICAgICAgICAgICBzdWJCZXppZXJbMF0gPSBwb2ludHNbaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHAgLSAxOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJCZXppZXJbaiArIDFdID0gcG9pbnRzW2kgKyAxXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMTsgayA8IHAgLSBqOyBrKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbCA9IE1hdGgubWluKGssIG4gLSBwIC0gaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1tpICsga10gPSBwb2ludHNbaSArIGtdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUobClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGQocG9pbnRzW2kgKyBrICsgMV0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2NhbGUoMSAvIChsICsgMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN1YkJlemllcltwXSA9IHBvaW50c1tpICsgMV07XHJcbiAgICAgICAgICAgICAgICB0b0ZsYXR0ZW4ucHVzaChzdWJCZXppZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE86IElzIHRoaXMgc2FtZSBhcyAgcG9pbnRzWyhuLXApLi5dKSBhcyBpbiBDIyA/XHJcbiAgICAgICAgICAgIHRvRmxhdHRlbi5wdXNoKHBvaW50cy5zbGljZShuIC0gcCwgcG9pbnRzLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBJcyB0aGlzIGFzIGluIHRoZSBvc3UhbGF6ZXIgY29kZT9cclxuICAgICAgICAgICAgLy8gUmV2ZXJzZSB0aGUgc3RhY2sgc28gZWxlbWVudHMgY2FuIGJlIGFjY2Vzc2VkIGluIG9yZGVyXHJcbiAgICAgICAgICAgIHRvRmxhdHRlbi5yZXZlcnNlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBCLXNwbGluZSBzdWJkaXZpc2lvbnMgdW5uZWNlc3NhcnksIGRlZ2VuZXJhdGUgdG8gc2luZ2xlIGJlemllclxyXG4gICAgICAgICAgICBwID0gbjtcclxuICAgICAgICAgICAgdG9GbGF0dGVuLnB1c2gocG9pbnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc3ViZGl2aXNpb25CdWZmZXIxID0gbmV3IEFycmF5KHAgKyAxKTtcclxuICAgICAgICBjb25zdCBzdWJkaXZpc2lvbkJ1ZmZlcjIgPSBuZXcgQXJyYXkocCAqIDIgKyAxKTtcclxuICAgICAgICBjb25zdCBsZWZ0Q2hpbGQgPSBzdWJkaXZpc2lvbkJ1ZmZlcjI7XHJcbiAgICAgICAgLy8gbGV0IGxlZnRDaGlsZCA9IHN1YmRpdmlzaW9uQnVmZmVyMjtcclxuICAgICAgICB3aGlsZSAodG9GbGF0dGVuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gQ2FuJ3QgYmUgdW5kZWZpbmVkIGR1ZGVcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdG9GbGF0dGVuLnBvcCgpO1xyXG4gICAgICAgICAgICBpZiAoUGF0aEFwcHJveGltYXRvci5fYmV6aWVySXNGbGF0RW5vdWdoKHBhcmVudCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjb250cm9sIHBvaW50cyB3ZSBjdXJyZW50bHkgb3BlcmF0ZSBvbiBhcmUgc3VmZmljaWVudGx5IFwiZmxhdFwiLCB3ZSB1c2VcclxuICAgICAgICAgICAgICAgIC8vIGFuIGV4dGVuc2lvbiB0byBEZSBDYXN0ZWxqYXUncyBhbGdvcml0aG0gdG8gb2J0YWluIGEgcGllY2V3aXNlLWxpbmVhciBhcHByb3hpbWF0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBvZiB0aGUgYmV6aWVyIGN1cnZlIHJlcHJlc2VudGVkIGJ5IG91ciBjb250cm9sIHBvaW50cywgY29uc2lzdGluZyBvZiB0aGUgc2FtZSBhbW91bnRcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvaW50cyBhcyB0aGVyZSBhcmUgY29udHJvbCBwb2ludHMuXHJcbiAgICAgICAgICAgICAgICBQYXRoQXBwcm94aW1hdG9yLl9iZXppZXJBcHByb3hpbWF0ZShwYXJlbnQsIG91dHB1dCwgc3ViZGl2aXNpb25CdWZmZXIxLCBzdWJkaXZpc2lvbkJ1ZmZlcjIsIHAgKyAxKTtcclxuICAgICAgICAgICAgICAgIGZyZWVCdWZmZXJzLnB1c2gocGFyZW50KTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIHdlIGRvIG5vdCB5ZXQgaGF2ZSBhIHN1ZmZpY2llbnRseSBcImZsYXRcIiAoaW4gb3RoZXIgd29yZHMsIGRldGFpbGVkKSBhcHByb3hpbWF0aW9uIHdlIGtlZXBcclxuICAgICAgICAgICAgLy8gc3ViZGl2aWRpbmcgdGhlIGN1cnZlIHdlIGFyZSBjdXJyZW50bHkgb3BlcmF0aW5nIG9uLlxyXG4gICAgICAgICAgICBjb25zdCByaWdodENoaWxkID0gKF9hID0gZnJlZUJ1ZmZlcnMucG9wKCkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IG5ldyBBcnJheShwICsgMSk7XHJcbiAgICAgICAgICAgIFBhdGhBcHByb3hpbWF0b3IuX2JlemllclN1YmRpdmlkZShwYXJlbnQsIGxlZnRDaGlsZCwgcmlnaHRDaGlsZCwgc3ViZGl2aXNpb25CdWZmZXIxLCBwICsgMSk7XHJcbiAgICAgICAgICAgIC8vIFdlIHJlLXVzZSB0aGUgYnVmZmVyIG9mIHRoZSBwYXJlbnQgZm9yIG9uZSBvZiB0aGUgY2hpbGRyZW4sIHNvIHRoYXQgd2Ugc2F2ZSBvbmUgYWxsb2NhdGlvbiBwZXIgaXRlcmF0aW9uLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAgKyAxOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIHBhcmVudFtpXSA9IGxlZnRDaGlsZFtpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0b0ZsYXR0ZW4ucHVzaChyaWdodENoaWxkKTtcclxuICAgICAgICAgICAgdG9GbGF0dGVuLnB1c2gocGFyZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0cHV0LnB1c2goY29udHJvbFBvaW50c1tuXSk7XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBpZWNld2lzZS1saW5lYXIgYXBwcm94aW1hdGlvbiBvZiBhIENhdG11bGwtUm9tIHNwbGluZS5cclxuICAgICAqIEByZXR1cm5zIEEgbGlzdCBvZiB2ZWN0b3JzIHJlcHJlc2VudGluZyB0aGUgcGllY2V3aXNlLWxpbmVhciBhcHByb3hpbWF0aW9uLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXBwcm94aW1hdGVDYXRtdWxsKGNvbnRyb2xQb2ludHMpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCBjb250cm9sUG9pbnRzTGVuZ3RoID0gY29udHJvbFBvaW50cy5sZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb250cm9sUG9pbnRzTGVuZ3RoIC0gMTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHYxID0gaSA+IDAgPyBjb250cm9sUG9pbnRzW2kgLSAxXSA6IGNvbnRyb2xQb2ludHNbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IHYyID0gY29udHJvbFBvaW50c1tpXTtcclxuICAgICAgICAgICAgY29uc3QgdjMgPSBpIDwgY29udHJvbFBvaW50c0xlbmd0aCAtIDEgPyBjb250cm9sUG9pbnRzW2kgKyAxXSA6IHYyLmFkZCh2Mikuc3ViKHYxKTtcclxuICAgICAgICAgICAgY29uc3QgdjQgPSBpIDwgY29udHJvbFBvaW50c0xlbmd0aCAtIDIgPyBjb250cm9sUG9pbnRzW2kgKyAyXSA6IHYzLmFkZCh2Mykuc3ViKHYyKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCBjYXRtdWxsRGV0YWlsOyBjKyspIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKFBhdGhBcHByb3hpbWF0b3IuX2NhdG11bGxGaW5kUG9pbnQodjEsIHYyLCB2MywgdjQsIE1hdGguZnJvdW5kKGMgLyBjYXRtdWxsRGV0YWlsKSkpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goUGF0aEFwcHJveGltYXRvci5fY2F0bXVsbEZpbmRQb2ludCh2MSwgdjIsIHYzLCB2NCwgTWF0aC5mcm91bmQoKGMgKyAxKSAvIGNhdG11bGxEZXRhaWwpKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IFVzZSBNYXRoLmZyb3VuZCBtYXliZVxyXG4gICAgc3RhdGljIGNpcmN1bGFyQXJjUHJvcGVydGllcyhjb250cm9sUG9pbnRzKSB7XHJcbiAgICAgICAgY29uc3QgYSA9IGNvbnRyb2xQb2ludHNbMF07XHJcbiAgICAgICAgY29uc3QgYiA9IGNvbnRyb2xQb2ludHNbMV07XHJcbiAgICAgICAgY29uc3QgYyA9IGNvbnRyb2xQb2ludHNbMl07XHJcbiAgICAgICAgaWYgKCgwLCBpbmRleF8xLmZsb2F0RXF1YWwpKDAsICgwLCBpbmRleF8xLmZsb2F0MzIpKCgwLCBpbmRleF8xLmZsb2F0MzJfbXVsKShiLnkgLSBhLnksIGMueCAtIGEueCkgLSAoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoYi54IC0gYS54LCBjLnkgLSBhLnkpKSkpXHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7IC8vID0gaW52YWxpZFxyXG4gICAgICAgIGNvbnN0IGQgPSAoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoMiwgKDAsIGluZGV4XzEuZmxvYXQzMl9hZGQpKCgwLCBpbmRleF8xLmZsb2F0MzJfYWRkKSgoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoYS54LCBiLnN1YihjKS55KSwgKDAsIGluZGV4XzEuZmxvYXQzMl9tdWwpKGIueCwgYy5zdWIoYSkueSkpLCAoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoYy54LCBhLnN1YihiKS55KSkpO1xyXG4gICAgICAgIGNvbnN0IGFTcSA9IHRvRmxvYXQoYS5sZW5ndGhTcXVhcmVkKCkpO1xyXG4gICAgICAgIGNvbnN0IGJTcSA9IHRvRmxvYXQoYi5sZW5ndGhTcXVhcmVkKCkpO1xyXG4gICAgICAgIGNvbnN0IGNTcSA9IHRvRmxvYXQoYy5sZW5ndGhTcXVhcmVkKCkpO1xyXG4gICAgICAgIC8vIE5vdCByZWFsbHkgZXhhY3RcclxuICAgICAgICBjb25zdCBjZW50ZXJYID0gdG9GbG9hdCgoMCwgaW5kZXhfMS5mbG9hdDMyX2FkZCkoKDAsIGluZGV4XzEuZmxvYXQzMl9hZGQpKCgwLCBpbmRleF8xLmZsb2F0MzJfbXVsKShhU3EsIGIuc3ViKGMpLnkpLCAoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoYlNxLCBjLnN1YihhKS55KSksICgwLCBpbmRleF8xLmZsb2F0MzJfbXVsKShjU3EsIGEuc3ViKGIpLnkpKSk7XHJcbiAgICAgICAgY29uc3QgY2VudGVyWSA9IHRvRmxvYXQoKDAsIGluZGV4XzEuZmxvYXQzMl9hZGQpKCgwLCBpbmRleF8xLmZsb2F0MzJfYWRkKSgoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoYVNxLCBjLnN1YihiKS54KSwgKDAsIGluZGV4XzEuZmxvYXQzMl9tdWwpKGJTcSwgYS5zdWIoYykueCkpLCAoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoY1NxLCBiLnN1YihhKS54KSkpO1xyXG4gICAgICAgIGNvbnN0IGNlbnRlciA9IG5ldyBpbmRleF8xLlZlYzIoY2VudGVyWCwgY2VudGVyWSkuZGl2aWRlKGQpO1xyXG4gICAgICAgIGNvbnN0IGRBID0gYS5zdWIoY2VudGVyKTtcclxuICAgICAgICBjb25zdCBkQyA9IGMuc3ViKGNlbnRlcik7XHJcbiAgICAgICAgLy8gQWxzbyBub3QgZXhhY3RcclxuICAgICAgICBjb25zdCByID0gdG9GbG9hdChkQS5sZW5ndGgoKSk7XHJcbiAgICAgICAgY29uc3QgdGhldGFTdGFydCA9IE1hdGguYXRhbjIoZEEueSwgZEEueCk7XHJcbiAgICAgICAgbGV0IHRoZXRhRW5kID0gTWF0aC5hdGFuMihkQy55LCBkQy54KTtcclxuICAgICAgICB3aGlsZSAodGhldGFFbmQgPCB0aGV0YVN0YXJ0KVxyXG4gICAgICAgICAgICB0aGV0YUVuZCArPSAyICogTWF0aC5QSTtcclxuICAgICAgICBsZXQgZGlyID0gMTtcclxuICAgICAgICBsZXQgdGhldGFSYW5nZSA9IHRoZXRhRW5kIC0gdGhldGFTdGFydDtcclxuICAgICAgICBsZXQgb3J0aG9BdG9DID0gYy5zdWIoYSk7XHJcbiAgICAgICAgb3J0aG9BdG9DID0gbmV3IGluZGV4XzEuVmVjMihvcnRob0F0b0MueSwgLW9ydGhvQXRvQy54KTtcclxuICAgICAgICBpZiAoaW5kZXhfMS5WZWMyLmRvdChvcnRob0F0b0MsIGIuc3ViKGEpKSA8IDApIHtcclxuICAgICAgICAgICAgZGlyID0gLWRpcjtcclxuICAgICAgICAgICAgdGhldGFSYW5nZSA9IDIgKiBNYXRoLlBJIC0gdGhldGFSYW5nZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHsgdGhldGFTdGFydCwgdGhldGFSYW5nZSwgZGlyZWN0aW9uOiBkaXIsIHJhZGl1czogciwgY2VudGVyIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBwaWVjZXdpc2UtbGluZWFyIGFwcHJveGltYXRpb24gb2YgYSBjaXJjdWxhciBhcmMgY3VydmUuXHJcbiAgICAgKiBAcmV0dXJucyBBIGxpc3Qgb2YgdmVjdG9ycyByZXByZXNlbnRpbmcgdGhlIHBpZWNld2lzZS1saW5lYXIgYXBwcm94aW1hdGlvbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFwcHJveGltYXRlQ2lyY3VsYXJBcmMoY29udHJvbFBvaW50cykge1xyXG4gICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSBQYXRoQXBwcm94aW1hdG9yLmNpcmN1bGFyQXJjUHJvcGVydGllcyhjb250cm9sUG9pbnRzKTtcclxuICAgICAgICBpZiAoIXByb3BlcnRpZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBhdGhBcHByb3hpbWF0b3IuYXBwcm94aW1hdGVCZXppZXIoY29udHJvbFBvaW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcmFkaXVzLCBjZW50ZXIsIHRoZXRhUmFuZ2UsIHRoZXRhU3RhcnQsIGRpcmVjdGlvbiB9ID0gcHJvcGVydGllcztcclxuICAgICAgICBjb25zdCBhbW91bnRQb2ludHMgPSAyICogcmFkaXVzIDw9IGNpcmN1bGFyQXJjVG9sZXJhbmNlXHJcbiAgICAgICAgICAgID8gMlxyXG4gICAgICAgICAgICA6IE1hdGgubWF4KDIsIE1hdGguY2VpbCh0aGV0YVJhbmdlIC8gKDIgKiBNYXRoLmFjb3MoMSAtICgwLCBpbmRleF8xLmZsb2F0MzJfZGl2KShjaXJjdWxhckFyY1RvbGVyYW5jZSwgcmFkaXVzKSkpKSk7XHJcbiAgICAgICAgLy8gV2Ugc2VsZWN0IHRoZSBhbW91bnQgb2YgcG9pbnRzIGZvciB0aGUgYXBwcm94aW1hdGlvbiBieSByZXF1aXJpbmcgdGhlIGRpc2NyZXRlIGN1cnZhdHVyZVxyXG4gICAgICAgIC8vIHRvIGJlIHNtYWxsZXIgdGhhbiB0aGUgcHJvdmlkZWQgdG9sZXJhbmNlLiBUaGUgZXhhY3QgYW5nbGUgcmVxdWlyZWQgdG8gbWVldCB0aGUgdG9sZXJhbmNlXHJcbiAgICAgICAgLy8gaXM6IDIgKiBNYXRoLkFjb3MoMSAtIFRPTEVSQU5DRSAvIHIpXHJcbiAgICAgICAgLy8gVGhlIHNwZWNpYWwgY2FzZSBpcyByZXF1aXJlZCBmb3IgZXh0cmVtZWx5IHNob3J0IHNsaWRlcnMgd2hlcmUgdGhlIHJhZGl1cyBpcyBzbWFsbGVyIHRoYW5cclxuICAgICAgICAvLyB0aGUgdG9sZXJhbmNlLiBUaGlzIGlzIGEgcGF0aG9sb2dpY2FsIHJhdGhlciB0aGFuIGEgcmVhbGlzdGljIGNhc2UuXHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbW91bnRQb2ludHM7ICsraSkge1xyXG4gICAgICAgICAgICBjb25zdCBmcmFjdCA9IGkgLyAoYW1vdW50UG9pbnRzIC0gMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoZXRhID0gdGhldGFTdGFydCArIGRpcmVjdGlvbiAqIGZyYWN0ICogdGhldGFSYW5nZTtcclxuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBpbmRleF8xLlZlYzIodG9GbG9hdChNYXRoLmNvcyh0aGV0YSkpLCB0b0Zsb2F0KE1hdGguc2luKHRoZXRhKSkpLnNjYWxlKHJhZGl1cyk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGNlbnRlci5hZGQobykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcGllY2V3aXNlLWxpbmVhciBhcHByb3hpbWF0aW9uIG9mIGEgbGluZWFyIGN1cnZlLlxyXG4gICAgICogQmFzaWNhbGx5LCByZXR1cm5zIHRoZSBpbnB1dC5cclxuICAgICAqIEByZXR1cm5zIEEgbGlzdCBvZiB2ZWN0b3JzIHJlcHJlc2VudGluZyB0aGUgcGllY2V3aXNlLWxpbmVhciBhcHByb3hpbWF0aW9uLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXBwcm94aW1hdGVMaW5lYXIoY29udHJvbFBvaW50cykge1xyXG4gICAgICAgIHJldHVybiBbLi4uY29udHJvbFBvaW50c107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBwaWVjZXdpc2UtbGluZWFyIGFwcHJveGltYXRpb24gb2YgYSBsYWdyYW5nZSBwb2x5bm9taWFsLlxyXG4gICAgICogQHJldHVybnMgQSBsaXN0IG9mIHZlY3RvcnMgcmVwcmVzZW50aW5nIHRoZSBwaWVjZXdpc2UtbGluZWFyIGFwcHJveGltYXRpb24uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhcHByb3hpbWF0ZUxhZ3JhbmdlUG9seW5vbWlhbChjb250cm9sUG9pbnRzKSB7XHJcbiAgICAgICAgLy8gVE9ETzogYWRkIHNvbWUgc21hcnRlciBsb2dpYyBoZXJlLCBjaGVieXNoZXYgbm9kZXM/XHJcbiAgICAgICAgY29uc3QgbnVtU3RlcHMgPSA1MTtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCB3ZWlnaHRzID0gUGF0aEFwcHJveGltYXRvci5fYmFyeWNlbnRyaWNXZWlnaHRzKGNvbnRyb2xQb2ludHMpO1xyXG4gICAgICAgIGxldCBtaW5YID0gY29udHJvbFBvaW50c1swXS54O1xyXG4gICAgICAgIGxldCBtYXhYID0gY29udHJvbFBvaW50c1swXS54O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY29udHJvbFBvaW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgY29udHJvbFBvaW50c1tpXS54KTtcclxuICAgICAgICAgICAgbWF4WCA9IE1hdGgubWF4KG1heFgsIGNvbnRyb2xQb2ludHNbaV0ueCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGR4ID0gbWF4WCAtIG1pblg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1TdGVwczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHggPSBtaW5YICsgKGR4IC8gKG51bVN0ZXBzIC0gMSkpICogaTtcclxuICAgICAgICAgICAgY29uc3QgeSA9IE1hdGguZnJvdW5kKFBhdGhBcHByb3hpbWF0b3IuX2JhcnljZW50cmljTGFncmFuZ2UoY29udHJvbFBvaW50cywgd2VpZ2h0cywgeCkpO1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChuZXcgaW5kZXhfMS5WZWMyKHgsIHkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyB0aGUgQmFyeWNlbnRyaWMgd2VpZ2h0cyBmb3IgYSBMYWdyYW5nZSBwb2x5bm9taWFsIGZvciBhIGdpdmVuIHNldCBvZiBjb29yZGluYXRlcy5cclxuICAgICAqIENhbiBiZSB1c2VkIGFzIGEgaGVscGVyIGZ1bmN0aW9uIHRvIGNvbXB1dGUgYSBMYWdyYW5nZSBwb2x5bm9taWFsIHJlcGVhdGVkbHkuXHJcbiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIGNvb3JkaW5hdGVzLiBObyB0d28geCBzaG91bGQgYmUgdGhlIHNhbWUuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfYmFyeWNlbnRyaWNXZWlnaHRzKHBvaW50cykge1xyXG4gICAgICAgIGNvbnN0IG4gPSBwb2ludHMubGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHcgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB3W2ldLnB1c2goKSAtPiB1bmhvbGV5XHJcbiAgICAgICAgICAgIHdbaV0gPSAxO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgIT09IGopIHtcclxuICAgICAgICAgICAgICAgICAgICB3W2ldICo9IHBvaW50c1tpXS54IC0gcG9pbnRzW2pdLng7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd1tpXSA9IDEuMCAvIHdbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB3O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBMYWdyYW5nZSBiYXNpcyBwb2x5bm9taWFsIGZvciBhIGdpdmVuIHNldCBvZiB4IGNvb3JkaW5hdGVzIGJhc2VkIG9uIHByZXZpb3VzbHkgY29tcHV0ZWQgYmFyeWNlbnRyaWNcclxuICAgICAqIHdlaWdodHMuXHJcbiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIGNvb3JkaW5hdGVzLiBObyB0d28geCBzaG91bGQgYmUgdGhlIHNhbWUuXHJcbiAgICAgKiBAcGFyYW0gd2VpZ2h0cyBBbiBhcnJheSBvZiBwcmVjb21wdXRlZCBiYXJ5Y2VudHJpYyB3ZWlnaHRzLlxyXG4gICAgICogQHBhcmFtIHRpbWUgVGhlIHggY29vcmRpbmF0ZSB0byBjYWxjdWxhdGUgdGhlIGJhc2lzIHBvbHlub21pYWwgZm9yLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2JhcnljZW50cmljTGFncmFuZ2UocG9pbnRzLCB3ZWlnaHRzLCB0aW1lKSB7XHJcbiAgICAgICAgaWYgKHBvaW50cyA9PT0gbnVsbCB8fCBwb2ludHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInBvaW50cyBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIHBvaW50XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCAhPT0gd2VpZ2h0cy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwicG9pbnRzIG11c3QgY29udGFpbiBleGFjdGx5IGFzIG1hbnkgaXRlbXMgYXMge25hbWVvZih3ZWlnaHRzKX1cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBudW1lcmF0b3IgPSAwO1xyXG4gICAgICAgIGxldCBkZW5vbWluYXRvciA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHBvaW50cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICAvLyB3aGlsZSB0aGlzIGlzIG5vdCBncmVhdCB3aXRoIGJyYW5jaCBwcmVkaWN0aW9uLCBpdCBwcmV2ZW50cyBOYU4gYXQgY29udHJvbCBwb2ludCBYIGNvb3JkaW5hdGVzXHJcbiAgICAgICAgICAgIGlmICh0aW1lID09PSBwb2ludHNbaV0ueCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50c1tpXS55O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGxpID0gd2VpZ2h0c1tpXSAvICh0aW1lIC0gcG9pbnRzW2ldLngpO1xyXG4gICAgICAgICAgICBudW1lcmF0b3IgKz0gbGkgKiBwb2ludHNbaV0ueTtcclxuICAgICAgICAgICAgZGVub21pbmF0b3IgKz0gbGk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudW1lcmF0b3IgLyBkZW5vbWluYXRvcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWFrZSBzdXJlIHRoZSAybmQgb3JkZXIgZGVyaXZhdGl2ZSAoYXBwcm94aW1hdGVkIHVzaW5nIGZpbml0ZSBlbGVtZW50cykgaXMgd2l0aGluIHRvbGVyYWJsZSBib3VuZHMuXHJcbiAgICAgKiBOT1RFOiBUaGUgMm5kIG9yZGVyIGRlcml2YXRpdmUgb2YgYSAyZCBjdXJ2ZSByZXByZXNlbnRzIGl0cyBjdXJ2YXR1cmUsIHNvIGludHVpdGl2ZWx5IHRoaXMgZnVuY3Rpb25cclxuICAgICAqICAgICAgIGNoZWNrcyAoYXMgdGhlIG5hbWUgc3VnZ2VzdHMpIHdoZXRoZXIgb3VyIGFwcHJveGltYXRpb24gaXMgX2xvY2FsbHlfIFwiZmxhdFwiLiBNb3JlIGN1cnZ5IHBhcnRzXHJcbiAgICAgKiAgICAgICBuZWVkIHRvIGhhdmUgYSBkZW5zZXIgYXBwcm94aW1hdGlvbiB0byBiZSBtb3JlIFwiZmxhdFwiLlxyXG4gICAgICogQHBhcmFtIGNvbnRyb2xQb2ludHMgVGhlIGNvbnRyb2wgcG9pbnRzIHRvIGNoZWNrIGZvciBmbGF0bmVzcy5cclxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgdGhlIGNvbnRyb2wgcG9pbnRzIGFyZSBmbGF0IGVub3VnaC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9iZXppZXJJc0ZsYXRFbm91Z2goY29udHJvbFBvaW50cykge1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY29udHJvbFBvaW50cy5sZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdG1wID0gY29udHJvbFBvaW50c1tpIC0gMV0uc3ViKGNvbnRyb2xQb2ludHNbaV0uc2NhbGUoMikpLmFkZChjb250cm9sUG9pbnRzW2kgKyAxXSk7XHJcbiAgICAgICAgICAgIGlmICh0bXAubGVuZ3RoU3F1YXJlZCgpID4gYmV6aWVyVG9sZXJhbmNlICoqIDIgKiA0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YmRpdmlkZXMgbiBjb250cm9sIHBvaW50cyByZXByZXNlbnRpbmcgYSBiZXppZXIgY3VydmUgaW50byAyIHNldHMgb2YgbiBjb250cm9sIHBvaW50cywgZWFjaFxyXG4gICAgICogZGVzY3JpYmluZyBhIGJlemllciBjdXJ2ZSBlcXVpdmFsZW50IHRvIGEgaGFsZiBvZiB0aGUgb3JpZ2luYWwgY3VydmUuIEVmZmVjdGl2ZWx5IHRoaXMgc3BsaXRzXHJcbiAgICAgKiB0aGUgb3JpZ2luYWwgY3VydmUgaW50byAyIGN1cnZlcyB3aGljaCByZXN1bHQgaW4gdGhlIG9yaWdpbmFsIGN1cnZlIHdoZW4gcGllY2VkIGJhY2sgdG9nZXRoZXIuXHJcbiAgICAgKiBAcGFyYW0gY29udHJvbFBvaW50cyBUaGUgY29udHJvbCBwb2ludHMgdG8gc3BsaXQuXHJcbiAgICAgKiBAcGFyYW0gbCBPdXRwdXQ6IFRoZSBjb250cm9sIHBvaW50cyBjb3JyZXNwb25kaW5nIHRvIHRoZSBsZWZ0IGhhbGYgb2YgdGhlIGN1cnZlLlxyXG4gICAgICogQHBhcmFtIHIgT3V0cHV0OiBUaGUgY29udHJvbCBwb2ludHMgY29ycmVzcG9uZGluZyB0byB0aGUgcmlnaHQgaGFsZiBvZiB0aGUgY3VydmUuXHJcbiAgICAgKiBAcGFyYW0gc3ViZGl2aXNpb25CdWZmZXIgVGhlIGZpcnN0IGJ1ZmZlciBjb250YWluaW5nIHRoZSBjdXJyZW50IHN1YmRpdmlzaW9uIHN0YXRlLlxyXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgY29udHJvbCBwb2ludHMgaW4gdGhlIG9yaWdpbmFsIGxpc3QuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfYmV6aWVyU3ViZGl2aWRlKGNvbnRyb2xQb2ludHMsIGwsIHIsIHN1YmRpdmlzaW9uQnVmZmVyLCBjb3VudCkge1xyXG4gICAgICAgIGNvbnN0IG1pZHBvaW50cyA9IHN1YmRpdmlzaW9uQnVmZmVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xyXG4gICAgICAgICAgICBtaWRwb2ludHNbaV0gPSBjb250cm9sUG9pbnRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcclxuICAgICAgICAgICAgbFtpXSA9IG1pZHBvaW50c1swXTtcclxuICAgICAgICAgICAgcltjb3VudCAtIGkgLSAxXSA9IG1pZHBvaW50c1tjb3VudCAtIGkgLSAxXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb3VudCAtIGkgLSAxOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIG1pZHBvaW50c1tqXSA9IG1pZHBvaW50c1tqXS5hZGQobWlkcG9pbnRzW2ogKyAxXSk7XHJcbiAgICAgICAgICAgICAgICBtaWRwb2ludHNbal0gPSBtaWRwb2ludHNbal0uZGl2aWRlKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIHVzZXMgPGEgaHJlZj1cImh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0RlX0Nhc3RlbGphdSUyN3NfYWxnb3JpdGhtIERlIENhc3RlbGphdSdzIGFsZ29yaXRobTwvYT4gdG8gb2J0YWluXHJcbiAgICAgKiBhbiBvcHRpbWFsIHBpZWNld2lzZS1saW5lYXIgYXBwcm94aW1hdGlvbiBvZiB0aGUgYmV6aWVyIGN1cnZlIHdpdGggdGhlIHNhbWUgYW1vdW50IG9mIHBvaW50cyBhcyB0aGVyZSBhcmUgY29udHJvbFxyXG4gICAgICogcG9pbnRzLlxyXG4gICAgICogQHBhcmFtIGNvbnRyb2xQb2ludHMgVGhlIGNvbnRyb2wgcG9pbnRzIGRlc2NyaWJpbmcgdGhlIGJlemllciBjdXJ2ZSB0byBiZSBhcHByb3hpbWF0ZWQuXHJcbiAgICAgKiBAcGFyYW0gb3V0cHV0IFRoZSBwb2ludHMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHRpbmcgcGllY2V3aXNlLWxpbmVhciBhcHByb3hpbWF0aW9uLlxyXG4gICAgICogQHBhcmFtIGNvdW50IFRoZSBudW1iZXIgb2YgY29udHJvbCBwb2ludHMgaW4gdGhlIG9yaWdpbmFsIGxpc3QuXHJcbiAgICAgKiBAcGFyYW0gc3ViZGl2aXNpb25CdWZmZXIxIFRoZSBmaXJzdCBidWZmZXIgY29udGFpbmluZyB0aGUgY3VycmVudCBzdWJkaXZpc2lvbiBzdGF0ZS5cclxuICAgICAqIEBwYXJhbSBzdWJkaXZpc2lvbkJ1ZmZlcjIgVGhlIHNlY29uZCBidWZmZXIgY29udGFpbmluZyB0aGUgY3VycmVudCBzdWJkaXZpc2lvbiBzdGF0ZS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9iZXppZXJBcHByb3hpbWF0ZShjb250cm9sUG9pbnRzLCBvdXRwdXQsIHN1YmRpdmlzaW9uQnVmZmVyMSwgc3ViZGl2aXNpb25CdWZmZXIyLCBjb3VudCkge1xyXG4gICAgICAgIGNvbnN0IGwgPSBzdWJkaXZpc2lvbkJ1ZmZlcjI7XHJcbiAgICAgICAgY29uc3QgciA9IHN1YmRpdmlzaW9uQnVmZmVyMTtcclxuICAgICAgICBQYXRoQXBwcm94aW1hdG9yLl9iZXppZXJTdWJkaXZpZGUoY29udHJvbFBvaW50cywgbCwgciwgc3ViZGl2aXNpb25CdWZmZXIxLCBjb3VudCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudCAtIDE7ICsraSkge1xyXG4gICAgICAgICAgICBsW2NvdW50ICsgaV0gPSByW2kgKyAxXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgb3V0cHV0LnB1c2goY29udHJvbFBvaW50c1swXSk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBjb3VudCAtIDE7ICsraSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IDIgKiBpO1xyXG4gICAgICAgICAgICBsZXQgcCA9IGxbaW5kZXggLSAxXS5hZGQobFtpbmRleF0uc2NhbGUoMikpLmFkZChsW2luZGV4ICsgMV0pO1xyXG4gICAgICAgICAgICBwID0gcC5zY2FsZShNYXRoLmZyb3VuZCgwLjI1KSk7XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKHApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmluZHMgYSBwb2ludCBvbiB0aGUgc3BsaW5lIGF0IHRoZSBwb3NpdGlvbiBvZiBhIHBhcmFtZXRlci5cclxuICAgICAqIEBwYXJhbSB2ZWMxIFRoZSBmaXJzdCB2ZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0gdmVjMiBUaGUgc2Vjb25kIHZlY3Rvci5cclxuICAgICAqIEBwYXJhbSB2ZWMzIFRoZSB0aGlyZCB2ZWN0b3IuXHJcbiAgICAgKiBAcGFyYW0gdmVjNCBUaGUgZm91cnRoIHZlY3Rvci5cclxuICAgICAqIEBwYXJhbSB0IFRoZSBwYXJhbWV0ZXIgYXQgd2hpY2ggdG8gZmluZCB0aGUgcG9pbnQgb24gdGhlIHNwbGluZSwgaW4gdGhlIHJhbmdlIFswLCAxXS5cclxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBvbiB0aGUgc3BsaW5lIGF0IHQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfY2F0bXVsbEZpbmRQb2ludCh2ZWMxLCB2ZWMyLCB2ZWMzLCB2ZWM0LCB0KSB7XHJcbiAgICAgICAgY29uc3QgdDIgPSBNYXRoLmZyb3VuZCh0ICogdCk7XHJcbiAgICAgICAgY29uc3QgdDMgPSBNYXRoLmZyb3VuZCh0ICogdDIpO1xyXG4gICAgICAgIHJldHVybiBuZXcgaW5kZXhfMS5WZWMyKE1hdGguZnJvdW5kKDAuNSAqXHJcbiAgICAgICAgICAgICgyICogdmVjMi54ICtcclxuICAgICAgICAgICAgICAgICgtdmVjMS54ICsgdmVjMy54KSAqIHQgK1xyXG4gICAgICAgICAgICAgICAgKDIgKiB2ZWMxLnggLSA1ICogdmVjMi54ICsgNCAqIHZlYzMueCAtIHZlYzQueCkgKiB0MiArXHJcbiAgICAgICAgICAgICAgICAoLXZlYzEueCArIDMgKiB2ZWMyLnggLSAzICogdmVjMy54ICsgdmVjNC54KSAqIHQzKSksIE1hdGguZnJvdW5kKDAuNSAqXHJcbiAgICAgICAgICAgICgyICogdmVjMi55ICtcclxuICAgICAgICAgICAgICAgICgtdmVjMS55ICsgdmVjMy55KSAqIHQgK1xyXG4gICAgICAgICAgICAgICAgKDIgKiB2ZWMxLnkgLSA1ICogdmVjMi55ICsgNCAqIHZlYzMueSAtIHZlYzQueSkgKiB0MiArXHJcbiAgICAgICAgICAgICAgICAoLXZlYzEueSArIDMgKiB2ZWMyLnkgLSAzICogdmVjMy55ICsgdmVjNC55KSAqIHQzKSkpO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuUGF0aEFwcHJveGltYXRvciA9IFBhdGhBcHByb3hpbWF0b3I7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUGF0aFR5cGUgPSB2b2lkIDA7XHJcbnZhciBQYXRoVHlwZTtcclxuKGZ1bmN0aW9uIChQYXRoVHlwZSkge1xyXG4gICAgUGF0aFR5cGVbUGF0aFR5cGVbXCJDYXRtdWxsXCJdID0gMF0gPSBcIkNhdG11bGxcIjtcclxuICAgIFBhdGhUeXBlW1BhdGhUeXBlW1wiQmV6aWVyXCJdID0gMV0gPSBcIkJlemllclwiO1xyXG4gICAgUGF0aFR5cGVbUGF0aFR5cGVbXCJMaW5lYXJcIl0gPSAyXSA9IFwiTGluZWFyXCI7XHJcbiAgICBQYXRoVHlwZVtQYXRoVHlwZVtcIlBlcmZlY3RDdXJ2ZVwiXSA9IDNdID0gXCJQZXJmZWN0Q3VydmVcIjtcclxufSkoUGF0aFR5cGUgPSBleHBvcnRzLlBhdGhUeXBlIHx8IChleHBvcnRzLlBhdGhUeXBlID0ge30pKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5nZW5lcmF0ZVNsaWRlckNoZWNrcG9pbnRzID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uLy4uL21hdGgvaW5kZXhcIik7XHJcbmZ1bmN0aW9uKiBnZW5lcmF0ZVRpY2tzKHNwYW5JbmRleCwgc3BhblN0YXJ0VGltZSwgc3BhbkR1cmF0aW9uLCByZXZlcnNlZCwgbGVuZ3RoLCB0aWNrRGlzdGFuY2UsIG1pbkRpc3RhbmNlRnJvbUVuZCkge1xyXG4gICAgZm9yIChsZXQgZCA9IHRpY2tEaXN0YW5jZTsgZCA8PSBsZW5ndGg7IGQgKz0gdGlja0Rpc3RhbmNlKSB7XHJcbiAgICAgICAgaWYgKGQgPj0gbGVuZ3RoIC0gbWluRGlzdGFuY2VGcm9tRW5kKSB7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBzcGFuUHJvZ3Jlc3MgPSBkIC8gbGVuZ3RoO1xyXG4gICAgICAgIGNvbnN0IHRpbWVQcm9ncmVzcyA9IHJldmVyc2VkID8gMS4wIC0gc3BhblByb2dyZXNzIDogc3BhblByb2dyZXNzO1xyXG4gICAgICAgIHlpZWxkIHtcclxuICAgICAgICAgICAgdHlwZTogXCJUSUNLXCIsXHJcbiAgICAgICAgICAgIHNwYW5JbmRleCxcclxuICAgICAgICAgICAgc3BhblN0YXJ0VGltZSxcclxuICAgICAgICAgICAgdGltZTogc3BhblN0YXJ0VGltZSArIHRpbWVQcm9ncmVzcyAqIHNwYW5EdXJhdGlvbixcclxuICAgICAgICAgICAgc3BhblByb2dyZXNzLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24qIGdlbmVyYXRlU2xpZGVyQ2hlY2twb2ludHMoc3RhcnRUaW1lLCBzcGFuRHVyYXRpb24sIHZlbG9jaXR5LCB0aWNrRGlzdGFuY2UsIHRvdGFsRGlzdGFuY2UsIHNwYW5Db3VudCwgbGVnYWN5TGFzdFRpY2tPZmZzZXQpIHtcclxuICAgIGNvbnN0IGxlbmd0aCA9IE1hdGgubWluKDEwMDAwMC4wLCB0b3RhbERpc3RhbmNlKTtcclxuICAgIHRpY2tEaXN0YW5jZSA9ICgwLCBpbmRleF8xLmNsYW1wKSh0aWNrRGlzdGFuY2UsIDAuMCwgbGVuZ3RoKTtcclxuICAgIGNvbnN0IG1pbkRpc3RhbmNlRnJvbUVuZCA9IHZlbG9jaXR5ICogMTA7XHJcbiAgICAvLyBHZW5lcmF0aW5nIHRpY2tzLCByZXBlYXRzXHJcbiAgICAvLyBVc2luZyBgZmxvYXRFcXVhbGAgd2FzIG15IHN1Z2dlc3Rpb24sIGJ1dCBvc3UhbGF6ZXIgdXNlcyB0aWNrRGlzdGFuY2UgIT0gMFxyXG4gICAgaWYgKHRpY2tEaXN0YW5jZSAhPT0gMCkge1xyXG4gICAgICAgIGZvciAobGV0IHNwYW4gPSAwOyBzcGFuIDwgc3BhbkNvdW50OyBzcGFuKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgc3BhblN0YXJ0VGltZSA9IHN0YXJ0VGltZSArIHNwYW4gKiBzcGFuRHVyYXRpb247XHJcbiAgICAgICAgICAgIGNvbnN0IHJldmVyc2VkID0gc3BhbiAlIDIgPT09IDE7XHJcbiAgICAgICAgICAgIGNvbnN0IGl0ID0gZ2VuZXJhdGVUaWNrcyhzcGFuLCBzcGFuU3RhcnRUaW1lLCBzcGFuRHVyYXRpb24sIHJldmVyc2VkLCBsZW5ndGgsIHRpY2tEaXN0YW5jZSwgbWluRGlzdGFuY2VGcm9tRW5kKTtcclxuICAgICAgICAgICAgLy8gRG9uJ3QgZmxhbWUgbWUgZm9yIHRoaXNcclxuICAgICAgICAgICAgY29uc3QgdGlja3MgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGl0KVxyXG4gICAgICAgICAgICAgICAgdGlja3MucHVzaCh0KTtcclxuICAgICAgICAgICAgaWYgKHJldmVyc2VkKVxyXG4gICAgICAgICAgICAgICAgdGlja3MucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGlja3MpXHJcbiAgICAgICAgICAgICAgICB5aWVsZCB0O1xyXG4gICAgICAgICAgICBpZiAoc3BhbiA8IHNwYW5Db3VudCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlJFUEVBVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYW5JbmRleDogc3BhbixcclxuICAgICAgICAgICAgICAgICAgICBzcGFuU3RhcnRUaW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHNwYW5TdGFydFRpbWUgKyBzcGFuRHVyYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhblByb2dyZXNzOiAoc3BhbiArIDEpICUgMixcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gc3BhbkNvdW50ICogc3BhbkR1cmF0aW9uO1xyXG4gICAgY29uc3QgZmluYWxTcGFuSW5kZXggPSBzcGFuQ291bnQgLSAxO1xyXG4gICAgY29uc3QgZmluYWxTcGFuU3RhcnRUaW1lID0gc3RhcnRUaW1lICsgZmluYWxTcGFuSW5kZXggKiBzcGFuRHVyYXRpb247XHJcbiAgICBjb25zdCBmaW5hbFNwYW5FbmRUaW1lID0gTWF0aC5tYXgoc3RhcnRUaW1lICsgdG90YWxEdXJhdGlvbiAvIDIuMCwgZmluYWxTcGFuU3RhcnRUaW1lICsgc3BhbkR1cmF0aW9uIC0gKGxlZ2FjeUxhc3RUaWNrT2Zmc2V0ICE9PSBudWxsICYmIGxlZ2FjeUxhc3RUaWNrT2Zmc2V0ICE9PSB2b2lkIDAgPyBsZWdhY3lMYXN0VGlja09mZnNldCA6IDApKTtcclxuICAgIGxldCBmaW5hbFByb2dyZXNzID0gKGZpbmFsU3BhbkVuZFRpbWUgLSBmaW5hbFNwYW5TdGFydFRpbWUpIC8gc3BhbkR1cmF0aW9uO1xyXG4gICAgaWYgKHNwYW5Db3VudCAlIDIgPT09IDApXHJcbiAgICAgICAgZmluYWxQcm9ncmVzcyA9IDEuMCAtIGZpbmFsUHJvZ3Jlc3M7XHJcbiAgICB5aWVsZCB7XHJcbiAgICAgICAgdHlwZTogXCJMQVNUX0xFR0FDWV9USUNLXCIsXHJcbiAgICAgICAgc3BhbkluZGV4OiBmaW5hbFNwYW5JbmRleCxcclxuICAgICAgICBzcGFuU3RhcnRUaW1lOiBmaW5hbFNwYW5TdGFydFRpbWUsXHJcbiAgICAgICAgdGltZTogZmluYWxTcGFuRW5kVGltZSxcclxuICAgICAgICBzcGFuUHJvZ3Jlc3M6IGZpbmFsUHJvZ3Jlc3MsXHJcbiAgICB9O1xyXG4gICAgLy8gVGVjaG5pY2FsbHkgc3BlYWtpbmcgdGhlIHRhaWwgaGFzIG5vIHJlYWwgcmVsZXZhbmN5IGZvciBnYW1lcGxheSwgaXQgaXMganVzdCBhIHZpc3VhbCBlbGVtZW50LlxyXG4gICAgLy8gSW4gU2xpZGVyLmNzIGl0IGlzIGV2ZW4gaWdub3JlZC4uLlxyXG4gICAgLy8geWllbGQge1xyXG4gICAgLy8gICB0eXBlOiBTbGlkZXJDaGVja1BvaW50VHlwZS5UQUlMLFxyXG4gICAgLy8gICBzcGFuSW5kZXg6IGZpbmFsU3BhbkluZGV4LFxyXG4gICAgLy8gICBzcGFuU3RhcnRUaW1lOiBzdGFydFRpbWUgKyAoc3BhbkNvdW50IC0gMSkgKiBzcGFuRHVyYXRpb24sXHJcbiAgICAvLyAgIHRpbWU6IHN0YXJ0VGltZSArIHRvdGFsRHVyYXRpb24sXHJcbiAgICAvLyAgIHBhdGhQcm9ncmVzczogc3BhbkNvdW50ICUgMlxyXG4gICAgLy8gfTtcclxufVxyXG5leHBvcnRzLmdlbmVyYXRlU2xpZGVyQ2hlY2twb2ludHMgPSBnZW5lcmF0ZVNsaWRlckNoZWNrcG9pbnRzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlNsaWRlclBhdGggPSB2b2lkIDA7XHJcbmNvbnN0IFBhdGhUeXBlXzEgPSByZXF1aXJlKFwiLi9QYXRoVHlwZVwiKTtcclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tYXRoL2luZGV4XCIpO1xyXG5jb25zdCBQYXRoQXBwcm94aW1hdG9yXzEgPSByZXF1aXJlKFwiLi9QYXRoQXBwcm94aW1hdG9yXCIpO1xyXG5mdW5jdGlvbiBtYXBUb1ZlY3RvcjIocCkge1xyXG4gICAgcmV0dXJuIHAubWFwKChwKSA9PiBuZXcgaW5kZXhfMS5WZWMyKHAueCwgcC55KSk7XHJcbn1cclxuY2xhc3MgU2xpZGVyUGF0aCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9sUG9pbnRzLCBsZW5ndGgpIHtcclxuICAgICAgICB0aGlzLl9taW4gPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLl9tYXggPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xQb2ludHMgPSBjb250cm9sUG9pbnRzO1xyXG4gICAgICAgIHRoaXMuX2ludmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2N1bXVsYXRpdmVMZW5ndGggPSBbXTtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVkUGF0aCA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2V4cGVjdGVkRGlzdGFuY2UgPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICBnZXQgY3VtdWxhdGl2ZUxlbmd0aHMoKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVWYWxpZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jdW11bGF0aXZlTGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNhbGN1bGF0ZWRQYXRoKCkge1xyXG4gICAgICAgIHRoaXMuZW5zdXJlVmFsaWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FsY3VsYXRlZFBhdGg7XHJcbiAgICB9XHJcbiAgICBtYWtlSW52YWxpZCgpIHtcclxuICAgICAgICB0aGlzLl9pbnZhbGlkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8vIFJlY2FsY3VsYXRlcyB0aGUgaGVscGVyIGRhdGEgaWYgbmVlZGVkXHJcbiAgICBlbnN1cmVWYWxpZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5faW52YWxpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZVBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVMZW5ndGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVCb3VuZGFyeUJveCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2FsY3VsYXRlU3ViUGF0aChzdWJDb250cm9sUG9pbnRzLCB0eXBlKSB7XHJcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgUGF0aFR5cGVfMS5QYXRoVHlwZS5DYXRtdWxsOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhdGhBcHByb3hpbWF0b3JfMS5QYXRoQXBwcm94aW1hdG9yLmFwcHJveGltYXRlQ2F0bXVsbChtYXBUb1ZlY3RvcjIoc3ViQ29udHJvbFBvaW50cykpO1xyXG4gICAgICAgICAgICBjYXNlIFBhdGhUeXBlXzEuUGF0aFR5cGUuTGluZWFyOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhdGhBcHByb3hpbWF0b3JfMS5QYXRoQXBwcm94aW1hdG9yLmFwcHJveGltYXRlTGluZWFyKG1hcFRvVmVjdG9yMihzdWJDb250cm9sUG9pbnRzKSk7XHJcbiAgICAgICAgICAgIGNhc2UgUGF0aFR5cGVfMS5QYXRoVHlwZS5QZXJmZWN0Q3VydmU6XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViQ29udHJvbFBvaW50cy5sZW5ndGggIT09IDMpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnNcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN1YnBhdGggPSBQYXRoQXBwcm94aW1hdG9yXzEuUGF0aEFwcHJveGltYXRvci5hcHByb3hpbWF0ZUNpcmN1bGFyQXJjKG1hcFRvVmVjdG9yMihzdWJDb250cm9sUG9pbnRzKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBmb3Igc29tZSByZWFzb24gYSBjaXJjdWxhciBhcmMgY291bGQgbm90IGJlIGZpdCB0byB0aGUgMyBnaXZlbiBwb2ludHMsIGZhbGwgYmFjayB0byBhIG51bWVyaWNhbGx5IHN0YWJsZVxyXG4gICAgICAgICAgICAgICAgLy8gYmV6aWVyIGFwcHJveGltYXRpb24uXHJcbiAgICAgICAgICAgICAgICBpZiAoc3VicGF0aC5sZW5ndGggPT09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VicGF0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFBhdGhBcHByb3hpbWF0b3JfMS5QYXRoQXBwcm94aW1hdG9yLmFwcHJveGltYXRlQmV6aWVyKG1hcFRvVmVjdG9yMihzdWJDb250cm9sUG9pbnRzKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYm91bmRhcnlCb3goKSB7XHJcbiAgICAgICAgdGhpcy5lbnN1cmVWYWxpZCgpO1xyXG4gICAgICAgIHJldHVybiBbdGhpcy5fbWluLCB0aGlzLl9tYXhdO1xyXG4gICAgfVxyXG4gICAgY2FsY3VsYXRlQm91bmRhcnlCb3goKSB7XHJcbiAgICAgICAgLy8gU2luY2UgaXQgaXMgb3N1IXB4ICwgaXQgc2hvdWxkIGJlIG5vIHByb2JsZW1cclxuICAgICAgICBsZXQgbWluWCA9IDMwMDAsIG1heFggPSAtMzAwMCwgbWluWSA9IDMwMDAsIG1heFkgPSAtMzAwMDtcclxuICAgICAgICB0aGlzLl9jYWxjdWxhdGVkUGF0aC5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICAgICAgICAgIG1pblggPSBNYXRoLm1pbihtaW5YLCBwLngpO1xyXG4gICAgICAgICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgcC54KTtcclxuICAgICAgICAgICAgbWluWSA9IE1hdGgubWluKG1pblksIHAueSk7XHJcbiAgICAgICAgICAgIG1heFkgPSBNYXRoLm1heChtYXhZLCBwLnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuX21pbiA9IG5ldyBpbmRleF8xLlZlYzIobWluWCwgbWluWSk7XHJcbiAgICAgICAgdGhpcy5fbWF4ID0gbmV3IGluZGV4XzEuVmVjMihtYXhYLCBtYXhZKTtcclxuICAgICAgICByZXR1cm4gW3RoaXMuX21pbiwgdGhpcy5fbWF4XTtcclxuICAgIH1cclxuICAgIGNhbGN1bGF0ZVBhdGgoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuX2NhbGN1bGF0ZWRQYXRoID0gW107XHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZQb2ludHMgPSB0aGlzLmNvbnRyb2xQb2ludHMubGVuZ3RoO1xyXG4gICAgICAgIGlmIChudW1iZXJPZlBvaW50cyA9PT0gMClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy5jb250cm9sUG9pbnRzLm1hcCgocCkgPT4gcC5vZmZzZXQpO1xyXG4gICAgICAgIGxldCBzdGFydCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZlBvaW50czsgaSsrKSB7XHJcbiAgICAgICAgICAgIC8vIE5lZWQgdG8gY2FsY3VsYXRlIHByZXZpb3VzIHNlZ21lbnRcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udHJvbFBvaW50c1tpXS50eXBlID09PSB1bmRlZmluZWQgJiYgaSA8IG51bWJlck9mUG9pbnRzIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ3VycmVudCB2ZXJ0ZXggZW5kcyB0aGUgc2VnbWVudFxyXG4gICAgICAgICAgICBjb25zdCBzZWdtZW50VmVydGljZXMgPSB2ZXJ0aWNlcy5zbGljZShzdGFydCwgaSArIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBzZWdtZW50VHlwZSA9IChfYSA9IHRoaXMuY29udHJvbFBvaW50c1tzdGFydF0udHlwZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogUGF0aFR5cGVfMS5QYXRoVHlwZS5MaW5lYXI7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmNhbGN1bGF0ZVN1YlBhdGgoc2VnbWVudFZlcnRpY2VzLCBzZWdtZW50VHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9jYWxjdWxhdGVkUGF0aC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAobiA9PT0gMCB8fCAhaW5kZXhfMS5WZWMyLmVxdWFsKHRoaXMuX2NhbGN1bGF0ZWRQYXRoW24gLSAxXSwgdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVkUGF0aC5wdXNoKHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gaTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYWxjdWxhdGVMZW5ndGgoKSB7XHJcbiAgICAgICAgdGhpcy5fY3VtdWxhdGl2ZUxlbmd0aCA9IG5ldyBBcnJheSh0aGlzLl9jYWxjdWxhdGVkUGF0aC5sZW5ndGgpO1xyXG4gICAgICAgIHRoaXMuX2N1bXVsYXRpdmVMZW5ndGhbMF0gPSAwLjA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLl9jYWxjdWxhdGVkUGF0aC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLl9jdW11bGF0aXZlTGVuZ3RoW2ldID1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1bXVsYXRpdmVMZW5ndGhbaSAtIDFdICsgTWF0aC5mcm91bmQoaW5kZXhfMS5WZWMyLmRpc3RhbmNlKHRoaXMuX2NhbGN1bGF0ZWRQYXRoW2kgLSAxXSwgdGhpcy5fY2FsY3VsYXRlZFBhdGhbaV0pKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2FsY3VsYXRlZExlbmd0aCA9IHRoaXMuX2N1bXVsYXRpdmVMZW5ndGhbdGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5sZW5ndGggLSAxXTtcclxuICAgICAgICAvLyBUT0RPOiBJbiBsYXplciB0aGUgIT0gb3BlcmF0b3IgaXMgdXNlZCwgYnV0IHNob3VsZG4ndCB0aGUgYXBwcm94aW1hdGUgZXF1YWwgYmUgdXNlZD9cclxuICAgICAgICBpZiAodGhpcy5fZXhwZWN0ZWREaXN0YW5jZSAhPT0gdW5kZWZpbmVkICYmIGNhbGN1bGF0ZWRMZW5ndGggIT09IHRoaXMuX2V4cGVjdGVkRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgLy8gSW4gb3N1LXN0YWJsZSwgaWYgdGhlIGxhc3QgdHdvIGNvbnRyb2wgcG9pbnRzIG9mIGEgc2xpZGVyIGFyZSBlcXVhbCwgZXh0ZW5zaW9uIGlzIG5vdCBwZXJmb3JtZWQuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbnRyb2xQb2ludHMubGVuZ3RoID49IDIgJiYgaW5kZXhfMS5WZWMyLmVxdWFsKHRoaXMuY29udHJvbFBvaW50c1t0aGlzLmNvbnRyb2xQb2ludHMubGVuZ3RoIC0gMV0ub2Zmc2V0LCB0aGlzLmNvbnRyb2xQb2ludHNbdGhpcy5jb250cm9sUG9pbnRzLmxlbmd0aCAtIDJdLm9mZnNldClcclxuICAgICAgICAgICAgICAgICYmIHRoaXMuX2V4cGVjdGVkRGlzdGFuY2UgPiBjYWxjdWxhdGVkTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdW11bGF0aXZlTGVuZ3RoLnB1c2goY2FsY3VsYXRlZExlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVGhlIGxhc3QgbGVuZ3RoIGlzIGFsd2F5cyBpbmNvcnJlY3RcclxuICAgICAgICAgICAgdGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5zcGxpY2UodGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgbGV0IHBhdGhFbmRJbmRleCA9IHRoaXMuX2NhbGN1bGF0ZWRQYXRoLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIGlmIChjYWxjdWxhdGVkTGVuZ3RoID4gdGhpcy5fZXhwZWN0ZWREaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMuX2N1bXVsYXRpdmVMZW5ndGgubGVuZ3RoID4gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1bXVsYXRpdmVMZW5ndGhbdGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5sZW5ndGggLSAxXSA+PSB0aGlzLl9leHBlY3RlZERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5zcGxpY2UodGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5sZW5ndGggLSAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYWxjdWxhdGVkUGF0aC5zcGxpY2UocGF0aEVuZEluZGV4LS0sIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXRoRW5kSW5kZXggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogUGVyaGFwcyBuZWdhdGl2ZSBwYXRoIGxlbmd0aHMgc2hvdWxkIGJlIGRpc2FsbG93ZWQgdG9nZXRoZXJcclxuICAgICAgICAgICAgICAgIHRoaXMuX2N1bXVsYXRpdmVMZW5ndGgucHVzaCgwKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0aGUgZGlyZWN0aW9uIG9mIHRoZSBzZWdtZW50IHRvIHNob3J0ZW4gb3IgbGVuZ3RoZW5cclxuICAgICAgICAgICAgY29uc3QgZGlyID0gaW5kZXhfMS5WZWMyLnN1Yih0aGlzLl9jYWxjdWxhdGVkUGF0aFtwYXRoRW5kSW5kZXhdLCB0aGlzLl9jYWxjdWxhdGVkUGF0aFtwYXRoRW5kSW5kZXggLSAxXSkubm9ybWFsaXplZCgpO1xyXG4gICAgICAgICAgICBjb25zdCBmID0gdGhpcy5fZXhwZWN0ZWREaXN0YW5jZSAtIHRoaXMuX2N1bXVsYXRpdmVMZW5ndGhbdGhpcy5fY3VtdWxhdGl2ZUxlbmd0aC5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgdGhpcy5fY2FsY3VsYXRlZFBhdGhbcGF0aEVuZEluZGV4XSA9IGluZGV4XzEuVmVjMi5hZGQodGhpcy5fY2FsY3VsYXRlZFBhdGhbcGF0aEVuZEluZGV4IC0gMV0sIGRpci5zY2FsZShNYXRoLmZyb3VuZChmKSkpO1xyXG4gICAgICAgICAgICB0aGlzLl9jdW11bGF0aXZlTGVuZ3RoLnB1c2godGhpcy5fZXhwZWN0ZWREaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGRpc3RhbmNlKCkge1xyXG4gICAgICAgIGNvbnN0IGN1bXVsYXRpdmVMZW5ndGhzID0gdGhpcy5jdW11bGF0aXZlTGVuZ3RocztcclxuICAgICAgICBjb25zdCBjb3VudCA9IGN1bXVsYXRpdmVMZW5ndGhzLmxlbmd0aDtcclxuICAgICAgICByZXR1cm4gY291bnQgPiAwID8gY3VtdWxhdGl2ZUxlbmd0aHNbY291bnQgLSAxXSA6IDAuMDtcclxuICAgIH1cclxuICAgIGluZGV4T2ZEaXN0YW5jZShkaXN0YW5jZSkge1xyXG4gICAgICAgIC8vIFRPRE86IEJpbmFyeSBzZWFyY2ggdGhlIGZpcnN0IHZhbHVlIHRoYXQgaXMgbm90IGxlc3MgdGhhbiBwYXJ0aWFsRGlzdGFuY2VcclxuICAgICAgICBjb25zdCBpZHggPSB0aGlzLmN1bXVsYXRpdmVMZW5ndGhzLmZpbmRJbmRleCgodmFsdWUpID0+IHZhbHVlID49IGRpc3RhbmNlKTtcclxuICAgICAgICBpZiAoaWR4ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgLy8gU2hvdWxkIG5vdCBiZSBwb3NzaWJsZVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDdW11bGF0aXZlIGxlbmd0aHMgb3IgZGlzdGFuY2Ugd3JvbmdseSBwcm9ncmFtbWVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlkeDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENhbGN1bGF0ZXMgdGhlIHBvc2l0aW9uIG9mIHRoZSBzbGlkZXIgYXQgdGhlIGdpdmVuIHByb2dyZXNzLlxyXG4gICAgICogQHBhcmFtIHByb2dyZXNzIGEgbnVtYmVyIGJldHdlZW4gMCAoaGVhZCkgYW5kIDEgKHRhaWwvcmVwZWF0KVxyXG4gICAgICovXHJcbiAgICBwb3NpdGlvbkF0KHByb2dyZXNzKSB7XHJcbiAgICAgICAgY29uc3QgcGFydGlhbERpc3RhbmNlID0gdGhpcy5kaXN0YW5jZSAqICgwLCBpbmRleF8xLmNsYW1wKShwcm9ncmVzcywgMCwgMSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW50ZXJwb2xhdGVWZXJ0aWNlcyh0aGlzLmluZGV4T2ZEaXN0YW5jZShwYXJ0aWFsRGlzdGFuY2UpLCBwYXJ0aWFsRGlzdGFuY2UpO1xyXG4gICAgfVxyXG4gICAgLy8gZDogZG91YmxlXHJcbiAgICBpbnRlcnBvbGF0ZVZlcnRpY2VzKGksIGQpIHtcclxuICAgICAgICBjb25zdCBjYWxjdWxhdGVkUGF0aCA9IHRoaXMuY2FsY3VsYXRlZFBhdGg7XHJcbiAgICAgICAgaWYgKGNhbGN1bGF0ZWRQYXRoLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4XzEuVmVjMi5aZXJvO1xyXG4gICAgICAgIGlmIChpIDw9IDApXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxjdWxhdGVkUGF0aFswXTtcclxuICAgICAgICBpZiAoaSA+PSBjYWxjdWxhdGVkUGF0aC5sZW5ndGgpXHJcbiAgICAgICAgICAgIHJldHVybiBjYWxjdWxhdGVkUGF0aFtjYWxjdWxhdGVkUGF0aC5sZW5ndGggLSAxXTtcclxuICAgICAgICBjb25zdCBwMSA9IGNhbGN1bGF0ZWRQYXRoW2kgLSAxXTtcclxuICAgICAgICBjb25zdCBwMiA9IGNhbGN1bGF0ZWRQYXRoW2ldO1xyXG4gICAgICAgIGNvbnN0IGQxID0gdGhpcy5jdW11bGF0aXZlTGVuZ3Roc1tpIC0gMV07XHJcbiAgICAgICAgY29uc3QgZDIgPSB0aGlzLmN1bXVsYXRpdmVMZW5ndGhzW2ldO1xyXG4gICAgICAgIGlmICgoMCwgaW5kZXhfMS5kb3VibGVFcXVhbCkoZDEsIGQyKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE51bWJlciBiZXR3ZWVuIDAgYW5kIDFcclxuICAgICAgICBjb25zdCB6ID0gKGQgLSBkMSkgLyAoZDIgLSBkMSk7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4XzEuVmVjMi5pbnRlcnBvbGF0ZShwMSwgcDIsIHopO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuU2xpZGVyUGF0aCA9IFNsaWRlclBhdGg7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgZGVzYyA9IHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KSk7XHJcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChleHBvcnRzLCBwKSkgX19jcmVhdGVCaW5kaW5nKGV4cG9ydHMsIG0sIHApO1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMucGFyc2VSZXBsYXlGcmFtZXNGcm9tUmF3ID0gZXhwb3J0cy5wYXJzZUJsdWVwcmludCA9IHZvaWQgMDtcclxuLy8gYXVkaW9cclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2F1ZGlvL0hpdFNhbXBsZUluZm9cIiksIGV4cG9ydHMpO1xyXG4vLyBiZWF0bWFwXHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iZWF0bWFwL0NvbnRyb2xQb2ludHMvQ29udHJvbFBvaW50XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2JlYXRtYXAvQ29udHJvbFBvaW50cy9Db250cm9sUG9pbnRHcm91cFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iZWF0bWFwL0NvbnRyb2xQb2ludHMvRGlmZmljdWx0eUNvbnRyb2xQb2ludFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iZWF0bWFwL0NvbnRyb2xQb2ludHMvVGltaW5nQ29udHJvbFBvaW50XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21vZHMvSGFyZFJvY2tNb2RcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbW9kcy9Nb2RzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL21vZHMvU3RhY2tpbmdNb2RcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYmVhdG1hcC9CZWF0bWFwQnVpbGRlclwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9iZWF0bWFwL0JlYXRtYXBEaWZmaWN1bHR5XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2JlYXRtYXAvQmVhdG1hcFwiKSwgZXhwb3J0cyk7XHJcbi8vIGJsdWVwcmludHNcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2JsdWVwcmludC9CbHVlcHJpbnRcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vYmx1ZXByaW50L0hpdE9iamVjdFNldHRpbmdzXCIpLCBleHBvcnRzKTtcclxudmFyIEJsdWVwcmludFBhcnNlcl8xID0gcmVxdWlyZShcIi4vYmx1ZXByaW50L0JsdWVwcmludFBhcnNlclwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicGFyc2VCbHVlcHJpbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIEJsdWVwcmludFBhcnNlcl8xLnBhcnNlQmx1ZXByaW50OyB9IH0pO1xyXG4vLyBoaXRvYmplY3RzXHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9oaXRvYmplY3RzL3NsaWRlci9QYXRoQXBwcm94aW1hdG9yXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2hpdG9iamVjdHMvc2xpZGVyL1BhdGhDb250cm9sUG9pbnRcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaGl0b2JqZWN0cy9zbGlkZXIvUGF0aFR5cGVcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaGl0b2JqZWN0cy9zbGlkZXIvU2xpZGVyUGF0aFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9oaXRvYmplY3RzL0hpdENpcmNsZVwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9oaXRvYmplY3RzL1R5cGVzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2hpdG9iamVjdHMvU2xpZGVyXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2hpdG9iamVjdHMvU2xpZGVyQ2hlY2tQb2ludFwiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9oaXRvYmplY3RzL1NwaW5uZXJcIiksIGV4cG9ydHMpO1xyXG4vLyBnYW1lcGxheVxyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZ2FtZXBsYXkvR2FtZXBsYXlBbmFseXNpc0V2ZW50XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dhbWVwbGF5L0dhbWVwbGF5SW5mb1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9nYW1lcGxheS9HYW1lU3RhdGVcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZ2FtZXBsYXkvR2FtZVN0YXRlRXZhbHVhdG9yXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dhbWVwbGF5L0dhbWVTdGF0ZVRpbWVNYWNoaW5lXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2dhbWVwbGF5L1ZlcmRpY3RzXCIpLCBleHBvcnRzKTtcclxuLy8gcmVwbGF5c1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcmVwbGF5cy9SYXdSZXBsYXlEYXRhXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlcGxheXMvUmVwbGF5XCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3JlcGxheXMvUmVwbGF5Q2xpY2tzXCIpLCBleHBvcnRzKTtcclxudmFyIFJlcGxheVBhcnNlcl8xID0gcmVxdWlyZShcIi4vcmVwbGF5cy9SZXBsYXlQYXJzZXJcIik7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInBhcnNlUmVwbGF5RnJhbWVzRnJvbVJhd1wiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gUmVwbGF5UGFyc2VyXzEucGFyc2VSZXBsYXlGcmFtZXNGcm9tUmF3OyB9IH0pO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcGxheWZpZWxkXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3V0aWxzL2luZGV4XCIpLCBleHBvcnRzKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5FYXN5TW9kID0gdm9pZCAwO1xyXG5jb25zdCByYXRpbyA9IDAuNTtcclxuY2xhc3MgRWFzeU1vZCB7XHJcbn1cclxuZXhwb3J0cy5FYXN5TW9kID0gRWFzeU1vZDtcclxuRWFzeU1vZC5kaWZmaWN1bHR5QWRqdXN0ZXIgPSAoYmFzZSkgPT4gKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYmFzZSksIHsgb3ZlcmFsbERpZmZpY3VsdHk6IGJhc2Uub3ZlcmFsbERpZmZpY3VsdHkgKiByYXRpbywgYXBwcm9hY2hSYXRlOiBiYXNlLmFwcHJvYWNoUmF0ZSAqIHJhdGlvLCBkcmFpblJhdGU6IGJhc2UuZHJhaW5SYXRlICogcmF0aW8sIGNpcmNsZVNpemU6IGJhc2UuY2lyY2xlU2l6ZSAqIHJhdGlvIH0pKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5IYXJkUm9ja01vZCA9IHZvaWQgMDtcclxuY29uc3QgVHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9oaXRvYmplY3RzL1R5cGVzXCIpO1xyXG5jb25zdCBwbGF5ZmllbGRfMSA9IHJlcXVpcmUoXCIuLi9wbGF5ZmllbGRcIik7XHJcbmZ1bmN0aW9uIGZsaXBZKHBvc2l0aW9uKSB7XHJcbiAgICBjb25zdCB7IHgsIHkgfSA9IHBvc2l0aW9uO1xyXG4gICAgcmV0dXJuIHsgeCwgeTogcGxheWZpZWxkXzEuT1NVX1BMQVlGSUVMRF9IRUlHSFQgLSB5IH07XHJcbn1cclxuY2xhc3MgSGFyZFJvY2tNb2Qge1xyXG59XHJcbmV4cG9ydHMuSGFyZFJvY2tNb2QgPSBIYXJkUm9ja01vZDtcclxuSGFyZFJvY2tNb2QuZGlmZmljdWx0eUFkanVzdGVyID0gKGJhc2UpID0+IChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGJhc2UpLCB7IG92ZXJhbGxEaWZmaWN1bHR5OiBNYXRoLm1pbigxMCwgYmFzZS5vdmVyYWxsRGlmZmljdWx0eSAqIDEuNCksIGFwcHJvYWNoUmF0ZTogTWF0aC5taW4oMTAsIGJhc2UuYXBwcm9hY2hSYXRlICogMS40KSwgZHJhaW5SYXRlOiBNYXRoLm1pbigxMCwgYmFzZS5kcmFpblJhdGUgKiAxLjQpLCBjaXJjbGVTaXplOiBNYXRoLm1pbigxMCwgYmFzZS5jaXJjbGVTaXplICogMS4zKSB9KSk7XHJcbkhhcmRSb2NrTW9kLmZsaXBWZXJ0aWNhbGx5ID0gKGhpdE9iamVjdHMpID0+IHtcclxuICAgIGhpdE9iamVjdHMuZm9yRWFjaCgoaCkgPT4ge1xyXG4gICAgICAgIGlmICgoMCwgVHlwZXNfMS5pc0hpdENpcmNsZSkoaCkpIHtcclxuICAgICAgICAgICAgaC5wb3NpdGlvbiA9IGZsaXBZKGgucG9zaXRpb24pO1xyXG4gICAgICAgICAgICBoLnVuc3RhY2tlZFBvc2l0aW9uID0gZmxpcFkoaC51bnN0YWNrZWRQb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCgwLCBUeXBlc18xLmlzU2xpZGVyKShoKSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBOZWVkIHRvIHNldCBpbnZhbGlkIGFzIHdlbGwgb3IganVzdCByZWNyZWF0ZSB0aGUgY2hlY2twb2ludHMgZnJvbSBjb250cm9sIHBvaW50c1xyXG4gICAgICAgICAgICBoLmhlYWQucG9zaXRpb24gPSBmbGlwWShoLmhlYWQucG9zaXRpb24pO1xyXG4gICAgICAgICAgICBoLmhlYWQudW5zdGFja2VkUG9zaXRpb24gPSBmbGlwWShoLmhlYWQudW5zdGFja2VkUG9zaXRpb24pO1xyXG4gICAgICAgICAgICBoLnBhdGguY29udHJvbFBvaW50cy5mb3JFYWNoKChwKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwLm9mZnNldC55ICo9IC0xO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaC5wYXRoLm1ha2VJbnZhbGlkKCk7XHJcbiAgICAgICAgICAgIGguY2hlY2tQb2ludHMuZm9yRWFjaCgocCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcC5vZmZzZXQueSAqPSAtMTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuUkVMQVhfTEVOSUVOQ1kgPSBleHBvcnRzLk1vZFNldHRpbmdzID0gZXhwb3J0cy5Pc3VDbGFzc2ljTW9kcyA9IHZvaWQgMDtcclxuY29uc3QgSGFyZFJvY2tNb2RfMSA9IHJlcXVpcmUoXCIuL0hhcmRSb2NrTW9kXCIpO1xyXG5jb25zdCBFYXN5TW9kXzEgPSByZXF1aXJlKFwiLi9FYXN5TW9kXCIpO1xyXG4vLyBodHRwczovL29zdS5wcHkuc2gvd2lraS9lbi9HYW1lX21vZGlmaWVyXHJcbmV4cG9ydHMuT3N1Q2xhc3NpY01vZHMgPSBbXHJcbiAgICBcIkVBU1lcIixcclxuICAgIFwiSEFMRl9USU1FXCIsXHJcbiAgICBcIk5PX0ZBSUxcIixcclxuICAgIFwiSEFSRF9ST0NLXCIsXHJcbiAgICBcIlNVRERFTl9ERUFUSFwiLFxyXG4gICAgXCJQRVJGRUNUXCIsXHJcbiAgICBcIkRPVUJMRV9USU1FXCIsXHJcbiAgICBcIk5JR0hUX0NPUkVcIixcclxuICAgIFwiSElEREVOXCIsXHJcbiAgICBcIkZMQVNIX0xJR0hUXCIsXHJcbiAgICBcIkFVVE9fUExBWVwiLFxyXG4gICAgXCJBVVRPX1BJTE9UXCIsXHJcbiAgICBcIlJFTEFYXCIsXHJcbiAgICBcIlNQVU5fT1VUXCIsXHJcbiAgICBcIlNDT1JFX1YyXCIsXHJcbl07XHJcbmV4cG9ydHMuTW9kU2V0dGluZ3MgPSB7XHJcbiAgICBFQVNZOiB7XHJcbiAgICAgICAgbmFtZTogXCJFYXN5XCIsXHJcbiAgICAgICAgZGlmZmljdWx0eUFkanVzdGVyOiBFYXN5TW9kXzEuRWFzeU1vZC5kaWZmaWN1bHR5QWRqdXN0ZXIsXHJcbiAgICAgICAgc2NvcmVNdWx0aXBsaWVyOiAwLjUsXHJcbiAgICB9LFxyXG4gICAgSEFSRF9ST0NLOiB7XHJcbiAgICAgICAgbmFtZTogXCJIYXJkIFJvY2tcIixcclxuICAgICAgICBzY29yZU11bHRpcGxpZXI6IDEuMDYsXHJcbiAgICAgICAgZGlmZmljdWx0eUFkanVzdGVyOiBIYXJkUm9ja01vZF8xLkhhcmRSb2NrTW9kLmRpZmZpY3VsdHlBZGp1c3RlcixcclxuICAgIH0sXHJcbiAgICBET1VCTEVfVElNRTogeyBuYW1lOiBcIkRvdWJsZSBUaW1lXCIsIHNjb3JlTXVsdGlwbGllcjogMS4xMiB9LFxyXG4gICAgRkxBU0hfTElHSFQ6IHsgbmFtZTogXCJGbGFzaCBMaWdodFwiLCBzY29yZU11bHRpcGxpZXI6IDEuMTIgfSxcclxuICAgIEhBTEZfVElNRTogeyBuYW1lOiBcIkhhbGYgVGltZVwiLCBzY29yZU11bHRpcGxpZXI6IDAuMyB9LFxyXG4gICAgSElEREVOOiB7IG5hbWU6IFwiSGlkZGVuXCIsIHNjb3JlTXVsdGlwbGllcjogMS4wNiB9LFxyXG4gICAgTklHSFRfQ09SRTogeyBuYW1lOiBcIk5pZ2h0IENvcmVcIiwgc2NvcmVNdWx0aXBsaWVyOiAxLjEyIH0sXHJcbiAgICBOT19GQUlMOiB7IG5hbWU6IFwiTm8gRmFpbFwiLCBzY29yZU11bHRpcGxpZXI6IDAuNSB9LFxyXG4gICAgQVVUT19QTEFZOiB7IG5hbWU6IFwiQXV0byBQbGF5XCIgfSxcclxuICAgIEFVVE9fUElMT1Q6IHsgbmFtZTogXCJBdXRvIFBpbG90XCIgfSxcclxuICAgIFBFUkZFQ1Q6IHsgbmFtZTogXCJQZXJmZWN0XCIgfSxcclxuICAgIFJFTEFYOiB7IG5hbWU6IFwiUmVsYXhcIiB9LFxyXG4gICAgU0NPUkVfVjI6IHsgbmFtZTogXCJTY29yZSBWMlwiIH0sXHJcbiAgICBTUFVOX09VVDogeyBuYW1lOiBcIlNwdW4gT3V0XCIgfSxcclxuICAgIFNVRERFTl9ERUFUSDogeyBuYW1lOiBcIlN1ZGRlbiBEZWF0aFwiIH0sXHJcbn07XHJcbi8vIEhvdyBlYXJseSBiZWZvcmUgYSBoaXRvYmplY3QncyB0aW1lIFJlbGF4IGNhbiBoaXQuIChpbiBtcylcclxuZXhwb3J0cy5SRUxBWF9MRU5JRU5DWSA9IDEyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLm1vZGlmeVN0YWNraW5nUG9zaXRpb24gPSB2b2lkIDA7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vLi4vbWF0aC9pbmRleFwiKTtcclxuY29uc3QgVHlwZXNfMSA9IHJlcXVpcmUoXCIuLi9oaXRvYmplY3RzL1R5cGVzXCIpO1xyXG5mdW5jdGlvbiBzdGFja09mZnNldChzdGFja0hlaWdodCwgc2NhbGUpIHtcclxuICAgIGNvbnN0IHZhbHVlID0gKDAsIGluZGV4XzEuZmxvYXQzMl9tdWwpKHN0YWNrSGVpZ2h0LCAoMCwgaW5kZXhfMS5mbG9hdDMyX211bCkoc2NhbGUsIC02LjQpKTtcclxuICAgIHJldHVybiB7IHg6IHZhbHVlLCB5OiB2YWx1ZSB9O1xyXG59XHJcbmZ1bmN0aW9uIHN0YWNrZWRQb3NpdGlvbihpbml0aWFsUG9zaXRpb24sIHN0YWNrSGVpZ2h0LCBzY2FsZSkge1xyXG4gICAgY29uc3Qgb2Zmc2V0ID0gc3RhY2tPZmZzZXQoc3RhY2tIZWlnaHQsIHNjYWxlKTtcclxuICAgIHJldHVybiBpbmRleF8xLlZlYzIuYWRkKGluaXRpYWxQb3NpdGlvbiwgb2Zmc2V0KTtcclxufVxyXG5jb25zdCBTVEFDS19ESVNUQU5DRSA9IDM7XHJcbi8vIEkgcmVmdXNlIHRvIHB1dCBhbiBlbmRQb3NpdGlvbiBhbmQgZW5kVGltZSBpbnRvIEhpdENpcmNsZSBqdXN0IGJlY2F1c2UgaXQncyB0aGVuIGVhc2llciB0byBjb2RlIGl0IGhlcmVcclxuLy8gSG93IGRvZXMgaXQgZXZlbiBtYWtlIHNlbnNlIHRoYXQgYW4gSGl0Q2lyY2xlIGhhcyBhbiBcImVuZFBvc2l0aW9uXCIgb3IgXCJlbmRUaW1lXCIuXHJcbi8vIE9yIGhvdyBkb2VzIGl0IG1ha2Ugc2Vuc2UgdGhhdCBhIFNwaW5uZXIgaGFzIGEgc3RhY2tpbmcgcG9zaXRpb24sIHdoZW4gaXQgZXZlbiBkb2Vzbid0IGhhdmUgYSBwb3NpdGlvbj9cclxuY29uc3QgaGl0Q2lyY2xlID0gKG8pID0+ICgoMCwgVHlwZXNfMS5pc1NsaWRlcikobykgPyBvLmhlYWQgOiBvKTtcclxuY29uc3QgYXBwcm9hY2hEdXJhdGlvbiA9IChvKSA9PiBoaXRDaXJjbGUobykuYXBwcm9hY2hEdXJhdGlvbjtcclxuY29uc3QgaGl0VGltZSA9IChvKSA9PiBoaXRDaXJjbGUobykuaGl0VGltZTtcclxuY29uc3QgcG9zaXRpb24gPSAobykgPT4gaGl0Q2lyY2xlKG8pLnBvc2l0aW9uO1xyXG5jb25zdCBlbmRQb3NpdGlvbiA9IChvKSA9PiAoKDAsIFR5cGVzXzEuaXNTbGlkZXIpKG8pID8gby5lbmRQb3NpdGlvbiA6IG8ucG9zaXRpb24pO1xyXG5jb25zdCBlbmRUaW1lID0gKG8pID0+ICgoMCwgVHlwZXNfMS5pc1NsaWRlcikobykgPyBvLmVuZFRpbWUgOiBvLmhpdFRpbWUpO1xyXG5mdW5jdGlvbiBjcmVhdGVTdGFja2luZ0hlaWdodHMoaGl0T2JqZWN0cykge1xyXG4gICAgY29uc3Qgc3RhY2tpbmdIZWlnaHRzID0gbmV3IE1hcCgpO1xyXG4gICAgZnVuY3Rpb24gc2V0SChvLCB2YWwpIHtcclxuICAgICAgICBzdGFja2luZ0hlaWdodHMuc2V0KGhpdENpcmNsZShvKS5pZCwgdmFsKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIEgobykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4gKF9hID0gc3RhY2tpbmdIZWlnaHRzLmdldChoaXRDaXJjbGUobykuaWQpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xyXG4gICAgfVxyXG4gICAgLy8gVGhleSBhbGwgaGF2ZSAwIGFzIHN0YWNrIGhlaWdodHNcclxuICAgIGZvciAoY29uc3QgaG8gb2YgaGl0T2JqZWN0cykge1xyXG4gICAgICAgIGlmICghKDAsIFR5cGVzXzEuaXNTcGlubmVyKShobykpIHtcclxuICAgICAgICAgICAgc2V0SChobywgMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgc3RhY2tpbmdIZWlnaHRzLCBzZXRILCBIIH07XHJcbn1cclxuZnVuY3Rpb24gbmV3U3RhY2tpbmdIZWlnaHRzKGhpdE9iamVjdHMsIHN0YWNrTGVuaWVuY3kpIHtcclxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSAwO1xyXG4gICAgY29uc3QgZW5kSW5kZXggPSBoaXRPYmplY3RzLmxlbmd0aCAtIDE7XHJcbiAgICBjb25zdCBleHRlbmRlZEVuZEluZGV4ID0gZW5kSW5kZXg7XHJcbiAgICBjb25zdCB7IHN0YWNraW5nSGVpZ2h0cywgc2V0SCwgSCB9ID0gY3JlYXRlU3RhY2tpbmdIZWlnaHRzKGhpdE9iamVjdHMpO1xyXG4gICAgLy8gUmV2ZXJzZSBwYXNzIGZvciBzdGFjayBjYWxjdWxhdGlvblxyXG4gICAgbGV0IGV4dGVuZGVkU3RhcnRJbmRleCA9IHN0YXJ0SW5kZXg7XHJcbiAgICBmb3IgKGxldCBpID0gZXh0ZW5kZWRFbmRJbmRleDsgaSA+IHN0YXJ0SW5kZXg7IGktLSkge1xyXG4gICAgICAgIGxldCBuID0gaTtcclxuICAgICAgICBsZXQgb2JqZWN0SSA9IGhpdE9iamVjdHNbaV07XHJcbiAgICAgICAgaWYgKCgwLCBUeXBlc18xLmlzU3Bpbm5lcikob2JqZWN0SSkgfHwgSChvYmplY3RJKSAhPT0gMClcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgY29uc3Qgc3RhY2tUaHJlc2hvbGQgPSBhcHByb2FjaER1cmF0aW9uKG9iamVjdEkpICogc3RhY2tMZW5pZW5jeTtcclxuICAgICAgICBpZiAoKDAsIFR5cGVzXzEuaXNIaXRDaXJjbGUpKG9iamVjdEkpKSB7XHJcbiAgICAgICAgICAgIHdoaWxlICgtLW4gPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0TiA9IGhpdE9iamVjdHNbbl07XHJcbiAgICAgICAgICAgICAgICBpZiAoKDAsIFR5cGVzXzEuaXNTcGlubmVyKShvYmplY3ROKSlcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGlmIChoaXRUaW1lKG9iamVjdEkpIC0gZW5kVGltZShvYmplY3ROKSA+IHN0YWNrVGhyZXNob2xkKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgaWYgKG4gPCBleHRlbmRlZFN0YXJ0SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRIKG9iamVjdE4sIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuZGVkU3RhcnRJbmRleCA9IG47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoKDAsIFR5cGVzXzEuaXNTbGlkZXIpKG9iamVjdE4pICYmIGluZGV4XzEuVmVjMi5kaXN0YW5jZShlbmRQb3NpdGlvbihvYmplY3ROKSwgcG9zaXRpb24ob2JqZWN0SSkpIDwgU1RBQ0tfRElTVEFOQ0UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvZmZzZXQgPSBIKG9iamVjdEkpIC0gSChvYmplY3ROKSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IG4gKyAxOyBqIDw9IGk7IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvYmplY3RKID0gaGl0T2JqZWN0c1tqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgwLCBUeXBlc18xLmlzU3Bpbm5lcikob2JqZWN0SikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsgLy8gVE9ETzogSW5zZXJ0ZWQsIGJ1dCBub3Qgc3VyZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXhfMS5WZWMyLmRpc3RhbmNlKGVuZFBvc2l0aW9uKG9iamVjdE4pLCBwb3NpdGlvbihvYmplY3RKKSkgPCBTVEFDS19ESVNUQU5DRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0SChvYmplY3RKLCBIKG9iamVjdEopIC0gb2Zmc2V0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpbmRleF8xLlZlYzIuZGlzdGFuY2UocG9zaXRpb24ob2JqZWN0TiksIHBvc2l0aW9uKG9iamVjdEkpKSA8IFNUQUNLX0RJU1RBTkNFKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SChvYmplY3ROLCBIKG9iamVjdEkpICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0SSA9IG9iamVjdE47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHdoaWxlICgtLW4gPj0gc3RhcnRJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0TiA9IGhpdE9iamVjdHNbbl07XHJcbiAgICAgICAgICAgICAgICBpZiAoKDAsIFR5cGVzXzEuaXNTcGlubmVyKShvYmplY3ROKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGlmIChoaXRUaW1lKG9iamVjdEkpIC0gaGl0VGltZShvYmplY3ROKSA+IHN0YWNrVGhyZXNob2xkKVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4XzEuVmVjMi5kaXN0YW5jZShlbmRQb3NpdGlvbihvYmplY3ROKSwgcG9zaXRpb24ob2JqZWN0SSkpIDwgU1RBQ0tfRElTVEFOQ0UpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRIKG9iamVjdE4sIEgob2JqZWN0SSkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3RJID0gb2JqZWN0TjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBzdGFja2luZ0hlaWdodHM7XHJcbn1cclxuZnVuY3Rpb24gb2xkU3RhY2tpbmdIZWlnaHRzKGhpdE9iamVjdHMsIHN0YWNrTGVuaWVuY3kpIHtcclxuICAgIGNvbnN0IHsgc3RhY2tpbmdIZWlnaHRzLCBILCBzZXRIIH0gPSBjcmVhdGVTdGFja2luZ0hlaWdodHMoaGl0T2JqZWN0cyk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjdXJySGl0T2JqZWN0ID0gaGl0T2JqZWN0c1tpXTtcclxuICAgICAgICBpZiAoKDAsIFR5cGVzXzEuaXNTcGlubmVyKShjdXJySGl0T2JqZWN0KSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgaWYgKEgoY3VyckhpdE9iamVjdCkgIT09IDAgJiYgISgwLCBUeXBlc18xLmlzU2xpZGVyKShjdXJySGl0T2JqZWN0KSkge1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0YXJ0VGltZSA9IGVuZFRpbWUoY3VyckhpdE9iamVjdCk7XHJcbiAgICAgICAgbGV0IHNsaWRlclN0YWNrID0gMDtcclxuICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBoaXRPYmplY3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrVGhyZXNob2xkID0gYXBwcm9hY2hEdXJhdGlvbihjdXJySGl0T2JqZWN0KSAqIHN0YWNrTGVuaWVuY3k7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHRIaXRPYmplY3QgPSBoaXRPYmplY3RzW2pdO1xyXG4gICAgICAgICAgICBpZiAoKDAsIFR5cGVzXzEuaXNTcGlubmVyKShuZXh0SGl0T2JqZWN0KSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAoaGl0VGltZShuZXh0SGl0T2JqZWN0KSAtIHN0YWNrVGhyZXNob2xkID4gc3RhcnRUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBwb3NpdGlvbjIgPSAoMCwgVHlwZXNfMS5pc1NsaWRlcikoY3VyckhpdE9iamVjdCkgPyBjdXJySGl0T2JqZWN0LmVuZFBvc2l0aW9uIDogY3VyckhpdE9iamVjdC5wb3NpdGlvbjtcclxuICAgICAgICAgICAgaWYgKGluZGV4XzEuVmVjMi53aXRoaW5EaXN0YW5jZShwb3NpdGlvbihuZXh0SGl0T2JqZWN0KSwgcG9zaXRpb24oY3VyckhpdE9iamVjdCksIFNUQUNLX0RJU1RBTkNFKSkge1xyXG4gICAgICAgICAgICAgICAgc2V0SChjdXJySGl0T2JqZWN0LCBIKGN1cnJIaXRPYmplY3QpICsgMSk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBlbmRUaW1lKG5leHRIaXRPYmplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGluZGV4XzEuVmVjMi53aXRoaW5EaXN0YW5jZShwb3NpdGlvbihuZXh0SGl0T2JqZWN0KSwgcG9zaXRpb24yLCBTVEFDS19ESVNUQU5DRSkpIHtcclxuICAgICAgICAgICAgICAgIHNsaWRlclN0YWNrKys7XHJcbiAgICAgICAgICAgICAgICBzZXRIKG5leHRIaXRPYmplY3QsIEgobmV4dEhpdE9iamVjdCkgLSBzbGlkZXJTdGFjayk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFRpbWUgPSBlbmRUaW1lKG5leHRIaXRPYmplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YWNraW5nSGVpZ2h0cztcclxufVxyXG4vLyBNb2RpZmllcyB0aGUgaGl0T2JqZWN0cyBhY2NvcmRpbmcgdG8gdGhlIHN0YWNraW5nIGFsZ29yaXRobS5cclxuZnVuY3Rpb24gbW9kaWZ5U3RhY2tpbmdQb3NpdGlvbihoaXRPYmplY3RzLCBzdGFja0xlbmllbmN5LCBiZWF0bWFwVmVyc2lvbikge1xyXG4gICAgY29uc3QgaGVpZ2h0cyA9ICgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGJlYXRtYXBWZXJzaW9uID49IDYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld1N0YWNraW5nSGVpZ2h0cyhoaXRPYmplY3RzLCBzdGFja0xlbmllbmN5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBvbGRTdGFja2luZ0hlaWdodHMoaGl0T2JqZWN0cywgc3RhY2tMZW5pZW5jeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuICAgIGhpdE9iamVjdHMuZm9yRWFjaCgoaGl0T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgaWYgKCgwLCBUeXBlc18xLmlzU3Bpbm5lcikoaGl0T2JqZWN0KSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IGggPSBoaXRDaXJjbGUoaGl0T2JqZWN0KTtcclxuICAgICAgICBjb25zdCBoZWlnaHQgPSBoZWlnaHRzLmdldChoLmlkKTtcclxuICAgICAgICBpZiAoaGVpZ2h0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJTdGFjayBoZWlnaHQgY2FuJ3QgYmUgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBoLnBvc2l0aW9uID0gc3RhY2tlZFBvc2l0aW9uKGgucG9zaXRpb24sIGhlaWdodCwgaC5zY2FsZSk7XHJcbiAgICB9KTtcclxufVxyXG5leHBvcnRzLm1vZGlmeVN0YWNraW5nUG9zaXRpb24gPSBtb2RpZnlTdGFja2luZ1Bvc2l0aW9uO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLk9TVV9QTEFZRklFTERfV0lEVEggPSBleHBvcnRzLk9TVV9QTEFZRklFTERfSEVJR0hUID0gdm9pZCAwO1xyXG5leHBvcnRzLk9TVV9QTEFZRklFTERfSEVJR0hUID0gMzg0O1xyXG5leHBvcnRzLk9TVV9QTEFZRklFTERfV0lEVEggPSA1MTI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMubW9kc1RvQml0bWFzayA9IGV4cG9ydHMubW9kc0Zyb21CaXRtYXNrID0gZXhwb3J0cy5SZXBsYXlNb2RCaXQgPSBleHBvcnRzLlJhd1JlcGxheURhdGEgPSB2b2lkIDA7XHJcbi8qKlxyXG4gKiBUaGUgb25lIHRoYXQgZ2V0cyBwYXJzZWQgZnJvbSBhbiAub3NyIGZpbGVcclxuICogVGhpcyBpcyBleGFjdGx5IGxpa2UgdGhlIG9uZSB5b3Ugd291bGQgZ2V0IGZyb20gb3NyLW5vZGVcclxuICovXHJcbmNvbnN0IE1vZHNfMSA9IHJlcXVpcmUoXCIuLi9tb2RzL01vZHNcIik7XHJcbmNsYXNzIFJhd1JlcGxheURhdGEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5nYW1lTW9kZSA9IDA7XHJcbiAgICAgICAgdGhpcy5nYW1lVmVyc2lvbiA9IDA7XHJcbiAgICAgICAgdGhpcy5iZWF0bWFwTUQ1ID0gXCJcIjtcclxuICAgICAgICB0aGlzLnBsYXllck5hbWUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMucmVwbGF5TUQ1ID0gXCJcIjtcclxuICAgICAgICB0aGlzLm51bWJlcl8zMDBzID0gMDtcclxuICAgICAgICB0aGlzLm51bWJlcl8xMDBzID0gMDtcclxuICAgICAgICB0aGlzLm51bWJlcl81MHMgPSAwO1xyXG4gICAgICAgIHRoaXMuZ2VraXMgPSAwO1xyXG4gICAgICAgIHRoaXMua2F0dXMgPSAwO1xyXG4gICAgICAgIHRoaXMubWlzc2VzID0gMDtcclxuICAgICAgICB0aGlzLnNjb3JlID0gMDtcclxuICAgICAgICB0aGlzLm1heF9jb21ibyA9IDA7XHJcbiAgICAgICAgdGhpcy5wZXJmZWN0X2NvbWJvID0gMDtcclxuICAgICAgICB0aGlzLm1vZHMgPSAwO1xyXG4gICAgICAgIHRoaXMubGlmZV9iYXIgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gMDtcclxuICAgICAgICB0aGlzLnJlcGxheV9sZW5ndGggPSAwO1xyXG4gICAgICAgIHRoaXMucmVwbGF5X2RhdGEgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMudW5rbm93biA9IDA7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5SYXdSZXBsYXlEYXRhID0gUmF3UmVwbGF5RGF0YTtcclxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3BweS9vc3UvYmxvYi83NjU0ZGY5NGY2ZjM3YjgzODJiZTdkZmNiNGY2NzRlMDNiZDM1NDI3L29zdS5HYW1lL0JlYXRtYXBzL0xlZ2FjeS9MZWdhY3lNb2RzLmNzXHJcbmV4cG9ydHMuUmVwbGF5TW9kQml0ID0ge1xyXG4gICAgTk9fRkFJTDogMSA8PCAwLFxyXG4gICAgRUFTWTogMSA8PCAxLFxyXG4gICAgLy8gXCJUT1VDSF9ERVZJQ0VcIjogMSA8PCAyLFxyXG4gICAgSElEREVOOiAxIDw8IDMsXHJcbiAgICBIQVJEX1JPQ0s6IDEgPDwgNCxcclxuICAgIFNVRERFTl9ERUFUSDogMSA8PCA1LFxyXG4gICAgRE9VQkxFX1RJTUU6IDEgPDwgNixcclxuICAgIFJFTEFYOiAxIDw8IDcsXHJcbiAgICBIQUxGX1RJTUU6IDEgPDwgOCxcclxuICAgIE5JR0hUX0NPUkU6IDEgPDwgOSxcclxuICAgIEZMQVNIX0xJR0hUOiAxIDw8IDEwLFxyXG4gICAgQVVUT19QTEFZOiAxIDw8IDExLFxyXG4gICAgU1BVTl9PVVQ6IDEgPDwgMTIsXHJcbiAgICBBVVRPX1BJTE9UOiAxIDw8IDEzLFxyXG4gICAgUEVSRkVDVDogMSA8PCAxNCxcclxuICAgIFNDT1JFX1YyOiAxIDw8IDI5LFxyXG59O1xyXG5mdW5jdGlvbiBtb2RzRnJvbUJpdG1hc2sobW9kTWFzaykge1xyXG4gICAgY29uc3QgbGlzdCA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBtb2Qgb2YgTW9kc18xLk9zdUNsYXNzaWNNb2RzKSB7XHJcbiAgICAgICAgY29uc3QgYml0ID0gZXhwb3J0cy5SZXBsYXlNb2RCaXRbbW9kXTtcclxuICAgICAgICBpZiAoKG1vZE1hc2sgJiBiaXQpID4gMCkge1xyXG4gICAgICAgICAgICBsaXN0LnB1c2gobW9kKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbGlzdDtcclxufVxyXG5leHBvcnRzLm1vZHNGcm9tQml0bWFzayA9IG1vZHNGcm9tQml0bWFzaztcclxuZnVuY3Rpb24gbW9kc1RvQml0bWFzayhtb2RzKSB7XHJcbiAgICBsZXQgbWFzayA9IDA7XHJcbiAgICBmb3IgKGNvbnN0IG1vZCBvZiBtb2RzKSB7XHJcbiAgICAgICAgbWFzayB8PSAxIDw8IGV4cG9ydHMuUmVwbGF5TW9kQml0W21vZF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWFzaztcclxufVxyXG5leHBvcnRzLm1vZHNUb0JpdG1hc2sgPSBtb2RzVG9CaXRtYXNrO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlJlcGxheUJ1dHRvblN0YXRlID0gZXhwb3J0cy5Pc3VBY3Rpb24gPSB2b2lkIDA7XHJcbnZhciBPc3VBY3Rpb247XHJcbihmdW5jdGlvbiAoT3N1QWN0aW9uKSB7XHJcbiAgICBPc3VBY3Rpb25bT3N1QWN0aW9uW1wibGVmdEJ1dHRvblwiXSA9IDBdID0gXCJsZWZ0QnV0dG9uXCI7XHJcbiAgICBPc3VBY3Rpb25bT3N1QWN0aW9uW1wicmlnaHRCdXR0b25cIl0gPSAxXSA9IFwicmlnaHRCdXR0b25cIjtcclxufSkoT3N1QWN0aW9uID0gZXhwb3J0cy5Pc3VBY3Rpb24gfHwgKGV4cG9ydHMuT3N1QWN0aW9uID0ge30pKTtcclxudmFyIFJlcGxheUJ1dHRvblN0YXRlO1xyXG4oZnVuY3Rpb24gKFJlcGxheUJ1dHRvblN0YXRlKSB7XHJcbiAgICBSZXBsYXlCdXR0b25TdGF0ZVtSZXBsYXlCdXR0b25TdGF0ZVtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xyXG4gICAgUmVwbGF5QnV0dG9uU3RhdGVbUmVwbGF5QnV0dG9uU3RhdGVbXCJMZWZ0MVwiXSA9IDFdID0gXCJMZWZ0MVwiO1xyXG4gICAgUmVwbGF5QnV0dG9uU3RhdGVbUmVwbGF5QnV0dG9uU3RhdGVbXCJSaWdodDFcIl0gPSAyXSA9IFwiUmlnaHQxXCI7XHJcbiAgICBSZXBsYXlCdXR0b25TdGF0ZVtSZXBsYXlCdXR0b25TdGF0ZVtcIkxlZnQyXCJdID0gNF0gPSBcIkxlZnQyXCI7XHJcbiAgICBSZXBsYXlCdXR0b25TdGF0ZVtSZXBsYXlCdXR0b25TdGF0ZVtcIlJpZ2h0MlwiXSA9IDhdID0gXCJSaWdodDJcIjtcclxuICAgIFJlcGxheUJ1dHRvblN0YXRlW1JlcGxheUJ1dHRvblN0YXRlW1wiU21va2VcIl0gPSAxNl0gPSBcIlNtb2tlXCI7XHJcbn0pKFJlcGxheUJ1dHRvblN0YXRlID0gZXhwb3J0cy5SZXBsYXlCdXR0b25TdGF0ZSB8fCAoZXhwb3J0cy5SZXBsYXlCdXR0b25TdGF0ZSA9IHt9KSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY2FsY3VsYXRlUmVwbGF5Q2xpY2tzID0gdm9pZCAwO1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVSZXBsYXlDbGlja3MoZnJhbWVzKSB7XHJcbiAgICBjb25zdCBjbGlja3MgPSBbW10sIFtdXTtcclxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IFtudWxsLCBudWxsXTtcclxuICAgIGZvciAoY29uc3QgZnJhbWUgb2YgZnJhbWVzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gRW51bXMgYXJlIHNvIGJhZCBpbiB0ZXJtcyBvZiB0eXBlIHNhZmV0eVxyXG4gICAgICAgICAgICBjb25zdCBpc1ByZXNzaW5nID0gZnJhbWUuYWN0aW9ucy5pbmNsdWRlcyhpKTtcclxuICAgICAgICAgICAgaWYgKCFpc1ByZXNzaW5nICYmIHN0YXJ0VGltZVtpXSkge1xyXG4gICAgICAgICAgICAgICAgY2xpY2tzW2ldLnB1c2goW3N0YXJ0VGltZVtpXSwgZnJhbWUudGltZV0pO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lW2ldID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChpc1ByZXNzaW5nICYmIHN0YXJ0VGltZVtpXSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lW2ldID0gZnJhbWUudGltZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICAgICAgaWYgKHN0YXJ0VGltZVtpXSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjbGlja3NbaV0ucHVzaChbc3RhcnRUaW1lW2ldLCAxZTldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2xpY2tzO1xyXG59XHJcbmV4cG9ydHMuY2FsY3VsYXRlUmVwbGF5Q2xpY2tzID0gY2FsY3VsYXRlUmVwbGF5Q2xpY2tzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnBhcnNlUmVwbGF5RnJhbWVzRnJvbVJhdyA9IHZvaWQgMDtcclxuY29uc3QgUmVwbGF5XzEgPSByZXF1aXJlKFwiLi9SZXBsYXlcIik7XHJcbmNvbnN0IE1BWF9DT09SRElOQVRFX1ZBTFVFID0gMTMxMDcyO1xyXG4vLyBMZWdhY3lTY29yZURlY29kZXIuY3NcclxuLy8gUG93ZXJPZlR3byBiaXRcclxuY29uc3QgYml0bWFza0NoZWNrID0gKG1hc2ssIGJpdCkgPT4gKG1hc2sgJiBiaXQpICE9PSAwO1xyXG5jb25zdCBwYXJzZVJlcGxheUZyYW1lc0Zyb21SYXcgPSAocmF3U3RyaW5nKSA9PiB7XHJcbiAgICBjb25zdCBmcmFtZVN0cmluZ3MgPSByYXdTdHJpbmcuc3BsaXQoXCIsXCIpO1xyXG4gICAgbGV0IGxhc3RUaW1lID0gMDtcclxuICAgIGNvbnN0IGZyYW1lcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZVN0cmluZ3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBzcGxpdCA9IGZyYW1lU3RyaW5nc1tpXS5zcGxpdChcInxcIik7XHJcbiAgICAgICAgaWYgKHNwbGl0Lmxlbmd0aCA8IDQpXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGlmIChzcGxpdFswXSA9PT0gXCItMTIzNDVcIikge1xyXG4gICAgICAgICAgICAvLyBvc3UtbGF6ZXItY29tbWVudDogVGhlIHNlZWQgaXMgcHJvdmlkZWQgaW4gc3BsaXRbM10sIHdoaWNoIHdlJ2xsIG5lZWQgdG8gdXNlIGF0IHNvbWUgcG9pbnRcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRpZmYgPSBwYXJzZUZsb2F0KHNwbGl0WzBdKTtcclxuICAgICAgICBjb25zdCBtb3VzZVggPSBwYXJzZUZsb2F0KHNwbGl0WzFdKTtcclxuICAgICAgICBjb25zdCBtb3VzZVkgPSBwYXJzZUZsb2F0KHNwbGl0WzJdKTtcclxuICAgICAgICBpZiAoTWF0aC5hYnMobW91c2VYKSA+IE1BWF9DT09SRElOQVRFX1ZBTFVFIHx8IE1hdGguYWJzKG1vdXNlWSkgPiBNQVhfQ09PUkRJTkFURV9WQUxVRSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihcIlZhbHVlIG92ZXJmbG93IHdoaWxlIHBhcnNpbmcgbW91c2UgY29vcmRpbmF0ZXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxhc3RUaW1lICs9IGRpZmY7XHJcbiAgICAgICAgaWYgKGkgPCAyICYmIG1vdXNlWCA9PT0gMjU2ICYmIG1vdXNlWSA9PT0gLTUwMClcclxuICAgICAgICAgICAgLy8gYXQgdGhlIHN0YXJ0IG9mIHRoZSByZXBsYXksIHN0YWJsZSBwbGFjZXMgdHdvIHJlcGxheSBmcmFtZXMsIGF0IHRpbWUgMCBhbmQgU2tpcEJvdW5kYXJ5IC0gMSwgcmVzcGVjdGl2ZWx5LlxyXG4gICAgICAgICAgICAvLyBib3RoIGZyYW1lcyB1c2UgYSBwb3NpdGlvbiBvZiAoMjU2LCAtNTAwKS5cclxuICAgICAgICAgICAgLy8gaWdub3JlIHRoZXNlIGZyYW1lcyBhcyB0aGV5IHNlcnZlIG5vIHJlYWwgcHVycG9zZSAoYW5kIGNhbiBldmVuIG1pc2xlYWQgcnVsZXNldC1zcGVjaWZpYyBoYW5kbGVycyAtIHNlZSBtYW5pYSlcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgLy8gb3N1LWxhemVyLWNvbW1lbnQ6IEF0IHNvbWUgcG9pbnQgd2UgcHJvYmFibHkgd2FudCB0byByZXdpbmQgYW5kIHBsYXkgYmFjayB0aGUgbmVnYXRpdmUtdGltZSBmcmFtZXNcclxuICAgICAgICAvLyBidXQgZm9yIG5vdyB3ZSdsbCBhY2hpZXZlIGVxdWFsIHBsYXliYWNrIHRvIHN0YWJsZSBieSBza2lwcGluZyBuZWdhdGl2ZSBmcmFtZXNcclxuICAgICAgICBpZiAoZGlmZiA8IDApXHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbnMgPSBbXTtcclxuICAgICAgICBjb25zdCBiID0gcGFyc2VJbnQoc3BsaXRbM10pO1xyXG4gICAgICAgIGlmIChiaXRtYXNrQ2hlY2soYiwgUmVwbGF5XzEuUmVwbGF5QnV0dG9uU3RhdGUuTGVmdDEpIHx8IGJpdG1hc2tDaGVjayhiLCBSZXBsYXlfMS5SZXBsYXlCdXR0b25TdGF0ZS5MZWZ0MikpXHJcbiAgICAgICAgICAgIGFjdGlvbnMucHVzaChSZXBsYXlfMS5Pc3VBY3Rpb24ubGVmdEJ1dHRvbik7XHJcbiAgICAgICAgaWYgKGJpdG1hc2tDaGVjayhiLCBSZXBsYXlfMS5SZXBsYXlCdXR0b25TdGF0ZS5SaWdodDEpIHx8IGJpdG1hc2tDaGVjayhiLCBSZXBsYXlfMS5SZXBsYXlCdXR0b25TdGF0ZS5SaWdodDIpKVxyXG4gICAgICAgICAgICBhY3Rpb25zLnB1c2goUmVwbGF5XzEuT3N1QWN0aW9uLnJpZ2h0QnV0dG9uKTtcclxuICAgICAgICBmcmFtZXMucHVzaCh7IGFjdGlvbnMsIHBvc2l0aW9uOiB7IHg6IG1vdXNlWCwgeTogbW91c2VZIH0sIHRpbWU6IGxhc3RUaW1lIH0pO1xyXG4gICAgfVxyXG4gICAgLy8gV2UgZG8gdGhlIGZvbGxvd2luZyBtZXJnaW5nIGJlY2F1c2Ugc29tZSBmcmFtZXMgaGF2ZSB0aGUgc2FtZSB0aW1lLCBidXQgdGhlIGFjdGlvbnMgaGF2ZSB0byBiZSBtZXJnZWQgdG9nZXRoZXIuXHJcbiAgICBjb25zdCBtZXJnZWRGcmFtZXMgPSBbXTtcclxuICAgIGxldCBsYXN0O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmcmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAobGFzdCA9PT0gdW5kZWZpbmVkIHx8IGZyYW1lc1tpXS50aW1lICE9PSBsYXN0LnRpbWUpIHtcclxuICAgICAgICAgICAgbWVyZ2VkRnJhbWVzLnB1c2goZnJhbWVzW2ldKTtcclxuICAgICAgICAgICAgbGFzdCA9IGZyYW1lc1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZnJhbWVzW2ldLmFjdGlvbnMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBmcmFtZXNbaV0uYWN0aW9uc1tqXTtcclxuICAgICAgICAgICAgICAgIGlmICghbGFzdC5hY3Rpb25zLmluY2x1ZGVzKGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdC5hY3Rpb25zLnB1c2goYSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGFzdC5hY3Rpb25zLnNvcnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWVyZ2VkRnJhbWVzO1xyXG59O1xyXG5leHBvcnRzLnBhcnNlUmVwbGF5RnJhbWVzRnJvbVJhdyA9IHBhcnNlUmVwbGF5RnJhbWVzRnJvbVJhdztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5Tb3J0ZWRMaXN0ID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL21hdGgvaW5kZXhcIik7XHJcbmNsYXNzIFNvcnRlZExpc3Qge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gW107XHJcbiAgICB9XHJcbiAgICAvLyBiaW5hcnkgc2VhcmNoIG9yIG5vdCAtPiB0aGUgaW5zZXJ0L3JlbW92ZSBpcyBhbHNvIE8obikgLi4uLlxyXG4gICAgaW5kZXhPZih0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdC5maW5kSW5kZXgoKHZhbHVlKSA9PiAoMCwgaW5kZXhfMS5mbG9hdEVxdWFsKSh0LmNvbXBhcmVUbyh2YWx1ZSksIDApKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgd2lsbCBhbHNvIG1haW50YWluIGluc2VydGlvbiBvcmRlciwgd2hpY2ggbWVhbnMgdGhhdCBhZGRpbmcgYSAyJyB0byBbMSwgMiwgM10gd2lsbCByZXN1bHQgdG8gWzEsIDIsIDInLCAzXS5cclxuICAgIGFkZCh0KSB7XHJcbiAgICAgICAgY29uc3QgaSA9IHRoaXMubGlzdC5maW5kSW5kZXgoKHZhbHVlKSA9PiB0LmNvbXBhcmVUbyh2YWx1ZSkgPCAwKTtcclxuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtZWFucyB0aGF0IHRoZXJlIGlzIG5vIGVsZW1lbnQgdGhhdCBpcyBsYXJnZXIgdGhhbiB0aGUgZ2l2ZW4gdmFsdWVcclxuICAgICAgICAgICAgdGhpcy5saXN0LnNwbGljZSh0aGlzLmxpc3QubGVuZ3RoLCAwLCB0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5zcGxpY2UoaSwgMCwgdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVtb3ZlKHQpIHtcclxuICAgICAgICBjb25zdCBpID0gdGhpcy5pbmRleE9mKHQpO1xyXG4gICAgICAgIGlmIChpID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnNwbGljZShpLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXQoaSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3RbaV07XHJcbiAgICB9XHJcbiAgICBnZXQgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpc3QubGVuZ3RoO1xyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuU29ydGVkTGlzdCA9IFNvcnRlZExpc3Q7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuZGV0ZXJtaW5lRGVmYXVsdFBsYXliYWNrU3BlZWQgPSBleHBvcnRzLm5vcm1hbGl6ZUhpdE9iamVjdHMgPSB2b2lkIDA7XHJcbmNvbnN0IFNsaWRlcl8xID0gcmVxdWlyZShcIi4uL2hpdG9iamVjdHMvU2xpZGVyXCIpO1xyXG5mdW5jdGlvbiBub3JtYWxpemVIaXRPYmplY3RzKGhpdE9iamVjdHMpIHtcclxuICAgIGNvbnN0IGhpdE9iamVjdEJ5SWQgPSB7fTtcclxuICAgIGhpdE9iamVjdHMuZm9yRWFjaCgoaCkgPT4ge1xyXG4gICAgICAgIGhpdE9iamVjdEJ5SWRbaC5pZF0gPSBoO1xyXG4gICAgICAgIGlmIChoIGluc3RhbmNlb2YgU2xpZGVyXzEuU2xpZGVyKSB7XHJcbiAgICAgICAgICAgIGhpdE9iamVjdEJ5SWRbaC5oZWFkLmlkXSA9IGguaGVhZDtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBjIG9mIGguY2hlY2tQb2ludHMpIHtcclxuICAgICAgICAgICAgICAgIGhpdE9iamVjdEJ5SWRbYy5pZF0gPSBjO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaGl0T2JqZWN0QnlJZDtcclxufVxyXG5leHBvcnRzLm5vcm1hbGl6ZUhpdE9iamVjdHMgPSBub3JtYWxpemVIaXRPYmplY3RzO1xyXG5mdW5jdGlvbiBkZXRlcm1pbmVEZWZhdWx0UGxheWJhY2tTcGVlZChtb2RzKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1vZHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAobW9kc1tpXSA9PT0gXCJET1VCTEVfVElNRVwiIHx8IG1vZHNbaV0gPT09IFwiTklHSFRfQ09SRVwiKVxyXG4gICAgICAgICAgICByZXR1cm4gMS41O1xyXG4gICAgICAgIGlmIChtb2RzW2ldID09PSBcIkhBTEZfVElNRVwiKVxyXG4gICAgICAgICAgICByZXR1cm4gMC43NTtcclxuICAgIH1cclxuICAgIHJldHVybiAxLjA7XHJcbn1cclxuZXhwb3J0cy5kZXRlcm1pbmVEZWZhdWx0UGxheWJhY2tTcGVlZCA9IGRldGVybWluZURlZmF1bHRQbGF5YmFja1NwZWVkO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSkpO1xyXG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmJ1aWxkQmVhdG1hcCA9IGV4cG9ydHMucGFyc2VCbHVlcHJpbnQgPSB2b2lkIDA7XHJcbnZhciBpbmRleF8xID0gcmVxdWlyZShcIi4vY29yZS9pbmRleFwiKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicGFyc2VCbHVlcHJpbnRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGluZGV4XzEucGFyc2VCbHVlcHJpbnQ7IH0gfSk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImJ1aWxkQmVhdG1hcFwiLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gaW5kZXhfMS5idWlsZEJlYXRtYXA7IH0gfSk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9saWIvcHBcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vbGliL2RpZmZcIiksIGV4cG9ydHMpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNhbGN1bGF0ZURpZmZpY3VsdHlBdHRyaWJ1dGVzID0gdm9pZCAwO1xyXG4vLyBTdHJhaW5cclxuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuLi9jb3JlL2luZGV4XCIpO1xyXG5jb25zdCBpbmRleF8yID0gcmVxdWlyZShcIi4uL21hdGgvaW5kZXhcIik7XHJcbmNvbnN0IGFpbV8xID0gcmVxdWlyZShcIi4vc2tpbGxzL2FpbVwiKTtcclxuY29uc3Qgc3BlZWRfMSA9IHJlcXVpcmUoXCIuL3NraWxscy9zcGVlZFwiKTtcclxuY29uc3QgZmxhc2hsaWdodF8xID0gcmVxdWlyZShcIi4vc2tpbGxzL2ZsYXNobGlnaHRcIik7XHJcbi8vIFRPRE86IFV0aWxpdGl5IGZ1bmN0aW9ucz9cclxuY29uc3Qgc3RhcnRUaW1lID0gKG8pID0+ICgoMCwgaW5kZXhfMS5pc0hpdENpcmNsZSkobykgPyBvLmhpdFRpbWUgOiBvLnN0YXJ0VGltZSk7XHJcbmNvbnN0IGVuZFRpbWUgPSAobykgPT4gKCgwLCBpbmRleF8xLmlzSGl0Q2lyY2xlKShvKSA/IG8uaGl0VGltZSA6IG8uZW5kVGltZSk7XHJcbmNvbnN0IHBvc2l0aW9uID0gKG8pID0+ICgoMCwgaW5kZXhfMS5pc0hpdENpcmNsZSkobykgPyBvLnBvc2l0aW9uIDogby5oZWFkLnBvc2l0aW9uKTtcclxuY29uc3Qgbm9ybWFsaXNlZF9yYWRpdXMgPSA1MC4wO1xyXG5jb25zdCBtYXhpbXVtX3NsaWRlcl9yYWRpdXMgPSBub3JtYWxpc2VkX3JhZGl1cyAqIDIuNDtcclxuY29uc3QgYXNzdW1lZF9zbGlkZXJfcmFkaXVzID0gbm9ybWFsaXNlZF9yYWRpdXMgKiAxLjg7XHJcbmZ1bmN0aW9uIGNvbXB1dGVTbGlkZXJDdXJzb3JQb3NpdGlvbihzbGlkZXIpIHtcclxuICAgIGNvbnN0IGxhenlUcmF2ZWxUaW1lID0gc2xpZGVyLmNoZWNrUG9pbnRzW3NsaWRlci5jaGVja1BvaW50cy5sZW5ndGggLSAxXS5oaXRUaW1lIC0gc2xpZGVyLnN0YXJ0VGltZTtcclxuICAgIC8vIGZsb2F0XHJcbiAgICBsZXQgbGF6eVRyYXZlbERpc3RhbmNlID0gMDtcclxuICAgIGxldCBlbmRUaW1lTWluID0gbGF6eVRyYXZlbFRpbWUgLyBzbGlkZXIuc3BhbkR1cmF0aW9uO1xyXG4gICAgLy8gVE9ETzogQ29udHJvbCB0aGlzIGNvZGUgYWdhaW5cclxuICAgIGlmIChlbmRUaW1lTWluICUgMiA+PSAxKVxyXG4gICAgICAgIGVuZFRpbWVNaW4gPSAxIC0gKGVuZFRpbWVNaW4gJSAxKTtcclxuICAgIGVsc2VcclxuICAgICAgICBlbmRUaW1lTWluICU9IDE7XHJcbiAgICAvLyB0ZW1wb3JhcnkgbGF6eSBlbmQgcG9zaXRpb24gdW50aWwgYSByZWFsIHJlc3VsdCBjYW4gYmUgZGVyaXZlZC5cclxuICAgIGxldCBsYXp5RW5kUG9zaXRpb24gPSBpbmRleF8yLlZlYzIuYWRkKHNsaWRlci5zdGFydFBvc2l0aW9uLCBzbGlkZXIucGF0aC5wb3NpdGlvbkF0KGVuZFRpbWVNaW4pKTtcclxuICAgIGxldCBjdXJyQ3Vyc29yUG9zaXRpb24gPSBzbGlkZXIuc3RhcnRQb3NpdGlvbjtcclxuICAgIGNvbnN0IHNjYWxpbmdGYWN0b3IgPSBub3JtYWxpc2VkX3JhZGl1cyAvIHNsaWRlci5yYWRpdXM7IC8vIGxhenlTbGlkZXJEaXN0YW5jZSBpcyBjb2RlZCB0byBiZSBzZW5zaXRpdmUgdG8gc2NhbGluZyxcclxuICAgIC8vIHRoaXMgbWFrZXMgdGhlIG1hdGhzIGVhc2llciB3aXRoIHRoZSB0aHJlc2hvbGRzIGJlaW5nXHJcbiAgICAvLyB1c2VkLlxyXG4gICAgY29uc3QgbnVtQ2hlY2tQb2ludHMgPSBzbGlkZXIuY2hlY2tQb2ludHMubGVuZ3RoO1xyXG4gICAgLy8gV2Ugc3RhcnQgZnJvbSAwIGJlY2F1c2UgdGhlIGhlYWQgaXMgTk9UIGEgc2xpZGVyIGNoZWNrcG9pbnQgaGVyZVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1DaGVja1BvaW50czsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY3Vyck1vdmVtZW50T2JqID0gc2xpZGVyLmNoZWNrUG9pbnRzW2ldO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgd2hlcmUgd2UgaGF2ZSB0byBiZSB2ZXJ5IGNhcmVmdWwgZHVlIHRvIG9zdSFsYXplciB1c2luZyB0aGVpciBWSVNVQUwgUkVOREVSSU5HIFBPU0lUSU9OIGluc3RlYWQgb2ZcclxuICAgICAgICAvLyBKVURHRU1FTlQgUE9TSVRJT04gZm9yIHRoZWlyIGxhc3QgdGljay4gYnJ1aFxyXG4gICAgICAgIGNvbnN0IGN1cnJNb3ZlbWVudE9ialBvc2l0aW9uID0gY3Vyck1vdmVtZW50T2JqLnR5cGUgPT09IFwiTEFTVF9MRUdBQ1lfVElDS1wiID8gc2xpZGVyLmVuZFBvc2l0aW9uIDogY3Vyck1vdmVtZW50T2JqLnBvc2l0aW9uO1xyXG4gICAgICAgIGxldCBjdXJyTW92ZW1lbnQgPSBpbmRleF8yLlZlYzIuc3ViKGN1cnJNb3ZlbWVudE9ialBvc2l0aW9uLCBjdXJyQ3Vyc29yUG9zaXRpb24pO1xyXG4gICAgICAgIGxldCBjdXJyTW92ZW1lbnRMZW5ndGggPSBzY2FsaW5nRmFjdG9yICogY3Vyck1vdmVtZW50Lmxlbmd0aCgpO1xyXG4gICAgICAgIC8vIEFtb3VudCBvZiBtb3ZlbWVudCByZXF1aXJlZCBzbyB0aGF0IHRoZSBjdXJzb3IgcG9zaXRpb24gbmVlZHMgdG8gYmUgdXBkYXRlZC5cclxuICAgICAgICBsZXQgcmVxdWlyZWRNb3ZlbWVudCA9IGFzc3VtZWRfc2xpZGVyX3JhZGl1cztcclxuICAgICAgICBpZiAoaSA9PT0gbnVtQ2hlY2tQb2ludHMgLSAxKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBlbmQgb2YgYSBzbGlkZXIgaGFzIHNwZWNpYWwgYWltIHJ1bGVzIGR1ZSB0byB0aGUgcmVsYXhlZCB0aW1lIGNvbnN0cmFpbnQgb24gcG9zaXRpb24uXHJcbiAgICAgICAgICAgIC8vIFRoZXJlIGlzIGJvdGggYSBsYXp5IGVuZCBwb3NpdGlvbiBhcyB3ZWxsIGFzIHRoZSBhY3R1YWwgZW5kIHNsaWRlciBwb3NpdGlvbi4gV2UgYXNzdW1lIHRoZSBwbGF5ZXIgdGFrZXMgdGhlXHJcbiAgICAgICAgICAgIC8vIHNpbXBsZXIgbW92ZW1lbnQuIEZvciBzbGlkZXJzIHRoYXQgYXJlIGNpcmN1bGFyLCB0aGUgbGF6eSBlbmQgcG9zaXRpb24gbWF5IGFjdHVhbGx5IGJlIGZhcnRoZXIgYXdheSB0aGFuIHRoZVxyXG4gICAgICAgICAgICAvLyBzbGlkZXJzIHRydWUgZW5kLiBUaGlzIGNvZGUgaXMgZGVzaWduZWQgdG8gcHJldmVudCBidWZmaW5nIHNpdHVhdGlvbnMgd2hlcmUgbGF6eSBlbmQgaXMgYWN0dWFsbHkgYSBsZXNzXHJcbiAgICAgICAgICAgIC8vIGVmZmljaWVudCBtb3ZlbWVudC5cclxuICAgICAgICAgICAgY29uc3QgbGF6eU1vdmVtZW50ID0gaW5kZXhfMi5WZWMyLnN1YihsYXp5RW5kUG9zaXRpb24sIGN1cnJDdXJzb3JQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChsYXp5TW92ZW1lbnQubGVuZ3RoKCkgPCBjdXJyTW92ZW1lbnQubGVuZ3RoKCkpXHJcbiAgICAgICAgICAgICAgICBjdXJyTW92ZW1lbnQgPSBsYXp5TW92ZW1lbnQ7XHJcbiAgICAgICAgICAgIGN1cnJNb3ZlbWVudExlbmd0aCA9IHNjYWxpbmdGYWN0b3IgKiBjdXJyTW92ZW1lbnQubGVuZ3RoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGN1cnJNb3ZlbWVudE9iai50eXBlID09PSBcIlJFUEVBVFwiKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBhIHNsaWRlciByZXBlYXQsIGFzc3VtZSBhIHRpZ2h0ZXIgbW92ZW1lbnQgdGhyZXNob2xkIHRvIGJldHRlciBhc3Nlc3MgcmVwZWF0IHNsaWRlcnMuXHJcbiAgICAgICAgICAgIHJlcXVpcmVkTW92ZW1lbnQgPSBub3JtYWxpc2VkX3JhZGl1cztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGN1cnJNb3ZlbWVudExlbmd0aCA+IHJlcXVpcmVkTW92ZW1lbnQpIHtcclxuICAgICAgICAgICAgLy8gdGhpcyBmaW5kcyB0aGUgcG9zaXRpb25hbCBkZWx0YSBmcm9tIHRoZSByZXF1aXJlZCByYWRpdXMgYW5kIHRoZSBjdXJyZW50IHBvc2l0aW9uLCBhbmQgdXBkYXRlcyB0aGVcclxuICAgICAgICAgICAgLy8gY3VyckN1cnNvclBvc2l0aW9uIGFjY29yZGluZ2x5LCBhcyB3ZWxsIGFzIHJld2FyZGluZyBkaXN0YW5jZS5cclxuICAgICAgICAgICAgY3VyckN1cnNvclBvc2l0aW9uID0gaW5kZXhfMi5WZWMyLmFkZChjdXJyQ3Vyc29yUG9zaXRpb24sIGluZGV4XzIuVmVjMi5zY2FsZShjdXJyTW92ZW1lbnQsICgwLCBpbmRleF8yLmZsb2F0MzJfZGl2KShjdXJyTW92ZW1lbnRMZW5ndGggLSByZXF1aXJlZE1vdmVtZW50LCBjdXJyTW92ZW1lbnRMZW5ndGgpKSk7XHJcbiAgICAgICAgICAgIGN1cnJNb3ZlbWVudExlbmd0aCAqPSAoY3Vyck1vdmVtZW50TGVuZ3RoIC0gcmVxdWlyZWRNb3ZlbWVudCkgLyBjdXJyTW92ZW1lbnRMZW5ndGg7XHJcbiAgICAgICAgICAgIGxhenlUcmF2ZWxEaXN0YW5jZSA9ICgwLCBpbmRleF8yLmZsb2F0MzJfYWRkKShsYXp5VHJhdmVsRGlzdGFuY2UsIGN1cnJNb3ZlbWVudExlbmd0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpID09PSBudW1DaGVja1BvaW50cyAtIDEpXHJcbiAgICAgICAgICAgIGxhenlFbmRQb3NpdGlvbiA9IGN1cnJDdXJzb3JQb3NpdGlvbjtcclxuICAgIH1cclxuICAgIGxhenlUcmF2ZWxEaXN0YW5jZSA9ICgwLCBpbmRleF8yLmZsb2F0MzJfbXVsKShsYXp5VHJhdmVsRGlzdGFuY2UsIE1hdGgucG93KDEgKyBzbGlkZXIucmVwZWF0Q291bnQgLyAyLjUsIDEuMCAvIDIuNSkpOyAvLyBCb251cyBmb3JcclxuICAgIC8vIHJlcGVhdFxyXG4gICAgLy8gc2xpZGVyc1xyXG4gICAgLy8gdW50aWwgYVxyXG4gICAgLy8gYmV0dGVyXHJcbiAgICAvLyBwZXIgbmVzdGVkIG9iamVjdCBzdHJhaW4gc3lzdGVtIGNhbiBiZVxyXG4gICAgLy8gYWNoaWV2ZWQuXHJcbiAgICByZXR1cm4geyBsYXp5VHJhdmVsVGltZSwgbGF6eVRyYXZlbERpc3RhbmNlLCBsYXp5RW5kUG9zaXRpb24gfTtcclxufVxyXG5jb25zdCBkZWZhdWx0T3N1RGlmZmljdWx0eUhpdE9iamVjdCA9ICgpID0+ICh7XHJcbiAgICBkZWx0YVRpbWU6IDAsXHJcbiAgICB0cmF2ZWxUaW1lOiAwLFxyXG4gICAgdHJhdmVsRGlzdGFuY2U6IDAsXHJcbiAgICBqdW1wRGlzdGFuY2U6IDAsXHJcbiAgICBtb3ZlbWVudERpc3RhbmNlOiAwLFxyXG4gICAgbW92ZW1lbnRUaW1lOiAwLFxyXG4gICAgc3RyYWluVGltZTogMCxcclxuICAgIGVuZFRpbWU6IDAsXHJcbiAgICBzdGFydFRpbWU6IDAsXHJcbiAgICBhbmdsZTogbnVsbCxcclxufSk7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIG4gT3N1RGlmZmljdWx0eUhpdE9iamVjdHMgd2hlcmUgdGhlIGZpcnN0IG9uZSBpcyBhIGR1bW15IHZhbHVlXHJcbiAqL1xyXG5mdW5jdGlvbiBwcmVwcm9jZXNzRGlmZmljdWx0eUhpdE9iamVjdChoaXRPYmplY3RzLCBjbG9ja1JhdGUpIHtcclxuICAgIGNvbnN0IGRpZmZpY3VsdHlIaXRPYmplY3RzID0gW2RlZmF1bHRPc3VEaWZmaWN1bHR5SGl0T2JqZWN0KCldO1xyXG4gICAgY29uc3QgbWluX2RlbHRhX3RpbWUgPSAyNTtcclxuICAgIGNvbnN0IGNsb2NrQWRqdXN0ZWQgPSAoeCkgPT4geCAvIGNsb2NrUmF0ZTtcclxuICAgIC8vIENhY2hpbmcgZm9yIHRoZSBzbGlkZXJzXHJcbiAgICBjb25zdCBzbGlkZXJDdXJzb3JQb3NpdGlvbiA9IHt9O1xyXG4gICAgZnVuY3Rpb24gY29tcHV0ZVNsaWRlckN1cnNvclBvc2l0aW9uSWZOZWVkZWQocykge1xyXG4gICAgICAgIGlmIChzbGlkZXJDdXJzb3JQb3NpdGlvbltzLmlkXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHNsaWRlckN1cnNvclBvc2l0aW9uW3MuaWRdID0gY29tcHV0ZVNsaWRlckN1cnNvclBvc2l0aW9uKHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2xpZGVyQ3Vyc29yUG9zaXRpb25bcy5pZF07XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGhpdE9iamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBsYXN0TGFzdCA9IGhpdE9iamVjdHNbaSAtIDJdO1xyXG4gICAgICAgIGNvbnN0IGxhc3QgPSBoaXRPYmplY3RzW2kgLSAxXTtcclxuICAgICAgICBjb25zdCBjdXJyZW50ID0gaGl0T2JqZWN0c1tpXTtcclxuICAgICAgICBjb25zdCBkaWZmaWN1bHR5SGl0T2JqZWN0ID0gKGZ1bmN0aW9uIGNhbGN1bGF0ZURpZmZpY3VsdHlIaXRPYmplY3QoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGRlZmF1bHRPc3VEaWZmaWN1bHR5SGl0T2JqZWN0KCk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5zdGFydFRpbWUgPSBjbG9ja0FkanVzdGVkKHN0YXJ0VGltZShjdXJyZW50KSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC5lbmRUaW1lID0gY2xvY2tBZGp1c3RlZChlbmRUaW1lKGN1cnJlbnQpKTtcclxuICAgICAgICAgICAgcmVzdWx0LmRlbHRhVGltZSA9IGNsb2NrQWRqdXN0ZWQoc3RhcnRUaW1lKGN1cnJlbnQpIC0gc3RhcnRUaW1lKGxhc3QpKTtcclxuICAgICAgICAgICAgY29uc3Qgc3RyYWluVGltZSA9IE1hdGgubWF4KHJlc3VsdC5kZWx0YVRpbWUsIG1pbl9kZWx0YV90aW1lKTtcclxuICAgICAgICAgICAgcmVzdWx0LnN0cmFpblRpbWUgPSBzdHJhaW5UaW1lO1xyXG4gICAgICAgICAgICBpZiAoKDAsIGluZGV4XzEuaXNTcGlubmVyKShjdXJyZW50KSB8fCAoMCwgaW5kZXhfMS5pc1NwaW5uZXIpKGxhc3QpKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgLy8gZmxvYXRcclxuICAgICAgICAgICAgbGV0IHNjYWxpbmdGYWN0b3IgPSAoMCwgaW5kZXhfMi5mbG9hdDMyX2Rpdikobm9ybWFsaXNlZF9yYWRpdXMsIGN1cnJlbnQucmFkaXVzKTtcclxuICAgICAgICAgICAgLy8gTm93IGN1cnJlbnQgaXMgZWl0aGVyIEhpdENpcmNsZSBvciBTbGlkZXJcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQucmFkaXVzIDwgMzApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNtYWxsQ2lyY2xlQm9udXMgPSAoMCwgaW5kZXhfMi5mbG9hdDMyX2RpdikoTWF0aC5taW4oMzAgLSBjdXJyZW50LnJhZGl1cywgNSksIDUwKTtcclxuICAgICAgICAgICAgICAgIHNjYWxpbmdGYWN0b3IgKj0gMSArIHNtYWxsQ2lyY2xlQm9udXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0RW5kQ3Vyc29yUG9zaXRpb24obykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzSGl0Q2lyY2xlKShvKSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5wb3NpdGlvbjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbGF6eUVuZFBvc2l0aW9uIH0gPSBjb21wdXRlU2xpZGVyQ3Vyc29yUG9zaXRpb25JZk5lZWRlZChvKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsYXp5RW5kUG9zaXRpb24gIT09IG51bGwgJiYgbGF6eUVuZFBvc2l0aW9uICE9PSB2b2lkIDAgPyBsYXp5RW5kUG9zaXRpb24gOiBvLnN0YXJ0UG9zaXRpb247IC8vIFRPRE86IEhvdyBjYW4gaXQgYmUgbnVsbGFibGU/XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbGFzdEN1cnNvclBvc2l0aW9uID0gZ2V0RW5kQ3Vyc29yUG9zaXRpb24obGFzdCk7XHJcbiAgICAgICAgICAgIC8vIHNxcnQoKHgxKmMteDIqYyleMisoeTEqYy15MipjKV4yKSA9IHNxcnQoY14yICh4MS14MileMiArIGNeMiAoeTEteTIpXjIpID0gYyAqIGRpc3QoKHgxLHkxKSwoeDIseTIpKVxyXG4gICAgICAgICAgICByZXN1bHQuanVtcERpc3RhbmNlID0gaW5kZXhfMi5WZWMyLmRpc3RhbmNlKGluZGV4XzIuVmVjMi5zY2FsZShwb3NpdGlvbihjdXJyZW50KSwgc2NhbGluZ0ZhY3RvciksIGluZGV4XzIuVmVjMi5zY2FsZShsYXN0Q3Vyc29yUG9zaXRpb24sIHNjYWxpbmdGYWN0b3IpKTtcclxuICAgICAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzU2xpZGVyKShsYXN0KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBzdG9yZSBpbnRvIHRoZSBTbGlkZXIgb2JqZWN0IVxyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBsYXp5VHJhdmVsVGltZTogbGFzdFNsaWRlckxhenlUcmF2ZWxUaW1lLCBsYXp5VHJhdmVsRGlzdGFuY2U6IGxhc3RTbGlkZXJMYXp5VHJhdmVsRGlzdGFuY2UgfSA9IGNvbXB1dGVTbGlkZXJDdXJzb3JQb3NpdGlvbklmTmVlZGVkKGxhc3QpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnRyYXZlbERpc3RhbmNlID0gbGFzdFNsaWRlckxhenlUcmF2ZWxEaXN0YW5jZTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC50cmF2ZWxUaW1lID0gTWF0aC5tYXgobGFzdFNsaWRlckxhenlUcmF2ZWxUaW1lIC8gY2xvY2tSYXRlLCBtaW5fZGVsdGFfdGltZSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubW92ZW1lbnRUaW1lID0gTWF0aC5tYXgoc3RyYWluVGltZSAtIHJlc3VsdC50cmF2ZWxUaW1lLCBtaW5fZGVsdGFfdGltZSk7XHJcbiAgICAgICAgICAgICAgICAvLyB0YWlsQ2lyY2xlLlN0YWNrZWRQb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFpbEp1bXBEaXN0YW5jZSA9ICgwLCBpbmRleF8yLmZsb2F0MzIpKGluZGV4XzIuVmVjMi5kaXN0YW5jZShsYXN0LmVuZFBvc2l0aW9uLCBwb3NpdGlvbihjdXJyZW50KSkgKiBzY2FsaW5nRmFjdG9yKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5tb3ZlbWVudERpc3RhbmNlID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmVzdWx0Lmp1bXBEaXN0YW5jZSAtIChtYXhpbXVtX3NsaWRlcl9yYWRpdXMgLSBhc3N1bWVkX3NsaWRlcl9yYWRpdXMpLCB0YWlsSnVtcERpc3RhbmNlIC0gbWF4aW11bV9zbGlkZXJfcmFkaXVzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQubW92ZW1lbnRUaW1lID0gc3RyYWluVGltZTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5tb3ZlbWVudERpc3RhbmNlID0gcmVzdWx0Lmp1bXBEaXN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobGFzdExhc3QgIT09IHVuZGVmaW5lZCAmJiAhKDAsIGluZGV4XzEuaXNTcGlubmVyKShsYXN0TGFzdCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RMYXN0Q3Vyc29yUG9zaXRpb24gPSBnZXRFbmRDdXJzb3JQb3NpdGlvbihsYXN0TGFzdCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2MSA9IGluZGV4XzIuVmVjMi5zdWIobGFzdExhc3RDdXJzb3JQb3NpdGlvbiwgcG9zaXRpb24obGFzdCkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdjIgPSBpbmRleF8yLlZlYzIuc3ViKHBvc2l0aW9uKGN1cnJlbnQpLCBsYXN0Q3Vyc29yUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZG90ID0gKDAsIGluZGV4XzIuZmxvYXQzMikoaW5kZXhfMi5WZWMyLmRvdCh2MSwgdjIpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRldCA9ICgwLCBpbmRleF8yLmZsb2F0MzJfYWRkKSgoMCwgaW5kZXhfMi5mbG9hdDMyX211bCkodjEueCwgdjIueSksIC0oMCwgaW5kZXhfMi5mbG9hdDMyX211bCkodjEueSwgdjIueCkpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LmFuZ2xlID0gTWF0aC5hYnMoTWF0aC5hdGFuMihkZXQsIGRvdCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfSkoKTtcclxuICAgICAgICBkaWZmaWN1bHR5SGl0T2JqZWN0cy5wdXNoKGRpZmZpY3VsdHlIaXRPYmplY3QpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRpZmZpY3VsdHlIaXRPYmplY3RzO1xyXG59XHJcbmZ1bmN0aW9uIGRldGVybWluZU1heENvbWJvKGhpdE9iamVjdHMpIHtcclxuICAgIGxldCBtYXhDb21ibyA9IDA7XHJcbiAgICBsZXQgaGl0Q2lyY2xlQ291bnQgPSAwLCBzbGlkZXJDb3VudCA9IDAsIHNwaW5uZXJDb3VudCA9IDA7XHJcbiAgICBmb3IgKGNvbnN0IG8gb2YgaGl0T2JqZWN0cykge1xyXG4gICAgICAgIG1heENvbWJvKys7XHJcbiAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzSGl0Q2lyY2xlKShvKSlcclxuICAgICAgICAgICAgaGl0Q2lyY2xlQ291bnQrKztcclxuICAgICAgICBpZiAoKDAsIGluZGV4XzEuaXNTcGlubmVyKShvKSlcclxuICAgICAgICAgICAgc3Bpbm5lckNvdW50Kys7XHJcbiAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzU2xpZGVyKShvKSkge1xyXG4gICAgICAgICAgICBzbGlkZXJDb3VudCsrO1xyXG4gICAgICAgICAgICBtYXhDb21ibyArPSBvLmNoZWNrUG9pbnRzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4geyBtYXhDb21ibywgaGl0Q2lyY2xlQ291bnQsIHNsaWRlckNvdW50LCBzcGlubmVyQ291bnQgfTtcclxufVxyXG5jb25zdCBESUZGSUNVTFRZX01VTFRJUExJRVIgPSAwLjA2NzU7XHJcbmNvbnN0IHNwZWVkQWRqdXN0ZWRBUiA9IChBUiwgY2xvY2tSYXRlKSA9PiAoMCwgaW5kZXhfMi5hcHByb2FjaER1cmF0aW9uVG9BcHByb2FjaFJhdGUpKCgwLCBpbmRleF8yLmFwcHJvYWNoUmF0ZVRvQXBwcm9hY2hEdXJhdGlvbikoQVIpIC8gY2xvY2tSYXRlKTtcclxuY29uc3Qgc3BlZWRBZGp1c3RlZE9EID0gKE9ELCBjbG9ja1JhdGUpID0+ICgwLCBpbmRleF8yLmhpdFdpbmRvd0dyZWF0VG9PRCkoKDAsIGluZGV4XzIub3ZlcmFsbERpZmZpY3VsdHlUb0hpdFdpbmRvd0dyZWF0KShPRCkgLyBjbG9ja1JhdGUpO1xyXG4vLyBDYWxjdWxhdGVzIHRoZSBkaWZmZXJlbnQgc3RhciByYXRpbmdzIGFmdGVyIGV2ZXJ5IGhpdCBvYmplY3QgaVxyXG5mdW5jdGlvbiBjYWxjdWxhdGVEaWZmaWN1bHR5QXR0cmlidXRlcyh7IGFwcGxpZWRNb2RzOiBtb2RzLCBkaWZmaWN1bHR5LCBoaXRPYmplY3RzLCBjb250cm9sUG9pbnRJbmZvIH0sIG9ubHlGaW5hbFZhbHVlKSB7XHJcbiAgICBjb25zdCBjbG9ja1JhdGUgPSAoMCwgaW5kZXhfMS5kZXRlcm1pbmVEZWZhdWx0UGxheWJhY2tTcGVlZCkobW9kcyk7XHJcbiAgICBjb25zdCBkaWZmcyA9IHByZXByb2Nlc3NEaWZmaWN1bHR5SGl0T2JqZWN0KGhpdE9iamVjdHMsIGNsb2NrUmF0ZSk7XHJcbiAgICBjb25zdCBoaXRXaW5kb3dHcmVhdCA9ICgwLCBpbmRleF8yLmhpdFdpbmRvd3NGb3JPRCkoZGlmZmljdWx0eS5vdmVyYWxsRGlmZmljdWx0eSwgdHJ1ZSlbMF0gLyBjbG9ja1JhdGU7XHJcbiAgICBjb25zdCBhaW1WYWx1ZXMgPSAoMCwgYWltXzEuY2FsY3VsYXRlQWltKShoaXRPYmplY3RzLCBkaWZmcywgdHJ1ZSwgb25seUZpbmFsVmFsdWUpO1xyXG4gICAgY29uc3QgYWltVmFsdWVzTm9TbGlkZXJzID0gKDAsIGFpbV8xLmNhbGN1bGF0ZUFpbSkoaGl0T2JqZWN0cywgZGlmZnMsIGZhbHNlLCBvbmx5RmluYWxWYWx1ZSk7XHJcbiAgICBjb25zdCBzcGVlZFZhbHVlcyA9ICgwLCBzcGVlZF8xLmNhbGN1bGF0ZVNwZWVkKShoaXRPYmplY3RzLCBkaWZmcywgaGl0V2luZG93R3JlYXQsIG9ubHlGaW5hbFZhbHVlKTtcclxuICAgIGNvbnN0IGZsYXNobGlnaHRWYWx1ZXMgPSAoMCwgZmxhc2hsaWdodF8xLmNhbGN1bGF0ZUZsYXNobGlnaHQpKGhpdE9iamVjdHMsIGRpZmZzLCBvbmx5RmluYWxWYWx1ZSwgbW9kcy5pbmNsdWRlcyhcIkhJRERFTlwiKSk7XHJcbiAgICBjb25zdCBzcGVlZE5vdGVzID0gKDAsIHNwZWVkXzEuY2FsY3VsYXRlUmVsZXZhbnROb3RlcykoaGl0T2JqZWN0cywgZGlmZnMsIGhpdFdpbmRvd0dyZWF0LCBvbmx5RmluYWxWYWx1ZSk7XHJcbiAgICAvLyBTdGF0aWMgdmFsdWVzXHJcbiAgICBjb25zdCB7IGhpdENpcmNsZUNvdW50LCBzbGlkZXJDb3VudCwgc3Bpbm5lckNvdW50LCBtYXhDb21ibyB9ID0gZGV0ZXJtaW5lTWF4Q29tYm8oaGl0T2JqZWN0cyk7XHJcbiAgICBjb25zdCBvdmVyYWxsRGlmZmljdWx0eSA9IHNwZWVkQWRqdXN0ZWRPRChkaWZmaWN1bHR5Lm92ZXJhbGxEaWZmaWN1bHR5LCBjbG9ja1JhdGUpO1xyXG4gICAgY29uc3QgYXBwcm9hY2hSYXRlID0gc3BlZWRBZGp1c3RlZEFSKGRpZmZpY3VsdHkuYXBwcm9hY2hSYXRlLCBjbG9ja1JhdGUpO1xyXG4gICAgY29uc3QgYmVhdExlbmd0aCA9ICgwLCBpbmRleF8xLm1vc3RDb21tb25CZWF0TGVuZ3RoKSh7XHJcbiAgICAgICAgaGl0T2JqZWN0cyxcclxuICAgICAgICB0aW1pbmdQb2ludHM6IGNvbnRyb2xQb2ludEluZm8udGltaW5nUG9pbnRzLmxpc3QsXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IG1vc3RDb21tb25CUE0gPSAoYmVhdExlbmd0aCA9PT0gdW5kZWZpbmVkID8gMCA6ICgwLCBpbmRleF8yLmJlYXRMZW5ndGhUb0JQTSkoYmVhdExlbmd0aCkpICogY2xvY2tSYXRlO1xyXG4gICAgY29uc3QgYXR0cmlidXRlcyA9IFtdO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhaW1WYWx1ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYWltUmF0aW5nID0gTWF0aC5zcXJ0KGFpbVZhbHVlc1tpXSkgKiBESUZGSUNVTFRZX01VTFRJUExJRVI7XHJcbiAgICAgICAgY29uc3QgYWltUmF0aW5nTm9TbGlkZXJzID0gTWF0aC5zcXJ0KGFpbVZhbHVlc05vU2xpZGVyc1tpXSkgKiBESUZGSUNVTFRZX01VTFRJUExJRVI7XHJcbiAgICAgICAgbGV0IHNwZWVkUmF0aW5nID0gTWF0aC5zcXJ0KHNwZWVkVmFsdWVzW2ldKSAqIERJRkZJQ1VMVFlfTVVMVElQTElFUjtcclxuICAgICAgICBsZXQgZmxhc2hsaWdodFJhdGluZyA9IE1hdGguc3FydChmbGFzaGxpZ2h0VmFsdWVzW2ldKSAqIERJRkZJQ1VMVFlfTVVMVElQTElFUjtcclxuICAgICAgICBjb25zdCBzbGlkZXJGYWN0b3IgPSBhaW1SYXRpbmcgPiAwID8gYWltUmF0aW5nTm9TbGlkZXJzIC8gYWltUmF0aW5nIDogMTtcclxuICAgICAgICBpZiAobW9kcy5pbmNsdWRlcyhcIlJFTEFYXCIpKSB7XHJcbiAgICAgICAgICAgIGFpbVJhdGluZyAqPSAwLjk7XHJcbiAgICAgICAgICAgIHNwZWVkUmF0aW5nID0gMDtcclxuICAgICAgICAgICAgZmxhc2hsaWdodFJhdGluZyAqPSAwLjc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJhc2VBaW1QZXJmb3JtYW5jZSA9IE1hdGgucG93KDUgKiBNYXRoLm1heCgxLCBhaW1SYXRpbmcgLyAwLjA2NzUpIC0gNCwgMykgLyAxMDAwMDA7XHJcbiAgICAgICAgY29uc3QgYmFzZVNwZWVkUGVyZm9ybWFuY2UgPSBNYXRoLnBvdyg1ICogTWF0aC5tYXgoMSwgc3BlZWRSYXRpbmcgLyAwLjA2NzUpIC0gNCwgMykgLyAxMDAwMDA7XHJcbiAgICAgICAgbGV0IGJhc2VGbGFzaGxpZ2h0UGVyZm9ybWFuY2UgPSAwLjA7XHJcbiAgICAgICAgaWYgKG1vZHMuaW5jbHVkZXMoXCJGTEFTSF9MSUdIVFwiKSlcclxuICAgICAgICAgICAgYmFzZUZsYXNobGlnaHRQZXJmb3JtYW5jZSA9IE1hdGgucG93KGZsYXNobGlnaHRSYXRpbmcsIDIuMCkgKiAyNS4wO1xyXG4gICAgICAgIGNvbnN0IGJhc2VQZXJmb3JtYW5jZSA9IE1hdGgucG93KE1hdGgucG93KGJhc2VBaW1QZXJmb3JtYW5jZSwgMS4xKSArXHJcbiAgICAgICAgICAgIE1hdGgucG93KGJhc2VTcGVlZFBlcmZvcm1hbmNlLCAxLjEpICtcclxuICAgICAgICAgICAgTWF0aC5wb3coYmFzZUZsYXNobGlnaHRQZXJmb3JtYW5jZSwgMS4xKSwgMS4wIC8gMS4xKTtcclxuICAgICAgICBjb25zdCBzdGFyUmF0aW5nID0gYmFzZVBlcmZvcm1hbmNlID4gMC4wMDAwMVxyXG4gICAgICAgICAgICA/IE1hdGguY2JydCgxLjE0KSAqIDAuMDI3ICogKE1hdGguY2JydCgoMTAwMDAwIC8gTWF0aC5wb3coMiwgMSAvIDEuMSkpICogYmFzZVBlcmZvcm1hbmNlKSArIDQpXHJcbiAgICAgICAgICAgIDogMDtcclxuICAgICAgICBhdHRyaWJ1dGVzLnB1c2goe1xyXG4gICAgICAgICAgICBhaW1EaWZmaWN1bHR5OiBhaW1SYXRpbmcsXHJcbiAgICAgICAgICAgIHNwZWVkRGlmZmljdWx0eTogc3BlZWRSYXRpbmcsXHJcbiAgICAgICAgICAgIGZsYXNobGlnaHREaWZmaWN1bHR5OiBmbGFzaGxpZ2h0UmF0aW5nLFxyXG4gICAgICAgICAgICBzbGlkZXJGYWN0b3IsXHJcbiAgICAgICAgICAgIHNwZWVkTm90ZXMsXHJcbiAgICAgICAgICAgIHN0YXJSYXRpbmcsXHJcbiAgICAgICAgICAgIC8vIFRoZXNlIGFyZSBhY3R1YWxseSByZWR1bmRhbnQgYnV0IGlkY1xyXG4gICAgICAgICAgICBoaXRDaXJjbGVDb3VudCxcclxuICAgICAgICAgICAgc2xpZGVyQ291bnQsXHJcbiAgICAgICAgICAgIHNwaW5uZXJDb3VudCxcclxuICAgICAgICAgICAgbWF4Q29tYm8sXHJcbiAgICAgICAgICAgIG92ZXJhbGxEaWZmaWN1bHR5LFxyXG4gICAgICAgICAgICBhcHByb2FjaFJhdGUsXHJcbiAgICAgICAgICAgIG1vc3RDb21tb25CUE0sXHJcbiAgICAgICAgICAgIGRyYWluUmF0ZTogZGlmZmljdWx0eS5kcmFpblJhdGUsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXR0cmlidXRlcztcclxufVxyXG5leHBvcnRzLmNhbGN1bGF0ZURpZmZpY3VsdHlBdHRyaWJ1dGVzID0gY2FsY3VsYXRlRGlmZmljdWx0eUF0dHJpYnV0ZXM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuY2FsY3VsYXRlUGVyZm9ybWFuY2VBdHRyaWJ1dGVzID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uL2NvcmUvaW5kZXhcIik7XHJcbmNvbnN0IGluZGV4XzIgPSByZXF1aXJlKFwiLi4vbWF0aC9pbmRleFwiKTtcclxuZnVuY3Rpb24gY2FsY3VsYXRlUGVyZm9ybWFuY2VBdHRyaWJ1dGVzKGJlYXRtYXBQYXJhbXMsIHNjb3JlUGFyYW1zKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCB7IGhpdENpcmNsZUNvdW50LCBzbGlkZXJDb3VudCwgc3Bpbm5lckNvdW50LCBhaW1EaWZmaWN1bHR5LCBzcGVlZERpZmZpY3VsdHksIGZsYXNobGlnaHREaWZmaWN1bHR5LCBhcHByb2FjaFJhdGUsIGRyYWluUmF0ZSwgb3ZlcmFsbERpZmZpY3VsdHksIHNsaWRlckZhY3RvciwgbWF4Q29tYm86IGJlYXRtYXBNYXhDb21ibywgc3BlZWROb3RlcyB9ID0gYmVhdG1hcFBhcmFtcztcclxuICAgIGNvbnN0IHsgbW9kcywgY291bnRNZWgsIGNvdW50R3JlYXQsIGNvdW50TWlzcywgY291bnRPaywgbWF4Q29tYm86IHNjb3JlTWF4Q29tYm8gfSA9IHNjb3JlUGFyYW1zO1xyXG4gICAgY29uc3QgYWNjdXJhY3kgPSAoX2EgPSAoMCwgaW5kZXhfMS5vc3VTdGFibGVBY2N1cmFjeSkoW2NvdW50R3JlYXQsIGNvdW50T2ssIGNvdW50TWVoLCBjb3VudE1pc3NdKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcclxuICAgIGNvbnN0IHRvdGFsSGl0cyA9IGNvdW50R3JlYXQgKyBjb3VudE9rICsgY291bnRNZWggKyBjb3VudE1pc3M7XHJcbiAgICBsZXQgZWZmZWN0aXZlTWlzc0NvdW50ID0gKGZ1bmN0aW9uIGNhbGN1bGF0ZUVmZmVjdGl2ZU1pc3NDb3VudCgpIHtcclxuICAgICAgICAvLyBHdWVzcyB0aGUgbnVtYmVyIG9mIG1pc3NlcyArIHNsaWRlciBicmVha3MgZnJvbSBjb21ib1xyXG4gICAgICAgIGxldCBjb21ib0Jhc2VkTWlzc0NvdW50ID0gMC4wO1xyXG4gICAgICAgIGlmIChzbGlkZXJDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZnVsbENvbWJvVGhyZXNob2xkID0gYmVhdG1hcE1heENvbWJvIC0gMC4xICogc2xpZGVyQ291bnQ7XHJcbiAgICAgICAgICAgIGlmIChzY29yZU1heENvbWJvIDwgZnVsbENvbWJvVGhyZXNob2xkKVxyXG4gICAgICAgICAgICAgICAgY29tYm9CYXNlZE1pc3NDb3VudCA9IGZ1bGxDb21ib1RocmVzaG9sZCAvIE1hdGgubWF4KDEuMCwgc2NvcmVNYXhDb21ibyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENsYW1wIG1pc3Njb3VudCBzaW5jZSBpdCdzIGRlcml2ZWQgZnJvbSBjb21ibyBhbmQgY2FuIGJlIGhpZ2hlciB0aGFuIHRvdGFsIGhpdHMgYW5kIHRoYXQgYnJlYWtzIHNvbWUgY2FsY3VsYXRpb25zXHJcbiAgICAgICAgY29tYm9CYXNlZE1pc3NDb3VudCA9IE1hdGgubWluKGNvbWJvQmFzZWRNaXNzQ291bnQsIHRvdGFsSGl0cyk7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KGNvdW50TWlzcywgY29tYm9CYXNlZE1pc3NDb3VudCk7XHJcbiAgICB9KSgpO1xyXG4gICAgbGV0IG11bHRpcGxpZXIgPSAxLjE0O1xyXG4gICAgaWYgKG1vZHMuaW5jbHVkZXMoXCJOT19GQUlMXCIpKVxyXG4gICAgICAgIG11bHRpcGxpZXIgKj0gTWF0aC5tYXgoMC45LCAxIC0gMC4wMiAqIGVmZmVjdGl2ZU1pc3NDb3VudCk7XHJcbiAgICBpZiAobW9kcy5pbmNsdWRlcyhcIlNQVU5fT1VUXCIpKVxyXG4gICAgICAgIG11bHRpcGxpZXIgKj0gMS4wIC0gTWF0aC5wb3coc3Bpbm5lckNvdW50IC8gdG90YWxIaXRzLCAwLjg1KTtcclxuICAgIGlmIChtb2RzLmluY2x1ZGVzKFwiUkVMQVhcIikpIHtcclxuICAgICAgICBjb25zdCBva011bHRpcGxpZXIgPSBNYXRoLm1heCgwLjAsIG92ZXJhbGxEaWZmaWN1bHR5ID4gMC4wID8gMSAtIE1hdGgucG93KG92ZXJhbGxEaWZmaWN1bHR5IC8gMTMuMzMsIDEuOCkgOiAxLjApO1xyXG4gICAgICAgIGNvbnN0IG1laE11bHRpcGxpZXIgPSBNYXRoLm1heCgwLjAsIG92ZXJhbGxEaWZmaWN1bHR5ID4gMC4wID8gMSAtIE1hdGgucG93KG92ZXJhbGxEaWZmaWN1bHR5IC8gMTMuMzMsIDUpIDogMS4wKTtcclxuICAgICAgICBlZmZlY3RpdmVNaXNzQ291bnQgPSBNYXRoLm1pbihlZmZlY3RpdmVNaXNzQ291bnQgKyBjb3VudE9rICogb2tNdWx0aXBsaWVyICsgY291bnRNZWggKiBtZWhNdWx0aXBsaWVyLCB0b3RhbEhpdHMpO1xyXG4gICAgICAgIG11bHRpcGxpZXIgKj0gMC42O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29tYm9TY2FsaW5nRmFjdG9yID0gYmVhdG1hcE1heENvbWJvIDw9IDAgPyAxLjAgOiBNYXRoLm1pbihNYXRoLnBvdyhzY29yZU1heENvbWJvLCAwLjgpIC8gTWF0aC5wb3coYmVhdG1hcE1heENvbWJvLCAwLjgpLCAxLjApO1xyXG4gICAgY29uc3QgYWltVmFsdWUgPSAoZnVuY3Rpb24gY29tcHV0ZUFpbVZhbHVlKCkge1xyXG4gICAgICAgIGxldCByYXdBaW0gPSBhaW1EaWZmaWN1bHR5O1xyXG4gICAgICAgIGlmIChtb2RzLmluY2x1ZGVzKFwiVE9VQ0hfREVWSUNFXCIpKVxyXG4gICAgICAgICAgICByYXdBaW0gPSBNYXRoLnBvdyhyYXdBaW0sIDAuOCk7XHJcbiAgICAgICAgbGV0IGFpbVZhbHVlID0gTWF0aC5wb3coNS4wICogTWF0aC5tYXgoMS4wLCByYXdBaW0gLyAwLjA2NzUpIC0gNC4wLCAzLjApIC8gMTAwMDAwLjA7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoQm9udXMgPSAwLjk1ICsgMC40ICogTWF0aC5taW4oMS4wLCB0b3RhbEhpdHMgLyAyMDAwLjApICsgKHRvdGFsSGl0cyA+IDIwMDAgPyBNYXRoLmxvZzEwKHRvdGFsSGl0cyAvIDIwMDAuMCkgKiAwLjUgOiAwLjApO1xyXG4gICAgICAgIGFpbVZhbHVlICo9IGxlbmd0aEJvbnVzO1xyXG4gICAgICAgIGlmIChlZmZlY3RpdmVNaXNzQ291bnQgPiAwKVxyXG4gICAgICAgICAgICBhaW1WYWx1ZSAqPSAwLjk3ICogTWF0aC5wb3coMSAtIE1hdGgucG93KGVmZmVjdGl2ZU1pc3NDb3VudCAvIHRvdGFsSGl0cywgMC43NzUpLCBlZmZlY3RpdmVNaXNzQ291bnQpO1xyXG4gICAgICAgIGFpbVZhbHVlICo9IGNvbWJvU2NhbGluZ0ZhY3RvcjtcclxuICAgICAgICBsZXQgYXBwcm9hY2hSYXRlRmFjdG9yID0gMC4wO1xyXG4gICAgICAgIGlmIChhcHByb2FjaFJhdGUgPiAxMC4zMylcclxuICAgICAgICAgICAgYXBwcm9hY2hSYXRlRmFjdG9yID0gMC4zICogKGFwcHJvYWNoUmF0ZSAtIDEwLjMzKTtcclxuICAgICAgICBlbHNlIGlmIChhcHByb2FjaFJhdGUgPCA4KVxyXG4gICAgICAgICAgICBhcHByb2FjaFJhdGVGYWN0b3IgPSAwLjA1ICogKDguMCAtIGFwcHJvYWNoUmF0ZSk7XHJcbiAgICAgICAgaWYgKG1vZHMuaW5jbHVkZXMoXCJSRUxBWFwiKSlcclxuICAgICAgICAgICAgYXBwcm9hY2hSYXRlRmFjdG9yID0gMC4wO1xyXG4gICAgICAgIGFpbVZhbHVlICo9IDEuMCArIGFwcHJvYWNoUmF0ZUZhY3RvciAqIGxlbmd0aEJvbnVzOyAvLyBCdWZmIGZvciBsb25nIG1hcHMgd2l0aCBoaWdoIEFSXHJcbiAgICAgICAgaWYgKG1vZHMuaW5jbHVkZXMoXCJCTElORFNcIikpIHtcclxuICAgICAgICAgICAgYWltVmFsdWUgKj1cclxuICAgICAgICAgICAgICAgIDEuMyArXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxIaXRzICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgKDAuMDAxNiAvICgxICsgMiAqIGVmZmVjdGl2ZU1pc3NDb3VudCkpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coYWNjdXJhY3ksIDE2KSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICgxIC0gMC4wMDMgKiBkcmFpblJhdGUgKiBkcmFpblJhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtb2RzLmluY2x1ZGVzKFwiSElEREVOXCIpKSB7XHJcbiAgICAgICAgICAgIC8vIFJld2FyZGluZyBsb3cgQVIgd2hlbiB0aGVyZSBpcyBIRCAtPiB0aGlzIG5lcmZzIGhpZ2ggQVIgYW5kIGJ1ZmZzIGxvdyBBUlxyXG4gICAgICAgICAgICBhaW1WYWx1ZSAqPSAxLjAgKyAwLjA0ICogKDEyLjAgLSBhcHByb2FjaFJhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBhc3N1bWUgMTUlIG9mIHNsaWRlcnMgaW4gYSBtYXAgYXJlIGRpZmZpY3VsdCBzaW5jZSB0aGVyZSdzIG5vIHdheSB0byB0ZWxsIGZyb20gdGhlIHBlcmZvcm1hbmNlIGNhbGN1bGF0b3IuXHJcbiAgICAgICAgY29uc3QgZXN0aW1hdGVEaWZmaWN1bHRTbGlkZXJzID0gc2xpZGVyQ291bnQgKiAwLjE1O1xyXG4gICAgICAgIGlmIChzbGlkZXJDb3VudCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgZXN0aW1hdGVTbGlkZXJFbmRzRHJvcHBlZCA9ICgwLCBpbmRleF8yLmNsYW1wKShNYXRoLm1pbihjb3VudE9rICsgY291bnRNZWggKyBjb3VudE1pc3MsIGJlYXRtYXBNYXhDb21ibyAtIHNjb3JlTWF4Q29tYm8pLCAwLCBlc3RpbWF0ZURpZmZpY3VsdFNsaWRlcnMpO1xyXG4gICAgICAgICAgICBjb25zdCBzbGlkZXJOZXJmRmFjdG9yID0gKDEgLSBzbGlkZXJGYWN0b3IpICogTWF0aC5wb3coMSAtIGVzdGltYXRlU2xpZGVyRW5kc0Ryb3BwZWQgLyBlc3RpbWF0ZURpZmZpY3VsdFNsaWRlcnMsIDMpICsgc2xpZGVyRmFjdG9yO1xyXG4gICAgICAgICAgICBhaW1WYWx1ZSAqPSBzbGlkZXJOZXJmRmFjdG9yO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhaW1WYWx1ZSAqPSBhY2N1cmFjeTtcclxuICAgICAgICBhaW1WYWx1ZSAqPSAwLjk4ICsgTWF0aC5wb3cob3ZlcmFsbERpZmZpY3VsdHksIDIpIC8gMjUwMDtcclxuICAgICAgICByZXR1cm4gYWltVmFsdWU7XHJcbiAgICB9KSgpO1xyXG4gICAgY29uc3Qgc3BlZWRWYWx1ZSA9IChmdW5jdGlvbiBjb21wdXRlU3BlZWRWYWx1ZSgpIHtcclxuICAgICAgICBjb25zdCByZWxldmFudFRvdGFsRGlmZiA9IHRvdGFsSGl0cyAtIHNwZWVkTm90ZXM7XHJcbiAgICAgICAgY29uc3QgcmVsZXZhbnRDb3VudEdyZWF0ID0gTWF0aC5tYXgoMCwgY291bnRHcmVhdCAtIHJlbGV2YW50VG90YWxEaWZmKTtcclxuICAgICAgICBjb25zdCByZWxldmFudENvdW50T2sgPSBNYXRoLm1heCgwLCBjb3VudE9rIC0gTWF0aC5tYXgoMCwgcmVsZXZhbnRUb3RhbERpZmYgLSBjb3VudEdyZWF0KSk7XHJcbiAgICAgICAgY29uc3QgcmVsZXZhbnRDb3VudE1laCA9IE1hdGgubWF4KDAsIGNvdW50TWVoIC0gTWF0aC5tYXgoMCwgcmVsZXZhbnRUb3RhbERpZmYgLSBjb3VudEdyZWF0IC0gY291bnRPaykpO1xyXG4gICAgICAgIGNvbnN0IHJlbGV2YW50QWNjdXJhY3kgPSBzcGVlZE5vdGVzID09IDAgPyAwIDogKHJlbGV2YW50Q291bnRHcmVhdCAqIDYuMCArIHJlbGV2YW50Q291bnRPayAqIDIuMCArIHJlbGV2YW50Q291bnRNZWgpIC8gKHNwZWVkTm90ZXMgKiA2LjApO1xyXG4gICAgICAgIGxldCBzcGVlZFZhbHVlID0gTWF0aC5wb3coNS4wICogTWF0aC5tYXgoMS4wLCBzcGVlZERpZmZpY3VsdHkgLyAwLjA2NzUpIC0gNC4wLCAzLjApIC8gMTAwMDAwLjA7XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoQm9udXMgPSAwLjk1ICsgMC40ICogTWF0aC5taW4oMS4wLCB0b3RhbEhpdHMgLyAyMDAwLjApICsgKHRvdGFsSGl0cyA+IDIwMDAgPyBNYXRoLmxvZzEwKHRvdGFsSGl0cyAvIDIwMDAuMCkgKiAwLjUgOiAwLjApO1xyXG4gICAgICAgIHNwZWVkVmFsdWUgKj0gbGVuZ3RoQm9udXM7XHJcbiAgICAgICAgLy8gUGVuYWxpemUgbWlzc2VzIGJ5IGFzc2Vzc2luZyAjIG9mIG1pc3NlcyByZWxhdGl2ZSB0byB0aGUgdG90YWwgIyBvZiBvYmplY3RzLiBEZWZhdWx0IGEgMyUgcmVkdWN0aW9uIGZvciBhbnkgIyBvZlxyXG4gICAgICAgIC8vIG1pc3Nlcy5cclxuICAgICAgICBpZiAoZWZmZWN0aXZlTWlzc0NvdW50ID4gMClcclxuICAgICAgICAgICAgc3BlZWRWYWx1ZSAqPVxyXG4gICAgICAgICAgICAgICAgMC45NyAqIE1hdGgucG93KDEgLSBNYXRoLnBvdyhlZmZlY3RpdmVNaXNzQ291bnQgLyB0b3RhbEhpdHMsIDAuNzc1KSwgTWF0aC5wb3coZWZmZWN0aXZlTWlzc0NvdW50LCAwLjg3NSkpO1xyXG4gICAgICAgIHNwZWVkVmFsdWUgKj0gY29tYm9TY2FsaW5nRmFjdG9yO1xyXG4gICAgICAgIGxldCBhcHByb2FjaFJhdGVGYWN0b3IgPSAwLjA7XHJcbiAgICAgICAgaWYgKGFwcHJvYWNoUmF0ZSA+IDEwLjMzKVxyXG4gICAgICAgICAgICBhcHByb2FjaFJhdGVGYWN0b3IgPSAwLjMgKiAoYXBwcm9hY2hSYXRlIC0gMTAuMzMpO1xyXG4gICAgICAgIHNwZWVkVmFsdWUgKj0gMS4wICsgYXBwcm9hY2hSYXRlRmFjdG9yICogbGVuZ3RoQm9udXM7IC8vIEJ1ZmYgZm9yIGxvbmdlciBtYXBzIHdpdGggaGlnaCBBUi5cclxuICAgICAgICBpZiAobW9kcy5pbmNsdWRlcyhcIkJMSU5EU1wiKSkge1xyXG4gICAgICAgICAgICAvLyBJbmNyZWFzaW5nIHRoZSBzcGVlZCB2YWx1ZSBieSBvYmplY3QgY291bnQgZm9yIEJsaW5kcyBpc24ndCBpZGVhbCwgc28gdGhlIG1pbmltdW0gYnVmZiBpcyBnaXZlbi5cclxuICAgICAgICAgICAgc3BlZWRWYWx1ZSAqPSAxLjEyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChtb2RzLmluY2x1ZGVzKFwiSElEREVOXCIpKSB7XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gZ2l2ZSBtb3JlIHJld2FyZCBmb3IgbG93ZXIgQVIgd2hlbiBpdCBjb21lcyB0byBhaW0gYW5kIEhELiBUaGlzIG5lcmZzIGhpZ2ggQVIgYW5kIGJ1ZmZzIGxvd2VyIEFSLlxyXG4gICAgICAgICAgICBzcGVlZFZhbHVlICo9IDEuMCArIDAuMDQgKiAoMTIuMCAtIGFwcHJvYWNoUmF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNjYWxlIHRoZSBzcGVlZCB2YWx1ZSB3aXRoIGFjY3VyYWN5IGFuZCBPRC5cclxuICAgICAgICBzcGVlZFZhbHVlICo9XHJcbiAgICAgICAgICAgICgwLjk1ICsgTWF0aC5wb3cob3ZlcmFsbERpZmZpY3VsdHksIDIpIC8gNzUwKSAqIE1hdGgucG93KChhY2N1cmFjeSArIHJlbGV2YW50QWNjdXJhY3kpIC8gMi4wLCAoMTQuNSAtIE1hdGgubWF4KG92ZXJhbGxEaWZmaWN1bHR5LCA4KSkgLyAyKTtcclxuICAgICAgICAvLyBTY2FsZSB0aGUgc3BlZWQgdmFsdWUgd2l0aCAjIG9mIDUwcyB0byBwdW5pc2ggZG91YmxlLXRhcHBpbmcuXHJcbiAgICAgICAgc3BlZWRWYWx1ZSAqPSBNYXRoLnBvdygwLjk5LCBjb3VudE1laCA8IHRvdGFsSGl0cyAvIDUwMC4wID8gMCA6IGNvdW50TWVoIC0gdG90YWxIaXRzIC8gNTAwLjApO1xyXG4gICAgICAgIHJldHVybiBzcGVlZFZhbHVlO1xyXG4gICAgfSkoKTtcclxuICAgIGNvbnN0IGFjY3VyYWN5VmFsdWUgPSAoZnVuY3Rpb24gY29tcHV0ZUFjY3VyYWN5VmFsdWUoKSB7XHJcbiAgICAgICAgaWYgKG1vZHMuaW5jbHVkZXMoXCJSRUxBWFwiKSlcclxuICAgICAgICAgICAgcmV0dXJuIDAuMDtcclxuICAgICAgICAvLyBUaGlzIHBlcmNlbnRhZ2Ugb25seSBjb25zaWRlcnMgSGl0Q2lyY2xlcyBvZiBhbnkgdmFsdWUgLSBpbiB0aGlzIHBhcnQgb2YgdGhlIGNhbGN1bGF0aW9uIHdlIGZvY3VzIG9uIGhpdHRpbmcgdGhlXHJcbiAgICAgICAgLy8gdGltaW5nIGhpdCB3aW5kb3cuXHJcbiAgICAgICAgbGV0IGJldHRlckFjY3VyYWN5UGVyY2VudGFnZTtcclxuICAgICAgICBjb25zdCBhbW91bnRIaXRPYmplY3RzV2l0aEFjY3VyYWN5ID0gaGl0Q2lyY2xlQ291bnQ7XHJcbiAgICAgICAgaWYgKGFtb3VudEhpdE9iamVjdHNXaXRoQWNjdXJhY3kgPiAwKVxyXG4gICAgICAgICAgICBiZXR0ZXJBY2N1cmFjeVBlcmNlbnRhZ2UgPVxyXG4gICAgICAgICAgICAgICAgKChjb3VudEdyZWF0IC0gKHRvdGFsSGl0cyAtIGFtb3VudEhpdE9iamVjdHNXaXRoQWNjdXJhY3kpKSAqIDYgKyBjb3VudE9rICogMiArIGNvdW50TWVoKSAvXHJcbiAgICAgICAgICAgICAgICAgICAgKGFtb3VudEhpdE9iamVjdHNXaXRoQWNjdXJhY3kgKiA2LjApO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgYmV0dGVyQWNjdXJhY3lQZXJjZW50YWdlID0gMDtcclxuICAgICAgICAvLyBJdCBpcyBwb3NzaWJsZSB0byByZWFjaCBhIG5lZ2F0aXZlIGFjY3VyYWN5IHdpdGggdGhpcyBmb3JtdWxhLiBDYXAgaXQgYXQgemVybyAtIHplcm8gcG9pbnRzLlxyXG4gICAgICAgIGlmIChiZXR0ZXJBY2N1cmFjeVBlcmNlbnRhZ2UgPCAwKVxyXG4gICAgICAgICAgICBiZXR0ZXJBY2N1cmFjeVBlcmNlbnRhZ2UgPSAwO1xyXG4gICAgICAgIC8vIExvdHMgb2YgYXJiaXRyYXJ5IHZhbHVlcyBmcm9tIHRlc3RpbmcuXHJcbiAgICAgICAgLy8gQ29uc2lkZXJpbmcgdG8gdXNlIGRlcml2YXRpb24gZnJvbSBwZXJmZWN0IGFjY3VyYWN5IGluIGEgcHJvYmFiaWxpc3RpYyBtYW5uZXIgLSBhc3N1bWUgbm9ybWFsIGRpc3RyaWJ1dGlvbi5cclxuICAgICAgICBsZXQgYWNjdXJhY3lWYWx1ZSA9IE1hdGgucG93KDEuNTIxNjMsIG92ZXJhbGxEaWZmaWN1bHR5KSAqIE1hdGgucG93KGJldHRlckFjY3VyYWN5UGVyY2VudGFnZSwgMjQpICogMi44MztcclxuICAgICAgICAvLyBCb251cyBmb3IgbWFueSBoaXRjaXJjbGVzIC0gaXQncyBoYXJkZXIgdG8ga2VlcCBnb29kIGFjY3VyYWN5IHVwIGZvciBsb25nZXIuXHJcbiAgICAgICAgYWNjdXJhY3lWYWx1ZSAqPSBNYXRoLm1pbigxLjE1LCBNYXRoLnBvdyhhbW91bnRIaXRPYmplY3RzV2l0aEFjY3VyYWN5IC8gMTAwMC4wLCAwLjMpKTtcclxuICAgICAgICAvLyBJbmNyZWFzaW5nIHRoZSBhY2N1cmFjeSB2YWx1ZSBieSBvYmplY3QgY291bnQgZm9yIEJsaW5kcyBpc24ndCBpZGVhbCwgc28gdGhlIG1pbmltdW0gYnVmZiBpcyBnaXZlbi5cclxuICAgICAgICBpZiAobW9kcy5pbmNsdWRlcyhcIkJMSU5EU1wiKSlcclxuICAgICAgICAgICAgYWNjdXJhY3lWYWx1ZSAqPSAxLjE0O1xyXG4gICAgICAgIGVsc2UgaWYgKG1vZHMuaW5jbHVkZXMoXCJISURERU5cIikpXHJcbiAgICAgICAgICAgIGFjY3VyYWN5VmFsdWUgKj0gMS4wODtcclxuICAgICAgICBpZiAobW9kcy5pbmNsdWRlcyhcIkZMQVNIX0xJR0hUXCIpKVxyXG4gICAgICAgICAgICBhY2N1cmFjeVZhbHVlICo9IDEuMDI7XHJcbiAgICAgICAgcmV0dXJuIGFjY3VyYWN5VmFsdWU7XHJcbiAgICB9KSgpO1xyXG4gICAgY29uc3QgZmxhc2hsaWdodFZhbHVlID0gKGZ1bmN0aW9uIGNvbXB1dGVGbGFzaExpZ2h0VmFsdWUoKSB7XHJcbiAgICAgICAgaWYgKCFtb2RzLmluY2x1ZGVzKFwiRkxBU0hfTElHSFRcIikpXHJcbiAgICAgICAgICAgIHJldHVybiAwLjA7XHJcbiAgICAgICAgbGV0IHJhd0ZsYXNobGlnaHQgPSBmbGFzaGxpZ2h0RGlmZmljdWx0eTtcclxuICAgICAgICBpZiAobW9kcy5pbmNsdWRlcyhcIlRPVUNIX0RFVklDRVwiKSlcclxuICAgICAgICAgICAgcmF3Rmxhc2hsaWdodCA9IE1hdGgucG93KHJhd0ZsYXNobGlnaHQsIDAuOCk7XHJcbiAgICAgICAgbGV0IGZsYXNobGlnaHRWYWx1ZSA9IE1hdGgucG93KHJhd0ZsYXNobGlnaHQsIDIuMCkgKiAyNS4wO1xyXG4gICAgICAgIC8vIGlmIChtb2RzLmluY2x1ZGVzKFwiSElEREVOXCIpKSBmbGFzaGxpZ2h0VmFsdWUgKj0gMS4zO1xyXG4gICAgICAgIC8vIFBlbmFsaXplIG1pc3NlcyBieSBhc3Nlc3NpbmcgIyBvZiBtaXNzZXMgcmVsYXRpdmUgdG8gdGhlIHRvdGFsICMgb2Ygb2JqZWN0cy4gRGVmYXVsdCBhIDMlIHJlZHVjdGlvbiBmb3IgYW55ICMgb2ZcclxuICAgICAgICAvLyBtaXNzZXMuXHJcbiAgICAgICAgaWYgKGVmZmVjdGl2ZU1pc3NDb3VudCA+IDApXHJcbiAgICAgICAgICAgIGZsYXNobGlnaHRWYWx1ZSAqPVxyXG4gICAgICAgICAgICAgICAgMC45NyAqIE1hdGgucG93KDEgLSBNYXRoLnBvdyhlZmZlY3RpdmVNaXNzQ291bnQgLyB0b3RhbEhpdHMsIDAuNzc1KSwgTWF0aC5wb3coZWZmZWN0aXZlTWlzc0NvdW50LCAwLjg3NSkpO1xyXG4gICAgICAgIGZsYXNobGlnaHRWYWx1ZSAqPSBjb21ib1NjYWxpbmdGYWN0b3I7XHJcbiAgICAgICAgLy8gQWNjb3VudCBmb3Igc2hvcnRlciBtYXBzIGhhdmluZyBhIGhpZ2hlciByYXRpbyBvZiAwIGNvbWJvLzEwMCBjb21ibyBmbGFzaGxpZ2h0IHJhZGl1cy5cclxuICAgICAgICBmbGFzaGxpZ2h0VmFsdWUgKj1cclxuICAgICAgICAgICAgMC43ICtcclxuICAgICAgICAgICAgICAgIDAuMSAqIE1hdGgubWluKDEuMCwgdG90YWxIaXRzIC8gMjAwLjApICtcclxuICAgICAgICAgICAgICAgICh0b3RhbEhpdHMgPiAyMDAgPyAwLjIgKiBNYXRoLm1pbigxLjAsICh0b3RhbEhpdHMgLSAyMDApIC8gMjAwLjApIDogMC4wKTtcclxuICAgICAgICAvLyBTY2FsZSB0aGUgZmxhc2hsaWdodCB2YWx1ZSB3aXRoIGFjY3VyYWN5IF9zbGlnaHRseV8uXHJcbiAgICAgICAgZmxhc2hsaWdodFZhbHVlICo9IDAuNSArIGFjY3VyYWN5IC8gMi4wO1xyXG4gICAgICAgIC8vIEl0IGlzIGltcG9ydGFudCB0byBhbHNvIGNvbnNpZGVyIGFjY3VyYWN5IGRpZmZpY3VsdHkgd2hlbiBkb2luZyB0aGF0LlxyXG4gICAgICAgIGZsYXNobGlnaHRWYWx1ZSAqPSAwLjk4ICsgTWF0aC5wb3cob3ZlcmFsbERpZmZpY3VsdHksIDIpIC8gMjUwMDtcclxuICAgICAgICByZXR1cm4gZmxhc2hsaWdodFZhbHVlO1xyXG4gICAgfSkoKTtcclxuICAgIGNvbnN0IHRvdGFsVmFsdWUgPSBNYXRoLnBvdyhNYXRoLnBvdyhhaW1WYWx1ZSwgMS4xKSArXHJcbiAgICAgICAgTWF0aC5wb3coc3BlZWRWYWx1ZSwgMS4xKSArXHJcbiAgICAgICAgTWF0aC5wb3coYWNjdXJhY3lWYWx1ZSwgMS4xKSArXHJcbiAgICAgICAgTWF0aC5wb3coZmxhc2hsaWdodFZhbHVlLCAxLjEpLCAxLjAgLyAxLjEpICogbXVsdGlwbGllcjtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWltOiBhaW1WYWx1ZSxcclxuICAgICAgICBzcGVlZDogc3BlZWRWYWx1ZSxcclxuICAgICAgICBhY2N1cmFjeTogYWNjdXJhY3lWYWx1ZSxcclxuICAgICAgICBmbGFzaGxpZ2h0OiBmbGFzaGxpZ2h0VmFsdWUsXHJcbiAgICAgICAgZWZmZWN0aXZlTWlzc0NvdW50LFxyXG4gICAgICAgIHRvdGFsOiB0b3RhbFZhbHVlLFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmNhbGN1bGF0ZVBlcmZvcm1hbmNlQXR0cmlidXRlcyA9IGNhbGN1bGF0ZVBlcmZvcm1hbmNlQXR0cmlidXRlcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jYWxjdWxhdGVBaW0gPSB2b2lkIDA7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vLi4vY29yZS9pbmRleFwiKTtcclxuY29uc3QgaW5kZXhfMiA9IHJlcXVpcmUoXCIuLi8uLi9tYXRoL2luZGV4XCIpO1xyXG5jb25zdCBzdHJhaW5fMSA9IHJlcXVpcmUoXCIuL3N0cmFpblwiKTtcclxuY29uc3Qgd2lkZV9hbmdsZV9tdWx0aXBsaWVyID0gMS41O1xyXG5jb25zdCBhY3V0ZV9hbmdsZV9tdWx0aXBsaWVyID0gMS45NTtcclxuY29uc3Qgc2xpZGVyX211bHRpcGxpZXIgPSAxLjM1O1xyXG5jb25zdCB2ZWxvY2l0eV9jaGFuZ2VfbXVsdGlwbGllciA9IDAuNzU7XHJcbmNvbnN0IHNraWxsTXVsdGlwbGllciA9IDIzLjU1O1xyXG5jb25zdCBzdHJhaW5EZWNheUJhc2UgPSAwLjE1O1xyXG5jb25zdCBzdHJhaW5EZWNheSA9IChtcykgPT4gTWF0aC5wb3coc3RyYWluRGVjYXlCYXNlLCBtcyAvIDEwMDApO1xyXG5jb25zdCBjYWxjV2lkZUFuZ2xlQm9udXMgPSAoYW5nbGUpID0+IE1hdGgucG93KE1hdGguc2luKCgzLjAgLyA0KSAqIChNYXRoLm1pbigoNS4wIC8gNikgKiBNYXRoLlBJLCBNYXRoLm1heChNYXRoLlBJIC8gNiwgYW5nbGUpKSAtIE1hdGguUEkgLyA2KSksIDIpO1xyXG5jb25zdCBjYWxjQWN1dGVBbmdsZUJvbnVzID0gKGFuZ2xlKSA9PiAxIC0gY2FsY1dpZGVBbmdsZUJvbnVzKGFuZ2xlKTtcclxuLyoqXHJcbiAqIEByZXR1cm5zIGBzdHJhaW5zW2ldYCA9IHN0cmFpbiB2YWx1ZSBhZnRlciB0aGUgYGlgdGggaGl0T2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVBaW1TdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCB3aXRoU2xpZGVycykge1xyXG4gICAgaWYgKGhpdE9iamVjdHMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIGNvbnN0IHN0cmFpbnMgPSBbMF07XHJcbiAgICBsZXQgY3VycmVudFN0cmFpbiA9IDA7XHJcbiAgICAvLyBJbmRleCAwIGlzIGEgZHVtbXkgZGlmZmljdWx0eUhpdE9iamVjdFxyXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBkaWZmcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGxhc3RMYXN0ID0gaGl0T2JqZWN0c1tpIC0gMl07XHJcbiAgICAgICAgY29uc3QgbGFzdCA9IGhpdE9iamVjdHNbaSAtIDFdO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBoaXRPYmplY3RzW2ldO1xyXG4gICAgICAgIGNvbnN0IGRpZmZMYXN0TGFzdCA9IGRpZmZzW2kgLSAyXTtcclxuICAgICAgICBjb25zdCBkaWZmTGFzdCA9IGRpZmZzW2kgLSAxXTtcclxuICAgICAgICBjb25zdCBkaWZmQ3VycmVudCA9IGRpZmZzW2ldO1xyXG4gICAgICAgIGNvbnN0IHN0cmFpblZhbHVlT2YgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBXZSBuZWVkIGF0IGxlYXN0IHRocmVlIG5vbi1kdW1teSBlbGVtZW50cyBmb3IgdGhpcyBjYWxjdWxhdGlvblxyXG4gICAgICAgICAgICBpZiAoaSA8PSAyIHx8ICgwLCBpbmRleF8xLmlzU3Bpbm5lcikoY3VycmVudCkgfHwgKDAsIGluZGV4XzEuaXNTcGlubmVyKShsYXN0KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICBsZXQgY3VyclZlbG9jaXR5ID0gZGlmZkN1cnJlbnQuanVtcERpc3RhbmNlIC8gZGlmZkN1cnJlbnQuc3RyYWluVGltZTtcclxuICAgICAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzU2xpZGVyKShsYXN0KSAmJiB3aXRoU2xpZGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW92ZW1lbnRWZWxvY2l0eSA9IGRpZmZDdXJyZW50Lm1vdmVtZW50RGlzdGFuY2UgLyBkaWZmQ3VycmVudC5tb3ZlbWVudFRpbWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0cmF2ZWxWZWxvY2l0eSA9IGRpZmZDdXJyZW50LnRyYXZlbERpc3RhbmNlIC8gZGlmZkN1cnJlbnQudHJhdmVsVGltZTtcclxuICAgICAgICAgICAgICAgIGN1cnJWZWxvY2l0eSA9IE1hdGgubWF4KGN1cnJWZWxvY2l0eSwgbW92ZW1lbnRWZWxvY2l0eSArIHRyYXZlbFZlbG9jaXR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgcHJldlZlbG9jaXR5ID0gZGlmZkxhc3QuanVtcERpc3RhbmNlIC8gZGlmZkxhc3Quc3RyYWluVGltZTtcclxuICAgICAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzU2xpZGVyKShsYXN0TGFzdCkgJiYgd2l0aFNsaWRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVtZW50VmVsb2NpdHkgPSBkaWZmTGFzdC5tb3ZlbWVudERpc3RhbmNlIC8gZGlmZkxhc3QubW92ZW1lbnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdHJhdmVsVmVsb2NpdHkgPSBkaWZmTGFzdC50cmF2ZWxEaXN0YW5jZSAvIGRpZmZMYXN0LnRyYXZlbFRpbWU7XHJcbiAgICAgICAgICAgICAgICBwcmV2VmVsb2NpdHkgPSBNYXRoLm1heChwcmV2VmVsb2NpdHksIG1vdmVtZW50VmVsb2NpdHkgKyB0cmF2ZWxWZWxvY2l0eSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHdpZGVBbmdsZUJvbnVzID0gMDtcclxuICAgICAgICAgICAgbGV0IGFjdXRlQW5nbGVCb251cyA9IDA7XHJcbiAgICAgICAgICAgIGxldCBzbGlkZXJCb251cyA9IDA7XHJcbiAgICAgICAgICAgIGxldCB2ZWxvY2l0eUNoYW5nZUJvbnVzID0gMDtcclxuICAgICAgICAgICAgbGV0IGFpbVN0cmFpbiA9IGN1cnJWZWxvY2l0eTsgLy8gU3RhcnQgc3RyYWluIHdpdGggcmVndWxhciB2ZWxvY2l0eS5cclxuICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAvLyBJZiByaHl0aG1zIGFyZSB0aGUgc2FtZS5cclxuICAgICAgICAgICAgTWF0aC5tYXgoZGlmZkN1cnJlbnQuc3RyYWluVGltZSwgZGlmZkxhc3Quc3RyYWluVGltZSkgPFxyXG4gICAgICAgICAgICAgICAgMS4yNSAqIE1hdGgubWluKGRpZmZDdXJyZW50LnN0cmFpblRpbWUsIGRpZmZMYXN0LnN0cmFpblRpbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGlmZkN1cnJlbnQuYW5nbGUgIT09IG51bGwgJiYgZGlmZkxhc3QuYW5nbGUgIT09IG51bGwgJiYgZGlmZkxhc3RMYXN0LmFuZ2xlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VyckFuZ2xlID0gZGlmZkN1cnJlbnQuYW5nbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdEFuZ2xlID0gZGlmZkxhc3QuYW5nbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdExhc3RBbmdsZSA9IGRpZmZMYXN0TGFzdC5hbmdsZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXdhcmRpbmcgYW5nbGVzLCB0YWtlIHRoZSBzbWFsbGVyIHZlbG9jaXR5IGFzIGJhc2UuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5nbGVCb251cyA9IE1hdGgubWluKGN1cnJWZWxvY2l0eSwgcHJldlZlbG9jaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICB3aWRlQW5nbGVCb251cyA9IGNhbGNXaWRlQW5nbGVCb251cyhjdXJyQW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdXRlQW5nbGVCb251cyA9IGNhbGNBY3V0ZUFuZ2xlQm9udXMoY3VyckFuZ2xlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZkN1cnJlbnQuc3RyYWluVGltZSA+IDEwMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25seSBidWZmIGRlbHRhVGltZSBleGNlZWRpbmcgMzAwIGJwbSAxLzIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdXRlQW5nbGVCb251cyA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdXRlQW5nbGVCb251cyAqPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsY0FjdXRlQW5nbGVCb251cyhsYXN0QW5nbGUpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbihhbmdsZUJvbnVzLCAxMjUgLyBkaWZmQ3VycmVudC5zdHJhaW5UaW1lKSAqXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coTWF0aC5zaW4oKE1hdGguUEkgLyAyKSAqIE1hdGgubWluKDEsICgxMDAgLSBkaWZmQ3VycmVudC5zdHJhaW5UaW1lKSAvIDI1KSksIDIpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhNYXRoLnNpbigoKE1hdGguUEkgLyAyKSAqICgoMCwgaW5kZXhfMi5jbGFtcCkoZGlmZkN1cnJlbnQuanVtcERpc3RhbmNlLCA1MCwgMTAwKSAtIDUwKSkgLyA1MCksIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBQZW5hbGl6ZSB3aWRlIGFuZ2xlcyBpZiB0aGV5J3JlIHJlcGVhdGVkLCByZWR1Y2luZyB0aGUgcGVuYWx0eSBhcyB0aGUgbGFzdEFuZ2xlIGdldHMgbW9yZSBhY3V0ZS5cclxuICAgICAgICAgICAgICAgICAgICB3aWRlQW5nbGVCb251cyAqPSBhbmdsZUJvbnVzICogKDEgLSBNYXRoLm1pbih3aWRlQW5nbGVCb251cywgTWF0aC5wb3coY2FsY1dpZGVBbmdsZUJvbnVzKGxhc3RBbmdsZSksIDMpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUGVuYWxpemUgYWN1dGUgYW5nbGVzIGlmIHRoZXkncmUgcmVwZWF0ZWQsIHJlZHVjaW5nIHRoZSBwZW5hbHR5IGFzIHRoZSBsYXN0TGFzdEFuZ2xlIGdldHMgbW9yZSBvYnR1c2UuXHJcbiAgICAgICAgICAgICAgICAgICAgYWN1dGVBbmdsZUJvbnVzICo9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDAuNSArIDAuNSAqICgxIC0gTWF0aC5taW4oYWN1dGVBbmdsZUJvbnVzLCBNYXRoLnBvdyhjYWxjQWN1dGVBbmdsZUJvbnVzKGxhc3RMYXN0QW5nbGUpLCAzKSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGZsb2F0RXF1YWw/XHJcbiAgICAgICAgICAgIGlmIChNYXRoLm1heChwcmV2VmVsb2NpdHksIGN1cnJWZWxvY2l0eSkgIT09IDApIHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlIHZlbG9jaXR5IG92ZXIgdGhlIHdob2xlIG9iamVjdCB3aGVuIGF3YXJkaW5nIGRpZmZlcmVuY2VzLCBub3QgdGhlIGluZGl2aWR1YWwganVtcFxyXG4gICAgICAgICAgICAgICAgLy8gYW5kIHNsaWRlciBwYXRoIHZlbG9jaXRpZXMuXHJcbiAgICAgICAgICAgICAgICBwcmV2VmVsb2NpdHkgPSAoZGlmZkxhc3QuanVtcERpc3RhbmNlICsgZGlmZkxhc3QudHJhdmVsRGlzdGFuY2UpIC8gZGlmZkxhc3Quc3RyYWluVGltZTtcclxuICAgICAgICAgICAgICAgIGN1cnJWZWxvY2l0eSA9IChkaWZmQ3VycmVudC5qdW1wRGlzdGFuY2UgKyBkaWZmQ3VycmVudC50cmF2ZWxEaXN0YW5jZSkgLyBkaWZmQ3VycmVudC5zdHJhaW5UaW1lO1xyXG4gICAgICAgICAgICAgICAgLy8gU2NhbGUgd2l0aCByYXRpbyBvZiBkaWZmZXJlbmNlIGNvbXBhcmVkIHRvIDAuNSAqIG1heCBkaXN0LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzdFJhdGlvID0gTWF0aC5wb3coTWF0aC5zaW4oKChNYXRoLlBJIC8gMikgKiBNYXRoLmFicyhwcmV2VmVsb2NpdHkgLSBjdXJyVmVsb2NpdHkpKSAvIE1hdGgubWF4KHByZXZWZWxvY2l0eSwgY3VyclZlbG9jaXR5KSksIDIpO1xyXG4gICAgICAgICAgICAgICAgLy8gUmV3YXJkIGZvciAlIGRpc3RhbmNlIHVwIHRvIDEyNSAvIHN0cmFpblRpbWUgZm9yIG92ZXJsYXBzIHdoZXJlIHZlbG9jaXR5IGlzIHN0aWxsIGNoYW5naW5nLlxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3ZlcmxhcFZlbG9jaXR5QnVmZiA9IE1hdGgubWluKDEyNSAvIE1hdGgubWluKGRpZmZDdXJyZW50LnN0cmFpblRpbWUsIGRpZmZMYXN0LnN0cmFpblRpbWUpLCBNYXRoLmFicyhwcmV2VmVsb2NpdHkgLSBjdXJyVmVsb2NpdHkpKTtcclxuICAgICAgICAgICAgICAgIC8vIFJld2FyZCBmb3IgJSBkaXN0YW5jZSBzbG93ZWQgZG93biBjb21wYXJlZCB0byBwcmV2aW91cywgcGF5aW5nIGF0dGVudGlvbiB0byBub3QgYXdhcmQgb3ZlcmxhcFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9uT3ZlcmxhcFZlbG9jaXR5QnVmZiA9IE1hdGguYWJzKHByZXZWZWxvY2l0eSAtIGN1cnJWZWxvY2l0eSkgKlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvIG5vdCBhd2FyZCBvdmVybGFwXHJcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coTWF0aC5zaW4oKE1hdGguUEkgLyAyKSAqIE1hdGgubWluKDEsIE1hdGgubWluKGRpZmZDdXJyZW50Lmp1bXBEaXN0YW5jZSwgZGlmZkxhc3QuanVtcERpc3RhbmNlKSAvIDEwMCkpLCAyKTtcclxuICAgICAgICAgICAgICAgIC8vIENob29zZSB0aGUgbGFyZ2VzdCBib251cywgbXVsdGlwbGllZCBieSByYXRpby5cclxuICAgICAgICAgICAgICAgIC8vIHZlbG9jaXR5Q2hhbmdlQm9udXMgPSBNYXRoLm1heChvdmVybGFwVmVsb2NpdHlCdWZmLCBub25PdmVybGFwVmVsb2NpdHlCdWZmKSAqIGRpc3RSYXRpbztcclxuICAgICAgICAgICAgICAgIHZlbG9jaXR5Q2hhbmdlQm9udXMgPSBvdmVybGFwVmVsb2NpdHlCdWZmICogZGlzdFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgLy8gUGVuYWxpemUgZm9yIHJoeXRobSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICAgICAgdmVsb2NpdHlDaGFuZ2VCb251cyAqPSBNYXRoLnBvdyhNYXRoLm1pbihkaWZmQ3VycmVudC5zdHJhaW5UaW1lLCBkaWZmTGFzdC5zdHJhaW5UaW1lKSAvIE1hdGgubWF4KGRpZmZDdXJyZW50LnN0cmFpblRpbWUsIGRpZmZMYXN0LnN0cmFpblRpbWUpLCAyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGlmZkN1cnJlbnQudHJhdmVsVGltZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmV3YXJkIHNsaWRlcnMgYmFzZWQgb24gdmVsb2NpdHkuXHJcbiAgICAgICAgICAgICAgICBzbGlkZXJCb251cyA9IGRpZmZDdXJyZW50LnRyYXZlbERpc3RhbmNlIC8gZGlmZkN1cnJlbnQudHJhdmVsVGltZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBZGQgaW4gYWN1dGUgYW5nbGUgYm9udXMgb3Igd2lkZSBhbmdsZSBib251cyArIHZlbG9jaXR5IGNoYW5nZSBib251cywgd2hpY2hldmVyIGlzIGxhcmdlci5cclxuICAgICAgICAgICAgYWltU3RyYWluICs9IE1hdGgubWF4KGFjdXRlQW5nbGVCb251cyAqIGFjdXRlX2FuZ2xlX211bHRpcGxpZXIsIHdpZGVBbmdsZUJvbnVzICogd2lkZV9hbmdsZV9tdWx0aXBsaWVyICsgdmVsb2NpdHlDaGFuZ2VCb251cyAqIHZlbG9jaXR5X2NoYW5nZV9tdWx0aXBsaWVyKTtcclxuICAgICAgICAgICAgLy8gQWRkIGluIGFkZGl0aW9uYWwgc2xpZGVyIHZlbG9jaXR5IGJvbnVzLlxyXG4gICAgICAgICAgICBpZiAod2l0aFNsaWRlcnMpXHJcbiAgICAgICAgICAgICAgICBhaW1TdHJhaW4gKz0gc2xpZGVyQm9udXMgKiBzbGlkZXJfbXVsdGlwbGllcjtcclxuICAgICAgICAgICAgcmV0dXJuIGFpbVN0cmFpbjtcclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIGN1cnJlbnRTdHJhaW4gKj0gc3RyYWluRGVjYXkoZGlmZkN1cnJlbnQuZGVsdGFUaW1lKTtcclxuICAgICAgICBjdXJyZW50U3RyYWluICs9IHN0cmFpblZhbHVlT2YgKiBza2lsbE11bHRpcGxpZXI7XHJcbiAgICAgICAgc3RyYWlucy5wdXNoKGN1cnJlbnRTdHJhaW4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0cmFpbnM7XHJcbn1cclxuZnVuY3Rpb24gY2FsY3VsYXRlQWltKGhpdE9iamVjdHMsIGRpZmZzLCB3aXRoU2xpZGVycywgb25seUZpbmFsVmFsdWUpIHtcclxuICAgIGNvbnN0IHN0cmFpbnMgPSBjYWxjdWxhdGVBaW1TdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCB3aXRoU2xpZGVycyk7XHJcbiAgICByZXR1cm4gKDAsIHN0cmFpbl8xLmNhbGN1bGF0ZURpZmZpY3VsdHlWYWx1ZXMpKGRpZmZzLCBzdHJhaW5zLCB7XHJcbiAgICAgICAgZGVjYXlXZWlnaHQ6IDAuOSxcclxuICAgICAgICBkaWZmaWN1bHR5TXVsdGlwbGllcjogMS4wNixcclxuICAgICAgICBzZWN0aW9uRHVyYXRpb246IDQwMCxcclxuICAgICAgICByZWR1Y2VkU2VjdGlvbkNvdW50OiAxMCxcclxuICAgICAgICBzdHJhaW5EZWNheSxcclxuICAgIH0sIG9ubHlGaW5hbFZhbHVlKTtcclxufVxyXG5leHBvcnRzLmNhbGN1bGF0ZUFpbSA9IGNhbGN1bGF0ZUFpbTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jYWxjdWxhdGVGbGFzaGxpZ2h0ID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL2NvcmUvaW5kZXhcIik7XHJcbmNvbnN0IGluZGV4XzIgPSByZXF1aXJlKFwiLi4vLi4vbWF0aC9pbmRleFwiKTtcclxuY29uc3Qgc3RyYWluXzEgPSByZXF1aXJlKFwiLi9zdHJhaW5cIik7XHJcbmNvbnN0IHNraWxsTXVsdGlwbGllciA9IDAuMDU7XHJcbmNvbnN0IHN0cmFpbkRlY2F5QmFzZSA9IDAuMTU7XHJcbmNvbnN0IGhpc3RvcnlMZW5ndGggPSAxMDsgLy8gTG9vayBiYWNrIGZvciAxMCBub3RlcyBpcyBhZGRlZCBmb3IgdGhlIHNha2Ugb2YgZmxhc2hsaWdodCBjYWxjdWxhdGlvbnMuXHJcbmNvbnN0IHN0cmFpbkRlY2F5ID0gKG1zKSA9PiBNYXRoLnBvdyhzdHJhaW5EZWNheUJhc2UsIG1zIC8gMTAwMCk7XHJcbmNvbnN0IHBvc2l0aW9uID0gKG8pID0+ICgoMCwgaW5kZXhfMS5pc0hpdENpcmNsZSkobykgPyBvLnBvc2l0aW9uIDogby5oZWFkLnBvc2l0aW9uKTtcclxuLy8gSW4gRmxhc2hsaWdodCBpdCdzIG5vdCB1c2luZyBTdGFja2VkRW5kUG9zaXRpb24gc28gd2UgaGF2ZSB0byBhZGp1c3RcclxuY29uc3QgdW5zdGFja2VkRW5kUG9zaXRpb24gPSAobykgPT4gKCgwLCBpbmRleF8xLmlzSGl0Q2lyY2xlKShvKSA/IG8udW5zdGFja2VkUG9zaXRpb24gOiBvLnVuc3RhY2tlZEVuZFBvc2l0aW9uKTtcclxuLy8gY29uc3QgYmx1ZXByaW50RW5kUG9zaXRpb24gPSAobzogSGl0Q2lyY2xlIHwgU2xpZGVyKSA9PiAoaXNIaXRDaXJjbGUobykgPyBvLnBvc2l0aW9uIDogby5lbmRQb3NpdGlvbik7XHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUZsYXNobGlnaHRTdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCBoaWRkZW4pIHtcclxuICAgIGlmIChoaXRPYmplY3RzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICByZXR1cm4gW107XHJcbiAgICBsZXQgY3VycmVudFN0cmFpbiA9IDA7XHJcbiAgICBjb25zdCBzdHJhaW5zID0gW2N1cnJlbnRTdHJhaW5dO1xyXG4gICAgY29uc3QgbWF4X29wYWNpdHlfYm9udXMgPSAwLjQ7XHJcbiAgICBjb25zdCBoaWRkZW5fYm9udXMgPSAwLjI7XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGRpZmZzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudCA9IGhpdE9iamVjdHNbaV07XHJcbiAgICAgICAgY29uc3QgZGlmZkN1cnJlbnQgPSBkaWZmc1tpXTtcclxuICAgICAgICBjb25zdCBzdHJhaW5WYWx1ZU9mID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzU3Bpbm5lcikoY3VycmVudCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGluZ0ZhY3RvciA9IDUyLjAgLyBjdXJyZW50LnJhZGl1cztcclxuICAgICAgICAgICAgbGV0IHNtYWxsRGlzdE5lcmYgPSAxLjA7XHJcbiAgICAgICAgICAgIGxldCBjdW11bGF0aXZlU3RyYWluVGltZSA9IDAuMDtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IDAuMDtcclxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNDb3VudCA9IE1hdGgubWluKGkgLSAxLCBoaXN0b3J5TGVuZ3RoKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBwcmV2aW91c0NvdW50OyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gaGl0T2JqZWN0c1tpIC0gaiAtIDFdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlmZlByZXZpb3VzID0gZGlmZnNbaSAtIGogLSAxXTtcclxuICAgICAgICAgICAgICAgIGlmICgoMCwgaW5kZXhfMS5pc1NwaW5uZXIpKHByZXZpb3VzKSlcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIC8vICNMQVpFUkJVRzogTGF6ZXIgZG9lc24ndCB1c2UgU3RhY2tlZEVuZFBvc2l0aW9uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBqdW1wRGlzdGFuY2UgPSBpbmRleF8yLlZlYzIuZGlzdGFuY2UocG9zaXRpb24oY3VycmVudCksIHVuc3RhY2tlZEVuZFBvc2l0aW9uKHByZXZpb3VzKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjdW11bGF0aXZlU3RyYWluVGltZSArPSBkaWZmUHJldmlvdXMuc3RyYWluVGltZTtcclxuICAgICAgICAgICAgICAgIGN1bXVsYXRpdmVTdHJhaW5UaW1lICs9IGRpZmZzW2ldLnN0cmFpblRpbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoaiA9PT0gMClcclxuICAgICAgICAgICAgICAgICAgICBzbWFsbERpc3ROZXJmID0gTWF0aC5taW4oMS4wLCBqdW1wRGlzdGFuY2UgLyA3NS4wKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrTmVyZiA9IE1hdGgubWluKDEuMCwgKGRpZmZQcmV2aW91cy5qdW1wRGlzdGFuY2UgLyBzY2FsaW5nRmFjdG9yKSAvIDI1LjApO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3BhY2l0eUJvbnVzID0gMS4wICsgbWF4X29wYWNpdHlfYm9udXMgKiAoMS4wIC0gKCEoMCwgaW5kZXhfMS5pc1NwaW5uZXIpKGN1cnJlbnQpID8gKCgwLCBpbmRleF8xLmlzSGl0Q2lyY2xlKShjdXJyZW50KSA/IGN1cnJlbnQub3BhY2l0eUF0KGN1cnJlbnQuaGl0VGltZSwgaGlkZGVuKSA6IGN1cnJlbnQuaGVhZC5vcGFjaXR5QXQoY3VycmVudC5oZWFkLmhpdFRpbWUsIGhpZGRlbikpIDogMSkpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IHN0YWNrTmVyZiAqIG9wYWNpdHlCb251cyAqIHNjYWxpbmdGYWN0b3IgKiBqdW1wRGlzdGFuY2UgLyBjdW11bGF0aXZlU3RyYWluVGltZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHQgPSBNYXRoLnBvdyhzbWFsbERpc3ROZXJmICogcmVzdWx0LCAyLjApO1xyXG4gICAgICAgICAgICBpZiAoaGlkZGVuKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0ICo9IDEuMCArIGhpZGRlbl9ib251cztcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIGN1cnJlbnRTdHJhaW4gKj0gc3RyYWluRGVjYXkoZGlmZkN1cnJlbnQuZGVsdGFUaW1lKTtcclxuICAgICAgICBjdXJyZW50U3RyYWluICs9IHN0cmFpblZhbHVlT2YgKiBza2lsbE11bHRpcGxpZXI7XHJcbiAgICAgICAgc3RyYWlucy5wdXNoKGN1cnJlbnRTdHJhaW4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0cmFpbnM7XHJcbn1cclxuZnVuY3Rpb24gY2FsY3VsYXRlRmxhc2hsaWdodChoaXRPYmplY3RzLCBkaWZmcywgb25seUZpbmFsVmFsdWUsIGhpZGRlbikge1xyXG4gICAgY29uc3Qgc3RyYWlucyA9IGNhbGN1bGF0ZUZsYXNobGlnaHRTdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCBoaWRkZW4pO1xyXG4gICAgcmV0dXJuICgwLCBzdHJhaW5fMS5jYWxjdWxhdGVEaWZmaWN1bHR5VmFsdWVzKShkaWZmcywgc3RyYWlucywge1xyXG4gICAgICAgIGRlY2F5V2VpZ2h0OiAwLjksXHJcbiAgICAgICAgZGlmZmljdWx0eU11bHRpcGxpZXI6IDEuMDYsXHJcbiAgICAgICAgc2VjdGlvbkR1cmF0aW9uOiA0MDAsXHJcbiAgICAgICAgcmVkdWNlZFNlY3Rpb25Db3VudDogMTAsXHJcbiAgICAgICAgc3RyYWluRGVjYXksXHJcbiAgICB9LCBvbmx5RmluYWxWYWx1ZSk7XHJcbn1cclxuZXhwb3J0cy5jYWxjdWxhdGVGbGFzaGxpZ2h0ID0gY2FsY3VsYXRlRmxhc2hsaWdodDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jYWxjdWxhdGVSZWxldmFudE5vdGVzID0gZXhwb3J0cy5jYWxjdWxhdGVTcGVlZCA9IGV4cG9ydHMuY2FsY3VsYXRlU3BlZWRTdHJhaW5zID0gdm9pZCAwO1xyXG5jb25zdCBpbmRleF8xID0gcmVxdWlyZShcIi4uLy4uL2NvcmUvaW5kZXhcIik7XHJcbmNvbnN0IGluZGV4XzIgPSByZXF1aXJlKFwiLi4vLi4vbWF0aC9pbmRleFwiKTtcclxuY29uc3Qgc3RyYWluXzEgPSByZXF1aXJlKFwiLi9zdHJhaW5cIik7XHJcbmNvbnN0IHNpbmdsZV9zcGFjaW5nX3RocmVzaG9sZCA9IDEyNTtcclxuY29uc3Qgcmh5dGhtX211bHRpcGxpZXIgPSAwLjc1O1xyXG5jb25zdCBoaXN0b3J5X3RpbWVfbWF4ID0gNTAwMDsgLy8gNSBzZWNvbmRzIG9mIGNhbGN1bGF0aW5nUmh5dGhtQm9udXMgbWF4LlxyXG5jb25zdCBtaW5fc3BlZWRfYm9udXMgPSA3NTsgLy8gfjIwMEJQTVxyXG5jb25zdCBzcGVlZF9iYWxhbmNpbmdfZmFjdG9yID0gNDA7XHJcbmNvbnN0IHNraWxsTXVsdGlwbGllciA9IDEzNzU7XHJcbmNvbnN0IHN0cmFpbkRlY2F5QmFzZSA9IDAuMztcclxuY29uc3QgaGlzdG9yeV9sZW5ndGggPSAzMjtcclxuY29uc3Qgc3RyYWluRGVjYXkgPSAobXMpID0+IE1hdGgucG93KHN0cmFpbkRlY2F5QmFzZSwgbXMgLyAxMDAwKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBoaXRPYmplY3RzXHJcbiAqIEBwYXJhbSBkaWZmc1xyXG4gKiBAcGFyYW0gZ3JlYXRXaW5kb3cgdGhlIGNsb2NrIHJhdGUgYWRqdXN0ZWQgaGl0IHdpbmRvd1xyXG4gKiBAcmV0dXJucyBgc3RyYWluc1tpXWAgPSBzcGVlZCBzdHJhaW4gdmFsdWUgYWZ0ZXIgdGhlIGBpYHRoIGhpdE9iamVjdFxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlU3BlZWRTdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCBncmVhdFdpbmRvdykge1xyXG4gICAgbGV0IGN1cnJlbnRTdHJhaW4gPSAwO1xyXG4gICAgY29uc3Qgc3RyYWlucyA9IFswXTtcclxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgaGl0T2JqZWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnQgPSBoaXRPYmplY3RzW2ldO1xyXG4gICAgICAgIGNvbnN0IGRpZmZDdXJyZW50ID0gZGlmZnNbaV07XHJcbiAgICAgICAgY29uc3QgZGlmZlByZXYgPSBkaWZmc1tpIC0gMV07XHJcbiAgICAgICAgY29uc3QgZGlmZk5leHQgPSBkaWZmc1tpICsgMV07XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coZGlmZkN1cnJlbnQsIGRpZmZOZXh0KVxyXG4gICAgICAgIC8vIEhlbHBlciBmdW5jdGlvbiBzbyB0aGF0IHdlIGRvbid0IGhhdmUgdG8gdXNlIHRoZSBSZXZlcnNlZFF1ZXVlIGBQcmV2aW91c2BcclxuICAgICAgICBjb25zdCBwcmV2aW91c0NvdW50ID0gTWF0aC5taW4oaGlzdG9yeV9sZW5ndGgsIGkgLSAxKTtcclxuICAgICAgICBjb25zdCBwcmV2aW91cyA9IChqKSA9PiBkaWZmc1tpIC0gMSAtIGpdO1xyXG4gICAgICAgIGNvbnN0IHByZXZpb3VzSGl0T2JqZWN0ID0gKGopID0+IGhpdE9iamVjdHNbaSAtIDEgLSBqXTtcclxuICAgICAgICBjb25zdCBzdHJhaW5WYWx1ZU9mID0gKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCgwLCBpbmRleF8xLmlzU3Bpbm5lcikoY3VycmVudCkpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgLy8gTm90ZTogb3N1UHJldk9iaiAhPSBudWxsIGlzIGVxdWl2YWxlbnQgdG8gaSA+IDEgc2luY2UgaXQgd2FudHMgdG8gbG9vayBhdCBvbmUgbm9uLWR1bW15IGRpZmYgb2JqZWN0XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZJc05vbkR1bW15ID0gcHJldmlvdXNDb3VudCA+IDA7XHJcbiAgICAgICAgICAgIC8vIGRlcml2ZSBzdHJhaW5UaW1lIGZvciBjYWxjdWxhdGlvblxyXG4gICAgICAgICAgICBsZXQgc3RyYWluVGltZSA9IGRpZmZDdXJyZW50LnN0cmFpblRpbWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyZWF0V2luZG93RnVsbCA9IGdyZWF0V2luZG93ICogMjtcclxuICAgICAgICAgICAgLy8gY29uc3Qgc3BlZWRXaW5kb3dSYXRpbyA9IHN0cmFpblRpbWUgLyBncmVhdFdpbmRvd0Z1bGw7XHJcbiAgICAgICAgICAgIGxldCB0cnl6X3ZuID0gMTtcclxuICAgICAgICAgICAgaWYgKGRpZmZOZXh0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJEZWx0YVRpbWUgPSBNYXRoLm1heCgxLCBkaWZmQ3VycmVudC5kZWx0YVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV4dERlbHRhVGltZSA9IE1hdGgubWF4KDEsIGRpZmZOZXh0LmRlbHRhVGltZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YURpZmZlcmVuY2UgPSBNYXRoLmFicyhuZXh0RGVsdGFUaW1lIC0gY3VyckRlbHRhVGltZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcGVlZFJhdGlvID0gY3VyckRlbHRhVGltZSAvIE1hdGgubWF4KGN1cnJEZWx0YVRpbWUsIGRlbHRhRGlmZmVyZW5jZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3dSYXRpbyA9IE1hdGgucG93KE1hdGgubWluKDEsIGN1cnJEZWx0YVRpbWUgLyBncmVhdFdpbmRvd0Z1bGwpLCAyKTtcclxuICAgICAgICAgICAgICAgIHRyeXpfdm4gPSBNYXRoLnBvdyhzcGVlZFJhdGlvLCAxIC0gd2luZG93UmF0aW8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFpbSB0byBuZXJmIGNoZWVzeSByaHl0aG1zIChWZXJ5IGZhc3QgY29uc2VjdXRpdmUgZG91YmxlcyB3aXRoIGxhcmdlIGRlbHRhLXRpbWVzIGJldHdlZW4pXHJcbiAgICAgICAgICAgIC8vIGlmIChwcmV2SXNOb25EdW1teSAmJiBzdHJhaW5UaW1lIDwgZ3JlYXRXaW5kb3dGdWxsICYmIGRpZmZQcmV2LnN0cmFpblRpbWUgPiBzdHJhaW5UaW1lKVxyXG4gICAgICAgICAgICAvLyAgIHN0cmFpblRpbWUgPSBsZXJwKGRpZmZQcmV2LnN0cmFpblRpbWUsIHN0cmFpblRpbWUsIHNwZWVkV2luZG93UmF0aW8pO1xyXG4gICAgICAgICAgICAvLyBDYXAgZGVsdGF0aW1lIHRvIHRoZSBPRCAzMDAgaGl0d2luZG93LlxyXG4gICAgICAgICAgICAvLyAwLjkzIGlzIGRlcml2ZWQgZnJvbSBtYWtpbmcgc3VyZSAyNjBicG0gT0Q4IHN0cmVhbXMgYXJlbid0IG5lcmZlZCBoYXJzaGx5LCB3aGlsc3QgMC45MiBsaW1pdHMgdGhlIGVmZmVjdCBvZlxyXG4gICAgICAgICAgICAvLyB0aGUgY2FwLlxyXG4gICAgICAgICAgICBzdHJhaW5UaW1lIC89ICgwLCBpbmRleF8yLmNsYW1wKShzdHJhaW5UaW1lIC8gZ3JlYXRXaW5kb3dGdWxsIC8gMC45MywgMC45MiwgMSk7XHJcbiAgICAgICAgICAgIC8vIGRlcml2ZSBzcGVlZEJvbnVzIGZvciBjYWxjdWxhdGlvblxyXG4gICAgICAgICAgICBsZXQgc3BlZWRCb251cyA9IDEuMDtcclxuICAgICAgICAgICAgaWYgKHN0cmFpblRpbWUgPCBtaW5fc3BlZWRfYm9udXMpXHJcbiAgICAgICAgICAgICAgICBzcGVlZEJvbnVzID0gMSArIDAuNzUgKiBNYXRoLnBvdygobWluX3NwZWVkX2JvbnVzIC0gc3RyYWluVGltZSkgLyBzcGVlZF9iYWxhbmNpbmdfZmFjdG9yLCAyKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLm1pbihzaW5nbGVfc3BhY2luZ190aHJlc2hvbGQsIGRpZmZDdXJyZW50LnRyYXZlbERpc3RhbmNlICsgZGlmZkN1cnJlbnQubW92ZW1lbnREaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIHJldHVybiAoc3BlZWRCb251cyArIHNwZWVkQm9udXMgKiBNYXRoLnBvdyhkaXN0YW5jZSAvIHNpbmdsZV9zcGFjaW5nX3RocmVzaG9sZCwgMy41KSkgKiB0cnl6X3ZuIC8gc3RyYWluVGltZTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRSaHl0aG0gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoKDAsIGluZGV4XzEuaXNTcGlubmVyKShjdXJyZW50KSlcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICBsZXQgcHJldmlvdXNJc2xhbmRTaXplID0gMDtcclxuICAgICAgICAgICAgbGV0IHJoeXRobUNvbXBsZXhpdHlTdW0gPSAwO1xyXG4gICAgICAgICAgICBsZXQgaXNsYW5kU2l6ZSA9IDE7XHJcbiAgICAgICAgICAgIGxldCBzdGFydFJhdGlvID0gMDsgLy8gc3RvcmUgdGhlIHJhdGlvIG9mIHRoZSBjdXJyZW50IHN0YXJ0IG9mIGFuIGlzbGFuZCB0byBidWZmIGZvciB0aWdodGVyIHJoeXRobXNcclxuICAgICAgICAgICAgbGV0IGZpcnN0RGVsdGFTd2l0Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IHJoeXRobVN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgLy8gT3B0aW1pemF0aW9uIGZyb20gYSBcImZ1dHVyZVwiIGNvbW1pdFxyXG4gICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcHB5L29zdS9jb21taXQvYzg3ZmY4MmMxY2RlM2FmNDVjMTczZmNiMjY0ZGU5OTkzNDBiNzQzYyNkaWZmLTRlZDcwNjRlZWI2MGI2ZjBhMTlkYzE2NzI5Y2Q2ZmMzYzNiYTk3OTQ5NjJhN2JjZmM4MzBiZGRiZWE3ODEwMDBcclxuICAgICAgICAgICAgd2hpbGUgKHJoeXRobVN0YXJ0IDwgcHJldmlvdXNDb3VudCAtIDIgJiZcclxuICAgICAgICAgICAgICAgIGRpZmZDdXJyZW50LnN0YXJ0VGltZSAtIHByZXZpb3VzKHJoeXRobVN0YXJ0KS5zdGFydFRpbWUgPCBoaXN0b3J5X3RpbWVfbWF4KVxyXG4gICAgICAgICAgICAgICAgcmh5dGhtU3RhcnQrKztcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IHJoeXRobVN0YXJ0OyBqID4gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyT2JqID0gcHJldmlvdXMoaiAtIDEpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldk9iaiA9IHByZXZpb3VzKGopO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdE9iaiA9IHByZXZpb3VzKGogKyAxKTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJySGlzdG9yaWNhbERlY2F5ID0gKGhpc3RvcnlfdGltZV9tYXggLSAoZGlmZkN1cnJlbnQuc3RhcnRUaW1lIC0gY3Vyck9iai5zdGFydFRpbWUpKSAvIGhpc3RvcnlfdGltZV9tYXg7XHJcbiAgICAgICAgICAgICAgICBjdXJySGlzdG9yaWNhbERlY2F5ID0gTWF0aC5taW4oKHByZXZpb3VzQ291bnQgLSBqKSAvIHByZXZpb3VzQ291bnQsIGN1cnJIaXN0b3JpY2FsRGVjYXkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyckRlbHRhID0gY3Vyck9iai5zdHJhaW5UaW1lO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJldkRlbHRhID0gcHJldk9iai5zdHJhaW5UaW1lO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdERlbHRhID0gbGFzdE9iai5zdHJhaW5UaW1lO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VyclJhdGlvID0gMS4wICtcclxuICAgICAgICAgICAgICAgICAgICA2LjAgKlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1pbigwLjUsIE1hdGgucG93KE1hdGguc2luKE1hdGguUEkgLyAoTWF0aC5taW4ocHJldkRlbHRhLCBjdXJyRGVsdGEpIC8gTWF0aC5tYXgocHJldkRlbHRhLCBjdXJyRGVsdGEpKSksIDIpKTsgLy8gZmFuY3kgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHJoeXRobWJvbnVzZXMuXHJcbiAgICAgICAgICAgICAgICBsZXQgd2luZG93UGVuYWx0eSA9IE1hdGgubWluKDEsIE1hdGgubWF4KDAsIE1hdGguYWJzKHByZXZEZWx0YSAtIGN1cnJEZWx0YSkgLSBncmVhdFdpbmRvdyAqIDAuNikgLyAoZ3JlYXRXaW5kb3cgKiAwLjYpKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvd1BlbmFsdHkgPSBNYXRoLm1pbigxLCB3aW5kb3dQZW5hbHR5KTtcclxuICAgICAgICAgICAgICAgIGxldCBlZmZlY3RpdmVSYXRpbyA9IHdpbmRvd1BlbmFsdHkgKiBjdXJyUmF0aW87XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3REZWx0YVN3aXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHByZXZEZWx0YSA+IDEuMjUgKiBjdXJyRGVsdGEgfHwgcHJldkRlbHRhICogMS4yNSA8IGN1cnJEZWx0YSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzbGFuZFNpemUgPCA3KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNsYW5kU2l6ZSsrOyAvLyBpc2xhbmQgaXMgc3RpbGwgcHJvZ3Jlc3NpbmcsIGNvdW50IHNpemUuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKDAsIGluZGV4XzEuaXNTbGlkZXIpKHByZXZpb3VzSGl0T2JqZWN0KGogLSAxKSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBicG0gY2hhbmdlIGlzIGludG8gc2xpZGVyLCB0aGlzIGlzIGVhc3kgYWNjIHdpbmRvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmF0aW8gKj0gMC4xMjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoMCwgaW5kZXhfMS5pc1NsaWRlcikocHJldmlvdXNIaXRPYmplY3QoaikpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnBtIGNoYW5nZSB3YXMgZnJvbSBhIHNsaWRlciwgdGhpcyBpcyBlYXNpZXIgdHlwaWNhbGx5IHRoYW4gY2lyY2xlIC0+IGNpcmNsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0aXZlUmF0aW8gKj0gMC4yNTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzSXNsYW5kU2l6ZSA9PSBpc2xhbmRTaXplKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVwZWF0ZWQgaXNsYW5kIHNpemUgKGV4OiB0cmlwbGV0IC0+IHRyaXBsZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSYXRpbyAqPSAwLjI1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNJc2xhbmRTaXplICUgMiA9PSBpc2xhbmRTaXplICUgMilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcGVhdGVkIGlzbGFuZCBwb2xhcnRpeSAoMiAtPiA0LCAzIC0+IDUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3RpdmVSYXRpbyAqPSAwLjU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYXN0RGVsdGEgPiBwcmV2RGVsdGEgKyAxMCAmJiBwcmV2RGVsdGEgPiBjdXJyRGVsdGEgKyAxMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByZXZpb3VzIGluY3JlYXNlIGhhcHBlbmVkIGEgbm90ZSBhZ28sIDEvMS0+MS8yLTEvNCwgZG9udCB3YW50IHRvIGJ1ZmYgdGhpcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVmZmVjdGl2ZVJhdGlvICo9IDAuMTI1O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaHl0aG1Db21wbGV4aXR5U3VtICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKChNYXRoLnNxcnQoZWZmZWN0aXZlUmF0aW8gKiBzdGFydFJhdGlvKSAqIGN1cnJIaXN0b3JpY2FsRGVjYXkgKiBNYXRoLnNxcnQoNCArIGlzbGFuZFNpemUpKSAvIDIpICpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLnNxcnQoNCArIHByZXZpb3VzSXNsYW5kU2l6ZSkpIC9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFJhdGlvID0gZWZmZWN0aXZlUmF0aW87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzSXNsYW5kU2l6ZSA9IGlzbGFuZFNpemU7IC8vIGxvZyB0aGUgbGFzdCBpc2xhbmQgc2l6ZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZEZWx0YSAqIDEuMjUgPCBjdXJyRGVsdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdyZSBzbG93aW5nIGRvd24sIHN0b3AgY291bnRpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RGVsdGFTd2l0Y2ggPSBmYWxzZTsgLy8gaWYgd2UncmUgc3BlZWRpbmcgdXAsIHRoaXMgc3RheXMgdHJ1ZSBhbmQgIHdlIGtlZXAgY291bnRpbmcgaXNsYW5kIHNpemUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzbGFuZFNpemUgPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByZXZEZWx0YSA+IDEuMjUgKiBjdXJyRGVsdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSB3YW50IHRvIGJlIHNwZWVkaW5nIHVwLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEJlZ2luIGNvdW50aW5nIGlzbGFuZCB1bnRpbCB3ZSBjaGFuZ2Ugc3BlZWQgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3REZWx0YVN3aXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRSYXRpbyA9IGVmZmVjdGl2ZVJhdGlvO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzbGFuZFNpemUgPSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoNCArIHJoeXRobUNvbXBsZXhpdHlTdW0gKiByaHl0aG1fbXVsdGlwbGllcikgLyAyOyAvL3Byb2R1Y2VzIG11bHRpcGxpZXIgdGhhdCBjYW4gYmUgYXBwbGllZCB0b1xyXG4gICAgICAgICAgICAvLyBzdHJhaW4uIHJhbmdlIFsxLCBpbmZpbml0eSkgKG5vdCByZWFsbHlcclxuICAgICAgICAgICAgLy8gdGhvdWdoKVxyXG4gICAgICAgIH0pKCk7XHJcbiAgICAgICAgY3VycmVudFN0cmFpbiAqPSBzdHJhaW5EZWNheShkaWZmQ3VycmVudC5zdHJhaW5UaW1lKTtcclxuICAgICAgICBjdXJyZW50U3RyYWluICs9IHN0cmFpblZhbHVlT2YgKiBza2lsbE11bHRpcGxpZXI7XHJcbiAgICAgICAgc3RyYWlucy5wdXNoKGN1cnJlbnRTdHJhaW4gKiBjdXJyZW50Umh5dGhtKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHJhaW5zO1xyXG59XHJcbmV4cG9ydHMuY2FsY3VsYXRlU3BlZWRTdHJhaW5zID0gY2FsY3VsYXRlU3BlZWRTdHJhaW5zO1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVTcGVlZChoaXRPYmplY3RzLCBkaWZmcywgaGl0V2luZG93R3JlYXQsIG9ubHlGaW5hbFZhbHVlKSB7XHJcbiAgICBjb25zdCBzdHJhaW5zID0gY2FsY3VsYXRlU3BlZWRTdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCBoaXRXaW5kb3dHcmVhdCk7XHJcbiAgICByZXR1cm4gKDAsIHN0cmFpbl8xLmNhbGN1bGF0ZURpZmZpY3VsdHlWYWx1ZXMpKGRpZmZzLCBzdHJhaW5zLCB7XHJcbiAgICAgICAgZGVjYXlXZWlnaHQ6IDAuOSxcclxuICAgICAgICBkaWZmaWN1bHR5TXVsdGlwbGllcjogMS4wNCxcclxuICAgICAgICBzZWN0aW9uRHVyYXRpb246IDQwMCxcclxuICAgICAgICByZWR1Y2VkU2VjdGlvbkNvdW50OiA1LFxyXG4gICAgICAgIHN0cmFpbkRlY2F5LFxyXG4gICAgfSwgb25seUZpbmFsVmFsdWUpO1xyXG59XHJcbmV4cG9ydHMuY2FsY3VsYXRlU3BlZWQgPSBjYWxjdWxhdGVTcGVlZDtcclxuZnVuY3Rpb24gY2FsY3VsYXRlUmVsZXZhbnROb3RlcyhoaXRPYmplY3RzLCBkaWZmcywgaGl0V2luZG93R3JlYXQsIG9ubHlGaW5hbFZhbHVlKSB7XHJcbiAgICBjb25zdCBzdHJhaW5zID0gY2FsY3VsYXRlU3BlZWRTdHJhaW5zKGhpdE9iamVjdHMsIGRpZmZzLCBoaXRXaW5kb3dHcmVhdCk7XHJcbiAgICBpZiAoc3RyYWlucy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICBjb25zdCBtYXhTdHJhaW4gPSBNYXRoLm1heCguLi5zdHJhaW5zKTtcclxuICAgIGlmIChtYXhTdHJhaW4gPT09IDApXHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICBsZXQgdG90YWwgPSAwO1xyXG4gICAgc3RyYWlucy5mb3JFYWNoKG5leHQgPT4ge1xyXG4gICAgICAgIHRvdGFsICs9IDEuMCAvICgxLjAgKyBNYXRoLmV4cCgtKG5leHQgLyBtYXhTdHJhaW4gKiAxMiAtIDYpKSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0b3RhbDtcclxufVxyXG5leHBvcnRzLmNhbGN1bGF0ZVJlbGV2YW50Tm90ZXMgPSBjYWxjdWxhdGVSZWxldmFudE5vdGVzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLmNhbGN1bGF0ZURpZmZpY3VsdHlWYWx1ZXMgPSB2b2lkIDA7XHJcbmNvbnN0IGluZGV4XzEgPSByZXF1aXJlKFwiLi4vLi4vbWF0aC9pbmRleFwiKTtcclxuY29uc3QgaW5kZXhfMiA9IHJlcXVpcmUoXCIuLi8uLi9jb3JlL2luZGV4XCIpO1xyXG5jb25zdCBzdGFydFRpbWUgPSAobykgPT4gKCgwLCBpbmRleF8yLmlzSGl0Q2lyY2xlKShvKSA/IG8uaGl0VGltZSA6IG8uc3RhcnRUaW1lKTtcclxuLy8gTm90IG92ZXJyaWRkZW4gLi4uIHlldD9cclxuY29uc3QgUkVEVUNFRF9TVFJBSU5fQkFTRUxJTkUgPSAwLjc1O1xyXG4vKipcclxuICogU3VtbWFyeSBvZiBob3cgdGhlIHN0cmFpbiBza2lsbCB3b3JrczpcclxuICogLSBTdHJhaW4gaXMgYSB2YWx1ZSB0aGF0IGRlY2F5cyBleHBvbmVudGlhbGx5IG92ZXIgdGltZSBpZiB0aGVyZSBpcyBubyBoaXQgb2JqZWN0IHByZXNlbnRcclxuICogLSBMZXQgc3RyYWluIGF0IHRpbWUgdCBiZSBTKHQpXHJcbiAqXHJcbiAqIC0gRmlyc3QgdGhlIHdob2xlIGJlYXRtYXAgaXMgcGFydGl0aW9uZWQgaW50byBtdWx0aXBsZSBzZWN0aW9ucyBlYWNoIG9mIGR1cmF0aW9uIEQgKEQ9NDAwbXMgaW4gb3N1IXN0ZCkgZS5nLiBbMCxcclxuICogNDAwXSwgWzQwMCwgODAwXSwgLi4uXHJcbiAqIC0gTm93IHdlIG9ubHkgY29uc2lkZXIgdGhlIGhpZ2hlc3Qgc3RyYWluIG9mIGVhY2ggc2VjdGlvbiBha2EgXCJzZWN0aW9uIHBlYWtcIiBpLmUuIFAoaSkgPSBtYXgoUyh0KSkgd2hlcmUgaSpEIDw9IHQgPD1cclxuICogaSooRCsxKVxyXG4gKiBOb3RlOiBUaGlzIGNhbiBiZSBlYXNpbHkgY2FsY3VsYXRlZCBzaW5jZSB3ZSBrbm93IHRoYXQgdGhlIHBlYWsgY2FuIG9ubHkgaGFwcGVuIGFmdGVyIGVhY2ggaGl0IG9iamVjdCBvciBhdCB0aGVcclxuICogYmVnaW5uaW5nIG9mIGEgc2VjdGlvblxyXG4gKlxyXG4gKiAtIEZpbmFsbHkgdGhlIGRpZmZpY3VsdHkgdmFsdWUgb2YgYSBzdHJhaW4gc2tpbGwgY29uc2lkZXJzIHRoZSBsYXJnZXN0IEsgc3RyYWluIHBlYWtzIChLPTEwIGluIG9zdSFzdGQpIGFuZFxyXG4gKiBuZXJmcyB0aGVtIHNvIHRoYXQgdGhlIGV4dHJlbWx5IHVuaXF1ZSBkaWZmaWN1bHR5IHNwaWtlcyBnZXQgbmVyZmVkLlxyXG4gKlxyXG4gKiAtIFRoZW4gaXQgdXNlcyB0aGUgd2VpZ2h0ZWQgc3VtIHRvIGNhbGN1bGF0ZSB0aGUgZGlmZmljdWx0eVZhbHVlLlxyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZSBub3RlczpcclxuICogMS4gTyhuICsgRCArIEQgKiBsb2cgRCkgaWYgb25seSBjYWxjdWxhdGluZyB0aGUgbGFzdCB2YWx1ZVxyXG4gKiAyLiBJZiB3ZSB3YW50IHRvIGNhbGN1bGF0ZSBmb3IgZXZlcnkgdmFsdWU6XHJcbiAqICAgVGhpcyBpcyBPKG4gKiBEICogbG9nIEQpIGJ1dCBjYW4gYmUgb3B0aW1pemVkIHRvIE8obikgYnkgaGF2aW5nIGEgcHJlY2lzaW9uIGJyZWFrcG9pbnRcclxuICogICAtPiBGb3IgZXhhbXBsZSwgaWYgd2Ugbm93IHdhbnQgdG8gcHVzaCBhIHBlYWsgdGhhdCdkIGJlIHRoZSAxNTB0aCBoaWdoZXN0IHZhbHVlLCB0aGVuIGJlc3QgaXQgY291bGQgZ2V0IGluXHJcbiAqICAgIGlzIHRvIGJlY29tZSB0aGUgMTQwdGggaGlnaGVzdCB2YWx1ZSAtPiBpdHMgdmFsdWUgbXVsdGlwbGllZCB3aXRoIHRoZSB3ZWlnaHQgMC45XjE0MCBzaG91bGQgYmVcclxuICogICAgZ3JlYXRlciB0aGFuIHNvbWUgcHJlY2lzaW9uIChsZXQncyBzYXkgMTBeLTYpLCBvdGhlcndpc2Ugd2UganVzdCBkb24ndCBwdXNoIGl0IHRvIHRoZSBwZWFrcy4gSW4gdGhlb3J5LCB3ZSBzaG91bGRcclxuICogICAganVzdCBiZSBtYWludGFpbmluZyBhYm91dCB+MTAwLTE1MCBwZWFrIHZhbHVlcyBkZXBlbmRpbmcgb24gdGhlIHJlcXVpcmVkIHByZWNpc2lvbiB3aGljaCBpcyBPKDEpIGNvbXBhcmVkIHRvIE8oRCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVEaWZmaWN1bHR5VmFsdWVzKGRpZmZzLCAvLyAtPiBvbmx5IHN0YXJ0VGltZSBpcyB1c2VkIGhlcmVcclxuc3RyYWlucywgeyBzZWN0aW9uRHVyYXRpb24sIHJlZHVjZWRTZWN0aW9uQ291bnQsIGRpZmZpY3VsdHlNdWx0aXBsaWVyLCBzdHJhaW5EZWNheSwgZGVjYXlXZWlnaHQgfSwgb25seUZpbmFsVmFsdWUpIHtcclxuICAgIGlmIChkaWZmcy5sZW5ndGggPT09IDApXHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgLy8gb3N1IWxhemVyIG5vdGU6IHNlY3Rpb25CZWdpbiA9IHNlY3Rpb25EdXJhdGlvbiBpZiB0IGlzIGRpdmlkYWJsZSBieSBzZWN0aW9uRHVyYXRpb24gKGJ1Zz8pXHJcbiAgICBjb25zdCBjYWxjU2VjdGlvbkJlZ2luID0gKHNlY3Rpb25EdXJhdGlvbiwgdCkgPT4gTWF0aC5mbG9vcih0IC8gc2VjdGlvbkR1cmF0aW9uKSAqIHNlY3Rpb25EdXJhdGlvbjtcclxuICAgIGNvbnN0IHBlYWtzID0gW107XHJcbiAgICBjb25zdCBkaWZmaWN1bHR5VmFsdWVzID0gW107XHJcbiAgICBsZXQgY3VycmVudFNlY3Rpb25CZWdpbiA9IGNhbGNTZWN0aW9uQmVnaW4oc2VjdGlvbkR1cmF0aW9uLCBkaWZmc1swXS5zdGFydFRpbWUpO1xyXG4gICAgbGV0IGN1cnJlbnRTZWN0aW9uUGVhayA9IDA7XHJcbiAgICBpZiAoIW9ubHlGaW5hbFZhbHVlKSB7XHJcbiAgICAgICAgLy8gRm9yIHRoZSBmaXJzdCBoaXRvYmplY3QgaXQgaXMgYWx3YXlzIDBcclxuICAgICAgICBkaWZmaWN1bHR5VmFsdWVzLnB1c2goMCk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGRpZmZzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgcHJldlN0YXJ0VGltZSA9IGRpZmZzW2kgLSAxXS5zdGFydFRpbWU7XHJcbiAgICAgICAgY29uc3QgY3VyclN0YXJ0VGltZSA9IGRpZmZzW2ldLnN0YXJ0VGltZTtcclxuICAgICAgICAvLyBMZXQncyBzZWUgaWYgd2UgY2FuIGNsb3NlIG9mZiB0aGUgb3RoZXIgc2VjdGlvbnNcclxuICAgICAgICB3aGlsZSAoY3VycmVudFNlY3Rpb25CZWdpbiArIHNlY3Rpb25EdXJhdGlvbiA8IGN1cnJTdGFydFRpbWUpIHtcclxuICAgICAgICAgICAgcGVha3MucHVzaChjdXJyZW50U2VjdGlvblBlYWspO1xyXG4gICAgICAgICAgICBjdXJyZW50U2VjdGlvbkJlZ2luICs9IHNlY3Rpb25EdXJhdGlvbjtcclxuICAgICAgICAgICAgY3VycmVudFNlY3Rpb25QZWFrID0gc3RyYWluc1tpIC0gMV0gKiBzdHJhaW5EZWNheShjdXJyZW50U2VjdGlvbkJlZ2luIC0gcHJldlN0YXJ0VGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vdyBjaGVjayBpZiB0aGUgY3VycmVudFNlY3Rpb25QZWFrIGNhbiBiZSBpbXByb3ZlZCB3aXRoIHRoZSBjdXJyZW50IGhpdCBvYmplY3QgaVxyXG4gICAgICAgIGN1cnJlbnRTZWN0aW9uUGVhayA9IE1hdGgubWF4KGN1cnJlbnRTZWN0aW9uUGVhaywgc3RyYWluc1tpXSk7XHJcbiAgICAgICAgaWYgKG9ubHlGaW5hbFZhbHVlICYmIGkgKyAxIDwgZGlmZnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBkbyBub3QgcHVzaCB0aGUgY3VycmVudFNlY3Rpb25QZWFrIHRvIHRoZSBwZWFrcyB5ZXQgYmVjYXVzZSBjdXJyZW50U2VjdGlvblBlYWsgaXMgc3RpbGwgaW4gYSBqZWxseSBzdGF0ZSBhbmRcclxuICAgICAgICAvLyBjYW4gYmUgaW1wcm92ZWQgYnkgdGhlIGZ1dHVyZSBoaXQgb2JqZWN0cyBpbiB0aGUgc2FtZSBzZWN0aW9uLlxyXG4gICAgICAgIGNvbnN0IHBlYWtzV2l0aEN1cnJlbnQgPSBbLi4ucGVha3MsIGN1cnJlbnRTZWN0aW9uUGVha107XHJcbiAgICAgICAgY29uc3QgZGVzY2VuZGluZyA9IChhLCBiKSA9PiBiIC0gYTtcclxuICAgICAgICBwZWFrc1dpdGhDdXJyZW50LnNvcnQoZGVzY2VuZGluZyk7XHJcbiAgICAgICAgLy8gVGhpcyBpcyBub3cgcGFydCBvZiBEaWZmaWN1bHR5VmFsdWUoKVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4ocGVha3NXaXRoQ3VycmVudC5sZW5ndGgsIHJlZHVjZWRTZWN0aW9uQ291bnQpOyBpKyspIHtcclxuICAgICAgICAgICAgLy8gU2NhbGUgbWlnaHQgYmUgcHJlY2FsY3VsYXRlZCBzaW5jZSBpdCB1c2VzIHNvbWUgZXhwZW5zaXZlIG9wZXJhdGlvbiAobG9nMTApXHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gTWF0aC5sb2cxMCgoMCwgaW5kZXhfMS5sZXJwKSgxLCAxMCwgKDAsIGluZGV4XzEuY2xhbXApKGkgLyByZWR1Y2VkU2VjdGlvbkNvdW50LCAwLCAxKSkpO1xyXG4gICAgICAgICAgICBwZWFrc1dpdGhDdXJyZW50W2ldICo9ICgwLCBpbmRleF8xLmxlcnApKFJFRFVDRURfU1RSQUlOX0JBU0VMSU5FLCAxLjAsIHNjYWxlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHdlaWdodCA9IDE7XHJcbiAgICAgICAgLy8gRGVjcmVhc2luZ2x5XHJcbiAgICAgICAgcGVha3NXaXRoQ3VycmVudC5zb3J0KGRlc2NlbmRpbmcpO1xyXG4gICAgICAgIGxldCBkaWZmaWN1bHR5VmFsdWUgPSAwO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGVhayBvZiBwZWFrc1dpdGhDdXJyZW50KSB7XHJcbiAgICAgICAgICAgIGRpZmZpY3VsdHlWYWx1ZSArPSBwZWFrICogd2VpZ2h0O1xyXG4gICAgICAgICAgICB3ZWlnaHQgKj0gZGVjYXlXZWlnaHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRpZmZpY3VsdHlWYWx1ZXMucHVzaChkaWZmaWN1bHR5VmFsdWUgKiBkaWZmaWN1bHR5TXVsdGlwbGllcik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGlmZmljdWx0eVZhbHVlcztcclxufVxyXG5leHBvcnRzLmNhbGN1bGF0ZURpZmZpY3VsdHlWYWx1ZXMgPSBjYWxjdWxhdGVEaWZmaWN1bHR5VmFsdWVzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLlZlYzIgPSB2b2lkIDA7XHJcbmNvbnN0IGZsb2F0MzJfMSA9IHJlcXVpcmUoXCIuL2Zsb2F0MzJcIik7XHJcbi8vIFRPRE86IFVzaW5nIDMyLWJpdCBmbG9hdCBhcyByZXR1cm4gcmVzdWx0IGV2ZXJ5d2hlcmU/XHJcbi8vIEZvciBleGFtcGxlIFZlY3RvcjIuTGVuZ3RoIGlzIHJldHVybmVkIGFzIGZsb2F0XHJcbmNsYXNzIFZlYzIge1xyXG4gICAgY29uc3RydWN0b3IoeCwgeSkge1xyXG4gICAgICAgIHRoaXMueCA9ICgwLCBmbG9hdDMyXzEuZmxvYXQzMikoeCk7XHJcbiAgICAgICAgdGhpcy55ID0gKDAsIGZsb2F0MzJfMS5mbG9hdDMyKSh5KTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgc2hvdWxkIGJlIHByZWZlcnJlZCBzaW5jZSBpdCBhdm9pZHMgdXNpbmcgc3FydFxyXG4gICAgLy8gVE9ETzogaG93ZXZlciB0aGlzIG1pZ2h0IGJlIFRPTyBwcmVjaXNlIHRoYXQgd2Ugd2lsbCBoYXZlIG1hdGNoaW5nIGlzc3VlIHdpdGggb3N1IWxhemVyXHJcbiAgICBzdGF0aWMgd2l0aGluRGlzdGFuY2UoYSwgYiwgZCkge1xyXG4gICAgICAgIHJldHVybiAoYS54IC0gYi54KSAqKiAyICsgKGEueSAtIGIueSkgKiogMiA8PSBkICoqIDI7XHJcbiAgICB9XHJcbiAgICAvLyByZXR1cm5zIGZsb2F0XHJcbiAgICBzdGF0aWMgZGlzdGFuY2UoYSwgYikge1xyXG4gICAgICAgIHJldHVybiBNYXRoLmZyb3VuZChNYXRoLnNxcnQoVmVjMi5kaXN0YW5jZVNxdWFyZWQoYSwgYikpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBkaXN0YW5jZVNxdWFyZWQoYSwgYikge1xyXG4gICAgICAgIGNvbnN0IGR4ID0gYS54IC0gYi54LCBkeSA9IGEueSAtIGIueTtcclxuICAgICAgICByZXR1cm4gZHggKiogMiArIGR5ICoqIDI7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZXF1YWwoYSwgYikge1xyXG4gICAgICAgIC8vIEkgY29tbWVudGVkIG91dCBteSBvcmlnaW5hbCBzb2x1dGlvbiBhbmQgcmVwbGFjZWQgaXQgd2l0aCBvc3UhZnJhbWV3b3JrIHZhcmlhbnQgKHdoaWNoIGlzIHZlcnkgc3RyaWN0KVxyXG4gICAgICAgIC8vIHJldHVybiBmbG9hdEVxdWFsKGEueCwgYi54KSAmJiBmbG9hdEVxdWFsKGEueSwgYi55KTtcclxuICAgICAgICByZXR1cm4gYS54ID09PSBiLnggJiYgYS55ID09PSBiLnk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYWRkKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoKDAsIGZsb2F0MzJfMS5mbG9hdDMyKShhLngpICsgKDAsIGZsb2F0MzJfMS5mbG9hdDMyKShiLngpLCAoMCwgZmxvYXQzMl8xLmZsb2F0MzIpKGEueSkgKyAoMCwgZmxvYXQzMl8xLmZsb2F0MzIpKGIueSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGRvdChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZnJvdW5kKGEueCAqIGIueCArIGEueSAqIGIueSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc3ViKGEsIGIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFZlYzIoKDAsIGZsb2F0MzJfMS5mbG9hdDMyKShhLngpIC0gKDAsIGZsb2F0MzJfMS5mbG9hdDMyKShiLngpLCAoMCwgZmxvYXQzMl8xLmZsb2F0MzIpKGEueSkgLSAoMCwgZmxvYXQzMl8xLmZsb2F0MzIpKGIueSkpO1xyXG4gICAgfVxyXG4gICAgLy8gYzogZmxvYXRcclxuICAgIHN0YXRpYyBzY2FsZShhLCBjKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWZWMyKCgwLCBmbG9hdDMyXzEuZmxvYXQzMl9tdWwpKGEueCwgYyksICgwLCBmbG9hdDMyXzEuZmxvYXQzMl9tdWwpKGEueSwgYykpO1xyXG4gICAgfVxyXG4gICAgLy8gYzogZmxvYXRcclxuICAgIHN0YXRpYyBkaXZpZGUoYSwgYykge1xyXG4gICAgICAgIHJldHVybiBuZXcgVmVjMigoMCwgZmxvYXQzMl8xLmZsb2F0MzJfZGl2KShhLngsIGMpLCAoMCwgZmxvYXQzMl8xLmZsb2F0MzJfZGl2KShhLnksIGMpKTtcclxuICAgIH1cclxuICAgIC8vIE9yZGVyIGlzIGltcG9ydGFudFxyXG4gICAgc3RhdGljIGludGVycG9sYXRlKGEsIGIsIHApIHtcclxuICAgICAgICByZXR1cm4gVmVjMi5hZGQoYSwgVmVjMi5zdWIoYiwgYSkuc2NhbGUocCkpO1xyXG4gICAgfVxyXG4gICAgYWRkKGIpIHtcclxuICAgICAgICByZXR1cm4gVmVjMi5hZGQodGhpcywgYik7XHJcbiAgICB9XHJcbiAgICBzdWIoYikge1xyXG4gICAgICAgIHJldHVybiBWZWMyLnN1Yih0aGlzLCBiKTtcclxuICAgIH1cclxuICAgIGRpdmlkZShjKSB7XHJcbiAgICAgICAgcmV0dXJuIFZlYzIuZGl2aWRlKHRoaXMsIGMpO1xyXG4gICAgfVxyXG4gICAgc2NhbGUoYykge1xyXG4gICAgICAgIHJldHVybiBWZWMyLnNjYWxlKHRoaXMsIGMpO1xyXG4gICAgfVxyXG4gICAgbGVuZ3RoU3F1YXJlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55O1xyXG4gICAgfVxyXG4gICAgbGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiAoMCwgZmxvYXQzMl8xLmZsb2F0MzIpKE1hdGguc3FydCh0aGlzLnggKiogMiArIHRoaXMueSAqKiAyKSk7XHJcbiAgICB9XHJcbiAgICBlcXVhbHMoYikge1xyXG4gICAgICAgIHJldHVybiBWZWMyLmVxdWFsKHRoaXMsIGIpO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplZCgpIHtcclxuICAgICAgICBjb25zdCBudW0gPSB0aGlzLmxlbmd0aCgpO1xyXG4gICAgICAgIHRoaXMueCA9ICgwLCBmbG9hdDMyXzEuZmxvYXQzMl9kaXYpKHRoaXMueCwgbnVtKTtcclxuICAgICAgICB0aGlzLnkgPSAoMCwgZmxvYXQzMl8xLmZsb2F0MzJfZGl2KSh0aGlzLnksIG51bSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuZXhwb3J0cy5WZWMyID0gVmVjMjtcclxuVmVjMi5aZXJvID0gbmV3IFZlYzIoMCwgMCk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMucmdiVG9JbnQgPSB2b2lkIDA7XHJcbmZ1bmN0aW9uIHJnYlRvSW50KHJnYikge1xyXG4gICAgaWYgKHJnYi5sZW5ndGggPCAzKSB7XHJcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJOb3QgYXQgbGVhc3QgdGhyZWUgdmFsdWVzIHByb3ZpZGVkXCIpO1xyXG4gICAgfVxyXG4gICAgbGV0IHZhbCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgIHZhbCA9IHZhbCAqIDI1NiArIHJnYltpXTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWw7XHJcbn1cclxuZXhwb3J0cy5yZ2JUb0ludCA9IHJnYlRvSW50O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLm92ZXJhbGxEaWZmaWN1bHR5VG9IaXRXaW5kb3dHcmVhdCA9IGV4cG9ydHMuaGl0V2luZG93c0Zvck9EID0gZXhwb3J0cy5oaXRXaW5kb3dHcmVhdFRvT0QgPSBleHBvcnRzLmRpZmZpY3VsdHlSYW5nZUZvck9kID0gZXhwb3J0cy5nZXRGYWRlSW5EdXJhdGlvbiA9IGV4cG9ydHMuYXBwcm9hY2hEdXJhdGlvblRvQXBwcm9hY2hSYXRlID0gZXhwb3J0cy5hcHByb2FjaFJhdGVUb0FwcHJvYWNoRHVyYXRpb24gPSBleHBvcnRzLmRpZmZpY3VsdHlSYW5nZSA9IGV4cG9ydHMuY2lyY2xlU2l6ZVRvU2NhbGUgPSB2b2lkIDA7XHJcbi8qKlxyXG4gKiBDb252ZXJ0cyB0aGUgY2lyY2xlIHNpemUgdG8gYSBub3JtYWxpemVkIHNjYWxpbmcgdmFsdWUuXHJcbiAqIEBwYXJhbSBDUyB0aGUgY2lyY2xlIHNpemUgdmFsdWVcclxuICovXHJcbmNvbnN0IGZsb2F0MzJfMSA9IHJlcXVpcmUoXCIuL2Zsb2F0MzJcIik7XHJcbmZ1bmN0aW9uIGNpcmNsZVNpemVUb1NjYWxlKENTKSB7XHJcbiAgICByZXR1cm4gKDAsIGZsb2F0MzJfMS5mbG9hdDMyKSgoMS4wIC0gKDAuNyAqIChDUyAtIDUpKSAvIDUpIC8gMik7XHJcbn1cclxuZXhwb3J0cy5jaXJjbGVTaXplVG9TY2FsZSA9IGNpcmNsZVNpemVUb1NjYWxlO1xyXG4vLyBKdXN0IGEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgaXMgY29tbW9ubHkgdXNlZCBmb3IgT0QsIEFSIGNhbGN1bGF0aW9uXHJcbmZ1bmN0aW9uIGRpZmZpY3VsdHlSYW5nZShkaWZmaWN1bHR5LCBtaW4sIG1pZCwgbWF4KSB7XHJcbiAgICBpZiAoZGlmZmljdWx0eSA+IDUuMClcclxuICAgICAgICByZXR1cm4gbWlkICsgKChtYXggLSBtaWQpICogKGRpZmZpY3VsdHkgLSA1LjApKSAvIDUuMDtcclxuICAgIHJldHVybiBkaWZmaWN1bHR5IDwgNS4wID8gbWlkIC0gKChtaWQgLSBtaW4pICogKDUuMCAtIGRpZmZpY3VsdHkpKSAvIDUuMCA6IG1pZDtcclxufVxyXG5leHBvcnRzLmRpZmZpY3VsdHlSYW5nZSA9IGRpZmZpY3VsdHlSYW5nZTtcclxuLy8gTWluaW11bSBwcmVlbXB0IHRpbWUgYXQgQVI9MTBcclxuY29uc3QgUFJFRU1QVF9NSU4gPSA0NTA7XHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRoZSBhcHByb2FjaCBkdXJhdGlvbiBkZXBlbmRpbmcgb24gdGhlIGFic3RyYWN0IEFSIHZhbHVlLlxyXG4gKiBAcGFyYW0gQVIgdGhlIGFwcHJvYWNoIHJhdGUgdmFsdWVcclxuICovXHJcbmZ1bmN0aW9uIGFwcHJvYWNoUmF0ZVRvQXBwcm9hY2hEdXJhdGlvbihBUikge1xyXG4gICAgcmV0dXJuIGRpZmZpY3VsdHlSYW5nZShBUiwgMTgwMCwgMTIwMCwgUFJFRU1QVF9NSU4pO1xyXG59XHJcbmV4cG9ydHMuYXBwcm9hY2hSYXRlVG9BcHByb2FjaER1cmF0aW9uID0gYXBwcm9hY2hSYXRlVG9BcHByb2FjaER1cmF0aW9uO1xyXG5mdW5jdGlvbiBhcHByb2FjaER1cmF0aW9uVG9BcHByb2FjaFJhdGUoYXBwcm9hY2hEdXJhdGlvbkluTXMpIHtcclxuICAgIHJldHVybiBhcHByb2FjaER1cmF0aW9uSW5NcyA+IDEyMDAgPyAoMTgwMCAtIGFwcHJvYWNoRHVyYXRpb25Jbk1zKSAvIDEyMCA6ICgxMjAwIC0gYXBwcm9hY2hEdXJhdGlvbkluTXMpIC8gMTUwICsgNTtcclxufVxyXG5leHBvcnRzLmFwcHJvYWNoRHVyYXRpb25Ub0FwcHJvYWNoUmF0ZSA9IGFwcHJvYWNoRHVyYXRpb25Ub0FwcHJvYWNoUmF0ZTtcclxuZnVuY3Rpb24gZ2V0RmFkZUluRHVyYXRpb24oQVIpIHtcclxuICAgIGNvbnN0IFRpbWVQcmVlbXB0ID0gYXBwcm9hY2hSYXRlVG9BcHByb2FjaER1cmF0aW9uKEFSKTtcclxuICAgIHJldHVybiA0MDAgKiBNYXRoLm1pbigxLCBUaW1lUHJlZW1wdCAvIFBSRUVNUFRfTUlOKTtcclxufVxyXG5leHBvcnRzLmdldEZhZGVJbkR1cmF0aW9uID0gZ2V0RmFkZUluRHVyYXRpb247XHJcbmZ1bmN0aW9uIGRpZmZpY3VsdHlSYW5nZUZvck9kKGRpZmZpY3VsdHksIHJhbmdlKSB7XHJcbiAgICByZXR1cm4gZGlmZmljdWx0eVJhbmdlKGRpZmZpY3VsdHksIHJhbmdlLm9kMCwgcmFuZ2Uub2Q1LCByYW5nZS5vZDEwKTtcclxufVxyXG5leHBvcnRzLmRpZmZpY3VsdHlSYW5nZUZvck9kID0gZGlmZmljdWx0eVJhbmdlRm9yT2Q7XHJcbmZ1bmN0aW9uIGhpdFdpbmRvd0dyZWF0VG9PRChoaXRXaW5kb3dHcmVhdCkge1xyXG4gICAgcmV0dXJuICg4MCAtIGhpdFdpbmRvd0dyZWF0KSAvIDY7XHJcbn1cclxuZXhwb3J0cy5oaXRXaW5kb3dHcmVhdFRvT0QgPSBoaXRXaW5kb3dHcmVhdFRvT0Q7XHJcbmNvbnN0IE9TVV9TVERfSElUX1dJTkRPV19SQU5HRVMgPSBbXHJcbiAgICBbODAsIDUwLCAyMF0sXHJcbiAgICBbMTQwLCAxMDAsIDYwXSxcclxuICAgIFsyMDAsIDE1MCwgMTAwXSxcclxuICAgIFs0MDAsIDQwMCwgNDAwXSwgLy8gTWlzc1xyXG5dO1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgaGl0IHdpbmRvd3MgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjpcclxuICogW0hpdDMwMCwgSGl0MTAwLCBIaXQ1MCwgSGl0TWlzc11cclxuICogQHBhcmFtIG92ZXJhbGxEaWZmaWN1bHR5XHJcbiAqIEBwYXJhbSBsYXplclN0eWxlXHJcbiAqL1xyXG5mdW5jdGlvbiBoaXRXaW5kb3dzRm9yT0Qob3ZlcmFsbERpZmZpY3VsdHksIGxhemVyU3R5bGUpIHtcclxuICAgIGZ1bmN0aW9uIGxhemVySGl0V2luZG93c0Zvck9EKG9kKSB7XHJcbiAgICAgICAgcmV0dXJuIE9TVV9TVERfSElUX1dJTkRPV19SQU5HRVMubWFwKChbb2QwLCBvZDUsIG9kMTBdKSA9PiBkaWZmaWN1bHR5UmFuZ2Uob2QsIG9kMCwgb2Q1LCBvZDEwKSk7XHJcbiAgICB9XHJcbiAgICAvLyBTaG9ydCBleHBsYW5hdGlvbjogY3VycmVudGx5IGluIGxhemVyIHRoZSBoaXQgd2luZG93cyBhcmUgYWN0dWFsbHkgKzFtcyBiaWdnZXIgZHVlIHRvIHRoZW0gdXNpbmcgdGhlIExURSA8PVxyXG4gICAgLy8gb3BlcmF0b3IgaW5zdGVhZCBvZiBMVCA8ICA8PSBpbnN0ZWFkIG9mIDwgY2hlY2suXHJcbiAgICBpZiAobGF6ZXJTdHlsZSkge1xyXG4gICAgICAgIHJldHVybiBsYXplckhpdFdpbmRvd3NGb3JPRChvdmVyYWxsRGlmZmljdWx0eSk7XHJcbiAgICB9XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcHB5L29zdS9pc3N1ZXMvMTEzMTFcclxuICAgIHJldHVybiBsYXplckhpdFdpbmRvd3NGb3JPRChvdmVyYWxsRGlmZmljdWx0eSkubWFwKCh3KSA9PiB3IC0gMSk7XHJcbn1cclxuZXhwb3J0cy5oaXRXaW5kb3dzRm9yT0QgPSBoaXRXaW5kb3dzRm9yT0Q7XHJcbi8vIExhemVyIHN0eWxlXHJcbmZ1bmN0aW9uIG92ZXJhbGxEaWZmaWN1bHR5VG9IaXRXaW5kb3dHcmVhdChvZCkge1xyXG4gICAgY29uc3QgW29kMCwgb2Q1LCBvZDEwXSA9IE9TVV9TVERfSElUX1dJTkRPV19SQU5HRVNbMF07XHJcbiAgICByZXR1cm4gZGlmZmljdWx0eVJhbmdlKG9kLCBvZDAsIG9kNSwgb2QxMCk7XHJcbn1cclxuZXhwb3J0cy5vdmVyYWxsRGlmZmljdWx0eVRvSGl0V2luZG93R3JlYXQgPSBvdmVyYWxsRGlmZmljdWx0eVRvSGl0V2luZG93R3JlYXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMubGVycCA9IGV4cG9ydHMuYXBwbHlJbnRlcnBvbGF0aW9uID0gZXhwb3J0cy5hcHBseUVhc2luZyA9IGV4cG9ydHMuRWFzaW5nID0gdm9pZCAwO1xyXG4vLyBodHRwczovL2dpdGh1Yi5jb20vcHB5L29zdS1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvb3N1LkZyYW1ld29yay9HcmFwaGljcy9UcmFuc2Zvcm1zL0RlZmF1bHRFYXNpbmdGdW5jdGlvbi5jc1xyXG52YXIgRWFzaW5nO1xyXG4oZnVuY3Rpb24gKEVhc2luZykge1xyXG4gICAgRWFzaW5nW0Vhc2luZ1tcIkxJTkVBUlwiXSA9IDBdID0gXCJMSU5FQVJcIjtcclxuICAgIEVhc2luZ1tFYXNpbmdbXCJPVVRcIl0gPSAxXSA9IFwiT1VUXCI7XHJcbiAgICBFYXNpbmdbRWFzaW5nW1wiT1VUX1FVSU5UXCJdID0gMl0gPSBcIk9VVF9RVUlOVFwiO1xyXG4gICAgRWFzaW5nW0Vhc2luZ1tcIk9VVF9FTEFTVElDXCJdID0gM10gPSBcIk9VVF9FTEFTVElDXCI7XHJcbiAgICBFYXNpbmdbRWFzaW5nW1wiSU5fQ1VCSUNcIl0gPSA0XSA9IFwiSU5fQ1VCSUNcIjtcclxufSkoRWFzaW5nID0gZXhwb3J0cy5FYXNpbmcgfHwgKGV4cG9ydHMuRWFzaW5nID0ge30pKTtcclxuY29uc3QgZWxhc3RpY19jb25zdCA9ICgyICogTWF0aC5QSSkgLyAwLjM7XHJcbmNvbnN0IGVsYXN0aWNfY29uc3QyID0gMC4zIC8gNDtcclxuY29uc3QgYmFja19jb25zdCA9IDEuNzAxNTg7XHJcbmNvbnN0IGJhY2tfY29uc3QyID0gYmFja19jb25zdCAqIDEuNTI1O1xyXG5jb25zdCBib3VuY2VfY29uc3QgPSAxIC8gMi43NTtcclxuLy8gY29uc3RhbnRzIHVzZWQgdG8gZml4IGV4cG8gYW5kIGVsYXN0aWMgY3VydmVzIHRvIHN0YXJ0L2VuZCBhdCAwLzFcclxuY29uc3QgZXhwb19vZmZzZXQgPSBNYXRoLnBvdygyLCAtMTApO1xyXG5jb25zdCBlbGFzdGljX29mZnNldF9mdWxsID0gTWF0aC5wb3coMiwgLTExKTtcclxuY29uc3QgZWxhc3RpY19vZmZzZXRfaGFsZiA9IE1hdGgucG93KDIsIC0xMCkgKiBNYXRoLnNpbigoMC41IC0gZWxhc3RpY19jb25zdDIpICogZWxhc3RpY19jb25zdCk7XHJcbmNvbnN0IGVsYXN0aWNfb2Zmc2V0X3F1YXJ0ZXIgPSBNYXRoLnBvdygyLCAtMTApICogTWF0aC5zaW4oKDAuMjUgLSBlbGFzdGljX2NvbnN0MikgKiBlbGFzdGljX2NvbnN0KTtcclxuY29uc3QgaW5fb3V0X2VsYXN0aWNfb2Zmc2V0ID0gTWF0aC5wb3coMiwgLTEwKSAqIE1hdGguc2luKCgoMSAtIGVsYXN0aWNfY29uc3QyICogMS41KSAqIGVsYXN0aWNfY29uc3QpIC8gMS41KTtcclxuZnVuY3Rpb24gYXBwbHlFYXNpbmcodCwgZWFzaW5nKSB7XHJcbiAgICBzd2l0Y2ggKGVhc2luZykge1xyXG4gICAgICAgIGNhc2UgRWFzaW5nLkxJTkVBUjpcclxuICAgICAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICAgICAgY2FzZSBFYXNpbmcuT1VUOlxyXG4gICAgICAgICAgICByZXR1cm4gdCAqICgyIC0gdCk7XHJcbiAgICAgICAgY2FzZSBFYXNpbmcuT1VUX1FVSU5UOlxyXG4gICAgICAgICAgICByZXR1cm4gLS10ICogdCAqIHQgKiB0ICogdCArIDE7XHJcbiAgICAgICAgY2FzZSBFYXNpbmcuT1VUX0VMQVNUSUM6XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnBvdygyLCAtMTAgKiB0KSAqIE1hdGguc2luKCh0IC0gZWxhc3RpY19jb25zdDIpICogZWxhc3RpY19jb25zdCkgKyAxIC0gZWxhc3RpY19vZmZzZXRfZnVsbCAqIHQ7XHJcbiAgICAgICAgY2FzZSBFYXNpbmcuSU5fQ1VCSUM6XHJcbiAgICAgICAgICAgIHJldHVybiB0ICogdCAqIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5leHBvcnRzLmFwcGx5RWFzaW5nID0gYXBwbHlFYXNpbmc7XHJcbmZ1bmN0aW9uIGFwcGx5SW50ZXJwb2xhdGlvbih0aW1lLCBzdGFydFRpbWUsIGVuZFRpbWUsIHZhbEEsIHZhbEIsIGVhc2luZyA9IEVhc2luZy5MSU5FQVIpIHtcclxuICAgIC8vIE9yIGZsb2F0RXF1YWwgLi4uXHJcbiAgICBpZiAoc3RhcnRUaW1lID49IGVuZFRpbWUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwic3RhcnRUaW1lIHNob3VsZCBiZSBsZXNzIHRoYW4gZW5kVGltZVwiKTtcclxuICAgICAgICByZXR1cm4gdmFsQTsgLy8gb3IgdGhyb3cgRXJyb3I/XHJcbiAgICB9XHJcbiAgICBjb25zdCBwID0gYXBwbHlFYXNpbmcoKHRpbWUgLSBzdGFydFRpbWUpIC8gKGVuZFRpbWUgLSBzdGFydFRpbWUpLCBlYXNpbmcpO1xyXG4gICAgcmV0dXJuICh2YWxCIC0gdmFsQSkgKiBwICsgdmFsQTtcclxufVxyXG5leHBvcnRzLmFwcGx5SW50ZXJwb2xhdGlvbiA9IGFwcGx5SW50ZXJwb2xhdGlvbjtcclxuLyoqXHJcbiAqIExpbmVhciBpbnRlcnBvbGF0aW9uXHJcbiAqIEBwYXJhbSBzdGFydCBzdGFydCB2YWx1ZVxyXG4gKiBAcGFyYW0gZmluYWwgZmluYWwgdmFsdWVcclxuICogQHBhcmFtIGFtb3VudCBudW1iZXIgYmV0d2VlbiAwIGFuZCAxXHJcbiAqL1xyXG5mdW5jdGlvbiBsZXJwKHN0YXJ0LCBmaW5hbCwgYW1vdW50KSB7XHJcbiAgICByZXR1cm4gc3RhcnQgKyAoZmluYWwgLSBzdGFydCkgKiBhbW91bnQ7XHJcbn1cclxuZXhwb3J0cy5sZXJwID0gbGVycDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5mbG9hdDMyX3NxcnQgPSBleHBvcnRzLmZsb2F0MzJfZGl2ID0gZXhwb3J0cy5mbG9hdDMyX211bCA9IGV4cG9ydHMuZmxvYXQzMl9hZGQgPSBleHBvcnRzLmZsb2F0MzIgPSB2b2lkIDA7XHJcbmZ1bmN0aW9uIGZsb2F0MzIoYSkge1xyXG4gICAgcmV0dXJuIE1hdGguZnJvdW5kKGEpO1xyXG59XHJcbmV4cG9ydHMuZmxvYXQzMiA9IGZsb2F0MzI7XHJcbmZ1bmN0aW9uIGZsb2F0MzJfYWRkKGEsIGIpIHtcclxuICAgIHJldHVybiBmbG9hdDMyKGZsb2F0MzIoYSkgKyBmbG9hdDMyKGIpKTtcclxufVxyXG5leHBvcnRzLmZsb2F0MzJfYWRkID0gZmxvYXQzMl9hZGQ7XHJcbmZ1bmN0aW9uIGZsb2F0MzJfbXVsKGEsIGIpIHtcclxuICAgIHJldHVybiBmbG9hdDMyKGZsb2F0MzIoYSkgKiBmbG9hdDMyKGIpKTtcclxufVxyXG5leHBvcnRzLmZsb2F0MzJfbXVsID0gZmxvYXQzMl9tdWw7XHJcbmZ1bmN0aW9uIGZsb2F0MzJfZGl2KGEsIGIpIHtcclxuICAgIHJldHVybiBmbG9hdDMyKGZsb2F0MzIoYSkgLyBmbG9hdDMyKGIpKTtcclxufVxyXG5leHBvcnRzLmZsb2F0MzJfZGl2ID0gZmxvYXQzMl9kaXY7XHJcbmZ1bmN0aW9uIGZsb2F0MzJfc3FydChhKSB7XHJcbiAgICByZXR1cm4gZmxvYXQzMihNYXRoLnNxcnQoZmxvYXQzMihhKSkpO1xyXG59XHJcbmV4cG9ydHMuZmxvYXQzMl9zcXJ0ID0gZmxvYXQzMl9zcXJ0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcclxuICAgIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XHJcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSkpO1xyXG52YXIgX19leHBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2V4cG9ydFN0YXIpIHx8IGZ1bmN0aW9uKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcclxufTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vY29sb3JzXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2RpZmZpY3VsdHlcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vZWFzaW5nXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3RpbWVcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vdXRpbHNcIiksIGV4cG9ydHMpO1xyXG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vc2xpZGVyc1wiKSwgZXhwb3J0cyk7XHJcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9WZWMyXCIpLCBleHBvcnRzKTtcclxuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2Zsb2F0MzJcIiksIGV4cG9ydHMpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLnNsaWRlclJlcGVhdEFuZ2xlID0gdm9pZCAwO1xyXG5jb25zdCBWZWMyXzEgPSByZXF1aXJlKFwiLi9WZWMyXCIpO1xyXG4vLyBUT0RPOiBNYXliZSBtb3ZlIHRoaXMgdG8gb3N1L01hdGhcclxuLy8gTWF5YmUgdGhpcyBpcyBzbG93IGJlY2F1c2Ugb2YgYXRhbjIoKSBjYWxjdWxhdGlvblxyXG5mdW5jdGlvbiBzbGlkZXJSZXBlYXRBbmdsZShjdXJ2ZSwgaXNSZXBlYXRBdEVuZCkge1xyXG4gICAgaWYgKGN1cnZlLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICByZXR1cm4gMC4wO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc2VhcmNoU3RhcnQgPSBpc1JlcGVhdEF0RW5kID8gY3VydmUubGVuZ3RoIC0gMSA6IDA7XHJcbiAgICBjb25zdCBzZWFyY2hEaXIgPSBpc1JlcGVhdEF0RW5kID8gLTEgOiArMTtcclxuICAgIC8vIEkgdGhpbmsgdGhlIHNwZWNpYWwgY2FzZSBoYXBwZW5pbmcgaW4gRHJhd2FibGVSZXBlYXRTbGlkZXIgb25seSBvY2N1cnMgYXQgc25ha2luZyAod2hpY2ggd2UgZG9uJ3QgaGF2ZSByaWdodFxyXG4gICAgLy8gbm93KS5cclxuICAgIC8vIFNvIFRPRE86IGltcGxlbWVudCBzZWFyY2hpbmcgZm9yIHR3byB1bmlxdWUgcG9pbnRzIHdoZW4gd2UgZG8gc25ha2luZ1xyXG4gICAgY29uc3QgcDEgPSBjdXJ2ZVtzZWFyY2hTdGFydF07XHJcbiAgICBjb25zdCBwMiA9IGN1cnZlW3NlYXJjaFN0YXJ0ICsgc2VhcmNoRGlyXTtcclxuICAgIGNvbnN0IGRpcmVjdGlvbiA9IFZlYzJfMS5WZWMyLnN1YihwMiwgcDEpO1xyXG4gICAgcmV0dXJuIE1hdGguYXRhbjIoZGlyZWN0aW9uLnksIGRpcmVjdGlvbi54KTtcclxufVxyXG5leHBvcnRzLnNsaWRlclJlcGVhdEFuZ2xlID0gc2xpZGVyUmVwZWF0QW5nbGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuYmVhdExlbmd0aFRvQlBNID0gZXhwb3J0cy5mb3JtYXRHYW1lVGltZSA9IGV4cG9ydHMucGFyc2VNcyA9IGV4cG9ydHMuYWRkWmVybyA9IHZvaWQgMDtcclxuZnVuY3Rpb24gYWRkWmVybyh2YWx1ZSwgZGlnaXRzID0gMikge1xyXG4gICAgY29uc3QgaXNOZWdhdGl2ZSA9IE51bWJlcih2YWx1ZSkgPCAwO1xyXG4gICAgbGV0IGJ1ZmZlciA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgICBsZXQgc2l6ZSA9IDA7XHJcbiAgICAvLyBTdHJpcCBtaW51cyBzaWduIGlmIG51bWJlciBpcyBuZWdhdGl2ZVxyXG4gICAgaWYgKGlzTmVnYXRpdmUpIHtcclxuICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICBzaXplID0gZGlnaXRzIC0gYnVmZmVyLmxlbmd0aCArIDE7XHJcbiAgICBidWZmZXIgPSBuZXcgQXJyYXkoc2l6ZSkuam9pbihcIjBcIikuY29uY2F0KGJ1ZmZlcik7XHJcbiAgICAvLyBBZGRzIGJhY2sgbWludXMgc2lnbiBpZiBuZWVkZWRcclxuICAgIHJldHVybiAoaXNOZWdhdGl2ZSA/IFwiLVwiIDogXCJcIikgKyBidWZmZXI7XHJcbn1cclxuZXhwb3J0cy5hZGRaZXJvID0gYWRkWmVybztcclxuLy8gY291cnRlc3kgdG8gcGFyc2UtbXNcclxuZnVuY3Rpb24gcGFyc2VNcyhtaWxsaXNlY29uZHMpIHtcclxuICAgIGNvbnN0IHJvdW5kVG93YXJkc1plcm8gPSBtaWxsaXNlY29uZHMgPiAwID8gTWF0aC5mbG9vciA6IE1hdGguY2VpbDtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF5czogcm91bmRUb3dhcmRzWmVybyhtaWxsaXNlY29uZHMgLyA4NjQwMDAwMCksXHJcbiAgICAgICAgaG91cnM6IHJvdW5kVG93YXJkc1plcm8obWlsbGlzZWNvbmRzIC8gMzYwMDAwMCkgJSAyNCxcclxuICAgICAgICBtaW51dGVzOiByb3VuZFRvd2FyZHNaZXJvKG1pbGxpc2Vjb25kcyAvIDYwMDAwKSAlIDYwLFxyXG4gICAgICAgIHNlY29uZHM6IHJvdW5kVG93YXJkc1plcm8obWlsbGlzZWNvbmRzIC8gMTAwMCkgJSA2MCxcclxuICAgICAgICBtaWxsaXNlY29uZHM6IHJvdW5kVG93YXJkc1plcm8obWlsbGlzZWNvbmRzKSAlIDEwMDAsXHJcbiAgICAgICAgbWljcm9zZWNvbmRzOiByb3VuZFRvd2FyZHNaZXJvKG1pbGxpc2Vjb25kcyAqIDEwMDApICUgMTAwMCxcclxuICAgICAgICBuYW5vc2Vjb25kczogcm91bmRUb3dhcmRzWmVybyhtaWxsaXNlY29uZHMgKiAxZTYpICUgMTAwMCxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5wYXJzZU1zID0gcGFyc2VNcztcclxuZnVuY3Rpb24gZm9ybWF0R2FtZVRpbWUodGltZUluTXMsIHdpdGhNcykge1xyXG4gICAgLy8gbmV3IERhdGUodGltZUluTXMpIGFjdHVhbGx5IGNvbnNpZGVycyB0aW1lem9uZVxyXG4gICAgY29uc3QgeyBob3Vycywgc2Vjb25kcywgbWludXRlcywgbWlsbGlzZWNvbmRzIH0gPSBwYXJzZU1zKHRpbWVJbk1zKTtcclxuICAgIGxldCBzID0gaG91cnMgPiAwID8gYCR7aG91cnN9OmAgOiBcIlwiO1xyXG4gICAgcyA9IHMgKyAoaG91cnMgPiAwID8gYWRkWmVybyhtaW51dGVzKSA6IG1pbnV0ZXMpICsgXCI6XCI7XHJcbiAgICBzID0gcyArIGFkZFplcm8oc2Vjb25kcyk7XHJcbiAgICByZXR1cm4gd2l0aE1zID8gcyArIFwiLlwiICsgYWRkWmVybyhtaWxsaXNlY29uZHMsIDMpIDogcztcclxufVxyXG5leHBvcnRzLmZvcm1hdEdhbWVUaW1lID0gZm9ybWF0R2FtZVRpbWU7XHJcbmZ1bmN0aW9uIGJlYXRMZW5ndGhUb0JQTShiZWF0TGVuZ3RoKSB7XHJcbiAgICByZXR1cm4gNjAgKiAxMDAwIC8gYmVhdExlbmd0aDtcclxufVxyXG5leHBvcnRzLmJlYXRMZW5ndGhUb0JQTSA9IGJlYXRMZW5ndGhUb0JQTTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZXhwb3J0cy5jbGFtcCA9IGV4cG9ydHMuZG91YmxlRXF1YWwgPSBleHBvcnRzLmZsb2F0RXF1YWwgPSBleHBvcnRzLmFwcHJveGltYXRlbHlFcXVhbCA9IHZvaWQgMDtcclxuZnVuY3Rpb24gYXBwcm94aW1hdGVseUVxdWFsKHgsIHksIGRlbHRhKSB7XHJcbiAgICByZXR1cm4gTWF0aC5hYnMoeCAtIHkpIDwgZGVsdGE7XHJcbn1cclxuZXhwb3J0cy5hcHByb3hpbWF0ZWx5RXF1YWwgPSBhcHByb3hpbWF0ZWx5RXF1YWw7XHJcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wcHkvb3N1LWZyYW1ld29yay9ibG9iLzEwNWExN2JjOTljYWQyNTFmYTczMGI1NGM2MTVkMmIwZDlhNDA5ZDMvb3N1LkZyYW1ld29yay9VdGlscy9QcmVjaXNpb24uY3NcclxuY29uc3QgRkxPQVRfRVBTID0gMWUtMztcclxuZnVuY3Rpb24gZmxvYXRFcXVhbCh2YWx1ZTEsIHZhbHVlMikge1xyXG4gICAgcmV0dXJuIGFwcHJveGltYXRlbHlFcXVhbCh2YWx1ZTEsIHZhbHVlMiwgRkxPQVRfRVBTKTtcclxufVxyXG5leHBvcnRzLmZsb2F0RXF1YWwgPSBmbG9hdEVxdWFsO1xyXG5jb25zdCBET1VCTEVfRVBTID0gMWUtNztcclxuLy8gVXNlZCBpbiBjZXJ0YWluIGNhc2VzIHdoZW4geCBhbmQgeSBhcmUgYGRvdWJsZWBzXHJcbmZ1bmN0aW9uIGRvdWJsZUVxdWFsKHgsIHkpIHtcclxuICAgIHJldHVybiBhcHByb3hpbWF0ZWx5RXF1YWwoeCwgeSwgRE9VQkxFX0VQUyk7XHJcbn1cclxuZXhwb3J0cy5kb3VibGVFcXVhbCA9IGRvdWJsZUVxdWFsO1xyXG5mdW5jdGlvbiBjbGFtcCh2YWx1ZSwgbWluLCBtYXgpIHtcclxuICAgIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKHZhbHVlLCBtYXgpKTtcclxufVxyXG5leHBvcnRzLmNsYW1wID0gY2xhbXA7XHJcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9pbmRleC50c1wiKTtcbiIsIiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==","import { selectSkin, round, getDiffColor } from \"./Utils.js\";\r\nimport { closePopup } from \"./Timestamp.js\";\r\nimport { Beatmap } from \"./Beatmap.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\nimport { HitSample, PAudio } from \"./Audio.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport osuPerformance from \"../lib/osujs.js\";\r\nimport * as d3 from \"d3\";\r\nimport { Background } from \"./Background.js\";\r\nimport { Storyboard } from \"./Storyboard/Storyboard.js\";\r\n\r\n// OPEN/CLOSE SETTINGS\r\nexport function openMenu() {\r\n\t// console.log(ele);\r\n\tconst settingsPanel = document.querySelector(\"#settingsPanel\");\r\n\tconst block = document.querySelector(\"#block\");\r\n\r\n\tif (settingsPanel.style.left === \"\") {\r\n\t\tsettingsPanel.classList.add(\"opened\");\r\n\t} else {\r\n\t\tsettingsPanel.classList.remove(\"opened\");\r\n\t}\r\n\r\n\tsettingsPanel.style.left = settingsPanel.style.left === \"\" ? \"0px\" : \"\";\r\n\tsettingsPanel.style.opacity = settingsPanel.style.opacity === \"\" ? \"1\" : \"\";\r\n\r\n\tblock.style.display = settingsPanel.style.opacity === \"1\" ? \"block\" : \"\";\r\n\r\n\tsetTimeout(() => {\r\n\t\tblock.style.opacity = settingsPanel.style.opacity === \"1\" ? 0.5 : \"\";\r\n\t}, 0);\r\n}\r\ndocument.querySelector(\"#settingsButton\").onclick = openMenu;\r\n\r\ndocument.body.addEventListener(\"click\", (e) => {\r\n\tconst settingsPanelIsClick = document\r\n\t\t.querySelector(\"#settingsPanel\")\r\n\t\t.contains(e.target);\r\n\r\n\tif (!document.querySelector(\"#settingsButton\").contains(e.target)) {\r\n\t\tif (!settingsPanelIsClick) {\r\n\t\t\tsettingsPanel.style.left = \"\";\r\n\t\t\tsettingsPanel.style.opacity = \"\";\r\n\t\t\tsettingsPanel.classList.remove(\"opened\");\r\n\t\t\tblock.style.opacity = settingsPanel.style.opacity === \"1\" ? 0.5 : \"\";\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tblock.style.display =\r\n\t\t\t\t\tsettingsPanel.style.opacity === \"1\" ? \"block\" : \"\";\r\n\t\t\t}, 200);\r\n\t\t}\r\n\t}\r\n});\r\n\r\n// MIRROR\r\ndocument.body.addEventListener(\"change\", (e) => {\r\n\tconst target = e.target;\r\n\tif (!target.checked) return;\r\n\r\n\tif ([\"nerinyan\", \"custom\", \"sayobot\", \"chimu\"].includes(target.value)) {\r\n\t\tdocument.querySelector(`[data-mirror]`).style.display = \"block\";\r\n\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.mirror.val = target.value;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tdocument.querySelector(\".mirrorIndicator\").textContent =\r\n\t\t\t`Too slow? Switch to another mirror (currently using: ${\r\n\t\t\t\ttarget.value === \"custom\"\r\n\t\t\t\t\t? \"Custom\"\r\n\t\t\t\t\t: document.querySelector(`[for=${target.value}]`).textContent\r\n\t\t\t})`;\r\n\r\n\t\tif (target.value === \"custom\") return;\r\n\t\tdocument.querySelector(`[data-mirror=${target.value}]`).style.display =\r\n\t\t\t\"none\";\r\n\t}\r\n\r\n\t// if ([\"webgpu\", \"webgl\", \"auto\"].includes(target.value)) {\r\n\t//     const currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t//     currentLocalStorage.renderer.val = target.value;\r\n\t//     localStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t//     location.reload();\r\n\t// }\r\n});\r\n\r\n[...document.querySelectorAll(\"[data-mirror]\")].forEach((ele) => {\r\n\tele.onclick = () => {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.mirror.val = ele.dataset.mirror;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tlocation.reload();\r\n\t};\r\n});\r\n\r\nexport function setCustomMirror(input) {\r\n\t// console.log(input.value);\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.mirror.custom = input.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n}\r\ndocument.querySelector(\"#custom-mirror\").onblur = () =>\r\n\tsetCustomMirror(document.querySelector(\"#custom-mirror\"));\r\n\r\nexport function setResolution(slider) {\r\n\tdocument.querySelector(\"#resolutionVal\").innerHTML = parseFloat(\r\n\t\tslider.value,\r\n\t).toFixed(2);\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.renderer.resolution = parseFloat(slider.value);\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tGame.RESOLUTION = parseFloat(slider.value);\r\n}\r\ndocument.querySelector(\"#resolution\").oninput = () =>\r\n\tsetResolution(document.querySelector(\"#resolution\"));\r\n\r\n// BACKGROUND\r\nexport function setBackgroundDim(slider) {\r\n\t// console.log(slider.value);\r\n\t// document.querySelector(\"#overlay\").style.backgroundColor = `rgba(0 0 0 / ${slider.value})`;\r\n\tBackground.changeOpacity(slider.value);\r\n\tGame.ALPHA = slider.value;\r\n\tdocument.querySelector(\"#bgDimVal\").innerHTML =\r\n\t\t`${parseInt(slider.value * 100)}%`;\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.background.dim = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n}\r\ndocument.querySelector(\"#dim\").oninput = () =>\r\n\tsetBackgroundDim(document.querySelector(\"#dim\"));\r\n\r\nexport function setBackgroundBlur(slider) {\r\n\t// console.log(slider.value);\r\n\t// document.querySelector(\".mapBG\").style.filter = `blur(${slider.value}px)`;\r\n\tdocument.querySelector(\"#bgBlurVal\").innerHTML =\r\n\t\t`${parseInt((slider.value / 20) * 100)}%`;\r\n\tBackground.changeStrength(slider.value);\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.background.blur = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n}\r\ndocument.querySelector(\"#blur\").oninput = () =>\r\n\tsetBackgroundBlur(document.querySelector(\"#blur\"));\r\n\r\n// AUDIO\r\nexport function setMasterVolume(slider) {\r\n\tGame.MASTER_VOL = slider.value;\r\n\tdocument.querySelector(\"#masterVal\").innerHTML =\r\n\t\t`${parseInt(slider.value * 100)}%`;\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.volume.master = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tif (Game.BEATMAP_FILE === undefined) return;\r\n\r\n\tGame.BEATMAP_FILE.audioNode.gainNode.gain.value =\r\n\t\tGame.MASTER_VOL * Game.MUSIC_VOL;\r\n\tHitSample.masterGainNode.gain.value = Game.MASTER_VOL * Game.HS_VOL;\r\n}\r\ndocument.querySelector(\"#master\").oninput = () =>\r\n\tsetMasterVolume(document.querySelector(\"#master\"));\r\n\r\nexport function setAudioVolume(slider) {\r\n\tGame.MUSIC_VOL = slider.value;\r\n\tdocument.querySelector(\"#musicVal\").innerHTML =\r\n\t\t`${parseInt(slider.value * 100)}%`;\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.volume.music = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tif (Game.BEATMAP_FILE === undefined) return;\r\n\r\n\tGame.BEATMAP_FILE.audioNode.gainNode.gain.value =\r\n\t\tGame.MASTER_VOL * Game.MUSIC_VOL;\r\n}\r\ndocument.querySelector(\"#music\").oninput = () =>\r\n\tsetAudioVolume(document.querySelector(\"#music\"));\r\n\r\nexport function setEffectVolume(slider) {\r\n\tGame.HS_VOL = slider.value;\r\n\tdocument.querySelector(\"#effectVal\").innerHTML =\r\n\t\t`${parseInt((slider.value / 0.4) * 100)}%`;\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.volume.hs = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tHitSample.masterGainNode.gain.value = Game.MASTER_VOL * Game.HS_VOL;\r\n\tif (Game.BEATMAP_FILE === undefined) return;\r\n}\r\ndocument.querySelector(\"#effect\").oninput = () =>\r\n\tsetEffectVolume(document.querySelector(\"#effect\"));\r\n\r\n// MAPPING\r\nexport function setOffset(slider) {\r\n\tPAudio.SOFT_OFFSET = slider.value;\r\n\tdocument.querySelector(\"#softoffsetVal\").innerHTML =\r\n\t\t`${parseInt(slider.value)}ms`;\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.mapping.offset = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tif (Game.BEATMAP_FILE === undefined) return;\r\n}\r\ndocument.querySelector(\"#softoffset\").oninput = () =>\r\n\tsetOffset(document.querySelector(\"#softoffset\"));\r\n\r\nexport function setBeatsnapDivisor(slider) {\r\n\tGame.MAPPING.beatsnap = slider.value;\r\n\tdocument.querySelector(\"#beatVal\").innerHTML = `1/${slider.value}`;\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.mapping.beatsnap = slider.value;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n}\r\ndocument.querySelector(\"#beat\").oninput = () =>\r\n\tsetBeatsnapDivisor(document.querySelector(\"#beat\"));\r\n\r\n// ANY KIND OF CHECK BOX\r\nexport function calculateCurrentSR(modsFlag) {\r\n\tconst modsTemplate = [\"HARD_ROCK\", \"EASY\", \"DOUBLE_TIME\", \"HALF_TIME\"];\r\n\r\n\tconst builderOptions = {\r\n\t\taddStacking: true,\r\n\t\tmods: modsTemplate.filter((mod, idx) => modsFlag[idx]),\r\n\t};\r\n\r\n\tconst blueprintData = osuPerformance.parseBlueprint(\r\n\t\tGame.BEATMAP_FILE.osuFile,\r\n\t);\r\n\tconst beatmapData = osuPerformance.buildBeatmap(\r\n\t\tblueprintData,\r\n\t\tbuilderOptions,\r\n\t);\r\n\tconst difficultyAttributes = osuPerformance.calculateDifficultyAttributes(\r\n\t\tbeatmapData,\r\n\t\ttrue,\r\n\t)[0];\r\n\r\n\t// document.querySelector(\"#CS\").textContent = round(beatmapData.difficulty.circleSize);\r\n\t// document.querySelector(\"#AR\").textContent = round(difficultyAttributes.approachRate);\r\n\t// document.querySelector(\"#OD\").textContent = round(difficultyAttributes.overallDifficulty);\r\n\t// document.querySelector(\"#HP\").textContent = round(beatmapData.difficulty.drainRate);\r\n\t// document.querySelector(\"#SR\").textContent = `${round(difficultyAttributes.starRating)}`;\r\n\t// document.querySelector(\"#SR\").style.backgroundColor = getDiffColor(difficultyAttributes.starRating);\r\n\r\n\t// if (difficultyAttributes.starRating >= 6.5) document.querySelector(\"#SR\").style.color = \"hsl(45deg, 100%, 70%)\";\r\n\t// else document.querySelector(\"#SR\").style.color = \"black\";\r\n\r\n\tGame.STATS.CS = round(beatmapData.difficulty.circleSize);\r\n\tGame.STATS.AR = round(\r\n\t\tdifficultyAttributes?.approachRate ?? beatmapData.difficulty.approachRate,\r\n\t);\r\n\tGame.STATS.OD = round(\r\n\t\tdifficultyAttributes?.overallDifficulty ??\r\n\t\t\tbeatmapData.difficulty.overallDifficulty,\r\n\t);\r\n\tGame.STATS.HP = round(beatmapData.difficulty.drainRate);\r\n\tGame.STATS.SR = round(difficultyAttributes?.starRating ?? 0.0);\r\n\tGame.STATS.srContainer.color = parseInt(\r\n\t\td3\r\n\t\t\t.color(getDiffColor(difficultyAttributes?.starRating ?? 0.0))\r\n\t\t\t.formatHex()\r\n\t\t\t.slice(1),\r\n\t\t16,\r\n\t);\r\n\r\n\tif ((difficultyAttributes?.starRating ?? 0.0) >= 6.5)\r\n\t\tGame.STATS.SRSprite.style.fill = parseInt(\r\n\t\t\td3.color(\"hsl(45, 100%, 70%)\").formatHex().slice(1),\r\n\t\t\t16,\r\n\t\t);\r\n\telse Game.STATS.SRSprite.style.fill = 0x000000;\r\n\r\n\tGame.STATS.update();\r\n}\r\n\r\nexport function handleCheckBox(checkbox) {\r\n\tGame.MODS[checkbox.name] = !Game.MODS[checkbox.name];\r\n\tGame.SLIDER_APPEARANCE[checkbox.name] =\r\n\t\t!Game.SLIDER_APPEARANCE[checkbox.name];\r\n\tGame.MAPPING[checkbox.name] = !Game.MAPPING[checkbox.name];\r\n\r\n\tif (checkbox.name === \"NC\") {\r\n\t\tGame.MODS.DT = false;\r\n\t\tGame.MODS.HT = false;\r\n\t\tGame.MODS.DC = false;\r\n\t\tdocument.querySelector(\"#DT\").checked = false;\r\n\t\tdocument.querySelector(\"#HT\").checked = false;\r\n\t\tdocument.querySelector(\"#DC\").checked = false;\r\n\t}\r\n\r\n\tif (checkbox.name === \"DT\") {\r\n\t\tGame.MODS.NC = false;\r\n\t\tGame.MODS.HT = false;\r\n\t\tGame.MODS.DC = false;\r\n\t\tdocument.querySelector(\"#NC\").checked = false;\r\n\t\tdocument.querySelector(\"#HT\").checked = false;\r\n\t\tdocument.querySelector(\"#DC\").checked = false;\r\n\t}\r\n\r\n\tif (checkbox.name === \"DC\") {\r\n\t\tGame.MODS.HT = false;\r\n\t\tGame.MODS.DT = false;\r\n\t\tGame.MODS.NC = false;\r\n\t\tdocument.querySelector(\"#HT\").checked = false;\r\n\t\tdocument.querySelector(\"#NC\").checked = false;\r\n\t\tdocument.querySelector(\"#DT\").checked = false;\r\n\t}\r\n\r\n\tif (checkbox.name === \"HT\") {\r\n\t\tGame.MODS.DC = false;\r\n\t\tGame.MODS.DT = false;\r\n\t\tGame.MODS.NC = false;\r\n\t\tdocument.querySelector(\"#DC\").checked = false;\r\n\t\tdocument.querySelector(\"#NC\").checked = false;\r\n\t\tdocument.querySelector(\"#DT\").checked = false;\r\n\t}\r\n\r\n\tconst DTMultiplier = !Game.MODS.DT && !Game.MODS.NC ? 1 : 1.5;\r\n\tconst HTMultiplier = !Game.MODS.HT && !Game.MODS.DC ? 1 : 0.75;\r\n\r\n\tif (\r\n\t\t[\r\n\t\t\t\"snaking\",\r\n\t\t\t\"sliderend\",\r\n\t\t\t\"hitAnim\",\r\n\t\t\t\"ignoreSkin\",\r\n\t\t\t\"showGrid\",\r\n\t\t\t\"disablePerfect\",\r\n\t\t].includes(checkbox.name)\r\n\t) {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.sliderAppearance[checkbox.name] =\r\n\t\t\tGame.SLIDER_APPEARANCE[checkbox.name];\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tif (document.querySelector(`#showGrid`).checked) {\r\n\t\t\tGame.GRID.alpha = 1;\r\n\t\t} else {\r\n\t\t\tGame.GRID.alpha = 0.01;\r\n\t\t}\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (checkbox.name === \"aa\") {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.renderer.aa = checkbox.checked;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tGame.APP.renderer.antialias = checkbox.checked;\r\n\t}\r\n\r\n\tif (checkbox.name === \"disableBMHS\") {\r\n\t\tGame.DISABLE_BMHS = !Game.DISABLE_BMHS;\r\n\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.volume.disableBMHS = Game.DISABLE_BMHS;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (checkbox.name === \"video\") {\r\n\t\tconst originalIsPlaying = Game.BEATMAP_FILE.audioNode.isPlaying;\r\n\t\tif (Game.BEATMAP_FILE.audioNode.isPlaying)\r\n\t\t\tGame.BEATMAP_FILE.audioNode.pause();\r\n\r\n\t\tGame.IS_VIDEO = !Game.IS_VIDEO;\r\n\r\n\t\tBackground.switch(Game.IS_VIDEO ? \"VIDEO\" : \"STATIC\");\r\n\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.background.video = Game.IS_VIDEO;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tif (originalIsPlaying) Game.BEATMAP_FILE.audioNode.play();\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (checkbox.name === \"transcode\") {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.background.transcodeVideo = !currentLocalStorage.background.transcodeVideo;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (checkbox.name === \"storyboard\") {\r\n\t\tconst originalIsPlaying = Game.BEATMAP_FILE.audioNode.isPlaying;\r\n\t\tif (Game.BEATMAP_FILE.audioNode.isPlaying)\r\n\t\t\tGame.BEATMAP_FILE.audioNode.pause();\r\n\r\n\t\tGame.IS_STORYBOARD = !Game.IS_STORYBOARD;\r\n\t\tStoryboard.container.visible = Game.IS_STORYBOARD;\r\n\r\n\t\tif (Storyboard.BLACK_BG && Game.IS_STORYBOARD) {\r\n\t\t\tBackground.sprite.tint = 0x000000;\r\n\t\t} else {\r\n\t\t\tBackground.sprite.tint = 0xffffff;\r\n\t\t}\r\n\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.background.storyboard = Game.IS_STORYBOARD;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tif (originalIsPlaying) Game.BEATMAP_FILE.audioNode.play();\r\n\t}\r\n\r\n\tif ([\"showGreenLine\"].includes(checkbox.name)) {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.mapping[checkbox.name] = Game.MAPPING[checkbox.name];\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\t\tTimeline.SHOW_GREENLINE = Game.MAPPING[checkbox.name];\r\n\r\n\t\t// if (Game.MAPPING[checkbox.name]) document.querySelector(\".timelineContainer\").style.height = \"\";\r\n\t\t// else document.querySelector(\".timelineContainer\").style.height = \"60px\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (!Game.BEATMAP_FILE) return;\r\n\r\n\tconst originalIsPlaying = Game.BEATMAP_FILE.audioNode.isPlaying;\r\n\tif (Game.BEATMAP_FILE.audioNode.isPlaying)\r\n\t\tGame.BEATMAP_FILE.audioNode.pause();\r\n\tGame.PLAYBACK_RATE = 1 * DTMultiplier * HTMultiplier;\r\n\tBeatmap.updateModdedStats();\r\n\tGame.BEATMAP_FILE.beatmapRenderData.applyStacking();\r\n\r\n\tif (originalIsPlaying) Game.BEATMAP_FILE.audioNode.play();\r\n\r\n\tcalculateCurrentSR([\r\n\t\tGame.MODS.HR,\r\n\t\tGame.MODS.EZ,\r\n\t\tGame.MODS.DT || Game.MODS.NC,\r\n\t\tGame.MODS.HT || Game.MODS.DC,\r\n\t]);\r\n}\r\n[...document.querySelectorAll(\"input[type=checkbox]\")].forEach((ele) => {\r\n\tele.onclick = () => handleCheckBox(ele);\r\n});\r\n\r\nexport function openDialog() {\r\n\tconst dialog = document.querySelector(\"#skinDropdown\");\r\n\r\n\tif (!dialog.open) {\r\n\t\tdialog.show();\r\n\t\tdialog.style.display = \"flex\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tdialog.close();\r\n\tdialog.style.display = \"\";\r\n}\r\ndocument.querySelector(\".skinSelector\").onclick = openDialog;\r\n\r\nexport function openRendererDialog() {\r\n\tconst dialog = document.querySelector(\"#rendererDropdown\");\r\n\r\n\tif (!dialog.open) {\r\n\t\tdialog.show();\r\n\t\tdialog.style.display = \"flex\";\r\n\t\treturn;\r\n\t}\r\n\r\n\tdialog.close();\r\n\tdialog.style.display = \"\";\r\n}\r\ndocument.querySelector(\".rendererSelector\").onclick = openRendererDialog;\r\n\r\ndocument.body.addEventListener(\"click\", (e) => {\r\n\tconst skinDialogDimensions = document\r\n\t\t.querySelector(\"#skinDropdown\")\r\n\t\t.getBoundingClientRect();\r\n\tconst popupDialogDimensions = document\r\n\t\t.querySelector(\".seekTo\")\r\n\t\t.getBoundingClientRect();\r\n\tconst rendererDialogDimensions = document\r\n\t\t.querySelector(\"#rendererDropdown\")\r\n\t\t.getBoundingClientRect();\r\n\r\n\tif (\r\n\t\t(e.clientX < skinDialogDimensions.left ||\r\n\t\t\te.clientX > skinDialogDimensions.right ||\r\n\t\t\te.clientY < skinDialogDimensions.top ||\r\n\t\t\te.clientY > skinDialogDimensions.bottom) &&\r\n\t\tdocument.querySelector(\"#skinDropdown\").open &&\r\n\t\te.target !== document.querySelector(\".skinSelector\")\r\n\t) {\r\n\t\tdocument.querySelector(\"#skinDropdown\").close();\r\n\t\tdocument.querySelector(\"#skinDropdown\").style.display = \"\";\r\n\t}\r\n\r\n\tif (\r\n\t\t(e.clientX < rendererDialogDimensions.left ||\r\n\t\t\te.clientX > rendererDialogDimensions.right ||\r\n\t\t\te.clientY < rendererDialogDimensions.top ||\r\n\t\t\te.clientY > rendererDialogDimensions.bottom) &&\r\n\t\tdocument.querySelector(\"#rendererDropdown\").open &&\r\n\t\te.target !== document.querySelector(\".rendererSelector\")\r\n\t) {\r\n\t\tdocument.querySelector(\"#rendererDropdown\").close();\r\n\t\tdocument.querySelector(\"#rendererDropdown\").style.display = \"\";\r\n\t}\r\n\r\n\tif (\r\n\t\t(e.clientX < popupDialogDimensions.left ||\r\n\t\t\te.clientX > popupDialogDimensions.right ||\r\n\t\t\te.clientY < popupDialogDimensions.top ||\r\n\t\t\te.clientY > popupDialogDimensions.bottom) &&\r\n\t\tdocument.querySelector(\".seekTo\").open &&\r\n\t\te.target !== document.querySelector(\".contentWrapper\") &&\r\n\t\te.target !== document.querySelector(\".contentWrapper canvas\")\r\n\t) {\r\n\t\tclosePopup();\r\n\t}\r\n});\r\n\r\n[...document.querySelectorAll(\".skinName\")].forEach((button) => {\r\n\tbutton.onclick = selectSkin;\r\n});\r\n\r\nfunction selectRenderer() {\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.renderer.val = this.parentElement.dataset.renderer;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tdocument.querySelector(\".rendererSelector\").textContent = this.textContent;\r\n\tlocation.reload();\r\n}\r\n\r\n[...document.querySelectorAll(\".renderer\")].forEach((button) => {\r\n\tbutton.onclick = selectRenderer;\r\n});\r\n","'use strict';\n\nexport default function bind(fn, thisArg) {\n  return function wrap() {\n    return fn.apply(thisArg, arguments);\n  };\n}\n","'use strict';\n\nimport bind from './helpers/bind.js';\n\n// utils is a library of generic helper functions non-specific to axios\n\nconst {toString} = Object.prototype;\nconst {getPrototypeOf} = Object;\nconst {iterator, toStringTag} = Symbol;\n\nconst kindOf = (cache => thing => {\n    const str = toString.call(thing);\n    return cache[str] || (cache[str] = str.slice(8, -1).toLowerCase());\n})(Object.create(null));\n\nconst kindOfTest = (type) => {\n  type = type.toLowerCase();\n  return (thing) => kindOf(thing) === type\n}\n\nconst typeOfTest = type => thing => typeof thing === type;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n *\n * @returns {boolean} True if value is an Array, otherwise false\n */\nconst {isArray} = Array;\n\n/**\n * Determine if a value is undefined\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nconst isUndefined = typeOfTest('undefined');\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && isFunction(val.constructor.isBuffer) && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nconst isArrayBuffer = kindOfTest('ArrayBuffer');\n\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  let result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (isArrayBuffer(val.buffer));\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a String, otherwise false\n */\nconst isString = typeOfTest('string');\n\n/**\n * Determine if a value is a Function\n *\n * @param {*} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nconst isFunction = typeOfTest('function');\n\n/**\n * Determine if a value is a Number\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Number, otherwise false\n */\nconst isNumber = typeOfTest('number');\n\n/**\n * Determine if a value is an Object\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an Object, otherwise false\n */\nconst isObject = (thing) => thing !== null && typeof thing === 'object';\n\n/**\n * Determine if a value is a Boolean\n *\n * @param {*} thing The value to test\n * @returns {boolean} True if value is a Boolean, otherwise false\n */\nconst isBoolean = thing => thing === true || thing === false;\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a plain Object, otherwise false\n */\nconst isPlainObject = (val) => {\n  if (kindOf(val) !== 'object') {\n    return false;\n  }\n\n  const prototype = getPrototypeOf(val);\n  return (prototype === null || prototype === Object.prototype || Object.getPrototypeOf(prototype) === null) && !(toStringTag in val) && !(iterator in val);\n}\n\n/**\n * Determine if a value is an empty object (safely handles Buffers)\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is an empty object, otherwise false\n */\nconst isEmptyObject = (val) => {\n  // Early return for non-objects or Buffers to prevent RangeError\n  if (!isObject(val) || isBuffer(val)) {\n    return false;\n  }\n\n  try {\n    return Object.keys(val).length === 0 && Object.getPrototypeOf(val) === Object.prototype;\n  } catch (e) {\n    // Fallback for any other objects that might cause RangeError with Object.keys()\n    return false;\n  }\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Date, otherwise false\n */\nconst isDate = kindOfTest('Date');\n\n/**\n * Determine if a value is a File\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFile = kindOfTest('File');\n\n/**\n * Determine if a value is a Blob\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nconst isBlob = kindOfTest('Blob');\n\n/**\n * Determine if a value is a FileList\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a File, otherwise false\n */\nconst isFileList = kindOfTest('FileList');\n\n/**\n * Determine if a value is a Stream\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nconst isStream = (val) => isObject(val) && isFunction(val.pipe);\n\n/**\n * Determine if a value is a FormData\n *\n * @param {*} thing The value to test\n *\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nconst isFormData = (thing) => {\n  let kind;\n  return thing && (\n    (typeof FormData === 'function' && thing instanceof FormData) || (\n      isFunction(thing.append) && (\n        (kind = kindOf(thing)) === 'formdata' ||\n        // detect form-data instance\n        (kind === 'object' && isFunction(thing.toString) && thing.toString() === '[object FormData]')\n      )\n    )\n  )\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nconst isURLSearchParams = kindOfTest('URLSearchParams');\n\nconst [isReadableStream, isRequest, isResponse, isHeaders] = ['ReadableStream', 'Request', 'Response', 'Headers'].map(kindOfTest);\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n *\n * @returns {String} The String freed of excess whitespace\n */\nconst trim = (str) => str.trim ?\n  str.trim() : str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n *\n * @param {Boolean} [allOwnKeys = false]\n * @returns {any}\n */\nfunction forEach(obj, fn, {allOwnKeys = false} = {}) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  let i;\n  let l;\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Buffer check\n    if (isBuffer(obj)) {\n      return;\n    }\n\n    // Iterate over object keys\n    const keys = allOwnKeys ? Object.getOwnPropertyNames(obj) : Object.keys(obj);\n    const len = keys.length;\n    let key;\n\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      fn.call(null, obj[key], key, obj);\n    }\n  }\n}\n\nfunction findKey(obj, key) {\n  if (isBuffer(obj)){\n    return null;\n  }\n\n  key = key.toLowerCase();\n  const keys = Object.keys(obj);\n  let i = keys.length;\n  let _key;\n  while (i-- > 0) {\n    _key = keys[i];\n    if (key === _key.toLowerCase()) {\n      return _key;\n    }\n  }\n  return null;\n}\n\nconst _global = (() => {\n  /*eslint no-undef:0*/\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  return typeof self !== \"undefined\" ? self : (typeof window !== 'undefined' ? window : global)\n})();\n\nconst isContextDefined = (context) => !isUndefined(context) && context !== _global;\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n *\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  const {caseless, skipUndefined} = isContextDefined(this) && this || {};\n  const result = {};\n  const assignValue = (val, key) => {\n    const targetKey = caseless && findKey(result, key) || key;\n    if (isPlainObject(result[targetKey]) && isPlainObject(val)) {\n      result[targetKey] = merge(result[targetKey], val);\n    } else if (isPlainObject(val)) {\n      result[targetKey] = merge({}, val);\n    } else if (isArray(val)) {\n      result[targetKey] = val.slice();\n    } else if (!skipUndefined || !isUndefined(val)) {\n      result[targetKey] = val;\n    }\n  }\n\n  for (let i = 0, l = arguments.length; i < l; i++) {\n    arguments[i] && forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n *\n * @param {Boolean} [allOwnKeys]\n * @returns {Object} The resulting value of object a\n */\nconst extend = (a, b, thisArg, {allOwnKeys}= {}) => {\n  forEach(b, (val, key) => {\n    if (thisArg && isFunction(val)) {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  }, {allOwnKeys});\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n *\n * @returns {string} content value without BOM\n */\nconst stripBOM = (content) => {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\n/**\n * Inherit the prototype methods from one constructor into another\n * @param {function} constructor\n * @param {function} superConstructor\n * @param {object} [props]\n * @param {object} [descriptors]\n *\n * @returns {void}\n */\nconst inherits = (constructor, superConstructor, props, descriptors) => {\n  constructor.prototype = Object.create(superConstructor.prototype, descriptors);\n  constructor.prototype.constructor = constructor;\n  Object.defineProperty(constructor, 'super', {\n    value: superConstructor.prototype\n  });\n  props && Object.assign(constructor.prototype, props);\n}\n\n/**\n * Resolve object with deep prototype chain to a flat object\n * @param {Object} sourceObj source object\n * @param {Object} [destObj]\n * @param {Function|Boolean} [filter]\n * @param {Function} [propFilter]\n *\n * @returns {Object}\n */\nconst toFlatObject = (sourceObj, destObj, filter, propFilter) => {\n  let props;\n  let i;\n  let prop;\n  const merged = {};\n\n  destObj = destObj || {};\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  if (sourceObj == null) return destObj;\n\n  do {\n    props = Object.getOwnPropertyNames(sourceObj);\n    i = props.length;\n    while (i-- > 0) {\n      prop = props[i];\n      if ((!propFilter || propFilter(prop, sourceObj, destObj)) && !merged[prop]) {\n        destObj[prop] = sourceObj[prop];\n        merged[prop] = true;\n      }\n    }\n    sourceObj = filter !== false && getPrototypeOf(sourceObj);\n  } while (sourceObj && (!filter || filter(sourceObj, destObj)) && sourceObj !== Object.prototype);\n\n  return destObj;\n}\n\n/**\n * Determines whether a string ends with the characters of a specified string\n *\n * @param {String} str\n * @param {String} searchString\n * @param {Number} [position= 0]\n *\n * @returns {boolean}\n */\nconst endsWith = (str, searchString, position) => {\n  str = String(str);\n  if (position === undefined || position > str.length) {\n    position = str.length;\n  }\n  position -= searchString.length;\n  const lastIndex = str.indexOf(searchString, position);\n  return lastIndex !== -1 && lastIndex === position;\n}\n\n\n/**\n * Returns new array from array like object or null if failed\n *\n * @param {*} [thing]\n *\n * @returns {?Array}\n */\nconst toArray = (thing) => {\n  if (!thing) return null;\n  if (isArray(thing)) return thing;\n  let i = thing.length;\n  if (!isNumber(i)) return null;\n  const arr = new Array(i);\n  while (i-- > 0) {\n    arr[i] = thing[i];\n  }\n  return arr;\n}\n\n/**\n * Checking if the Uint8Array exists and if it does, it returns a function that checks if the\n * thing passed in is an instance of Uint8Array\n *\n * @param {TypedArray}\n *\n * @returns {Array}\n */\n// eslint-disable-next-line func-names\nconst isTypedArray = (TypedArray => {\n  // eslint-disable-next-line func-names\n  return thing => {\n    return TypedArray && thing instanceof TypedArray;\n  };\n})(typeof Uint8Array !== 'undefined' && getPrototypeOf(Uint8Array));\n\n/**\n * For each entry in the object, call the function with the key and value.\n *\n * @param {Object<any, any>} obj - The object to iterate over.\n * @param {Function} fn - The function to call for each entry.\n *\n * @returns {void}\n */\nconst forEachEntry = (obj, fn) => {\n  const generator = obj && obj[iterator];\n\n  const _iterator = generator.call(obj);\n\n  let result;\n\n  while ((result = _iterator.next()) && !result.done) {\n    const pair = result.value;\n    fn.call(obj, pair[0], pair[1]);\n  }\n}\n\n/**\n * It takes a regular expression and a string, and returns an array of all the matches\n *\n * @param {string} regExp - The regular expression to match against.\n * @param {string} str - The string to search.\n *\n * @returns {Array<boolean>}\n */\nconst matchAll = (regExp, str) => {\n  let matches;\n  const arr = [];\n\n  while ((matches = regExp.exec(str)) !== null) {\n    arr.push(matches);\n  }\n\n  return arr;\n}\n\n/* Checking if the kindOfTest function returns true when passed an HTMLFormElement. */\nconst isHTMLForm = kindOfTest('HTMLFormElement');\n\nconst toCamelCase = str => {\n  return str.toLowerCase().replace(/[-_\\s]([a-z\\d])(\\w*)/g,\n    function replacer(m, p1, p2) {\n      return p1.toUpperCase() + p2;\n    }\n  );\n};\n\n/* Creating a function that will check if an object has a property. */\nconst hasOwnProperty = (({hasOwnProperty}) => (obj, prop) => hasOwnProperty.call(obj, prop))(Object.prototype);\n\n/**\n * Determine if a value is a RegExp object\n *\n * @param {*} val The value to test\n *\n * @returns {boolean} True if value is a RegExp object, otherwise false\n */\nconst isRegExp = kindOfTest('RegExp');\n\nconst reduceDescriptors = (obj, reducer) => {\n  const descriptors = Object.getOwnPropertyDescriptors(obj);\n  const reducedDescriptors = {};\n\n  forEach(descriptors, (descriptor, name) => {\n    let ret;\n    if ((ret = reducer(descriptor, name, obj)) !== false) {\n      reducedDescriptors[name] = ret || descriptor;\n    }\n  });\n\n  Object.defineProperties(obj, reducedDescriptors);\n}\n\n/**\n * Makes all methods read-only\n * @param {Object} obj\n */\n\nconst freezeMethods = (obj) => {\n  reduceDescriptors(obj, (descriptor, name) => {\n    // skip restricted props in strict mode\n    if (isFunction(obj) && ['arguments', 'caller', 'callee'].indexOf(name) !== -1) {\n      return false;\n    }\n\n    const value = obj[name];\n\n    if (!isFunction(value)) return;\n\n    descriptor.enumerable = false;\n\n    if ('writable' in descriptor) {\n      descriptor.writable = false;\n      return;\n    }\n\n    if (!descriptor.set) {\n      descriptor.set = () => {\n        throw Error('Can not rewrite read-only method \\'' + name + '\\'');\n      };\n    }\n  });\n}\n\nconst toObjectSet = (arrayOrString, delimiter) => {\n  const obj = {};\n\n  const define = (arr) => {\n    arr.forEach(value => {\n      obj[value] = true;\n    });\n  }\n\n  isArray(arrayOrString) ? define(arrayOrString) : define(String(arrayOrString).split(delimiter));\n\n  return obj;\n}\n\nconst noop = () => {}\n\nconst toFiniteNumber = (value, defaultValue) => {\n  return value != null && Number.isFinite(value = +value) ? value : defaultValue;\n}\n\n\n\n/**\n * If the thing is a FormData object, return true, otherwise return false.\n *\n * @param {unknown} thing - The thing to check.\n *\n * @returns {boolean}\n */\nfunction isSpecCompliantForm(thing) {\n  return !!(thing && isFunction(thing.append) && thing[toStringTag] === 'FormData' && thing[iterator]);\n}\n\nconst toJSONObject = (obj) => {\n  const stack = new Array(10);\n\n  const visit = (source, i) => {\n\n    if (isObject(source)) {\n      if (stack.indexOf(source) >= 0) {\n        return;\n      }\n\n      //Buffer check\n      if (isBuffer(source)) {\n        return source;\n      }\n\n      if(!('toJSON' in source)) {\n        stack[i] = source;\n        const target = isArray(source) ? [] : {};\n\n        forEach(source, (value, key) => {\n          const reducedValue = visit(value, i + 1);\n          !isUndefined(reducedValue) && (target[key] = reducedValue);\n        });\n\n        stack[i] = undefined;\n\n        return target;\n      }\n    }\n\n    return source;\n  }\n\n  return visit(obj, 0);\n}\n\nconst isAsyncFn = kindOfTest('AsyncFunction');\n\nconst isThenable = (thing) =>\n  thing && (isObject(thing) || isFunction(thing)) && isFunction(thing.then) && isFunction(thing.catch);\n\n// original code\n// https://github.com/DigitalBrainJS/AxiosPromise/blob/16deab13710ec09779922131f3fa5954320f83ab/lib/utils.js#L11-L34\n\nconst _setImmediate = ((setImmediateSupported, postMessageSupported) => {\n  if (setImmediateSupported) {\n    return setImmediate;\n  }\n\n  return postMessageSupported ? ((token, callbacks) => {\n    _global.addEventListener(\"message\", ({source, data}) => {\n      if (source === _global && data === token) {\n        callbacks.length && callbacks.shift()();\n      }\n    }, false);\n\n    return (cb) => {\n      callbacks.push(cb);\n      _global.postMessage(token, \"*\");\n    }\n  })(`axios@${Math.random()}`, []) : (cb) => setTimeout(cb);\n})(\n  typeof setImmediate === 'function',\n  isFunction(_global.postMessage)\n);\n\nconst asap = typeof queueMicrotask !== 'undefined' ?\n  queueMicrotask.bind(_global) : ( typeof process !== 'undefined' && process.nextTick || _setImmediate);\n\n// *********************\n\n\nconst isIterable = (thing) => thing != null && isFunction(thing[iterator]);\n\n\nexport default {\n  isArray,\n  isArrayBuffer,\n  isBuffer,\n  isFormData,\n  isArrayBufferView,\n  isString,\n  isNumber,\n  isBoolean,\n  isObject,\n  isPlainObject,\n  isEmptyObject,\n  isReadableStream,\n  isRequest,\n  isResponse,\n  isHeaders,\n  isUndefined,\n  isDate,\n  isFile,\n  isBlob,\n  isRegExp,\n  isFunction,\n  isStream,\n  isURLSearchParams,\n  isTypedArray,\n  isFileList,\n  forEach,\n  merge,\n  extend,\n  trim,\n  stripBOM,\n  inherits,\n  toFlatObject,\n  kindOf,\n  kindOfTest,\n  endsWith,\n  toArray,\n  forEachEntry,\n  matchAll,\n  isHTMLForm,\n  hasOwnProperty,\n  hasOwnProp: hasOwnProperty, // an alias to avoid ESLint no-prototype-builtins detection\n  reduceDescriptors,\n  freezeMethods,\n  toObjectSet,\n  toCamelCase,\n  noop,\n  toFiniteNumber,\n  findKey,\n  global: _global,\n  isContextDefined,\n  isSpecCompliantForm,\n  toJSONObject,\n  isAsyncFn,\n  isThenable,\n  setImmediate: _setImmediate,\n  asap,\n  isIterable\n};\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [config] The config.\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n *\n * @returns {Error} The created error.\n */\nfunction AxiosError(message, code, config, request, response) {\n  Error.call(this);\n\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, this.constructor);\n  } else {\n    this.stack = (new Error()).stack;\n  }\n\n  this.message = message;\n  this.name = 'AxiosError';\n  code && (this.code = code);\n  config && (this.config = config);\n  request && (this.request = request);\n  if (response) {\n    this.response = response;\n    this.status = response.status ? response.status : null;\n  }\n}\n\nutils.inherits(AxiosError, Error, {\n  toJSON: function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: utils.toJSONObject(this.config),\n      code: this.code,\n      status: this.status\n    };\n  }\n});\n\nconst prototype = AxiosError.prototype;\nconst descriptors = {};\n\n[\n  'ERR_BAD_OPTION_VALUE',\n  'ERR_BAD_OPTION',\n  'ECONNABORTED',\n  'ETIMEDOUT',\n  'ERR_NETWORK',\n  'ERR_FR_TOO_MANY_REDIRECTS',\n  'ERR_DEPRECATED',\n  'ERR_BAD_RESPONSE',\n  'ERR_BAD_REQUEST',\n  'ERR_CANCELED',\n  'ERR_NOT_SUPPORT',\n  'ERR_INVALID_URL'\n// eslint-disable-next-line func-names\n].forEach(code => {\n  descriptors[code] = {value: code};\n});\n\nObject.defineProperties(AxiosError, descriptors);\nObject.defineProperty(prototype, 'isAxiosError', {value: true});\n\n// eslint-disable-next-line func-names\nAxiosError.from = (error, code, config, request, response, customProps) => {\n  const axiosError = Object.create(prototype);\n\n  utils.toFlatObject(error, axiosError, function filter(obj) {\n    return obj !== Error.prototype;\n  }, prop => {\n    return prop !== 'isAxiosError';\n  });\n\n  const msg = error && error.message ? error.message : 'Error';\n\n  // Prefer explicit code; otherwise copy the low-level error's code (e.g. ECONNREFUSED)\n  const errCode = code == null && error ? error.code : code;\n  AxiosError.call(axiosError, msg, errCode, config, request, response);\n\n  // Chain the original error on the standard field; non-enumerable to avoid JSON noise\n  if (error && axiosError.cause == null) {\n    Object.defineProperty(axiosError, 'cause', { value: error, configurable: true });\n  }\n\n  axiosError.name = (error && error.name) || 'Error';\n\n  customProps && Object.assign(axiosError, customProps);\n\n  return axiosError;\n};\n\nexport default AxiosError;\n","// eslint-disable-next-line strict\nexport default null;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (utils.isBoolean(value)) {\n      return value.toString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n","'use strict';\n\nimport toFormData from './toFormData.js';\n\n/**\n * It encodes a string by replacing all characters that are not in the unreserved set with\n * their percent-encoded equivalents\n *\n * @param {string} str - The string to encode.\n *\n * @returns {string} The encoded string.\n */\nfunction encode(str) {\n  const charMap = {\n    '!': '%21',\n    \"'\": '%27',\n    '(': '%28',\n    ')': '%29',\n    '~': '%7E',\n    '%20': '+',\n    '%00': '\\x00'\n  };\n  return encodeURIComponent(str).replace(/[!'()~]|%20|%00/g, function replacer(match) {\n    return charMap[match];\n  });\n}\n\n/**\n * It takes a params object and converts it to a FormData object\n *\n * @param {Object<string, any>} params - The parameters to be converted to a FormData object.\n * @param {Object<string, any>} options - The options object passed to the Axios constructor.\n *\n * @returns {void}\n */\nfunction AxiosURLSearchParams(params, options) {\n  this._pairs = [];\n\n  params && toFormData(params, this, options);\n}\n\nconst prototype = AxiosURLSearchParams.prototype;\n\nprototype.append = function append(name, value) {\n  this._pairs.push([name, value]);\n};\n\nprototype.toString = function toString(encoder) {\n  const _encode = encoder ? function(value) {\n    return encoder.call(this, value, encode);\n  } : encode;\n\n  return this._pairs.map(function each(pair) {\n    return _encode(pair[0]) + '=' + _encode(pair[1]);\n  }, '').join('&');\n};\n\nexport default AxiosURLSearchParams;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosURLSearchParams from '../helpers/AxiosURLSearchParams.js';\n\n/**\n * It replaces all instances of the characters `:`, `$`, `,`, `+`, `[`, and `]` with their\n * URI encoded counterparts\n *\n * @param {string} val The value to be encoded.\n *\n * @returns {string} The encoded value.\n */\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @param {?(object|Function)} options\n *\n * @returns {string} The formatted url\n */\nexport default function buildURL(url, params, options) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n  \n  const _encode = options && options.encode || encode;\n\n  if (utils.isFunction(options)) {\n    options = {\n      serialize: options\n    };\n  } \n\n  const serializeFn = options && options.serialize;\n\n  let serializedParams;\n\n  if (serializeFn) {\n    serializedParams = serializeFn(params, options);\n  } else {\n    serializedParams = utils.isURLSearchParams(params) ?\n      params.toString() :\n      new AxiosURLSearchParams(params, options).toString(_encode);\n  }\n\n  if (serializedParams) {\n    const hashmarkIndex = url.indexOf(\"#\");\n\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\nclass InterceptorManager {\n  constructor() {\n    this.handlers = [];\n  }\n\n  /**\n   * Add a new interceptor to the stack\n   *\n   * @param {Function} fulfilled The function to handle `then` for a `Promise`\n   * @param {Function} rejected The function to handle `reject` for a `Promise`\n   *\n   * @return {Number} An ID used to remove interceptor later\n   */\n  use(fulfilled, rejected, options) {\n    this.handlers.push({\n      fulfilled,\n      rejected,\n      synchronous: options ? options.synchronous : false,\n      runWhen: options ? options.runWhen : null\n    });\n    return this.handlers.length - 1;\n  }\n\n  /**\n   * Remove an interceptor from the stack\n   *\n   * @param {Number} id The ID that was returned by `use`\n   *\n   * @returns {Boolean} `true` if the interceptor was removed, `false` otherwise\n   */\n  eject(id) {\n    if (this.handlers[id]) {\n      this.handlers[id] = null;\n    }\n  }\n\n  /**\n   * Clear all interceptors from the stack\n   *\n   * @returns {void}\n   */\n  clear() {\n    if (this.handlers) {\n      this.handlers = [];\n    }\n  }\n\n  /**\n   * Iterate over all the registered interceptors\n   *\n   * This method is particularly useful for skipping over any\n   * interceptors that may have become `null` calling `eject`.\n   *\n   * @param {Function} fn The function to call for each interceptor\n   *\n   * @returns {void}\n   */\n  forEach(fn) {\n    utils.forEach(this.handlers, function forEachHandler(h) {\n      if (h !== null) {\n        fn(h);\n      }\n    });\n  }\n}\n\nexport default InterceptorManager;\n","'use strict';\n\nexport default {\n  silentJSONParsing: true,\n  forcedJSONParsing: true,\n  clarifyTimeoutError: false\n};\n","'use strict';\n\nimport AxiosURLSearchParams from '../../../helpers/AxiosURLSearchParams.js';\nexport default typeof URLSearchParams !== 'undefined' ? URLSearchParams : AxiosURLSearchParams;\n","'use strict';\n\nexport default typeof FormData !== 'undefined' ? FormData : null;\n","'use strict'\n\nexport default typeof Blob !== 'undefined' ? Blob : null\n","import URLSearchParams from './classes/URLSearchParams.js'\nimport FormData from './classes/FormData.js'\nimport Blob from './classes/Blob.js'\n\nexport default {\n  isBrowser: true,\n  classes: {\n    URLSearchParams,\n    FormData,\n    Blob\n  },\n  protocols: ['http', 'https', 'file', 'blob', 'url', 'data']\n};\n","const hasBrowserEnv = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nconst _navigator = typeof navigator === 'object' && navigator || undefined;\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n *\n * @returns {boolean}\n */\nconst hasStandardBrowserEnv = hasBrowserEnv &&\n  (!_navigator || ['ReactNative', 'NativeScript', 'NS'].indexOf(_navigator.product) < 0);\n\n/**\n * Determine if we're running in a standard browser webWorker environment\n *\n * Although the `isStandardBrowserEnv` method indicates that\n * `allows axios to run in a web worker`, the WebWorker will still be\n * filtered out due to its judgment standard\n * `typeof window !== 'undefined' && typeof document !== 'undefined'`.\n * This leads to a problem when axios post `FormData` in webWorker\n */\nconst hasStandardBrowserWebWorkerEnv = (() => {\n  return (\n    typeof WorkerGlobalScope !== 'undefined' &&\n    // eslint-disable-next-line no-undef\n    self instanceof WorkerGlobalScope &&\n    typeof self.importScripts === 'function'\n  );\n})();\n\nconst origin = hasBrowserEnv && window.location.href || 'http://localhost';\n\nexport {\n  hasBrowserEnv,\n  hasStandardBrowserWebWorkerEnv,\n  hasStandardBrowserEnv,\n  _navigator as navigator,\n  origin\n}\n","import platform from './node/index.js';\nimport * as utils from './common/utils.js';\n\nexport default {\n  ...utils,\n  ...platform\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport toFormData from './toFormData.js';\nimport platform from '../platform/index.js';\n\nexport default function toURLEncodedForm(data, options) {\n  return toFormData(data, new platform.classes.URLSearchParams(), {\n    visitor: function(value, key, path, helpers) {\n      if (platform.isNode && utils.isBuffer(value)) {\n        this.append(key, value.toString('base64'));\n        return false;\n      }\n\n      return helpers.defaultVisitor.apply(this, arguments);\n    },\n    ...options\n  });\n}\n","'use strict';\n\nimport utils from '../utils.js';\n\n/**\n * It takes a string like `foo[x][y][z]` and returns an array like `['foo', 'x', 'y', 'z']\n *\n * @param {string} name - The name of the property to get.\n *\n * @returns An array of strings.\n */\nfunction parsePropPath(name) {\n  // foo[x][y][z]\n  // foo.x.y.z\n  // foo-x-y-z\n  // foo x y z\n  return utils.matchAll(/\\w+|\\[(\\w*)]/g, name).map(match => {\n    return match[0] === '[]' ? '' : match[1] || match[0];\n  });\n}\n\n/**\n * Convert an array to an object.\n *\n * @param {Array<any>} arr - The array to convert to an object.\n *\n * @returns An object with the same keys and values as the array.\n */\nfunction arrayToObject(arr) {\n  const obj = {};\n  const keys = Object.keys(arr);\n  let i;\n  const len = keys.length;\n  let key;\n  for (i = 0; i < len; i++) {\n    key = keys[i];\n    obj[key] = arr[key];\n  }\n  return obj;\n}\n\n/**\n * It takes a FormData object and returns a JavaScript object\n *\n * @param {string} formData The FormData object to convert to JSON.\n *\n * @returns {Object<string, any> | null} The converted object.\n */\nfunction formDataToJSON(formData) {\n  function buildPath(path, value, target, index) {\n    let name = path[index++];\n\n    if (name === '__proto__') return true;\n\n    const isNumericKey = Number.isFinite(+name);\n    const isLast = index >= path.length;\n    name = !name && utils.isArray(target) ? target.length : name;\n\n    if (isLast) {\n      if (utils.hasOwnProp(target, name)) {\n        target[name] = [target[name], value];\n      } else {\n        target[name] = value;\n      }\n\n      return !isNumericKey;\n    }\n\n    if (!target[name] || !utils.isObject(target[name])) {\n      target[name] = [];\n    }\n\n    const result = buildPath(path, value, target[name], index);\n\n    if (result && utils.isArray(target[name])) {\n      target[name] = arrayToObject(target[name]);\n    }\n\n    return !isNumericKey;\n  }\n\n  if (utils.isFormData(formData) && utils.isFunction(formData.entries)) {\n    const obj = {};\n\n    utils.forEachEntry(formData, (name, value) => {\n      buildPath(parsePropPath(name), value, obj, 0);\n    });\n\n    return obj;\n  }\n\n  return null;\n}\n\nexport default formDataToJSON;\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\nimport transitionalDefaults from './transitional.js';\nimport toFormData from '../helpers/toFormData.js';\nimport toURLEncodedForm from '../helpers/toURLEncodedForm.js';\nimport platform from '../platform/index.js';\nimport formDataToJSON from '../helpers/formDataToJSON.js';\n\n/**\n * It takes a string, tries to parse it, and if it fails, it returns the stringified version\n * of the input\n *\n * @param {any} rawValue - The value to be stringified.\n * @param {Function} parser - A function that parses a string into a JavaScript object.\n * @param {Function} encoder - A function that takes a value and returns a string.\n *\n * @returns {string} A stringified version of the rawValue.\n */\nfunction stringifySafely(rawValue, parser, encoder) {\n  if (utils.isString(rawValue)) {\n    try {\n      (parser || JSON.parse)(rawValue);\n      return utils.trim(rawValue);\n    } catch (e) {\n      if (e.name !== 'SyntaxError') {\n        throw e;\n      }\n    }\n  }\n\n  return (encoder || JSON.stringify)(rawValue);\n}\n\nconst defaults = {\n\n  transitional: transitionalDefaults,\n\n  adapter: ['xhr', 'http', 'fetch'],\n\n  transformRequest: [function transformRequest(data, headers) {\n    const contentType = headers.getContentType() || '';\n    const hasJSONContentType = contentType.indexOf('application/json') > -1;\n    const isObjectPayload = utils.isObject(data);\n\n    if (isObjectPayload && utils.isHTMLForm(data)) {\n      data = new FormData(data);\n    }\n\n    const isFormData = utils.isFormData(data);\n\n    if (isFormData) {\n      return hasJSONContentType ? JSON.stringify(formDataToJSON(data)) : data;\n    }\n\n    if (utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data) ||\n      utils.isReadableStream(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      headers.setContentType('application/x-www-form-urlencoded;charset=utf-8', false);\n      return data.toString();\n    }\n\n    let isFileList;\n\n    if (isObjectPayload) {\n      if (contentType.indexOf('application/x-www-form-urlencoded') > -1) {\n        return toURLEncodedForm(data, this.formSerializer).toString();\n      }\n\n      if ((isFileList = utils.isFileList(data)) || contentType.indexOf('multipart/form-data') > -1) {\n        const _FormData = this.env && this.env.FormData;\n\n        return toFormData(\n          isFileList ? {'files[]': data} : data,\n          _FormData && new _FormData(),\n          this.formSerializer\n        );\n      }\n    }\n\n    if (isObjectPayload || hasJSONContentType ) {\n      headers.setContentType('application/json', false);\n      return stringifySafely(data);\n    }\n\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    const transitional = this.transitional || defaults.transitional;\n    const forcedJSONParsing = transitional && transitional.forcedJSONParsing;\n    const JSONRequested = this.responseType === 'json';\n\n    if (utils.isResponse(data) || utils.isReadableStream(data)) {\n      return data;\n    }\n\n    if (data && utils.isString(data) && ((forcedJSONParsing && !this.responseType) || JSONRequested)) {\n      const silentJSONParsing = transitional && transitional.silentJSONParsing;\n      const strictJSONParsing = !silentJSONParsing && JSONRequested;\n\n      try {\n        return JSON.parse(data, this.parseReviver);\n      } catch (e) {\n        if (strictJSONParsing) {\n          if (e.name === 'SyntaxError') {\n            throw AxiosError.from(e, AxiosError.ERR_BAD_RESPONSE, this, null, this.response);\n          }\n          throw e;\n        }\n      }\n    }\n\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  env: {\n    FormData: platform.classes.FormData,\n    Blob: platform.classes.Blob\n  },\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n\n  headers: {\n    common: {\n      'Accept': 'application/json, text/plain, */*',\n      'Content-Type': undefined\n    }\n  }\n};\n\nutils.forEach(['delete', 'get', 'head', 'post', 'put', 'patch'], (method) => {\n  defaults.headers[method] = {};\n});\n\nexport default defaults;\n","'use strict';\n\nimport utils from './../utils.js';\n\n// RawAxiosHeaders whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nconst ignoreDuplicateOf = utils.toObjectSet([\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n]);\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} rawHeaders Headers needing to be parsed\n *\n * @returns {Object} Headers parsed into an object\n */\nexport default rawHeaders => {\n  const parsed = {};\n  let key;\n  let val;\n  let i;\n\n  rawHeaders && rawHeaders.split('\\n').forEach(function parser(line) {\n    i = line.indexOf(':');\n    key = line.substring(0, i).trim().toLowerCase();\n    val = line.substring(i + 1).trim();\n\n    if (!key || (parsed[key] && ignoreDuplicateOf[key])) {\n      return;\n    }\n\n    if (key === 'set-cookie') {\n      if (parsed[key]) {\n        parsed[key].push(val);\n      } else {\n        parsed[key] = [val];\n      }\n    } else {\n      parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nimport utils from '../utils.js';\nimport parseHeaders from '../helpers/parseHeaders.js';\n\nconst $internals = Symbol('internals');\n\nfunction normalizeHeader(header) {\n  return header && String(header).trim().toLowerCase();\n}\n\nfunction normalizeValue(value) {\n  if (value === false || value == null) {\n    return value;\n  }\n\n  return utils.isArray(value) ? value.map(normalizeValue) : String(value);\n}\n\nfunction parseTokens(str) {\n  const tokens = Object.create(null);\n  const tokensRE = /([^\\s,;=]+)\\s*(?:=\\s*([^,;]+))?/g;\n  let match;\n\n  while ((match = tokensRE.exec(str))) {\n    tokens[match[1]] = match[2];\n  }\n\n  return tokens;\n}\n\nconst isValidHeaderName = (str) => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(str.trim());\n\nfunction matchHeaderValue(context, value, header, filter, isHeaderNameFilter) {\n  if (utils.isFunction(filter)) {\n    return filter.call(this, value, header);\n  }\n\n  if (isHeaderNameFilter) {\n    value = header;\n  }\n\n  if (!utils.isString(value)) return;\n\n  if (utils.isString(filter)) {\n    return value.indexOf(filter) !== -1;\n  }\n\n  if (utils.isRegExp(filter)) {\n    return filter.test(value);\n  }\n}\n\nfunction formatHeader(header) {\n  return header.trim()\n    .toLowerCase().replace(/([a-z\\d])(\\w*)/g, (w, char, str) => {\n      return char.toUpperCase() + str;\n    });\n}\n\nfunction buildAccessors(obj, header) {\n  const accessorName = utils.toCamelCase(' ' + header);\n\n  ['get', 'set', 'has'].forEach(methodName => {\n    Object.defineProperty(obj, methodName + accessorName, {\n      value: function(arg1, arg2, arg3) {\n        return this[methodName].call(this, header, arg1, arg2, arg3);\n      },\n      configurable: true\n    });\n  });\n}\n\nclass AxiosHeaders {\n  constructor(headers) {\n    headers && this.set(headers);\n  }\n\n  set(header, valueOrRewrite, rewrite) {\n    const self = this;\n\n    function setHeader(_value, _header, _rewrite) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!lHeader) {\n        throw new Error('header name must be a non-empty string');\n      }\n\n      const key = utils.findKey(self, lHeader);\n\n      if(!key || self[key] === undefined || _rewrite === true || (_rewrite === undefined && self[key] !== false)) {\n        self[key || _header] = normalizeValue(_value);\n      }\n    }\n\n    const setHeaders = (headers, _rewrite) =>\n      utils.forEach(headers, (_value, _header) => setHeader(_value, _header, _rewrite));\n\n    if (utils.isPlainObject(header) || header instanceof this.constructor) {\n      setHeaders(header, valueOrRewrite)\n    } else if(utils.isString(header) && (header = header.trim()) && !isValidHeaderName(header)) {\n      setHeaders(parseHeaders(header), valueOrRewrite);\n    } else if (utils.isObject(header) && utils.isIterable(header)) {\n      let obj = {}, dest, key;\n      for (const entry of header) {\n        if (!utils.isArray(entry)) {\n          throw TypeError('Object iterator must return a key-value pair');\n        }\n\n        obj[key = entry[0]] = (dest = obj[key]) ?\n          (utils.isArray(dest) ? [...dest, entry[1]] : [dest, entry[1]]) : entry[1];\n      }\n\n      setHeaders(obj, valueOrRewrite)\n    } else {\n      header != null && setHeader(valueOrRewrite, header, rewrite);\n    }\n\n    return this;\n  }\n\n  get(header, parser) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      if (key) {\n        const value = this[key];\n\n        if (!parser) {\n          return value;\n        }\n\n        if (parser === true) {\n          return parseTokens(value);\n        }\n\n        if (utils.isFunction(parser)) {\n          return parser.call(this, value, key);\n        }\n\n        if (utils.isRegExp(parser)) {\n          return parser.exec(value);\n        }\n\n        throw new TypeError('parser must be boolean|regexp|function');\n      }\n    }\n  }\n\n  has(header, matcher) {\n    header = normalizeHeader(header);\n\n    if (header) {\n      const key = utils.findKey(this, header);\n\n      return !!(key && this[key] !== undefined && (!matcher || matchHeaderValue(this, this[key], key, matcher)));\n    }\n\n    return false;\n  }\n\n  delete(header, matcher) {\n    const self = this;\n    let deleted = false;\n\n    function deleteHeader(_header) {\n      _header = normalizeHeader(_header);\n\n      if (_header) {\n        const key = utils.findKey(self, _header);\n\n        if (key && (!matcher || matchHeaderValue(self, self[key], key, matcher))) {\n          delete self[key];\n\n          deleted = true;\n        }\n      }\n    }\n\n    if (utils.isArray(header)) {\n      header.forEach(deleteHeader);\n    } else {\n      deleteHeader(header);\n    }\n\n    return deleted;\n  }\n\n  clear(matcher) {\n    const keys = Object.keys(this);\n    let i = keys.length;\n    let deleted = false;\n\n    while (i--) {\n      const key = keys[i];\n      if(!matcher || matchHeaderValue(this, this[key], key, matcher, true)) {\n        delete this[key];\n        deleted = true;\n      }\n    }\n\n    return deleted;\n  }\n\n  normalize(format) {\n    const self = this;\n    const headers = {};\n\n    utils.forEach(this, (value, header) => {\n      const key = utils.findKey(headers, header);\n\n      if (key) {\n        self[key] = normalizeValue(value);\n        delete self[header];\n        return;\n      }\n\n      const normalized = format ? formatHeader(header) : String(header).trim();\n\n      if (normalized !== header) {\n        delete self[header];\n      }\n\n      self[normalized] = normalizeValue(value);\n\n      headers[normalized] = true;\n    });\n\n    return this;\n  }\n\n  concat(...targets) {\n    return this.constructor.concat(this, ...targets);\n  }\n\n  toJSON(asStrings) {\n    const obj = Object.create(null);\n\n    utils.forEach(this, (value, header) => {\n      value != null && value !== false && (obj[header] = asStrings && utils.isArray(value) ? value.join(', ') : value);\n    });\n\n    return obj;\n  }\n\n  [Symbol.iterator]() {\n    return Object.entries(this.toJSON())[Symbol.iterator]();\n  }\n\n  toString() {\n    return Object.entries(this.toJSON()).map(([header, value]) => header + ': ' + value).join('\\n');\n  }\n\n  getSetCookie() {\n    return this.get(\"set-cookie\") || [];\n  }\n\n  get [Symbol.toStringTag]() {\n    return 'AxiosHeaders';\n  }\n\n  static from(thing) {\n    return thing instanceof this ? thing : new this(thing);\n  }\n\n  static concat(first, ...targets) {\n    const computed = new this(first);\n\n    targets.forEach((target) => computed.set(target));\n\n    return computed;\n  }\n\n  static accessor(header) {\n    const internals = this[$internals] = (this[$internals] = {\n      accessors: {}\n    });\n\n    const accessors = internals.accessors;\n    const prototype = this.prototype;\n\n    function defineAccessor(_header) {\n      const lHeader = normalizeHeader(_header);\n\n      if (!accessors[lHeader]) {\n        buildAccessors(prototype, _header);\n        accessors[lHeader] = true;\n      }\n    }\n\n    utils.isArray(header) ? header.forEach(defineAccessor) : defineAccessor(header);\n\n    return this;\n  }\n}\n\nAxiosHeaders.accessor(['Content-Type', 'Content-Length', 'Accept', 'Accept-Encoding', 'User-Agent', 'Authorization']);\n\n// reserved names hotfix\nutils.reduceDescriptors(AxiosHeaders.prototype, ({value}, key) => {\n  let mapped = key[0].toUpperCase() + key.slice(1); // map `set` => `Set`\n  return {\n    get: () => value,\n    set(headerValue) {\n      this[mapped] = headerValue;\n    }\n  }\n});\n\nutils.freezeMethods(AxiosHeaders);\n\nexport default AxiosHeaders;\n","'use strict';\n\nimport utils from './../utils.js';\nimport defaults from '../defaults/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Array|Function} fns A single function or Array of functions\n * @param {?Object} response The response object\n *\n * @returns {*} The resulting transformed data\n */\nexport default function transformData(fns, response) {\n  const config = this || defaults;\n  const context = response || config;\n  const headers = AxiosHeaders.from(context.headers);\n  let data = context.data;\n\n  utils.forEach(fns, function transform(fn) {\n    data = fn.call(config, data, headers.normalize(), response ? response.status : undefined);\n  });\n\n  headers.normalize();\n\n  return data;\n}\n","'use strict';\n\nexport default function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n}\n","'use strict';\n\nimport AxiosError from '../core/AxiosError.js';\nimport utils from '../utils.js';\n\n/**\n * A `CanceledError` is an object that is thrown when an operation is canceled.\n *\n * @param {string=} message The message.\n * @param {Object=} config The config.\n * @param {Object=} request The request.\n *\n * @returns {CanceledError} The created error.\n */\nfunction CanceledError(message, config, request) {\n  // eslint-disable-next-line no-eq-null,eqeqeq\n  AxiosError.call(this, message == null ? 'canceled' : message, AxiosError.ERR_CANCELED, config, request);\n  this.name = 'CanceledError';\n}\n\nutils.inherits(CanceledError, AxiosError, {\n  __CANCEL__: true\n});\n\nexport default CanceledError;\n","'use strict';\n\nimport AxiosError from './AxiosError.js';\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n *\n * @returns {object} The response.\n */\nexport default function settle(resolve, reject, response) {\n  const validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(new AxiosError(\n      'Request failed with status code ' + response.status,\n      [AxiosError.ERR_BAD_REQUEST, AxiosError.ERR_BAD_RESPONSE][Math.floor(response.status / 100) - 4],\n      response.config,\n      response.request,\n      response\n    ));\n  }\n}\n","'use strict';\n\nexport default function parseProtocol(url) {\n  const match = /^([-+\\w]{1,25})(:?\\/\\/|:)/.exec(url);\n  return match && match[1] || '';\n}\n","'use strict';\n\n/**\n * Calculate data maxRate\n * @param {Number} [samplesCount= 10]\n * @param {Number} [min= 1000]\n * @returns {Function}\n */\nfunction speedometer(samplesCount, min) {\n  samplesCount = samplesCount || 10;\n  const bytes = new Array(samplesCount);\n  const timestamps = new Array(samplesCount);\n  let head = 0;\n  let tail = 0;\n  let firstSampleTS;\n\n  min = min !== undefined ? min : 1000;\n\n  return function push(chunkLength) {\n    const now = Date.now();\n\n    const startedAt = timestamps[tail];\n\n    if (!firstSampleTS) {\n      firstSampleTS = now;\n    }\n\n    bytes[head] = chunkLength;\n    timestamps[head] = now;\n\n    let i = tail;\n    let bytesCount = 0;\n\n    while (i !== head) {\n      bytesCount += bytes[i++];\n      i = i % samplesCount;\n    }\n\n    head = (head + 1) % samplesCount;\n\n    if (head === tail) {\n      tail = (tail + 1) % samplesCount;\n    }\n\n    if (now - firstSampleTS < min) {\n      return;\n    }\n\n    const passed = startedAt && now - startedAt;\n\n    return passed ? Math.round(bytesCount * 1000 / passed) : undefined;\n  };\n}\n\nexport default speedometer;\n","/**\n * Throttle decorator\n * @param {Function} fn\n * @param {Number} freq\n * @return {Function}\n */\nfunction throttle(fn, freq) {\n  let timestamp = 0;\n  let threshold = 1000 / freq;\n  let lastArgs;\n  let timer;\n\n  const invoke = (args, now = Date.now()) => {\n    timestamp = now;\n    lastArgs = null;\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n    fn(...args);\n  }\n\n  const throttled = (...args) => {\n    const now = Date.now();\n    const passed = now - timestamp;\n    if ( passed >= threshold) {\n      invoke(args, now);\n    } else {\n      lastArgs = args;\n      if (!timer) {\n        timer = setTimeout(() => {\n          timer = null;\n          invoke(lastArgs)\n        }, threshold - passed);\n      }\n    }\n  }\n\n  const flush = () => lastArgs && invoke(lastArgs);\n\n  return [throttled, flush];\n}\n\nexport default throttle;\n","import speedometer from \"./speedometer.js\";\nimport throttle from \"./throttle.js\";\nimport utils from \"../utils.js\";\n\nexport const progressEventReducer = (listener, isDownloadStream, freq = 3) => {\n  let bytesNotified = 0;\n  const _speedometer = speedometer(50, 250);\n\n  return throttle(e => {\n    const loaded = e.loaded;\n    const total = e.lengthComputable ? e.total : undefined;\n    const progressBytes = loaded - bytesNotified;\n    const rate = _speedometer(progressBytes);\n    const inRange = loaded <= total;\n\n    bytesNotified = loaded;\n\n    const data = {\n      loaded,\n      total,\n      progress: total ? (loaded / total) : undefined,\n      bytes: progressBytes,\n      rate: rate ? rate : undefined,\n      estimated: rate && total && inRange ? (total - loaded) / rate : undefined,\n      event: e,\n      lengthComputable: total != null,\n      [isDownloadStream ? 'download' : 'upload']: true\n    };\n\n    listener(data);\n  }, freq);\n}\n\nexport const progressEventDecorator = (total, throttled) => {\n  const lengthComputable = total != null;\n\n  return [(loaded) => throttled[0]({\n    lengthComputable,\n    total,\n    loaded\n  }), throttled[1]];\n}\n\nexport const asyncDecorator = (fn) => (...args) => utils.asap(() => fn(...args));\n","import platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ? ((origin, isMSIE) => (url) => {\n  url = new URL(url, platform.origin);\n\n  return (\n    origin.protocol === url.protocol &&\n    origin.host === url.host &&\n    (isMSIE || origin.port === url.port)\n  );\n})(\n  new URL(platform.origin),\n  platform.navigator && /(msie|trident)/i.test(platform.navigator.userAgent)\n) : () => true;\n","import utils from './../utils.js';\nimport platform from '../platform/index.js';\n\nexport default platform.hasStandardBrowserEnv ?\n\n  // Standard browser envs support document.cookie\n  {\n    write(name, value, expires, path, domain, secure) {\n      const cookie = [name + '=' + encodeURIComponent(value)];\n\n      utils.isNumber(expires) && cookie.push('expires=' + new Date(expires).toGMTString());\n\n      utils.isString(path) && cookie.push('path=' + path);\n\n      utils.isString(domain) && cookie.push('domain=' + domain);\n\n      secure === true && cookie.push('secure');\n\n      document.cookie = cookie.join('; ');\n    },\n\n    read(name) {\n      const match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n      return (match ? decodeURIComponent(match[3]) : null);\n    },\n\n    remove(name) {\n      this.write(name, '', Date.now() - 86400000);\n    }\n  }\n\n  :\n\n  // Non-standard browser env (web workers, react-native) lack needed support.\n  {\n    write() {},\n    read() {\n      return null;\n    },\n    remove() {}\n  };\n\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n *\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nexport default function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d+\\-.]*:)?\\/\\//i.test(url);\n}\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n *\n * @returns {string} The combined URL\n */\nexport default function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/?\\/$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n}\n","'use strict';\n\nimport isAbsoluteURL from '../helpers/isAbsoluteURL.js';\nimport combineURLs from '../helpers/combineURLs.js';\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n *\n * @returns {string} The combined full path\n */\nexport default function buildFullPath(baseURL, requestedURL, allowAbsoluteUrls) {\n  let isRelativeUrl = !isAbsoluteURL(requestedURL);\n  if (baseURL && (isRelativeUrl || allowAbsoluteUrls == false)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n}\n","'use strict';\n\nimport utils from '../utils.js';\nimport AxiosHeaders from \"./AxiosHeaders.js\";\n\nconst headersToObject = (thing) => thing instanceof AxiosHeaders ? { ...thing } : thing;\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n *\n * @returns {Object} New object resulting from merging config2 to config1\n */\nexport default function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  const config = {};\n\n  function getMergedValue(target, source, prop, caseless) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge.call({caseless}, target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDeepProperties(a, b, prop , caseless) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(a, b, prop , caseless);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a, prop , caseless);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function valueFromConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function defaultToConfig2(a, b) {\n    if (!utils.isUndefined(b)) {\n      return getMergedValue(undefined, b);\n    } else if (!utils.isUndefined(a)) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  // eslint-disable-next-line consistent-return\n  function mergeDirectKeys(a, b, prop) {\n    if (prop in config2) {\n      return getMergedValue(a, b);\n    } else if (prop in config1) {\n      return getMergedValue(undefined, a);\n    }\n  }\n\n  const mergeMap = {\n    url: valueFromConfig2,\n    method: valueFromConfig2,\n    data: valueFromConfig2,\n    baseURL: defaultToConfig2,\n    transformRequest: defaultToConfig2,\n    transformResponse: defaultToConfig2,\n    paramsSerializer: defaultToConfig2,\n    timeout: defaultToConfig2,\n    timeoutMessage: defaultToConfig2,\n    withCredentials: defaultToConfig2,\n    withXSRFToken: defaultToConfig2,\n    adapter: defaultToConfig2,\n    responseType: defaultToConfig2,\n    xsrfCookieName: defaultToConfig2,\n    xsrfHeaderName: defaultToConfig2,\n    onUploadProgress: defaultToConfig2,\n    onDownloadProgress: defaultToConfig2,\n    decompress: defaultToConfig2,\n    maxContentLength: defaultToConfig2,\n    maxBodyLength: defaultToConfig2,\n    beforeRedirect: defaultToConfig2,\n    transport: defaultToConfig2,\n    httpAgent: defaultToConfig2,\n    httpsAgent: defaultToConfig2,\n    cancelToken: defaultToConfig2,\n    socketPath: defaultToConfig2,\n    responseEncoding: defaultToConfig2,\n    validateStatus: mergeDirectKeys,\n    headers: (a, b , prop) => mergeDeepProperties(headersToObject(a), headersToObject(b),prop, true)\n  };\n\n  utils.forEach(Object.keys({...config1, ...config2}), function computeConfigValue(prop) {\n    const merge = mergeMap[prop] || mergeDeepProperties;\n    const configValue = merge(config1[prop], config2[prop], prop);\n    (utils.isUndefined(configValue) && merge !== mergeDirectKeys) || (config[prop] = configValue);\n  });\n\n  return config;\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport isURLSameOrigin from \"./isURLSameOrigin.js\";\nimport cookies from \"./cookies.js\";\nimport buildFullPath from \"../core/buildFullPath.js\";\nimport mergeConfig from \"../core/mergeConfig.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport buildURL from \"./buildURL.js\";\n\nexport default (config) => {\n  const newConfig = mergeConfig({}, config);\n\n  let { data, withXSRFToken, xsrfHeaderName, xsrfCookieName, headers, auth } = newConfig;\n\n  newConfig.headers = headers = AxiosHeaders.from(headers);\n\n  newConfig.url = buildURL(buildFullPath(newConfig.baseURL, newConfig.url, newConfig.allowAbsoluteUrls), config.params, config.paramsSerializer);\n\n  // HTTP basic authentication\n  if (auth) {\n    headers.set('Authorization', 'Basic ' +\n      btoa((auth.username || '') + ':' + (auth.password ? unescape(encodeURIComponent(auth.password)) : ''))\n    );\n  }\n\n  if (utils.isFormData(data)) {\n    if (platform.hasStandardBrowserEnv || platform.hasStandardBrowserWebWorkerEnv) {\n      headers.setContentType(undefined); // browser handles it\n    } else if (utils.isFunction(data.getHeaders)) {\n      // Node.js FormData (like form-data package)\n      const formHeaders = data.getHeaders();\n      // Only set safe headers to avoid overwriting security headers\n      const allowedHeaders = ['content-type', 'content-length'];\n      Object.entries(formHeaders).forEach(([key, val]) => {\n        if (allowedHeaders.includes(key.toLowerCase())) {\n          headers.set(key, val);\n        }\n      });\n    }\n  }  \n\n  // Add xsrf header\n  // This is only done if running in a standard browser environment.\n  // Specifically not if we're in a web worker, or react-native.\n\n  if (platform.hasStandardBrowserEnv) {\n    withXSRFToken && utils.isFunction(withXSRFToken) && (withXSRFToken = withXSRFToken(newConfig));\n\n    if (withXSRFToken || (withXSRFToken !== false && isURLSameOrigin(newConfig.url))) {\n      // Add xsrf header\n      const xsrfValue = xsrfHeaderName && xsrfCookieName && cookies.read(xsrfCookieName);\n\n      if (xsrfValue) {\n        headers.set(xsrfHeaderName, xsrfValue);\n      }\n    }\n  }\n\n  return newConfig;\n}\n\n","import utils from './../utils.js';\nimport settle from './../core/settle.js';\nimport transitionalDefaults from '../defaults/transitional.js';\nimport AxiosError from '../core/AxiosError.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport parseProtocol from '../helpers/parseProtocol.js';\nimport platform from '../platform/index.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport {progressEventReducer} from '../helpers/progressEventReducer.js';\nimport resolveConfig from \"../helpers/resolveConfig.js\";\n\nconst isXHRAdapterSupported = typeof XMLHttpRequest !== 'undefined';\n\nexport default isXHRAdapterSupported && function (config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    const _config = resolveConfig(config);\n    let requestData = _config.data;\n    const requestHeaders = AxiosHeaders.from(_config.headers).normalize();\n    let {responseType, onUploadProgress, onDownloadProgress} = _config;\n    let onCanceled;\n    let uploadThrottled, downloadThrottled;\n    let flushUpload, flushDownload;\n\n    function done() {\n      flushUpload && flushUpload(); // flush events\n      flushDownload && flushDownload(); // flush events\n\n      _config.cancelToken && _config.cancelToken.unsubscribe(onCanceled);\n\n      _config.signal && _config.signal.removeEventListener('abort', onCanceled);\n    }\n\n    let request = new XMLHttpRequest();\n\n    request.open(_config.method.toUpperCase(), _config.url, true);\n\n    // Set the request timeout in MS\n    request.timeout = _config.timeout;\n\n    function onloadend() {\n      if (!request) {\n        return;\n      }\n      // Prepare the response\n      const responseHeaders = AxiosHeaders.from(\n        'getAllResponseHeaders' in request && request.getAllResponseHeaders()\n      );\n      const responseData = !responseType || responseType === 'text' || responseType === 'json' ?\n        request.responseText : request.response;\n      const response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config,\n        request\n      };\n\n      settle(function _resolve(value) {\n        resolve(value);\n        done();\n      }, function _reject(err) {\n        reject(err);\n        done();\n      }, response);\n\n      // Clean up request\n      request = null;\n    }\n\n    if ('onloadend' in request) {\n      // Use onloadend if available\n      request.onloadend = onloadend;\n    } else {\n      // Listen for ready state to emulate onloadend\n      request.onreadystatechange = function handleLoad() {\n        if (!request || request.readyState !== 4) {\n          return;\n        }\n\n        // The request errored out and we didn't get a response, this will be\n        // handled by onerror instead\n        // With one exception: request that using file: protocol, most browsers\n        // will return status as 0 even though it's a successful request\n        if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n          return;\n        }\n        // readystate handler is calling before onerror or ontimeout handlers,\n        // so we should call onloadend on the next 'tick'\n        setTimeout(onloadend);\n      };\n    }\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(new AxiosError('Request aborted', AxiosError.ECONNABORTED, config, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n  request.onerror = function handleError(event) {\n       // Browsers deliver a ProgressEvent in XHR onerror\n       // (message may be empty; when present, surface it)\n       // See https://developer.mozilla.org/docs/Web/API/XMLHttpRequest/error_event\n       const msg = event && event.message ? event.message : 'Network Error';\n       const err = new AxiosError(msg, AxiosError.ERR_NETWORK, config, request);\n       // attach the underlying event for consumers who want details\n       err.event = event || null;\n       reject(err);\n       request = null;\n    };\n    \n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      let timeoutErrorMessage = _config.timeout ? 'timeout of ' + _config.timeout + 'ms exceeded' : 'timeout exceeded';\n      const transitional = _config.transitional || transitionalDefaults;\n      if (_config.timeoutErrorMessage) {\n        timeoutErrorMessage = _config.timeoutErrorMessage;\n      }\n      reject(new AxiosError(\n        timeoutErrorMessage,\n        transitional.clarifyTimeoutError ? AxiosError.ETIMEDOUT : AxiosError.ECONNABORTED,\n        config,\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Remove Content-Type if data is undefined\n    requestData === undefined && requestHeaders.setContentType(null);\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders.toJSON(), function setRequestHeader(val, key) {\n        request.setRequestHeader(key, val);\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(_config.withCredentials)) {\n      request.withCredentials = !!_config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (responseType && responseType !== 'json') {\n      request.responseType = _config.responseType;\n    }\n\n    // Handle progress if needed\n    if (onDownloadProgress) {\n      ([downloadThrottled, flushDownload] = progressEventReducer(onDownloadProgress, true));\n      request.addEventListener('progress', downloadThrottled);\n    }\n\n    // Not all browsers support upload events\n    if (onUploadProgress && request.upload) {\n      ([uploadThrottled, flushUpload] = progressEventReducer(onUploadProgress));\n\n      request.upload.addEventListener('progress', uploadThrottled);\n\n      request.upload.addEventListener('loadend', flushUpload);\n    }\n\n    if (_config.cancelToken || _config.signal) {\n      // Handle cancellation\n      // eslint-disable-next-line func-names\n      onCanceled = cancel => {\n        if (!request) {\n          return;\n        }\n        reject(!cancel || cancel.type ? new CanceledError(null, config, request) : cancel);\n        request.abort();\n        request = null;\n      };\n\n      _config.cancelToken && _config.cancelToken.subscribe(onCanceled);\n      if (_config.signal) {\n        _config.signal.aborted ? onCanceled() : _config.signal.addEventListener('abort', onCanceled);\n      }\n    }\n\n    const protocol = parseProtocol(_config.url);\n\n    if (protocol && platform.protocols.indexOf(protocol) === -1) {\n      reject(new AxiosError('Unsupported protocol ' + protocol + ':', AxiosError.ERR_BAD_REQUEST, config));\n      return;\n    }\n\n\n    // Send the request\n    request.send(requestData || null);\n  });\n}\n","import CanceledError from \"../cancel/CanceledError.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport utils from '../utils.js';\n\nconst composeSignals = (signals, timeout) => {\n  const {length} = (signals = signals ? signals.filter(Boolean) : []);\n\n  if (timeout || length) {\n    let controller = new AbortController();\n\n    let aborted;\n\n    const onabort = function (reason) {\n      if (!aborted) {\n        aborted = true;\n        unsubscribe();\n        const err = reason instanceof Error ? reason : this.reason;\n        controller.abort(err instanceof AxiosError ? err : new CanceledError(err instanceof Error ? err.message : err));\n      }\n    }\n\n    let timer = timeout && setTimeout(() => {\n      timer = null;\n      onabort(new AxiosError(`timeout ${timeout} of ms exceeded`, AxiosError.ETIMEDOUT))\n    }, timeout)\n\n    const unsubscribe = () => {\n      if (signals) {\n        timer && clearTimeout(timer);\n        timer = null;\n        signals.forEach(signal => {\n          signal.unsubscribe ? signal.unsubscribe(onabort) : signal.removeEventListener('abort', onabort);\n        });\n        signals = null;\n      }\n    }\n\n    signals.forEach((signal) => signal.addEventListener('abort', onabort));\n\n    const {signal} = controller;\n\n    signal.unsubscribe = () => utils.asap(unsubscribe);\n\n    return signal;\n  }\n}\n\nexport default composeSignals;\n","\nexport const streamChunk = function* (chunk, chunkSize) {\n  let len = chunk.byteLength;\n\n  if (!chunkSize || len < chunkSize) {\n    yield chunk;\n    return;\n  }\n\n  let pos = 0;\n  let end;\n\n  while (pos < len) {\n    end = pos + chunkSize;\n    yield chunk.slice(pos, end);\n    pos = end;\n  }\n}\n\nexport const readBytes = async function* (iterable, chunkSize) {\n  for await (const chunk of readStream(iterable)) {\n    yield* streamChunk(chunk, chunkSize);\n  }\n}\n\nconst readStream = async function* (stream) {\n  if (stream[Symbol.asyncIterator]) {\n    yield* stream;\n    return;\n  }\n\n  const reader = stream.getReader();\n  try {\n    for (;;) {\n      const {done, value} = await reader.read();\n      if (done) {\n        break;\n      }\n      yield value;\n    }\n  } finally {\n    await reader.cancel();\n  }\n}\n\nexport const trackStream = (stream, chunkSize, onProgress, onFinish) => {\n  const iterator = readBytes(stream, chunkSize);\n\n  let bytes = 0;\n  let done;\n  let _onFinish = (e) => {\n    if (!done) {\n      done = true;\n      onFinish && onFinish(e);\n    }\n  }\n\n  return new ReadableStream({\n    async pull(controller) {\n      try {\n        const {done, value} = await iterator.next();\n\n        if (done) {\n         _onFinish();\n          controller.close();\n          return;\n        }\n\n        let len = value.byteLength;\n        if (onProgress) {\n          let loadedBytes = bytes += len;\n          onProgress(loadedBytes);\n        }\n        controller.enqueue(new Uint8Array(value));\n      } catch (err) {\n        _onFinish(err);\n        throw err;\n      }\n    },\n    cancel(reason) {\n      _onFinish(reason);\n      return iterator.return();\n    }\n  }, {\n    highWaterMark: 2\n  })\n}\n","import platform from \"../platform/index.js\";\nimport utils from \"../utils.js\";\nimport AxiosError from \"../core/AxiosError.js\";\nimport composeSignals from \"../helpers/composeSignals.js\";\nimport {trackStream} from \"../helpers/trackStream.js\";\nimport AxiosHeaders from \"../core/AxiosHeaders.js\";\nimport {progressEventReducer, progressEventDecorator, asyncDecorator} from \"../helpers/progressEventReducer.js\";\nimport resolveConfig from \"../helpers/resolveConfig.js\";\nimport settle from \"../core/settle.js\";\n\nconst DEFAULT_CHUNK_SIZE = 64 * 1024;\n\nconst {isFunction} = utils;\n\nconst globalFetchAPI = (({Request, Response}) => ({\n  Request, Response\n}))(utils.global);\n\nconst {\n  ReadableStream, TextEncoder\n} = utils.global;\n\n\nconst test = (fn, ...args) => {\n  try {\n    return !!fn(...args);\n  } catch (e) {\n    return false\n  }\n}\n\nconst factory = (env) => {\n  env = utils.merge.call({\n    skipUndefined: true\n  }, globalFetchAPI, env);\n\n  const {fetch: envFetch, Request, Response} = env;\n  const isFetchSupported = envFetch ? isFunction(envFetch) : typeof fetch === 'function';\n  const isRequestSupported = isFunction(Request);\n  const isResponseSupported = isFunction(Response);\n\n  if (!isFetchSupported) {\n    return false;\n  }\n\n  const isReadableStreamSupported = isFetchSupported && isFunction(ReadableStream);\n\n  const encodeText = isFetchSupported && (typeof TextEncoder === 'function' ?\n      ((encoder) => (str) => encoder.encode(str))(new TextEncoder()) :\n      async (str) => new Uint8Array(await new Request(str).arrayBuffer())\n  );\n\n  const supportsRequestStream = isRequestSupported && isReadableStreamSupported && test(() => {\n    let duplexAccessed = false;\n\n    const hasContentType = new Request(platform.origin, {\n      body: new ReadableStream(),\n      method: 'POST',\n      get duplex() {\n        duplexAccessed = true;\n        return 'half';\n      },\n    }).headers.has('Content-Type');\n\n    return duplexAccessed && !hasContentType;\n  });\n\n  const supportsResponseStream = isResponseSupported && isReadableStreamSupported &&\n    test(() => utils.isReadableStream(new Response('').body));\n\n  const resolvers = {\n    stream: supportsResponseStream && ((res) => res.body)\n  };\n\n  isFetchSupported && ((() => {\n    ['text', 'arrayBuffer', 'blob', 'formData', 'stream'].forEach(type => {\n      !resolvers[type] && (resolvers[type] = (res, config) => {\n        let method = res && res[type];\n\n        if (method) {\n          return method.call(res);\n        }\n\n        throw new AxiosError(`Response type '${type}' is not supported`, AxiosError.ERR_NOT_SUPPORT, config);\n      })\n    });\n  })());\n\n  const getBodyLength = async (body) => {\n    if (body == null) {\n      return 0;\n    }\n\n    if (utils.isBlob(body)) {\n      return body.size;\n    }\n\n    if (utils.isSpecCompliantForm(body)) {\n      const _request = new Request(platform.origin, {\n        method: 'POST',\n        body,\n      });\n      return (await _request.arrayBuffer()).byteLength;\n    }\n\n    if (utils.isArrayBufferView(body) || utils.isArrayBuffer(body)) {\n      return body.byteLength;\n    }\n\n    if (utils.isURLSearchParams(body)) {\n      body = body + '';\n    }\n\n    if (utils.isString(body)) {\n      return (await encodeText(body)).byteLength;\n    }\n  }\n\n  const resolveBodyLength = async (headers, body) => {\n    const length = utils.toFiniteNumber(headers.getContentLength());\n\n    return length == null ? getBodyLength(body) : length;\n  }\n\n  return async (config) => {\n    let {\n      url,\n      method,\n      data,\n      signal,\n      cancelToken,\n      timeout,\n      onDownloadProgress,\n      onUploadProgress,\n      responseType,\n      headers,\n      withCredentials = 'same-origin',\n      fetchOptions\n    } = resolveConfig(config);\n\n    let _fetch = envFetch || fetch;\n\n    responseType = responseType ? (responseType + '').toLowerCase() : 'text';\n\n    let composedSignal = composeSignals([signal, cancelToken && cancelToken.toAbortSignal()], timeout);\n\n    let request = null;\n\n    const unsubscribe = composedSignal && composedSignal.unsubscribe && (() => {\n      composedSignal.unsubscribe();\n    });\n\n    let requestContentLength;\n\n    try {\n      if (\n        onUploadProgress && supportsRequestStream && method !== 'get' && method !== 'head' &&\n        (requestContentLength = await resolveBodyLength(headers, data)) !== 0\n      ) {\n        let _request = new Request(url, {\n          method: 'POST',\n          body: data,\n          duplex: \"half\"\n        });\n\n        let contentTypeHeader;\n\n        if (utils.isFormData(data) && (contentTypeHeader = _request.headers.get('content-type'))) {\n          headers.setContentType(contentTypeHeader)\n        }\n\n        if (_request.body) {\n          const [onProgress, flush] = progressEventDecorator(\n            requestContentLength,\n            progressEventReducer(asyncDecorator(onUploadProgress))\n          );\n\n          data = trackStream(_request.body, DEFAULT_CHUNK_SIZE, onProgress, flush);\n        }\n      }\n\n      if (!utils.isString(withCredentials)) {\n        withCredentials = withCredentials ? 'include' : 'omit';\n      }\n\n      // Cloudflare Workers throws when credentials are defined\n      // see https://github.com/cloudflare/workerd/issues/902\n      const isCredentialsSupported = isRequestSupported && \"credentials\" in Request.prototype;\n\n      const resolvedOptions = {\n        ...fetchOptions,\n        signal: composedSignal,\n        method: method.toUpperCase(),\n        headers: headers.normalize().toJSON(),\n        body: data,\n        duplex: \"half\",\n        credentials: isCredentialsSupported ? withCredentials : undefined\n      };\n\n      request = isRequestSupported && new Request(url, resolvedOptions);\n\n      let response = await (isRequestSupported ? _fetch(request, fetchOptions) : _fetch(url, resolvedOptions));\n\n      const isStreamResponse = supportsResponseStream && (responseType === 'stream' || responseType === 'response');\n\n      if (supportsResponseStream && (onDownloadProgress || (isStreamResponse && unsubscribe))) {\n        const options = {};\n\n        ['status', 'statusText', 'headers'].forEach(prop => {\n          options[prop] = response[prop];\n        });\n\n        const responseContentLength = utils.toFiniteNumber(response.headers.get('content-length'));\n\n        const [onProgress, flush] = onDownloadProgress && progressEventDecorator(\n          responseContentLength,\n          progressEventReducer(asyncDecorator(onDownloadProgress), true)\n        ) || [];\n\n        response = new Response(\n          trackStream(response.body, DEFAULT_CHUNK_SIZE, onProgress, () => {\n            flush && flush();\n            unsubscribe && unsubscribe();\n          }),\n          options\n        );\n      }\n\n      responseType = responseType || 'text';\n\n      let responseData = await resolvers[utils.findKey(resolvers, responseType) || 'text'](response, config);\n\n      !isStreamResponse && unsubscribe && unsubscribe();\n\n      return await new Promise((resolve, reject) => {\n        settle(resolve, reject, {\n          data: responseData,\n          headers: AxiosHeaders.from(response.headers),\n          status: response.status,\n          statusText: response.statusText,\n          config,\n          request\n        })\n      })\n    } catch (err) {\n      unsubscribe && unsubscribe();\n\n      if (err && err.name === 'TypeError' && /Load failed|fetch/i.test(err.message)) {\n        throw Object.assign(\n          new AxiosError('Network Error', AxiosError.ERR_NETWORK, config, request),\n          {\n            cause: err.cause || err\n          }\n        )\n      }\n\n      throw AxiosError.from(err, err && err.code, config, request);\n    }\n  }\n}\n\nconst seedCache = new Map();\n\nexport const getFetch = (config) => {\n  let env = config ? config.env : {};\n  const {fetch, Request, Response} = env;\n  const seeds = [\n    Request, Response, fetch\n  ];\n\n  let len = seeds.length, i = len,\n    seed, target, map = seedCache;\n\n  while (i--) {\n    seed = seeds[i];\n    target = map.get(seed);\n\n    target === undefined && map.set(seed, target = (i ? new Map() : factory(env)))\n\n    map = target;\n  }\n\n  return target;\n};\n\nconst adapter = getFetch();\n\nexport default adapter;\n","import utils from '../utils.js';\nimport httpAdapter from './http.js';\nimport xhrAdapter from './xhr.js';\nimport * as fetchAdapter from './fetch.js';\nimport AxiosError from \"../core/AxiosError.js\";\n\nconst knownAdapters = {\n  http: httpAdapter,\n  xhr: xhrAdapter,\n  fetch: {\n    get: fetchAdapter.getFetch,\n  }\n}\n\nutils.forEach(knownAdapters, (fn, value) => {\n  if (fn) {\n    try {\n      Object.defineProperty(fn, 'name', {value});\n    } catch (e) {\n      // eslint-disable-next-line no-empty\n    }\n    Object.defineProperty(fn, 'adapterName', {value});\n  }\n});\n\nconst renderReason = (reason) => `- ${reason}`;\n\nconst isResolvedHandle = (adapter) => utils.isFunction(adapter) || adapter === null || adapter === false;\n\nexport default {\n  getAdapter: (adapters, config) => {\n    adapters = utils.isArray(adapters) ? adapters : [adapters];\n\n    const {length} = adapters;\n    let nameOrAdapter;\n    let adapter;\n\n    const rejectedReasons = {};\n\n    for (let i = 0; i < length; i++) {\n      nameOrAdapter = adapters[i];\n      let id;\n\n      adapter = nameOrAdapter;\n\n      if (!isResolvedHandle(nameOrAdapter)) {\n        adapter = knownAdapters[(id = String(nameOrAdapter)).toLowerCase()];\n\n        if (adapter === undefined) {\n          throw new AxiosError(`Unknown adapter '${id}'`);\n        }\n      }\n\n      if (adapter && (utils.isFunction(adapter) || (adapter = adapter.get(config)))) {\n        break;\n      }\n\n      rejectedReasons[id || '#' + i] = adapter;\n    }\n\n    if (!adapter) {\n\n      const reasons = Object.entries(rejectedReasons)\n        .map(([id, state]) => `adapter ${id} ` +\n          (state === false ? 'is not supported by the environment' : 'is not available in the build')\n        );\n\n      let s = length ?\n        (reasons.length > 1 ? 'since :\\n' + reasons.map(renderReason).join('\\n') : ' ' + renderReason(reasons[0])) :\n        'as no adapter specified';\n\n      throw new AxiosError(\n        `There is no suitable adapter to dispatch the request ` + s,\n        'ERR_NOT_SUPPORT'\n      );\n    }\n\n    return adapter;\n  },\n  adapters: knownAdapters\n}\n","'use strict';\n\nimport transformData from './transformData.js';\nimport isCancel from '../cancel/isCancel.js';\nimport defaults from '../defaults/index.js';\nimport CanceledError from '../cancel/CanceledError.js';\nimport AxiosHeaders from '../core/AxiosHeaders.js';\nimport adapters from \"../adapters/adapters.js\";\n\n/**\n * Throws a `CanceledError` if cancellation has been requested.\n *\n * @param {Object} config The config that is to be used for the request\n *\n * @returns {void}\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n\n  if (config.signal && config.signal.aborted) {\n    throw new CanceledError(null, config);\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n *\n * @returns {Promise} The Promise to be fulfilled\n */\nexport default function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  config.headers = AxiosHeaders.from(config.headers);\n\n  // Transform request data\n  config.data = transformData.call(\n    config,\n    config.transformRequest\n  );\n\n  if (['post', 'put', 'patch'].indexOf(config.method) !== -1) {\n    config.headers.setContentType('application/x-www-form-urlencoded', false);\n  }\n\n  const adapter = adapters.getAdapter(config.adapter || defaults.adapter, config);\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData.call(\n      config,\n      config.transformResponse,\n      response\n    );\n\n    response.headers = AxiosHeaders.from(response.headers);\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData.call(\n          config,\n          config.transformResponse,\n          reason.response\n        );\n        reason.response.headers = AxiosHeaders.from(reason.response.headers);\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n}\n","export const VERSION = \"1.12.2\";","'use strict';\n\nimport {VERSION} from '../env/data.js';\nimport AxiosError from '../core/AxiosError.js';\n\nconst validators = {};\n\n// eslint-disable-next-line func-names\n['object', 'boolean', 'number', 'function', 'string', 'symbol'].forEach((type, i) => {\n  validators[type] = function validator(thing) {\n    return typeof thing === type || 'a' + (i < 1 ? 'n ' : ' ') + type;\n  };\n});\n\nconst deprecatedWarnings = {};\n\n/**\n * Transitional option validator\n *\n * @param {function|boolean?} validator - set to false if the transitional option has been removed\n * @param {string?} version - deprecated version / removed since version\n * @param {string?} message - some message with additional info\n *\n * @returns {function}\n */\nvalidators.transitional = function transitional(validator, version, message) {\n  function formatMessage(opt, desc) {\n    return '[Axios v' + VERSION + '] Transitional option \\'' + opt + '\\'' + desc + (message ? '. ' + message : '');\n  }\n\n  // eslint-disable-next-line func-names\n  return (value, opt, opts) => {\n    if (validator === false) {\n      throw new AxiosError(\n        formatMessage(opt, ' has been removed' + (version ? ' in ' + version : '')),\n        AxiosError.ERR_DEPRECATED\n      );\n    }\n\n    if (version && !deprecatedWarnings[opt]) {\n      deprecatedWarnings[opt] = true;\n      // eslint-disable-next-line no-console\n      console.warn(\n        formatMessage(\n          opt,\n          ' has been deprecated since v' + version + ' and will be removed in the near future'\n        )\n      );\n    }\n\n    return validator ? validator(value, opt, opts) : true;\n  };\n};\n\nvalidators.spelling = function spelling(correctSpelling) {\n  return (value, opt) => {\n    // eslint-disable-next-line no-console\n    console.warn(`${opt} is likely a misspelling of ${correctSpelling}`);\n    return true;\n  }\n};\n\n/**\n * Assert object's properties type\n *\n * @param {object} options\n * @param {object} schema\n * @param {boolean?} allowUnknown\n *\n * @returns {object}\n */\n\nfunction assertOptions(options, schema, allowUnknown) {\n  if (typeof options !== 'object') {\n    throw new AxiosError('options must be an object', AxiosError.ERR_BAD_OPTION_VALUE);\n  }\n  const keys = Object.keys(options);\n  let i = keys.length;\n  while (i-- > 0) {\n    const opt = keys[i];\n    const validator = schema[opt];\n    if (validator) {\n      const value = options[opt];\n      const result = value === undefined || validator(value, opt, options);\n      if (result !== true) {\n        throw new AxiosError('option ' + opt + ' must be ' + result, AxiosError.ERR_BAD_OPTION_VALUE);\n      }\n      continue;\n    }\n    if (allowUnknown !== true) {\n      throw new AxiosError('Unknown option ' + opt, AxiosError.ERR_BAD_OPTION);\n    }\n  }\n}\n\nexport default {\n  assertOptions,\n  validators\n};\n","'use strict';\n\nimport utils from './../utils.js';\nimport buildURL from '../helpers/buildURL.js';\nimport InterceptorManager from './InterceptorManager.js';\nimport dispatchRequest from './dispatchRequest.js';\nimport mergeConfig from './mergeConfig.js';\nimport buildFullPath from './buildFullPath.js';\nimport validator from '../helpers/validator.js';\nimport AxiosHeaders from './AxiosHeaders.js';\n\nconst validators = validator.validators;\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n *\n * @return {Axios} A new instance of Axios\n */\nclass Axios {\n  constructor(instanceConfig) {\n    this.defaults = instanceConfig || {};\n    this.interceptors = {\n      request: new InterceptorManager(),\n      response: new InterceptorManager()\n    };\n  }\n\n  /**\n   * Dispatch a request\n   *\n   * @param {String|Object} configOrUrl The config specific for this request (merged with this.defaults)\n   * @param {?Object} config\n   *\n   * @returns {Promise} The Promise to be fulfilled\n   */\n  async request(configOrUrl, config) {\n    try {\n      return await this._request(configOrUrl, config);\n    } catch (err) {\n      if (err instanceof Error) {\n        let dummy = {};\n\n        Error.captureStackTrace ? Error.captureStackTrace(dummy) : (dummy = new Error());\n\n        // slice off the Error: ... line\n        const stack = dummy.stack ? dummy.stack.replace(/^.+\\n/, '') : '';\n        try {\n          if (!err.stack) {\n            err.stack = stack;\n            // match without the 2 top stack lines\n          } else if (stack && !String(err.stack).endsWith(stack.replace(/^.+\\n.+\\n/, ''))) {\n            err.stack += '\\n' + stack\n          }\n        } catch (e) {\n          // ignore the case where \"stack\" is an un-writable property\n        }\n      }\n\n      throw err;\n    }\n  }\n\n  _request(configOrUrl, config) {\n    /*eslint no-param-reassign:0*/\n    // Allow for axios('example/url'[, config]) a la fetch API\n    if (typeof configOrUrl === 'string') {\n      config = config || {};\n      config.url = configOrUrl;\n    } else {\n      config = configOrUrl || {};\n    }\n\n    config = mergeConfig(this.defaults, config);\n\n    const {transitional, paramsSerializer, headers} = config;\n\n    if (transitional !== undefined) {\n      validator.assertOptions(transitional, {\n        silentJSONParsing: validators.transitional(validators.boolean),\n        forcedJSONParsing: validators.transitional(validators.boolean),\n        clarifyTimeoutError: validators.transitional(validators.boolean)\n      }, false);\n    }\n\n    if (paramsSerializer != null) {\n      if (utils.isFunction(paramsSerializer)) {\n        config.paramsSerializer = {\n          serialize: paramsSerializer\n        }\n      } else {\n        validator.assertOptions(paramsSerializer, {\n          encode: validators.function,\n          serialize: validators.function\n        }, true);\n      }\n    }\n\n    // Set config.allowAbsoluteUrls\n    if (config.allowAbsoluteUrls !== undefined) {\n      // do nothing\n    } else if (this.defaults.allowAbsoluteUrls !== undefined) {\n      config.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls;\n    } else {\n      config.allowAbsoluteUrls = true;\n    }\n\n    validator.assertOptions(config, {\n      baseUrl: validators.spelling('baseURL'),\n      withXsrfToken: validators.spelling('withXSRFToken')\n    }, true);\n\n    // Set config.method\n    config.method = (config.method || this.defaults.method || 'get').toLowerCase();\n\n    // Flatten headers\n    let contextHeaders = headers && utils.merge(\n      headers.common,\n      headers[config.method]\n    );\n\n    headers && utils.forEach(\n      ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n      (method) => {\n        delete headers[method];\n      }\n    );\n\n    config.headers = AxiosHeaders.concat(contextHeaders, headers);\n\n    // filter out skipped interceptors\n    const requestInterceptorChain = [];\n    let synchronousRequestInterceptors = true;\n    this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n      if (typeof interceptor.runWhen === 'function' && interceptor.runWhen(config) === false) {\n        return;\n      }\n\n      synchronousRequestInterceptors = synchronousRequestInterceptors && interceptor.synchronous;\n\n      requestInterceptorChain.unshift(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    const responseInterceptorChain = [];\n    this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n      responseInterceptorChain.push(interceptor.fulfilled, interceptor.rejected);\n    });\n\n    let promise;\n    let i = 0;\n    let len;\n\n    if (!synchronousRequestInterceptors) {\n      const chain = [dispatchRequest.bind(this), undefined];\n      chain.unshift(...requestInterceptorChain);\n      chain.push(...responseInterceptorChain);\n      len = chain.length;\n\n      promise = Promise.resolve(config);\n\n      while (i < len) {\n        promise = promise.then(chain[i++], chain[i++]);\n      }\n\n      return promise;\n    }\n\n    len = requestInterceptorChain.length;\n\n    let newConfig = config;\n\n    while (i < len) {\n      const onFulfilled = requestInterceptorChain[i++];\n      const onRejected = requestInterceptorChain[i++];\n      try {\n        newConfig = onFulfilled(newConfig);\n      } catch (error) {\n        onRejected.call(this, error);\n        break;\n      }\n    }\n\n    try {\n      promise = dispatchRequest.call(this, newConfig);\n    } catch (error) {\n      return Promise.reject(error);\n    }\n\n    i = 0;\n    len = responseInterceptorChain.length;\n\n    while (i < len) {\n      promise = promise.then(responseInterceptorChain[i++], responseInterceptorChain[i++]);\n    }\n\n    return promise;\n  }\n\n  getUri(config) {\n    config = mergeConfig(this.defaults, config);\n    const fullPath = buildFullPath(config.baseURL, config.url, config.allowAbsoluteUrls);\n    return buildURL(fullPath, config.params, config.paramsSerializer);\n  }\n}\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method,\n      url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n\n  function generateHTTPMethod(isForm) {\n    return function httpMethod(url, data, config) {\n      return this.request(mergeConfig(config || {}, {\n        method,\n        headers: isForm ? {\n          'Content-Type': 'multipart/form-data'\n        } : {},\n        url,\n        data\n      }));\n    };\n  }\n\n  Axios.prototype[method] = generateHTTPMethod();\n\n  Axios.prototype[method + 'Form'] = generateHTTPMethod(true);\n});\n\nexport default Axios;\n","'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n *\n * @returns {Function}\n */\nexport default function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n}\n","'use strict';\n\nimport utils from './../utils.js';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n *\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nexport default function isAxiosError(payload) {\n  return utils.isObject(payload) && (payload.isAxiosError === true);\n}\n","const HttpStatusCode = {\n  Continue: 100,\n  SwitchingProtocols: 101,\n  Processing: 102,\n  EarlyHints: 103,\n  Ok: 200,\n  Created: 201,\n  Accepted: 202,\n  NonAuthoritativeInformation: 203,\n  NoContent: 204,\n  ResetContent: 205,\n  PartialContent: 206,\n  MultiStatus: 207,\n  AlreadyReported: 208,\n  ImUsed: 226,\n  MultipleChoices: 300,\n  MovedPermanently: 301,\n  Found: 302,\n  SeeOther: 303,\n  NotModified: 304,\n  UseProxy: 305,\n  Unused: 306,\n  TemporaryRedirect: 307,\n  PermanentRedirect: 308,\n  BadRequest: 400,\n  Unauthorized: 401,\n  PaymentRequired: 402,\n  Forbidden: 403,\n  NotFound: 404,\n  MethodNotAllowed: 405,\n  NotAcceptable: 406,\n  ProxyAuthenticationRequired: 407,\n  RequestTimeout: 408,\n  Conflict: 409,\n  Gone: 410,\n  LengthRequired: 411,\n  PreconditionFailed: 412,\n  PayloadTooLarge: 413,\n  UriTooLong: 414,\n  UnsupportedMediaType: 415,\n  RangeNotSatisfiable: 416,\n  ExpectationFailed: 417,\n  ImATeapot: 418,\n  MisdirectedRequest: 421,\n  UnprocessableEntity: 422,\n  Locked: 423,\n  FailedDependency: 424,\n  TooEarly: 425,\n  UpgradeRequired: 426,\n  PreconditionRequired: 428,\n  TooManyRequests: 429,\n  RequestHeaderFieldsTooLarge: 431,\n  UnavailableForLegalReasons: 451,\n  InternalServerError: 500,\n  NotImplemented: 501,\n  BadGateway: 502,\n  ServiceUnavailable: 503,\n  GatewayTimeout: 504,\n  HttpVersionNotSupported: 505,\n  VariantAlsoNegotiates: 506,\n  InsufficientStorage: 507,\n  LoopDetected: 508,\n  NotExtended: 510,\n  NetworkAuthenticationRequired: 511,\n};\n\nObject.entries(HttpStatusCode).forEach(([key, value]) => {\n  HttpStatusCode[value] = key;\n});\n\nexport default HttpStatusCode;\n","'use strict';\n\nimport utils from './utils.js';\nimport bind from './helpers/bind.js';\nimport Axios from './core/Axios.js';\nimport mergeConfig from './core/mergeConfig.js';\nimport defaults from './defaults/index.js';\nimport formDataToJSON from './helpers/formDataToJSON.js';\nimport CanceledError from './cancel/CanceledError.js';\nimport CancelToken from './cancel/CancelToken.js';\nimport isCancel from './cancel/isCancel.js';\nimport {VERSION} from './env/data.js';\nimport toFormData from './helpers/toFormData.js';\nimport AxiosError from './core/AxiosError.js';\nimport spread from './helpers/spread.js';\nimport isAxiosError from './helpers/isAxiosError.js';\nimport AxiosHeaders from \"./core/AxiosHeaders.js\";\nimport adapters from './adapters/adapters.js';\nimport HttpStatusCode from './helpers/HttpStatusCode.js';\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n *\n * @returns {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  const context = new Axios(defaultConfig);\n  const instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context, {allOwnKeys: true});\n\n  // Copy context to instance\n  utils.extend(instance, context, null, {allOwnKeys: true});\n\n  // Factory for creating new instances\n  instance.create = function create(instanceConfig) {\n    return createInstance(mergeConfig(defaultConfig, instanceConfig));\n  };\n\n  return instance;\n}\n\n// Create the default instance to be exported\nconst axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Expose Cancel & CancelToken\naxios.CanceledError = CanceledError;\naxios.CancelToken = CancelToken;\naxios.isCancel = isCancel;\naxios.VERSION = VERSION;\naxios.toFormData = toFormData;\n\n// Expose AxiosError class\naxios.AxiosError = AxiosError;\n\n// alias for CanceledError for backward compatibility\naxios.Cancel = axios.CanceledError;\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\n\naxios.spread = spread;\n\n// Expose isAxiosError\naxios.isAxiosError = isAxiosError;\n\n// Expose mergeConfig\naxios.mergeConfig = mergeConfig;\n\naxios.AxiosHeaders = AxiosHeaders;\n\naxios.formToJSON = thing => formDataToJSON(utils.isHTMLForm(thing) ? new FormData(thing) : thing);\n\naxios.getAdapter = adapters.getAdapter;\n\naxios.HttpStatusCode = HttpStatusCode;\n\naxios.default = axios;\n\n// this module should only have a default export\nexport default axios\n","import axios from './lib/axios.js';\n\n// This module is intended to unwrap Axios default export as named.\n// Keep top-level export same with static properties\n// so that it can keep same with es module or cjs\nconst {\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n} = axios;\n\nexport {\n  axios as default,\n  Axios,\n  AxiosError,\n  CanceledError,\n  isCancel,\n  CancelToken,\n  VERSION,\n  all,\n  Cancel,\n  isAxiosError,\n  spread,\n  toFormData,\n  AxiosHeaders,\n  HttpStatusCode,\n  formToJSON,\n  getAdapter,\n  mergeConfig\n}\n","export default {}",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Constants table\n\t    var T = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        for (var i = 0; i < 64; i++) {\n\t            T[i] = (Math.abs(Math.sin(i + 1)) * 0x100000000) | 0;\n\t        }\n\t    }());\n\n\t    /**\n\t     * MD5 hash algorithm.\n\t     */\n\t    var MD5 = C_algo.MD5 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init([\n\t                0x67452301, 0xefcdab89,\n\t                0x98badcfe, 0x10325476\n\t            ]);\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Swap endian\n\t            for (var i = 0; i < 16; i++) {\n\t                // Shortcuts\n\t                var offset_i = offset + i;\n\t                var M_offset_i = M[offset_i];\n\n\t                M[offset_i] = (\n\t                    (((M_offset_i << 8)  | (M_offset_i >>> 24)) & 0x00ff00ff) |\n\t                    (((M_offset_i << 24) | (M_offset_i >>> 8))  & 0xff00ff00)\n\t                );\n\t            }\n\n\t            // Shortcuts\n\t            var H = this._hash.words;\n\n\t            var M_offset_0  = M[offset + 0];\n\t            var M_offset_1  = M[offset + 1];\n\t            var M_offset_2  = M[offset + 2];\n\t            var M_offset_3  = M[offset + 3];\n\t            var M_offset_4  = M[offset + 4];\n\t            var M_offset_5  = M[offset + 5];\n\t            var M_offset_6  = M[offset + 6];\n\t            var M_offset_7  = M[offset + 7];\n\t            var M_offset_8  = M[offset + 8];\n\t            var M_offset_9  = M[offset + 9];\n\t            var M_offset_10 = M[offset + 10];\n\t            var M_offset_11 = M[offset + 11];\n\t            var M_offset_12 = M[offset + 12];\n\t            var M_offset_13 = M[offset + 13];\n\t            var M_offset_14 = M[offset + 14];\n\t            var M_offset_15 = M[offset + 15];\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\n\t            // Computation\n\t            a = FF(a, b, c, d, M_offset_0,  7,  T[0]);\n\t            d = FF(d, a, b, c, M_offset_1,  12, T[1]);\n\t            c = FF(c, d, a, b, M_offset_2,  17, T[2]);\n\t            b = FF(b, c, d, a, M_offset_3,  22, T[3]);\n\t            a = FF(a, b, c, d, M_offset_4,  7,  T[4]);\n\t            d = FF(d, a, b, c, M_offset_5,  12, T[5]);\n\t            c = FF(c, d, a, b, M_offset_6,  17, T[6]);\n\t            b = FF(b, c, d, a, M_offset_7,  22, T[7]);\n\t            a = FF(a, b, c, d, M_offset_8,  7,  T[8]);\n\t            d = FF(d, a, b, c, M_offset_9,  12, T[9]);\n\t            c = FF(c, d, a, b, M_offset_10, 17, T[10]);\n\t            b = FF(b, c, d, a, M_offset_11, 22, T[11]);\n\t            a = FF(a, b, c, d, M_offset_12, 7,  T[12]);\n\t            d = FF(d, a, b, c, M_offset_13, 12, T[13]);\n\t            c = FF(c, d, a, b, M_offset_14, 17, T[14]);\n\t            b = FF(b, c, d, a, M_offset_15, 22, T[15]);\n\n\t            a = GG(a, b, c, d, M_offset_1,  5,  T[16]);\n\t            d = GG(d, a, b, c, M_offset_6,  9,  T[17]);\n\t            c = GG(c, d, a, b, M_offset_11, 14, T[18]);\n\t            b = GG(b, c, d, a, M_offset_0,  20, T[19]);\n\t            a = GG(a, b, c, d, M_offset_5,  5,  T[20]);\n\t            d = GG(d, a, b, c, M_offset_10, 9,  T[21]);\n\t            c = GG(c, d, a, b, M_offset_15, 14, T[22]);\n\t            b = GG(b, c, d, a, M_offset_4,  20, T[23]);\n\t            a = GG(a, b, c, d, M_offset_9,  5,  T[24]);\n\t            d = GG(d, a, b, c, M_offset_14, 9,  T[25]);\n\t            c = GG(c, d, a, b, M_offset_3,  14, T[26]);\n\t            b = GG(b, c, d, a, M_offset_8,  20, T[27]);\n\t            a = GG(a, b, c, d, M_offset_13, 5,  T[28]);\n\t            d = GG(d, a, b, c, M_offset_2,  9,  T[29]);\n\t            c = GG(c, d, a, b, M_offset_7,  14, T[30]);\n\t            b = GG(b, c, d, a, M_offset_12, 20, T[31]);\n\n\t            a = HH(a, b, c, d, M_offset_5,  4,  T[32]);\n\t            d = HH(d, a, b, c, M_offset_8,  11, T[33]);\n\t            c = HH(c, d, a, b, M_offset_11, 16, T[34]);\n\t            b = HH(b, c, d, a, M_offset_14, 23, T[35]);\n\t            a = HH(a, b, c, d, M_offset_1,  4,  T[36]);\n\t            d = HH(d, a, b, c, M_offset_4,  11, T[37]);\n\t            c = HH(c, d, a, b, M_offset_7,  16, T[38]);\n\t            b = HH(b, c, d, a, M_offset_10, 23, T[39]);\n\t            a = HH(a, b, c, d, M_offset_13, 4,  T[40]);\n\t            d = HH(d, a, b, c, M_offset_0,  11, T[41]);\n\t            c = HH(c, d, a, b, M_offset_3,  16, T[42]);\n\t            b = HH(b, c, d, a, M_offset_6,  23, T[43]);\n\t            a = HH(a, b, c, d, M_offset_9,  4,  T[44]);\n\t            d = HH(d, a, b, c, M_offset_12, 11, T[45]);\n\t            c = HH(c, d, a, b, M_offset_15, 16, T[46]);\n\t            b = HH(b, c, d, a, M_offset_2,  23, T[47]);\n\n\t            a = II(a, b, c, d, M_offset_0,  6,  T[48]);\n\t            d = II(d, a, b, c, M_offset_7,  10, T[49]);\n\t            c = II(c, d, a, b, M_offset_14, 15, T[50]);\n\t            b = II(b, c, d, a, M_offset_5,  21, T[51]);\n\t            a = II(a, b, c, d, M_offset_12, 6,  T[52]);\n\t            d = II(d, a, b, c, M_offset_3,  10, T[53]);\n\t            c = II(c, d, a, b, M_offset_10, 15, T[54]);\n\t            b = II(b, c, d, a, M_offset_1,  21, T[55]);\n\t            a = II(a, b, c, d, M_offset_8,  6,  T[56]);\n\t            d = II(d, a, b, c, M_offset_15, 10, T[57]);\n\t            c = II(c, d, a, b, M_offset_6,  15, T[58]);\n\t            b = II(b, c, d, a, M_offset_13, 21, T[59]);\n\t            a = II(a, b, c, d, M_offset_4,  6,  T[60]);\n\t            d = II(d, a, b, c, M_offset_11, 10, T[61]);\n\t            c = II(c, d, a, b, M_offset_2,  15, T[62]);\n\t            b = II(b, c, d, a, M_offset_9,  21, T[63]);\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\n\t            var nBitsTotalH = Math.floor(nBitsTotal / 0x100000000);\n\t            var nBitsTotalL = nBitsTotal;\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = (\n\t                (((nBitsTotalH << 8)  | (nBitsTotalH >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalH << 24) | (nBitsTotalH >>> 8))  & 0xff00ff00)\n\t            );\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = (\n\t                (((nBitsTotalL << 8)  | (nBitsTotalL >>> 24)) & 0x00ff00ff) |\n\t                (((nBitsTotalL << 24) | (nBitsTotalL >>> 8))  & 0xff00ff00)\n\t            );\n\n\t            data.sigBytes = (dataWords.length + 1) * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Shortcuts\n\t            var hash = this._hash;\n\t            var H = hash.words;\n\n\t            // Swap endian\n\t            for (var i = 0; i < 4; i++) {\n\t                // Shortcut\n\t                var H_i = H[i];\n\n\t                H[i] = (((H_i << 8)  | (H_i >>> 24)) & 0x00ff00ff) |\n\t                       (((H_i << 24) | (H_i >>> 8))  & 0xff00ff00);\n\t            }\n\n\t            // Return final computed hash\n\t            return hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    function FF(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & c) | (~b & d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function GG(a, b, c, d, x, s, t) {\n\t        var n = a + ((b & d) | (c & ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function HH(a, b, c, d, x, s, t) {\n\t        var n = a + (b ^ c ^ d) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    function II(a, b, c, d, x, s, t) {\n\t        var n = a + (c ^ (b | ~d)) + x + t;\n\t        return ((n << s) | (n >>> (32 - s))) + b;\n\t    }\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.MD5('message');\n\t     *     var hash = CryptoJS.MD5(wordArray);\n\t     */\n\t    C.MD5 = Hasher._createHelper(MD5);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacMD5(message, key);\n\t     */\n\t    C.HmacMD5 = Hasher._createHmacHelper(MD5);\n\t}(Math));\n\n\n\treturn CryptoJS.MD5;\n\n}));","export const MIME_TYPE_JAVASCRIPT = \"text/javascript\";\nexport const MIME_TYPE_WASM = \"application/wasm\";\nexport const CORE_VERSION = \"0.12.9\";\nexport const CORE_URL = `https://unpkg.com/@ffmpeg/core@${CORE_VERSION}/dist/umd/ffmpeg-core.js`;\nexport var FFMessageType;\n(function (FFMessageType) {\n    FFMessageType[\"LOAD\"] = \"LOAD\";\n    FFMessageType[\"EXEC\"] = \"EXEC\";\n    FFMessageType[\"FFPROBE\"] = \"FFPROBE\";\n    FFMessageType[\"WRITE_FILE\"] = \"WRITE_FILE\";\n    FFMessageType[\"READ_FILE\"] = \"READ_FILE\";\n    FFMessageType[\"DELETE_FILE\"] = \"DELETE_FILE\";\n    FFMessageType[\"RENAME\"] = \"RENAME\";\n    FFMessageType[\"CREATE_DIR\"] = \"CREATE_DIR\";\n    FFMessageType[\"LIST_DIR\"] = \"LIST_DIR\";\n    FFMessageType[\"DELETE_DIR\"] = \"DELETE_DIR\";\n    FFMessageType[\"ERROR\"] = \"ERROR\";\n    FFMessageType[\"DOWNLOAD\"] = \"DOWNLOAD\";\n    FFMessageType[\"PROGRESS\"] = \"PROGRESS\";\n    FFMessageType[\"LOG\"] = \"LOG\";\n    FFMessageType[\"MOUNT\"] = \"MOUNT\";\n    FFMessageType[\"UNMOUNT\"] = \"UNMOUNT\";\n})(FFMessageType || (FFMessageType = {}));\n","/**\n * Generate an unique message ID.\n */\nexport const getMessageID = (() => {\n    let messageID = 0;\n    return () => messageID++;\n})();\n","export const ERROR_UNKNOWN_MESSAGE_TYPE = new Error(\"unknown message type\");\nexport const ERROR_NOT_LOADED = new Error(\"ffmpeg is not loaded, call `await ffmpeg.load()` first\");\nexport const ERROR_TERMINATED = new Error(\"called FFmpeg.terminate()\");\nexport const ERROR_IMPORT_FAILURE = new Error(\"failed to import ffmpeg-core.js\");\n","import { FFMessageType } from \"./const.js\";\nimport { getMessageID } from \"./utils.js\";\nimport { ERROR_TERMINATED, ERROR_NOT_LOADED } from \"./errors.js\";\n/**\n * Provides APIs to interact with ffmpeg web worker.\n *\n * @example\n * ```ts\n * const ffmpeg = new FFmpeg();\n * ```\n */\nexport class FFmpeg {\n    #worker = null;\n    /**\n     * #resolves and #rejects tracks Promise resolves and rejects to\n     * be called when we receive message from web worker.\n     */\n    #resolves = {};\n    #rejects = {};\n    #logEventCallbacks = [];\n    #progressEventCallbacks = [];\n    loaded = false;\n    /**\n     * register worker message event handlers.\n     */\n    #registerHandlers = () => {\n        if (this.#worker) {\n            this.#worker.onmessage = ({ data: { id, type, data }, }) => {\n                switch (type) {\n                    case FFMessageType.LOAD:\n                        this.loaded = true;\n                        this.#resolves[id](data);\n                        break;\n                    case FFMessageType.MOUNT:\n                    case FFMessageType.UNMOUNT:\n                    case FFMessageType.EXEC:\n                    case FFMessageType.FFPROBE:\n                    case FFMessageType.WRITE_FILE:\n                    case FFMessageType.READ_FILE:\n                    case FFMessageType.DELETE_FILE:\n                    case FFMessageType.RENAME:\n                    case FFMessageType.CREATE_DIR:\n                    case FFMessageType.LIST_DIR:\n                    case FFMessageType.DELETE_DIR:\n                        this.#resolves[id](data);\n                        break;\n                    case FFMessageType.LOG:\n                        this.#logEventCallbacks.forEach((f) => f(data));\n                        break;\n                    case FFMessageType.PROGRESS:\n                        this.#progressEventCallbacks.forEach((f) => f(data));\n                        break;\n                    case FFMessageType.ERROR:\n                        this.#rejects[id](data);\n                        break;\n                }\n                delete this.#resolves[id];\n                delete this.#rejects[id];\n            };\n        }\n    };\n    /**\n     * Generic function to send messages to web worker.\n     */\n    #send = ({ type, data }, trans = [], signal) => {\n        if (!this.#worker) {\n            return Promise.reject(ERROR_NOT_LOADED);\n        }\n        return new Promise((resolve, reject) => {\n            const id = getMessageID();\n            this.#worker && this.#worker.postMessage({ id, type, data }, trans);\n            this.#resolves[id] = resolve;\n            this.#rejects[id] = reject;\n            signal?.addEventListener(\"abort\", () => {\n                reject(new DOMException(`Message # ${id} was aborted`, \"AbortError\"));\n            }, { once: true });\n        });\n    };\n    on(event, callback) {\n        if (event === \"log\") {\n            this.#logEventCallbacks.push(callback);\n        }\n        else if (event === \"progress\") {\n            this.#progressEventCallbacks.push(callback);\n        }\n    }\n    off(event, callback) {\n        if (event === \"log\") {\n            this.#logEventCallbacks = this.#logEventCallbacks.filter((f) => f !== callback);\n        }\n        else if (event === \"progress\") {\n            this.#progressEventCallbacks = this.#progressEventCallbacks.filter((f) => f !== callback);\n        }\n    }\n    /**\n     * Loads ffmpeg-core inside web worker. It is required to call this method first\n     * as it initializes WebAssembly and other essential variables.\n     *\n     * @category FFmpeg\n     * @returns `true` if ffmpeg core is loaded for the first time.\n     */\n    load = ({ classWorkerURL, ...config } = {}, { signal } = {}) => {\n        if (!this.#worker) {\n            this.#worker = classWorkerURL ?\n                new Worker(new URL(classWorkerURL, import.meta.url), {\n                    type: \"module\",\n                }) :\n                // We need to duplicated the code here to enable webpack\n                // to bundle worekr.js here.\n                new Worker(new URL(\"./worker.js\", import.meta.url), {\n                    type: \"module\",\n                });\n            this.#registerHandlers();\n        }\n        return this.#send({\n            type: FFMessageType.LOAD,\n            data: config,\n        }, undefined, signal);\n    };\n    /**\n     * Execute ffmpeg command.\n     *\n     * @remarks\n     * To avoid common I/O issues, [\"-nostdin\", \"-y\"] are prepended to the args\n     * by default.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", ...);\n     * // ffmpeg -i video.avi video.mp4\n     * await ffmpeg.exec([\"-i\", \"video.avi\", \"video.mp4\"]);\n     * const data = ffmpeg.readFile(\"video.mp4\");\n     * ```\n     *\n     * @returns `0` if no error, `!= 0` if timeout (1) or error.\n     * @category FFmpeg\n     */\n    exec = (\n    /** ffmpeg command line args */\n    args, \n    /**\n     * milliseconds to wait before stopping the command execution.\n     *\n     * @defaultValue -1\n     */\n    timeout = -1, { signal } = {}) => this.#send({\n        type: FFMessageType.EXEC,\n        data: { args, timeout },\n    }, undefined, signal);\n    /**\n     * Execute ffprobe command.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", ...);\n     * // Getting duration of a video in seconds: ffprobe -v error -show_entries format=duration -of default=noprint_wrappers=1:nokey=1 video.avi -o output.txt\n     * await ffmpeg.ffprobe([\"-v\", \"error\", \"-show_entries\", \"format=duration\", \"-of\", \"default=noprint_wrappers=1:nokey=1\", \"video.avi\", \"-o\", \"output.txt\"]);\n     * const data = ffmpeg.readFile(\"output.txt\");\n     * ```\n     *\n     * @returns `0` if no error, `!= 0` if timeout (1) or error.\n     * @category FFmpeg\n     */\n    ffprobe = (\n    /** ffprobe command line args */\n    args, \n    /**\n     * milliseconds to wait before stopping the command execution.\n     *\n     * @defaultValue -1\n     */\n    timeout = -1, { signal } = {}) => this.#send({\n        type: FFMessageType.FFPROBE,\n        data: { args, timeout },\n    }, undefined, signal);\n    /**\n     * Terminate all ongoing API calls and terminate web worker.\n     * `FFmpeg.load()` must be called again before calling any other APIs.\n     *\n     * @category FFmpeg\n     */\n    terminate = () => {\n        const ids = Object.keys(this.#rejects);\n        // rejects all incomplete Promises.\n        for (const id of ids) {\n            this.#rejects[id](ERROR_TERMINATED);\n            delete this.#rejects[id];\n            delete this.#resolves[id];\n        }\n        if (this.#worker) {\n            this.#worker.terminate();\n            this.#worker = null;\n            this.loaded = false;\n        }\n    };\n    /**\n     * Write data to ffmpeg.wasm.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * await ffmpeg.writeFile(\"video.avi\", await fetchFile(\"../video.avi\"));\n     * await ffmpeg.writeFile(\"text.txt\", \"hello world\");\n     * ```\n     *\n     * @category File System\n     */\n    writeFile = (path, data, { signal } = {}) => {\n        const trans = [];\n        if (data instanceof Uint8Array) {\n            trans.push(data.buffer);\n        }\n        return this.#send({\n            type: FFMessageType.WRITE_FILE,\n            data: { path, data },\n        }, trans, signal);\n    };\n    mount = (fsType, options, mountPoint) => {\n        const trans = [];\n        return this.#send({\n            type: FFMessageType.MOUNT,\n            data: { fsType, options, mountPoint },\n        }, trans);\n    };\n    unmount = (mountPoint) => {\n        const trans = [];\n        return this.#send({\n            type: FFMessageType.UNMOUNT,\n            data: { mountPoint },\n        }, trans);\n    };\n    /**\n     * Read data from ffmpeg.wasm.\n     *\n     * @example\n     * ```ts\n     * const ffmpeg = new FFmpeg();\n     * await ffmpeg.load();\n     * const data = await ffmpeg.readFile(\"video.mp4\");\n     * ```\n     *\n     * @category File System\n     */\n    readFile = (path, \n    /**\n     * File content encoding, supports two encodings:\n     * - utf8: read file as text file, return data in string type.\n     * - binary: read file as binary file, return data in Uint8Array type.\n     *\n     * @defaultValue binary\n     */\n    encoding = \"binary\", { signal } = {}) => this.#send({\n        type: FFMessageType.READ_FILE,\n        data: { path, encoding },\n    }, undefined, signal);\n    /**\n     * Delete a file.\n     *\n     * @category File System\n     */\n    deleteFile = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.DELETE_FILE,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * Rename a file or directory.\n     *\n     * @category File System\n     */\n    rename = (oldPath, newPath, { signal } = {}) => this.#send({\n        type: FFMessageType.RENAME,\n        data: { oldPath, newPath },\n    }, undefined, signal);\n    /**\n     * Create a directory.\n     *\n     * @category File System\n     */\n    createDir = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.CREATE_DIR,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * List directory contents.\n     *\n     * @category File System\n     */\n    listDir = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.LIST_DIR,\n        data: { path },\n    }, undefined, signal);\n    /**\n     * Delete an empty directory.\n     *\n     * @category File System\n     */\n    deleteDir = (path, { signal } = {}) => this.#send({\n        type: FFMessageType.DELETE_DIR,\n        data: { path },\n    }, undefined, signal);\n}\n","export var FFFSType;\n(function (FFFSType) {\n    FFFSType[\"MEMFS\"] = \"MEMFS\";\n    FFFSType[\"NODEFS\"] = \"NODEFS\";\n    FFFSType[\"NODERAWFS\"] = \"NODERAWFS\";\n    FFFSType[\"IDBFS\"] = \"IDBFS\";\n    FFFSType[\"WORKERFS\"] = \"WORKERFS\";\n    FFFSType[\"PROXYFS\"] = \"PROXYFS\";\n})(FFFSType || (FFFSType = {}));\n","export const ERROR_RESPONSE_BODY_READER = new Error(\"failed to get response body reader\");\nexport const ERROR_INCOMPLETED_DOWNLOAD = new Error(\"failed to complete download\");\n","export const HeaderContentLength = \"Content-Length\";\n","import { ERROR_RESPONSE_BODY_READER, ERROR_INCOMPLETED_DOWNLOAD, } from \"./errors.js\";\nimport { HeaderContentLength } from \"./const.js\";\nconst readFromBlobOrFile = (blob) => new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = () => {\n        const { result } = fileReader;\n        if (result instanceof ArrayBuffer) {\n            resolve(new Uint8Array(result));\n        }\n        else {\n            resolve(new Uint8Array());\n        }\n    };\n    fileReader.onerror = (event) => {\n        reject(Error(`File could not be read! Code=${event?.target?.error?.code || -1}`));\n    };\n    fileReader.readAsArrayBuffer(blob);\n});\n/**\n * An util function to fetch data from url string, base64, URL, File or Blob format.\n *\n * Examples:\n * ```ts\n * // URL\n * await fetchFile(\"http://localhost:3000/video.mp4\");\n * // base64\n * await fetchFile(\"data:<type>;base64,wL2dvYWwgbW9yZ...\");\n * // URL\n * await fetchFile(new URL(\"video.mp4\", import.meta.url));\n * // File\n * fileInput.addEventListener('change', (e) => {\n *   await fetchFile(e.target.files[0]);\n * });\n * // Blob\n * const blob = new Blob(...);\n * await fetchFile(blob);\n * ```\n */\nexport const fetchFile = async (file) => {\n    let data;\n    if (typeof file === \"string\") {\n        /* From base64 format */\n        if (/data:_data\\/([a-zA-Z]*);base64,([^\"]*)/.test(file)) {\n            data = atob(file.split(\",\")[1])\n                .split(\"\")\n                .map((c) => c.charCodeAt(0));\n            /* From remote server/URL */\n        }\n        else {\n            data = await (await fetch(file)).arrayBuffer();\n        }\n    }\n    else if (file instanceof URL) {\n        data = await (await fetch(file)).arrayBuffer();\n    }\n    else if (file instanceof File || file instanceof Blob) {\n        data = await readFromBlobOrFile(file);\n    }\n    else {\n        return new Uint8Array();\n    }\n    return new Uint8Array(data);\n};\n/**\n * importScript dynamically import a script, useful when you\n * want to use different versions of ffmpeg.wasm based on environment.\n *\n * Example:\n *\n * ```ts\n * await importScript(\"http://localhost:3000/ffmpeg.js\");\n * ```\n */\nexport const importScript = async (url) => new Promise((resolve) => {\n    const script = document.createElement(\"script\");\n    const eventHandler = () => {\n        script.removeEventListener(\"load\", eventHandler);\n        resolve();\n    };\n    script.src = url;\n    script.type = \"text/javascript\";\n    script.addEventListener(\"load\", eventHandler);\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n});\n/**\n * Download content of a URL with progress.\n *\n * Progress only works when Content-Length is provided by the server.\n *\n */\nexport const downloadWithProgress = async (url, cb) => {\n    const resp = await fetch(url);\n    let buf;\n    try {\n        // Set total to -1 to indicate that there is not Content-Type Header.\n        const total = parseInt(resp.headers.get(HeaderContentLength) || \"-1\");\n        const reader = resp.body?.getReader();\n        if (!reader)\n            throw ERROR_RESPONSE_BODY_READER;\n        const chunks = [];\n        let received = 0;\n        for (;;) {\n            const { done, value } = await reader.read();\n            const delta = value ? value.length : 0;\n            if (done) {\n                if (total != -1 && total !== received)\n                    throw ERROR_INCOMPLETED_DOWNLOAD;\n                cb && cb({ url, total, received, delta, done });\n                break;\n            }\n            chunks.push(value);\n            received += delta;\n            cb && cb({ url, total, received, delta, done });\n        }\n        const data = new Uint8Array(received);\n        let position = 0;\n        for (const chunk of chunks) {\n            data.set(chunk, position);\n            position += chunk.length;\n        }\n        buf = data.buffer;\n    }\n    catch (e) {\n        console.log(`failed to send download progress event: `, e);\n        // Fetch arrayBuffer directly when it is not possible to get progress.\n        buf = await resp.arrayBuffer();\n        cb &&\n            cb({\n                url,\n                total: buf.byteLength,\n                received: buf.byteLength,\n                delta: 0,\n                done: true,\n            });\n    }\n    return buf;\n};\n/**\n * toBlobURL fetches data from an URL and return a blob URL.\n *\n * Example:\n *\n * ```ts\n * await toBlobURL(\"http://localhost:3000/ffmpeg.js\", \"text/javascript\");\n * ```\n */\nexport const toBlobURL = async (url, mimeType, progress = false, cb) => {\n    const buf = progress\n        ? await downloadWithProgress(url, cb)\n        : await (await fetch(url)).arrayBuffer();\n    const blob = new Blob([buf], { type: mimeType });\n    return URL.createObjectURL(blob);\n};\n","/**\r\n * Allows starting a loading process in the background & await the load to finish before\r\n * using the object\r\n * @template T\r\n */\r\nexport class BackgroundLoader {\r\n    /**\r\n     * @param {() => Promise<T>} loadFn\r\n     * @param {boolean} [loadImmediately=false] whether to start loading immediately\r\n     */\r\n    constructor(loadFn, loadImmediately = false) {\r\n        this.loadFn = loadFn\r\n        if (loadImmediately)\r\n            this.load().then()\r\n    }\r\n\r\n    /**\r\n     * @returns {Promise<T>}\r\n     */\r\n    async load() {\r\n        this.loadPromise ??= this.loadFn()\r\n\r\n        return this.loadPromise\r\n    }\r\n\r\n    loadInBackground() {\r\n        this.load().then()\r\n    }\r\n}","import { FFmpeg } from \"@ffmpeg/ffmpeg\";\r\nimport { toBlobURL, fetchFile } from \"@ffmpeg/util\";\r\nimport { BackgroundLoader } from \"./BackgroundLoader.js\";\r\n\r\nexport class Transcoder {\r\n\tstatic ffmpeg = new FFmpeg();\r\n\r\n\tstatic {\r\n\t\tthis.ffmpeg.on(\"log\", ({ message }) => {\r\n\t\t\tconsole.log(message);\r\n\t\t});\r\n\t}\r\n\tstatic loader = new BackgroundLoader(async () => {\r\n\t\tif (\r\n\t\t\tnavigator.userAgent.match(/webOS/i) ||\r\n\t\t\tnavigator.userAgent.match(/iPhone/i) ||\r\n\t\t\tnavigator.userAgent.match(/iPad/i)\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst baseURL = \"https://unpkg.com/@ffmpeg/core-mt@0.12.6/dist/esm\";\r\n\r\n\t\t// fixme: disabled this message for now as it doesn't make that much sense now that it loads in the background,\r\n\t\t//  perhaps it should only show when ensureLoaded is called?\r\n\t\t// document.querySelector(\"#loadingText\").textContent = `Loading FFmpeg\\nMight take a while on first load.`;\r\n\t\tawait this.ffmpeg.load({\r\n\t\t\tcoreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, \"text/javascript\"),\r\n\t\t\twasmURL: await toBlobURL(\r\n\t\t\t\t`${baseURL}/ffmpeg-core.wasm`,\r\n\t\t\t\t\"application/wasm\",\r\n\t\t\t),\r\n\t\t\tworkerURL: await toBlobURL(\r\n\t\t\t\t`${baseURL}/ffmpeg-core.worker.js`,\r\n\t\t\t\t\"text/javascript\",\r\n\t\t\t),\r\n\t\t});\r\n\t});\r\n\r\n\tstatic loadInBackground() {\r\n\t\tthis.loader.loadInBackground();\r\n\t}\r\n\r\n\tstatic async ensureLoaded() {\r\n\t\treturn this.loader.load();\r\n\t}\r\n\r\n\tstatic async toMp3({ blob, ext }) {\r\n\t\tawait this.ensureLoaded();\r\n\r\n\t\tthis.ffmpeg.on(\"progress\", ({ progress, time }) => {\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t`Transcoding .ogg audio to .mp3 using FFmpeg: ${(progress * 100).toFixed(2)}%`;\r\n\t\t});\r\n\r\n\t\tawait this.ffmpeg.writeFile(`audio.${ext}`, await fetchFile(blob));\r\n\t\tawait this.ffmpeg.exec([\"-i\", `audio.${ext}`, \"-c\", \"mp3\", `audio.mp3`]);\r\n\r\n\t\tconst data = await this.ffmpeg.readFile(`audio.mp3`);\r\n\t\treturn new Blob([data.buffer], { type: \"audio/mp3\" });\r\n\t}\r\n\r\n\tstatic async changeRate({ blob, ext }) {\r\n\t\tawait this.ensureLoaded();\r\n\t\tconsole.log(\"Hellis!\", blob, ext);\r\n\r\n\t\tthis.ffmpeg.on(\"progress\", ({ progress, time }) => {\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t`Timestretching audio using FFmpeg: ${(progress * 100).toFixed(2)}%`;\r\n\t\t});\r\n\r\n\t\tlet start = performance.now();\r\n\t\tawait this.ffmpeg.writeFile(`audio.${ext}`, await fetchFile(blob));\r\n\t\tawait Promise.all([\r\n\t\t\tthis.ffmpeg.exec([\r\n\t\t\t\t\"-i\",\r\n\t\t\t\t`audio.${ext}`,\r\n\t\t\t\t\"-c\",\r\n\t\t\t\t\"mp3\",\r\n\t\t\t\t\"-af\",\r\n\t\t\t\t\"atempo=1.5\",\r\n\t\t\t\t`dt.mp3`,\r\n\t\t\t]),\r\n\t\t\tthis.ffmpeg.exec([\r\n\t\t\t\t\"-i\",\r\n\t\t\t\t`audio.${ext}`,\r\n\t\t\t\t\"-c\",\r\n\t\t\t\t\"mp3\",\r\n\t\t\t\t\"-af\",\r\n\t\t\t\t\"atempo=0.75\",\r\n\t\t\t\t`ht.mp3`,\r\n\t\t\t]),\r\n\t\t]);\r\n\r\n\t\tconst [dt_data, ht_data] = await Promise.all([\r\n\t\t\tthis.ffmpeg.readFile(`dt.mp3`),\r\n\t\t\tthis.ffmpeg.readFile(`ht.mp3`),\r\n\t\t]);\r\n\r\n\t\tconsole.log(\"Took: \", performance.now() - start, \" to render audio\");\r\n\t\treturn {\r\n\t\t\tdt: new Blob([dt_data.buffer], { type: `audio/${ext}` }),\r\n\t\t\tht: new Blob([ht_data.buffer], { type: `audio/${ext}` }),\r\n\t\t};\r\n\t}\r\n\r\n\tstatic async transcode({ blob, ext }) {\r\n\t\tawait this.ensureLoaded();\r\n\r\n\t\tif (\r\n\t\t\text === \"mp4\" ||\r\n\t\t\text === \"m4v\" ||\r\n\t\t\tnavigator.userAgent.match(/webOS/i) ||\r\n\t\t\tnavigator.userAgent.match(/iPhone/i) ||\r\n\t\t\tnavigator.userAgent.match(/iPad/i)\r\n\t\t) {\r\n\t\t\treturn URL.createObjectURL(blob);\r\n\t\t}\r\n\r\n\t\tthis.ffmpeg.on(\"progress\", ({ progress, time }) => {\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t`Transcoding video to mp4 using FFmpeg: ${(progress * 100).toFixed(2)}%`;\r\n\t\t});\r\n\r\n\t\tawait this.ffmpeg.writeFile(`input.${ext}`, await fetchFile(blob));\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\r\n\t\tif (currentLocalStorage.background.transcodeVideo) {\r\n\t\t\tawait this.ffmpeg.exec([\r\n\t\t\t\t\"-i\",\r\n\t\t\t\t`input.${ext}`,\r\n\t\t\t\t\"-preset\",\r\n\t\t\t\t\"ultrafast\",\r\n\t\t\t\t\"-threads\",\r\n\t\t\t\t\"8\",\r\n\t\t\t\t`output.mp4`,\r\n\t\t\t]);\r\n\t\t} else {\r\n\t\t\tawait this.ffmpeg.exec([\r\n\t\t\t\t\"-i\",\r\n\t\t\t\t`input.${ext}`,\r\n\t\t\t\t\"-c\",\r\n\t\t\t\t\"copy\",\r\n\t\t\t\t\"-preset\",\r\n\t\t\t\t\"ultrafast\",\r\n\t\t\t\t\"-threads\",\r\n\t\t\t\t\"8\",\r\n\t\t\t\t`output.mp4`,\r\n\t\t\t]);\r\n\t\t}\r\n\t\tconst data = await this.ffmpeg.readFile(\"output.mp4\");\r\n\r\n\t\treturn URL.createObjectURL(new Blob([data.buffer], { type: \"video/mp4\" }));\r\n\t}\r\n}\r\n","import { Game } from \"./Game.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\nimport { Beatmap } from \"./Beatmap.js\";\r\nimport {\r\n\tcreateDifficultyElement,\r\n\tround,\r\n\tgetDiffColor,\r\n\tloadColorPalette,\r\n\tloadSampleSound,\r\n\tClamp,\r\n\tgetOS,\r\n} from \"./Utils.js\";\r\nimport { go, playToggle } from \"./ProgressBar.js\";\r\nimport { openMenu, setBeatsnapDivisor } from \"./Settings.js\";\r\nimport { calculateCurrentSR } from \"./Settings.js\";\r\nimport { HitSample, PAudio } from \"./Audio.js\";\r\nimport { ScoreParser } from \"./ScoreParser.js\";\r\nimport { Notification } from \"./Notification.js\";\r\nimport { urlParams } from \"./GlobalVariables.js\";\r\nimport { handleCanvasDrag } from \"./DragWindow.js\";\r\nimport { closePopup } from \"./Timestamp.js\";\r\nimport osuPerformance from \"../lib/osujs.js\";\r\nimport axios from \"axios\";\r\nimport ky from \"ky\";\r\nimport md5 from \"crypto-js/md5\";\r\nimport * as d3 from \"d3\";\r\nimport { Background } from \"./Background.js\";\r\nimport { Spinner } from \"./HitObjects/Spinner.js\";\r\nimport { toggleMetadataPanel } from \"./SidePanel.js\";\r\nimport { toggleTimingPanel } from \"./BPM.js\";\r\nimport { Storyboard } from \"./Storyboard/Storyboard.js\";\r\nimport { User } from \"./User.js\";\r\nimport { Transcoder } from \"./FFmpeg.js\";\r\n\r\nexport class BeatmapFile {\r\n\tisFromFile = false;\r\n\tosuFile;\r\n\tmapId;\r\n\taudioBlobURL;\r\n\tbackgroundBlobURL;\r\n\taudio;\r\n\taudioArrayBuffer;\r\n\taudioNode;\r\n\tbeatmapRenderData;\r\n\thitsoundList = [];\r\n\ttitle;\r\n\tartist;\r\n\tdiff;\r\n\tmd5Map;\r\n\tisLoaded = false;\r\n\thasOgg = false;\r\n\thasVideo = false;\r\n\thasNonMp4 = false;\r\n\r\n\tstatic CURRENT_MAPID;\r\n\tstatic SIGNALER = new AbortController();\r\n\r\n\tconstructor(mapId, isFromFile) {\r\n\t\tthis.mapId = mapId;\r\n\t\tthis.isFromFile = isFromFile;\r\n\t\tthis.constructMap();\r\n\t}\r\n\r\n\tasync getOsuFile() {\r\n\t\tconst rawOsuFile = (\r\n\t\t\tawait axios.get(`https://preview.tryz.id.vn/api/b/${this.mapId}/osu`)\r\n\t\t).data;\r\n\t\tthis.md5Map = md5(rawOsuFile).toString();\r\n\t\tthis.osuFile = rawOsuFile.replaceAll(\"\\r\", \"\");\r\n\t}\r\n\r\n\tasync readBlobAsBuffer(blob) {\r\n\t\tconst res = await new Promise((resolve) => {\r\n\t\t\tlet fileReader = new FileReader();\r\n\t\t\tfileReader.onload = (event) => resolve(fileReader.result);\r\n\t\t\tfileReader.readAsArrayBuffer(blob);\r\n\t\t});\r\n\r\n\t\t// console.log(res);\r\n\t\treturn res;\r\n\t}\r\n\r\n\tstatic async downloadCustom(url) {\r\n\t\tdocument.querySelector(\".loading\").style.display = \"\";\r\n\t\tdocument.querySelector(\".loading\").style.opacity = 1;\r\n\r\n\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t`Downloading map.\\nMight take a while if your internet is slow`;\r\n\r\n\t\ttry {\r\n\t\t\tconst blob = (\r\n\t\t\t\tawait axios.get(`https://preview.tryz.id.vn/download/${url}`, {\r\n\t\t\t\t\tsignal: BeatmapFile.SIGNALER.signal,\r\n\t\t\t\t\tresponseType: \"blob\",\r\n\t\t\t\t\tonDownloadProgress: (progressEvent) => {\r\n\t\t\t\t\t\t// document.querySelector(\"#loadingText\").textContent = `Downloading map: ${(progressEvent.percent * 100).toFixed(2)}%`;\r\n\t\t\t\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t\t\t\t`Downloading map.\\nUnknown size (${(\r\n\t\t\t\t\t\t\t\tisNaN(progressEvent.rate) ? 0 : progressEvent.rate / 1024 ** 2\r\n\t\t\t\t\t\t\t).toFixed(2)}MiB/s)\\nMight take a while if your internet is slow`;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// headers: {\r\n\t\t\t\t\t//     \"Access-Control-Allow-Origin\": \"*\",\r\n\t\t\t\t\t//     \"Access-Control-Allow-Methods\": \"GET, OPTIONS, POST, HEAD\",\r\n\t\t\t\t\t// },\r\n\t\t\t\t})\r\n\t\t\t).data;\r\n\r\n\t\t\treturn blob;\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(e);\r\n\t\t\tthrow \"Cannot download map from this URL\";\r\n\t\t} finally {\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 0;\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tasync downloadOsz(setId) {\r\n\t\ttry {\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t`Downloading map.\\nMight take a while if your internet is slow`;\r\n\r\n\t\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\t\tconst selectedMirror = currentLocalStorage.mirror.val;\r\n\t\t\tconst customURL = document.querySelector(\"#custom-mirror\").value;\r\n\r\n\t\t\tconst urls = {\r\n\t\t\t\tnerinyan: \"https://api.nerinyan.moe/d/$setId\",\r\n\t\t\t\tsayobot: \"https://dl.sayobot.cn/beatmaps/download/$setId\",\r\n\t\t\t\tchimu: \"https://catboy.best/d/$setId\",\r\n\t\t\t};\r\n\r\n\t\t\tif (!urls[selectedMirror] && customURL === \"\")\r\n\t\t\t\tthrow \"You need a beatmap mirror download link first!\";\r\n\r\n\t\t\tconst url = (urls[selectedMirror] ?? customURL).replace(\"$setId\", setId);\r\n\t\t\tconst response = await axios.get(url, {\r\n\t\t\t\tsignal: BeatmapFile.SIGNALER.signal,\r\n\t\t\t\tresponseType: \"blob\",\r\n\t\t\t\theaders: { Accept: \"application/x-osu-beatmap-archive\" },\r\n\t\t\t\tonDownloadProgress: (progressEvent) => {\r\n\t\t\t\t\t// console.log(progressEvent);\r\n\t\t\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t\t\t`Downloading map.\\n${(progressEvent.progress * 100).toFixed(2)}% (${(\r\n\t\t\t\t\t\t\tisNaN(progressEvent.rate) ? 0 : progressEvent.rate / 1024 ** 2\r\n\t\t\t\t\t\t).toFixed(2)}MiB/s)\\nMight take a while if your internet is slow`;\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\tconst blob = response.data;\r\n\r\n\t\t\tGame.DROP_BLOB = blob;\r\n\t\t\treturn blob;\r\n\t\t} catch (e) {\r\n\t\t\t// return;\r\n\t\t\tconsole.log(e);\r\n\t\t\tthrow \"This map is not available on the selected beatmap provider\\nPlease open the settings to choose another one.\";\r\n\t\t}\r\n\t}\r\n\r\n\tasync getOsz() {\r\n\t\tlet mapsetData;\r\n\t\tif (!this.isFromFile) {\r\n\t\t\tmapsetData = (\r\n\t\t\t\tawait axios.get(`https://preview.tryz.id.vn/api/b/${this.mapId}`)\r\n\t\t\t).data;\r\n\t\t\tthis.artist = mapsetData.artist_unicode;\r\n\t\t\tthis.title = mapsetData.title_unicode;\r\n\t\t\tthis.diff = mapsetData.beatmaps.filter(\r\n\t\t\t\t(diff) => diff.id === parseInt(this.mapId),\r\n\t\t\t)[0].version;\r\n\r\n\t\t\tdocument.title = `${this.artist} - ${this.title} [${this.diff}] | JoSu!`;\r\n\r\n\t\t\t// console.log(mapsetData.beatmaps.filter((diff) => diff.id === parseInt(this.mapId)));\r\n\r\n\t\t\tif (\r\n\t\t\t\tmapsetData.beatmaps.filter(\r\n\t\t\t\t\t(diff) => diff.id === parseInt(this.mapId),\r\n\t\t\t\t)[0].mode !== \"osu\"\r\n\t\t\t) {\r\n\t\t\t\tthrow new Error(\"Not a standard map!\");\r\n\t\t\t}\r\n\r\n\t\t\t// document.querySelector(\"#artistTitle\").innerHTML = `${mapsetData.artist} - ${mapsetData.title}`;\r\n\t\t\t// document.querySelector(\"#versionCreator\").innerHTML = `Difficulty: <span>${\r\n\t\t\t//     mapsetData.beatmaps.find((map) => map.id == this.mapId).version\r\n\t\t\t// }</span> - Mapset by <span>${mapsetData.creator}</span>`;\r\n\r\n\t\t\tGame.INFO.title = mapsetData.title;\r\n\t\t\tGame.INFO.artist = mapsetData.artist;\r\n\t\t\tGame.INFO.difficulty = mapsetData.beatmaps.find(\r\n\t\t\t\t(map) => map.id == this.mapId,\r\n\t\t\t).version;\r\n\t\t\tGame.INFO.mapper = mapsetData.creator;\r\n\t\t}\r\n\r\n\t\tconst setId = mapsetData?.id;\r\n\t\tif (setId && !this.isFromFile)\r\n\t\t\tBeatmap.HREF = `https://osu.ppy.sh/beatmapsets/${setId}#osu/${this.mapId}`;\r\n\t\telse Beatmap.HREF = null;\r\n\r\n\t\tconst mapFileBlob = !this.isFromFile\r\n\t\t\t? await this.downloadOsz(setId)\r\n\t\t\t: Game.DROP_BLOB;\r\n\t\tconst mapFileBlobReader = new zip.BlobReader(mapFileBlob);\r\n\t\tconst zipReader = new zip.ZipReader(mapFileBlobReader);\r\n\t\tconst allEntries = await zipReader.getEntries();\r\n\r\n\t\tif (!this.isFromFile) {\r\n\t\t\tawait this.getOsuFile();\r\n\t\t\tconst diffList = document.querySelector(\".difficultyList\");\r\n\t\t\tdiffList.innerHTML = \"\";\r\n\t\t\t// document.querySelector(\".difficultySelector\").style.display = \"block\";\r\n\r\n\t\t\tconst diffs = [];\r\n\r\n\t\t\tfor (const content of allEntries) {\r\n\t\t\t\tif (content.filename.split(\".\").at(-1) !== \"osu\") continue;\r\n\t\t\t\tconst blob = await content.getData(new zip.BlobWriter(\"text/plain\"));\r\n\t\t\t\tconst rawFile = await blob.text();\r\n\r\n\t\t\t\tconst mode = rawFile\r\n\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t.filter((line) => /Mode:\\s[0-9]+/g.test(line))\r\n\t\t\t\t\t.at(0)\r\n\t\t\t\t\t?.replace(\"Mode: \", \"\");\r\n\t\t\t\tif (parseInt(mode) !== 0) continue;\r\n\r\n\t\t\t\tconst builderOptions = {\r\n\t\t\t\t\taddStacking: true,\r\n\t\t\t\t\tmods: [],\r\n\t\t\t\t};\r\n\t\t\t\tconst blueprintData = osuPerformance.parseBlueprint(rawFile);\r\n\t\t\t\tconst beatmapData = osuPerformance.buildBeatmap(\r\n\t\t\t\t\tblueprintData,\r\n\t\t\t\t\tbuilderOptions,\r\n\t\t\t\t);\r\n\t\t\t\tconst difficultyAttributes =\r\n\t\t\t\t\tosuPerformance.calculateDifficultyAttributes(beatmapData, true)[0];\r\n\r\n\t\t\t\tconst diffName = rawFile\r\n\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t.filter((line) => /Version:.+/g.test(line))\r\n\t\t\t\t\t.at(0)\r\n\t\t\t\t\t?.replace(\"Version:\", \"\");\r\n\r\n\t\t\t\t// console.log(osuPerformance.calculateDifficultyAttributes(beatmapData, true));\r\n\r\n\t\t\t\tconst ele = createDifficultyElement({\r\n\t\t\t\t\tname: diffName,\r\n\t\t\t\t\tfileName: content.filename,\r\n\t\t\t\t\tstarRating: difficultyAttributes?.starRating ?? 0,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tdiffs.push(ele);\r\n\t\t\t}\r\n\r\n\t\t\tdiffs.sort((a, b) => {\r\n\t\t\t\treturn -a.starRating + b.starRating;\r\n\t\t\t});\r\n\r\n\t\t\tfor (const obj of diffs) diffList.appendChild(obj.ele);\r\n\t\t} else {\r\n\t\t\tconst map = allEntries\r\n\t\t\t\t.filter((e) => e.filename === Game.DIFF_FILE_NAME)\r\n\t\t\t\t.at(0);\r\n\t\t\tconst blob = await map.getData(new zip.BlobWriter(\"text/plain\"));\r\n\t\t\tthis.osuFile = await blob.text();\r\n\r\n\t\t\tconst splitted = this.osuFile.split(\"\\n\");\r\n\r\n\t\t\tconst artist = splitted\r\n\t\t\t\t.filter((line) => /Artist:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"Artist:\", \"\");\r\n\t\t\tconst artistUnicode = splitted\r\n\t\t\t\t.filter((line) => /ArtistUnicode:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"ArtistUnicode:\", \"\");\r\n\t\t\tconst title = splitted\r\n\t\t\t\t.filter((line) => /Title:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"Title:\", \"\");\r\n\t\t\tconst titleUnicode = splitted\r\n\t\t\t\t.filter((line) => /TitleUnicode:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"TitleUnicode:\", \"\");\r\n\t\t\tconst creator = splitted\r\n\t\t\t\t.filter((line) => /Creator:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"Creator:\", \"\");\r\n\t\t\tconst version = splitted\r\n\t\t\t\t.filter((line) => /Version:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"Version:\", \"\");\r\n\t\t\tconst beatmapID = splitted\r\n\t\t\t\t.filter((line) => /BeatmapID:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"BeatmapID:\", \"\");\r\n\t\t\tconst beatmapSetID = splitted\r\n\t\t\t\t.filter((line) => /BeatmapSetID:.+/g.test(line))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.replace(\"BeatmapSetID:\", \"\");\r\n\r\n\t\t\t// document.querySelector(\"#artistTitle\").innerHTML = `${artist} - ${title}`;\r\n\t\t\t// document.querySelector(\"#versionCreator\").innerHTML = `Difficulty: <span>${version}</span> - Mapset by <span>${creator}</span>`;\r\n\r\n\t\t\tGame.INFO.title = title;\r\n\t\t\tGame.INFO.artist = artist;\r\n\t\t\tGame.INFO.difficulty = version;\r\n\t\t\tGame.INFO.mapper = creator;\r\n\r\n\t\t\tdocument.title = `${artistUnicode} - ${titleUnicode} [${version}] | JoSu!`;\r\n\r\n\t\t\tif (beatmapSetID && beatmapID && beatmapSetID > 0 && beatmapID > 0) {\r\n\t\t\t\tconst searchTrim = window.location.search\r\n\t\t\t\t\t.replaceAll(\"?\", \"\")\r\n\t\t\t\t\t.replaceAll(/b=[0-9]+/g, \"\")\r\n\t\t\t\t\t.split(\"&\")\r\n\t\t\t\t\t.filter((word) => word !== \"\")\r\n\t\t\t\t\t.join(\"&\");\r\n\t\t\t\twindow.history.pushState(\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t\"JoSu!\",\r\n\t\t\t\t\t`${origin}${!origin.includes(\"github.io\") ? \"\" : \"/beatmap-viewer-web\"}/?b=${beatmapID}${searchTrim !== \"\" ? `&${searchTrim}` : \"\"}${window.location.hash}`,\r\n\t\t\t\t);\r\n\t\t\t\tBeatmap.HREF = `https://osu.ppy.sh/beatmapsets/${beatmapSetID}#osu/${beatmapID}`;\r\n\t\t\t} else {\r\n\t\t\t\tconst searchTrim = window.location.search\r\n\t\t\t\t\t.replaceAll(\"?\", \"\")\r\n\t\t\t\t\t.replaceAll(/b=[0-9]+/g, \"\");\r\n\t\t\t\twindow.history.pushState(\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t\"JoSu!\",\r\n\t\t\t\t\t`${origin}${!origin.includes(\"github.io\") ? \"\" : \"/beatmap-viewer-web\"}/?${searchTrim}${window.location.hash}`,\r\n\t\t\t\t);\r\n\t\t\t\tBeatmap.HREF = null;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst modsTemplate = [\"HARD_ROCK\", \"EASY\", \"DOUBLE_TIME\", \"HALF_TIME\"];\r\n\r\n\t\tconst modsFlag = [Game.MODS.HR, Game.MODS.EZ, Game.MODS.DT, Game.MODS.HT];\r\n\r\n\t\tconst builderOptions = {\r\n\t\t\taddStacking: true,\r\n\t\t\tmods: modsTemplate.filter((mod, idx) => modsFlag[idx]),\r\n\t\t};\r\n\t\tconst blueprintData = osuPerformance.parseBlueprint(this.osuFile);\r\n\t\tconst beatmapData = osuPerformance.buildBeatmap(\r\n\t\t\tblueprintData,\r\n\t\t\tbuilderOptions,\r\n\t\t);\r\n\t\tconst difficultyAttributes = osuPerformance.calculateDifficultyAttributes(\r\n\t\t\tbeatmapData,\r\n\t\t\ttrue,\r\n\t\t)[0];\r\n\r\n\t\t// document.querySelector(\"#CS\").textContent = round(beatmapData.difficulty.circleSize);\r\n\t\t// document.querySelector(\"#AR\").textContent = round(beatmapData.difficulty.approachRate);\r\n\t\t// document.querySelector(\"#OD\").textContent = round(beatmapData.difficulty.overallDifficulty);\r\n\t\t// document.querySelector(\"#HP\").textContent = round(beatmapData.difficulty.drainRate);\r\n\t\t// document.querySelector(\"#SR\").textContent = `${round(difficultyAttributes.starRating)}`;\r\n\t\t// document.querySelector(\"#SR\").style.backgroundColor = getDiffColor(difficultyAttributes.starRating);\r\n\r\n\t\tGame.STATS.CS = round(beatmapData.difficulty.circleSize);\r\n\t\tGame.STATS.AR = round(beatmapData.difficulty.approachRate);\r\n\t\tGame.STATS.OD = round(beatmapData.difficulty.overallDifficulty);\r\n\t\tGame.STATS.HP = round(beatmapData.difficulty.drainRate);\r\n\t\tGame.STATS.SR = round(difficultyAttributes?.starRating ?? 0);\r\n\t\tGame.STATS.srContainer.color = parseInt(\r\n\t\t\td3\r\n\t\t\t\t.color(getDiffColor(difficultyAttributes?.starRating ?? 0))\r\n\t\t\t\t.formatHex()\r\n\t\t\t\t.slice(1),\r\n\t\t\t16,\r\n\t\t);\r\n\r\n\t\tif ((difficultyAttributes?.starRating ?? 0) >= 6.5)\r\n\t\t\tGame.STATS.SRSprite.style.fill = parseInt(\r\n\t\t\t\td3.color(\"hsl(45, 100%, 70%)\").formatHex().slice(1),\r\n\t\t\t\t16,\r\n\t\t\t);\r\n\t\telse Game.STATS.SRSprite.style.fill = 0x000000;\r\n\r\n\t\tGame.STATS.update();\r\n\r\n\t\t// console.log(beatmapData)\r\n\t\t// console.log(difficultyAttributes)\r\n\r\n\t\tconst osuVersion = parseInt(this.osuFile.split(\"\\n\")[0].slice(-3));\r\n\t\tconst audioFilename =\r\n\t\t\tosuVersion <= 3\r\n\t\t\t\t? this.osuFile.split(\"\\n\")[3]\r\n\t\t\t\t: this.osuFile\r\n\t\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t\t.filter((line) => line.match(/AudioFilename: /g))[0]\r\n\t\t\t\t\t\t.replace(\"AudioFilename: \", \"\")\r\n\t\t\t\t\t\t.replace(\"\\r\", \"\")\r\n\t\t\t\t\t\t.replace(\"\\n\", \"\");\r\n\t\tconst backgroundFilename = this.osuFile\r\n\t\t\t.split(\"\\n\")\r\n\t\t\t.filter((line) => line.match(/0,0,\"*.*\"/g))\r\n\t\t\t.at(0)\r\n\t\t\t?.match(/\".*?\\.[a-zA-Z0-9]+\"/g)\r\n\t\t\t.at(0)\r\n\t\t\t?.replaceAll('\"', \"\");\r\n\t\tconst videoFilename = this.osuFile\r\n\t\t\t.split(\"\\n\")\r\n\t\t\t.filter((line) => line.match(/Video,-?[0-9]+,\"*.*\"/g))\r\n\t\t\t.at(0)\r\n\t\t\t?.match(/\".*?\\.[a-zA-Z0-9]+\"/g)\r\n\t\t\t.at(0)\r\n\t\t\t?.replaceAll('\"', \"\");\r\n\t\tconst videoOffset = parseInt(\r\n\t\t\tthis.osuFile\r\n\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t.filter((line) => line.match(/Video,-?[0-9]+,\"*.*\"/g))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t?.split(\",\")\r\n\t\t\t\t.at(1) ?? 0,\r\n\t\t);\r\n\r\n\t\tconsole.log(audioFilename, backgroundFilename, videoFilename ?? \"\");\r\n\t\t// console.log(allEntries);\r\n\r\n\t\tdocument.querySelector(\"#loadingText\").innerHTML =\r\n\t\t\t`Setting up Audio<br>Might take long if the audio file is large`;\r\n\t\tconst audioFile = allEntries.find((e) => e.filename === audioFilename);\r\n\r\n\t\tif (!audioFile) {\r\n\t\t\tthrow \"This map has no audio file\";\r\n\t\t}\r\n\r\n\t\tlet audioBlob = await audioFile.getData(\r\n\t\t\tnew zip.BlobWriter(`audio/${audioFilename.split(\".\").at(-1)}`),\r\n\t\t);\r\n\r\n\t\tif (audioFilename.split(\".\").at(-1) === \"ogg\") {\r\n\t\t\tthis.hasOgg = true;\r\n\t\t\t// audioBlob = await Transcoder.toMp3({\r\n\t\t\t// \tblob: audioBlob,\r\n\t\t\t// \text: audioFilename.split(\".\").at(-1),\r\n\t\t\t// });\r\n\t\t}\r\n\r\n\t\t// console.log(\"Audio Blob Generated\");\r\n\t\t// const { dt, ht } = await Transcoder.changeRate({\r\n\t\t// \tblob: audioBlob,\r\n\t\t// \text: audioFilename.split(\".\").at(-1),\r\n\t\t// });\r\n\t\tthis.audioBlobURL = URL.createObjectURL(audioBlob);\r\n\t\tconst audioArrayBuffer = await this.readBlobAsBuffer(audioBlob);\r\n\t\t// const [dtBuffer, htBuffer] = await Promise.all([\r\n\t\t// \tthis.readBlobAsBuffer(dt),\r\n\t\t// \tthis.readBlobAsBuffer(ht),\r\n\t\t// ]);\r\n\t\tconsole.log(\"Audio Loaded\");\r\n\r\n\t\tconst backgroundFile = allEntries\r\n\t\t\t.filter((e) => e.filename === backgroundFilename)\r\n\t\t\t.at(0);\r\n\t\tif (backgroundFile) {\r\n\t\t\tdocument.querySelector(\"#loadingText\").innerHTML =\r\n\t\t\t\t`Setting up Background`;\r\n\t\t\tconst data = await backgroundFile.getData(\r\n\t\t\t\tnew zip.BlobWriter(`image/${backgroundFilename.split(\".\").at(-1)}`),\r\n\t\t\t);\r\n\t\t\t// const base64 = await backgroundFile.getData(new zip.Data64URIWriter(`image/${backgroundFilename.split(\".\").at(-1)}`));\r\n\r\n\t\t\t// console.log(data);\r\n\r\n\t\t\t// console.log(\"Background Blob Generated\");\r\n\t\t\tthis.backgroundBlobURL = URL.createObjectURL(data);\r\n\t\t\tconsole.log(\"Background Loaded\");\r\n\t\t\tBackground.src = this.backgroundBlobURL;\r\n\r\n\t\t\t// document.querySelector(\".mapBG\").style.backgroundImage = `url(${this.backgroundBlobURL})`;\r\n\t\t\tdocument.body.style.backgroundImage = `url(${this.backgroundBlobURL})`;\r\n\r\n\t\t\tconst bg = new Image();\r\n\t\t\tbg.src = this.backgroundBlobURL;\r\n\r\n\t\t\tif (bg.complete) {\r\n\t\t\t\tloadColorPalette(bg);\r\n\t\t\t} else {\r\n\t\t\t\tbg.addEventListener(\"load\", () => loadColorPalette(bg));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst videoFile = allEntries\r\n\t\t\t.filter((e) => e.filename === videoFilename)\r\n\t\t\t.at(0);\r\n\t\tif (videoFile) {\r\n\t\t\tconst extension = videoFilename.split(\".\").at(-1);\r\n\t\t\tdocument.querySelector(\"#loadingText\").innerHTML =\r\n\t\t\t\t`Setting up Background Video`;\r\n\t\t\tconst data = await videoFile.getData(\r\n\t\t\t\tnew zip.BlobWriter(`video/${extension}`),\r\n\t\t\t);\r\n\r\n\t\t\tif (extension !== \"mp4\") {\r\n\t\t\t\tthis.videoBlobURL = await Transcoder.transcode({\r\n\t\t\t\t\tblob: data,\r\n\t\t\t\t\text: extension,\r\n\t\t\t\t});\r\n\t\t\t\tthis.hasNonMp4 = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.videoBlobURL = URL.createObjectURL(data);\r\n\t\t\t}\r\n\t\t\tconsole.log(this.videoBlobURL);\r\n\t\t\tconsole.log(\"Video Loaded\");\r\n\t\t\tBackground.videoSrc = this.videoBlobURL;\r\n\t\t\tBackground.offset = videoOffset;\r\n\r\n\t\t\tconsole.log(videoOffset);\r\n\t\t}\r\n\r\n\t\tif (videoFile) {\r\n\t\t\tthis.hasVideo = true;\r\n\t\t}\r\n\r\n\t\tBackground.switch(Game.IS_VIDEO ? \"VIDEO\" : \"STATIC\");\r\n\r\n\t\tconst osbFile = allEntries.find(\r\n\t\t\t(e) => e.filename.split(\".\").at(-1) === \"osb\",\r\n\t\t);\r\n\t\tif (osbFile) {\r\n\t\t\tdocument.querySelector(\"#loadingText\").innerHTML =\r\n\t\t\t\t`Setting up Storyboard`;\r\n\t\t\tconst blob = await osbFile.getData(new zip.BlobWriter(\"text/plain\"));\r\n\t\t\tconst osbContent = await blob.text();\r\n\r\n\t\t\tawait Storyboard.parse(\r\n\t\t\t\tosbContent,\r\n\t\t\t\tthis.osuFile,\r\n\t\t\t\tallEntries,\r\n\t\t\t\tbackgroundFilename,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tconst hitsoundFiles = allEntries.filter((file) => {\r\n\t\t\t// console.log(file.filename);\r\n\t\t\treturn /(normal|soft|drum)-(hitnormal|hitwhistle|hitclap|hitfinish|slidertick|sliderwhistle|sliderslide)([1-9][0-9]*)?/.test(\r\n\t\t\t\tfile.filename,\r\n\t\t\t);\r\n\t\t});\r\n\r\n\t\t// console.log(hitsoundFiles);\r\n\r\n\t\tconst hitsoundArrayBuffer = [];\r\n\t\tdocument.querySelector(\"#loadingText\").innerHTML =\r\n\t\t\t`Setting up Hitsounds<br>Might take long if there are many hitsound files`;\r\n\t\tfor (const file of hitsoundFiles) {\r\n\t\t\tif (file.filename.split(\".\").at(-1) === \"ogg\") {\r\n\t\t\t\tthis.hasOgg = true;\r\n\t\t\t}\r\n\r\n\t\t\tconst writer = new zip.BlobWriter(\r\n\t\t\t\t`audio/${file.filename.split(\".\").at(-1)}`,\r\n\t\t\t);\r\n\t\t\tconst fileBlob = await file.getData(writer);\r\n\t\t\t// console.log(`Hitsound ${file.filename} Blob Generated`);\r\n\t\t\tconst fileArrayBuffer = await this.readBlobAsBuffer(fileBlob);\r\n\t\t\t// console.log(`Hitsound ${file.filename} ArrayBuffer Generated`);\r\n\r\n\t\t\thitsoundArrayBuffer.push({\r\n\t\t\t\tfilename: file.filename,\r\n\t\t\t\tbuf: fileArrayBuffer,\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.hitsoundList = hitsoundArrayBuffer;\r\n\t\tconsole.log(\"Hitsound Loaded\");\r\n\r\n\t\tzipReader.close();\r\n\t\tdocument.querySelector(\"#loadingText\").innerHTML = `Setting up HitObjects`;\r\n\t\tconsole.log(\"Get .osz completed\");\r\n\t\treturn {\r\n\t\t\taudioArrayBuffer,\r\n\t\t\t// dtBuffer,\r\n\t\t\t// htBuffer,\r\n\t\t};\r\n\t}\r\n\r\n\tasync loadHitsounds() {\r\n\t\tHitSample.SAMPLES.MAP = {};\r\n\t\tfor (const hs of this.hitsoundList) {\r\n\t\t\tconst idx = hs.filename\r\n\t\t\t\t.replace(hs.filename.match(/normal|soft|drum/)[0], \"\")\r\n\t\t\t\t.replaceAll(\r\n\t\t\t\t\ths.filename.match(\r\n\t\t\t\t\t\t/hitnormal|hitwhistle|hitfinish|hitclap|slidertick|sliderwhistle|sliderslide/,\r\n\t\t\t\t\t),\r\n\t\t\t\t\t\"\",\r\n\t\t\t\t)\r\n\t\t\t\t.replace(\"-\", \"\")\r\n\t\t\t\t.split(\".\")[0];\r\n\r\n\t\t\tawait loadSampleSound(\r\n\t\t\t\ths.filename.split(\".\")[0].replaceAll(`${idx}`, \"\"),\r\n\t\t\t\tidx === \"\" ? 1 : parseInt(idx),\r\n\t\t\t\ths.buf,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tasync constructMap() {\r\n\t\ttry {\r\n\t\t\tif (this.mapId === \"2087153\") {\r\n\t\t\t\tthrow \"This beatmap should not be loaded under any circumstances. Please provide a different beatmap.\";\r\n\t\t\t}\r\n\r\n\t\t\tGame.WORKER.postMessage({\r\n\t\t\t\ttype: \"clear\",\r\n\t\t\t});\r\n\r\n\t\t\tconst removedChildren = Game.CONTAINER.removeChildren();\r\n\t\t\tremovedChildren.forEach((ele) => ele.destroy());\r\n\r\n\t\t\tTimeline.destruct();\r\n\t\t\tBackground.reset();\r\n\t\t\tStoryboard.reset();\r\n\r\n\t\t\tBeatmap.CURRENT_MAPID = this.mapId;\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"\";\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 1;\r\n\t\t\tconst { audioArrayBuffer } = await this.getOsz();\r\n\t\t\tthis.audioNode = new PAudio();\r\n\t\t\tawait this.loadHitsounds();\r\n\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent = `Setting up Audio`;\r\n\t\t\tawait this.audioNode.createBufferNode({\r\n\t\t\t\tbase: audioArrayBuffer,\r\n\t\t\t\t// dt: dtBuffer,\r\n\t\t\t\t// ht: htBuffer,\r\n\t\t\t});\r\n\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t\t\t`Setting up HitObjects`;\r\n\t\t\tthis.beatmapRenderData = new Beatmap(this.osuFile, 0);\r\n\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 0;\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"none\";\r\n\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent = `Getting map data`;\r\n\r\n\t\t\tdocument.querySelector(\"#choose-diff\").disabled = false;\r\n\t\t\tdocument.querySelector(\"#close\").disabled = false;\r\n\r\n\t\t\tif (\r\n\t\t\t\tScoreParser.REPLAY_DATA &&\r\n\t\t\t\tScoreParser.REPLAY_DATA.md5map !== this.md5Map\r\n\t\t\t) {\r\n\t\t\t\tScoreParser.reset();\r\n\t\t\t}\r\n\r\n\t\t\t// document.querySelector(\"#playButton\").addEventListener(\"click\", playToggle);\r\n\r\n\t\t\tif (ScoreParser.CURSOR_DATA) {\r\n\t\t\t\tScoreParser.eval();\r\n\t\t\t\tdocument.querySelector(\"#HD\").disabled = true;\r\n\t\t\t\tdocument.querySelector(\"#HR\").disabled = true;\r\n\t\t\t\tdocument.querySelector(\"#DT\").disabled = true;\r\n\t\t\t\tdocument.querySelector(\"#NC\").disabled = true;\r\n\t\t\t\tdocument.querySelector(\"#EZ\").disabled = true;\r\n\t\t\t\tdocument.querySelector(\"#HT\").disabled = true;\r\n\t\t\t\tdocument.querySelector(\"#DC\").disabled = true;\r\n\r\n\t\t\t\tcalculateCurrentSR([\r\n\t\t\t\t\tGame.MODS.HR,\r\n\t\t\t\t\tGame.MODS.EZ,\r\n\t\t\t\t\tGame.MODS.DT,\r\n\t\t\t\t\tGame.MODS.HT,\r\n\t\t\t\t]);\r\n\r\n\t\t\t\tUser.updateInfo({\r\n\t\t\t\t\tusername: ScoreParser.REPLAY_DATA.player,\r\n\t\t\t\t\tmods: ScoreParser.MODS,\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tUser.updateInfo();\r\n\r\n\t\t\t\tconst raw =\r\n\t\t\t\t\turlParams.get(\"m\") && /[A-Za-z]+/g.test(urlParams.get(\"m\"))\r\n\t\t\t\t\t\t? urlParams.get(\"m\").match(/.{2}/g)\r\n\t\t\t\t\t\t: [];\r\n\t\t\t\tconst mods = raw\r\n\t\t\t\t\t.reduce((arr, mod) => {\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t![\"HD\", \"HR\", \"DT\", \"HT\", \"EZ\", \"DC\", \"NC\"].includes(\r\n\t\t\t\t\t\t\t\tmod.toUpperCase(),\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\treturn arr;\r\n\t\t\t\t\t\treturn [...arr, mod.toUpperCase()];\r\n\t\t\t\t\t}, [])\r\n\t\t\t\t\t.map((e) => e.toUpperCase());\r\n\r\n\t\t\t\tdocument.querySelector(\"#HD\").disabled = false;\r\n\t\t\t\tdocument.querySelector(\"#HR\").disabled = false;\r\n\t\t\t\tdocument.querySelector(\"#DT\").disabled = false;\r\n\t\t\t\tdocument.querySelector(\"#NC\").disabled = false;\r\n\t\t\t\tdocument.querySelector(\"#EZ\").disabled = false;\r\n\t\t\t\tdocument.querySelector(\"#HT\").disabled = false;\r\n\t\t\t\tdocument.querySelector(\"#DC\").disabled = false;\r\n\r\n\t\t\t\tGame.MODS.HR = mods.includes(\"HR\");\r\n\t\t\t\tGame.MODS.DT = mods.includes(\"NC\") ? false : mods.includes(\"DT\");\r\n\t\t\t\tGame.MODS.NC = mods.includes(\"NC\");\r\n\t\t\t\tGame.MODS.HD = mods.includes(\"HD\");\r\n\t\t\t\tGame.MODS.EZ = mods.includes(\"EZ\");\r\n\t\t\t\tGame.MODS.HT = mods.includes(\"DC\") ? false : mods.includes(\"HT\");\r\n\t\t\t\tGame.MODS.DC = mods.includes(\"DC\");\r\n\r\n\t\t\t\tconst DTMultiplier = !Game.MODS.DT && !Game.MODS.NC ? 1 : 1.5;\r\n\t\t\t\tconst HTMultiplier = !Game.MODS.HT && !Game.MODS.DC ? 1 : 0.75;\r\n\r\n\t\t\t\tGame.PLAYBACK_RATE = 1 * DTMultiplier * HTMultiplier;\r\n\t\t\t\tBeatmap.updateModdedStats();\r\n\r\n\t\t\t\tdocument.querySelector(\"#HD\").checked = Game.MODS.HD;\r\n\t\t\t\tdocument.querySelector(\"#HR\").checked = Game.MODS.HR;\r\n\t\t\t\tdocument.querySelector(\"#DT\").checked = Game.MODS.DT;\r\n\t\t\t\tdocument.querySelector(\"#NC\").checked = Game.MODS.NC;\r\n\t\t\t\tdocument.querySelector(\"#EZ\").checked = Game.MODS.EZ;\r\n\t\t\t\tdocument.querySelector(\"#HT\").checked = Game.MODS.HT;\r\n\t\t\t\tdocument.querySelector(\"#DC\").checked = Game.MODS.DC;\r\n\r\n\t\t\t\tcalculateCurrentSR([\r\n\t\t\t\t\tGame.MODS.HR,\r\n\t\t\t\t\tGame.MODS.EZ,\r\n\t\t\t\t\tGame.MODS.DT || Game.MODS.NC,\r\n\t\t\t\t\tGame.MODS.HT || Game.MODS.DC,\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\r\n\t\t\tGame.appResize();\r\n\r\n\t\t\tconst isiOS = getOS() === \"iOS\";\r\n\r\n\t\t\tif (this.hasOgg && isiOS) {\r\n\t\t\t\tnew Notification({\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\"This beatmap contains .ogg files, which are not supported on iOS devices.\",\r\n\t\t\t\t\tautoTimeout: false,\r\n\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t}).notify();\r\n\t\t\t\tthis.hasOgg = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.hasVideo && isiOS) {\r\n\t\t\t\tnew Notification({\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t\"This beatmap contains video, which is not supported on iOS devices.\",\r\n\t\t\t\t\tautoTimeout: false,\r\n\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t}).notify();\r\n\t\t\t\tthis.hasVideo = false;\r\n\t\t\t}\r\n\r\n\t\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\t\tif (this.hasNonMp4 && !currentLocalStorage.background.transcodeVideo) {\r\n\t\t\t\tnew Notification({\r\n\t\t\t\t\tmessage:\r\n\t\t\t\t\t\t'Check \"Transcode Video\" in settings if you have playback issues. (might take longer to load)',\r\n\t\t\t\t\tautoTimeout: false,\r\n\t\t\t\t\ttype: \"warning\",\r\n\t\t\t\t}).notify();\r\n\t\t\t\tthis.hasNonMp4 = false;\r\n\t\t\t}\r\n\r\n\t\t\tdocument.onkeydown = (e) => {\r\n\t\t\t\te = e || window.event;\r\n\t\t\t\tswitch (e.key) {\r\n\t\t\t\t\tcase \"ArrowLeft\":\r\n\t\t\t\t\t\t// Left pressed\r\n\t\t\t\t\t\tgo(e.shiftKey, false);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"ArrowRight\":\r\n\t\t\t\t\t\t// Right pressed\r\n\t\t\t\t\t\tgo(e.shiftKey, true);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \" \":\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tdocument.querySelector(\".difficultySelector\").style.display !==\r\n\t\t\t\t\t\t\t\t\"block\" &&\r\n\t\t\t\t\t\t\tdocument.activeElement !== document.querySelector(\"#jumpToTime\")\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\tplayToggle();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.key === \"c\" && e.ctrlKey) {\r\n\t\t\t\t\t// console.log(\"Copied\");\r\n\t\t\t\t\tif (Game.SELECTED.length) {\r\n\t\t\t\t\t\tconst objs =\r\n\t\t\t\t\t\t\tthis.beatmapRenderData.objectsController.objectsList.filter((o) =>\r\n\t\t\t\t\t\t\t\tGame.SELECTED.includes(o.obj.time),\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst obj = objs.reduce((prev, curr) =>\r\n\t\t\t\t\t\t\tprev.obj.time > curr.obj.time ? curr : prev,\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tconst currentMiliseconds = Math.floor(obj.obj.time % 1000)\r\n\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t.padStart(3, \"0\");\r\n\t\t\t\t\t\tconst currentSeconds = Math.floor((obj.obj.time / 1000) % 60)\r\n\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t.padStart(2, \"0\");\r\n\t\t\t\t\t\tconst currentMinute = Math.floor(obj.obj.time / 1000 / 60)\r\n\t\t\t\t\t\t\t.toString()\r\n\t\t\t\t\t\t\t.padStart(2, \"0\");\r\n\r\n\t\t\t\t\t\tnavigator.clipboard.writeText(\r\n\t\t\t\t\t\t\t`${currentMinute}:${currentSeconds}:${currentMiliseconds} (${objs.map((o) => o.obj.comboIdx).join(\",\")}) - `,\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tnew Notification({\r\n\t\t\t\t\t\t\tmessage: \"Object(s) timestamp copied\",\r\n\t\t\t\t\t\t}).notify();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.key === \"a\" && e.ctrlKey) {\r\n\t\t\t\t\tif (document.activeElement === document.querySelector(\"#jumpToTime\"))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tif (document.activeElement === document.querySelector(\"#mapInput\"))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tGame.SELECTED = this.beatmapRenderData.objectsController.objectsList\r\n\t\t\t\t\t\t.filter((o) => !(o.obj instanceof Spinner))\r\n\t\t\t\t\t\t.map((o) => o.obj.time);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.key === \"Escape\") {\r\n\t\t\t\t\tif (document.querySelector(\".seekTo\").open) closePopup();\r\n\r\n\t\t\t\t\tif (document.querySelector(\"#settingsPanel\").style.opacity === \"1\") {\r\n\t\t\t\t\t\topenMenu();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (Game.SHOW_METADATA) {\r\n\t\t\t\t\t\ttoggleMetadataPanel();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (Game.SHOW_TIMING_PANEL) {\r\n\t\t\t\t\t\ttoggleTimingPanel();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tGame.SELECTED = [];\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (\r\n\t\t\t\turlParams.get(\"b\") === Beatmap.CURRENT_MAPID &&\r\n\t\t\t\turlParams.get(\"t\") &&\r\n\t\t\t\t/[0-9]+/g.test(urlParams.get(\"t\"))\r\n\t\t\t) {\r\n\t\t\t\tGame.BEATMAP_FILE?.audioNode?.seekTo(parseInt(urlParams.get(\"t\")));\r\n\t\t\t\t// updateTime(parseInt(urlParams.get(\"t\")));\r\n\t\t\t\t// this.beatmapRenderData.objectsController.draw(parseInt(urlParams.get(\"t\")), true);\r\n\t\t\t} else {\r\n\t\t\t\t// this.beatmapRenderData.objectsController.draw(this.audioNode.getCurrentTime(), true);\r\n\t\t\t}\r\n\r\n\t\t\t// Game.APP.ticker.add(this.beatmapRenderData.objectsController.render);\r\n\r\n\t\t\t// document.querySelector(\".timelineContainer\").addEventListener(\"wheel\", scrollEventHandler, {\r\n\t\t\t//     capture: true,\r\n\t\t\t//     passive: false,\r\n\t\t\t// });\r\n\r\n\t\t\tthis.isLoaded = true;\r\n\t\t\t// (new Notification(`Finished map setup`)).notify();\r\n\t\t} catch (err) {\r\n\t\t\t// alert(err);\r\n\t\t\tnew Notification({\r\n\t\t\t\tmessage: err,\r\n\t\t\t\tautoTimeout: false,\r\n\t\t\t\ttype: \"error\",\r\n\t\t\t}).notify();\r\n\t\t\tconsole.error(err);\r\n\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 0;\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"none\";\r\n\r\n\t\t\tGame.BEATMAP_FILE = undefined;\r\n\t\t}\r\n\t}\r\n}\r\n","import { Skinning } from \"./Skinning.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport { BeatmapFile } from \"./BeatmapFile.js\";\r\nimport { urlParams } from \"./GlobalVariables.js\";\r\nimport { PlayContainer } from \"./PlayButtons.js\";\r\nimport { ObjectsController } from \"./HitObjects/ObjectsController.js\";\r\nimport { Background } from \"./Background.js\";\r\nimport { Storyboard } from \"./Storyboard/Storyboard.js\";\r\nimport AudioWorker from \"./Workers/AudioWorker.js?worker\";\r\n\r\nexport class PAudio {\r\n\traw_buf;\r\n\tbuf;\r\n\tdt_buf;\r\n\tht_buf;\r\n\tsrc;\r\n\tcurrentTime = 1;\r\n\tstartTime = 0;\r\n\tabsStartTime = 0;\r\n\tisPlaying = false;\r\n\r\n\tisLoaded = false;\r\n\r\n\tstatic SOFT_OFFSET = 0;\r\n\r\n\tstretchAudio(inputData, stretchFactor) {\r\n\t\tconst worker = new AudioWorker();\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tworker.postMessage({\r\n\t\t\t\tdata: inputData,\r\n\t\t\t\tstretchFactor,\r\n\t\t\t\trate: Game.AUDIO_CTX.sampleRate,\r\n\t\t\t});\r\n\r\n\t\t\tworker.onmessage = ({ data }) => {\r\n\t\t\t\tresolve(data.data);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tasync createBufferNode({ base, dt, ht }) {\r\n\t\t// console.log(buf);\r\n\t\tthis.raw_buf = base;\r\n\t\tconst data = await Game.AUDIO_CTX.decodeAudioData(base);\r\n\t\t// const dt_buf = await Game.AUDIO_CTX.decodeAudioData(dt);\r\n\t\t// const ht_buf = await Game.AUDIO_CTX.decodeAudioData(ht);\r\n\t\t// const [dt_output] = await Promise.all([\r\n\t\t// \tthis.stretchAudio(data.getChannelData(0), 1.5),\r\n\t\t// ]);\r\n\r\n\t\t// const dt_buf = Game.AUDIO_CTX.createBuffer(\r\n\t\t// \t1,\r\n\t\t// \tdt_output.length,\r\n\t\t// \tGame.AUDIO_CTX.sampleRate,\r\n\t\t// );\r\n\t\t// dt_buf.getChannelData(0).set(dt_output);\r\n\r\n\t\tawait Game.AUDIO_CTX.audioWorklet.addModule(\"../lib/phase-vocoder.min.js\");\r\n\t\tthis.phazeNode = new AudioWorkletNode(\r\n\t\t\tGame.AUDIO_CTX,\r\n\t\t\t\"phase-vocoder-processor\",\r\n\t\t);\r\n\r\n\t\tthis.raw_buf = data;\r\n\t\tthis.buf = data;\r\n\t\t// this.dt_buf = dt_buf;\r\n\t\t// this.ht_buf = ht_buf;\r\n\r\n\t\tif (\r\n\t\t\turlParams.get(\"b\") &&\r\n\t\t\turlParams.get(\"t\") &&\r\n\t\t\turlParams.get(\"b\") === BeatmapFile.CURRENT_MAPID\r\n\t\t) {\r\n\t\t\tthis.seekTo(parseInt(urlParams.get(\"t\")));\r\n\t\t}\r\n\r\n\t\tthis.gainNode = Game.AUDIO_CTX.createGain();\r\n\r\n\t\tthis.isLoaded = true;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tPAudio.SOFT_OFFSET = JSON.parse(\r\n\t\t\tlocalStorage.getItem(\"settings\"),\r\n\t\t).mapping.offset;\r\n\t}\r\n\r\n\tseekTo(time) {\r\n\t\t// console.log(time);\r\n\t\tif (time !== 0 && !time) return;\r\n\r\n\t\tif (this.buf === undefined || time > this.raw_buf.duration * 1000) return;\r\n\r\n\t\tconst originalIsPlaying = this.isPlaying;\r\n\t\tif (this.isPlaying) this.pause();\r\n\t\tthis.currentTime = time;\r\n\t\tGame.WORKER.postMessage({\r\n\t\t\ttype: \"seek\",\r\n\t\t\ttime,\r\n\t\t});\r\n\t\tStoryboard.WORKER.postMessage({\r\n\t\t\ttype: \"seek\",\r\n\t\t\ttime,\r\n\t\t});\r\n\t\tBackground.seekTo(time);\r\n\t\t// console.log(this.currentTime);\r\n\t\tif (originalIsPlaying) this.play();\r\n\t}\r\n\r\n\tplay(time) {\r\n\t\tif (!this.isPlaying && this.gainNode) {\r\n\t\t\tthis.src = Game.AUDIO_CTX.createBufferSource();\r\n\r\n\t\t\tthis.gainNode.gain.value =\r\n\t\t\t\tGame.MUSIC_VOL *\r\n\t\t\t\tGame.MASTER_VOL *\r\n\t\t\t\t(Game.PLAYBACK_RATE !== 1 && (Game.MODS.DT || Game.MODS.HT) ? 3 : 1);\r\n\r\n\t\t\t// this.gainNode.gain.value = Game.MUSIC_VOL * Game.MASTER_VOL;\r\n\r\n\t\t\t// const buf = Game.MODS.DT\r\n\t\t\t// \t? this.dt_buf\r\n\t\t\t// \t: Game.MODS.HT\r\n\t\t\t// \t\t? this.ht_buf\r\n\t\t\t// \t\t: this.buf;\r\n\t\t\tconst buf = this.buf;\r\n\r\n\t\t\tif (Game.MODS.NC || Game.MODS.DC || Game.MODS.HT || Game.MODS.DT) {\r\n\t\t\t\tthis.src.playbackRate.value = Game.PLAYBACK_RATE;\r\n\t\t\t}\r\n\t\t\t// if (Game.MODS.NC || Game.MODS.DC) {\r\n\t\t\t// \tthis.src.playbackRate.value = Game.PLAYBACK_RATE;\r\n\t\t\t// }\r\n\r\n\t\t\tthis.src.buffer = buf;\r\n\t\t\tthis.src.onended = () => {\r\n\t\t\t\tconst tempCurrentTime = this.getCurrentTime();\r\n\r\n\t\t\t\tif (tempCurrentTime >= this.raw_buf.duration * 1000) {\r\n\t\t\t\t\t// console.log(\"Yes!\", tempCurrentTime);\r\n\t\t\t\t\tconsole.log(\"Ended\");\r\n\t\t\t\t\tthis.pause();\r\n\t\t\t\t\t// playingFlag = false;\r\n\t\t\t\t\tthis.seekTo(0);\r\n\t\t\t\t\tPlayContainer.playButton.sprite.texture =\r\n\t\t\t\t\t\tPlayContainer.playButton.texture;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tif (Game.MODS.HT || Game.MODS.DT) {\r\n\t\t\t\tlet pitchFactorParam = this.phazeNode.parameters.get(\"pitchFactor\");\r\n\t\t\t\tpitchFactorParam.value = 1 / Game.PLAYBACK_RATE;\r\n\t\t\t\tthis.src.connect(this.phazeNode);\r\n\t\t\t\tthis.phazeNode.connect(this.gainNode);\r\n\t\t\t} else {\r\n\t\t\t\tthis.src.connect(this.gainNode);\r\n\t\t\t}\r\n\r\n\t\t\t// this.src.connect(this.gainNode);\r\n\t\t\tthis.gainNode.connect(Game.AUDIO_CTX.destination);\r\n\r\n\t\t\tthis.startTime = Game.AUDIO_CTX.currentTime * 1000;\r\n\t\t\tthis.absStartTime = performance.now();\r\n\t\t\t// this.src.start(\r\n\t\t\t// \tGame.AUDIO_CTX.currentTime -\r\n\t\t\t// \t\t(PAudio.SOFT_OFFSET < 0 ? PAudio.SOFT_OFFSET / 1000 : 0),\r\n\t\t\t// \tthis.currentTime /\r\n\t\t\t// \t\t1000 /\r\n\t\t\t// \t\t(Game.MODS.DT || Game.MODS.HT ? Game.PLAYBACK_RATE : 1) +\r\n\t\t\t// \t\t(PAudio.SOFT_OFFSET >= 0 ? PAudio.SOFT_OFFSET / 1000 : 0),\r\n\t\t\t// );\r\n\t\t\tthis.src.start(\r\n\t\t\t\tGame.AUDIO_CTX.currentTime -\r\n\t\t\t\t\t(PAudio.SOFT_OFFSET < 0 ? PAudio.SOFT_OFFSET / 1000 : 0),\r\n\t\t\t\tthis.currentTime / 1000 +\r\n\t\t\t\t\t(PAudio.SOFT_OFFSET >= 0 ? PAudio.SOFT_OFFSET / 1000 : 0),\r\n\t\t\t);\r\n\r\n\t\t\tGame.WORKER.postMessage({\r\n\t\t\t\ttype: \"start\",\r\n\t\t\t});\r\n\t\t\tStoryboard.WORKER.postMessage({\r\n\t\t\t\ttype: \"start\",\r\n\t\t\t});\r\n\t\t\tBackground.playVideo(this.currentTime);\r\n\t\t\tthis.isPlaying = true;\r\n\r\n\t\t\t// document.querySelector(\"#playButton\").style.backgroundImage = \"url(/static/pause.png)\";\r\n\t\t}\r\n\t}\r\n\r\n\tpause() {\r\n\t\tif (this.isPlaying) {\r\n\t\t\tGame.WORKER.postMessage({\r\n\t\t\t\ttype: \"stop\",\r\n\t\t\t});\r\n\t\t\tStoryboard.WORKER.postMessage({\r\n\t\t\t\ttype: \"stop\",\r\n\t\t\t});\r\n\t\t\tthis.src.stop();\r\n\t\t\tthis.src.disconnect();\r\n\t\t\tthis.gainNode.disconnect();\r\n\t\t\t// this.currentTime += (Game.AUDIO_CTX.currentTime * 1000 - this.startTime) * Game.PLAYBACK_RATE;\r\n\t\t\tthis.currentTime +=\r\n\t\t\t\t(performance.now() - this.absStartTime) * Game.PLAYBACK_RATE;\r\n\t\t\tBackground.pauseVideo(this.currentTime);\r\n\t\t\tthis.isPlaying = false;\r\n\t\t\t// document.querySelector(\"#playButton\").style.backgroundImage = \"\";\r\n\t\t}\r\n\t}\r\n\r\n\tgetCurrentTime() {\r\n\t\tif (!this.isPlaying) return this.currentTime;\r\n\t\tconst offset =\r\n\t\t\tperformance.now() -\r\n\t\t\tthis.absStartTime -\r\n\t\t\t(Game.AUDIO_CTX.currentTime * 1000 - this.startTime);\r\n\r\n\t\tif (offset > 20) {\r\n\t\t\tthis.pause();\r\n\t\t\tthis.play();\r\n\r\n\t\t\tconsole.log(`Shifted ${offset}`);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\tthis.currentTime +\r\n\t\t\t(performance.now() - this.absStartTime) * Game.PLAYBACK_RATE\r\n\t\t);\r\n\r\n\t\t// console.log((performance.now() - this.absStartTime), (Game.AUDIO_CTX.currentTime * 1000 - this.startTime))\r\n\t\t// return this.currentTime + (Game.AUDIO_CTX.currentTime * 1000 - this.startTime) * Game.PLAYBACK_RATE;\r\n\t}\r\n\r\n\tget duration() {\r\n\t\treturn this.raw_buf?.duration * 1000 ?? 0;\r\n\t}\r\n}\r\n\r\nexport class HitSample {\r\n\taudioObj;\r\n\tsliderHead = false;\r\n\tsliderTail = false;\r\n\tvol = 1;\r\n\r\n\tisPlaying = false;\r\n\r\n\tsrcs = [];\r\n\tgainNode;\r\n\tcurrentTimeout;\r\n\r\n\tstatic masterGainNode;\r\n\tstatic SAMPLES = {\r\n\t\tARGON: {},\r\n\t\tLEGACY: {},\r\n\t\tCUSTOM: {},\r\n\t\tMAP: {},\r\n\t};\r\n\r\n\tstatic DEFAULT_SAMPLES = {\r\n\t\tARGON: {},\r\n\t\tLEGACY: {},\r\n\t};\r\n\r\n\tconstructor(hitsounds, vol) {\r\n\t\tthis.audioObj = hitsounds;\r\n\t\tthis.vol = vol ?? 1;\r\n\t\t// console.log(this.audioObj);\r\n\t}\r\n\r\n\tplay(isLoop) {\r\n\t\tif (Game.IS_SEEKING || !Game.SHOULD_PLAY_HITSOUND) return;\r\n\r\n\t\tthis.srcs = [];\r\n\r\n\t\tthis.audioObj.forEach((hs) => {\r\n\t\t\tconst src = Game.AUDIO_CTX.createBufferSource();\r\n\t\t\tconst gainNode = Game.AUDIO_CTX.createGain();\r\n\t\t\tthis.gainNode = gainNode;\r\n\r\n\t\t\tgainNode.gain.value = this.vol;\r\n\r\n\t\t\tif (HitSample.SAMPLES.MAP[hs] && !Game.DISABLE_BMHS) {\r\n\t\t\t\tsrc.buffer = HitSample.SAMPLES.MAP[hs];\r\n\t\t\t} else {\r\n\t\t\t\tconst skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n\t\t\t\tconst samples =\r\n\t\t\t\t\tskinType !== \"CUSTOM\" || !HitSample.SAMPLES.CUSTOM[Skinning.SKIN_IDX]\r\n\t\t\t\t\t\t? HitSample.SAMPLES[skinType]\r\n\t\t\t\t\t\t: HitSample.SAMPLES.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n\t\t\t\tsrc.buffer = samples[hs.replaceAll(/\\d/g, \"\")];\r\n\t\t\t}\r\n\r\n\t\t\tsrc.connect(gainNode);\r\n\t\t\tgainNode.connect(HitSample.masterGainNode);\r\n\r\n\t\t\tsrc.start();\r\n\t\t\tsrc.onended = () => {\r\n\t\t\t\t// this.isPlaying = false;\r\n\t\t\t\tsrc.disconnect();\r\n\t\t\t\tgainNode.disconnect();\r\n\t\t\t};\r\n\r\n\t\t\tthis.isPlaying = true;\r\n\t\t\tif (isLoop) src.loop = true;\r\n\r\n\t\t\tthis.srcs.push(src);\r\n\t\t});\r\n\t}\r\n\r\n\tplayLoop(higherThanStart, lowerThanEnd, timeLeft) {\r\n\t\tif (this.gainNode) {\r\n\t\t\tthis.gainNode.gain.value = ObjectsController.CURRENT_SV.sampleVol / 100;\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\thigherThanStart &&\r\n\t\t\tlowerThanEnd &&\r\n\t\t\t!this.isPlaying &&\r\n\t\t\tGame.BEATMAP_FILE.audioNode.isPlaying\r\n\t\t) {\r\n\t\t\tclearTimeout(this.currentTimeout);\r\n\t\t\tthis.play(true);\r\n\r\n\t\t\tthis.currentTimeout = setTimeout(() => {\r\n\t\t\t\tthis.srcs.forEach((src) => {\r\n\t\t\t\t\tsrc.stop();\r\n\t\t\t\t\tsrc.disconnect();\r\n\t\t\t\t});\r\n\t\t\t\tthis.isPlaying = false;\r\n\t\t\t}, timeLeft ?? 0);\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tthis.isPlaying &&\r\n\t\t\t(!higherThanStart ||\r\n\t\t\t\t!lowerThanEnd ||\r\n\t\t\t\t!Game.BEATMAP_FILE.audioNode.isPlaying)\r\n\t\t) {\r\n\t\t\tthis.srcs.forEach((src) => {\r\n\t\t\t\tsrc.stop();\r\n\t\t\t\tsrc.disconnect();\r\n\t\t\t});\r\n\t\t\tthis.isPlaying = false;\r\n\t\t}\r\n\t}\r\n}\r\n","import { Texture } from \"./Texture.js\";\r\nimport { HitSample } from \"./Audio.js\";\r\nimport { refreshSkinDB } from \"./Utils.js\";\r\nimport { Notification } from \"./Notification.js\";\r\nimport { Database } from \"./Database.js\";\r\nimport { Game } from \"./Game.js\";\r\n\r\nexport class Skinning {\r\n    static HIT_CIRCLE = null;\r\n    static HIT_CIRCLE_OVERLAY = null;\r\n    static SLIDER_B = null;\r\n    static SLIDER_FOLLOW_CIRCLE = null;\r\n    static REVERSE_ARROW = null;\r\n    static APPROACH_CIRCLE = null;\r\n    static DEFAULTS = [...Array(10)].fill(null, 0, 10);\r\n\r\n    static SLIDER_BORDER = null;\r\n    static SLIDER_TRACK_OVERRIDE = null;\r\n    static HIT_CIRCLE_OVERLAP = 0;\r\n    static HIT_CIRCLE_OVERLAP_ARGON = 20;\r\n    static HIT_CIRCLE_PREFIX = \"default\";\r\n\r\n    static DEFAULT_COLORS = [0xffc000, 0x00ca00, 0x127cff, 0xf21839];\r\n\r\n    static SKIN_ENUM = {\r\n        ARGON: \"0\",\r\n        TINTED: \"1\",\r\n        LEGACY: \"2\",\r\n        TRIANGLES: \"3\",\r\n        CUSTOM: \"4\",\r\n        0: \"ARGON\",\r\n        1: \"LEGACY\",\r\n        2: \"LEGACY\",\r\n        3: \"LEGACY\",\r\n        4: \"CUSTOM\",\r\n    };\r\n\r\n    static SKIN_NAME = {\r\n        0: \"Argon\",\r\n        1: \"Tinted Legacy\",\r\n        2: \"Legacy\",\r\n        3: \"Triangles\",\r\n        4: \"\",\r\n    };\r\n\r\n    static SKIN_IDX = -1;\r\n    static SKIN_LIST = [];\r\n\r\n    static async changeSkin() {\r\n        if (Game.SKINNING.type !== \"4\") {\r\n            Skinning.DEFAULT_COLORS = [0xffc000, 0x00ca00, 0x127cff, 0xf21839];\r\n            Skinning.HIT_CIRCLE_PREFIX = \"default\";\r\n            Skinning.SLIDER_BORDER = null;\r\n            Skinning.SLIDER_TRACK_OVERRIDE = null;\r\n            document.querySelector(\".skinSelector\").textContent = Skinning.SKIN_NAME[Game.SKINNING.type];\r\n            // console.log(Game.SKINNING.type);\r\n            return;\r\n        }\r\n\r\n        if (!Skinning.SKIN_LIST[Skinning.SKIN_IDX]) {\r\n            Game.SKINNING.type = \"2\";\r\n            Skinning.SKIN_IDX = -1;\r\n            Skinning.DEFAULT_COLORS = [0xffc000, 0x00ca00, 0x127cff, 0xf21839];\r\n            Skinning.HIT_CIRCLE_PREFIX = \"default\";\r\n            Skinning.SLIDER_BORDER = null;\r\n            Skinning.SLIDER_TRACK_OVERRIDE = null;\r\n            document.querySelector(\".skinSelector\").textContent = \"Legacy\";\r\n            return;\r\n        }\r\n\r\n        Skinning.SLIDER_BORDER = Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.SLIDER_BORDER;\r\n        Skinning.SLIDER_TRACK_OVERRIDE = Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.SLIDER_TRACK_OVERRIDE;\r\n        Skinning.HIT_CIRCLE_PREFIX = Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.HIT_CIRCLE_PREFIX;\r\n        Skinning.DEFAULT_COLORS = Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.DEFAULT_COLORS;\r\n\r\n        document.querySelector(\".skinSelector\").textContent = Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.NAME;\r\n    }\r\n\r\n    static async getBase64(allEntries, filename) {\r\n        const entry =\r\n            allEntries.find((entry) => entry.filename === `${filename}@2x.png`) ??\r\n            allEntries.find((entry) => entry.filename === `${filename}.png`) ??\r\n            null;\r\n\r\n        if (!entry) return {};\r\n        // console.log(entry);\r\n\r\n        const base64 = await entry.getData(new zip.Data64URIWriter(\"image/png\"));\r\n        return {\r\n            base64,\r\n            isHD: entry.filename.includes(\"@2x\"),\r\n        };\r\n    }\r\n\r\n    static async readSkinIni(allEntries) {\r\n        const entry = allEntries.find((entry) => entry.filename.toLowerCase() === \"skin.ini\");\r\n        const blob = await entry.getData(new zip.BlobWriter(\"text/plain\"));\r\n        const text = await blob.text();\r\n\r\n        const lines = text\r\n            .split(\"\\n\")\r\n            .map((line) => line.trim())\r\n            .filter((line) => !/^(\\/\\/|\\#|\\;).*/g.test(line));\r\n\r\n        const name = lines\r\n            .find((line) => line.includes(\"Name: \"))\r\n            .trim()\r\n            .replace(\"Name: \", \"\");\r\n\r\n        const sliderBorder = lines\r\n            .find((line) => line.includes(\"SliderBorder:\"))\r\n            ?.replaceAll(\" \", \"\")\r\n            .match(/[0-9]{0,3},[0-9]{0,3},[0-9]{0,3}/g)\r\n            .at(0)\r\n            .split(\",\")\r\n            .map((value) => value / 255)\r\n            .concat([1.0]);\r\n\r\n        const sliderTrackOverride = lines\r\n            .find((line) => /^SliderTrackOverride\\s*:/.test(line))\r\n            ?.replaceAll(\" \", \"\")\r\n            .match(/[0-9]{0,3},[0-9]{0,3},[0-9]{0,3}/g)\r\n            .at(0)\r\n            .split(\",\")\r\n            .map((value) => value / 255)\r\n            .concat([1.0]);\r\n\r\n        const hitCircleOverlap = parseInt(\r\n            lines\r\n                .find((line) => line.includes(\"HitCircleOverlap:\"))\r\n                ?.replaceAll(\" \", \"\")\r\n                .match(/[0-9]+/g)\r\n                .at(0) ?? \"0\"\r\n        );\r\n\r\n        const hitCirclePrefix = lines\r\n            .find((line) => line.includes(\"HitCirclePrefix:\"))\r\n            ?.replaceAll(\" \", \"\")\r\n            .replaceAll(\"HitCirclePrefix:\", \"\")\r\n            .replaceAll(\"\\r\", \"\");\r\n\r\n        let coloursList = lines\r\n            .filter(\r\n                (line) =>\r\n                    /Combo[0-9]+:/g.test(line.replaceAll(\" \", \"\").replaceAll(\"\\r\")) &&\r\n                    line.replaceAll(\" \", \"\").slice(0, 2) !== \"//\" &&\r\n                    line.replaceAll(\" \", \"\")[0] !== \";\" &&\r\n                    line.replaceAll(\" \", \"\")[0] !== \"#\"\r\n            )\r\n            .map(\r\n                (colour) =>\r\n                    `rgb(${colour\r\n                        .replaceAll(\" \", \"\")\r\n                        .replaceAll(\"\\r\", \"\")\r\n                        .replaceAll(/Combo[0-9]+:/g, \"\")})`\r\n            )\r\n            .map((colour) =>\r\n                parseInt(\r\n                    colour\r\n                        .replaceAll(\"\\r\", \"\")\r\n                        .replaceAll(\"rgb(\", \"\")\r\n                        .replaceAll(\")\", \"\")\r\n                        .split(\",\")\r\n                        .map((val) => parseInt(val).toString(16).padStart(2, \"0\"))\r\n                        .join(\"\"),\r\n                    16\r\n                )\r\n            );\r\n\r\n        if (coloursList.length === 0) coloursList = [0xffc000, 0x00ca00, 0x127cff, 0xf21839];\r\n\r\n        Skinning.SLIDER_BORDER = sliderBorder ?? null;\r\n        Skinning.SLIDER_TRACK_OVERRIDE = sliderTrackOverride ?? null;\r\n        Skinning.HIT_CIRCLE_OVERLAP = hitCircleOverlap ?? 0;\r\n        Skinning.HIT_CIRCLE_PREFIX = hitCirclePrefix ?? \"default\";\r\n        Skinning.DEFAULT_COLORS = coloursList;\r\n\r\n        return {\r\n            NAME: name,\r\n            SLIDER_BORDER: sliderBorder ?? null,\r\n            SLIDER_TRACK_OVERRIDE: sliderTrackOverride ?? null,\r\n            HIT_CIRCLE_OVERLAP: hitCircleOverlap,\r\n            HIT_CIRCLE_PREFIX: hitCirclePrefix ?? \"default\",\r\n            DEFAULT_COLORS: coloursList,\r\n        };\r\n    }\r\n\r\n    static async getHitsounds(allEntries) {\r\n        const hitsoundFiles = allEntries.filter((file) => {\r\n            return /^(normal|soft|drum)-(hitnormal|hitwhistle|hitclap|hitfinish|slidertick|sliderwhistle|sliderslide)([1-9][0-9]*)?/.test(\r\n                file.filename\r\n            );\r\n        });\r\n\r\n        const hitsoundArrayBuffer = [];\r\n        for (const file of hitsoundFiles) {\r\n            const writer = new zip.BlobWriter(`audio/${file.filename.split(\".\").at(-1)}`);\r\n            const fileBlob = await file.getData(writer);\r\n            const fileArrayBuffer = await Skinning.readBlobAsBuffer(fileBlob);\r\n\r\n            hitsoundArrayBuffer.push({\r\n                filename: file.filename,\r\n                buf: fileArrayBuffer,\r\n                blob: fileBlob,\r\n            });\r\n        }\r\n\r\n        return hitsoundArrayBuffer;\r\n    }\r\n\r\n    static async loadHitsounds(arrayBuffers, forIdx) {\r\n        if (!HitSample.SAMPLES.CUSTOM[forIdx]) HitSample.SAMPLES.CUSTOM[forIdx] = {};\r\n\r\n        for (const sample of [\"normal\", \"soft\", \"drum\"])\r\n            for (const hitsound of [\"hitnormal\", \"hitwhistle\", \"hitclap\", \"hitfinish\", \"slidertick\", \"sliderwhistle\", \"sliderslide\"]) {\r\n                const name = `${sample}-${hitsound}`;\r\n                const hs = arrayBuffers.find((hitsound) => hitsound.filename.split(\".\")[0] === name);\r\n\r\n                if (!hs) {\r\n                    HitSample.SAMPLES.CUSTOM[forIdx][name] = HitSample.DEFAULT_SAMPLES.LEGACY[name];\r\n                    continue;\r\n                }\r\n\r\n                try {\r\n                    const buffer = await Game.AUDIO_CTX.decodeAudioData(hs.buf);\r\n                    HitSample.SAMPLES.CUSTOM[forIdx][name] = buffer;\r\n                } catch {\r\n                    continue;\r\n                }\r\n            }\r\n    }\r\n\r\n    static async readBlobAsBuffer(blob) {\r\n        const res = await new Promise((resolve) => {\r\n            let fileReader = new FileReader();\r\n            fileReader.onload = (event) => resolve(fileReader.result);\r\n            fileReader.readAsArrayBuffer(blob);\r\n        });\r\n\r\n        // console.log(res);\r\n        return res;\r\n    }\r\n\r\n    static async getAllBase64s(allEntries) {\r\n        const HIT_CIRCLE = await Skinning.getBase64(allEntries, \"hitcircle\");\r\n        const HIT_CIRCLE_OVERLAY = await Skinning.getBase64(allEntries, \"hitcircleoverlay\");\r\n        let SLIDER_B = await Skinning.getBase64(allEntries, \"sliderb0\");\r\n        const SLIDER_FOLLOW_CIRCLE = await Skinning.getBase64(allEntries, \"sliderfollowcircle\");\r\n        const REVERSE_ARROW = await Skinning.getBase64(allEntries, \"reversearrow\");\r\n        const APPROACH_CIRCLE = await Skinning.getBase64(allEntries, \"approachcircle\");\r\n        let DEFAULTS = [...Array(10)].fill(null, 0, 10);\r\n\r\n        if (!SLIDER_B.base64) SLIDER_B = await Skinning.getBase64(allEntries, \"sliderb\");\r\n\r\n        for (let i = 0; i < 10; i++) {\r\n            DEFAULTS[i] = (await Skinning.getBase64(allEntries, `${Skinning.HIT_CIRCLE_PREFIX}-${i}`)) ?? {};\r\n        }\r\n\r\n        return {\r\n            HIT_CIRCLE,\r\n            HIT_CIRCLE_OVERLAY,\r\n            SLIDER_B,\r\n            SLIDER_FOLLOW_CIRCLE,\r\n            REVERSE_ARROW,\r\n            APPROACH_CIRCLE,\r\n            DEFAULTS,\r\n        };\r\n    }\r\n\r\n    static async import(blob) {\r\n        Skinning.SLIDER_BORDER = null;\r\n        Skinning.SLIDER_TRACK_OVERRIDE = null;\r\n        Skinning.HIT_CIRCLE_OVERLAP = 0;\r\n\r\n        const blobReader = new zip.BlobReader(blob);\r\n        const zipReader = new zip.ZipReader(blobReader);\r\n\r\n        const allEntries = await zipReader.getEntries();\r\n\r\n        const ini = await Skinning.readSkinIni(allEntries);\r\n        const samples = await Skinning.getHitsounds(allEntries);\r\n        const base64s = await Skinning.getAllBase64s(allEntries);\r\n\r\n        const storeValue = {\r\n            ini,\r\n            samples,\r\n            base64s,\r\n        };\r\n\r\n        await Database.addToObjStore(storeValue);\r\n\r\n        const skinIdx = (await Database.getAllKeys()).at(-1);\r\n\r\n        for (const element of [\r\n            \"HIT_CIRCLE\",\r\n            \"HIT_CIRCLE_OVERLAY\",\r\n            \"SLIDER_B\",\r\n            \"REVERSE_ARROW\",\r\n            \"DEFAULTS\",\r\n            \"SLIDER_FOLLOW_CIRCLE\",\r\n            \"APPROACH_CIRCLE\",\r\n        ]) {\r\n            if (!base64s[element]) continue;\r\n\r\n            if (element === \"DEFAULTS\") {\r\n                await Texture.updateNumberTextures(base64s[element], skinIdx);\r\n                continue;\r\n            }\r\n\r\n            const { base64, isHD } = base64s[element];\r\n            await Texture.updateTextureFor(element, base64, isHD, skinIdx);\r\n        }\r\n\r\n        await Skinning.loadHitsounds(samples, skinIdx);\r\n        await refreshSkinDB();\r\n\r\n        Skinning.SKIN_IDX = skinIdx;\r\n        Game.SKINNING.type = \"4\";\r\n        Skinning.changeSkin();\r\n\r\n        zipReader.close();\r\n\r\n        new Notification({\r\n            message: `${storeValue.ini.NAME} imported`,\r\n        }).notify();\r\n    }\r\n}\r\n","import { Texture } from \"../Texture.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class NumberSprite {\r\n    obj;\r\n\r\n    hitObject;\r\n    number = 0;\r\n\r\n    sprites = [];\r\n\r\n    constructor(hitObject) {\r\n        this.hitObject = hitObject;\r\n        this.obj = new PIXI.Container();\r\n    }\r\n\r\n    draw(timestamp) {\r\n        if (this.number !== this.hitObject.comboIdx) {\r\n            const removedChildren = this.obj.removeChildren();\r\n            removedChildren.forEach((element) => element.destroy());\r\n            this.sprites.length = 0;\r\n\r\n            this.number = this.hitObject.comboIdx ?? 0;\r\n            this.number.toString()\r\n            .split(\"\")\r\n            .forEach((value, idx) => {\r\n                const sprite = new PIXI.Sprite();\r\n                sprite.anchor.set(0.5);\r\n\r\n                this.sprites.push(sprite);\r\n                this.obj.addChild(sprite);\r\n            })\r\n        }\r\n\r\n        let prevSprite = null;\r\n        this.number\r\n            .toString()\r\n            .split(\"\")\r\n            .forEach((value, idx) => {\r\n                const skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n                const textures = skinType !== \"CUSTOM\" ? Texture[skinType] : Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n                const sprite = this.sprites[idx];\r\n                sprite.texture = (textures.DEFAULTS[value].texture);\r\n                sprite.scale.set(textures.DEFAULTS[value].isHD ? 0.5 * 0.8 : 0.8);\r\n\r\n                if (prevSprite) {\r\n                    const overlapValue =\r\n                        skinType === \"ARGON\"\r\n                            ? Skinning.HIT_CIRCLE_OVERLAP_ARGON\r\n                            : skinType === \"LEGACY\"\r\n                            ? Skinning.HIT_CIRCLE_OVERLAP\r\n                            : Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.HIT_CIRCLE_OVERLAP;\r\n                    sprite.x = prevSprite.x + prevSprite.width / 2 + sprite.width / 2 - overlapValue * 0.8;\r\n                }\r\n\r\n                prevSprite = sprite;\r\n            });\r\n\r\n        this.obj.alpha = 1;\r\n        this.obj.x = -prevSprite.x / 2;\r\n\r\n        if (timestamp > this.hitObject.hitTime + 1 && Game.SLIDER_APPEARANCE.hitAnim) {\r\n            this.obj.alpha = 0;\r\n        }\r\n    }\r\n}\r\n","import { NumberSprite } from \"../HitObjects/NumberSprite.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport * as d3 from \"d3\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class TintedNumberSprite extends NumberSprite {\r\n    number = 0;\r\n    sprites = [];\r\n\r\n    cache = {\r\n        number: null,\r\n    };\r\n\r\n    constructor(hitObject) {\r\n        super(hitObject);\r\n    }\r\n\r\n    draw(timestamp, comboIdx = \"\") {\r\n        if (this.number !== comboIdx) {\r\n            const removedChildren = this.obj.removeChildren();\r\n            removedChildren.forEach((element) => element.destroy());\r\n            this.sprites.length = 0;\r\n\r\n            this.number = comboIdx ?? 0;\r\n            this.number\r\n                .toString()\r\n                .split(\"\")\r\n                .forEach((value, idx) => {\r\n                    const sprite = new PIXI.Sprite();\r\n                    sprite.anchor.set(0.5);\r\n\r\n                    this.sprites.push(sprite);\r\n                    this.obj.addChild(sprite);\r\n                });\r\n        }\r\n\r\n        let prevSprite = null;\r\n        this.number\r\n            .toString()\r\n            .split(\"\")\r\n            .forEach((value, idx) => {\r\n                const skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n                const textures = skinType !== \"CUSTOM\" ? (skinType === \"ARGON\" ? Texture.ARGON : Texture.LEGACY) : Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n                const sprite = this.sprites[idx];\r\n                sprite.texture = textures.DEFAULTS[value].texture;\r\n                sprite.scale.set((textures.DEFAULTS[value].isHD ? 0.5 * 0.8 : 0.8));\r\n\r\n                if (skinType === \"ARGON\") {\r\n                    const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n                    const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.hitObject.colourIdx : this.hitObject.colourHaxedIdx;\r\n                    const [R, G, B] =\r\n                        idx === -1\r\n                            ? [1.0, 1.0, 1.0, 1.0]\r\n                            : [\r\n                                  ...Object.values(d3.rgb(`#${colors[idx % colors.length].toString(16).padStart(6, \"0\")}`)).map((val) => val / 255),\r\n                                  1.0,\r\n                              ];\r\n\r\n                    const lumi = 0.299 * R + 0.587 * G + 0.114 * B;\r\n                    if (lumi > 0.5) {\r\n                        sprite.tint = 0x333333;\r\n                    } else {\r\n                        sprite.tint = 0xe5e5e5;\r\n                    }\r\n                } else sprite.tint = 0xffffff;\r\n\r\n                if (prevSprite) {\r\n                    const overlapValue =\r\n                        skinType === \"LEGACY\"\r\n                            ? Skinning.HIT_CIRCLE_OVERLAP\r\n                            : skinType === \"ARGON\"\r\n                            ? Skinning.HIT_CIRCLE_OVERLAP_ARGON\r\n                            : Skinning.SKIN_LIST[Skinning.SKIN_IDX].ini.HIT_CIRCLE_OVERLAP;\r\n                    sprite.x = prevSprite.x + prevSprite.width / 2 + sprite.width / 2 - overlapValue * 0.8;\r\n                }\r\n\r\n                prevSprite = sprite;\r\n            });\r\n\r\n        this.obj.alpha = 1;\r\n        this.obj.x = -prevSprite.x / 2;\r\n    }\r\n}\r\n","export default \"struct GlobalUniforms {\\r\\n    projectionMatrix : mat3x3<f32>,\\r\\n    worldTransformMatrix : mat3x3<f32>,\\r\\n    worldColorAlpha : vec4<f32>,\\r\\n    uResolution : vec2<f32>,\\r\\n}\\r\\n\\r\\nstruct LocalUniforms {\\r\\n    uTransformMatrix : mat3x3<f32>,\\r\\n    uColor : vec4<f32>,\\r\\n    uRound : f32,\\r\\n}\\r\\n\\r\\nstruct CustomUniforms {\\r\\n    tint: vec4<f32>,\\r\\n    selected: f32,\\r\\n    skinType: f32,\\r\\n    isReverse: f32,\\r\\n    nodeTint: vec4<f32>\\r\\n}\\r\\n\\r\\n@group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\\r\\n@group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\\r\\n@group(2) @binding(0) var<uniform> customUniforms : CustomUniforms;\\r\\n\\r\\n\\r\\nstruct VertexOutput {\\r\\n    @builtin(position) position : vec4<f32>,\\r\\n    @location(0) dist : f32,\\r\\n}\\r\\n\\r\\n@vertex\\r\\nfn vsMain(\\r\\n    @location(0) position : vec2<f32>,\\r\\n    @location(1) dist : f32,\\r\\n) -> VertexOutput {\\r\\n    var mvp = globalUniforms.projectionMatrix * globalUniforms.worldTransformMatrix * localUniforms.uTransformMatrix;\\r\\n\\r\\n    return VertexOutput(\\r\\n        vec4<f32>(mvp * vec3<f32>(position, 1.0), 1.0), \\r\\n        dist\\r\\n    );\\r\\n};\\r\\n\\r\\nfn darken(color: vec4<f32>, strength: f32) -> vec4<f32> {\\r\\n    var scalar: f32 = max(1.0, 1.0 + strength);\\r\\n    var ret: vec4<f32> = vec4<f32>(0, 0, 0, 1);\\r\\n\\r\\n    ret[0] = min(1.0, color[0] / scalar);\\r\\n    ret[1] = min(1.0, color[1] / scalar);\\r\\n    ret[2] = min(1.0, color[2] / scalar);\\r\\n\\r\\n    return ret;\\r\\n}\\r\\n\\r\\n@fragment\\r\\nfn fsMain(input : VertexOutput) -> @location(0) vec4<f32>{\\r\\n    var blurRate = 0.05;\\r\\n    var alpha = 1.0;\\r\\n\\r\\n    var totalAlpha = 0.7;\\r\\n\\r\\n    var tint = customUniforms.tint;\\r\\n\\r\\n    var outerColor = darken(tint, 0.1);\\r\\n    var innerColor = tint;\\r\\n\\r\\n    if (input.dist > 1.0 - blurRate) {\\r\\n        alpha = (1.0 - input.dist) / blurRate;\\r\\n    }\\r\\n\\r\\n    if (customUniforms.skinType != 0.0) {\\r\\n        var color = mix(outerColor, innerColor, input.dist);\\r\\n\\r\\n        if (customUniforms.selected > 0.0) {\\r\\n            color = tint;\\r\\n            totalAlpha = 1.0;\\r\\n        }\\r\\n\\r\\n        color[3] = 1.0;\\r\\n\\r\\n        return color * alpha * totalAlpha;\\r\\n    } else {\\r\\n        totalAlpha = 1.0;\\r\\n\\r\\n        outerColor = darken(tint, 0.4);\\r\\n        \\r\\n        var color = outerColor;\\r\\n        if (input.dist <= 0.8) {\\r\\n            color = innerColor;\\r\\n        }\\r\\n\\r\\n        if (customUniforms.selected > 0.0) {\\r\\n            color = tint;\\r\\n            if (input.dist > 0.8) {\\r\\n                color = vec4<f32>(0.93, 0.67, 0.0, 1.0);\\r\\n            }\\r\\n\\r\\n            totalAlpha = 1.0;\\r\\n        }\\r\\n\\r\\n        if (customUniforms.isReverse > 0.0) {\\r\\n            color = customUniforms.nodeTint;\\r\\n        }\\r\\n\\r\\n        color[3] = 1.0;\\r\\n        return color * alpha * totalAlpha;\\r\\n    }\\r\\n\\r\\n}\\r\\n\"","export default \"precision mediump float;\\r\\nattribute vec2 position;\\r\\nattribute float dist;\\r\\n\\r\\nvarying float colorDist;\\r\\n\\r\\nuniform mat3 uProjectionMatrix;\\r\\nuniform mat3 uWorldTransformMatrix;\\r\\nuniform mat3 uTransformMatrix;\\r\\n\\r\\nvoid main() {\\r\\n    colorDist = dist;\\r\\n    gl_Position = vec4((uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\\r\\n}\"","export default \"precision mediump float;\\r\\n\\r\\nuniform vec4 tint;\\r\\nuniform vec4 nodeTint;\\r\\nuniform float selected;\\r\\nuniform float skinType;\\r\\nuniform float isReverse;\\r\\n\\r\\nvarying float colorDist;\\r\\n\\r\\nvec4 lighten(vec4 color, float amount) {\\r\\n    amount *= 0.5;\\r\\n    color.r = min(1.0, color.r * (1.0 + 0.5 * amount) + 1.0 * amount);\\r\\n    color.g = min(1.0, color.g * (1.0 + 0.5 * amount) + 1.0 * amount);\\r\\n    color.b = min(1.0, color.b * (1.0 + 0.5 * amount) + 1.0 * amount);\\r\\n\\r\\n    return color;\\r\\n}\\r\\n\\r\\nvec4 darken(vec4 color, float amount) {\\r\\n    float scalar = max(1.0, 1.0 + amount);\\r\\n    color.r = min(1.0, color.r / scalar);\\r\\n    color.g = min(1.0, color.g / scalar);\\r\\n    color.b = min(1.0, color.b / scalar);\\r\\n    return color;\\r\\n}\\r\\n\\r\\nvoid main() {\\r\\n    float blurRate = 0.05;\\r\\n    float alpha = 1.0;\\r\\n    float totalAlpha = skinType == 0.0 ? 1.0 : 0.7;\\r\\n\\r\\n    vec4 outerColor = darken(tint, 0.1);\\r\\n    vec4 innerColor = tint;\\r\\n\\r\\n    if (colorDist > 1.0 - blurRate)\\r\\n        alpha = (1.0 - colorDist) / blurRate;\\r\\n\\r\\n    if (skinType != 0.0) {\\r\\n        vec4 color = mix(outerColor, innerColor, colorDist);\\r\\n        if (selected > 0.0) {\\r\\n            color = tint;\\r\\n            totalAlpha = 1.0;\\r\\n        }\\r\\n\\r\\n        color.a = 1.0;\\r\\n        gl_FragColor = totalAlpha * alpha * color;\\r\\n    } else {\\r\\n        outerColor = darken(tint, 0.4);\\r\\n        vec4 color = colorDist > 0.8 ? outerColor : innerColor;\\r\\n        if (selected > 0.0) {\\r\\n            color = tint;\\r\\n\\r\\n            if (colorDist > 0.8) {\\r\\n                color = vec4(0.93, 0.67, 0.0, 1.0);\\r\\n            }\\r\\n\\r\\n            totalAlpha = 1.0;\\r\\n        }\\r\\n\\r\\n        if (isReverse > 0.0) {\\r\\n            color = nodeTint;\\r\\n        }\\r\\n\\r\\n        color.a = 1.0;\\r\\n        gl_FragColor = totalAlpha * alpha * color;\\r\\n    }\\r\\n}\"","import { Beatmap } from \"../Beatmap.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { Timeline } from \"./Timeline.js\";\r\nimport { TintedNumberSprite } from \"./NumberSprite.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport gpuShader from \"../Shaders/Timeline/SliderBody.wgsl?raw\";\r\nimport glVertexShader from \"../Shaders/Timeline/SliderBody.vert?raw\";\r\nimport glFragmentShader from \"../Shaders/Timeline/SliderBody.frag?raw\";\r\nimport * as d3 from \"d3\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class TimelineHitCircle {\r\n    obj;\r\n    hitCircle;\r\n    hitCircleOverlay;\r\n    selected;\r\n    meshHead;\r\n    meshTail;\r\n    theThing;\r\n    numberSprite;\r\n    hitObject;\r\n    isSlider = false;\r\n\r\n    cache = {\r\n        tint: null,\r\n        x: null,\r\n        selected: null,\r\n        skinType: null,\r\n        baseHeight: null,\r\n    };\r\n\r\n    constructor(hitObject, isSlider = false) {\r\n        this.isSlider = isSlider;\r\n        this.obj = new PIXI.Container();\r\n        // this.obj.interactive = true;\r\n        this.obj.eventMode = \"static\";\r\n        this.hitObject = hitObject;\r\n\r\n        const gpu = PIXI.GpuProgram.from({\r\n            vertex: {\r\n                source: gpuShader,\r\n                entryPoint: \"vsMain\",\r\n            },\r\n            fragment: {\r\n                source: gpuShader,\r\n                entryPoint: \"fsMain\",\r\n            },\r\n        });\r\n        gpu.autoAssignGlobalUniforms = true;\r\n        gpu.autoAssignLocalUniforms = true;\r\n\r\n        const gl = PIXI.GlProgram.from({\r\n            name: \"timeline-shader\",\r\n            vertex: glVertexShader,\r\n            fragment: glFragmentShader,\r\n        });\r\n\r\n        const shader = PIXI.Shader.from({\r\n            gl,\r\n            gpu,\r\n            resources: {\r\n                customUniforms: {\r\n                    tint: {\r\n                        value: [0.0, 0.0, 0.0, 1.0],\r\n                        type: \"vec4<f32>\",\r\n                    },\r\n                    selected: {\r\n                        value: 0,\r\n                        type: \"f32\",\r\n                    },\r\n                    skinType: {\r\n                        value: Game.SKINNING.type,\r\n                        type: \"f32\",\r\n                    },\r\n                    isReverse: {\r\n                        value: 0,\r\n                        type: \"f32\",\r\n                    },\r\n                    nodeTint: {\r\n                        value: [0.0, 0.0, 0.0, 1.0],\r\n                        type: \"vec4<f32>\",\r\n                    },\r\n                },\r\n            },\r\n        });\r\n\r\n        const headGeometry = TimelineHitCircle.createArc(-1, 30.0 * (118 / 128));\r\n        const tailGeometry = TimelineHitCircle.createArc(1, 30.0 * (118 / 128));\r\n\r\n        const meshHead = new PIXI.Mesh({ geometry: headGeometry, shader: shader });\r\n        const meshTail = new PIXI.Mesh({ geometry: tailGeometry, shader: shader });\r\n\r\n        this.meshHead = meshHead;\r\n        this.meshTail = meshTail;\r\n\r\n        this.theThing = new PIXI.Container();\r\n        this.theThing.addChild(meshHead, meshTail);\r\n\r\n        const hitCircle = new PIXI.Sprite(Texture.LEGACY.HIT_CIRCLE.texture);\r\n        const hitCircleOverlay = new PIXI.Sprite(Texture.LEGACY.HIT_CIRCLE_OVERLAY.texture);\r\n        const selected = new PIXI.Sprite(Texture.SELECTED.texture);\r\n        const numberSprite = new TintedNumberSprite(hitObject);\r\n\r\n        hitCircle.anchor.set(0.5, 0.5);\r\n\r\n        hitCircleOverlay.anchor.set(0.5, 0.5);\r\n\r\n        selected.anchor.set(0.5, 0.5);\r\n        selected.scale.set(0.5);\r\n\r\n        this.hitCircle = hitCircle;\r\n        this.hitCircle.tint = 0xffffff;\r\n\r\n        this.hitCircleOverlay = hitCircleOverlay;\r\n        this.selected = selected;\r\n\r\n        this.numberSprite = numberSprite;\r\n\r\n        this.obj.addChild(this.theThing);\r\n        this.obj.addChild(hitCircle);\r\n        this.obj.addChild(hitCircleOverlay);\r\n        this.obj.addChild(numberSprite.obj);\r\n        this.obj.addChild(selected);\r\n\r\n        this.obj.scale.set(Timeline.HEIGHT / 1.5 / this.hitCircle.height);\r\n        this.obj.x = 0;\r\n        this.obj.y = Timeline.HEIGHT / 2;\r\n\r\n        const handleClickEvent = (e) => {\r\n            const { x, y } = this.obj.toLocal(e.global);\r\n            if (Game.SELECTED.includes(this.hitObject.time)) return;\r\n            if (Math.abs(x) > Timeline.HEIGHT) return;\r\n\r\n            if (!e.ctrlKey) Game.SELECTED = [];\r\n            if (!Game.SELECTED.includes(this.hitObject.time)) Game.SELECTED.push(this.hitObject.time);\r\n            Timeline.hitArea.isObjectSelecting = true;\r\n        };\r\n\r\n        // this.obj.visible = false;\r\n\r\n        this.obj.on(\"mousedown\", handleClickEvent);\r\n        this.obj.on(\"touchstart\", handleClickEvent);\r\n    }\r\n\r\n    addSelfToContainer(container) {\r\n        container.addChild(this.obj);\r\n    }\r\n\r\n    removeSelfFromContainer(container) {\r\n        container.removeChild(this.obj);\r\n    }\r\n\r\n    static createArc(side, radius, length) {\r\n        side /= Math.abs(side);\r\n\r\n        const indices = [];\r\n        const dist = [];\r\n\r\n        const center = [0.0, 0.0];\r\n        const RESOLUTION = 400;\r\n\r\n        for (let i = 0; i < RESOLUTION; i++) {\r\n            const angle = (i / RESOLUTION) * Math.PI * side;\r\n            const angleNext = ((i + 1) / RESOLUTION) * Math.PI * side;\r\n            indices.push(...center, radius * Math.sin(angle), radius * Math.cos(angle), radius * Math.sin(angleNext), radius * Math.cos(angleNext));\r\n            dist.push(0.0, 1.0, 1.0);\r\n        }\r\n\r\n        const geometry = new PIXI.Geometry({\r\n            attributes: {\r\n                position: indices,\r\n                dist: dist,\r\n            },\r\n        });\r\n        return geometry;\r\n    }\r\n\r\n    updatePosition(timestamp) {\r\n        const time = this.hitObject.time;\r\n        const delta = timestamp - time;\r\n\r\n        const center = Timeline.WIDTH / 2;\r\n        const x = center - (delta / 500) * Timeline.ZOOM_DISTANCE;\r\n\r\n        if (x === this.cache.x) return;\r\n\r\n        this.cache.x = x;\r\n        this.obj.x = x;\r\n    }\r\n\r\n    updateSelected() {\r\n        const time = this.hitObject.time;\r\n        const selected = Game.SELECTED.includes(time);\r\n\r\n        if (selected === this.cache.selected) return;\r\n        this.cache.selected = selected;\r\n\r\n        this.meshHead.shader.resources.customUniforms.uniforms.selected = selected ? 1 : 0;\r\n        this.meshTail.shader.resources.customUniforms.uniforms.selected = selected ? 1 : 0;\r\n\r\n        if (Game.SKINNING.type === \"0\") {\r\n            this.selected.visible = false;\r\n            return;\r\n        }\r\n        this.selected.visible = selected;\r\n    }\r\n\r\n    updateVisible(isSliderTail) {\r\n        if (Game.SKINNING.type === this.cache.skinType) return;\r\n        this.cache.skinType = Game.SKINNING.type;\r\n\r\n        const skinType = Game.SKINNING.type;\r\n        const skinType_t = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n        const textures = skinType_t !== \"CUSTOM\" ? Texture.LEGACY : Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n        this.theThing.visible = skinType === \"0\" && !(this.isSlider && !isSliderTail);\r\n        this.hitCircle.visible = !(skinType === \"0\");\r\n        this.hitCircleOverlay.visible = !(skinType === \"0\");\r\n\r\n        this.meshHead.shader.resources.customUniforms.uniforms.skinType = Game.SKINNING.type;\r\n        this.meshTail.shader.resources.customUniforms.uniforms.skinType = Game.SKINNING.type;\r\n\r\n        this.hitCircle.texture = textures.HIT_CIRCLE.texture;\r\n        this.hitCircle.scale.set(textures.HIT_CIRCLE.isHD ? 0.5 : 1);\r\n\r\n        this.hitCircleOverlay.texture = textures.HIT_CIRCLE_OVERLAY.texture;\r\n        this.hitCircleOverlay.scale.set(textures.HIT_CIRCLE_OVERLAY.isHD ? 0.5 : 1);\r\n\r\n        if (isSliderTail) {\r\n            this.meshHead.shader.resources.customUniforms.uniforms.isReverse = true;\r\n            this.meshTail.shader.resources.customUniforms.uniforms.isReverse = true;\r\n        }\r\n    }\r\n\r\n    updateTint(isSliderTail) {\r\n        const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n        const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.hitObject.colourIdx : this.hitObject.colourHaxedIdx;\r\n\r\n        if (colors[idx % colors.length] === undefined) return;\r\n        if (colors[idx % colors.length] === this.cache.tint) return;\r\n        this.cache.tint = colors[idx % colors.length];\r\n\r\n        this.hitCircle.tint = colors[idx % colors.length];\r\n\r\n        const tint =\r\n            idx === -1\r\n                ? [1.0, 1.0, 1.0, 1.0]\r\n                : [...Object.values(d3.rgb(`#${this.cache.tint.toString(16).padStart(6, \"0\")}`)).map((val) => val / 255), 1.0];\r\n\r\n        if (isSliderTail) {\r\n            const [R, G, B] = tint;\r\n            const lumi = 0.299 * R + 0.587 * G + 0.114 * B;\r\n\r\n            if (lumi > 0.5) {\r\n                this.meshHead.shader.resources.customUniforms.uniforms.nodeTint = [0.2, 0.2, 0.2, 1.0];\r\n                this.meshTail.shader.resources.customUniforms.uniforms.nodeTint = [0.2, 0.2, 0.2, 1.0];\r\n                return;\r\n            }\r\n\r\n            this.meshHead.shader.resources.customUniforms.uniforms.nodeTint = [0.9, 0.9, 0.9, 1.0];\r\n            this.meshTail.shader.resources.customUniforms.uniforms.nodeTint = [0.9, 0.9, 0.9, 1.0];\r\n            return;\r\n        }\r\n\r\n        this.meshHead.shader.resources.customUniforms.uniforms.tint = tint;\r\n        this.meshTail.shader.resources.customUniforms.uniforms.tint = tint;\r\n    }\r\n\r\n    updateScale(isSliderTail) {\r\n        if (this.cache.baseHeight === Timeline.HEIGHT - (Timeline.SHOW_GREENLINE ? 30 : 0)) return;\r\n        this.cache.baseHeight = Timeline.HEIGHT - (Timeline.SHOW_GREENLINE ? 30 : 0);\r\n\r\n        this.obj.scale.set(this.cache.baseHeight / this.hitCircle.height * 0.9);\r\n        this.obj.y = Timeline.HEIGHT / 2;\r\n\r\n        if (isSliderTail) {\r\n            this.meshHead.scale.set(this.cache.baseHeight / 60);\r\n            this.meshTail.scale.set(this.cache.baseHeight / 60);\r\n            return;\r\n        }\r\n\r\n        this.meshHead.scale.set((this.cache.baseHeight / 60) * 2);\r\n        this.meshTail.scale.set((this.cache.baseHeight / 60) * 2);\r\n    }\r\n\r\n    draw(timestamp, isSliderTail) {\r\n        this.updatePosition(timestamp);\r\n        this.updateSelected();\r\n        this.updateVisible(isSliderTail);\r\n        this.updateScale(isSliderTail);\r\n        this.updateTint(isSliderTail);\r\n\r\n        if (isSliderTail) return;\r\n        this.numberSprite.draw(timestamp, this.hitObject.comboIdx);\r\n    }\r\n}\r\n","import { TimelineDragWindow } from \"./DragWindow.js\";\r\nimport { BeatLines } from \"./BeatLines.js\";\r\nimport { binarySearch } from \"../Utils.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport { Component } from \"../WindowManager.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { TimelineZoomer } from \"./Zoomer.js\";\r\nimport { TimelineHitCircle } from \"./HitCircle.js\";\r\nimport TWEEN, { Tween } from \"@tweenjs/tween.js\";\r\n\r\nexport class Timeline {\r\n    static obj;\r\n    static hitArea;\r\n    static centerLine;\r\n    static beatLines;\r\n    static APP;\r\n    static WIDTH;\r\n    static HEIGHT;\r\n    static ZOOM_DISTANCE = 200;\r\n    static LOOK_AHEAD = 300;\r\n    static DRAW_LIST = [];\r\n    static _SHOW_GREENLINE = false;\r\n    static MASTER_CONTAINER;\r\n    static BASE_CONTAINER;\r\n    static ZOOMER;\r\n\r\n    static HEIGHT_REDUCTION = 0;\r\n\r\n    static get SHOW_GREENLINE() {\r\n        return this._SHOW_GREENLINE;\r\n    }\r\n\r\n    static set SHOW_GREENLINE(val) {\r\n        this._SHOW_GREENLINE = val;\r\n\r\n\r\n        if (this.HEIGHT_REDUCTION === 60) return;\r\n\r\n        if (val) {\r\n            const currentReduction = this.HEIGHT_REDUCTION;\r\n            new TWEEN.Tween({\r\n                reduction: currentReduction,\r\n            })\r\n                .to(\r\n                    {\r\n                        reduction: currentReduction - 30,\r\n                    },\r\n                    200\r\n                )\r\n                .onUpdate(({ reduction }) => (Timeline.HEIGHT_REDUCTION = reduction))\r\n                .easing(TWEEN.Easing.Sinusoidal.InOut)\r\n                .start();\r\n            return;\r\n        }\r\n\r\n        const currentReduction = this.HEIGHT_REDUCTION;\r\n        new TWEEN.Tween({\r\n            reduction: currentReduction,\r\n        })\r\n            .to(\r\n                {\r\n                    reduction: 0,\r\n                },\r\n                200\r\n            )\r\n            .onUpdate(({ reduction }) => (Timeline.HEIGHT_REDUCTION = reduction))\r\n            .easing(TWEEN.Easing.Sinusoidal.InOut)\r\n            .start();\r\n    }\r\n\r\n    static async init() {\r\n        Timeline.HEIGHT_REDUCTION = !Game.IS_FULLSCREEN ? (Timeline.SHOW_GREENLINE ? -30 : 0) : 60;\r\n        Timeline.MASTER_CONTAINER = new Component(0, 0, Game.APP.renderer.width, 60 - Timeline.HEIGHT_REDUCTION);\r\n        Timeline.MASTER_CONTAINER.color = 0x000000;\r\n        Timeline.MASTER_CONTAINER.alpha = 0.5;\r\n        // Timeline.MASTER_CONTAINER.borderRadius = 10;\r\n\r\n        Timeline.WIDTH = Timeline.MASTER_CONTAINER.w;\r\n        Timeline.HEIGHT = Timeline.MASTER_CONTAINER.h;\r\n\r\n        Timeline.BASE_CONTAINER = new PIXI.Container();\r\n        Timeline.BASE_CONTAINER.x = 40;\r\n\r\n        Timeline.MASTER_CONTAINER.container.addChild(Timeline.BASE_CONTAINER);\r\n\r\n        Timeline.hitArea = new TimelineDragWindow();\r\n        Timeline.BASE_CONTAINER.addChild(Timeline.hitArea.obj);\r\n        // Timeline.APP.stage.addChild(Timeline.hitArea.obj);\r\n\r\n        Timeline.obj = new PIXI.Container();\r\n        Timeline.BASE_CONTAINER.addChild(Timeline.obj);\r\n        // Timeline.APP.stage.addChild(Timeline.obj);\r\n\r\n        Timeline.ZOOMER = new TimelineZoomer();\r\n        await Timeline.ZOOMER.init();\r\n        Timeline.MASTER_CONTAINER.container.addChild(Timeline.ZOOMER.container);\r\n\r\n        Timeline.centerLine = new PIXI.Graphics()\r\n            .setStrokeStyle({\r\n                width: 1,\r\n                color: 0xffffff,\r\n                alignment: 1,\r\n            })\r\n            .moveTo(-1, 0)\r\n            .lineTo(-1, 1)\r\n            .moveTo(+1, 0)\r\n            .lineTo(+1, 1)\r\n            .stroke();\r\n        Timeline.BASE_CONTAINER.addChild(Timeline.centerLine);\r\n\r\n        Timeline.beatLines = new BeatLines();\r\n        Timeline.BASE_CONTAINER.addChild(Timeline.beatLines.container);\r\n\r\n        Game.WORKER.postMessage({\r\n            type: \"range\",\r\n            range: (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500 + Timeline.LOOK_AHEAD,\r\n        });\r\n    }\r\n\r\n    static resize() {\r\n        if (Game.IS_FULLSCREEN && Game.EMIT_STACK.length === 0) return;\r\n\r\n        if (innerWidth / innerHeight < 1) {\r\n            if (Timeline.MASTER_CONTAINER.w !== Game.APP.renderer.width) Timeline.MASTER_CONTAINER.w = Game.APP.renderer.width;\r\n        } else {\r\n            if (Timeline.MASTER_CONTAINER.w !== Game.APP.renderer.width - (Game.REDUCTION / 400) * 410)\r\n                Timeline.MASTER_CONTAINER.w = Game.APP.renderer.width - (Game.REDUCTION / 400) * 410;\r\n        }\r\n\r\n        Timeline.MASTER_CONTAINER.h = 60 - Timeline.HEIGHT_REDUCTION;\r\n\r\n        // if (Game.IS_FULLSCREEN) Timeline.MASTER_CONTAINER.h = 0;\r\n\r\n        Timeline.BASE_CONTAINER.x = 40;\r\n        Timeline.ZOOMER.draw();\r\n\r\n        // if (innerWidth / innerHeight < 1) {\r\n        //     Timeline.MASTER_CONTAINER.borderRadius = 0;\r\n        // } else {\r\n        //     Timeline.MASTER_CONTAINER.borderRadius = 10;\r\n        // }\r\n\r\n        Timeline.MASTER_CONTAINER.redraw();\r\n\r\n        if (Timeline.WIDTH === Timeline.MASTER_CONTAINER.w && Timeline.HEIGHT === Timeline.MASTER_CONTAINER.h) return;\r\n\r\n        Timeline.WIDTH = Timeline.MASTER_CONTAINER.w;\r\n        Timeline.HEIGHT = Timeline.MASTER_CONTAINER.h;\r\n\r\n        Game.WORKER.postMessage({\r\n            type: \"range\",\r\n            range: (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500 + Timeline.LOOK_AHEAD,\r\n        });\r\n\r\n        Timeline.hitArea.resize();\r\n    }\r\n\r\n    static updateOrder({ removed, addBack, addTop }) {\r\n        const objList = Game.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList;\r\n\r\n        removed.forEach((object) => {\r\n            Timeline.hitArea.obj.removeChild(objList[object.idx].timelineObject.obj);\r\n            // objList[object.idx].timelineObject.obj.visible = false;\r\n        });\r\n\r\n        addBack.forEach((object) => {\r\n            Timeline.hitArea.obj.addChildAt(objList[object.idx].timelineObject.obj, 0);\r\n            // objList[object.idx].timelineObject.obj.visible = true;\r\n        });\r\n\r\n        addTop.forEach((object) => {\r\n            Timeline.hitArea.obj.addChild(objList[object.idx].timelineObject.obj);\r\n            // objList[object.idx].timelineObject.obj.visible = true;\r\n        });\r\n    }\r\n\r\n    static draw(timestamp) {\r\n        if (Game.IS_FULLSCREEN) return;\r\n        if (!Game.BEATMAP_FILE?.beatmapRenderData?.objectsController.objectsList) return;\r\n        Timeline.beatLines.draw(timestamp);\r\n        Timeline.hitArea.draw(timestamp);\r\n        Timeline.centerLine.x = Timeline.WIDTH / 2;\r\n        Timeline.centerLine.scale.set(1, Timeline.HEIGHT);\r\n\r\n        const objList = Game.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList;\r\n\r\n        this.DRAW_LIST.forEach((object) => {\r\n            objList[object.idx]?.timelineObject?.draw(timestamp);\r\n        });\r\n    }\r\n\r\n    static destruct() {\r\n        Timeline.hitArea.clearAll();\r\n        this.DRAW_LIST.length = 0;\r\n    }\r\n}\r\n","import { Timeline } from \"./Timeline.js\";\r\nimport { Beatmap } from \"../Beatmap.js\";\r\nimport { binarySearchNearest } from \"../Utils.js\";\r\nimport { ObjectsController } from \"../HitObjects/ObjectsController.js\";\r\nimport { HitSound } from \"../HitSound.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class GreenLineInfo {\r\n    greenLine;\r\n    sv;\r\n    sample;\r\n\r\n    static findGreenLineInRange(timestamp) {\r\n        const upperBound = (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500 + timestamp;\r\n        const lowerBound = ObjectsController.CURRENT_SV?.time ?? 0;\r\n\r\n        if (upperBound < lowerBound) return [];\r\n\r\n        let foundIndex = binarySearchNearest(Timeline.beatLines.greenLines, lowerBound, (line, value) => {\r\n            if (line.greenLine.time < value) return -1;\r\n            if (line.greenLine.time > value) return 1;\r\n            return 0;\r\n        });\r\n\r\n        while (\r\n            foundIndex > 0 &&\r\n            Timeline.beatLines.greenLines[foundIndex].greenLine.time >= timestamp - (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500\r\n        )\r\n            foundIndex--;\r\n\r\n        const ret = [];\r\n        while (foundIndex < Timeline.beatLines.greenLines.length && Timeline.beatLines.greenLines[foundIndex].greenLine.time <= upperBound) {\r\n            ret.push(Timeline.beatLines.greenLines[foundIndex++]);\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    constructor(greenLine) {\r\n        this.greenLine = greenLine;\r\n\r\n        const svText = new PIXI.Text({\r\n            text: `${this.greenLine.svMultiplier.toFixed(2)}x`,\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontSize: 12,\r\n                fontWeight: 500,\r\n                align: \"center\",\r\n                tint: 0x161616,\r\n            },\r\n        });\r\n\r\n        let { width: svWidth, height: svHeight } = svText;\r\n        svWidth += 10;\r\n        svHeight += 3;\r\n\r\n        this.sv = new PIXI.Container();\r\n        this.svGraphics = new PIXI.Graphics().roundRect(-svWidth / 2, 0, svWidth, svHeight, 10).fill(0x89f0a3);\r\n\r\n        this.sv.addChild(this.svGraphics, svText);\r\n        this.sv.cullable = true;\r\n\r\n        svText.x = 0;\r\n        svText.y = 1;\r\n        svText.anchor.set(0.5, 0);\r\n\r\n        this.sv.y = 0;\r\n\r\n        let custom = this.greenLine.sampleIdx != 0 ? `:C${this.greenLine.sampleIdx}` : \"\";\r\n\r\n        const sampleText = new PIXI.Text({\r\n            text: `${(HitSound.HIT_SAMPLES[this.greenLine.sampleSet][0] ?? \"\").toUpperCase()}${custom}`,\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontSize: 12,\r\n                fontWeight: 500,\r\n                tint: 0x161616,\r\n            },\r\n        });\r\n\r\n        sampleText.x = 0;\r\n        sampleText.anchor.set(0.5);\r\n\r\n        let { width: sampleWidth, height: sampleHeight } = sampleText;\r\n        sampleWidth += 10;\r\n        sampleHeight += 3;\r\n\r\n        sampleText.y = -sampleHeight / 2;\r\n\r\n        this.sample = new PIXI.Container();\r\n        this.sampleGraphics = new PIXI.Graphics().roundRect(-sampleWidth / 2, -sampleHeight, sampleWidth, sampleHeight, 10).fill(0xfaff75);\r\n        \r\n        this.sample.addChild(this.sampleGraphics, sampleText);\r\n        this.sample.cullable = true;\r\n\r\n        this.sample.y = Timeline.HEIGHT;\r\n    }\r\n\r\n    draw(timestamp) {\r\n        const center = Timeline.WIDTH / 2;\r\n        const delta = timestamp - this.greenLine.time;\r\n\r\n        this.sv.x = Math.max(center - (delta / 500) * Timeline.ZOOM_DISTANCE, this.sv.width / 2 + 5);\r\n\r\n        this.sample.x = Math.max(center - (delta / 500) * Timeline.ZOOM_DISTANCE, this.sample.width / 2 + 5);\r\n        this.sample.y = Timeline.HEIGHT;\r\n\r\n        // this.sv.scale.set(window.devicePixelRatio);\r\n        // this.sample.scale.set(window.devicePixelRatio);\r\n    }\r\n}\r\n\r\nexport class BeatLines {\r\n    obj;\r\n    ticks = [];\r\n    tickTexture;\r\n    greenLines = [];\r\n    drawList = [];\r\n\r\n    static BEAT_LINE_COLOR = {\r\n        1: 0xffffff,\r\n        2: 0xff0000,\r\n        3: 0xb706b7,\r\n        4: 0x3276e6,\r\n        5: 0xe6e605,\r\n        6: 0x843e84,\r\n        7: 0xe6e605,\r\n        8: 0xe6e605,\r\n        9: 0xe6e605,\r\n    };\r\n\r\n    constructor() {\r\n        this.container = new PIXI.Container();\r\n        this.obj = new PIXI.Graphics();\r\n\r\n        this.container.addChild(this.obj);\r\n    }\r\n\r\n    getLineInRange(time, range, type) {\r\n        const foundIndex = binarySearchNearest(Beatmap[type], time, (point, time) => {\r\n            if (point.time < time) return -1;\r\n            if (point.time > time) return 1;\r\n            return 0;\r\n        });\r\n\r\n        const pointList = [];\r\n        const mid = Beatmap[type][foundIndex];\r\n\r\n        if (mid.time >= time - range && mid.time <= time + range) pointList.push(mid);\r\n\r\n        let start = foundIndex - 1;\r\n        let end = foundIndex + 1;\r\n\r\n        while (start >= 0 && Beatmap[type][start].time >= time - range && Beatmap[type][start].time <= time + range) {\r\n            pointList.push(Beatmap[type][start--]);\r\n        }\r\n\r\n        while (end < Beatmap[type].length && Beatmap[type][end].time >= time - range && Beatmap[type][end].time <= time + range) {\r\n            pointList.push(Beatmap[type][end++]);\r\n        }\r\n\r\n        return pointList;\r\n    }\r\n\r\n    draw(timestamp) {\r\n        this.obj.clear();\r\n        const { beatstep: currentBeatStep, time: offset } =\r\n            Beatmap.beatStepsList.findLast((timingPoint) => timingPoint.time < timestamp) ?? Beatmap.beatStepsList[0];\r\n        const range = (Timeline.WIDTH / 2 / Timeline.ZOOM_DISTANCE) * 500;\r\n\r\n        const timingPointList = this.getLineInRange(timestamp, range, \"timingPointsList\").toSorted((a, b) => {\r\n            if (a.time > b.time) return 1;\r\n            if (a.time < b.time) return -1;\r\n            if (a.beatstep) return 1;\r\n            if (b.beatstep) return -1;\r\n            return 0;\r\n        });\r\n\r\n        const snap = parseInt(Game.MAPPING.beatsnap);\r\n        const dividedStep = currentBeatStep / snap;\r\n\r\n        const relativePosition = timestamp - offset;\r\n        const relativeTickPassed = Math.round(relativePosition / dividedStep);\r\n        const nearestTick = offset + relativeTickPassed * dividedStep;\r\n\r\n        const step = dividedStep * (Timeline.ZOOM_DISTANCE / 500);\r\n        const delta = (timestamp - nearestTick) * (Timeline.ZOOM_DISTANCE / 500);\r\n        const ticksNumber = Math.ceil(range / dividedStep);\r\n\r\n        const center = Timeline.WIDTH / 2;\r\n\r\n        for (let i = 0; i < timingPointList.length; i++) {\r\n            const delta = timestamp - timingPointList[i].time;\r\n\r\n            const x = center - (delta / 500) * Timeline.ZOOM_DISTANCE;\r\n            const y = Timeline.HEIGHT;\r\n\r\n            this.obj\r\n                .setStrokeStyle({\r\n                    width: 1,\r\n                    color: timingPointList[i].beatstep ? 0xe34653 : 0x1bcc20,\r\n                    alignment: 0.5,\r\n                    alpha: 0.9,\r\n                })\r\n                .moveTo(x, y)\r\n                .lineTo(x, y - 40 )\r\n                .stroke();\r\n        }\r\n\r\n        for (let i = -ticksNumber; i <= ticksNumber; i++) {\r\n            const tickTime = nearestTick + i * dividedStep - offset;\r\n            const whiteTickPassed = Math.round(tickTime / currentBeatStep);\r\n            const nearestWhiteTick = offset + whiteTickPassed * currentBeatStep;\r\n            let denominator = Math.round(currentBeatStep / Math.abs(nearestWhiteTick - (nearestTick + i * dividedStep)));\r\n\r\n            if (snap === 5 || snap === 10) denominator = 5;\r\n            if (denominator > 48) denominator = 1;\r\n\r\n            const x = center + i * step - delta;\r\n            const y = Timeline.HEIGHT;\r\n            this.obj\r\n                .setStrokeStyle({\r\n                    width: 1,\r\n                    color: BeatLines.BEAT_LINE_COLOR[denominator] ?? 0x929292,\r\n                    alignment: 0.5,\r\n                })\r\n                .moveTo(x, y)\r\n                .lineTo(x, y - 10 )\r\n                .stroke();\r\n        }\r\n\r\n        this.drawList.forEach((line) => {\r\n            this.container.removeChild(line.sv);\r\n            this.container.removeChild(line.sample);\r\n        });\r\n\r\n        this.drawList = [];\r\n        if (!Timeline.SHOW_GREENLINE) return;\r\n\r\n        this.drawList = GreenLineInfo.findGreenLineInRange(timestamp);\r\n        this.drawList.forEach((line) => {\r\n            this.container.addChild(line.sv);\r\n            this.container.addChild(line.sample);\r\n            line.draw(timestamp);\r\n        });\r\n    }\r\n}\r\n","import { Beatmap } from \"../Beatmap.js\";\r\nimport { Texture } from \"../Texture.js\";\r\nimport { TimelineHitCircle } from \"./HitCircle.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport { Timeline } from \"./Timeline.js\";\r\nimport * as d3 from \"d3\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class TimelineReverseArrow extends TimelineHitCircle {\r\n    hitObject;\r\n    slider;\r\n\r\n    constructor(hitObject, slider) {\r\n        super(hitObject);\r\n\r\n        this.hitObject = hitObject;\r\n        this.slider = slider;\r\n\r\n        this.obj.removeChild(this.numberSprite.obj);\r\n\r\n        this.numberSprite = new PIXI.Sprite(Texture.LEGACY.REVERSE_ARROW.arrow.texture);\r\n        this.numberSprite.anchor.set(0.5);\r\n\r\n        this.numberSprite.scale.set(1);\r\n        this.obj.addChildAt(this.numberSprite, 2);\r\n    }\r\n\r\n    draw(timestamp) {\r\n        super.draw(timestamp, true);\r\n\r\n        const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n        const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.slider.colourIdx : this.slider.colourHaxedIdx;\r\n        this.hitCircle.tint = colors[idx % colors.length];\r\n\r\n        const skinType = Skinning.SKIN_ENUM[Game.SKINNING.type];\r\n        const textures = skinType !== \"CUSTOM\" ? Texture.LEGACY : Texture.CUSTOM[Skinning.SKIN_IDX];\r\n\r\n        this.numberSprite.texture = textures.REVERSE_ARROW.arrow.texture;\r\n\r\n        this.numberSprite.scale.set(textures.REVERSE_ARROW.arrow.isHD ? 0.5 : 1);\r\n\r\n        if (skinType === \"ARGON\") {\r\n            this.numberSprite.visible = false;\r\n\r\n            const [R, G, B] =\r\n                idx === -1\r\n                    ? [1.0, 1.0, 1.0, 1.0]\r\n                    : [\r\n                          ...Object.values(d3.rgb(`#${colors[idx % colors.length].toString(16).padStart(6, \"0\")}`)).map((val) => val / 255),\r\n                          1.0,\r\n                      ];\r\n\r\n            const lumi = 0.299 * R + 0.587 * G + 0.114 * B;\r\n            if (lumi > 0.5) {\r\n                this.meshHead.shader.resources.customUniforms.uniforms.nodeTint = [0.2, 0.2, 0.2, 1.0];\r\n                this.meshTail.shader.resources.customUniforms.uniforms.nodeTint = [0.2, 0.2, 0.2, 1.0];\r\n            } else {\r\n                this.meshHead.shader.resources.customUniforms.uniforms.nodeTint = [0.9, 0.9, 0.9, 1.0];\r\n                this.meshTail.shader.resources.customUniforms.uniforms.nodeTint = [0.9, 0.9, 0.9, 1.0];\r\n            }\r\n\r\n            this.meshHead.shader.resources.customUniforms.uniforms.isReverse = true;\r\n            this.meshTail.shader.resources.customUniforms.uniforms.isReverse = true;\r\n\r\n            this.meshHead.scale.set(Timeline.HEIGHT / (Timeline.SHOW_GREENLINE ? 1.5 : 1) / 60 / 2);\r\n            this.meshTail.scale.set(Timeline.HEIGHT / (Timeline.SHOW_GREENLINE ? 1.5 : 1) / 60 / 2);\r\n        }\r\n    }\r\n}\r\n","import { Beatmap } from \"../Beatmap.js\";\r\nimport { Timeline } from \"./Timeline.js\";\r\nimport { TimelineHitCircle } from \"./HitCircle.js\";\r\nimport { TimelineReverseArrow } from \"./ReverseArrow.js\";\r\nimport { Clamp } from \"../Utils.js\";\r\nimport { Skinning } from \"../Skinning.js\";\r\nimport { Game } from \"../Game.js\";\r\nimport * as d3 from \"d3\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport gpuShader from \"../Shaders/Timeline/SliderBody.wgsl?raw\";\r\nimport glVertexShader from \"../Shaders/Timeline/SliderBody.vert?raw\";\r\nimport glFragmentShader from \"../Shaders/Timeline/SliderBody.frag?raw\";\r\n\r\nexport class TimelineSlider {\r\n    obj;\r\n    hitObject;\r\n    sliderHead;\r\n    sliderTail;\r\n    sliderReverses = [];\r\n\r\n    meshHead;\r\n    meshTail;\r\n    meshBody;\r\n\r\n    ratio = 1;\r\n    headPosition = 0;\r\n\r\n    constructor(hitObject) {\r\n        this.obj = new PIXI.Container();\r\n        // this.obj.interactive = true;\r\n        this.obj.eventMode = \"static\";\r\n\r\n        this.x = 0;\r\n        this.radius = 30.0 * (118 / 128);\r\n        this.hitObject = hitObject;\r\n        this.length = 1;\r\n\r\n        this.hitArea = new PIXI.Graphics().rect(0, 0, 0, 0);\r\n        this.obj.addChild(this.hitArea);\r\n\r\n        const headGeometry = TimelineSlider.createArc(-1, this.radius);\r\n        const tailGeometry = TimelineSlider.createArc(1, this.radius);\r\n        const bodyGeometry = this.createLine(1);\r\n\r\n        // const shader = PIXI.Shader.from(vertexShader, fragmentShader, uniforms);\r\n        const gpu = PIXI.GpuProgram.from({\r\n            vertex: {\r\n                source: gpuShader,\r\n                entryPoint: \"vsMain\",\r\n            },\r\n            fragment: {\r\n                source: gpuShader,\r\n                entryPoint: \"fsMain\",\r\n            },\r\n        });\r\n        gpu.autoAssignGlobalUniforms = true;\r\n        gpu.autoAssignLocalUniforms = true;\r\n\r\n        const gl = PIXI.GlProgram.from({\r\n            name: \"timeline-shader\",\r\n            vertex: glVertexShader,\r\n            fragment: glFragmentShader,\r\n        });\r\n\r\n        const shader = PIXI.Shader.from({\r\n            gl,\r\n            gpu,\r\n            resources: {\r\n                customUniforms: {\r\n                    tint: {\r\n                        value: [0.0, 0.0, 0.0, 1.0],\r\n                        type: \"vec4<f32>\",\r\n                    },\r\n                    selected: {\r\n                        value: 0,\r\n                        type: \"f32\",\r\n                    },\r\n                    skinType: {\r\n                        value: Game.SKINNING.type,\r\n                        type: \"f32\",\r\n                    },\r\n                    isReverse: {\r\n                        value: 0,\r\n                        type: \"f32\",\r\n                    },\r\n                    nodeTint: {\r\n                        value: [0.0, 0.0, 0.0, 1.0],\r\n                        type: \"vec4<f32>\",\r\n                    }\r\n                },\r\n            },\r\n        });\r\n\r\n        const meshHead = new PIXI.Mesh({ geometry: headGeometry, shader: shader });\r\n        const meshBody = new PIXI.Mesh({ geometry: bodyGeometry, shader: shader });\r\n        const meshTail = new PIXI.Mesh({ geometry: tailGeometry, shader: shader });\r\n\r\n        // console.log(shader)\r\n\r\n        this.meshHead = meshHead;\r\n        this.meshBody = meshBody;\r\n        this.meshTail = meshTail;\r\n\r\n        this.meshHead.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\r\n        this.meshBody.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\r\n        this.meshTail.hitArea = new PIXI.Rectangle(0, 0, 0, 0);\r\n\r\n        this.obj.addChild(meshHead);\r\n        this.obj.addChild(meshBody);\r\n        this.obj.addChild(meshTail);\r\n\r\n        const sliderHead = new TimelineHitCircle(hitObject, true);\r\n        const sliderTail = new TimelineHitCircle(hitObject, true);\r\n        this.sliderHead = sliderHead;\r\n        this.sliderTail = sliderTail;\r\n\r\n        this.sliderReverses = this.hitObject.revArrows?.map((arrow) => new TimelineReverseArrow(arrow, this.hitObject)) ?? [];\r\n\r\n        this.obj.addChild(sliderTail.obj);\r\n        this.sliderReverses.toReversed().forEach((arrow) => this.obj.addChild(arrow.obj));\r\n        this.obj.addChild(sliderHead.obj);\r\n\r\n        const handleClickEvent = (e) => {\r\n            const { x, y } = this.obj.toLocal(e.global);\r\n            if (Game.SELECTED.includes(this.hitObject.time)) return false;\r\n\r\n            if (x < this.headPosition - (Timeline.HEIGHT - 20) / 2 || x > this.headPosition + this.length * this.ratio + Timeline.HEIGHT / 1.5 / 2)\r\n                return false;\r\n\r\n            if (!e.ctrlKey) Game.SELECTED = [];\r\n            if (!Game.SELECTED.includes(this.hitObject.time)) Game.SELECTED.push(this.hitObject.time);\r\n\r\n            Timeline.hitArea.isObjectSelecting = true;\r\n            return true;\r\n            // console.log(this.obj.x, this.obj.y, x, y);\r\n        };\r\n\r\n        this.obj.on(\"mousedown\", handleClickEvent);\r\n        this.obj.on(\"touchstart\", handleClickEvent);\r\n        this.obj.on(\"mouseenter\", (e) => {\r\n            this.hitObject.isHover = true;\r\n        });\r\n        this.obj.on(\"mouseleave\", (e) => {\r\n            this.hitObject.isHover = false;\r\n        });\r\n\r\n        // this.obj.visible = false;\r\n        // this.sliderHead.obj.visible = true;\r\n        // this.sliderTail.obj.visible = true;\r\n    }\r\n\r\n    addSelfToContainer(container) {\r\n        container.addChild(this.obj);\r\n    }\r\n\r\n    removeSelfFromContainer(container) {\r\n        container.removeChild(this.obj);\r\n    }\r\n\r\n    draw(timestamp) {\r\n        if (this.hitObject.ILLEGAL) return;\r\n\r\n        const time = this.hitObject.time;\r\n        const delta = timestamp - time;\r\n\r\n        const selected = Game.SELECTED.includes(time);\r\n\r\n        const center = Timeline.WIDTH / 2;\r\n\r\n        this.length = ((this.hitObject.endTime - this.hitObject.time) / 500) * Timeline.ZOOM_DISTANCE;\r\n\r\n        const colors = Game.SLIDER_APPEARANCE.ignoreSkin ? Skinning.DEFAULT_COLORS : Beatmap.COLORS;\r\n        const idx = Game.SLIDER_APPEARANCE.ignoreSkin ? this.hitObject.colourIdx : this.hitObject.colourHaxedIdx;\r\n        const tint =\r\n            idx === -1\r\n                ? [1.0, 1.0, 1.0, 1.0]\r\n                : [...Object.values(d3.rgb(`#${colors[idx % colors.length].toString(16).padStart(6, \"0\")}`)).map((val) => val / 255), 1.0];\r\n\r\n        let headPosition = Math.max(center - (delta / 500) * Timeline.ZOOM_DISTANCE, 0);\r\n        this.headPosition = headPosition;\r\n        // let headPosition = center - (delta / 500) * Timeline.ZOOM_DISTANCE;\r\n        let endPosition = center - (delta / 500) * Timeline.ZOOM_DISTANCE + this.length;\r\n\r\n        if (endPosition < 0) headPosition = endPosition;\r\n        const ratio = Clamp((endPosition - headPosition) / this.length, 0, 1);\r\n        this.ratio = ratio;\r\n        // const ratio = 1;\r\n\r\n        this.meshHead.position.set(headPosition, Timeline.HEIGHT / 2);\r\n        this.meshHead.scale.set((Timeline.HEIGHT - (Timeline.SHOW_GREENLINE ? 30 : 0)) / 60 * 0.9);\r\n        this.meshHead.shader.resources.customUniforms.uniforms.tint = tint;\r\n        this.meshHead.shader.resources.customUniforms.uniforms.selected = selected ? 1 : 0;\r\n        this.meshHead.shader.resources.customUniforms.uniforms.skinType = Game.SKINNING.type;\r\n\r\n        this.meshBody.position.set(headPosition, Timeline.HEIGHT / 2);\r\n        this.meshBody.scale.set(this.length * ratio, (Timeline.HEIGHT - (Timeline.SHOW_GREENLINE ? 30 : 0)) / 60 * 0.9);\r\n        this.meshBody.shader.resources.customUniforms.uniforms.tint = tint;\r\n        this.meshBody.shader.resources.customUniforms.uniforms.selected = selected ? 1 : 0;\r\n        this.meshBody.shader.resources.customUniforms.uniforms.skinType = Game.SKINNING.type;\r\n\r\n        this.meshTail.position.set(endPosition, Timeline.HEIGHT / 2);\r\n        this.meshTail.scale.set((Timeline.HEIGHT - (Timeline.SHOW_GREENLINE ? 30 : 0)) / 60 * 0.9);\r\n        this.meshTail.shader.resources.customUniforms.uniforms.tint = tint;\r\n        this.meshTail.shader.resources.customUniforms.uniforms.selected = selected ? 1 : 0;\r\n        this.meshTail.shader.resources.customUniforms.uniforms.skinType = Game.SKINNING.type;\r\n\r\n        this.sliderHead.draw(timestamp);\r\n        this.sliderTail.draw(timestamp, true);\r\n\r\n        this.sliderHead.obj.x = headPosition;\r\n        this.sliderTail.obj.x = endPosition;\r\n\r\n        this.hitArea.clear();\r\n        this.hitArea.rect(headPosition, 0, this.length * ratio, Timeline.HEIGHT).fill({ color: 0xffff00, alpha: 0.0001 });\r\n\r\n        this.sliderReverses.forEach((arrow) => arrow.draw(timestamp));\r\n\r\n        if (idx === -1) {\r\n            this.sliderHead.hitCircle.tint = 0xdedede;\r\n            this.sliderTail.hitCircle.tint = 0xdedede;\r\n        }\r\n\r\n        this.sliderHead.hitCircle.tint = colors[idx % colors.length];\r\n        this.sliderTail.hitCircle.tint = colors[idx % colors.length];\r\n    }\r\n\r\n    static createArc(side, radius, length) {\r\n        side /= Math.abs(side);\r\n\r\n        const indices = [];\r\n        const dist = [];\r\n\r\n        const center = [0.0, 0.0];\r\n        const RESOLUTION = 400;\r\n\r\n        for (let i = 0; i < RESOLUTION; i++) {\r\n            const angle = (i / RESOLUTION) * Math.PI * side;\r\n            const angleNext = ((i + 1) / RESOLUTION) * Math.PI * side;\r\n            indices.push(...center, radius * Math.sin(angle), radius * Math.cos(angle), radius * Math.sin(angleNext), radius * Math.cos(angleNext));\r\n            dist.push(0.0, 1.0, 1.0);\r\n        }\r\n\r\n        const geometry = new PIXI.Geometry({\r\n            attributes: {\r\n                position: indices,\r\n                dist: dist,\r\n            },\r\n        });\r\n        return geometry;\r\n    }\r\n\r\n    createLine(length) {\r\n        const indices = [\r\n            this.x,\r\n            this.radius,\r\n            this.x + length,\r\n            this.radius,\r\n            this.x,\r\n            0.0,\r\n            this.x,\r\n            0.0,\r\n            this.x + length,\r\n            this.radius,\r\n            this.x + length,\r\n            0.0,\r\n            this.x,\r\n            0.0,\r\n            this.x + length,\r\n            0.0,\r\n            this.x,\r\n            -this.radius,\r\n            this.x,\r\n            -this.radius,\r\n            this.x + length,\r\n            0.0,\r\n            this.x + length,\r\n            -this.radius,\r\n        ];\r\n\r\n        const dist = [1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0];\r\n\r\n        const geometry = new PIXI.Geometry({\r\n            attributes: {\r\n                position: indices,\r\n                dist: dist,\r\n            },\r\n        });\r\n        return geometry;\r\n    }\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Game } from \"../Game\";\r\nimport { Beatmap } from \"../Beatmap\";\r\nimport { Texture } from \"../Texture\";\r\nimport { HitCircle } from \"./HitCircle\";\r\nimport { Slider } from \"./Slider\";\r\nimport { Clamp } from \"../Utils\";\r\nimport { easeOutQuad } from \"easing-utils\";\r\n\r\nexport class FollowPoint {\r\n\tisHR = false;\r\n\tsprites = [];\r\n\r\n\tconstructor({ startObj, endObj }) {\r\n\t\tthis.startObj = startObj;\r\n\t\tthis.endObj = endObj;\r\n\t\tthis.container = new PIXI.Container();\r\n\r\n\t\tthis.calculate();\r\n\r\n\t\tthis.color = Math.floor(Math.random() * 0xffffff);\r\n\r\n\t\tthis.container.zIndex = -999;\r\n\t\t// this.container.visible = false;\r\n\t\tthis.container.eventMode = \"none\";\r\n\r\n\t\tthis.graphics = new PIXI.Graphics();\r\n\t\tthis.container.addChild(this.graphics);\r\n\t}\r\n\r\n\trefreshSprites() {\r\n\t\tif (Number.isNaN(this.width) || this.width < 80) {\r\n\t\t\tthis.sprites = [];\r\n\t\t\tthis.container.removeChildren();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst texture = Texture.FOLLOWPOINT.texture;\r\n\t\tconst numberOfSprites = Math.floor((this.width - 48) / (512 / 16));\r\n\r\n\t\tthis.container.removeChildren();\r\n\t\tthis.sprites = Array(numberOfSprites)\r\n\t\t\t.fill(true)\r\n\t\t\t.map((_, idx) => {\r\n\t\t\t\tconst sprite = new PIXI.Sprite(texture);\r\n\t\t\t\tsprite.anchor.set(0.5);\r\n\t\t\t\t// if (Texture.FOLLOWPOINT.isHD) sprite.scale.set(0.5);\r\n\t\t\t\tsprite.scale.set(\r\n\t\t\t\t\tGame.SCALE_RATE * (Texture.FOLLOWPOINT.isHD ? 0.5 : 1),\r\n\t\t\t\t);\r\n\t\t\t\tsprite.eventMode = \"none\";\r\n\r\n\t\t\t\tsprite.x = (1.5 + idx) * (512 / 16) * Game.SCALE_RATE;\r\n\r\n\t\t\t\tthis.container.addChild(sprite);\r\n\t\t\t\treturn sprite;\r\n\t\t\t});\r\n\t}\r\n\r\n\tcalculate() {\r\n\t\tif (this.startObj instanceof HitCircle) {\r\n\t\t\tthis.startTime = this.startObj.time - Beatmap.moddedStats.preempt;\r\n\t\t}\r\n\r\n\t\tif (this.startObj instanceof Slider) {\r\n\t\t\tthis.startTime = this.startObj.endTime - Beatmap.moddedStats.preempt;\r\n\t\t}\r\n\r\n\t\tthis.readyTime = this.endObj.time - Beatmap.moddedStats.preempt;\r\n\t\tthis.animTime = this.startObj.endTime;\r\n\t\tthis.endTime = this.endObj.time;\r\n\r\n\t\tlet { x: startX, y: startY } = this.startObj.endPosition;\r\n\t\tlet { x: endX, y: endY } = this.endObj.startPosition;\r\n\r\n\t\tif (Game.MODS.HR) {\r\n\t\t\tstartY = 384 - startY;\r\n\t\t\tendY = 384 - endY;\r\n\t\t}\r\n\r\n\t\tstartX += this.startObj.stackHeight * Beatmap.moddedStats.stackOffset;\r\n\t\tstartY += this.startObj.stackHeight * Beatmap.moddedStats.stackOffset;\r\n\t\tendX += this.endObj.stackHeight * Beatmap.moddedStats.stackOffset;\r\n\t\tendY += this.endObj.stackHeight * Beatmap.moddedStats.stackOffset;\r\n\r\n\t\tthis.width = Math.hypot(endX - startX, endY - startY);\r\n\r\n\t\tthis.rotation = Math.atan2(endY - startY, endX - startX);\r\n\t\tthis.startX = startX;\r\n\t\tthis.startY = startY;\r\n\t\tthis.enX = endX;\r\n\t\tthis.endY = endY;\r\n\r\n\t\tthis.container.rotation = this.rotation;\r\n\r\n\t\tthis.refreshSprites();\r\n\t}\r\n\r\n\tcheckModChange() {\r\n\t\tif (Game.MODS.HR === this.isHR) return;\r\n\t\tthis.isHR = Game.MODS.HR;\r\n\r\n\t\tthis.calculate();\r\n\t}\r\n\r\n\tupdateOpacity(timestamp) {\r\n\t\tconst duration = this.endTime - this.animTime;\r\n\t\tconst preempt = 800 * Math.min(1, Beatmap.moddedStats.preempt / 800);\r\n\t\tconst timeFade = Beatmap.moddedStats.fadeIn;\r\n\r\n\t\tthis.sprites.forEach((sprite, idx) => {\r\n\t\t\tconst d = 32 * 1.5 + 32 * idx;\r\n\t\t\tconst f = d / this.width;\r\n\r\n\t\t\tconst fadeOutTime = this.animTime + f * duration;\r\n\t\t\tconst fadeInTime = fadeOutTime - preempt;\r\n\r\n\t\t\tif (timestamp < fadeInTime + timeFade) {\r\n\t\t\t\tconst opacity = easeOutQuad(\r\n\t\t\t\t\tClamp((timestamp - fadeInTime) / timeFade, 0, 1),\r\n\t\t\t\t);\r\n\t\t\t\tsprite.alpha = opacity;\r\n\t\t\t\tsprite.scale.set(\r\n\t\t\t\t\t(1.5 - 0.5 * opacity) *\r\n\t\t\t\t\t\tGame.SCALE_RATE *\r\n\t\t\t\t\t\t(Texture.FOLLOWPOINT.isHD ? 0.5 : 1),\r\n\t\t\t\t);\r\n\r\n\t\t\t\tsprite.x = (f - 0.1 * (1 - opacity)) * this.width * Game.SCALE_RATE;\r\n\t\t\t}\r\n\r\n\t\t\tif (timestamp > fadeOutTime) {\r\n\t\t\t\tconst opacity =\r\n\t\t\t\t\t1 - easeOutQuad(Clamp((timestamp - fadeOutTime) / timeFade, 0, 1));\r\n\t\t\t\tsprite.alpha = opacity;\r\n\t\t\t\tsprite.scale.set(\r\n\t\t\t\t\tGame.SCALE_RATE * (Texture.FOLLOWPOINT.isHD ? 0.5 : 1),\r\n\t\t\t\t);\r\n\t\t\t\t// sprite.x = (1.5 + idx) * (512 / 16) * Game.SCALE_RATE\r\n\t\t\t\tsprite.x = f * this.width * Game.SCALE_RATE;\r\n\t\t\t}\r\n\r\n\t\t\tif (timestamp >= fadeInTime + timeFade && timestamp < fadeOutTime) {\r\n\t\t\t\tsprite.alpha = 1;\r\n\t\t\t\tsprite.scale.set(\r\n\t\t\t\t\tGame.SCALE_RATE * (Texture.FOLLOWPOINT.isHD ? 0.5 : 1),\r\n\t\t\t\t);\r\n\t\t\t\t// sprite.x = (1.5 + idx) * (512 / 16) * Game.SCALE_RATE\r\n\t\t\t\tsprite.x = f * this.width * Game.SCALE_RATE;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tdraw(timestamp) {\r\n\t\tthis.checkModChange();\r\n\r\n\t\tthis.container.x = this.startX * Game.SCALE_RATE;\r\n\t\tthis.container.y = this.startY * Game.SCALE_RATE;\r\n\r\n\t\tthis.updateOpacity(timestamp);\r\n\r\n\t\t// this.graphics.clear().rect(0, 0, this.width * Game.SCALE_RATE, 3).fill(this.color);\r\n\t}\r\n}\r\n","import { Game } from \"./Game.js\";\r\nimport { Clamp } from \"./Utils.js\";\r\nimport { GreenLineInfo } from \"./Timeline/BeatLines.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\nimport { ProgressBar } from \"./Progress.js\";\r\nimport { binarySearchNearest } from \"./Utils.js\";\r\nimport { ObjectsController } from \"./HitObjects/ObjectsController.js\";\r\nimport { HitCircle } from \"./HitObjects/HitCircle.js\";\r\nimport { Slider } from \"./HitObjects/Slider.js\";\r\nimport { Spinner } from \"./HitObjects/Spinner.js\";\r\nimport { TimelineHitCircle } from \"./Timeline/HitCircle.js\";\r\nimport { TimelineSlider } from \"./Timeline/Slider.js\";\r\nimport { Skinning } from \"./Skinning.js\";\r\nimport { HitSample } from \"./Audio.js\";\r\nimport { HitSound } from \"./HitSound.js\";\r\nimport { Texture } from \"./Texture.js\";\r\nimport { TimingPanel } from \"./TimingPanel.js\";\r\nimport { MetadataPanel } from \"./SidePanel.js\";\r\nimport { Notification } from \"./Notification.js\";\r\nimport { FollowPoint } from \"./HitObjects/FollowPoint.js\";\r\n\r\nexport class Beatmap {\r\n\tobjectsController;\r\n\tstatic SAMPLE_SET = \"Normal\";\r\n\tstatic COLORS;\r\n\tstatic HREF = null;\r\n\r\n\tstatic hasILLEGAL = false;\r\n\r\n\tstatic difficultyMultiplier = 1;\r\n\tstatic stats = {\r\n\t\tapproachRate: 5,\r\n\t\tcircleSize: 5,\r\n\t\tHPDrainRate: 5,\r\n\t\toverallDifficulty: 5,\r\n\t\tstackLeniency: 7,\r\n\t\tcircleDiameter: (2 * (54.4 - 4.48 * 5) * 236) / 256,\r\n\t\tpreempt: 1200,\r\n\t\tfadeIn: 800,\r\n\t\tsliderTickRate: 1,\r\n\t\tradius: 54.4 - 4.48 * 5,\r\n\t\tstackOffset: (-6.4 * (1 - (0.7 * (5 - 5)) / 5)) / 2,\r\n\t};\r\n\r\n\tstatic moddedStats = {\r\n\t\tapproachRate: 5,\r\n\t\tcircleSize: 5,\r\n\t\tHPDrainRate: 5,\r\n\t\toverallDifficulty: 5,\r\n\t\tstackLeniency: 7,\r\n\t\tcircleDiameter: (2 * (54.4 - 4.48 * 5) * 236) / 256,\r\n\t\tpreempt: 1200,\r\n\t\tfadeIn: 800,\r\n\t\tsliderTickRate: 1,\r\n\t\tradius: 54.4 - 4.48 * 5,\r\n\t\tstackOffset: (-6.4 * (1 - (0.7 * (5 - 5)) / 5)) / 2,\r\n\t};\r\n\r\n\tstatic difficultyRange(val, min, mid, max) {\r\n\t\tif (val > 5) return mid + ((max - mid) * (val - 5)) / 5;\r\n\t\tif (val < 5) return mid - ((mid - min) * (5 - val)) / 5;\r\n\t\treturn mid;\r\n\t}\r\n\r\n\tstatic reverseDifficultyRange(val, min, mid, max) {\r\n\t\tconst case_1 = ((val - mid) * 5) / (max - mid) + 5;\r\n\t\tconst case_2 = 5 - ((mid - val) * 5) / (mid - min);\r\n\r\n\t\tif (case_1 > 5 && case_2 > 5) return case_1;\r\n\t\tif (case_2 < 5 && case_1 < 5) return case_2;\r\n\t\treturn 5;\r\n\t}\r\n\r\n\tstatic hitWindows = {\r\n\t\tGREAT: 80,\r\n\t\tOK: 140,\r\n\t\tMEH: 200,\r\n\t};\r\n\r\n\tstatic beatStepsList = [];\r\n\tstatic timingPointsList = [];\r\n\tstatic breakPeriods = [];\r\n\tstatic kiaiList = [];\r\n\tstatic mergedPoints = [];\r\n\r\n\tstatic stackThreshold;\r\n\r\n\tstatic updateModdedStats() {\r\n\t\tconst HRMul = !Game.MODS.HR ? 1 : 1.4;\r\n\t\tconst EZMul = !Game.MODS.EZ ? 1 : 0.5;\r\n\t\tconst HRMulCS = !Game.MODS.HR ? 1 : 1.3;\r\n\r\n\t\tconst circleSize = Math.min(Beatmap.stats.circleSize * HRMulCS * EZMul, 10);\r\n\t\tconst approachRate = Math.min(\r\n\t\t\tBeatmap.stats.approachRate * HRMul * EZMul,\r\n\t\t\t10,\r\n\t\t);\r\n\t\tconst HPDrainRate = Math.min(Beatmap.stats.HPDrainRate * HRMul * EZMul, 10);\r\n\t\tconst overallDifficulty = Math.min(\r\n\t\t\tBeatmap.stats.overallDifficulty * HRMul * EZMul,\r\n\t\t\t10,\r\n\t\t);\r\n\r\n\t\t// Don't look at this\r\n\t\t// if (Game.PLAYBACK_RATE !== 1) {\r\n\t\t//     const newPreempt = Beatmap.difficultyRange(approachRate, 1800, 1200, 450) / Game.PLAYBACK_RATE;\r\n\t\t//     const newHitWindow = Beatmap.difficultyRange(approachRate, 79.5, 49.5, 19.5) / Game.PLAYBACK_RATE;\r\n\r\n\t\t//     const ratedAR = Beatmap.reverseDifficultyRange(newPreempt, 1800, 1200, 450);\r\n\t\t//     const ratedOD = Beatmap.reverseDifficultyRange(newHitWindow, 79.5, 49.5, 19.5);\r\n\r\n\t\t//     Beatmap.moddedStats = {\r\n\t\t//         ...Beatmap.stats,\r\n\t\t//         circleSize,\r\n\t\t//         approachRate: ratedAR,\r\n\t\t//         HPDrainRate,\r\n\t\t//         overallDifficulty: ratedOD,\r\n\t\t//         preempt: Beatmap.difficultyRange(approachRate, 1800, 1200, 450),\r\n\t\t//         fadeIn: Beatmap.difficultyRange(approachRate, 1200, 800, 300),\r\n\t\t//         radius: 54.4 - 4.48 * circleSize,\r\n\t\t//         stackOffset: (-6.4 * (1 - (0.7 * (circleSize - 5)) / 5)) / 2,\r\n\t\t//     };\r\n\r\n\t\t//     return;\r\n\t\t// }\r\n\r\n\t\tGame.WORKER.postMessage({\r\n\t\t\ttype: \"updateStats\",\r\n\t\t\tmods: Game.MODS,\r\n\t\t\tplaybackRate: Game.PLAYBACK_RATE,\r\n\t\t\tmoddedStats: {\r\n\t\t\t\tcircleSize,\r\n\t\t\t\tapproachRate,\r\n\t\t\t\tHPDrainRate,\r\n\t\t\t\toverallDifficulty,\r\n\t\t\t\tpreempt: Beatmap.difficultyRange(approachRate, 1800, 1200, 450),\r\n\t\t\t\tfadeIn: Beatmap.difficultyRange(approachRate, 1200, 800, 300),\r\n\t\t\t\tradius: 54.4 - 4.48 * circleSize,\r\n\t\t\t\tstackOffset: (-6.4 * (1 - (0.7 * (circleSize - 5)) / 5)) / 2,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tBeatmap.moddedStats = {\r\n\t\t\t...Beatmap.stats,\r\n\t\t\tcircleSize,\r\n\t\t\tapproachRate,\r\n\t\t\tHPDrainRate,\r\n\t\t\toverallDifficulty,\r\n\t\t\tpreempt: Beatmap.difficultyRange(approachRate, 1800, 1200, 450),\r\n\t\t\tfadeIn: Beatmap.difficultyRange(approachRate, 1200, 800, 300),\r\n\t\t\tradius: 54.4 - 4.48 * circleSize,\r\n\t\t\tstackOffset: (-6.4 * (1 - (0.7 * (circleSize - 5)) / 5)) / 2,\r\n\t\t};\r\n\r\n\t\tBeatmap.stackThreshold =\r\n\t\t\tBeatmap.moddedStats.preempt * Beatmap.moddedStats.stackLeniency;\r\n\t}\r\n\r\n\tstatic updateStats() {\r\n\t\tconst { circleSize, approachRate } = Beatmap.stats;\r\n\r\n\t\tBeatmap.stats = {\r\n\t\t\t...Beatmap.stats,\r\n\t\t\tpreempt: Beatmap.difficultyRange(approachRate, 1800, 1200, 450),\r\n\t\t\tfadeIn: Beatmap.difficultyRange(approachRate, 1200, 800, 300),\r\n\t\t\tradius: 54.4 - 4.48 * circleSize,\r\n\t\t\tstackOffset: (-6.4 * (1 - (0.7 * (circleSize - 5)) / 5)) / 2,\r\n\t\t};\r\n\r\n\t\tBeatmap.stackThreshold =\r\n\t\t\tBeatmap.moddedStats.preempt * Beatmap.moddedStats.stackLeniency;\r\n\t}\r\n\r\n\tstatic constructSpinner(params, currentSVMultiplier) {\r\n\t\tconst parameters = params.map((p) => (p === \"\" || !p ? null : p));\r\n\t\tconst startTime = parseInt(parameters[2]);\r\n\t\tconst endTime = parseInt(parameters[5]);\r\n\t\tconst hitSoundIdx = parameters[4];\r\n\t\tconst hitSampleIdx = parameters.at(-1);\r\n\r\n\t\tconst samples = HitSound.GetName(\r\n\t\t\thitSampleIdx,\r\n\t\t\thitSoundIdx,\r\n\t\t\tcurrentSVMultiplier,\r\n\t\t);\r\n\t\tconst hitsounds = new HitSample(\r\n\t\t\tsamples,\r\n\t\t\tcurrentSVMultiplier.sampleVol / 100,\r\n\t\t);\r\n\t\treturn {\r\n\t\t\tobj: new Spinner(startTime, endTime, hitsounds),\r\n\t\t\thitsounds,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic constructSlider(\r\n\t\tparams,\r\n\t\ttimingPoints,\r\n\t\tbeatSteps,\r\n\t\tinitialSliderVelocity,\r\n\t\traw,\r\n\t) {\r\n\t\tconst hitSoundIdx = parseInt(params[4]);\r\n\t\tconst time = parseInt(params[2]);\r\n\t\tconst svPrecise = Beatmap.findNearestTimingPoint(\r\n\t\t\ttime,\r\n\t\t\t\"timingPointsList\",\r\n\t\t\ttrue,\r\n\t\t);\r\n\t\tconst svStart = Beatmap.findNearestTimingPoint(time, \"timingPointsList\");\r\n\r\n\t\t// console.log(time, svPrecise, svStart);\r\n\r\n\t\tconst { beatstep: beatStep } = Beatmap.findNearestTimingPoint(\r\n\t\t\ttime,\r\n\t\t\t\"beatStepsList\",\r\n\t\t\ttrue,\r\n\t\t);\r\n\t\tconst slides = parseInt(params[6]);\r\n\t\tconst length = parseFloat(params[7]);\r\n\t\tconst endTime =\r\n\t\t\ttime +\r\n\t\t\t((slides * length) / svStart.svMultiplier / initialSliderVelocity) *\r\n\t\t\t\tbeatStep;\r\n\t\tconst svEnd = Beatmap.findNearestTimingPoint(endTime, \"timingPointsList\");\r\n\r\n\t\tconst edgeSounds = params[8];\r\n\t\tconst edgeSets = params[9];\r\n\t\tconst defaultSetIdx = /^\\d:\\d.*/g.test(params.at(-1))\r\n\t\t\t? params.at(-1)\r\n\t\t\t: \"0:0\";\r\n\r\n\t\tconst headSamples = HitSound.GetName(\r\n\t\t\tedgeSets?.split(\"|\")[0] ?? defaultSetIdx,\r\n\t\t\tedgeSounds?.split(\"|\")[0] ?? hitSoundIdx,\r\n\t\t\tsvStart,\r\n\t\t);\r\n\t\tconst endSamples = HitSound.GetName(\r\n\t\t\tedgeSets?.split(\"|\").at(-1) ?? defaultSetIdx,\r\n\t\t\tedgeSounds?.split(\"|\").at(-1) ?? hitSoundIdx,\r\n\t\t\tsvEnd,\r\n\t\t);\r\n\r\n\t\tconst reversesSamples = [...Array(slides - 1)].map((_, idx) => {\r\n\t\t\tconst reverseTime =\r\n\t\t\t\ttime +\r\n\t\t\t\t(((idx + 1) * length) / svStart.svMultiplier / initialSliderVelocity) *\r\n\t\t\t\t\tbeatStep;\r\n\t\t\tconst sv = Beatmap.findNearestTimingPoint(\r\n\t\t\t\treverseTime,\r\n\t\t\t\t\"timingPointsList\",\r\n\t\t\t);\r\n\r\n\t\t\tconst samples = HitSound.GetName(\r\n\t\t\t\tedgeSets?.split(\"|\")[idx + 1] ?? defaultSetIdx,\r\n\t\t\t\tedgeSounds?.split(\"|\")[idx + 1] ?? hitSoundIdx,\r\n\t\t\t\tsv,\r\n\t\t\t);\r\n\t\t\treturn new HitSample(samples, sv.sampleVol / 100);\r\n\t\t});\r\n\r\n\t\tconst [x, y, , type] = params;\r\n\t\tconst anchors = params[5].slice(2);\r\n\t\tconst sliderType = params[5][0];\r\n\r\n\t\tconst defaultSet = {\r\n\t\t\tnormal: parseInt(defaultSetIdx.split(\":\")[0]),\r\n\t\t\tadditional: parseInt(defaultSetIdx.split(\":\")[1]),\r\n\t\t\thitSoundIdx,\r\n\t\t};\r\n\r\n\t\tconst { normalSet: defaultSample } = HitSound.GetHitSample(\r\n\t\t\tdefaultSetIdx,\r\n\t\t\tsvStart,\r\n\t\t);\r\n\t\tconst sliderSlide = new HitSample(\r\n\t\t\t[`${defaultSample}-sliderslide${svStart.sampleIdx}`],\r\n\t\t\tsvStart.sampleVol / 100,\r\n\t\t);\r\n\t\tconst sliderWhistle = new HitSample(\r\n\t\t\t[`${defaultSample}-sliderwhistle${svStart.sampleIdx}`],\r\n\t\t\tsvStart.sampleVol / 100,\r\n\t\t);\r\n\r\n\t\tconst hitsounds = {\r\n\t\t\tsliderHead: new HitSample(headSamples, svStart.sampleVol / 100),\r\n\t\t\tsliderTail: new HitSample(endSamples, svEnd.sampleVol / 100),\r\n\t\t\tsliderReverse: reversesSamples,\r\n\t\t\tsliderSlide,\r\n\t\t\tsliderWhistle,\r\n\t\t\tdefaultSet,\r\n\t\t};\r\n\r\n\t\tconst obj = new Slider(\r\n\t\t\t`${x}:${y}|${anchors}`,\r\n\t\t\tsliderType,\r\n\t\t\tlength,\r\n\t\t\tsvPrecise.svMultiplier,\r\n\t\t\tinitialSliderVelocity,\r\n\t\t\tbeatStep,\r\n\t\t\ttime,\r\n\t\t\tslides,\r\n\t\t\thitsounds,\r\n\t\t\traw,\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tobj,\r\n\t\t\thitsounds,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic constructHitCircle(params, currentSVMultiplier) {\r\n\t\tconst parameters = params.map((p) => (p === \"\" || !p ? null : p));\r\n\t\tconst [x, y, time, type, hitSoundIdx, ...rest] = parameters;\r\n\t\tconst hitSampleIdx = rest.at(-1);\r\n\r\n\t\tconst samples = HitSound.GetName(\r\n\t\t\thitSampleIdx,\r\n\t\t\thitSoundIdx,\r\n\t\t\tcurrentSVMultiplier,\r\n\t\t);\r\n\t\tif (parseInt(time) === 208128) {\r\n\t\t\tconsole.log(currentSVMultiplier, samples);\r\n\t\t}\r\n\r\n\t\tconst hitsounds = new HitSample(\r\n\t\t\tsamples,\r\n\t\t\tcurrentSVMultiplier.sampleVol / 100,\r\n\t\t);\r\n\r\n\t\treturn {\r\n\t\t\tobj: new HitCircle(x, y, parseInt(time), hitsounds),\r\n\t\t\thitsounds,\r\n\t\t};\r\n\t}\r\n\r\n\tstatic findNearestTimingPoint(time, type, precise) {\r\n\t\treturn Beatmap[type][\r\n\t\t\tBeatmap.findNearestTimingPointIndex(time, type, precise)\r\n\t\t];\r\n\t}\r\n\r\n\tstatic findNearestTimingPointIndex(time, type, precise) {\r\n\t\tconst compensate = precise ? 0 : 2;\r\n\t\tlet foundIndex = binarySearchNearest(Beatmap[type], time, (point, time) => {\r\n\t\t\tif (point.time < time + compensate) return -1;\r\n\t\t\tif (point.time > time + compensate) return 1;\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\twhile (foundIndex > 0 && Beatmap[type][foundIndex].time > time + compensate)\r\n\t\t\tfoundIndex--;\r\n\t\twhile (\r\n\t\t\tfoundIndex + 1 < Beatmap[type].length &&\r\n\t\t\tBeatmap[type][foundIndex + 1].time <= time + compensate\r\n\t\t)\r\n\t\t\tfoundIndex++;\r\n\r\n\t\tif (Beatmap[type][foundIndex].time > time + compensate) return 0;\r\n\t\treturn foundIndex;\r\n\t}\r\n\r\n\tstatic async loadProgressBar() {\r\n\t\tconst wrapper = document.createElement(\"div\");\r\n\t\twrapper.classList.add(\"timingWrapper\");\r\n\r\n\t\tBeatmap.timingPointsList.forEach((greenLine) => {\r\n\t\t\tconst div = document.createElement(\"div\");\r\n\t\t\tdiv.classList.add(\"greenLine\");\r\n\r\n\t\t\tdiv.style.left = `${(greenLine.time / Game.BEATMAP_FILE.audioNode.duration) * 100}%`;\r\n\r\n\t\t\twrapper.appendChild(div);\r\n\t\t});\r\n\r\n\t\tBeatmap.beatStepsList.forEach((redLine) => {\r\n\t\t\tconst div = document.createElement(\"div\");\r\n\t\t\tdiv.classList.add(\"redLine\");\r\n\r\n\t\t\tdiv.style.left = `${(redLine.time / Game.BEATMAP_FILE.audioNode.duration) * 100}%`;\r\n\r\n\t\t\twrapper.appendChild(div);\r\n\t\t});\r\n\r\n\t\tdocument.querySelector(\".timingPointsContainer\").prepend(wrapper);\r\n\r\n\t\tdomtoimage.toPng(wrapper).then((dataURL) => {\r\n\t\t\tdocument.querySelector(\".timingPointsContainer\").removeChild(wrapper);\r\n\t\t\tdocument.querySelector(\".timingPointsContainer img\").src = dataURL;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async loadTimingPoints() {\r\n\t\t[...document.querySelectorAll(\".timingPoint\")].forEach((ele) =>\r\n\t\t\tdocument.querySelector(\".timingPanel\").removeChild(ele),\r\n\t\t);\r\n\r\n\t\tBeatmap.mergedPoints.forEach((point) => {\r\n\t\t\tconst container = document.createElement(\"div\");\r\n\t\t\tcontainer.classList.add(\"timingPoint\");\r\n\r\n\t\t\tconst timeStamp = document.createElement(\"div\");\r\n\t\t\ttimeStamp.classList.add(\"timestamp\");\r\n\r\n\t\t\tconst content = document.createElement(\"div\");\r\n\t\t\tcontent.classList.add(\"timingContent\");\r\n\r\n\t\t\tconst flair = document.createElement(\"div\");\r\n\t\t\tflair.classList.add(\"timingFlair\");\r\n\r\n\t\t\tconst baseValue = document.createElement(\"div\");\r\n\t\t\tbaseValue.classList.add(\"timingValue\");\r\n\r\n\t\t\tcontent.append(flair, baseValue);\r\n\t\t\tcontainer.append(timeStamp, content);\r\n\r\n\t\t\tlet currentTime = point.time;\r\n\t\t\tconst isNeg = currentTime < 0;\r\n\t\t\tif (currentTime < 0) currentTime *= -1;\r\n\r\n\t\t\tconst minute = Math.floor(currentTime / 60000);\r\n\t\t\tconst second = Math.floor((currentTime - minute * 60000) / 1000);\r\n\t\t\tconst mili = currentTime - minute * 60000 - second * 1000;\r\n\r\n\t\t\ttimeStamp.textContent = `${isNeg ? \"-\" : \"\"}${minute.toString().padStart(2, \"0\")}:${second.toString().padStart(2, \"0\")}:${mili\r\n\t\t\t\t.toFixed(0)\r\n\t\t\t\t.padStart(3, \"0\")}`;\r\n\r\n\t\t\tif (point.beatstep) {\r\n\t\t\t\tbaseValue.textContent = `${(60000 / point.beatstep).toFixed(2)} BPM`;\r\n\t\t\t\tcontainer.classList.add(\"beatStepPoint\");\r\n\t\t\t\tdocument.querySelector(\".timingPanel\").append(container);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst sampleType = document.createElement(\"div\");\r\n\t\t\tsampleType.classList.add(\"timingValue\");\r\n\r\n\t\t\tif (point.isKiai) content.classList.add(\"kiai\");\r\n\r\n\t\t\tif (point.sampleIdx !== 0) {\r\n\t\t\t\tsampleType.textContent = `${HitSound.HIT_SAMPLES[point.sampleSet][0].toUpperCase()}:C${point.sampleIdx}`;\r\n\t\t\t} else {\r\n\t\t\t\tsampleType.textContent = `${HitSound.HIT_SAMPLES[point.sampleSet][0].toUpperCase()}`;\r\n\t\t\t}\r\n\r\n\t\t\tconst sampleVol = document.createElement(\"div\");\r\n\t\t\tsampleVol.classList.add(\"timingValue\");\r\n\t\t\tsampleVol.textContent = `${point.sampleVol}%`;\r\n\r\n\t\t\tcontent.append(sampleType, sampleVol);\r\n\r\n\t\t\tbaseValue.textContent = `${point.svMultiplier.toFixed(2)}x`;\r\n\t\t\tcontainer.classList.add(\"svPoint\");\r\n\r\n\t\t\tdocument.querySelector(\".timingPanel\").append(container);\r\n\t\t});\r\n\r\n\t\tdocument.querySelector(\".timings\").textContent =\r\n\t\t\t`timings (${Beatmap.mergedPoints.length})`;\r\n\t\t// document.querySelector(\".timings\").textContent = `timings (${Beatmap.beatStepsList.length})`;\r\n\t}\r\n\r\n\tstatic loadMetadata(lines) {\r\n\t\tconst getValue = (name) => {\r\n\t\t\treturn (\r\n\t\t\t\tlines\r\n\t\t\t\t\t.filter((line) => line.includes(`${name}:`))\r\n\t\t\t\t\t.at(0)\r\n\t\t\t\t\t?.replaceAll(`${name}:`, \"\") ?? \"\"\r\n\t\t\t);\r\n\t\t};\r\n\r\n\t\tconst artist = getValue(\"Artist\");\r\n\t\tconst artistUnicode = getValue(\"ArtistUnicode\");\r\n\t\tconst title = getValue(\"Title\");\r\n\t\tconst titleUnicode = getValue(\"TitleUnicode\");\r\n\t\tconst diff = getValue(\"Version\");\r\n\t\tconst source = getValue(\"Source\");\r\n\t\tconst tags = getValue(\"Tags\");\r\n\r\n\t\t// document.querySelector(\".meta-artist\").textContent = artistUnicode;\r\n\t\t// document.querySelector(\".meta-r-artist\").textContent = artist;\r\n\t\t// document.querySelector(\".meta-title\").textContent = titleUnicode;\r\n\t\t// document.querySelector(\".meta-r-title\").textContent = title;\r\n\t\t// document.querySelector(\".meta-diff\").textContent = diff;\r\n\t\t// document.querySelector(\".meta-source\").textContent = source;\r\n\t\t// document.querySelector(\".meta-tags\").textContent = tags;\r\n\r\n\t\tMetadataPanel.artist = artistUnicode;\r\n\t\tMetadataPanel.romanized_artist = artist;\r\n\t\tMetadataPanel.title = titleUnicode;\r\n\t\tMetadataPanel.romanized_title = title;\r\n\t\tMetadataPanel.difficulty_name = diff;\r\n\t\tMetadataPanel.source = source;\r\n\t\tMetadataPanel.tag = tags;\r\n\t}\r\n\r\n\tapplyStacking() {\r\n\t\tlet extendedEndIndex = this.objectsController.objectsList.length - 1;\r\n\t\tlet extendedStartIndex = 0;\r\n\t\tconst stackDistance = 3;\r\n\r\n\t\t// console.log(this.objectsController);\r\n\r\n\t\tfor (let i = extendedEndIndex; i > 0; i--) {\r\n\t\t\tlet n = i;\r\n\t\t\tlet currentObj = this.objectsController.objectsList[i];\r\n\r\n\t\t\tif (\r\n\t\t\t\tcurrentObj.obj.stackHeight != 0 ||\r\n\t\t\t\tcurrentObj.obj instanceof Spinner ||\r\n\t\t\t\tcurrentObj.obj.ILLEGAL\r\n\t\t\t)\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tif (currentObj.obj instanceof HitCircle) {\r\n\t\t\t\twhile (--n >= 0) {\r\n\t\t\t\t\tconst nObj = this.objectsController.objectsList[n];\r\n\t\t\t\t\tconst endTime = nObj.obj.endTime;\r\n\r\n\t\t\t\t\tif (currentObj.obj.time - endTime > Beatmap.stackThreshold) break;\r\n\t\t\t\t\tif (n < extendedStartIndex) {\r\n\t\t\t\t\t\tnObj.obj.stackHeight = 0;\r\n\t\t\t\t\t\textendedStartIndex = n;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// console.log(nObj.time);\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tnObj.obj instanceof Slider &&\r\n\t\t\t\t\t\tthis.calculateDistance(\r\n\t\t\t\t\t\t\t[nObj.obj.angleList.at(-1).x, nObj.obj.angleList.at(-1).y],\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\tparseInt(currentObj.obj.originalX),\r\n\t\t\t\t\t\t\t\tparseInt(currentObj.obj.originalY),\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t) < stackDistance\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tlet offset = currentObj.obj.stackHeight - nObj.obj.stackHeight + 1;\r\n\r\n\t\t\t\t\t\tfor (let j = n + 1; j <= i; j++) {\r\n\t\t\t\t\t\t\tconst jObj = this.objectsController.objectsList[j];\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthis.calculateDistance(\r\n\t\t\t\t\t\t\t\t\t[nObj.obj.angleList.at(-1).x, nObj.obj.angleList.at(-1).y],\r\n\t\t\t\t\t\t\t\t\tjObj.obj instanceof Slider\r\n\t\t\t\t\t\t\t\t\t\t? [jObj.obj.angleList.at(0).x, jObj.obj.angleList.at(0).y]\r\n\t\t\t\t\t\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t\t\t\t\t\tparseInt(jObj.obj.originalX),\r\n\t\t\t\t\t\t\t\t\t\t\t\tparseInt(jObj.obj.originalY),\r\n\t\t\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tjObj.obj.stackHeight -= offset;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.calculateDistance(\r\n\t\t\t\t\t\t\tnObj.obj instanceof Slider\r\n\t\t\t\t\t\t\t\t? [nObj.obj.angleList.at(0).x, nObj.obj.angleList.at(0).y]\r\n\t\t\t\t\t\t\t\t: [parseInt(nObj.obj.originalX), parseInt(nObj.obj.originalY)],\r\n\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\tparseInt(currentObj.obj.originalX),\r\n\t\t\t\t\t\t\t\tparseInt(currentObj.obj.originalY),\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t) < stackDistance\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tnObj.obj.stackHeight = currentObj.obj.stackHeight + 1;\r\n\t\t\t\t\t\tcurrentObj = nObj;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (currentObj.obj instanceof Slider) {\r\n\t\t\t\twhile (--n >= 0) {\r\n\t\t\t\t\t// console.log(currentObj);\r\n\t\t\t\t\tconst nObj = this.objectsController.objectsList[n];\r\n\t\t\t\t\t// console.log(nObj);\r\n\t\t\t\t\tif (currentObj.obj.time - nObj.obj.time > Beatmap.stackThreshold)\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthis.calculateDistance(\r\n\t\t\t\t\t\t\tnObj.obj instanceof Slider\r\n\t\t\t\t\t\t\t\t? [nObj.obj.angleList.at(-1).x, nObj.obj.angleList.at(-1).y]\r\n\t\t\t\t\t\t\t\t: [parseInt(nObj.obj.originalX), parseInt(nObj.obj.originalY)],\r\n\t\t\t\t\t\t\tcurrentObj.obj instanceof Slider\r\n\t\t\t\t\t\t\t\t? [\r\n\t\t\t\t\t\t\t\t\t\tcurrentObj.obj.angleList.at(0).x,\r\n\t\t\t\t\t\t\t\t\t\tcurrentObj.obj.angleList.at(0).y,\r\n\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t: [\r\n\t\t\t\t\t\t\t\t\t\tparseInt(currentObj.obj.originalX),\r\n\t\t\t\t\t\t\t\t\t\tparseInt(currentObj.obj.originalY),\r\n\t\t\t\t\t\t\t\t\t],\r\n\t\t\t\t\t\t) < stackDistance\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tnObj.obj.stackHeight = currentObj.obj.stackHeight + 1;\r\n\t\t\t\t\t\tcurrentObj = nObj;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconstructor(rawBeatmap, delay) {\r\n\t\tBeatmap.hasILLEGAL = false;\r\n\r\n\t\tBeatmap.COLORS = Skinning.DEFAULT_COLORS;\r\n\t\tBeatmap.loadMetadata(rawBeatmap.split(\"\\n\"));\r\n\t\t// Get Approach Rate\r\n\t\tif (\r\n\t\t\trawBeatmap.split(\"\\n\").filter((line) => line.includes(\"ApproachRate:\"))\r\n\t\t\t\t.length === 0\r\n\t\t) {\r\n\t\t\tBeatmap.stats.approachRate = parseFloat(\r\n\t\t\t\trawBeatmap\r\n\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t.filter((line) => line.includes(\"OverallDifficulty:\"))\r\n\t\t\t\t\t.at(0)\r\n\t\t\t\t\t.replaceAll(\"OverallDifficulty:\", \"\"),\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tBeatmap.stats.approachRate = parseFloat(\r\n\t\t\t\trawBeatmap\r\n\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t.filter((line) => line.includes(\"ApproachRate:\"))\r\n\t\t\t\t\t.at(0)\r\n\t\t\t\t\t.replaceAll(\"ApproachRate:\", \"\"),\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\t// Get Circle Size\r\n\t\tBeatmap.stats.circleSize = parseFloat(\r\n\t\t\trawBeatmap\r\n\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t.filter((line) => line.includes(\"CircleSize:\"))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t.replaceAll(\"CircleSize:\", \"\"),\r\n\t\t);\r\n\r\n\t\t// Get Circle Size\r\n\t\tBeatmap.stats.HPDrainRate = parseFloat(\r\n\t\t\trawBeatmap\r\n\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t.filter((line) => line.includes(\"HPDrainRate:\"))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t.replaceAll(\"HPDrainRate:\", \"\"),\r\n\t\t);\r\n\r\n\t\t// Get Stack Leniency\r\n\t\tBeatmap.stats.stackLeniency = rawBeatmap.includes(\"StackLeniency: \")\r\n\t\t\t? parseFloat(\r\n\t\t\t\t\trawBeatmap\r\n\t\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t\t.filter((line) => line.includes(\"StackLeniency: \"))\r\n\t\t\t\t\t\t.at(0)\r\n\t\t\t\t\t\t.replaceAll(\"StackLeniency: \", \"\"),\r\n\t\t\t\t)\r\n\t\t\t: 0.7;\r\n\r\n\t\t// Get Stack Leniency\r\n\t\tBeatmap.SAMPLE_SET = rawBeatmap.includes(\"SampleSet: \")\r\n\t\t\t? rawBeatmap\r\n\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t.filter((line) => line.includes(\"SampleSet: \"))\r\n\t\t\t\t\t.at(0)\r\n\t\t\t\t\t.replaceAll(\"SampleSet: \", \"\")\r\n\t\t\t: \"Normal\";\r\n\r\n\t\t// Get Slider Tick Rate\r\n\t\tBeatmap.stats.sliderTickRate = parseFloat(\r\n\t\t\trawBeatmap\r\n\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t.filter((line) => line.includes(\"SliderTickRate:\"))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t.replaceAll(\"SliderTickRate:\", \"\"),\r\n\t\t);\r\n\r\n\t\t// Get Overall Difficulty\r\n\t\tBeatmap.stats.overallDifficulty = parseFloat(\r\n\t\t\trawBeatmap\r\n\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t.filter((line) => line.includes(\"OverallDifficulty:\"))\r\n\t\t\t\t.at(0)\r\n\t\t\t\t.replaceAll(\"OverallDifficulty:\", \"\"),\r\n\t\t);\r\n\r\n\t\tconst HRMultiplier = !Game.MODS.HR ? 1 : 1.3;\r\n\t\tconst EZMultiplier = !Game.MODS.EZ ? 1 : 0.5;\r\n\r\n\t\tBeatmap.hitWindows = {\r\n\t\t\tGREAT: Math.floor(\r\n\t\t\t\t80 -\r\n\t\t\t\t\t6 *\r\n\t\t\t\t\t\tClamp(\r\n\t\t\t\t\t\t\tBeatmap.stats.overallDifficulty * HRMultiplier * EZMultiplier,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t10,\r\n\t\t\t\t\t\t),\r\n\t\t\t),\r\n\t\t\tOK: Math.floor(\r\n\t\t\t\t140 -\r\n\t\t\t\t\t8 *\r\n\t\t\t\t\t\tClamp(\r\n\t\t\t\t\t\t\tBeatmap.stats.overallDifficulty * HRMultiplier * EZMultiplier,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t10,\r\n\t\t\t\t\t\t),\r\n\t\t\t),\r\n\t\t\tMEH: Math.floor(\r\n\t\t\t\t200 -\r\n\t\t\t\t\t10 *\r\n\t\t\t\t\t\tClamp(\r\n\t\t\t\t\t\t\tBeatmap.stats.overallDifficulty * HRMultiplier * EZMultiplier,\r\n\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t10,\r\n\t\t\t\t\t\t),\r\n\t\t\t),\r\n\t\t};\r\n\r\n\t\tBeatmap.stats.circleDiameter =\r\n\t\t\t(2 * (54.4 - 4.48 * Beatmap.stats.circleSize) * 236) / 256;\r\n\r\n\t\tBeatmap.stackThreshold =\r\n\t\t\tBeatmap.stats.preempt * Beatmap.stats.stackLeniency;\r\n\r\n\t\tconst difficultyPosition =\r\n\t\t\trawBeatmap.indexOf(\"[Difficulty]\") + \"[Difficulty]\\n\".length;\r\n\t\tconst timingPosition =\r\n\t\t\trawBeatmap.indexOf(\"[TimingPoints]\") + \"[TimingPoints]\\n\".length;\r\n\t\tconst colourPosition =\r\n\t\t\trawBeatmap.indexOf(\"[Colours]\") + \"[Colours]\\n\".length;\r\n\t\tconst hitObjectsPosition =\r\n\t\t\trawBeatmap.indexOf(\"[HitObjects]\") + \"[HitObjects]\\n\".length;\r\n\r\n\t\tconst initialSliderVelocity =\r\n\t\t\tparseFloat(\r\n\t\t\t\trawBeatmap\r\n\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t.find(line => /^SliderMultiplier:/g.test(line))\r\n\t\t\t\t\t.replace(\"SliderMultiplier:\", \"\")\r\n\t\t\t) * 100;\r\n\t\t// console.log(difficultyPosition, initialSliderVelocity, rawBeatmap);\r\n\t\tconst beatStepsList = rawBeatmap\r\n\t\t\t.slice(\r\n\t\t\t\ttimingPosition,\r\n\t\t\t\trawBeatmap.indexOf(\"[Colours]\") !== -1\r\n\t\t\t\t\t? colourPosition - \"[Colours]\\n\".length\r\n\t\t\t\t\t: hitObjectsPosition - \"[HitObjects]\\n\".length,\r\n\t\t\t)\r\n\t\t\t.split(\"\\n\")\r\n\t\t\t.filter((timingPoint) => {\r\n\t\t\t\tconst params = timingPoint.split(\",\");\r\n\t\t\t\treturn timingPoint !== \"\" && params[1] > 0;\r\n\t\t\t})\r\n\t\t\t.map((timingPoint) => {\r\n\t\t\t\tconst params = timingPoint.split(\",\");\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttime: parseInt(params[0]),\r\n\t\t\t\t\tbeatstep: parseFloat(params[1]),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\tBeatmap.beatStepsList = beatStepsList;\r\n\r\n\t\tconst timingPointsList = rawBeatmap\r\n\t\t\t.slice(\r\n\t\t\t\ttimingPosition,\r\n\t\t\t\trawBeatmap.indexOf(\"[Colours]\") !== -1\r\n\t\t\t\t\t? colourPosition - \"[Colours]\\n\".length\r\n\t\t\t\t\t: hitObjectsPosition - \"[HitObjects]\\n\".length,\r\n\t\t\t)\r\n\t\t\t.split(\"\\n\")\r\n\t\t\t.filter((timingPoint) => timingPoint !== \"\")\r\n\t\t\t.map((timingPoint) => {\r\n\t\t\t\tconst params = timingPoint.split(\",\");\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttime: parseInt(params[0]),\r\n\t\t\t\t\tbeatstep:\r\n\t\t\t\t\t\tparseFloat(params[1]) > 0 ? parseFloat(params[1]) : undefined,\r\n\t\t\t\t\tsvMultiplier:\r\n\t\t\t\t\t\tparseFloat(params[1]) > 0\r\n\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t: parseFloat(((-1 / params[1]) * 100).toFixed(2)),\r\n\t\t\t\t\tsampleSet: parseInt(params[3] ?? \"0\"),\r\n\t\t\t\t\tsampleIdx: parseInt(params[4] ?? \"0\"),\r\n\t\t\t\t\tsampleVol: parseInt(params[5] ?? \"100\"),\r\n\t\t\t\t\tisKiai: parseInt(params[7] ?? 0) === 0 ? false : true,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\r\n\t\tBeatmap.timingPointsList = timingPointsList;\r\n\t\ttimingPointsList.forEach((greenLine, idx) => {\r\n\t\t\tconst graphic = new GreenLineInfo(greenLine);\r\n\t\t\tTimeline.beatLines.greenLines.push(graphic);\r\n\t\t});\r\n\r\n\t\tBeatmap.kiaiList = timingPointsList.filter((point, idx) => {\r\n\t\t\tif (\r\n\t\t\t\tpoint.isKiai &&\r\n\t\t\t\t(!timingPointsList[idx - 1] || !timingPointsList[idx - 1].isKiai)\r\n\t\t\t)\r\n\t\t\t\treturn true;\r\n\t\t\tif (!point.isKiai && timingPointsList[idx - 1]?.isKiai) return true;\r\n\t\t\tif (point.isKiai && idx === timingPointsList.length - 1) return true;\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\t\t// console.log(Beatmap.kiaiList);\r\n\r\n\t\tBeatmap.mergedPoints = [\r\n\t\t\t...Beatmap.beatStepsList,\r\n\t\t\t...Beatmap.timingPointsList,\r\n\t\t].sort((a, b) => {\r\n\t\t\tif (a.time < b.time) return -1;\r\n\t\t\tif (a.time > b.time) return 1;\r\n\t\t\tif (a.beatstep) return 1;\r\n\t\t\tif (b.beatstep) return -1;\r\n\t\t\treturn 0;\r\n\t\t});\r\n\r\n\t\t// Beatmap.loadProgressBar();\r\n\t\tProgressBar.initTimingPoints();\r\n\t\tTimingPanel.initTimingPoints();\r\n\t\t// Beatmap.loadTimingPoints();\r\n\r\n\t\t// console.log(beatStepsList, timingPointsList);\r\n\t\tlet coloursList =\r\n\t\t\trawBeatmap.indexOf(\"[Colours]\") !== -1\r\n\t\t\t\t? rawBeatmap\r\n\t\t\t\t\t\t.slice(\r\n\t\t\t\t\t\t\tcolourPosition,\r\n\t\t\t\t\t\t\thitObjectsPosition - \"[HitObjects]\\n\".length,\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.split(\"\\n\")\r\n\t\t\t\t\t\t.filter((line) => line !== \"\" && line.match(/Combo[0-9]+\\s:\\s/g))\r\n\t\t\t\t\t\t.map(\r\n\t\t\t\t\t\t\t(colour) =>\r\n\t\t\t\t\t\t\t\t`rgb(${colour.replaceAll(colour.match(/Combo[0-9]+\\s:\\s/g)[0], \"\")})`,\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t.map((colour) =>\r\n\t\t\t\t\t\t\tparseInt(\r\n\t\t\t\t\t\t\t\tcolour\r\n\t\t\t\t\t\t\t\t\t.replaceAll(\"rgb(\", \"\")\r\n\t\t\t\t\t\t\t\t\t.replaceAll(\")\", \"\")\r\n\t\t\t\t\t\t\t\t\t.split(\",\")\r\n\t\t\t\t\t\t\t\t\t.map((val) => parseInt(val).toString(16).padStart(2, \"0\"))\r\n\t\t\t\t\t\t\t\t\t.join(\"\"),\r\n\t\t\t\t\t\t\t\t16,\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t)\r\n\t\t\t\t: [];\r\n\r\n\t\tif (coloursList.length === 0) coloursList = Skinning.DEFAULT_COLORS;\r\n\r\n\t\tBeatmap.COLORS = Skinning.DEFAULT_COLORS;\r\n\t\tBeatmap.COLORS = coloursList;\r\n\t\t// console.log(coloursList);\r\n\r\n\t\tconst breakPeriods = rawBeatmap\r\n\t\t\t.split(\"\\n\")\r\n\t\t\t.filter((line) => /^2,[0-9]+,[0-9]+$/g.test(line))\r\n\t\t\t.map((line) =>\r\n\t\t\t\tline\r\n\t\t\t\t\t.split(\",\")\r\n\t\t\t\t\t.slice(1)\r\n\t\t\t\t\t.map((time) => parseInt(time)),\r\n\t\t\t);\r\n\t\t// console.log(breakPeriods);\r\n\t\tBeatmap.breakPeriods = breakPeriods;\r\n\t\tProgressBar.initBreakKiai();\r\n\r\n\t\tlet objectLists = rawBeatmap\r\n\t\t\t.slice(hitObjectsPosition)\r\n\t\t\t.split(\"\\n\")\r\n\t\t\t.filter((s) => s !== \"\");\r\n\r\n\t\tlet combo = 1;\r\n\t\tlet colorIdx = 1;\r\n\t\tlet colorHaxedIdx = 1;\r\n\r\n\t\tlet start = performance.now();\r\n\t\tconst parsedHitObjects = objectLists\r\n\t\t\t.map((object, idx) => {\r\n\t\t\t\tconst params = object.split(\",\");\r\n\t\t\t\tconst time = parseInt(params[2]);\r\n\t\t\t\tlet currentSVMultiplier = Beatmap.findNearestTimingPoint(\r\n\t\t\t\t\ttime,\r\n\t\t\t\t\t\"timingPointsList\",\r\n\t\t\t\t);\r\n\r\n\t\t\t\tlet returnObject;\r\n\t\t\t\tlet timelineObject = null;\r\n\r\n\t\t\t\tconst typeBit = parseInt(params[3])\r\n\t\t\t\t\t.toString(2)\r\n\t\t\t\t\t.padStart(8, \"0\")\r\n\t\t\t\t\t.split(\"\")\r\n\t\t\t\t\t.reverse()\r\n\t\t\t\t\t.map((bit) => (bit === \"1\" ? true : false));\r\n\t\t\t\tconst colorHax = parseInt(\r\n\t\t\t\t\tparseInt(params[3])\r\n\t\t\t\t\t\t.toString(2)\r\n\t\t\t\t\t\t.padStart(8, \"0\")\r\n\t\t\t\t\t\t.split(\"\")\r\n\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t.slice(4, 7)\r\n\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t.join(\"\"),\r\n\t\t\t\t\t2,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (typeBit[0]) {\r\n\t\t\t\t\treturnObject = Beatmap.constructHitCircle(\r\n\t\t\t\t\t\tparams,\r\n\t\t\t\t\t\tcurrentSVMultiplier,\r\n\t\t\t\t\t);\r\n\t\t\t\t\ttimelineObject = new TimelineHitCircle(returnObject.obj);\r\n\t\t\t\t}\r\n\t\t\t\tif (typeBit[1]) {\r\n\t\t\t\t\treturnObject = Beatmap.constructSlider(\r\n\t\t\t\t\t\tparams,\r\n\t\t\t\t\t\ttimingPointsList,\r\n\t\t\t\t\t\tbeatStepsList,\r\n\t\t\t\t\t\tinitialSliderVelocity,\r\n\t\t\t\t\t\tobject,\r\n\t\t\t\t\t);\r\n\t\t\t\t\ttimelineObject = new TimelineSlider(returnObject.obj);\r\n\t\t\t\t}\r\n\t\t\t\tif (typeBit[3]) {\r\n\t\t\t\t\treturnObject = Beatmap.constructSpinner(params, currentSVMultiplier);\r\n\t\t\t\t\ttimelineObject = new TimelineSlider(returnObject.obj);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (typeBit[2] && idx !== 0) {\r\n\t\t\t\t\tcombo = 1;\r\n\t\t\t\t\tcolorIdx++;\r\n\t\t\t\t\tcolorHaxedIdx++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (colorHax !== 0 && typeBit[2]) {\r\n\t\t\t\t\tcolorHaxedIdx += colorHax;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturnObject.obj.comboIdx = combo;\r\n\t\t\t\treturnObject.obj.colourIdx = colorIdx;\r\n\t\t\t\treturnObject.obj.colourHaxedIdx = colorHaxedIdx;\r\n\r\n\t\t\t\tif (returnObject.obj instanceof Slider) {\r\n\t\t\t\t\treturnObject.obj.hitCircle.comboIdx = combo;\r\n\t\t\t\t\treturnObject.obj.hitCircle.colourIdx = colorIdx;\r\n\t\t\t\t\treturnObject.obj.hitCircle.colourHaxedIdx = colorHaxedIdx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (returnObject.obj instanceof Spinner) {\r\n\t\t\t\t\treturnObject.obj.comboIdx = 1;\r\n\t\t\t\t\treturnObject.obj.colourIdx = -1;\r\n\t\t\t\t\treturnObject.obj.colourHaxedIdx = -1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcombo++;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...returnObject,\r\n\t\t\t\t\ttimelineObject,\r\n\t\t\t\t};\r\n\t\t\t})\r\n\t\t\t.filter((o) => o);\r\n\t\tconsole.log(\r\n\t\t\t`Took: ${performance.now() - start}ms to finish objects construction.`,\r\n\t\t);\r\n\r\n\t\tthis.objectsController = new ObjectsController(\r\n\t\t\tparsedHitObjects,\r\n\t\t\tcoloursList,\r\n\t\t\tbreakPeriods,\r\n\t\t);\r\n\t\t// console.log(Game.WORKER)\r\n\t\t// Ported from Lazer\r\n\t\tBeatmap.updateStats();\r\n\t\tBeatmap.updateModdedStats();\r\n\r\n\t\tthis.applyStacking();\r\n\r\n\t\tthis.objectsController.objectsList.forEach((object, idx, arr) => {\r\n\t\t\t// Timeline.hitArea.obj.addChildAt(object.timelineObject.obj, 0);\r\n\r\n\t\t\t// Game.CONTAINER.addChild(object.obj.obj);\r\n\t\t\t// if (object.obj.approachCircleObj) {\r\n\t\t\t//     Game.CONTAINER.addChild(object.obj.approachCircleObj.obj);\r\n\t\t\t// }\r\n\r\n\t\t\tif (idx === this.objectsController.objectsList.length - 1) return;\r\n\t\t\tif (arr[idx + 1].obj.comboIdx === 1) return;\r\n\t\t\tif (object.obj instanceof Spinner) return;\r\n\r\n\t\t\tobject.obj.followPoint = new FollowPoint({\r\n\t\t\t\tstartObj: object.obj,\r\n\t\t\t\tendObj: arr[idx + 1].obj,\r\n\t\t\t});\r\n\r\n\t\t\t// Game.CONTAINER.addChild(object.obj.followPoint.container);\r\n\t\t});\r\n\r\n\t\tthis.objectsController.slidersList.forEach((o) => {\r\n\t\t\to.obj.hitCircle.stackHeight = o.obj.stackHeight;\r\n\t\t});\r\n\r\n\t\tGame.WORKER.postMessage({\r\n\t\t\ttype: \"objects\",\r\n\t\t\tobjects: parsedHitObjects.map((obj, idx) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tidx,\r\n\t\t\t\t\ttime: obj.obj.time,\r\n\t\t\t\t\tendTime: obj.obj.endTime,\r\n\t\t\t\t\tstartTime: obj.obj.startTime,\r\n\t\t\t\t\tkillTime: obj.obj.killTime,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t});\r\n\r\n\t\tconst drainTime =\r\n\t\t\t(this.objectsController.objectsList.at(-1).obj.time -\r\n\t\t\t\t(breakPeriods.reduce(\r\n\t\t\t\t\t(accumulated, curr) => accumulated + (curr[1] - curr[0]),\r\n\t\t\t\t\t0,\r\n\t\t\t\t) +\r\n\t\t\t\t\tthis.objectsController.objectsList.at(0).obj.time)) /\r\n\t\t\t1000;\r\n\r\n\t\tBeatmap.difficultyMultiplier = Math.round(\r\n\t\t\t((Beatmap.stats.HPDrainRate +\r\n\t\t\t\tBeatmap.stats.circleSize +\r\n\t\t\t\tBeatmap.stats.overallDifficulty +\r\n\t\t\t\tClamp(\r\n\t\t\t\t\t(this.objectsController.objectsList.length / drainTime) * 8,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\t16,\r\n\t\t\t\t)) /\r\n\t\t\t\t38) *\r\n\t\t\t\t5,\r\n\t\t);\r\n\r\n\t\tif (Beatmap.hasILLEGAL) {\r\n\t\t\tnew Notification({\r\n\t\t\t\tmessage:\r\n\t\t\t\t\t\"This beatmap contains illegal hitobjects. Therefore, Timeline will be disabled for this map\",\r\n\t\t\t\ttype: \"warning\",\r\n\t\t\t\tautoTimeout: false,\r\n\t\t\t}).notify();\r\n\t\t}\r\n\t}\r\n\r\n\tcalculateDistance(vec1, vec2) {\r\n\t\tconst xDistance = vec1[0] - vec2[0];\r\n\t\tconst yDistance = vec1[1] - vec2[1];\r\n\t\treturn Math.sqrt(xDistance ** 2 + yDistance ** 2);\r\n\t}\r\n\r\n\trender() {\r\n\t\tthis.objectsController.render();\r\n\t}\r\n}\r\n","import { easeOutSine, easeOutQuint, Clamp } from \"./Utils.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport { Beatmap } from \"./Beatmap.js\";\r\nimport * as PIXI from \"pixi.js\";\r\n\r\nexport class Judgement {\r\n    val;\r\n    pos;\r\n    stackHeight;\r\n    time;\r\n\r\n    disablePerfect = null;\r\n\r\n    static FADE_OUT_DURATION = 100;\r\n    static ANIM_DURATION = 800;\r\n\r\n    obj;\r\n    text;\r\n\r\n    static judge = {\r\n        300: {\r\n            text: \"GREAT\",\r\n            color: 0x6cb3e6,\r\n        },\r\n        100: {\r\n            text: \"OK\",\r\n            color: 0x6ce083,\r\n        },\r\n        50: {\r\n            text: \"MEH\",\r\n            color: 0xd6d669,\r\n        },\r\n        0: {\r\n            text: \"MISSED\",\r\n            color: 0xf54949,\r\n        },\r\n    };\r\n\r\n    constructor(time, val, stackHeight, pos) {\r\n        this.time = time;\r\n        this.val = val;\r\n        this.pos = pos;\r\n        this.stackHeight = stackHeight;\r\n\r\n        const text = new PIXI.Text({\r\n            text: `${Judgement.judge[val].text}`,\r\n            style: {\r\n                fontFamily: \"Torus\",\r\n                fontSize: 10,\r\n                fontWeight: 500,\r\n                fill: Judgement.judge[val].color,\r\n                align: \"center\",\r\n                letterSpacing: 4,\r\n            },\r\n        });\r\n        text.anchor.set(0.5);\r\n\r\n        const judgementContainer = new PIXI.Container();\r\n        judgementContainer.addChild(text);\r\n\r\n        this.obj = judgementContainer;\r\n        this.text = text;\r\n\r\n        // const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n        // const x = ((this.pos.x + this.stackHeight * currentStackOffset) * Game.WIDTH) / 512;\r\n        // const y = !Game.MODS.HR\r\n        //     ? ((this.pos.y + this.stackHeight * currentStackOffset) * Game.WIDTH) / 512\r\n        //     : ((384 - this.pos.y + this.stackHeight * currentStackOffset) * Game.WIDTH) / 512;\r\n\r\n        // this.obj.x = x;\r\n        // this.obj.y = y;\r\n        this.obj.alpha = 0;\r\n    }\r\n\r\n    draw(timestamp) {\r\n        // if (this.val === 300)\r\n        //     return;\r\n\r\n        // const currentStackOffset = Beatmap.moddedStats.stackOffset;\r\n\r\n        // const x = ((this.pos.x + this.stackHeight * currentStackOffset) * Game.WIDTH) / 512;\r\n        // const y = !Game.MODS.HR\r\n        //     ? ((this.pos.y + this.stackHeight * currentStackOffset) * Game.WIDTH) / 512\r\n        //     : ((384 - this.pos.y + this.stackHeight * currentStackOffset) * Game.WIDTH) / 512;\r\n\r\n        // if (this.obj.x !== x) this.obj.x = x;\r\n        // if (this.obj.y !== y) this.obj.y = y;\r\n\r\n        if (this.val === 300 && this.disablePerfect !== Game.SLIDER_APPEARANCE.disablePerfect) {\r\n            this.disablePerfect = Game.SLIDER_APPEARANCE.disablePerfect;\r\n\r\n            if (this.disablePerfect) {\r\n                this.obj.visible = false;\r\n                return;\r\n            }\r\n\r\n            this.obj.visible = true;\r\n        }\r\n\r\n        if (timestamp < this.time || timestamp >= this.time + Judgement.ANIM_DURATION) {\r\n            this.obj.alpha = 0;\r\n            return;\r\n        }\r\n\r\n        const t = Clamp((timestamp - this.time) / Judgement.ANIM_DURATION, 0, 1);\r\n\r\n        if (this.val !== 0) {\r\n            const scale = 1 + 0.4 * easeOutQuint(Clamp((timestamp - this.time) / 800, 0, 1));\r\n            // const spacing = 4 + 1 * easeOutQuint(t);\r\n            const alpha = 1 - t ** 5;\r\n\r\n            this.obj.scale.set(scale);\r\n            this.obj.alpha = alpha;\r\n            // this.text.style.letterSpacing = spacing;\r\n        }\r\n\r\n        if (this.val === 0) {\r\n            const scale = 1.6 - 0.6 * easeOutSine(Clamp((timestamp - this.time) / 100, 0, 1));\r\n            // const spacing = 4 + 1 * easeOutQuint(t);\r\n            const alpha = 1 - t ** 5;\r\n\r\n            this.obj.scale.set(scale);\r\n            this.obj.alpha = alpha;\r\n\r\n            this.text.y = 100 * t ** 5;\r\n            this.text.angle = 40 * t ** 5;\r\n            // this.text.style.letterSpacing = spacing;\r\n        }\r\n\r\n        // if (this.time === 4715)\r\n        //     console.log(t, alpha);\r\n    }\r\n}\r\n","import { ObjectsController } from \"./HitObjects/ObjectsController.js\";\r\nimport { BeatmapFile } from \"./BeatmapFile.js\";\r\nimport { Skinning } from \"./Skinning.js\";\r\nimport { ScoreParser } from \"./ScoreParser.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport { createDifficultyElement } from \"./Utils.js\";\r\nimport osuPerformance from \"../lib/osujs.js\";\r\n\r\ndocument.querySelector(\"#mapInput\").onkeydown = mapInputEnter;\r\nfunction mapInputEnter(e) {\r\n    if (e.key === \"Enter\") {\r\n        submitMap(false);\r\n        document.querySelector(\"#mapInput\").blur();\r\n    }\r\n}\r\n\r\ndocument.querySelector(\"#map-dropper\").onchange = () => {\r\n    const file = document.querySelector(\"#map-dropper\").files[0];\r\n    if (![\"osz\", \"osr\", \"osk\"].includes(file.name.split(\".\").at(-1))) return;\r\n\r\n    ScoreParser.reset();\r\n\r\n    if (file.name.split(\".\").at(-1) === \"osr\") {\r\n        const parser = new ScoreParser(file);\r\n        parser.getReplayData();\r\n        return;\r\n    }\r\n\r\n    if (file.name.split(\".\").at(-1) === \"osk\") {\r\n        Skinning.import(file);\r\n        return;\r\n    }\r\n\r\n    document.querySelector(\"#close\").disabled = true;\r\n    readZip(file);\r\n};\r\n\r\ndocument.querySelector(\"#choose-diff\").onclick = () => {\r\n    document.querySelector(\".difficultySelector\").style.display = \"block\";\r\n};\r\n\r\ndocument.querySelector(\"#close\").onclick = () => {\r\n    document.querySelector(\".difficultySelector\").style.display = \"none\";\r\n};\r\n\r\nexport function loadDiff() {\r\n    Game.DIFF_FILE_NAME = this.dataset.filename;\r\n    document.querySelector(\".difficultySelector\").style.display = \"none\";\r\n\r\n    submitMap(true);\r\n}\r\n\r\nexport async function readZip(file) {\r\n    Game.DROP_BLOB = null;\r\n    Game.DIFF_FILE_NAME = \"\";\r\n\r\n    const mapFileBlob = file;\r\n    const mapFileBlobReader = new zip.BlobReader(mapFileBlob);\r\n    const zipReader = new zip.ZipReader(mapFileBlobReader);\r\n    const allEntries = await zipReader.getEntries();\r\n\r\n    const diffList = document.querySelector(\".difficultyList\");\r\n    diffList.innerHTML = \"\";\r\n    document.querySelector(\".difficultySelector\").style.display = \"block\";\r\n\r\n    const diffs = [];\r\n\r\n    for (const content of allEntries) {\r\n        if (content.filename.split(\".\").at(-1) !== \"osu\") continue;\r\n        const blob = await content.getData(new zip.BlobWriter(\"text/plain\"));\r\n        const rawFile = await blob.text();\r\n\r\n        const mode = rawFile\r\n            .split(\"\\n\")\r\n            .filter((line) => /Mode:\\s[0-9]+/g.test(line))\r\n            .at(0)\r\n            ?.replace(\"Mode: \", \"\");\r\n        if (parseInt(mode) !== 0) continue;\r\n\r\n        const builderOptions = {\r\n            addStacking: true,\r\n            mods: [],\r\n        };\r\n        const blueprintData = osuPerformance.parseBlueprint(rawFile);\r\n        const beatmapData = osuPerformance.buildBeatmap(blueprintData, builderOptions);\r\n        const difficultyAttributes = osuPerformance.calculateDifficultyAttributes(beatmapData, true)[0];\r\n\r\n        const diffName = rawFile\r\n            .split(\"\\n\")\r\n            .filter((line) => /Version:.+/g.test(line))\r\n            .at(0)\r\n            ?.replace(\"Version:\", \"\");\r\n\r\n        const ele = createDifficultyElement({\r\n            name: diffName,\r\n            fileName: content.filename,\r\n            starRating: difficultyAttributes?.starRating ?? 0,\r\n        });\r\n\r\n        diffs.push(ele);\r\n    }\r\n\r\n    diffs.sort((a, b) => {\r\n        return -a.starRating + b.starRating;\r\n    });\r\n\r\n    for (const obj of diffs) diffList.appendChild(obj.ele);\r\n\r\n    Game.DROP_BLOB = file;\r\n    zipReader.close();\r\n}\r\n\r\nasync function readCustom(url) {\r\n    const blob = await BeatmapFile.downloadCustom(url);\r\n    // console.log(blob);\r\n    readZip(blob);\r\n}\r\n\r\nexport function submitMap(isDragAndDrop, beatmapID) {\r\n    window.cancelAnimationFrame(ObjectsController.requestID);\r\n\r\n    const inputValue = beatmapID ?? document.querySelector(\"#mapInput\").value.trim();\r\n\r\n    if (\r\n        !isDragAndDrop &&\r\n        /[(http(s)?):\\/\\/(www\\.)?a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/gi.test(inputValue) &&\r\n        !/^https:\\/\\/osu\\.ppy\\.sh\\/(beatmapsets\\/[0-9]+\\#osu\\/[0-9]+|b\\/[0-9]+)|[0-9]+$/.test(inputValue)\r\n    ) {\r\n        readCustom(inputValue);\r\n        // console.log(\"callin\")\r\n        return;\r\n    }\r\n\r\n    if (!isDragAndDrop && !/^https:\\/\\/osu\\.ppy\\.sh\\/(beatmapsets\\/[0-9]+\\#osu\\/[0-9]+|b\\/[0-9]+)|[0-9]+$/.test(inputValue)) {\r\n        document.querySelector(\"#mapInput\").value = \"\";\r\n        alert(\"This is not a valid URL or Beatmap ID\");\r\n        return;\r\n    }\r\n\r\n    // if (document.querySelector(\"audio\")) {\r\n    //     document.querySelector(\"audio\").pause();\r\n    //     document.body.removeChild(document.querySelector(\"audio\"));\r\n    // }\r\n\r\n    const bID = inputValue.split(\"/\").at(-1);\r\n\r\n    if (Game.BEATMAP_FILE !== undefined) {\r\n        Game.BEATMAP_FILE.audioNode?.pause();\r\n    }\r\n\r\n    const origin = window.location.origin;\r\n\r\n    if (!isDragAndDrop) window.history.pushState({}, \"JoSu!\", `${origin}${!origin.includes(\"github.io\") ? \"\" : \"/beatmap-viewer-web\"}/?b=${bID}`);\r\n\r\n    Game.BEATMAP_FILE = undefined;\r\n    Game.BEATMAP_FILE = new BeatmapFile(bID ?? -1, isDragAndDrop);\r\n\r\n    document.querySelector(\"#mapInput\").value = !isDragAndDrop ? bID : \"\";\r\n}\r\n\r\ndocument.querySelector(\"#submit\").addEventListener(\"click\", () => {\r\n    document.querySelector(\"#submit\").blur();\r\n    ScoreParser.reset();\r\n    submitMap(false);\r\n});\r\n","import { Judgement } from \"./Judgement.js\";\r\nimport { Game } from \"./Game.js\";\r\nimport { Replay } from \"../lib/osr-parser.js\";\r\nimport { submitMap } from \"./InputBar.js\";\r\nimport { ApplyModsToTime } from \"./Utils.js\";\r\nimport { Spinner } from \"./HitObjects/Spinner.js\";\r\nimport { HitCircle } from \"./HitObjects/HitCircle.js\";\r\nimport { Slider } from \"./HitObjects/Slider.js\";\r\nimport { Beatmap } from \"./Beatmap.js\";\r\nimport { calculateCurrentSR } from \"./Settings.js\";\r\nimport { Fixed } from \"./Utils.js\";\r\nimport axios from \"axios\";\r\nimport { User } from \"./User.js\";\r\n\r\nexport class ScoreParser {\r\n\tstatic BLOB;\r\n\tstatic REPLAY_DATA;\r\n\tstatic CURSOR_DATA;\r\n\tstatic MODS;\r\n\tstatic IS_OLD_VER;\r\n\tstatic EVAL_LIST = [];\r\n\tstatic MOD_MULTIPLIER;\r\n\r\n\tstatic maxCombo = 0;\r\n\tstatic comboPortion = 0;\r\n\tstatic maxComboPortion = 0;\r\n\r\n\tstatic INPUT_LIST = [\"SMOKE\", \"K2\", \"K1\", \"M2\", \"M1\"];\r\n\tstatic MOD_LIST = [\r\n\t\t\"NoFail\",\r\n\t\t\"Easy\",\r\n\t\t\"TouchDevice\",\r\n\t\t\"Hidden\",\r\n\t\t\"HardRock\",\r\n\t\t\"SuddenDeath\",\r\n\t\t\"DoubleTime\",\r\n\t\t\"Relax\",\r\n\t\t\"HalfTime\",\r\n\t\t\"Nightcore\",\r\n\t\t\"Flashlight\",\r\n\t\t\"Autoplay\",\r\n\t\t\"SpunOut\",\r\n\t\t\"Autopilot\",\r\n\t\t\"Perfect\",\r\n\t\t\"Key4\",\r\n\t\t\"Key5\",\r\n\t\t\"Key6\",\r\n\t\t\"Key7\",\r\n\t\t\"Key8\",\r\n\t\t\"FadeIn\",\r\n\t\t\"Random\",\r\n\t\t\"Cinema\",\r\n\t\t\"Target\",\r\n\t\t\"Key9\",\r\n\t\t\"KeyCoop\",\r\n\t\t\"Key1\",\r\n\t\t\"Key3\",\r\n\t\t\"Key2\",\r\n\t\t\"ScoreV2\",\r\n\t\t\"Mirror\",\r\n\t];\r\n\r\n\tstatic modsMultiplierList = {\r\n\t\tV1: {\r\n\t\t\tNoFail: 0.5,\r\n\t\t\tEasy: 0.5,\r\n\t\t\tHalfTime: 0.3,\r\n\t\t\tHardRock: 1.06,\r\n\t\t\tHidden: 1.06,\r\n\t\t\tDoubleTime: 1.12,\r\n\t\t\tFlashlight: 1.12,\r\n\t\t},\r\n\t\tV2: {\r\n\t\t\tNoFail: 1,\r\n\t\t\tEasy: 0.5,\r\n\t\t\tHalfTime: 0.3,\r\n\t\t\tHardRock: 1.1,\r\n\t\t\tHidden: 1.06,\r\n\t\t\tDoubleTime: 1.2,\r\n\t\t\tFlashlight: 1.12,\r\n\t\t},\r\n\t};\r\n\r\n\tasync getMapData(md5) {\r\n\t\treturn (await axios.get(`https://preview.tryz.id.vn/api/h/${md5}`)).data;\r\n\t}\r\n\r\n\tgetIsOldVersion(version) {\r\n\t\tlet versionString = version.toString();\r\n\t\tconst year = parseInt(versionString.match(/.{1,4}/g)?.[0] ?? \"0\");\r\n\t\tconst month = parseInt(\r\n\t\t\tversionString.match(/.{1,4}/g)?.[1].match(/.{1,2}/g)?.[0] ?? \"0\",\r\n\t\t);\r\n\t\tconst day = parseInt(\r\n\t\t\tversionString.match(/.{1,4}/g)?.[1].match(/.{1,2}/g)?.[1] ?? \"0\",\r\n\t\t);\r\n\r\n\t\tif (year <= 2019 && month < 5 && day < 10) return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\tstatic eval() {\r\n\t\tlet currentObjIdx = 0;\r\n\t\tlet currentInputIdx = 1;\r\n\t\tScoreParser.EVAL_LIST = [];\r\n\r\n\t\twhile (currentInputIdx < ScoreParser.CURSOR_DATA.length) {\r\n\t\t\tif (\r\n\t\t\t\tcurrentObjIdx >=\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList.length\r\n\t\t\t)\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tconst currentObj =\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList[\r\n\t\t\t\t\tcurrentObjIdx\r\n\t\t\t\t].obj;\r\n\t\t\tconst currentInput = ScoreParser.CURSOR_DATA[currentInputIdx];\r\n\r\n\t\t\tif (ScoreParser.EVAL_LIST.at(-1)?.time === currentObj.time) {\r\n\t\t\t\tcurrentObjIdx++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tconst val = currentObj.eval(currentInputIdx);\r\n\r\n\t\t\tif (val === null) {\r\n\t\t\t\tcurrentInputIdx++;\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tScoreParser.EVAL_LIST.push({\r\n\t\t\t\ttime: currentObj.time,\r\n\t\t\t\teval: val.val,\r\n\t\t\t\tsv2Eval: val.valV2,\r\n\t\t\t\tinputTime: val.val === 0 ? null : val.inputTime,\r\n\t\t\t\ttype: currentObj.constructor.name,\r\n\t\t\t\tcheckPointState: val.checkPointState,\r\n\t\t\t\tbonus: val.bonus,\r\n\t\t\t\tbonusV2: val.bonusV2,\r\n\t\t\t\tdelta: val.delta,\r\n\t\t\t});\r\n\r\n\t\t\tif (val.val === 0) {\r\n\t\t\t\tif (currentObj instanceof HitCircle) {\r\n\t\t\t\t\tcurrentObj.hitTime = currentObj.time + 240 + 1;\r\n\t\t\t\t\tcurrentObj.endTime = currentObj.time + Beatmap.hitWindows.MEH;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentObj instanceof Slider) {\r\n\t\t\t\t\tcurrentObj.hitTime =\r\n\t\t\t\t\t\tcurrentObj.time + currentObj.sliderTime + 240 + 1;\r\n\t\t\t\t\tcurrentObj.hitCircle.hitTime = currentObj.hitCircle.endTime + 1;\r\n\t\t\t\t\tcurrentObj.hitCircle.endTime =\r\n\t\t\t\t\t\tcurrentObj.hitCircle.time + Beatmap.hitWindows.MEH;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!(currentObj instanceof Spinner)) {\r\n\t\t\t\t\tcurrentObj.hitTime = val.inputTime;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!(currentObj instanceof Spinner)) {\r\n\t\t\t\tlet judgementTime = currentObj.hitTime;\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tcurrentObj instanceof HitCircle &&\r\n\t\t\t\t\tcurrentObj.hitTime > currentObj.endTime\r\n\t\t\t\t) {\r\n\t\t\t\t\tjudgementTime = currentObj.endTime;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentObj instanceof Slider) {\r\n\t\t\t\t\tjudgementTime =\r\n\t\t\t\t\t\tcurrentObj.time + currentObj.sliderTime * currentObj.repeat;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst pos =\r\n\t\t\t\t\tcurrentObj instanceof HitCircle\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\tx: currentObj.originalX,\r\n\t\t\t\t\t\t\t\ty: currentObj.originalY,\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\tx: currentObj.realTrackPoints.at(-1).x,\r\n\t\t\t\t\t\t\t\ty: currentObj.realTrackPoints.at(-1).y,\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\tconst obj = new Judgement(\r\n\t\t\t\t\tjudgementTime,\r\n\t\t\t\t\tScoreParser.MODS.includes(\"ScoreV2\") ? val.valV2 : val.val,\r\n\t\t\t\t\tcurrentObj.stackHeight,\r\n\t\t\t\t\tpos,\r\n\t\t\t\t);\r\n\t\t\t\tcurrentObj.judgement = obj;\r\n\t\t\t\tcurrentObj.judgementContainer.removeChildren();\r\n\t\t\t\tcurrentObj.judgementContainer.addChild(obj.obj);\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.judgementList.push(\r\n\t\t\t\t\tobj,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tcurrentInputIdx++;\r\n\t\t\tcurrentObjIdx++;\r\n\t\t}\r\n\r\n\t\t// console.log(ScoreParser.EVAL_LIST.filter((evl) => evl.type === \"Slider\" && evl.checkPointState.some((checkpoint) => checkpoint.eval !== 1)));\r\n\t}\r\n\r\n\tstatic calculateScore() {\r\n\t\tlet combo = 0;\r\n\t\tlet maxCombo = 0;\r\n\t\t// console.log(this.map.difficultyMultiplier, this.map.modMultiplier);\r\n\r\n\t\tconst filtered = ScoreParser.EVAL_LIST.filter(\r\n\t\t\t(input) => input.delta !== undefined,\r\n\t\t).map((input) => ApplyModsToTime(input.delta, ScoreParser.MODS));\r\n\t\tconst deltaSum = filtered.reduce((prev, curr) => prev + curr, 0);\r\n\t\tconst avg = deltaSum / filtered.length;\r\n\r\n\t\tconst deltaSquaredSum = filtered.reduce(\r\n\t\t\t(prev, curr) => prev + (curr - avg) ** 2,\r\n\t\t\t0,\r\n\t\t);\r\n\t\tconst UR = Fixed(\r\n\t\t\tMath.sqrt(deltaSquaredSum / (filtered.length - 1)) * 10,\r\n\t\t\t2,\r\n\t\t);\r\n\r\n\t\tconst modMultiplier = !ScoreParser.MODS.includes(\"ScoreV2\")\r\n\t\t\t? ScoreParser.MOD_MULTIPLIER.V1\r\n\t\t\t: ScoreParser.MOD_MULTIPLIER.V2;\r\n\r\n\t\tconst data = ScoreParser.EVAL_LIST.reduce(\r\n\t\t\t(accumulated, hitData) => {\r\n\t\t\t\tif (hitData.type !== \"Slider\") {\r\n\t\t\t\t\tmaxCombo++;\r\n\t\t\t\t\tif (hitData.eval === 0) {\r\n\t\t\t\t\t\tcombo = 0;\r\n\t\t\t\t\t\taccumulated.acc.V1.h0++;\r\n\t\t\t\t\t\taccumulated.acc.V2.h0++;\r\n\t\t\t\t\t\treturn accumulated;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst score = Math.round(\r\n\t\t\t\t\t\thitData.eval *\r\n\t\t\t\t\t\t\t(1 +\r\n\t\t\t\t\t\t\t\t(Math.max(0, combo - 1) *\r\n\t\t\t\t\t\t\t\t\tBeatmap.difficultyMultiplier *\r\n\t\t\t\t\t\t\t\t\tmodMultiplier) /\r\n\t\t\t\t\t\t\t\t\t25),\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// console.log(hitData.time, hitData.eval, Beatmap.difficultyMultiplier, ScoreParser.MOD_MULTIPLIER);\r\n\r\n\t\t\t\t\tcombo++;\r\n\t\t\t\t\tif (combo > ScoreParser.maxCombo) ScoreParser.maxCombo = combo;\r\n\r\n\t\t\t\t\tif (hitData.eval === 300) {\r\n\t\t\t\t\t\taccumulated.acc.V1.h300++;\r\n\t\t\t\t\t\taccumulated.acc.V2.h300++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hitData.eval === 100) {\r\n\t\t\t\t\t\taccumulated.acc.V1.h100++;\r\n\t\t\t\t\t\taccumulated.acc.V2.h100++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (hitData.eval === 50) {\r\n\t\t\t\t\t\taccumulated.acc.V1.h50++;\r\n\t\t\t\t\t\taccumulated.acc.V2.h50++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// console.log(hitData.time, combo, maxCombo, hitData.eval, this.comboPortion, this.maxComboPortion)\r\n\r\n\t\t\t\t\tScoreParser.comboPortion += hitData.eval * (1 + combo / 10);\r\n\t\t\t\t\tScoreParser.maxComboPortion += 300 * (1 + maxCombo / 10);\r\n\r\n\t\t\t\t\t// console.log(hitData.time, score);\r\n\t\t\t\t\t// console.log(hitData.time, combo);\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tV1: accumulated.V1 + score,\r\n\t\t\t\t\t\tV1_S: accumulated.V1_S + score,\r\n\t\t\t\t\t\tacc: accumulated.acc,\r\n\t\t\t\t\t\tbonus: accumulated.bonus + (hitData.bonus ?? 0),\r\n\t\t\t\t\t\tbonusV2: accumulated.bonusV2 + (hitData.bonusV2 ?? 0),\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet tickScore = 0,\r\n\t\t\t\t\trepeatScore = 0,\r\n\t\t\t\t\theadScore = 0,\r\n\t\t\t\t\ttailScore = 0;\r\n\r\n\t\t\t\tlet valV1 = hitData.eval;\r\n\t\t\t\tlet valV2 = hitData.sv2Eval;\r\n\r\n\t\t\t\tlet tempMaxCombo = maxCombo;\r\n\t\t\t\thitData.checkPointState\r\n\t\t\t\t\t.filter((checkPoint) => checkPoint.type !== \"Slider Tick\")\r\n\t\t\t\t\t.forEach((checkPoint) => {\r\n\t\t\t\t\t\ttempMaxCombo++;\r\n\t\t\t\t\t\tScoreParser.maxComboPortion += 30 * (1 + tempMaxCombo / 10);\r\n\t\t\t\t\t});\r\n\t\t\t\thitData.checkPointState\r\n\t\t\t\t\t.filter((checkPoint) => checkPoint.type === \"Slider Tick\")\r\n\t\t\t\t\t.forEach((checkPoint) => {\r\n\t\t\t\t\t\ttempMaxCombo++;\r\n\t\t\t\t\t\tScoreParser.maxComboPortion += 10 * (1 + tempMaxCombo / 10);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\thitData.checkPointState.forEach((checkPoint) => {\r\n\t\t\t\t\tmaxCombo++;\r\n\t\t\t\t\tif (checkPoint.eval === 1) {\r\n\t\t\t\t\t\tcombo++;\r\n\t\t\t\t\t\tswitch (checkPoint.type) {\r\n\t\t\t\t\t\t\tcase \"Slider Head\":\r\n\t\t\t\t\t\t\t\theadScore += 30;\r\n\t\t\t\t\t\t\t\tScoreParser.comboPortion += 30 * (1 + combo / 10);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"Slider Tick\":\r\n\t\t\t\t\t\t\t\ttickScore += 10;\r\n\t\t\t\t\t\t\t\tScoreParser.comboPortion += 10 * (1 + combo / 10);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"Slider Repeat\":\r\n\t\t\t\t\t\t\t\trepeatScore += 30;\r\n\t\t\t\t\t\t\t\tScoreParser.comboPortion += 30 * (1 + combo / 10);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"Slider End\":\r\n\t\t\t\t\t\t\t\ttailScore += 30;\r\n\t\t\t\t\t\t\t\tScoreParser.comboPortion += 30 * (1 + combo / 10);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// console.log({ comboPortion: this.comboPortion, max: this.maxComboPortion })\r\n\r\n\t\t\t\t\t\tif (valV2 < 50) valV2 = 50;\r\n\t\t\t\t\t\tif (combo > ScoreParser.maxCombo) ScoreParser.maxCombo = combo;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (checkPoint.type !== \"Slider End\") {\r\n\t\t\t\t\t\t\tcombo = 0;\r\n\t\t\t\t\t\t\tif (valV2 > 50) valV2 = 50;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (valV1 > 100) valV1 = 100;\r\n\t\t\t\t\t\t\tif (valV2 > 100) valV2 = 100;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tconst sliderScoreV1 = Math.round(\r\n\t\t\t\t\tvalV1 *\r\n\t\t\t\t\t\t(1 +\r\n\t\t\t\t\t\t\t(Math.max(0, combo - 1) *\r\n\t\t\t\t\t\t\t\tBeatmap.difficultyMultiplier *\r\n\t\t\t\t\t\t\t\tmodMultiplier) /\r\n\t\t\t\t\t\t\t\t25) +\r\n\t\t\t\t\t\theadScore +\r\n\t\t\t\t\t\ttickScore +\r\n\t\t\t\t\t\trepeatScore +\r\n\t\t\t\t\t\ttailScore,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tconst sliderScoreV2 = Math.round(\r\n\t\t\t\t\tvalV2 *\r\n\t\t\t\t\t\t(1 +\r\n\t\t\t\t\t\t\t(Math.max(0, combo - 1) *\r\n\t\t\t\t\t\t\t\tBeatmap.difficultyMultiplier *\r\n\t\t\t\t\t\t\t\tmodMultiplier) /\r\n\t\t\t\t\t\t\t\t25) +\r\n\t\t\t\t\t\theadScore +\r\n\t\t\t\t\t\ttickScore +\r\n\t\t\t\t\t\trepeatScore +\r\n\t\t\t\t\t\ttailScore,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (valV1 === 300) accumulated.acc.V1.h300++;\r\n\t\t\t\tif (valV2 === 300) accumulated.acc.V2.h300++;\r\n\t\t\t\tif (valV1 === 100) accumulated.acc.V1.h100++;\r\n\t\t\t\tif (valV2 === 100) accumulated.acc.V2.h100++;\r\n\t\t\t\tif (valV1 === 50) accumulated.acc.V1.h50++;\r\n\t\t\t\tif (valV2 === 50) accumulated.acc.V2.h50++;\r\n\t\t\t\tif (valV1 === 0) accumulated.acc.V1.h0++;\r\n\t\t\t\tif (valV2 === 0) accumulated.acc.V2.h0++;\r\n\r\n\t\t\t\tScoreParser.comboPortion += valV2 * (1 + combo / 10);\r\n\t\t\t\tScoreParser.maxComboPortion += 300 * (1 + maxCombo / 10);\r\n\r\n\t\t\t\t// console.log(valV2)\r\n\t\t\t\t// console.log({ comboPortion: this.comboPortion, max: this.maxComboPortion })\r\n\r\n\t\t\t\t// if (valV1 !== valV2)\r\n\t\t\t\t//     console.log(hitData.time, valV1, valV2)\r\n\r\n\t\t\t\t// console.log(hitData.time, combo);\r\n\t\t\t\t// if (hitData.time === 9596) console.log(hitData.time, hitData);\r\n\t\t\t\t// if (hitData.checkPointState.some((checkpoint) => checkpoint.eval !== 1)) console.log(hitData.time, hitData);\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tV1: accumulated.V1 + sliderScoreV1,\r\n\t\t\t\t\tV1_S: accumulated.V1_S + sliderScoreV2,\r\n\t\t\t\t\tacc: accumulated.acc,\r\n\t\t\t\t\tbonus: accumulated.bonus,\r\n\t\t\t\t\tbonusV2: accumulated.bonusV2,\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tV1: 0,\r\n\t\t\t\tV1_S: 0,\r\n\t\t\t\tacc: {\r\n\t\t\t\t\tV1: {\r\n\t\t\t\t\t\th300: 0,\r\n\t\t\t\t\t\th100: 0,\r\n\t\t\t\t\t\th50: 0,\r\n\t\t\t\t\t\th0: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tV2: {\r\n\t\t\t\t\t\th300: 0,\r\n\t\t\t\t\t\th100: 0,\r\n\t\t\t\t\t\th50: 0,\r\n\t\t\t\t\t\th0: 0,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tbonus: 0,\r\n\t\t\t\tbonusV2: 0,\r\n\t\t\t},\r\n\t\t);\r\n\r\n\t\tconst accV1 =\r\n\t\t\t(data.acc.V1.h300 + data.acc.V1.h100 / 3 + data.acc.V1.h50 / 6) /\r\n\t\t\t(data.acc.V1.h300 + data.acc.V1.h100 + data.acc.V1.h50 + data.acc.V1.h0);\r\n\t\tconst accV2 =\r\n\t\t\t(data.acc.V2.h300 + data.acc.V2.h100 / 3 + data.acc.V2.h50 / 6) /\r\n\t\t\t(data.acc.V2.h300 + data.acc.V2.h100 + data.acc.V2.h50 + data.acc.V2.h0);\r\n\t\tconst V2 = Math.round(\r\n\t\t\t700000 * (data.V1_S / Beatmap.maxScore) + 300000 * accV2 ** 10,\r\n\t\t);\r\n\t\tconst V2_new = Math.round(\r\n\t\t\t700000 * (ScoreParser.comboPortion / ScoreParser.maxComboPortion) +\r\n\t\t\t\t300000 * accV2 ** 10,\r\n\t\t);\r\n\r\n\t\t// console.log(this.comboPortion)\r\n\t\t// console.log(this.maxComboPortion)\r\n\t\t// console.log(700000 * (this.comboPortion / this.maxComboPortion))\r\n\r\n\t\t// console.log(`SCORE_V1 / MAX_SCORE_V1 RATIO:`.padEnd(30, \" \"), Fixed((data.V1 / Beatmap.maxScore) * 100, 2));\r\n\t\t// console.log(`COMBO_P / MAX_COMBO_P RATIO:`.padEnd(30, \" \"), Fixed((ScoreParser.comboPortion / ScoreParser.maxComboPortion) * 100, 2));\r\n\r\n\t\tconst score = {\r\n\t\t\t...data,\r\n\t\t\taccV1,\r\n\t\t\taccV2,\r\n\t\t\tUR,\r\n\t\t\tV2,\r\n\t\t\tV2_new,\r\n\t\t};\r\n\r\n\t\tconst calcDiff =\r\n\t\t\t(ScoreParser.MODS.includes(\"ScoreV2\")\r\n\t\t\t\t? score.V2_new + score.bonusV2\r\n\t\t\t\t: score.V1 + score.bonus) - ScoreParser.REPLAY_DATA.score;\r\n\t\tconst expectedBonus =\r\n\t\t\t(ScoreParser.MODS.includes(\"ScoreV2\") ? score.bonusV2 : score.bonus) -\r\n\t\t\tcalcDiff;\r\n\r\n\t\tconsole.log(\r\n\t\t\t`MAX_COMBO:`.padEnd(15),\r\n\t\t\tScoreParser.maxCombo,\r\n\t\t\t\"/\",\r\n\t\t\tBeatmap.maxCombo,\r\n\t\t);\r\n\t\tconsole.log(`ACC_V1:`.padEnd(15), Fixed(score.accV1 * 100, 2));\r\n\t\tconsole.log(\r\n\t\t\t``.padEnd(15, \"\"),\r\n\t\t\t`${score.acc.V1.h300} / ${score.acc.V1.h100} / ${score.acc.V1.h50} / ${score.acc.V1.h0}`,\r\n\t\t);\r\n\t\tconsole.log(`ACC_V2:`.padEnd(15), Fixed(score.accV2 * 100, 2));\r\n\t\tconsole.log(\r\n\t\t\t``.padEnd(15, \"\"),\r\n\t\t\t`${score.acc.V2.h300} / ${score.acc.V2.h100} / ${score.acc.V2.h50} / ${score.acc.V2.h0}`,\r\n\t\t);\r\n\t\tconsole.log(`UNSTABLE_RATE:`.padEnd(15), score.UR);\r\n\t\tconsole.log(`CALC_DIFF:`.padEnd(15), calcDiff);\r\n\t\tconsole.log(``.padEnd(30, \"=\"));\r\n\r\n\t\tif (!ScoreParser.MODS.includes(\"ScoreV2\")) {\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V1 (from replay):`.padEnd(50),\r\n\t\t\t\tScoreParser.REPLAY_DATA.score,\r\n\t\t\t);\r\n\t\t\tconsole.log(`SCORE_V1 (calculated):`.padEnd(50), score.V1 + score.bonus);\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V1 (slider accuracy evaluated):`.padEnd(50),\r\n\t\t\t\tscore.V1_S + score.bonus,\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V2 (old method):`.padEnd(50),\r\n\t\t\t\tMath.round(score.V2 * ScoreParser.MOD_MULTIPLIER.V2) + score.bonusV2,\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V2 (calculated):`.padEnd(50),\r\n\t\t\t\tMath.round(score.V2_new * ScoreParser.MOD_MULTIPLIER.V2) +\r\n\t\t\t\t\tscore.bonusV2,\r\n\t\t\t);\r\n\t\t\tconsole.log(`SPINNER_BONUS (expected):`.padEnd(50), expectedBonus);\r\n\t\t\tconsole.log(`SPINNER_BONUS (calculated):`.padEnd(50), score.bonus);\r\n\t\t} else {\r\n\t\t\tconsole.log(`SCORE_V1 (calculated):`.padEnd(50), score.V1 + score.bonus);\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V1 (slider accuracy evaluated):`.padEnd(50),\r\n\t\t\t\tscore.V1_S + score.bonus,\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V2 (calculated):`.padEnd(50),\r\n\t\t\t\tMath.round(score.V2_new * ScoreParser.MOD_MULTIPLIER.V2) +\r\n\t\t\t\t\tscore.bonusV2,\r\n\t\t\t);\r\n\t\t\tconsole.log(\r\n\t\t\t\t`SCORE_V2 (from replay):`.padEnd(50),\r\n\t\t\t\tScoreParser.REPLAY_DATA.score,\r\n\t\t\t);\r\n\t\t\tconsole.log(`SPINNER_BONUS (expected):`.padEnd(50), expectedBonus);\r\n\t\t\tconsole.log(`SPINNER_BONUS (calculated):`.padEnd(50), score.bonusV2);\r\n\t\t}\r\n\t}\r\n\r\n\tasync getPlayer() {\r\n\t\tconsole.log(ScoreParser.REPLAY_DATA.player);\r\n\t\tif (!ScoreParser.REPLAY_DATA.player) return;\r\n\r\n\t\tconst data = (\r\n\t\t\tawait axios.get(\r\n\t\t\t\t`https://preview.tryz.id.vn/api/u/${ScoreParser.REPLAY_DATA.player}`,\r\n\t\t\t)\r\n\t\t).data;\r\n\t\tconsole.log(data);\r\n\t\tif (JSON.stringify(data) === \"{}\") return;\r\n\r\n\t\tdocument.querySelector(\".thePlayer\").style.backgroundImage =\r\n\t\t\t`url(${data.cover_url})`;\r\n\t\tdocument.querySelector(\".playerName\").textContent = data.username;\r\n\t\tdocument.querySelector(\".playerAva\").src = data.avatar_url;\r\n\r\n\t\tdocument.querySelector(\".thePlayer\").style.display = \"flex\";\r\n\t}\r\n\r\n\tasync getReplayData() {\r\n\t\ttry {\r\n\t\t\t// Convert Blob to ArrayBuffer to Buffer\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"\";\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 1;\r\n\t\t\tdocument.querySelector(\"#loadingText\").textContent = `Parsing Score`;\r\n\r\n\t\t\tconst arr_buf = await new Response(ScoreParser.BLOB).arrayBuffer();\r\n\t\t\tconst buf = buffer.Buffer.from(arr_buf);\r\n\r\n\t\t\t// Get Replay Data\r\n\t\t\tconst replay = new Replay(buf);\r\n\t\t\tconst replayData = await replay.deserialize();\r\n\t\t\t// console.log(replayData);\r\n\t\t\tScoreParser.REPLAY_DATA = replayData;\r\n\t\t\tScoreParser.IS_OLD_VER = this.getIsOldVersion(replayData.version);\r\n\r\n\t\t\t// this.getPlayer();\r\n\r\n\t\t\t// Get Cursor Data\r\n\t\t\tlet timestamp = 0;\r\n\t\t\tScoreParser.CURSOR_DATA = replayData.replayData\r\n\t\t\t\t.split(\",\")\r\n\t\t\t\t.filter((data) => data !== \"\")\r\n\t\t\t\t.map((data, idx) => {\r\n\t\t\t\t\tconst nodes = data.split(\"|\");\r\n\r\n\t\t\t\t\tif (nodes[0] === \"-12345\")\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttime: 0,\r\n\t\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\t\tinputArray: [],\r\n\t\t\t\t\t\t\tidx,\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\ttimestamp += parseFloat(nodes[0]);\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttime: timestamp,\r\n\t\t\t\t\t\tx: parseFloat(nodes[1]),\r\n\t\t\t\t\t\ty: parseFloat(nodes[2]),\r\n\t\t\t\t\t\tinputArray: parseInt(nodes[3])\r\n\t\t\t\t\t\t\t.toString(2)\r\n\t\t\t\t\t\t\t.padStart(5, \"0\")\r\n\t\t\t\t\t\t\t.split(\"\")\r\n\t\t\t\t\t\t\t.reduce(\r\n\t\t\t\t\t\t\t\t(prev, curr, idx) =>\r\n\t\t\t\t\t\t\t\t\tcurr === \"1\" && idx !== 0\r\n\t\t\t\t\t\t\t\t\t\t? prev.concat([ScoreParser.INPUT_LIST[idx]])\r\n\t\t\t\t\t\t\t\t\t\t: prev,\r\n\t\t\t\t\t\t\t\t[],\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\tidx,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\r\n\t\t\tScoreParser.MODS = ScoreParser.REPLAY_DATA.mods\r\n\t\t\t\t.toString(2)\r\n\t\t\t\t.padStart(31, \"0\")\r\n\t\t\t\t.split(\"\")\r\n\t\t\t\t.reduce((accumulated, current, idx) => {\r\n\t\t\t\t\tif (current === \"1\")\r\n\t\t\t\t\t\taccumulated.push(\r\n\t\t\t\t\t\t\tScoreParser.MOD_LIST[ScoreParser.MOD_LIST.length - 1 - idx],\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\treturn accumulated;\r\n\t\t\t\t}, []);\r\n\r\n\t\t\tGame.MODS.HD = ScoreParser.MODS.includes(\"Hidden\");\r\n\t\t\tGame.MODS.HR = ScoreParser.MODS.includes(\"HardRock\");\r\n\t\t\tGame.MODS.EZ = ScoreParser.MODS.includes(\"Easy\");\r\n\t\t\tGame.MODS.DT =\r\n\t\t\t\tScoreParser.MODS.includes(\"DoubleTime\") &&\r\n\t\t\t\t!ScoreParser.MODS.includes(\"Nightcore\");\r\n\t\t\tGame.MODS.NC = ScoreParser.MODS.includes(\"Nightcore\");\r\n\t\t\tGame.MODS.HT = ScoreParser.MODS.includes(\"HalfTime\");\r\n\r\n\t\t\tconst DTMultiplier = !Game.MODS.DT && !Game.MODS.NC ? 1 : 1.5;\r\n\t\t\tconst HTMultiplier = !Game.MODS.HT ? 1 : 0.75;\r\n\t\t\tGame.PLAYBACK_RATE = 1 * DTMultiplier * HTMultiplier;\r\n\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 0;\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"none\";\r\n\r\n\t\t\tif (ScoreParser.REPLAY_DATA.md5map !== Game.BEATMAP_FILE?.md5Map) {\r\n\t\t\t\tconsole.log(ScoreParser.REPLAY_DATA.md5map, Game.BEATMAP_FILE?.md5Map);\r\n\t\t\t\tconst mapData = await this.getMapData(ScoreParser.REPLAY_DATA.md5map);\r\n\t\t\t\tif (!mapData.beatmap_id) {\r\n\t\t\t\t\tthrow \"Map is not available online!\";\r\n\t\t\t\t}\r\n\t\t\t\tsubmitMap(false, mapData.beatmap_id);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tBeatmap.updateModdedStats();\r\n\t\t\tGame.BEATMAP_FILE.beatmapRenderData.applyStacking();\r\n\r\n\t\t\tdocument.querySelector(\"#HD\").checked = Game.MODS.HD;\r\n\t\t\tdocument.querySelector(\"#HR\").checked = Game.MODS.HR;\r\n\t\t\tdocument.querySelector(\"#EZ\").checked = Game.MODS.EZ;\r\n\t\t\tdocument.querySelector(\"#DT\").checked = Game.MODS.DT;\r\n\t\t\tdocument.querySelector(\"#NC\").checked = Game.MODS.NC;\r\n\t\t\tdocument.querySelector(\"#HT\").checked = Game.MODS.HT;\r\n\t\t\tdocument.querySelector(\"#DC\").checked = Game.MODS.DC;\r\n\r\n\t\t\t// [\r\n\t\t\t//     \"NoFail\",\r\n\t\t\t//     \"Easy\",\r\n\t\t\t//     \"Hidden\",\r\n\t\t\t//     \"HardRock\",\r\n\t\t\t//     \"SuddenDeath\",\r\n\t\t\t//     \"DoubleTime\",\r\n\t\t\t//     \"HalfTime\",\r\n\t\t\t//     \"Nightcore\",\r\n\t\t\t//     \"Flashlight\",\r\n\t\t\t//     \"SpunOut\",\r\n\t\t\t//     \"Perfect\",\r\n\t\t\t//     \"ScoreV2\",\r\n\t\t\t// ].forEach((mod) => {\r\n\t\t\t//     if (!ScoreParser.MODS.includes(mod)) return;\r\n\r\n\t\t\t//     const div = document.createElement(\"div\");\r\n\t\t\t//     div.classList.add(\"modWrapper\");\r\n\r\n\t\t\t//     const img = document.createElement(\"img\");\r\n\t\t\t//     img.classList.add(\"mod\");\r\n\t\t\t//     img.src = `/static/mods/${mod}.png`;\r\n\r\n\t\t\t//     div.appendChild(img);\r\n\t\t\t//     document.querySelector(\".modsList\").appendChild(div);\r\n\t\t\t// });\r\n\r\n\t\t\tScoreParser.MOD_MULTIPLIER = ScoreParser.MODS.reduce(\r\n\t\t\t\t(prev, curr) => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tV1: prev.V1 * (ScoreParser.modsMultiplierList.V1[curr] ?? 1),\r\n\t\t\t\t\t\tV2: prev.V2 * (ScoreParser.modsMultiplierList.V2[curr] ?? 1),\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tV1: 1,\r\n\t\t\t\t\tV2: 1,\r\n\t\t\t\t},\r\n\t\t\t);\r\n\r\n\t\t\tScoreParser.eval();\r\n\t\t\tdocument.querySelector(\"#HD\").disabled = true;\r\n\t\t\tdocument.querySelector(\"#HR\").disabled = true;\r\n\t\t\tdocument.querySelector(\"#DT\").disabled = true;\r\n\t\t\tdocument.querySelector(\"#NC\").disabled = true;\r\n\t\t\tdocument.querySelector(\"#EZ\").disabled = true;\r\n\t\t\tdocument.querySelector(\"#HT\").disabled = true;\r\n\t\t\tdocument.querySelector(\"#DC\").disabled = true;\r\n\r\n\t\t\tcalculateCurrentSR([\r\n\t\t\t\tGame.MODS.HR,\r\n\t\t\t\tGame.MODS.EZ,\r\n\t\t\t\tGame.MODS.DT || Game.MODS.NC,\r\n\t\t\t\tGame.MODS.HT || Game.MODS.DC,\r\n\t\t\t]);\r\n\t\t\t// console.log(ScoreParser.REPLAY_DATA, ScoreParser.CURSOR_DATA, ScoreParser.MODS);\r\n\t\t\tconsole.log(ScoreParser.calculateScore());\r\n\t\t} catch (error) {\r\n\t\t\tScoreParser.reset();\r\n\r\n\t\t\talert(error);\r\n\t\t\tconsole.error(error);\r\n\r\n\t\t\tdocument.querySelector(\".loading\").style.opacity = 0;\r\n\t\t\tdocument.querySelector(\".loading\").style.display = \"none\";\r\n\t\t}\r\n\t}\r\n\r\n\tstatic reset() {\r\n\t\tScoreParser.BLOB = null;\r\n\t\tScoreParser.REPLAY_DATA = null;\r\n\t\tScoreParser.CURSOR_DATA = null;\r\n\t\tScoreParser.EVAL_LIST = [];\r\n\r\n\t\tScoreParser.comboPortion = 0;\r\n\t\tScoreParser.maxComboPortion = 0;\r\n\t\tScoreParser.maxCombo = 0;\r\n\r\n\t\tGame.CURSOR.obj.alpha = 0;\r\n\r\n\t\t// document.querySelector(\".thePlayer\").style.display = \"\";\r\n\t\t// document.querySelector(\".thePlayer\").style.backgroundImage = \"\";\r\n\t\t// document.querySelector(\".playerName\").textContent = \"\";\r\n\t\t// document.querySelector(\".playerAva\").src = \"\";\r\n\t\t// document.querySelector(\".modsList\").innerHTML = \"\";\r\n\t}\r\n\r\n\tconstructor(blob) {\r\n\t\tScoreParser.BLOB = blob;\r\n\t\tScoreParser.REPLAY_DATA = null;\r\n\t\tScoreParser.CURSOR_DATA = null;\r\n\t\tScoreParser.EVAL_LIST = [];\r\n\r\n\t\tScoreParser.comboPortion = 0;\r\n\t\tScoreParser.maxComboPortion = 0;\r\n\t\tScoreParser.maxCombo = 0;\r\n\r\n\t\tGame.CURSOR.obj.alpha = 1;\r\n\r\n\t\t// document.querySelector(\".thePlayer\").style.display = \"\";\r\n\t\t// document.querySelector(\".thePlayer\").style.backgroundImage = \"\";\r\n\t\t// document.querySelector(\".playerName\").textContent = \"\";\r\n\t\t// document.querySelector(\".playerAva\").src = \"\";\r\n\t\t// document.querySelector(\".modsList\").innerHTML = \"\";\r\n\t}\r\n}\r\n","import { Game } from \"./Game.js\";\r\nimport { ScoreParser } from \"./ScoreParser.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { loadParallel } from \"./Utils.js\";\r\n\r\nconst CURSOR_SIZE = 0.3;\r\n\r\nexport class Cursor {\r\n\tobj;\r\n\tcursor;\r\n\ttrailList;\r\n\r\n\tasync init() {\r\n\t\tconst container = new PIXI.Container();\r\n\r\n\t\tconst [cursorTexture, trailTexture] = await Promise.all([\r\n\t\t\tPIXI.Assets.load(\"/static/cursor.png\"),\r\n\t\t\tPIXI.Assets.load(\"/static/cursortrail.png\"),\r\n\t\t]);\r\n\t\tthis.cursor = PIXI.Sprite.from(cursorTexture);\r\n\t\tthis.cursor.anchor.set(0.5);\r\n\t\tthis.cursor.width = 128 * (1024 / 640);\r\n\t\tthis.cursor.height = 128 * (1024 / 640);\r\n\t\tthis.cursor.scale.set(CURSOR_SIZE);\r\n\r\n\t\tconst trailList = [...Array(10).keys()].map(() =>\r\n\t\t\tPIXI.Sprite.from(trailTexture),\r\n\t\t);\r\n\t\tthis.trailList = trailList;\r\n\r\n\t\ttrailList.forEach((cursor) => {\r\n\t\t\tcursor.anchor.set(0.5);\r\n\t\t\tcursor.width = 64 * (1024 / 640);\r\n\t\t\tcursor.height = 64 * (1024 / 640);\r\n\t\t\tcursor.scale.set(CURSOR_SIZE);\r\n\t\t\tcontainer.addChild(cursor);\r\n\t\t});\r\n\t\tcontainer.addChild(this.cursor);\r\n\t\tcontainer.x = Game.OFFSET_X;\r\n\t\tcontainer.y = Game.OFFSET_Y;\r\n\r\n\t\tthis.obj = container;\r\n\t\tthis.obj.alpha = 0;\r\n\t}\r\n\r\n\tconstructor() {}\r\n\r\n\tupdate(index, current_x, current_y) {\r\n\t\tif (!ScoreParser.CURSOR_DATA) return;\r\n\t\tthis.obj.x = Game.OFFSET_X;\r\n\t\tthis.obj.y = Game.OFFSET_Y;\r\n\t\tthis.obj.scale.set(Game.SCALE_RATE);\r\n\r\n\t\tthis.cursor.x = current_x;\r\n\t\tthis.cursor.y = current_y;\r\n\t\tthis.cursor.scale.set(CURSOR_SIZE);\r\n\r\n\t\tindex--;\r\n\r\n\t\tthis.trailList.toReversed().forEach((graphic, graphic_idx) => {\r\n\t\t\tif (index < 0) return;\r\n\r\n\t\t\tconst x_delta = ScoreParser.CURSOR_DATA[index].x;\r\n\t\t\tconst y_delta = ScoreParser.CURSOR_DATA[index].y;\r\n\r\n\t\t\tgraphic.x = x_delta;\r\n\t\t\tgraphic.y = y_delta;\r\n\t\t\tgraphic.scale.set(CURSOR_SIZE * 2);\r\n\t\t\tgraphic.alpha = 1 - graphic_idx / this.trailList.length;\r\n\r\n\t\t\tindex--;\r\n\t\t\treturn;\r\n\t\t});\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Component } from \"./WindowManager\";\r\nimport { Game } from \"./Game\";\r\nimport { Text } from \"./UI/Text\";\r\nimport { FlexBox } from \"./UI/FlexBox\";\r\nimport { Timestamp } from \"./Timestamp\";\r\nimport { ProgressBar } from \"./Progress\";\r\nimport { BPM } from \"./BPM\";\r\nimport { PlayContainer } from \"./PlayButtons\";\r\nimport { Beatmap } from \"./Beatmap\";\r\n\r\nexport class TitleArtist {\r\n\tonHover = false;\r\n\r\n\tconstructor() {\r\n\t\tthis._title = \"\";\r\n\t\tthis._artist = \"\";\r\n\t\tthis._difficulty = \"\";\r\n\t\tthis._mapper = \"\";\r\n\r\n\t\tthis.titleArtist = new Text({\r\n\t\t\ttext: `${this._artist} - ${this._title}`,\r\n\t\t\t// renderMode: \"html\",\r\n\t\t\tstyle: {\r\n\t\t\t\tfontFamily: \"Torus\",\r\n\t\t\t\tfontWeight: 600,\r\n\t\t\t\tfontSize: 20,\r\n\t\t\t\tfill: 0xffffff,\r\n\t\t\t\twordWrap: true,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tthis.diffMapper = new Text({\r\n\t\t\ttext: `Difficulty: ${this._difficulty} - Mapset by ${this._mapper} `,\r\n\t\t\t// renderMode: \"html\",\r\n\t\t\tstyle: {\r\n\t\t\t\tfontFamily: \"Torus\",\r\n\t\t\t\tfontWeight: 500,\r\n\t\t\t\tfontSize: 14,\r\n\t\t\t\tfill: 0xffffff,\r\n\t\t\t\twordWrap: true,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tthis.MASTER_CONTAINER = new Component(\r\n\t\t\t0,\r\n\t\t\t0,\r\n\t\t\tMath.max(this.titleArtist.width, this.diffMapper.width),\r\n\t\t\tthis.titleArtist.height + 5 + this.diffMapper.height,\r\n\t\t);\r\n\t\tthis.MASTER_CONTAINER.borderBox = false;\r\n\t\tthis.MASTER_CONTAINER.padding = 20;\r\n\t\tthis.MASTER_CONTAINER.container.label = \"TitleArtist\";\r\n\r\n\t\tthis.flex = new FlexBox();\r\n\t\tthis.flex.flexDirection = \"row\";\r\n\t\tthis.flex.gap = 5;\r\n\t\tthis.flex.justifyContent = \"start\";\r\n\r\n\t\tthis.titleArtist.style.wordWrapWidth =\r\n\t\t\tGame.WRAPPER.w - this.MASTER_CONTAINER.padding * 2;\r\n\t\tthis.diffMapper.style.wordWrapWidth =\r\n\t\t\tGame.WRAPPER.w - this.MASTER_CONTAINER.padding * 2;\r\n\t\tthis.flex.addChild(this.titleArtist, this.diffMapper);\r\n\r\n\t\tthis.MASTER_CONTAINER.overflow = \"visible\";\r\n\t\tthis.MASTER_CONTAINER.container.addChild(this.flex.container);\r\n\r\n\t\tthis.MASTER_CONTAINER.container.eventMode = \"static\";\r\n\r\n\t\tthis.MASTER_CONTAINER.container.on(\"mouseenter\", (e) => {\r\n\t\t\tif (!Beatmap.HREF) return;\r\n\t\t\tthis.titleArtist.color = 0xffbb00;\r\n\t\t\tthis.diffMapper.color = 0xffbb00;\r\n\t\t});\r\n\r\n\t\tthis.MASTER_CONTAINER.container.on(\"mouseleave\", (e) => {\r\n\t\t\tthis.titleArtist.color = 0xffffff;\r\n\t\t\tthis.diffMapper.color = 0xffffff;\r\n\t\t});\r\n\r\n\t\tthis.MASTER_CONTAINER.container.on(\"click\", (e) => {\r\n\t\t\tif (!Beatmap.HREF) return;\r\n\t\t\topen(Beatmap.HREF);\r\n\t\t});\r\n\r\n\t\tthis.MASTER_CONTAINER.container.on(\"tap\", (e) => {\r\n\t\t\tif (!Beatmap.HREF) return;\r\n\t\t\topen(Beatmap.HREF);\r\n\t\t});\r\n\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tget title() {\r\n\t\treturn this._title;\r\n\t}\r\n\tset title(val) {\r\n\t\tthis._title = val;\r\n\t\tthis.titleArtist.text = `${this._artist} - ${this._title}`;\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tget artist() {\r\n\t\treturn this._artist;\r\n\t}\r\n\tset artist(val) {\r\n\t\tthis._artist = val;\r\n\t\tthis.titleArtist.text = `${this._artist} - ${this._title}`;\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tget difficulty() {\r\n\t\treturn this._difficulty;\r\n\t}\r\n\tset difficulty(val) {\r\n\t\tthis._difficulty = val;\r\n\t\tthis.diffMapper.text = `Difficulty: ${this._difficulty} - Mapset by ${this._mapper}`;\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tget mapper() {\r\n\t\treturn this._mapper;\r\n\t}\r\n\tset mapper(val) {\r\n\t\tthis._mapper = val;\r\n\t\tthis.diffMapper.text = `Difficulty: ${this._difficulty} - Mapset by ${this._mapper}`;\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tresizeWidth() {\r\n\t\tif (innerWidth / innerHeight < 1) {\r\n\t\t\tthis.MASTER_CONTAINER.w = Game.WRAPPER.w;\r\n\t\t} else {\r\n\t\t\tthis.MASTER_CONTAINER.w = Math.max(\r\n\t\t\t\tthis.titleArtist.width,\r\n\t\t\t\tthis.diffMapper.width,\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tresizeHeight() {\r\n\t\tthis.MASTER_CONTAINER.h =\r\n\t\t\tthis.titleArtist.height + 5 + this.diffMapper.height;\r\n\t}\r\n\r\n\tresize() {\r\n\t\tthis.resizeWidth();\r\n\t\tthis.resizeHeight();\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tif (innerHeight > innerWidth) {\r\n\t\t\tthis.titleArtist._sprite.style.fontSize = 20;\r\n\t\t\tthis.diffMapper._sprite.style.fontSize = 14;\r\n\t\t\tthis.titleArtist._sprite.style.whiteSpace = \"pre\";\r\n\t\t\tthis.diffMapper._sprite.style.whiteSpace = \"pre\";\r\n\t\t} else {\r\n\t\t\tthis.titleArtist._sprite.style.fontSize = 24;\r\n\t\t\tthis.diffMapper._sprite.style.fontSize = 16;\r\n\t\t\tthis.titleArtist._sprite.style.whiteSpace = \"normal\";\r\n\t\t\tthis.diffMapper._sprite.style.whiteSpace = \"normal\";\r\n\t\t}\r\n\t\t// this.diffMapper.sprite.y = 5  + this.titleArtist.height;\r\n\r\n\t\tthis.titleArtist._sprite.style.wordWrapWidth =\r\n\t\t\tGame.WRAPPER.w - this.MASTER_CONTAINER.padding * 2;\r\n\t\tthis.diffMapper._sprite.style.wordWrapWidth =\r\n\t\t\tGame.WRAPPER.w - this.MASTER_CONTAINER.padding * 2;\r\n\t\t// this.diffMapper.sprite.y = 5  + this.titleArtist.height;\r\n\r\n\t\tthis.titleArtist.update();\r\n\t\tthis.diffMapper.update();\r\n\t\tthis.flex.update();\r\n\r\n\t\tthis.resize();\r\n\r\n\t\tif (innerWidth / innerHeight < 1) {\r\n\t\t\tthis.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n\t\t\tthis.MASTER_CONTAINER.alpha = 1;\r\n\r\n\t\t\tthis.MASTER_CONTAINER.y = Game.MASTER_CONTAINER.h;\r\n\t\t} else {\r\n\t\t\tthis.MASTER_CONTAINER.alpha = 0;\r\n\t\t\tthis.MASTER_CONTAINER.y = 0;\r\n\t\t}\r\n\r\n\t\tthis.MASTER_CONTAINER.redraw();\r\n\r\n\t\tif (innerWidth / innerHeight < 1) {\r\n\t\t\tconst currentTime = Game.BEATMAP_FILE?.audioNode?.getCurrentTime();\r\n\t\t\tGame.STATS?.update();\r\n\t\t\tTimestamp.rePosition();\r\n\t\t\tBPM.forceUpdate();\r\n\t\t\tPlayContainer.forceUpdate();\r\n\t\t\tProgressBar.forceResize();\r\n\t\t}\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Component } from \"./WindowManager\";\r\nimport { Game } from \"./Game\";\r\nimport { Container } from \"./UI/Container\";\r\nimport { FlexBox } from \"./UI/FlexBox\";\r\nimport { Text } from \"./UI/Text\";\r\n\r\nexport class Stats {\r\n    container;\r\n    flex;\r\n\r\n    constructor() {\r\n        this._CS = 0;\r\n        this._AR = 0;\r\n        this._OD = 0;\r\n        this._HP = 0;\r\n        this._SR = 0;\r\n        this.style = {\r\n            fontFamily: \"Torus\",\r\n            fontWeight: 500,\r\n            fontSize: 12,\r\n            fill: 0xffffff,\r\n        };\r\n\r\n        this.CSSprite = new Text({\r\n            text: `CS ${this._CS}`,\r\n            // renderMode: \"html\",\r\n            style: this.style,\r\n        });\r\n        this.ARSprite = new Text({\r\n            text: `AR ${this._AR}`,\r\n            // renderMode: \"html\",\r\n            style: this.style,\r\n        });\r\n        this.ODSprite = new Text({\r\n            text: `OD ${this._OD}`,\r\n            // renderMode: \"html\",\r\n            style: this.style,\r\n        });\r\n        this.HPSprite = new Text({\r\n            text: `HP ${this._HP}`,\r\n            // renderMode: \"html\",\r\n            style: this.style,\r\n        });\r\n        this.SRSprite = new Text({\r\n            text: `${this._SR}`,\r\n            // renderMode: \"html\",\r\n            style: this.style,\r\n        });\r\n\r\n        this.srContainer = new Container();\r\n        this.srContainer.addChild(this.SRSprite);\r\n        this.srContainer.color = 0x2e2825;\r\n        this.srContainer.paddingX = 10;\r\n        this.srContainer.paddingY = 5;\r\n        this.srContainer.borderRadius = 20;\r\n\r\n        this.flex = new FlexBox();\r\n        this.flex.gap = 20;\r\n        this.flex.addChild(this.CSSprite.sprite, this.ARSprite.sprite, this.ODSprite.sprite, this.HPSprite.sprite, this.srContainer.container);\r\n\r\n        this.container = new Container();\r\n        this.container.paddingX = 15;\r\n        this.container.paddingY = 5;\r\n        this.container.color = Game.COLOR_PALETTES.primary2;\r\n        this.container.borderRadius = 20;\r\n        this.container.placeItemsCenter = true;\r\n\r\n        this.container.addChild(this.flex.container);\r\n\r\n        this.update();\r\n    }\r\n\r\n    get CS() {\r\n        return this._CS;\r\n    }\r\n\r\n    set CS(val) {\r\n        this._CS = val;\r\n        this.CSSprite.text = `CS ${val}`;\r\n        this.update();\r\n    }\r\n\r\n    get AR() {\r\n        return this._AR;\r\n    }\r\n\r\n    set AR(val) {\r\n        this._AR = val;\r\n        this.ARSprite.text = `AR ${val}`;\r\n        this.update();\r\n    }\r\n\r\n    get OD() {\r\n        return this._OD;\r\n    }\r\n\r\n    set OD(val) {\r\n        this._OD = val;\r\n        this.ODSprite.text = `OD ${val}`;\r\n        this.update();\r\n    }\r\n\r\n    get HP() {\r\n        return this._HP;\r\n    }\r\n\r\n    set HP(val) {\r\n        this._HP = val;\r\n        this.HPSprite.text = `HP ${val}`;\r\n        this.update();\r\n    }\r\n\r\n    get SR() {\r\n        return this._SR;\r\n    }\r\n\r\n    set SR(val) {\r\n        this._SR = val;\r\n        this.SRSprite.text = `${val}`;\r\n        this.update();\r\n    }\r\n\r\n    update() {\r\n        this.CSSprite.style.fontSize = 12 ;\r\n        this.ARSprite.style.fontSize = 12 ;\r\n        this.ODSprite.style.fontSize = 12 ;\r\n        this.HPSprite.style.fontSize = 12 ;\r\n        this.SRSprite.style.fontSize = 12 ;\r\n\r\n        this.CSSprite.update();\r\n        this.ARSprite.update();\r\n        this.ODSprite.update();\r\n        this.HPSprite.update();\r\n        this.SRSprite.update();\r\n\r\n        this.srContainer.update();\r\n        this.flex.update();\r\n\r\n        if (innerWidth / innerHeight < 1) {\r\n            this.container.x = 0;\r\n            this.container.y = Game.INFO.MASTER_CONTAINER.y + Game.INFO.MASTER_CONTAINER.h + Game.INFO.MASTER_CONTAINER.padding * 2;\r\n            this.container.borderRadius = 0;\r\n            this.container.width = Game.WRAPPER.w;\r\n            this.flex.gap = 40;\r\n        } else {\r\n            this.container.width = undefined;\r\n            this.container.x = Game.WRAPPER.w - this.container.width - 10 ;\r\n            this.container.y = 10 ;\r\n            this.container.borderRadius = 20;\r\n            this.flex.gap = 20;\r\n        }\r\n\r\n        this.container.update();\r\n    }\r\n}\r\n","import { Cursor } from \"./Cursor.js\";\r\nimport { ObjectsController } from \"./HitObjects/ObjectsController.js\";\r\nimport { Timestamp } from \"./Timestamp.js\";\r\nimport { ProgressBar } from \"./Progress.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\nimport { Slider } from \"./HitObjects/Slider.js\";\r\nimport { handleCanvasDrag, checkCollide } from \"./DragWindow.js\";\r\nimport { HitSample } from \"./Audio.js\";\r\nimport { TimingPanel } from \"./TimingPanel.js\";\r\nimport { Component } from \"./WindowManager.js\";\r\nimport * as TWEEN from \"@tweenjs/tween.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { FullscreenButton, PlayContainer } from \"./PlayButtons.js\";\r\nimport { BPM, toggleTimingPanel } from \"./BPM.js\";\r\nimport { MetadataPanel, toggleMetadataPanel } from \"./SidePanel.js\";\r\nimport { TitleArtist } from \"./TitleArtist.js\";\r\nimport { Stats } from \"./Stats.js\";\r\nimport { Background } from \"./Background.js\";\r\nimport { closePopup } from \"./Timestamp.js\";\r\nimport { urlParams } from \"./GlobalVariables.js\";\r\nimport { Notification } from \"./Notification.js\";\r\n\r\nimport WorkerTest from \"./Workers/Worker.js?worker\";\r\nimport { Storyboard } from \"./Storyboard/Storyboard.js\";\r\nimport { User } from \"./User.js\";\r\nimport { Transcoder } from \"./FFmpeg.js\";\r\n\r\nimport { go } from \"./ProgressBar.js\";\r\nimport { setBeatsnapDivisor } from \"./Settings.js\";\r\nimport {Clamp, loadParallel} from \"./Utils.js\";\r\n\r\nconst isFullscreen = urlParams.get(\"fullscreen\") === \"true\" ? true : false;\r\n\r\nexport class Game {\r\n\tstatic INIT = false;\r\n\r\n\tstatic APP;\r\n\tstatic WRAPPER;\r\n\tstatic MASTER_CONTAINER;\r\n\tstatic CONTAINER;\r\n\tstatic GRID;\r\n\tstatic DRAG_WINDOW;\r\n\tstatic FPS;\r\n\tstatic CURSOR;\r\n\tstatic _RESOLUTION = 1;\r\n\tstatic get RESOLUTION() {\r\n\t\treturn this._RESOLUTION;\r\n\t}\r\n\r\n\tstatic set RESOLUTION(val) {\r\n\t\tthis._RESOLUTION = val;\r\n\t\tthis.EMIT_STACK.push(true);\r\n\t}\r\n\r\n\tstatic WIDTH;\r\n\tstatic HEIGHT;\r\n\tstatic SLIDER_ACCURACY = 1 / 500;\r\n\tstatic OFFSET_X;\r\n\tstatic OFFSET_Y;\r\n\r\n\tstatic SCALE_RATE = 1;\r\n\tstatic SB_SCALE_RATE = 1;\r\n\tstatic SB_OFFSET_X = 0;\r\n\tstatic SB_OFFSET_Y = 0;\r\n\r\n\tstatic IS_CLICKED = false;\r\n\tstatic IS_DRAGGING = false;\r\n\tstatic IS_RESIZING = false;\r\n\tstatic DID_MOVE = false;\r\n\tstatic START_X = 0;\r\n\tstatic START_Y = 0;\r\n\tstatic CURRENT_X = -1;\r\n\tstatic CURRENT_Y = -1;\r\n\tstatic DRAGGING_START = 0;\r\n\tstatic DRAGGING_END = 0;\r\n\r\n\tstatic IS_DRAGSCROLL = false;\r\n\tstatic START_DRAG_Y = 0;\r\n\r\n\tstatic AUDIO_CTX = new AudioContext();\r\n\tstatic PLAYBACK_RATE = 1;\r\n\r\n\tstatic SELECTED = [];\r\n\r\n\tstatic MODS = {\r\n\t\tHD: false,\r\n\t\tHR: false,\r\n\t\tEZ: false,\r\n\t\tDT: false,\r\n\t\tHT: false,\r\n\t};\r\n\r\n\tstatic SLIDER_APPEARANCE;\r\n\tstatic SKINNING;\r\n\tstatic MAPPING;\r\n\r\n\tstatic MASTER_VOL;\r\n\tstatic MUSIC_VOL;\r\n\tstatic HS_VOL;\r\n\tstatic DISABLE_BMHS;\r\n\r\n\tstatic DIFF_FILE_NAME = \"\";\r\n\tstatic DROP_BLOB = null;\r\n\tstatic BEATMAP_FILE = undefined;\r\n\r\n\tstatic COLOR_PALETTES = {\r\n\t\taccent1: 0x88c0d0,\r\n\t\tprimary1: 0x171a1f,\r\n\t\tprimary2: 0x2e3440,\r\n\t\tprimary3: 0x3b4252,\r\n\t\tprimary4: 0x434c5e,\r\n\t\tprimary5: 0x4c566a,\r\n\t};\r\n\r\n\tstatic SHOW_METADATA = false;\r\n\tstatic SHOW_TIMING_PANEL = false;\r\n\tstatic REDUCTION = 0;\r\n\tstatic COMPUTED_HEIGHT = 0;\r\n\r\n\tstatic DEVE_RATIO = 1;\r\n\tstatic EMIT_STACK = [];\r\n\r\n\tstatic IS_SEEKING = false;\r\n\tstatic ALPHA = 1;\r\n\tstatic IS_FULLSCREEN = isFullscreen;\r\n\tstatic _IS_HOVERING_PROGRESS = false;\r\n\r\n\tstatic WORKER_DELTA_MS = 0;\r\n\tstatic IS_VIDEO = false;\r\n\tstatic IS_STORYBOARD = false;\r\n\r\n\tstatic SHOULD_PLAY_HITSOUND = true;\r\n\r\n\tstatic WORKER = new WorkerTest();\r\n\r\n\t// Add certain objects from container\r\n\tstatic addToContainer(objectsList) {\r\n\t\tobjectsList.forEach((o) => {\r\n\t\t\tif (o) Game.CONTAINER.addChild(o.obj);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get IS_HOVERING_PROGRESS() {\r\n\t\treturn Game._IS_HOVERING_PROGRESS;\r\n\t}\r\n\r\n\tstatic set IS_HOVERING_PROGRESS(val) {\r\n\t\tGame._IS_HOVERING_PROGRESS = val;\r\n\r\n\t\tif (!Game.IS_FULLSCREEN) return;\r\n\r\n\t\tif (val) {\r\n\t\t\tGame.FPS.y = Game.MASTER_CONTAINER.h - 70;\r\n\t\t} else {\r\n\t\t\tGame.FPS.y = Game.MASTER_CONTAINER.h - 10;\r\n\t\t}\r\n\t}\r\n\r\n\t// Remove certain objects from container\r\n\tstatic removeFromContainer(objectsList) {\r\n\t\tobjectsList.forEach((o) => {\r\n\t\t\tif (o) Game.CONTAINER.removeChild(o.obj);\r\n\t\t});\r\n\t}\r\n\r\n\tstatic async CursorInit() {\r\n\t\tconst cursor = new Cursor();\r\n\t\tawait cursor.init();\r\n\t\treturn cursor;\r\n\t}\r\n\r\n\tstatic async FPSInit() {\r\n\t\tawait PIXI.Assets.load({\r\n\t\t\tsrc: \"/static/NICOLATTE.ttf\",\r\n\t\t\tloadParser: \"loadWebFont\",\r\n\t\t});\r\n\r\n\t\tconst fpsStyle = {\r\n\t\t\tfontFamily: \"Nicolatte\",\r\n\t\t\talign: \"right\",\r\n\t\t\tfontSize: 15,\r\n\t\t\tfill: \"white\",\r\n\t\t\tfontWeight: 600,\r\n\t\t\tletterSpacing: 1,\r\n\t\t};\r\n\r\n\t\tconst fpsSprite = new PIXI.BitmapText({\r\n\t\t\ttext: `0fps\\nInfinite ms`,\r\n\t\t\t// renderMode: \"bitmap\",\r\n\t\t\tstyle: {\r\n\t\t\t\t...fpsStyle,\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\tfpsSprite.anchor.set(1, 1);\r\n\t\tfpsSprite.x = Game.MASTER_CONTAINER.w - 10;\r\n\t\tfpsSprite.y = Game.MASTER_CONTAINER.h - 10;\r\n\r\n\t\treturn fpsSprite;\r\n\t}\r\n\r\n\tstatic dragWindowInit() {\r\n\t\t// Drag window initialize\r\n\t\tconst dragWindow = new PIXI.Graphics().setStrokeStyle({\r\n\t\t\twidth: 2,\r\n\t\t\tcolor: 0xffffff,\r\n\t\t\talpha: 1,\r\n\t\t\talignment: 0,\r\n\t\t});\r\n\r\n\t\t// Set drag window initial position\r\n\t\tdragWindow.x = Game.OFFSET_X;\r\n\t\tdragWindow.y = Game.OFFSET_Y;\r\n\t\tdragWindow.alpha = 0;\r\n\r\n\t\treturn dragWindow;\r\n\t}\r\n\r\n\tstatic gridInit() {\r\n\t\t// Grid initialize\r\n\t\tconst graphics = new PIXI.Graphics()\r\n\t\t\t.setStrokeStyle({\r\n\t\t\t\twidth: 1,\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\talpha: 0.1,\r\n\t\t\t\talignment: 0.5,\r\n\t\t\t})\r\n\t\t\t.rect(0, 0, 512, 384)\r\n\t\t\t.stroke();\r\n\r\n\t\t// Draw grid\r\n\t\tconst gridWidth = 512 / 16;\r\n\t\tconst gridHeight = 384 / 12;\r\n\t\tfor (let i = 0; i < 16; i++) {\r\n\t\t\tfor (let j = 0; j < 12; j++) {\r\n\t\t\t\tgraphics\r\n\t\t\t\t\t.rect(i * gridWidth, j * gridHeight, gridWidth, gridHeight)\r\n\t\t\t\t\t.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t\tgraphics\r\n\t\t\t.setStrokeStyle({\r\n\t\t\t\twidth: 1,\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\talpha: 0.2,\r\n\t\t\t\talignment: 0.5,\r\n\t\t\t})\r\n\t\t\t.moveTo(256, 0)\r\n\t\t\t.lineTo(256, 384)\r\n\t\t\t.stroke();\r\n\r\n\t\tgraphics\r\n\t\t\t.setStrokeStyle({\r\n\t\t\t\twidth: 1,\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\talpha: 0.2,\r\n\t\t\t\talignment: 0.5,\r\n\t\t\t})\r\n\t\t\t.moveTo(0, 192)\r\n\t\t\t.lineTo(512, 192)\r\n\t\t\t.stroke();\r\n\r\n\t\t// Create grid texture and sprite\r\n\t\tconst texture = Game.APP.renderer.generateTexture(graphics);\r\n\r\n\t\tconst grid = new PIXI.Sprite(texture);\r\n\t\tgrid.width = 512;\r\n\t\tgrid.height = 384;\r\n\t\tgrid.x = Game.OFFSET_X;\r\n\t\tgrid.y = Game.OFFSET_Y;\r\n\t\tgrid.alpha = 1;\r\n\t\tgrid.scale.set(Game.SCALE_RATE);\r\n\r\n\t\t// grid.interactive = true;\r\n\t\tgrid.eventMode = \"static\";\r\n\r\n\t\tif (Game.SLIDER_APPEARANCE.showGrid) {\r\n\t\t\tgrid.alpha = 1;\r\n\t\t} else {\r\n\t\t\tgrid.alpha = 0.01;\r\n\t\t}\r\n\r\n\t\tconst clickControl = (e) => {\r\n\t\t\tif (!Game.BEATMAP_FILE || !Game.BEATMAP_FILE.isLoaded) return;\r\n\r\n\t\t\tconst currentTime = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\r\n\t\t\tlet { x, y } = e.global;\r\n\t\t\tx -= Game.OFFSET_X;\r\n\t\t\ty -= Game.OFFSET_Y + Game.MASTER_CONTAINER.y + Game.WRAPPER.y;\r\n\r\n\t\t\tx /= Game.SCALE_RATE;\r\n\t\t\ty /= Game.SCALE_RATE;\r\n\r\n\t\t\tconst selectedObjList =\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.filtered\r\n\t\t\t\t\t.filter((o) => checkCollide(x, y, o))\r\n\t\t\t\t\t.map(\r\n\t\t\t\t\t\t(objMeta) =>\r\n\t\t\t\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList[\r\n\t\t\t\t\t\t\t\tobjMeta.idx\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t);\r\n\r\n\t\t\tconst selectedObj = selectedObjList.length\r\n\t\t\t\t? selectedObjList.reduce((prev, curr) => {\r\n\t\t\t\t\t\tconst prevOffset = Math.abs(prev.time - currentTime);\r\n\t\t\t\t\t\tconst currOffset = Math.abs(curr.time - currentTime);\r\n\r\n\t\t\t\t\t\treturn prevOffset > currOffset ? curr : prev;\r\n\t\t\t\t\t})\r\n\t\t\t\t: undefined;\r\n\r\n\t\t\tif (selectedObj) {\r\n\t\t\t\tif (!e.ctrlKey) {\r\n\t\t\t\t\tGame.SELECTED = [selectedObj.obj.time];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tGame.SELECTED = Game.SELECTED.concat([selectedObj.obj.time]).filter(\r\n\t\t\t\t\t\t(t, idx, a) => a.indexOf(t) === idx,\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t} else if (!Game.DID_MOVE) {\r\n\t\t\t\tGame.SELECTED = [];\r\n\t\t\t}\r\n\r\n\t\t\tGame.DID_MOVE = false;\r\n\t\t};\r\n\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"click\", (e) => {\r\n\t\t\tclickControl(e);\r\n\t\t});\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"touchstart\", (e) => {\r\n\t\t\tclickControl(e);\r\n\t\t});\r\n\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"touchend\", (e) => {});\r\n\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"mousedown\", (e) => {\r\n\t\t\tif (!Game.BEATMAP_FILE || !Game.BEATMAP_FILE.isLoaded) return;\r\n\r\n\t\t\tlet { x, y } = e.global;\r\n\t\t\tx -= Game.OFFSET_X;\r\n\t\t\ty -= Game.OFFSET_Y + Game.MASTER_CONTAINER.y + Game.WRAPPER.y;\r\n\r\n\t\t\tx /= Game.WIDTH / 512;\r\n\t\t\ty /= Game.WIDTH / 512;\r\n\r\n\t\t\tGame.IS_DRAGGING = true;\r\n\t\t\tGame.DRAGGING_START = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\t\t\tGame.START_X = x;\r\n\t\t\tGame.START_Y = y;\r\n\r\n\t\t\tGame.DRAG_WINDOW.clear();\r\n\t\t\tGame.DRAG_WINDOW.setStrokeStyle({\r\n\t\t\t\twidth: 1,\r\n\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\talpha: 1,\r\n\t\t\t\talignment: 0,\r\n\t\t\t});\r\n\r\n\t\t\tGame.DRAG_WINDOW.rect(x, y, 0, 0)\r\n\t\t\t\t.fill({ color: 0xffffff, alpha: 0.2 })\r\n\t\t\t\t.stroke();\r\n\r\n\t\t\tGame.DRAG_WINDOW.alpha = 1;\r\n\r\n\t\t\t// console.log(\"Mouse DOWN\");\r\n\t\t});\r\n\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"mouseup\", (e) => {\r\n\t\t\tif (!Game.BEATMAP_FILE || !Game.BEATMAP_FILE.isLoaded) return;\r\n\r\n\t\t\tif (Game.CURRENT_X !== -1 && Game.CURRENT_Y !== -1) {\r\n\t\t\t}\r\n\r\n\t\t\tGame.IS_DRAGGING = false;\r\n\t\t\tGame.DRAG_WINDOW.alpha = 0;\r\n\t\t\t// console.log(\"Mouse UP\");\r\n\t\t});\r\n\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"mousemove\", (e) => {\r\n\t\t\tif (!Game.BEATMAP_FILE || !Game.BEATMAP_FILE.isLoaded) return;\r\n\r\n\t\t\tlet { x, y } = e.global;\r\n\t\t\tx -= Game.OFFSET_X;\r\n\t\t\ty -= Game.OFFSET_Y + Game.MASTER_CONTAINER.y + Game.WRAPPER.y;\r\n\r\n\t\t\tx /= Game.SCALE_RATE;\r\n\t\t\ty /= Game.SCALE_RATE;\r\n\r\n\t\t\t// console.log(x, y);\r\n\r\n\t\t\tif (Game.IS_DRAGGING) {\r\n\t\t\t\tGame.DID_MOVE = true;\r\n\t\t\t\tGame.DRAGGING_END = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\t\t\t\tGame.CURRENT_X = x;\r\n\t\t\t\tGame.CURRENT_Y = y;\r\n\t\t\t\t// console.log(\"Moving\");\r\n\t\t\t\thandleCanvasDrag(e);\r\n\r\n\t\t\t\tGame.DRAG_WINDOW.clear();\r\n\t\t\t\tGame.DRAG_WINDOW.setStrokeStyle({\r\n\t\t\t\t\twidth: 1,\r\n\t\t\t\t\tcolor: 0xffffff,\r\n\t\t\t\t\talpha: 1,\r\n\t\t\t\t\talignment: 0,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tGame.DRAG_WINDOW.rect(\r\n\t\t\t\t\t(Math.min(Game.START_X, x) * Game.WIDTH) / 512,\r\n\t\t\t\t\t(Math.min(Game.START_Y, y) * Game.WIDTH) / 512,\r\n\t\t\t\t\t(Math.abs(x - Game.START_X) * Game.WIDTH) / 512,\r\n\t\t\t\t\t(Math.abs(y - Game.START_Y) * Game.WIDTH) / 512,\r\n\t\t\t\t)\r\n\t\t\t\t\t.fill({ color: 0xffffff, alpha: 0.2 })\r\n\t\t\t\t\t.stroke();\r\n\t\t\t}\r\n\r\n\t\t\tconst currentTime = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\t\t\tconst inRender =\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.filtered\r\n\t\t\t\t\t.filter(\r\n\t\t\t\t\t\t(o) =>\r\n\t\t\t\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList[\r\n\t\t\t\t\t\t\t\to.idx\r\n\t\t\t\t\t\t\t].obj instanceof Slider && checkCollide(x, y, o),\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.map(\r\n\t\t\t\t\t\t(objMeta) =>\r\n\t\t\t\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList[\r\n\t\t\t\t\t\t\t\tobjMeta.idx\r\n\t\t\t\t\t\t\t],\r\n\t\t\t\t\t);\r\n\t\t\tconst selectedSlider = inRender.reduce((selected, current) => {\r\n\t\t\t\tif (\r\n\t\t\t\t\tMath.abs(current.obj.time - currentTime) <\r\n\t\t\t\t\tMath.abs(selected.obj.time - currentTime)\r\n\t\t\t\t)\r\n\t\t\t\t\treturn current;\r\n\r\n\t\t\t\treturn selected;\r\n\t\t\t}, inRender[0] ?? null);\r\n\r\n\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.slidersList.forEach(\r\n\t\t\t\t(o) => (o.obj.isHover = false),\r\n\t\t\t);\r\n\r\n\t\t\tif (selectedSlider) selectedSlider.obj.isHover = true;\r\n\t\t});\r\n\r\n\t\tlet timer;\r\n\t\tGame.MASTER_CONTAINER.masterContainer.on(\"touchend\", (e) => {\r\n\t\t\tif (!Game.IS_FULLSCREEN) return;\r\n\r\n\t\t\tif (!Game.IS_HOVERING_PROGRESS) {\r\n\t\t\t\tGame.IS_HOVERING_PROGRESS = true;\r\n\t\t\t\ttimer = setTimeout(() => {\r\n\t\t\t\t\tGame.IS_HOVERING_PROGRESS = false;\r\n\t\t\t\t}, 5000);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tclearTimeout(timer);\r\n\t\t\tGame.IS_HOVERING_PROGRESS = false;\r\n\t\t});\r\n\r\n\t\treturn grid;\r\n\t}\r\n\r\n\tstatic containerInit() {\r\n\t\t// Container initialize\r\n\t\tconst container = new PIXI.Container();\r\n\t\tcontainer.label = \"Playfield\";\r\n\r\n\t\t// Set container offset\r\n\t\tcontainer.x = Game.OFFSET_X;\r\n\t\tcontainer.y = Game.OFFSET_Y;\r\n\t\tcontainer.eventMode = \"none\";\r\n\t\tcontainer.sortableChildren = true;\r\n\r\n\t\treturn container;\r\n\t}\r\n\r\n\tstatic appResize() {\r\n\t\tif (innerWidth / innerHeight < 1 || Game.IS_FULLSCREEN) {\r\n\t\t\tGame.WRAPPER.borderRadius = 0;\r\n\t\t} else {\r\n\t\t\tGame.WRAPPER.borderRadius = 10;\r\n\t\t}\r\n\r\n\t\t// Resize Game Field\r\n\t\tGame.appSizeSetup();\r\n\t\tGame.gameSizeSetup();\r\n\r\n\t\tif (this.EMIT_STACK.length === 0) return;\r\n\t\tGame.APP.renderer.resolution = Game.RESOLUTION;\r\n\r\n\t\t// Reposition grid\r\n\t\tGame.GRID.x = Game.OFFSET_X;\r\n\t\tGame.GRID.y = Game.OFFSET_Y;\r\n\t\tGame.GRID.scale.set(Game.SCALE_RATE);\r\n\r\n\t\t// Reposition container\r\n\t\tGame.CONTAINER.x = Game.OFFSET_X;\r\n\t\tGame.CONTAINER.y = Game.OFFSET_Y;\r\n\r\n\t\t// Reposition drag window\r\n\t\tGame.DRAG_WINDOW.x = Game.OFFSET_X;\r\n\t\tGame.DRAG_WINDOW.y = Game.OFFSET_Y;\r\n\r\n\t\t// Reposition FPS\r\n\t\tGame.FPS.x = Game.MASTER_CONTAINER.w - 10;\r\n\t\tGame.FPS.y = Game.MASTER_CONTAINER.h - 10;\r\n\t\tGame.FPS.style.fontSize = 15;\r\n\r\n\t\tGame.INFO.update();\r\n\t\tGame.STATS.update();\r\n\t\tBackground.updateSize();\r\n\t}\r\n\r\n\tstatic appSizeSetup() {\r\n\t\t// Set renderer size to container size\r\n\t\tlet { width, height } = getComputedStyle(\r\n\t\t\tdocument.querySelector(\".contentWrapper\"),\r\n\t\t);\r\n\t\twidth = Math.round(parseInt(width));\r\n\t\theight = Math.round(parseInt(height));\r\n\t\tconst preHeight = height;\r\n\t\tGame.COMPUTED_HEIGHT = preHeight;\r\n\r\n\t\tif (innerWidth / innerHeight < 1) {\r\n\t\t\theight = Math.round(\r\n\t\t\t\tMath.max(\r\n\t\t\t\t\theight,\r\n\t\t\t\t\t(ProgressBar?.MASTER_CONTAINER?.y ?? 0) +\r\n\t\t\t\t\t\t(ProgressBar?.MASTER_CONTAINER?.h ?? 0) +\r\n\t\t\t\t\t\t70,\r\n\t\t\t\t),\r\n\t\t\t);\r\n\r\n\t\t\tif (\r\n\t\t\t\tpreHeight !== height &&\r\n\t\t\t\tdocument.querySelector(\".contentWrapper\").style.height !== height\r\n\t\t\t) {\r\n\t\t\t\tdocument.querySelector(\".contentWrapper\").style.height = `${height}px`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tGame.APP.renderer.width === width &&\r\n\t\t\tGame.APP.renderer.height === height\r\n\t\t)\r\n\t\t\treturn;\r\n\t\tthis.EMIT_STACK.push(true);\r\n\t\t// console.log(\"Stack Added! 0\", width, height, Game.APP.renderer.width, Game.APP.renderer.height);\r\n\t\tGame.APP.renderer.resize(width, height);\r\n\r\n\t\t// Game.APP.canvas.style.transform = `scale(${1 })`;\r\n\t}\r\n\r\n\tstatic async appInit() {\r\n\t\t// App initialize\r\n\t\tGame.APP = new PIXI.Application();\r\n\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tconst preferred = currentLocalStorage.renderer.val;\r\n\r\n\t\tconst initOptions = {\r\n\t\t\tantialias: currentLocalStorage.renderer.aa,\r\n\t\t\tresolution: currentLocalStorage.renderer.resolution,\r\n\t\t\tautoDensity: true,\r\n\t\t\tbackgroundAlpha: 0,\r\n\t\t\tresizeTo: document.querySelector(\".contentWrapper\"),\r\n\t\t};\r\n\r\n\t\tif (preferred === \"webgl\") initOptions.preference = \"webgl\";\r\n\t\tif (preferred === \"webgpu\") initOptions.preference = \"webgpu\";\r\n\r\n\t\tawait Game.APP.init(initOptions);\r\n\r\n\t\t// console.log(Game.APP.renderer);\r\n\t\tif (Game.APP.renderer.gl) console.log(\"USING WEBGL 2\");\r\n\t\tif (Game.APP.renderer.gpu) console.log(\"USING WEBGPU\");\r\n\r\n\t\tGame.appSizeSetup();\r\n\t\tGame.gameInit();\r\n\t}\r\n\r\n\tstatic gameSizeSetup() {\r\n\t\tGame.WRAPPER.y = 0;\r\n\r\n\t\tif (innerWidth / innerHeight < 1) {\r\n\t\t\tif (Game.WRAPPER.w !== Game.APP.renderer.width) {\r\n\t\t\t\tGame.WRAPPER.w = Game.APP.renderer.width;\r\n\t\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t\t\t// console.log(\"Stack Added! 1\");\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\tGame.WRAPPER.w !==\r\n\t\t\t\tGame.APP.renderer.width - (Game.REDUCTION / 400) * 410\r\n\t\t\t) {\r\n\t\t\t\tGame.WRAPPER.w = Game.APP.renderer.width - (Game.REDUCTION / 400) * 410;\r\n\t\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t\t\t// console.log(\"Stack Added! 2\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (Game.WRAPPER.h !== Game.APP.renderer.height) {\r\n\t\t\tGame.WRAPPER.h = Game.APP.renderer.height;\r\n\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t\t// console.log(\"Stack Added! 3\");\r\n\t\t}\r\n\r\n\t\tif (Game.MASTER_CONTAINER.w !== Game.WRAPPER.w) {\r\n\t\t\tGame.MASTER_CONTAINER.w = Game.WRAPPER.w;\r\n\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t\t// console.log(\"Stack Added! 4\");\r\n\t\t}\r\n\r\n\t\tif (innerWidth / innerHeight < 1) {\r\n\t\t\tif (Game.MASTER_CONTAINER.h !== Game.WRAPPER.w * (3 / 4)) {\r\n\t\t\t\tGame.MASTER_CONTAINER.h = Game.WRAPPER.w * (3 / 4);\r\n\t\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (\r\n\t\t\t\tGame.MASTER_CONTAINER.h !==\r\n\t\t\t\tGame.WRAPPER.h -\r\n\t\t\t\t\t(60 - (Game.IS_FULLSCREEN ? 60 : 0)) -\r\n\t\t\t\t\t(60 - Timeline.HEIGHT_REDUCTION)\r\n\t\t\t) {\r\n\t\t\t\tGame.MASTER_CONTAINER.h =\r\n\t\t\t\t\tGame.WRAPPER.h -\r\n\t\t\t\t\t(60 - (Game.IS_FULLSCREEN ? 60 : 0)) -\r\n\t\t\t\t\t(60 - Timeline.HEIGHT_REDUCTION);\r\n\t\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t\t\t// console.log(\"Stack Added! 6\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (Game.MASTER_CONTAINER.y !== 60 - Timeline.HEIGHT_REDUCTION) {\r\n\t\t\tGame.MASTER_CONTAINER.y = 60 - Timeline.HEIGHT_REDUCTION;\r\n\t\t\tthis.EMIT_STACK.push(true);\r\n\t\t}\r\n\r\n\t\tif (\r\n\t\t\tGame.WIDTH === Game.MASTER_CONTAINER.w &&\r\n\t\t\tGame.HEIGHT === Game.MASTER_CONTAINER.h\r\n\t\t)\r\n\t\t\treturn;\r\n\r\n\t\tGame.WIDTH = Game.MASTER_CONTAINER.w;\r\n\t\tGame.HEIGHT = Game.MASTER_CONTAINER.h;\r\n\r\n\t\t// Change game width and height to match 4:3 aspect ratio\r\n\t\tif (Game.WIDTH / 512 > Game.HEIGHT / 384) {\r\n\t\t\tGame.WIDTH = (Game.HEIGHT / 384) * 512;\r\n\t\t} else {\r\n\t\t\tGame.HEIGHT = (Game.WIDTH / 512) * 384;\r\n\t\t}\r\n\r\n\t\t// Re-scale game size by 80% to make space for padding\r\n\t\tGame.WIDTH *= 0.8;\r\n\t\tGame.HEIGHT *= 0.8;\r\n\r\n\t\t// Calculate offset\r\n\t\tGame.OFFSET_X = (Game.MASTER_CONTAINER.w - Game.WIDTH) / 2;\r\n\t\tGame.OFFSET_Y = (Game.MASTER_CONTAINER.h - Game.HEIGHT) / 2;\r\n\r\n\t\t// Re-scale Game Canvas on Retina / Mobile devices\r\n\r\n\t\t// ...\r\n\t\tGame.SCALE_RATE = Game.WIDTH / 512;\r\n\t\tGame.SB_SCALE_RATE = Game.MASTER_CONTAINER.h / 480;\r\n\t\tGame.SB_OFFSET_X =\r\n\t\t\t-((Game.MASTER_CONTAINER.h * 4) / 3 - Game.MASTER_CONTAINER.w) / 2;\r\n\t\tGame.SB_OFFSET_Y = 0;\r\n\t\t// Game.SB_OFFSET_X = 0;\r\n\t\t// Game.SB_OFFSET_Y = 0;\r\n\t}\r\n\r\n\tstatic gameInit() {\r\n\t\tGame.WRAPPER = new Component(\r\n\t\t\t0,\r\n\t\t\tGame.IS_FULLSCREEN ? 0 : 70,\r\n\t\t\tGame.APP.renderer.width,\r\n\t\t\tGame.APP.renderer.height - (Game.IS_FULLSCREEN ? 0 : 0),\r\n\t\t);\r\n\t\tGame.WRAPPER.masterContainer.label = \"WRAPPER_MASTER\";\r\n\t\tGame.WRAPPER.container.label = \"WRAPPER_CONTAINER\";\r\n\t\tGame.WRAPPER.color = 0x000000;\r\n\t\tGame.WRAPPER.alpha = 0.01;\r\n\t\tGame.WRAPPER.borderRadius = 10;\r\n\r\n\t\tGame.WRAPPER.masterContainer.eventMode = \"dynamic\";\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"touchstart\", (e) => {\r\n\t\t\tGame.START_DRAG_Y = e.global.y;\r\n\t\t\tGame.IS_DRAGSCROLL = true;\r\n\t\t});\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"touchmove\", (e) => {\r\n\t\t\tif (!Game.IS_DRAGSCROLL) return;\r\n\r\n\t\t\tconst delta = e.global.y - Game.START_DRAG_Y;\r\n\t\t\twindow.scrollBy(0, -delta);\r\n\t\t\tGame.START_DRAG_Y = e.global.y;\r\n\t\t});\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"touchend\", (e) => {\r\n\t\t\tGame.START_DRAG_Y = 0;\r\n\t\t\tGame.IS_DRAGSCROLL = false;\r\n\t\t});\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"mousemove\", (e) => {\r\n\t\t\tconst { y } = e.global;\r\n\t\t\tGame.IS_HOVERING_PROGRESS = y - Game.WRAPPER.y >= Game.WRAPPER.h - 60;\r\n\t\t});\r\n\r\n\t\tconst hidePopup = (e) => {\r\n\t\t\tconst { x, y } = Game.WRAPPER.masterContainer.toLocal(e.global);\r\n\r\n\t\t\tconst left = Timestamp.MASTER_CONTAINER.x;\r\n\t\t\tconst right = Timestamp.MASTER_CONTAINER.x + Timestamp.MASTER_CONTAINER.w;\r\n\t\t\tconst top = Timestamp.MASTER_CONTAINER.y;\r\n\t\t\tconst bottom =\r\n\t\t\t\tTimestamp.MASTER_CONTAINER.y + Timestamp.MASTER_CONTAINER.h;\r\n\r\n\t\t\tif (\r\n\t\t\t\t(x < left || x > right || y < top || y > bottom) &&\r\n\t\t\t\tdocument.querySelector(\".seekTo\").open\r\n\t\t\t) {\r\n\t\t\t\tclosePopup();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"tap\", (e) => {\r\n\t\t\tif (Game.SHOW_METADATA && !MetadataPanel.ON_ANIM) toggleMetadataPanel();\r\n\t\t\tif (Game.SHOW_TIMING_PANEL && !TimingPanel.ON_ANIM) toggleTimingPanel();\r\n\r\n\t\t\thidePopup(e);\r\n\t\t});\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"click\", (e) => {\r\n\t\t\thidePopup(e);\r\n\t\t});\r\n\r\n\t\tGame.MASTER_CONTAINER = new Component(\r\n\t\t\t0,\r\n\t\t\t60,\r\n\t\t\tGame.APP.renderer.width,\r\n\t\t\tGame.APP.renderer.height - 60,\r\n\t\t);\r\n\t\tGame.MASTER_CONTAINER.masterContainer.label = \"MASTER_MASTER_CONTAINER\";\r\n\t\tGame.MASTER_CONTAINER.container.label = \"MASTER_CONTAINER\";\r\n\t\tGame.MASTER_CONTAINER.overflow = \"visible\";\r\n\t\tGame.gameSizeSetup();\r\n\t}\r\n\r\n\tstatic async init() {\r\n\t\tawait Game.appInit();\r\n\t\tawait loadParallel((loadAsync) => {\r\n\t\t\tGame.BACKGROUND = Background.init();\r\n\t\t\tGame.CONTAINER = Game.containerInit();\r\n\t\t\tGame.GRID = Game.gridInit();\r\n\t\t\tGame.DRAG_WINDOW = Game.dragWindowInit();\r\n\t\t\tloadAsync(async () => Game.FPS = await Game.FPSInit());\r\n\t\t\tloadAsync(async () => Game.CURSOR = await Game.CursorInit());\r\n\t\t\tGame.INFO = new TitleArtist(\"\", \"\", \"\", \"\");\r\n\t\t\tGame.STATS = new Stats();\r\n\t\t})\r\n\r\n\t\tGame.MASTER_CONTAINER.container.addChild(Game.GRID);\r\n\t\tGame.MASTER_CONTAINER.container.addChild(Game.DRAG_WINDOW);\r\n\t\tGame.MASTER_CONTAINER.container.addChild(Game.CONTAINER);\r\n\t\tGame.MASTER_CONTAINER.container.addChild(Game.FPS);\r\n\t\tGame.MASTER_CONTAINER.container.addChild(Game.CURSOR.obj);\r\n\r\n\t\tStoryboard.init();\r\n\t\tBackground.container.addChild(Storyboard.container);\r\n\t\tBackground.container.addChild(Background.dim);\r\n\t\tBackground.container.addChild(Background.mask);\r\n\r\n\t\tGame.WRAPPER.container.addChild(Background.container);\r\n\r\n\t\tGame.APP.stage.addChild(Game.WRAPPER.masterContainer);\r\n\t\tGame.WRAPPER.container.addChild(Game.MASTER_CONTAINER.masterContainer);\r\n\r\n\t\tGame.MASTER_CONTAINER.container.addChild(\r\n\t\t\tGame.INFO.MASTER_CONTAINER.masterContainer,\r\n\t\t);\r\n\t\tGame.MASTER_CONTAINER.container.addChild(Game.STATS.container.container);\r\n\r\n\t\tTimestamp.init();\r\n\t\tGame.WRAPPER.container.addChild(Timestamp.MASTER_CONTAINER.masterContainer);\r\n\r\n\t\tBPM.init();\r\n\t\tGame.WRAPPER.container.addChild(BPM.MASTER_CONTAINER.masterContainer);\r\n\r\n\t\tawait loadParallel((loadAsync) => {\r\n\t\t\tloadAsync(PlayContainer.init())\r\n\t\t\tloadAsync(FullscreenButton.init())\r\n\t\t\tloadAsync(Timeline.init())\r\n\t\t\tloadAsync(User.init())\r\n\t\t})\r\n\r\n\t\tGame.WRAPPER.container.addChild(PlayContainer.MASTER_CONTAINER.container);\r\n\r\n\t\tProgressBar.init();\r\n\t\tGame.WRAPPER.container.addChild(\r\n\t\t\tProgressBar.MASTER_CONTAINER.masterContainer,\r\n\t\t);\r\n\r\n\t\tGame.WRAPPER.container.addChild(FullscreenButton.obj.container);\r\n\r\n\t\tGame.WRAPPER.container.addChild(Timeline.MASTER_CONTAINER.masterContainer);\r\n\r\n\t\tTimingPanel.init();\r\n\t\tGame.APP.stage.addChild(TimingPanel.MASTER_CONTAINER.masterContainer);\r\n\r\n\t\tMetadataPanel.init();\r\n\t\tGame.APP.stage.addChild(MetadataPanel.MASTER_CONTAINER.masterContainer);\r\n\t\t// User.updateInfo({\r\n\t\t//     username: \"[Boy]Dalat\",\r\n\t\t//     mods: [\"Hidden\", \"HardRock\"]\r\n\t\t// })\r\n\t\tGame.APP.stage.addChild(User.container);\r\n\r\n\t\tconst scrollEventHandler = (event) => {\r\n\t\t\tif (Game.IS_DRAGGING && Game.CURRENT_X !== -1 && Game.CURRENT_Y !== -1) {\r\n\t\t\t\tGame.DRAGGING_END = Game.BEATMAP_FILE.audioNode.getCurrentTime();\r\n\t\t\t\thandleCanvasDrag();\r\n\t\t\t}\r\n\r\n\t\t\tif (event.altKey) return;\r\n\r\n\t\t\tif (!event.ctrlKey) {\r\n\t\t\t\tif (event.deltaY > 0) go(event.shiftKey, true);\r\n\t\t\t\tif (event.deltaY < 0) go(event.shiftKey, false);\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// event.preventDefault();\r\n\r\n\t\t\tif (event.deltaY > 0) {\r\n\t\t\t\tdocument.querySelector(\"#beat\").value = Math.max(\r\n\t\t\t\t\tparseInt(document.querySelector(\"#beat\").value) - 1,\r\n\t\t\t\t\t1,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tif (event.deltaY < 0) {\r\n\t\t\t\tdocument.querySelector(\"#beat\").value = Math.min(\r\n\t\t\t\t\tparseInt(document.querySelector(\"#beat\").value) + 1,\r\n\t\t\t\t\t16,\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tsetBeatsnapDivisor(document.querySelector(\"#beat\"));\r\n\t\t\tnew Notification({\r\n\t\t\t\tmessage: `Beatsnap Divisor changed to 1/${document.querySelector(\"#beat\").value}`,\r\n\t\t\t}).notify();\r\n\r\n\t\t\t// console.log(\"Scrolled\");\r\n\t\t};\r\n\r\n\t\tGame.WRAPPER.masterContainer.on(\"wheel\", scrollEventHandler, {\r\n\t\t\tcapture: true,\r\n\t\t\tpassive: false,\r\n\t\t});\r\n\r\n\t\tTimeline.MASTER_CONTAINER.masterContainer.on(\r\n\t\t\t\"wheel\",\r\n\t\t\t(e) => {\r\n\t\t\t\tif (!e.altKey) {\r\n\t\t\t\t\tscrollEventHandler(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.deltaY > 0)\r\n\t\t\t\t\tTimeline.ZOOM_DISTANCE = Clamp(Timeline.ZOOM_DISTANCE - 20, 20, 800);\r\n\t\t\t\tif (e.deltaY < 0)\r\n\t\t\t\t\tTimeline.ZOOM_DISTANCE = Clamp(Timeline.ZOOM_DISTANCE + 20, 20, 800);\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tcapture: true,\r\n\t\t\t\tpassive: false,\r\n\t\t\t},\r\n\t\t);\r\n\r\n\t\t// Add Game Canvas to DOM\r\n\t\tdocument.querySelector(\".contentWrapper\").prepend(Game.APP.canvas);\r\n\t\tglobalThis.__PIXI_APP__ = Game.APP;\r\n\r\n\t\tHitSample.masterGainNode = Game.AUDIO_CTX.createGain();\r\n\t\tHitSample.masterGainNode.gain.value = Game.HS_VOL * Game.MASTER_VOL;\r\n\t\tHitSample.masterGainNode.connect(Game.AUDIO_CTX.destination);\r\n\r\n\t\tTranscoder.loadInBackground();\r\n\r\n\t\tGame.INIT = true;\r\n\t\tGame.WORKER.onmessage = (event) => {\r\n\t\t\tif (event.data.type === \"updateMs\") {\r\n\t\t\t\tconst { deltaMs } = event.data;\r\n\t\t\t\tGame.WORKER_DELTA_MS = deltaMs;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (event.data.type === \"updateOrder\") {\r\n\t\t\t\tif (!Game.BEATMAP_FILE?.beatmapRenderData) return;\r\n\t\t\t\tconst { objects, currentTime, lastTime, timeline } = event.data;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.addTop =\r\n\t\t\t\t\tobjects.addTop;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.addBack =\r\n\t\t\t\t\tobjects.addBack;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.removed =\r\n\t\t\t\t\tobjects.removed;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.filtered =\r\n\t\t\t\t\tobjects.filtered;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.fpBoundary =\r\n\t\t\t\t\tobjects.fpBoundary;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.addedFp =\r\n\t\t\t\t\tobjects.addedFp;\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.removedFp =\r\n\t\t\t\t\tobjects.removedFp;\r\n\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.updateOrder();\r\n\t\t\t\tGame.BEATMAP_FILE.beatmapRenderData.objectsController.playHitsounds(\r\n\t\t\t\t\tcurrentTime,\r\n\t\t\t\t\tlastTime,\r\n\t\t\t\t);\r\n\r\n\t\t\t\tTimeline.updateOrder(timeline);\r\n\t\t\t\tTimeline.DRAW_LIST = timeline.filtered;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// if (!objects.current) return;\r\n\t\t\t// Game.BEATMAP_FILE.beatmapRenderData.objectsController.objectsList[objects.current.idx].obj.playHitsound(currentTime);\r\n\t\t};\r\n\t}\r\n}\r\n","import { Game } from \"./Game.js\";\r\nimport { Texture } from \"./Texture.js\";\r\nimport { Timeline } from \"./Timeline/Timeline.js\";\r\nimport { loadDiff } from \"./InputBar.js\";\r\nimport { Timestamp } from \"./Timestamp.js\";\r\nimport { ProgressBar } from \"./Progress.js\";\r\nimport { Skinning } from \"./Skinning.js\";\r\nimport { HitSample } from \"./Audio.js\";\r\nimport { Database } from \"./Database.js\";\r\nimport * as d3 from \"d3\";\r\nimport axios from \"axios\";\r\nimport { FullscreenButton, PlayContainer } from \"./PlayButtons.js\";\r\nimport { BPM } from \"./BPM.js\";\r\nimport { MetadataPanel } from \"./SidePanel.js\";\r\nimport { Background } from \"./Background.js\";\r\nimport { Storyboard } from \"./Storyboard/Storyboard.js\";\r\n\r\nexport async function removeSkin() {\r\n\tawait Database.removeFromObjStore(this.parentElement.dataset.customIndex);\r\n\r\n\tif (Skinning.SKIN_IDX == this.parentElement.dataset.customIndex) {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\t\tcurrentLocalStorage.skinning.type = \"2\";\r\n\t\tcurrentLocalStorage.skinning.val = -1;\r\n\t\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\t}\r\n\r\n\tdelete Skinning.SKIN_LIST[this.parentElement.dataset.customIndex];\r\n\tSkinning.changeSkin();\r\n\tdelete Texture.CUSTOM[this.parentElement.dataset.customIndex];\r\n\tdelete HitSample.SAMPLES.CUSTOM[this.parentElement.dataset.customIndex];\r\n\r\n\tdocument.querySelector(\"#skinDropdown\").close();\r\n\tdocument.querySelector(\"#skinDropdown\").style.display = \"\";\r\n\r\n\tawait refreshSkinDB();\r\n}\r\n\r\nexport function selectSkin() {\r\n\tconst skinType =\r\n\t\tSkinning.SKIN_ENUM[this.parentElement.dataset.skinId.toUpperCase()];\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.skinning.type = skinType;\r\n\tcurrentLocalStorage.skinning.val = this.parentElement.dataset.customIndex;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tGame.SKINNING.type = skinType;\r\n\r\n\tif (this.parentElement.dataset.skinId === \"custom\") {\r\n\t\tSkinning.SKIN_IDX = this.parentElement.dataset.customIndex;\r\n\t}\r\n\r\n\tSkinning.changeSkin();\r\n\r\n\tdocument.querySelector(\"#skinDropdown\").close();\r\n\tdocument.querySelector(\"#skinDropdown\").style.display = \"\";\r\n}\r\n\r\nexport async function refreshSkinDB() {\r\n\tconst res = await Database.readObjStore(\"skins\");\r\n\tconst allKeys = await Database.getAllKeys();\r\n\t[...document.querySelectorAll('[data-skin-id=\"custom\"]')].forEach((ele) =>\r\n\t\tele.remove(),\r\n\t);\r\n\r\n\tconst skinDropdown = document.querySelector(\"#skinDropdown\");\r\n\r\n\tawait loadParallel((loadAsync) => {\r\n\t\tfor (const [idx, skin] of res.entries()) {\r\n\t\t\tconst skinId = allKeys[idx];\r\n\t\t\tconst { ini, base64s, samples } = skin;\r\n\r\n\t\t\tconst div = document.createElement(\"div\");\r\n\t\t\tdiv.classList.add(\"skinSelection\");\r\n\t\t\tdiv.dataset.skinId = \"custom\";\r\n\t\t\tdiv.dataset.customIndex = skinId;\r\n\r\n\t\t\tconst button = document.createElement(\"button\");\r\n\t\t\tbutton.classList.add(\"skinName\");\r\n\t\t\tbutton.textContent = ini.NAME;\r\n\t\t\tbutton.onclick = selectSkin;\r\n\r\n\t\t\tconst delButton = document.createElement(\"button\");\r\n\t\t\tdelButton.classList.add(\"deleteButton\");\r\n\t\t\tdelButton.innerHTML = `<img width=\"18\" height=\"18\" src=\"/static/delete-forever.png\" alt=\"delete-forever\"/>`;\r\n\t\t\tdelButton.onclick = removeSkin;\r\n\r\n\t\t\tdiv.appendChild(button);\r\n\t\t\tdiv.appendChild(delButton);\r\n\t\t\tskinDropdown.appendChild(div);\r\n\r\n\t\t\tfor (const element of [\r\n\t\t\t\t\"HIT_CIRCLE\",\r\n\t\t\t\t\"HIT_CIRCLE_OVERLAY\",\r\n\t\t\t\t\"SLIDER_B\",\r\n\t\t\t\t\"REVERSE_ARROW\",\r\n\t\t\t\t\"DEFAULTS\",\r\n\t\t\t\t\"SLIDER_FOLLOW_CIRCLE\",\r\n\t\t\t\t\"APPROACH_CIRCLE\",\r\n\t\t\t]) {\r\n\t\t\t\tif (!base64s[element]) continue;\r\n\r\n\t\t\t\tif (element === \"DEFAULTS\") {\r\n\t\t\t\t\tloadAsync(Texture.updateNumberTextures(base64s[element], skinId));\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst { base64, isHD } = base64s[element];\r\n\t\t\t\tloadAsync(Texture.updateTextureFor(element, base64, isHD, skinId));\r\n\t\t\t}\r\n\r\n\t\t\tloadAsync(Skinning.loadHitsounds(samples, skinId));\r\n\t\t}\r\n\t});\r\n\r\n\tSkinning.SKIN_LIST = res.reduce((obj, curr, idx) => {\r\n\t\tobj[allKeys[idx]] = curr;\r\n\t\treturn obj;\r\n\t}, {});\r\n}\r\n\r\nexport async function loadLocalStorage() {\r\n\tawait Database.initDatabase();\r\n\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t`Initializing: Default Samples.\\nMight take a while on first load.`;\r\n\tawait loadDefaultSamples();\r\n\tdocument.querySelector(\"#loadingText\").textContent =\r\n\t\t`Initializing: Default Skins.\\nMight take a while on first load.`;\r\n\tawait refreshSkinDB();\r\n\t// const res = await Database.readObjStore(\"skins\");\r\n\t// const res = await Database.getAllKeys();\r\n\t// const skin1 = await Database.readObjStoreAtKey(1);\r\n\r\n\t// console.log(res);\r\n\r\n\tif (localStorage.getItem(\"settings\")) {\r\n\t\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\r\n\t\t[...document.querySelectorAll('[name=\"mirror\"]')].forEach((ele) => {\r\n\t\t\tif (ele.value === currentLocalStorage.mirror.val) {\r\n\t\t\t\tele.checked = true;\r\n\t\t\t\tdocument.querySelector(\".mirrorIndicator\").textContent =\r\n\t\t\t\t\t`Too slow? Switch to another mirror (currently using: ${\r\n\t\t\t\t\t\tele.value === \"custom\"\r\n\t\t\t\t\t\t\t? \"Custom\"\r\n\t\t\t\t\t\t\t: document.querySelector(`[for=${ele.value}]`).textContent\r\n\t\t\t\t\t})`;\r\n\t\t\t\tdocument.querySelector(`[data-mirror=${ele.value}]`).style.display =\r\n\t\t\t\t\t\"none\";\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (ele.value === \"custom\") return;\r\n\t\t\tdocument.querySelector(`[data-mirror=\"${ele.value}\"]`).style.display =\r\n\t\t\t\t\"block\";\r\n\t\t});\r\n\r\n\t\t// [...document.querySelectorAll('[name=\"renderer\"]')].forEach((ele) => {\r\n\t\t//     ele.checked = ele.value === currentLocalStorage.renderer.val;\r\n\t\t// });\r\n\r\n\t\tdocument.querySelector(\".rendererSelector\").textContent = [\r\n\t\t\t...document.querySelectorAll(\".rendererSelection\"),\r\n\t\t].find(\r\n\t\t\t(renderer) =>\r\n\t\t\t\trenderer.dataset.renderer === currentLocalStorage.renderer.val,\r\n\t\t).textContent;\r\n\t\tdocument.querySelector(\"#resolution\").value =\r\n\t\t\tcurrentLocalStorage.renderer.resolution;\r\n\t\tdocument.querySelector(\"#resolutionVal\").innerHTML =\r\n\t\t\tcurrentLocalStorage.renderer.resolution.toFixed(2);\r\n\t\tGame.RESOLUTION = currentLocalStorage.renderer.resolution;\r\n\r\n\t\tdocument.querySelector(\"#aa\").checked = currentLocalStorage.renderer.aa;\r\n\r\n\t\tSkinning.SKIN_IDX = currentLocalStorage.skinning.val;\r\n\t\tSkinning.changeSkin();\r\n\r\n\t\tdocument.querySelector(\"#custom-mirror\").value =\r\n\t\t\tcurrentLocalStorage.mirror.custom;\r\n\r\n\t\tdocument.querySelector(\"#dim\").value = currentLocalStorage.background.dim;\r\n\t\tdocument.querySelector(\"#bgDimVal\").innerHTML =\r\n\t\t\t`${parseInt(currentLocalStorage.background.dim * 100)}%`;\r\n\t\t// document.querySelector(\"#overlay\").style.backgroundColor = `rgba(0 0 0 / ${currentLocalStorage.background.dim})`;\r\n\t\t// Game.MASTER_CONTAINER.alpha = currentLocalStorage.background.dim;\r\n\t\tBackground.changeOpacity(currentLocalStorage.background.dim);\r\n\t\tGame.ALPHA = currentLocalStorage.background.dim;\r\n\r\n\t\tdocument.querySelector(\"#blur\").value = currentLocalStorage.background.blur;\r\n\t\tdocument.querySelector(\"#bgBlurVal\").innerHTML =\r\n\t\t\t`${parseInt((currentLocalStorage.background.blur / 20) * 100)}%`;\r\n\t\tdocument.querySelector(\".mapBG\").style.filter =\r\n\t\t\t`blur(${currentLocalStorage.background.blur}px)`;\r\n\r\n\t\tdocument.querySelector(\"#video\").checked =\r\n\t\t\tcurrentLocalStorage.background.video;\r\n\t\tdocument.querySelector(\"#transcode\").checked = currentLocalStorage.background.transcodeVideo;\r\n\t\tdocument.querySelector(\"#storyboard\").checked =\r\n\t\t\tcurrentLocalStorage.background.storyboard;\r\n\t\tGame.IS_STORYBOARD = currentLocalStorage.background.storyboard;\r\n\t\tStoryboard.container.visible = Game.IS_STORYBOARD;\r\n\r\n\t\tdocument.querySelector(\"#master\").value = currentLocalStorage.volume.master;\r\n\t\tdocument.querySelector(\"#masterVal\").innerHTML =\r\n\t\t\t`${parseInt(currentLocalStorage.volume.master * 100)}%`;\r\n\t\t// masterVol = currentLocalStorage.volume.master;\r\n\r\n\t\tdocument.querySelector(\"#music\").value = currentLocalStorage.volume.music;\r\n\t\tdocument.querySelector(\"#musicVal\").innerHTML =\r\n\t\t\t`${parseInt(currentLocalStorage.volume.music * 100)}%`;\r\n\t\t// musicVol = currentLocalStorage.volume.music;\r\n\r\n\t\tdocument.querySelector(\"#effect\").value = currentLocalStorage.volume.hs;\r\n\t\tdocument.querySelector(\"#effectVal\").innerHTML =\r\n\t\t\t`${parseInt((currentLocalStorage.volume.hs / 0.4) * 100)}%`;\r\n\r\n\t\tdocument.querySelector(\"#softoffset\").value =\r\n\t\t\tcurrentLocalStorage.mapping.offset;\r\n\t\tdocument.querySelector(\"#softoffsetVal\").innerHTML =\r\n\t\t\t`${parseInt(currentLocalStorage.mapping.offset)}ms`;\r\n\t\t// hsVol = currentLocalStorage.volume.hs;\r\n\r\n\t\tdocument.querySelector(`#disableBMHS`).checked =\r\n\t\t\tcurrentLocalStorage.volume.disableBMHS;\r\n\r\n\t\tdocument.querySelector(\"#showGreenLine\").checked =\r\n\t\t\tcurrentLocalStorage.mapping.showGreenLine;\r\n\r\n\t\tObject.keys(currentLocalStorage.sliderAppearance).forEach((k) => {\r\n\t\t\tif (\r\n\t\t\t\t[\r\n\t\t\t\t\t\"snaking\",\r\n\t\t\t\t\t\"sliderend\",\r\n\t\t\t\t\t\"hitAnim\",\r\n\t\t\t\t\t\"ignoreSkin\",\r\n\t\t\t\t\t\"showGrid\",\r\n\t\t\t\t\t\"disablePerfect\",\r\n\t\t\t\t].includes(k)\r\n\t\t\t) {\r\n\t\t\t\tdocument.querySelector(`#${k}`).checked =\r\n\t\t\t\t\tcurrentLocalStorage.sliderAppearance[k];\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.querySelector(\"#beat\").value =\r\n\t\t\tcurrentLocalStorage.mapping.beatsnap;\r\n\t\tdocument.querySelector(\"#beatVal\").innerHTML =\r\n\t\t\t`1/${currentLocalStorage.mapping.beatsnap}`;\r\n\r\n\t\tTimeline.SHOW_GREENLINE = currentLocalStorage.mapping.showGreenLine;\r\n\t\tTimeline.ZOOM_DISTANCE = currentLocalStorage.timeline.zoomRate;\r\n\r\n\t\t// if (Timeline.SHOW_GREENLINE) document.querySelector(\".timeline\").style.height = \"\";\r\n\t\t// else document.querySelector(\".timelineContainer\").style.height = \"60px\";\r\n\t}\r\n}\r\n\r\nexport function Clamp(val, from, to) {\r\n\treturn Math.max(Math.min(val, to), from);\r\n}\r\n\r\n// https://github.com/ppy/osu-web/blob/master/resources/js/utils/beatmap-helper.ts#L20\r\nconst difficultyColourSpectrum = d3\r\n\t.scaleLinear()\r\n\t.domain([0.1, 1.25, 2, 2.5, 3.3, 4.2, 4.9, 5.8, 6.7, 7.7, 9])\r\n\t.clamp(true)\r\n\t.range([\r\n\t\t\"#4290FB\",\r\n\t\t\"#4FC0FF\",\r\n\t\t\"#4FFFD5\",\r\n\t\t\"#7CFF4F\",\r\n\t\t\"#F6F05C\",\r\n\t\t\"#FF8068\",\r\n\t\t\"#FF4E6F\",\r\n\t\t\"#C645B8\",\r\n\t\t\"#6563DE\",\r\n\t\t\"#18158E\",\r\n\t\t\"#000000\",\r\n\t])\r\n\t.interpolate(d3.interpolateRgb.gamma(2.2));\r\n\r\n// https://github.com/ppy/osu-web/blob/master/resources/js/utils/beatmap-helper.ts#L81\r\nexport const getDiffColor = (rating) => {\r\n\tif (rating < 0.1) return \"#AAAAAA\";\r\n\tif (rating >= 9) return \"#000000\";\r\n\treturn difficultyColourSpectrum(rating);\r\n};\r\n\r\nexport const createDifficultyElement = (obj) => {\r\n\tconst ele = document.createElement(\"div\");\r\n\tele.classList.add(\"diff\");\r\n\r\n\tconst icon = document.createElement(\"div\");\r\n\ticon.classList.add(\"icon\");\r\n\r\n\tconst colorRing = document.createElement(\"div\");\r\n\tcolorRing.classList.add(\"colorRing\");\r\n\tcolorRing.style.border = `solid 4px ${getDiffColor(obj.starRating)}`;\r\n\r\n\ticon.append(colorRing);\r\n\r\n\tconst infoContainer = document.createElement(\"div\");\r\n\tinfoContainer.classList.add(\"infoContainer\");\r\n\r\n\tconst diffName = document.createElement(\"div\");\r\n\tdiffName.classList.add(\"diffName\");\r\n\r\n\tconst starRating = document.createElement(\"div\");\r\n\tstarRating.classList.add(\"starRating\");\r\n\r\n\tdiffName.textContent = obj.name;\r\n\tstarRating.textContent = `Star Rating: ${obj.starRating.toFixed(2)}`;\r\n\r\n\tinfoContainer.append(diffName, starRating);\r\n\tele.append(icon, infoContainer);\r\n\r\n\tele.dataset.filename = obj.fileName;\r\n\tele.dataset.starrating = obj.starRating;\r\n\tele.onclick = loadDiff;\r\n\r\n\treturn {\r\n\t\t...obj,\r\n\t\tele,\r\n\t};\r\n};\r\n\r\nexport const round = (num) => Math.round((num + Number.EPSILON) * 100) / 100;\r\n\r\nexport const loadColorPalette = (bg) => {\r\n\tconst vibrant = new Vibrant(bg);\r\n\tconst swatches = vibrant.swatches();\r\n\r\n\t// const colors = colorThief.getPalette(bg, 2);\r\n\tconst rootCSS = document.querySelector(\":root\");\r\n\r\n\tconst primary =\r\n\t\tswatches.DarkMuted?.getRgb() ?? swatches.DarkVibrant?.getRgb();\r\n\tif (primary) {\r\n\t\tconst lumi =\r\n\t\t\t(0.299 * parseInt(primary[0]) +\r\n\t\t\t\t0.587 * parseInt(primary[1]) +\r\n\t\t\t\t0.114 * parseInt(primary[2])) /\r\n\t\t\t255;\r\n\r\n\t\t// console.log(lumi)\r\n\t\t// console.log(primary)\r\n\r\n\t\tlet primaryHex = d3.color(\r\n\t\t\t`rgb(${parseInt(primary[0])}, ${parseInt(primary[1])}, ${parseInt(primary[2])})`,\r\n\t\t);\r\n\t\tif (lumi < 0.1) {\r\n\t\t\tconst ratio = 0.1 / lumi;\r\n\t\t\tconst k = -Math.log(ratio) / Math.log(0.7);\r\n\r\n\t\t\tprimaryHex = primaryHex.brighter(k);\r\n\t\t\t// console.log(primaryHex);\r\n\t\t}\r\n\t\t// console.log(primary, primaryHex);\r\n\t\tconst primaryPalette = [\r\n\t\t\tprimaryHex.darker(2.0).formatHex(),\r\n\t\t\tprimaryHex.darker(1.0).formatHex(),\r\n\t\t\tprimaryHex.formatHex(),\r\n\t\t\tprimaryHex.brighter(0.6).formatHex(),\r\n\t\t\tprimaryHex.brighter(1.2).formatHex(),\r\n\t\t];\r\n\r\n\t\tprimaryPalette.forEach((val, idx) => {\r\n\t\t\trootCSS.style.setProperty(`--primary-${idx + 1}`, val);\r\n\t\t\tGame.COLOR_PALETTES[`primary${idx + 1}`] = val;\r\n\t\t});\r\n\r\n\t\t// Timestamp.renderer.background.color = parseInt(rootCSS.style.getPropertyValue(\"--primary-5\").slice(1), 16);\r\n\t\tGame.STATS.container.color = Game.COLOR_PALETTES.primary2;\r\n\t\tGame.INFO.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n\t\tTimestamp.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary4;\r\n\t\tBPM.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n\t\tPlayContainer.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary2;\r\n\t\tPlayContainer.playButton.color = Game.COLOR_PALETTES.primary2;\r\n\t\tPlayContainer.prevButton.color = Game.COLOR_PALETTES.primary2;\r\n\t\tPlayContainer.nextButton.color = Game.COLOR_PALETTES.primary2;\r\n\t\tPlayContainer.infoButton.color = Game.COLOR_PALETTES.primary2;\r\n\t\tFullscreenButton.obj.color = Game.COLOR_PALETTES.primary1;\r\n\t\tProgressBar.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary1;\r\n\t\tMetadataPanel.MASTER_CONTAINER.color = Game.COLOR_PALETTES.primary3;\r\n\t\tMetadataPanel.container.color = Game.COLOR_PALETTES.primary1;\r\n\r\n\t\tTimeline.ZOOMER.draw();\r\n\t}\r\n\r\n\tconst accent = swatches.LightVibrant?.getRgb() ??\r\n\t\tswatches.LightMuted?.getRgb() ??\r\n\t\tswatches.Vibrant?.getRgb() ??\r\n\t\tswatches.Muted?.getRgb() ?? [255, 255, 255];\r\n\tif (accent) {\r\n\t\tconst accentHex = d3.color(\r\n\t\t\t`rgb(${parseInt(accent[0])}, ${parseInt(accent[1])}, ${parseInt(accent[2])})`,\r\n\t\t);\r\n\t\trootCSS.style.setProperty(\"--accent-1\", accentHex.formatHex());\r\n\t\tGame.COLOR_PALETTES.accent1 = accentHex.formatHex();\r\n\t}\r\n\r\n\tProgressBar.restyle();\r\n};\r\n\r\nexport async function loadDefaultSamples() {\r\n\tawait loadParallel((loadAsync) => {\r\n\t\tfor (const skin of [\"ARGON\", \"LEGACY\"])\r\n\t\t\tfor (const sampleset of [\"normal\", \"soft\", \"drum\"]) {\r\n\t\t\t\tfor (const hs of [\r\n\t\t\t\t\t\"hitnormal\",\r\n\t\t\t\t\t\"hitwhistle\",\r\n\t\t\t\t\t\"hitfinish\",\r\n\t\t\t\t\t\"hitclap\",\r\n\t\t\t\t\t\"slidertick\",\r\n\t\t\t\t\t\"sliderwhistle\",\r\n\t\t\t\t\t\"sliderslide\",\r\n\t\t\t\t]) {\r\n\t\t\t\t\tloadAsync(async () => {\r\n\t\t\t\t\t\t// console.log(`./static/${skin.toLowerCase()}/${sampleset}-${hs}.wav`);\r\n\t\t\t\t\t\t// const res = (\r\n\t\t\t\t\t\t//     await axios.get(`/static/${skin.toLowerCase()}/${sampleset}-${hs}.wav`, {\r\n\t\t\t\t\t\t//         responseType: \"arraybuffer\",\r\n\t\t\t\t\t\t//     })\r\n\t\t\t\t\t\t// ).data;\r\n\r\n\t\t\t\t\t\tdocument.querySelector(\"#loadingText\").innerHTML =\r\n\t\t\t\t\t\t\t`Initializing: Default Samples.\\n(${skin}: ${sampleset}-${hs})\\nMight take a while on first load.`;\r\n\t\t\t\t\t\tconst arrBuf = await Database.getDefaults(\r\n\t\t\t\t\t\t\t\"samples\",\r\n\t\t\t\t\t\t\t`${sampleset}-${hs}`,\r\n\t\t\t\t\t\t\tskin.toLowerCase(),\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t// console.log(arrBuf);\r\n\t\t\t\t\t\tconst buffer = await Game.AUDIO_CTX.decodeAudioData(arrBuf);\r\n\t\t\t\t\t\tHitSample.SAMPLES[skin][`${sampleset}-${hs}`] = buffer;\r\n\t\t\t\t\t\tHitSample.DEFAULT_SAMPLES[skin][`${sampleset}-${hs}`] = buffer;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t});\r\n}\r\n\r\nexport async function loadSampleSound(sample, idx, buf) {\r\n\ttry {\r\n\t\tif (!buf) {\r\n\t\t\tHitSample.SAMPLES.MAP[`${sample}${idx}`] = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst buffer = await Game.AUDIO_CTX.decodeAudioData(buf);\r\n\t\tHitSample.SAMPLES.MAP[`${sample}${idx}`] = buffer;\r\n\t} catch {\r\n\t\tconsole.log(\"Unable to decode \" + `${sample}${idx}`);\r\n\t}\r\n}\r\n\r\nexport function toDataUrl(url, callback) {\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.onload = function () {\r\n\t\tvar reader = new FileReader();\r\n\t\treader.onloadend = function () {\r\n\t\t\tcallback(reader.result);\r\n\t\t};\r\n\t\treader.readAsDataURL(xhr.response);\r\n\t};\r\n\txhr.open(\"GET\", url);\r\n\txhr.responseType = \"blob\";\r\n\txhr.send();\r\n}\r\n\r\nexport function imageToBase64(url) {\r\n\treturn new Promise(async (resolve, reject) => {\r\n\t\tconst data = await fetch(url);\r\n\t\tconst blob = await data.blob();\r\n\t\tconst reader = new FileReader();\r\n\t\treader.readAsDataURL(blob);\r\n\t\treader.onload = () => {\r\n\t\t\tconst base64data = reader.result;\r\n\t\t\tresolve(base64data);\r\n\t\t};\r\n\t});\r\n}\r\n\r\nexport function changeZoomRate(zoomStep, the) {\r\n\tTimeline.ZOOM_DISTANCE = Clamp(\r\n\t\tTimeline.ZOOM_DISTANCE + zoomStep * 20,\r\n\t\t20,\r\n\t\t800,\r\n\t);\r\n\r\n\tconst currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n\tcurrentLocalStorage.timeline.zoomRate = Timeline.ZOOM_DISTANCE;\r\n\tlocalStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n\r\n\tthe.blur();\r\n}\r\n// document.querySelector(\".zoom .plus\").onclick = () => {\r\n//     changeZoomRate(1, document.querySelector(\".zoom .plus\"));\r\n// };\r\n\r\n// document.querySelector(\".zoom .minus\").onclick = () => {\r\n//     changeZoomRate(-1, document.querySelector(\".zoom .minus\"));\r\n// };\r\n\r\nexport function debounce(func, timeout = 100) {\r\n\tlet timer;\r\n\treturn function (event) {\r\n\t\tif (timer) clearTimeout(timer);\r\n\t\ttimer = setTimeout(func, timeout, event);\r\n\t};\r\n}\r\n\r\nexport const binarySearchRange = (list, startValue, endValue, key) => {\r\n\tlet start = 0;\r\n\tlet end = list.length - 1;\r\n\r\n\tif (list[start][key] > endValue || list[end][key] < startValue) return -1;\r\n\r\n\twhile (end >= start) {\r\n\t\tconst mid = start + Math.floor((end - start) / 2);\r\n\r\n\t\tif (list[mid][key] < startValue) {\r\n\t\t\tstart = mid + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (list[mid][key] > endValue) {\r\n\t\t\tend = mid - 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\treturn mid;\r\n\t}\r\n\r\n\treturn -1;\r\n};\r\n\r\nexport const binarySearch = (list, value, compareFunc) => {\r\n\tlet start = 0;\r\n\tlet end = list.length - 1;\r\n\r\n\twhile (end >= start) {\r\n\t\tconst mid = start + Math.floor((end - start) / 2);\r\n\r\n\t\tif (compareFunc(list[mid], value) === 0) return mid;\r\n\r\n\t\tif (compareFunc(list[mid], value) < 0) {\r\n\t\t\tstart = mid + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (compareFunc(list[mid], value) > 0) {\r\n\t\t\tend = mid - 1;\r\n\t\t}\r\n\t}\r\n\r\n\treturn -1;\r\n};\r\n\r\nexport const binarySearchNearest = (list, value, compareFunc) => {\r\n\tlet start = 0;\r\n\tlet end = list.length - 1;\r\n\tlet mid = start + Math.floor((end - start) / 2);\r\n\r\n\twhile (end >= start) {\r\n\t\tmid = start + Math.floor((end - start) / 2);\r\n\r\n\t\tif (compareFunc(list[mid], value) === 0) return mid;\r\n\r\n\t\tif (compareFunc(list[mid], value) < 0) {\r\n\t\t\tstart = mid + 1;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif (compareFunc(list[mid], value) > 0) {\r\n\t\t\tend = mid - 1;\r\n\t\t}\r\n\t}\r\n\r\n\treturn mid;\r\n};\r\n\r\nexport const Fixed = (val, decimalPlace) =>\r\n\tMath.round(val * 10 ** decimalPlace) / 10 ** decimalPlace;\r\nexport const Dist = (p1, p2) =>\r\n\tMath.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\r\nexport const Add = (p1, p2) => {\r\n\treturn { x: p1.x + p2.x, y: p1.y + p2.y };\r\n};\r\n\r\nexport const FlipHR = (coord) => {\r\n\treturn { x: coord.x, y: 384 - coord.y };\r\n};\r\n\r\nexport const LinearEstimation = (start, end, t) => {\r\n\tconst deltaX = end.x - start.x;\r\n\tconst deltaY = end.y - start.y;\r\n\r\n\treturn {\r\n\t\tx: start.x + deltaX * t,\r\n\t\ty: start.y + deltaY * t,\r\n\t};\r\n};\r\n\r\nexport const ApplyModsToTime = (time, mods) => {\r\n\tif (mods.includes(\"DoubleTime\")) return time / 1.5;\r\n\r\n\tif (mods.includes(\"HalfTime\")) return time / 0.75;\r\n\r\n\treturn time;\r\n};\r\n\r\nexport const TranslateToZero = (point) => {\r\n\tconst pointCop = { ...point };\r\n\tpointCop.x -= 256;\r\n\tpointCop.y -= 192;\r\n\r\n\treturn pointCop;\r\n};\r\n\r\nexport const easeOutQuint = (t) => {\r\n\treturn 1 - Math.pow(1 - t, 5);\r\n};\r\n\r\nexport const easeInSine = (x) => {\r\n\treturn 1 - Math.cos((x * Math.PI) / 2);\r\n};\r\n\r\nexport const easeOutSine = (x) => {\r\n\treturn Math.sin((x * Math.PI) / 2);\r\n};\r\n\r\nexport const easeOutBack = (x) => {\r\n\tconst c1 = 1.70158;\r\n\tconst c3 = c1 + 1;\r\n\r\n\treturn 1 + c3 * Math.pow(x - 1, 3) + c1 * Math.pow(x - 1, 2);\r\n};\r\n\r\nexport const easeOutElastic = (x) => {\r\n\tconst c4 = (2 * Math.PI) / 3;\r\n\r\n\treturn x === 0\r\n\t\t? 0\r\n\t\t: x === 1\r\n\t\t\t? 1\r\n\t\t\t: Math.pow(2, -10 * x) * Math.sin((x * 10 - 0.75) * c4) + 1;\r\n};\r\n\r\n// https://github.com/Damnae/storybrew/blob/master/common/Animations/EasingFunctions.cs\r\nexport const easeOutElasticHalf = (x) =>\r\n\tMath.pow(2, -10 * x) * Math.sin(((0.5 * x - 0.075) * (2 * Math.PI)) / 0.3) +\r\n\t1;\r\nexport const easeOutElasticQuart = (x) =>\r\n\tMath.pow(2, -10 * x) * Math.sin(((0.25 * x - 0.075) * (2 * Math.PI)) / 0.3) +\r\n\t1;\r\n\r\n/**\r\n * Allows queueing up several promises in parallel\r\n *\r\n * @example ```js\r\n * await loadParallel((loadAsync) => {\r\n *      loadAsync(async () => await someAsyncValue());\r\n *      loadAsync(async () => await someOtherAsyncValue());\r\n *      loadAsync(somePromise);\r\n * })\r\n * ```\r\n *\r\n * @param {(fnOrPromise: Promise<any> | (() => Promise<any>)) => void | Promise<void>} loadFn\r\n * @returns {Promise<unknown[]>}\r\n */\r\nexport async function loadParallel(loadFn) {\r\n\tconst loadPromises = [];\r\n\r\n\tconst loadAsync = (fnOrPromise) =>\r\n\t\tloadPromises.push(\r\n\t\t\ttypeof fnOrPromise === \"function\" ? fnOrPromise() : fnOrPromise,\r\n\t\t);\r\n\r\n\tawait loadFn(loadAsync);\r\n\r\n\treturn await Promise.all(loadPromises);\r\n}\r\n\r\nexport function getOS() {\r\n\tvar userAgent = window.navigator.userAgent,\r\n\t\tplatform = window.navigator.platform,\r\n\t\tmacosPlatforms = [\"Macintosh\", \"MacIntel\", \"MacPPC\", \"Mac68K\"],\r\n\t\twindowsPlatforms = [\"Win32\", \"Win64\", \"Windows\", \"WinCE\"],\r\n\t\tiosPlatforms = [\"iPhone\", \"iPad\", \"iPod\"],\r\n\t\tos = null;\r\n\r\n\tif (macosPlatforms.indexOf(platform) !== -1) {\r\n\t\tos = \"Mac OS\";\r\n\t} else if (iosPlatforms.indexOf(platform) !== -1) {\r\n\t\tos = \"iOS\";\r\n\t} else if (windowsPlatforms.indexOf(platform) !== -1) {\r\n\t\tos = \"Windows\";\r\n\t} else if (/Android/.test(userAgent)) {\r\n\t\tos = \"Android\";\r\n\t} else if (!os && /Linux/.test(platform)) {\r\n\t\tos = \"Linux\";\r\n\t}\r\n\r\n\treturn os;\r\n}\r\n","import { imageToBase64 } from \"./Utils\";\r\nimport { Game } from \"./Game\";\r\nimport axios from 'axios';\r\n\r\nexport class Database {\r\n    static db = null;\r\n\r\n    static initDatabase() {\r\n        return new Promise((resolve, reject) => {\r\n            const request = window.indexedDB.open(\"settingsDB\", 2);\r\n\r\n            request.onupgradeneeded = (event) => {\r\n                Database.db = event.target.result;\r\n                console.log(\"DB updgrade success\");\r\n\r\n                if (event.oldVersion < 1) Database.db.createObjectStore(\"skins\", { autoIncrement: true });\r\n                if (event.oldVersion < 2) Database.db.createObjectStore(\"defaultSkins\");\r\n            };\r\n\r\n            request.onerror = () => {\r\n                console.error(\"The\");\r\n                reject(request.error);\r\n            };\r\n\r\n            request.onsuccess = () => {\r\n                Database.db = request.result;\r\n                console.log(\"DB request success\");\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n\r\n    static readObjStore() {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"skins\", \"readonly\");\r\n\r\n            const objStore = transaction.objectStore(\"skins\");\r\n\r\n            objStore.getAll().onsuccess = (event) => {\r\n                resolve(event.target.result);\r\n            };\r\n\r\n            objStore.getAll().onerror = (event) => {\r\n                reject(event);\r\n            };\r\n        });\r\n    }\r\n\r\n    static readObjStoreAtKey(key) {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"skins\", \"readonly\");\r\n            const objStore = transaction.objectStore(\"skins\");\r\n\r\n            const request = objStore.get(key);\r\n\r\n            request.onsuccess = (event) => {\r\n                resolve(request.result);\r\n            };\r\n\r\n            request.onerror = (event) => {\r\n                reject(request.error);\r\n            };\r\n        });\r\n    }\r\n\r\n    static removeFromObjStore(key) {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"skins\", \"readwrite\");\r\n            const objStore = transaction.objectStore(\"skins\");\r\n\r\n            let request = objStore.delete(+key);\r\n\r\n            request.onsuccess = (event) => {\r\n                console.log(\"Deleted skin from IDB\", event.target.result);\r\n                resolve();\r\n            };\r\n\r\n            request.onerror = () => {\r\n                console.error(\"Cannot delete skin from IDB. Please delete skin manually from DevTools.\", request.error);\r\n                reject(request.error);\r\n            };\r\n        });\r\n    }\r\n\r\n    static addToObjStore(value) {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"skins\", \"readwrite\");\r\n            const objStore = transaction.objectStore(\"skins\");\r\n\r\n            let request = objStore.add(value);\r\n\r\n            request.onsuccess = () => {\r\n                console.log(\"Skin added to IDB\", request.result);\r\n                resolve();\r\n            };\r\n\r\n            request.onerror = () => {\r\n                console.error(\"Cannot add skin to IDB\", request.error);\r\n                reject(request.error);\r\n            };\r\n        });\r\n    }\r\n\r\n    static setupSkins(skin) {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"defaultSkins\", \"readwrite\");\r\n            const objStore = transaction.objectStore(\"defaultSkins\");\r\n\r\n            let request = objStore.add(\r\n                {\r\n                    base64s: {},\r\n                    samples: {},\r\n                },\r\n                skin\r\n            );\r\n\r\n            request.onsuccess = () => {\r\n                console.log(`Initialized ${skin} to IDB`, request.result);\r\n                resolve();\r\n            };\r\n\r\n            request.onerror = () => {\r\n                console.error(`Cannot add ${skin} to IDB`, request.error);\r\n                reject(request.error);\r\n            };\r\n        })\r\n    }\r\n\r\n    static skinSetupPromises = {}\r\n\r\n\r\n    static async getDefaults(type, value, skin) {\r\n        return new Promise(async (resolve, reject) => {\r\n            let transaction = Database.db.transaction(\"defaultSkins\", \"readwrite\");\r\n            let objStore = transaction.objectStore(\"defaultSkins\");\r\n            const allKeys = await this.getAllDefaultKeys();\r\n\r\n            if (!allKeys.includes(skin)) {\r\n                this.skinSetupPromises[skin] ??= Database.setupSkins(skin);\r\n\r\n                await this.skinSetupPromises[skin];\r\n            }\r\n\r\n            transaction = Database.db.transaction(\"defaultSkins\", \"readwrite\");\r\n            objStore = transaction.objectStore(\"defaultSkins\");\r\n\r\n            const request = objStore.get(skin);\r\n\r\n            request.onsuccess = async (event) => {\r\n                const skinJson = event.target.result;\r\n                // console.log(`Asking for ${skin}/${value}`)\r\n                document.querySelector(\"#loadingText\").innerHTML = `Initializing: Default Skins.\\n(${skin}: ${value})\\nMight take a while on first load.`;\r\n                if (skinJson[type][value]) {\r\n                    resolve(skinJson[type][value]);\r\n                    return;\r\n                }\r\n\r\n                if (type === \"base64s\") {\r\n                    const base64 = await imageToBase64(`/static/${skin}/${value}.png`);\r\n                    skinJson[type][value] = base64;\r\n\r\n                    console.log(skinJson);\r\n\r\n                    transaction = Database.db.transaction(\"defaultSkins\", \"readwrite\");\r\n                    objStore = transaction.objectStore(\"defaultSkins\");\r\n                    const request = objStore.put(skinJson, skin);\r\n\r\n                    request.onsuccess = () => {\r\n                        console.log(`Initialized ${skin}/${value} to IDB`, request.result);\r\n                        resolve(base64);\r\n                    };\r\n\r\n                    request.onerror = () => {\r\n                        console.error(`Cannot add ${skin} to IDB`, request.error);\r\n                        reject(request.error);\r\n                    };\r\n\r\n                    return;\r\n                }\r\n\r\n                const res = (\r\n                    await axios.get(`/static/${skin}/${value}.wav`, {\r\n                        responseType: \"arraybuffer\",\r\n                    })\r\n                ).data;\r\n                skinJson[type][value] = res;\r\n\r\n                transaction = Database.db.transaction(\"defaultSkins\", \"readwrite\");\r\n                objStore = transaction.objectStore(\"defaultSkins\");\r\n                const request = objStore.put(skinJson, skin);\r\n\r\n                request.onsuccess = () => {\r\n                    console.log(`Initialized ${skin}/${value} to IDB`, request.result);\r\n                    resolve(res);\r\n                };\r\n\r\n                request.onerror = () => {\r\n                    console.error(`Cannot add ${skin} to IDB`, request.error);\r\n                    reject(request.error);\r\n                };\r\n            };\r\n\r\n            request.onerror = (event) => {\r\n                reject(request.error);\r\n            };\r\n        });\r\n    }\r\n\r\n    static getAllKeys() {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"skins\", \"readonly\");\r\n\r\n            const objStore = transaction.objectStore(\"skins\");\r\n\r\n            objStore.getAllKeys().onsuccess = (event) => {\r\n                resolve(event.target.result);\r\n            };\r\n\r\n            objStore.getAllKeys().onerror = (event) => {\r\n                reject(event);\r\n            };\r\n        });\r\n    }\r\n\r\n    static getAllDefaultKeys() {\r\n        return new Promise((resolve, reject) => {\r\n            const transaction = Database.db.transaction(\"defaultSkins\", \"readonly\");\r\n\r\n            const objStore = transaction.objectStore(\"defaultSkins\");\r\n\r\n            objStore.getAllKeys().onsuccess = (event) => {\r\n                resolve(event.target.result);\r\n            };\r\n\r\n            objStore.getAllKeys().onerror = (event) => {\r\n                reject(event);\r\n            };\r\n        });\r\n    }\r\n}\r\n","import { Game } from \"./scripts/Game.js\";\r\nimport { loadLocalStorage } from \"./scripts/Utils.js\";\r\nimport { Texture } from \"./scripts/Texture.js\";\r\nimport { BeatmapFile } from \"./scripts/BeatmapFile.js\";\r\nimport { urlParams } from \"./scripts/GlobalVariables.js\";\r\n// import { toggleSidePanel } from \"./scripts/SidePanel.js\";\r\nimport { toggleTimingPanel } from \"./scripts/BPM.js\";\r\nimport { openMenu } from \"./scripts/Settings.js\";\r\nimport { toggleMetadataPanel } from \"./scripts/SidePanel.js\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { readZip } from \"./scripts/InputBar.js\";\r\n\r\ndocument.querySelector(\".loading\").style.opacity = 1;\r\ndocument.querySelector(\"#loadingText\").textContent = `Initializing\\nMight take a while on first load.`;\r\n\r\nPIXI.BitmapFont.install({\r\n    name: \"Torus\",\r\n    style: {\r\n        fontSize: 15,\r\n        align: \"right\",\r\n        fill: \"white\",\r\n        fontFamily: \"Torus\",\r\n        fontWeight: 400,\r\n    },\r\n    chars: [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \". :\\n\"],\r\n});\r\n\r\nPIXI.BitmapFont.install({\r\n    name: \"Torus16\",\r\n    style: {\r\n        fontSize: 16,\r\n        align: \"center\",\r\n        fill: \"white\",\r\n        fontFamily: \"Torus\",\r\n        fontWeight: 400,\r\n    },\r\n    chars: [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \". :\\n\"],\r\n});\r\n\r\nPIXI.BitmapFont.install({\r\n    name: \"Nicolatte\",\r\n    style: {\r\n        fontSize: 15,\r\n        align: \"right\",\r\n        fill: \"white\",\r\n        fontFamily: \"Nicolatte\",\r\n        fontWeight: 600,\r\n        letterSpacing: 5,\r\n    },\r\n    chars: [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \". :\\n\"],\r\n});\r\n\r\nPIXI.UniformGroup;\r\n\r\nfunction setupDefaultStorage() {\r\n    const settingsTemplate = {\r\n        renderer: {\r\n            val: \"webgl\",\r\n            resolution: 1,\r\n            aa: false\r\n        },\r\n        mirror: {\r\n            val: \"nerinyan\",\r\n            custom: \"\",\r\n        },\r\n        mapping: {\r\n            beatsnap: 4,\r\n            offset: 0,\r\n            showGreenLine: false,\r\n        },\r\n        background: {\r\n            dim: 0.8,\r\n            blur: 0,\r\n            video: false,\r\n            storyboard: false,\r\n            transcodeVideo: false,\r\n        },\r\n        volume: {\r\n            master: 1,\r\n            music: 0.5,\r\n            hs: 0.2,\r\n            disableBMHS: false,\r\n        },\r\n        skinning: {\r\n            type: \"0\",\r\n            val: \"-1\",\r\n        },\r\n        sliderAppearance: {\r\n            snaking: true,\r\n            sliderend: true,\r\n            hitAnim: true,\r\n            ignoreSkin: false,\r\n            showGrid: true,\r\n            disablePerfect: false,\r\n        },\r\n        timeline: {\r\n            zoomRate: 200,\r\n        },\r\n    };\r\n\r\n    if (!localStorage.getItem(\"settings\")) {\r\n        localStorage.setItem(\"settings\", JSON.stringify(settingsTemplate));\r\n    } else {\r\n        const currentLocalStorage = JSON.parse(localStorage.getItem(\"settings\"));\r\n        Object.keys(settingsTemplate).forEach((k) => {\r\n            if (currentLocalStorage[k] === undefined) currentLocalStorage[k] = settingsTemplate[k];\r\n\r\n            Object.keys(settingsTemplate[k]).forEach((k2) => {\r\n                if (currentLocalStorage[k][k2] === undefined) currentLocalStorage[k][k2] = settingsTemplate[k][k2];\r\n            });\r\n        });\r\n\r\n        localStorage.setItem(\"settings\", JSON.stringify(currentLocalStorage));\r\n    }\r\n}\r\n\r\n(async () => {\r\n    try {\r\n        const adapter = await navigator.gpu.requestAdapter();\r\n        const device = adapter && (await adapter.requestDevice());\r\n        const maxTextures = device?.limits.maxSampledTexturesPerShaderStage;\r\n        if (maxTextures) {\r\n            PIXI.Batcher.defaultOptions.maxTextures = maxTextures;\r\n        }\r\n    } catch (error) {\r\n        console.warn(\"Failed to configure Batcher with WebGPU limits:\", error);\r\n    }\r\n\r\n    if (urlParams.get(\"fullscreen\") === \"true\") {\r\n        document.body.style.padding = 0;\r\n        document.querySelector(\"#inputContainer\").style.maxHeight = 0;\r\n        document.querySelector(\"#inputContainer\").style.padding = 0;\r\n        document.querySelector(\"#inputContainer\").style.margin = 0;\r\n    }\r\n\r\n    setupDefaultStorage();\r\n\r\n    const baseSettings = JSON.parse(localStorage.getItem(\"settings\"));\r\n    Game.MASTER_VOL = baseSettings.volume.master;\r\n    Game.MUSIC_VOL = baseSettings.volume.music;\r\n    Game.HS_VOL = baseSettings.volume.hs;\r\n    Game.DISABLE_BMHS = baseSettings.volume.disableBMHS;\r\n    Game.SLIDER_APPEARANCE = baseSettings.sliderAppearance;\r\n    Game.SKINNING = baseSettings.skinning;\r\n    Game.MAPPING = baseSettings.mapping;\r\n    Game.IS_VIDEO = baseSettings.background.video;\r\n\r\n    // Init\r\n    await Game.init();\r\n    await loadLocalStorage();\r\n\r\n    await Texture.generateDefaultTextures();\r\n\r\n    document.querySelector(\".loading\").style.opacity = 0;\r\n    document.querySelector(\".loading\").style.display = \"none\";\r\n    document.querySelector(\".switchMirrorContainer\").style.display = \"flex\";\r\n\r\n    document.body.addEventListener(\"keydown\", (e) => {\r\n        switch (e.key) {\r\n            case \"F6\": {\r\n                e.preventDefault();\r\n                break;\r\n            }\r\n            case \"F4\": {\r\n                e.preventDefault();\r\n                break;\r\n            }\r\n            case \"o\": {\r\n                if (e.ctrlKey) e.preventDefault();\r\n                break;\r\n            }\r\n        }\r\n    });\r\n\r\n    document.body.addEventListener(\"keyup\", (e) => {\r\n        switch (e.key) {\r\n            case \"F6\": {\r\n                e.preventDefault();\r\n                toggleTimingPanel();\r\n                break;\r\n            }\r\n            case \"F4\": {\r\n                e.preventDefault();\r\n                // toggleSidePanel(\"metadata\");\r\n                toggleMetadataPanel();\r\n                break;\r\n            }\r\n            case \"o\": {\r\n                if (e.ctrlKey) {\r\n                    e.preventDefault();\r\n                    openMenu();\r\n                }\r\n\r\n                break;\r\n            }\r\n        }\r\n    });\r\n\r\n    document.querySelector(\".contentWrapper\").addEventListener(\r\n        \"wheel\",\r\n        (e) => {\r\n            if (e.ctrlKey) e.preventDefault();\r\n        },\r\n        {\r\n            capture: true,\r\n            passive: false,\r\n        }\r\n    );\r\n\r\n    if (/#[(http(s)?):\\/\\/(www\\.)?a-zA-Z0-9@:%._\\+~#=-]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/gi.test(window.location.hash)) {\r\n        const url = window.location.hash.slice(1);\r\n        console.log(url);\r\n        const blob = await BeatmapFile.downloadCustom(url);\r\n\r\n        readZip(blob);\r\n    }\r\n\r\n    if (urlParams.get(\"b\") && /[0-9]+/g.test(urlParams.get(\"b\"))) {\r\n        Game.BEATMAP_FILE = new BeatmapFile(urlParams.get(\"b\"));\r\n        document.querySelector(\"#mapInput\").value = urlParams.get(\"b\");\r\n\r\n        return;\r\n    }\r\n})();\r\n","import { Skinning } from \"./Skinning.js\";\r\nimport { readZip } from \"./InputBar.js\";\r\nimport { ScoreParser } from \"./ScoreParser.js\";\r\n\r\ndocument.querySelector(\".contentWrapper\").addEventListener(\"dragover\", function (e) {\r\n    e.preventDefault();\r\n});\r\n\r\ndocument.querySelector(\".contentWrapper\").addEventListener(\"drop\", function (e) {\r\n    e.preventDefault();\r\n    if (!e.dataTransfer.files.length) return;\r\n\r\n    const file = e.dataTransfer.files[0];\r\n    if (![\"osz\", \"osr\", \"osk\"].includes(file.name.split(\".\").at(-1))) return;\r\n\r\n    if (file.name.split(\".\").at(-1) === \"osr\") {\r\n        ScoreParser.reset();\r\n        const parser = new ScoreParser(file);\r\n        parser.getReplayData();\r\n        return;\r\n    }\r\n\r\n    if (file.name.split(\".\").at(-1) === \"osk\") {\r\n        Skinning.import(file);\r\n        return;\r\n    }\r\n\r\n    ScoreParser.reset();\r\n\r\n    document.querySelector(\"#close\").disabled = true;\r\n    readZip(file);\r\n});\r\n"],"file":"assets/index-oASneL5v.js"}